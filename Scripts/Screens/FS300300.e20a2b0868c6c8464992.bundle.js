/*! For license information please see FS300300.e20a2b0868c6c8464992.bundle.js.LICENSE.txt */
(()=>{var e,n,r,i,o,s={"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].use[1]!./static/basic-layout.css":(e,n,r)=>{var i=r("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),o=r("./node_modules/css-loader/dist/runtime/api.js")(i);o.push([e.id,":root {\r\n\t--qp-maximum-form-width: 1600px;\r\n\t--qp-default-label-width: 140px;\r\n\t--qp-label-zoom: 1;\r\n\t/* --qp-lg-breakpoint: 1140px;\r\n\t--qp-md-breakpoint: 692px; */\r\n}\r\n\r\n.v-stack-children > *,\r\n.v-stack {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\toverflow-x: auto;\r\n\theight: 100%;\r\n\tgap: 0 var(--qp-sections-column-gap);\r\n}\r\n\r\n.stretch {\r\n\theight: 100%;\r\n}\r\n\r\n.fixed-height,\r\n.no-stretch {\r\n\theight: auto;\r\n}\r\n\r\n.v-stack > qp-grid,\r\n.v-stack > *.stretch {\r\n\tflex: 1;\r\n}\r\n\r\n.v-stack > qp-grid > .grid-details,\r\n.v-stack > *.stretch > .grid-details {\r\n\theight: 100%;\r\n}\r\n\r\n/* .summary-transparent {\r\n\tpadding: 0 0;\r\n} */\r\n\r\n.unlimited-width .expandable-width,\r\n.full-width .expandable-width {\r\n\tmax-width: none;\r\n\tflex-grow: 1;\r\n}\r\n\r\n.h-stack {\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\tflex-wrap: wrap;\r\n\t/* padding-right: 5px; */\r\n\tgap: 0 var(--qp-sections-column-gap);\r\n\t/* margin-bottom: 5px; */\r\n}\r\n\r\n/* .invisible-pane {\r\n\tpadding: 0 25px;\r\n} */\r\n\r\n@container qp-screen (min-width: 1600px) {\r\n\t.label-wrapper {\r\n\t\t--qp-label-zoom: 1.2;\r\n\t}\r\n}\r\n@container qp-screen (min-width: 1400px) and (max-width: 1600px) {\r\n\t.label-wrapper {\r\n\t\t--qp-label-zoom: 1.1;\r\n\t}\r\n}\r\n@container qp-screen (min-width: 1140px ) and (max-width: 1400px) { /* LG */\r\n\t.label-wrapper {\r\n\t\t--qp-label-zoom: 1;\r\n\t}\r\n}\r\n@container qp-screen (min-width: 992px) and (max-width: 1140px) { /* MD + */\r\n\t.label-wrapper {\r\n\t\t--qp-label-zoom: 1.2;\r\n\t}\r\n}\r\n@container qp-screen (min-width: 842px) and (max-width: 992px) { /* MD */\r\n\t.label-wrapper {\r\n\t\t--qp-label-zoom: 1;\r\n\t}\r\n}\r\n@container qp-screen (min-width: 692px) and (max-width: 842px) { /* MD - */\r\n\t.label-wrapper {\r\n\t\t--qp-label-zoom: 0.75;\r\n\t}\r\n}\r\n@container qp-screen (min-width: 542px) and (max-width: 692px) { /* SM + */\r\n\t.label-wrapper {\r\n\t\t--qp-label-zoom: 1.2;\r\n\t}\r\n}\r\n@container qp-screen (min-width: 0) and (max-width: 542px) { /* SM - */\r\n\t.label-wrapper {\r\n\t\t--qp-label-zoom: 1;\r\n\t}\r\n}\r\n\r\n\r\n@media (min-width: 1140px) { /* LG */\r\n\t.col-lg-0 {\r\n\t\tdisplay: none;\r\n\t}\r\n\t.col-lg-1_24 {\r\n\t\twidth: calc( ( 100% + var(--qp-sections-column-gap) ) / 24 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-1 {\r\n\t\twidth: calc( 1 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-3_24 {\r\n\t\twidth: calc( 3 * ( 100% + var(--qp-sections-column-gap) ) / 24 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-2 {\r\n\t\twidth: calc( 2 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-5_24 {\r\n\t\twidth: calc( 5 * ( 100% + var(--qp-sections-column-gap) ) / 24 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-3 {\r\n\t\twidth: calc( 3 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-7_24 {\r\n\t\twidth: calc( 7 * ( 100% + var(--qp-sections-column-gap) ) / 24 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-4 {\r\n\t\twidth: calc( 4 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-9_24 {\r\n\t\twidth: calc( 9 * ( 100% + var(--qp-sections-column-gap) ) / 24 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-5 {\r\n\t\twidth: calc( 5 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-11_24 {\r\n\t\twidth: calc( 11 * ( 100% + var(--qp-sections-column-gap) ) / 24 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-6 {\r\n\t\twidth: calc( 6 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-13_24 {\r\n\t\twidth: calc( 13 * ( 100% + var(--qp-sections-column-gap) ) / 24 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-7 {\r\n\t\twidth: calc( 7 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-15_24 {\r\n\t\twidth: calc( 15 * ( 100% + var(--qp-sections-column-gap) ) / 24 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-8 {\r\n\t\twidth: calc( 8 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-17_24 {\r\n\t\twidth: calc( 17 * ( 100% + var(--qp-sections-column-gap) ) / 24 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-9 {\r\n\t\twidth: calc( 9 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-19_24 {\r\n\t\twidth: calc( 19 * ( 100% + var(--qp-sections-column-gap) ) / 24 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-10 {\r\n\t\twidth: calc( 10 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-21_24 {\r\n\t\twidth: calc( 21 * ( 100% + var(--qp-sections-column-gap) ) / 24 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-11 {\r\n\t\twidth: calc( 11 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-23_24 {\r\n\t\twidth: calc( 23 * ( 100% + var(--qp-sections-column-gap) ) / 24 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-12 {\r\n\t\twidth: 100%;\r\n\t}\r\n}\r\n\r\n@container qp-screen (min-width: 1140px) { /* LG */\r\n\t.col-lg-0 {\r\n\t\tdisplay: none !important;\r\n\t}\r\n\t.col-lg-1_24 {\r\n\t\twidth: calc( ( 100% + var(--qp-sections-column-gap) ) / 24 - var(--qp-sections-column-gap) ) !important;\r\n\t\tmax-width: calc( ( var(--qp-maximum-form-width) + var(--qp-sections-column-gap) ) / 24 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-1 {\r\n\t\twidth: calc( 1 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) ) !important;\r\n\t\tmax-width: calc( 1 * ( var(--qp-maximum-form-width) + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-3_24 {\r\n\t\twidth: calc( 3 * ( 100% + var(--qp-sections-column-gap) ) / 24 - var(--qp-sections-column-gap) ) !important;\r\n\t\tmax-width: calc( 3 * ( var(--qp-maximum-form-width) + var(--qp-sections-column-gap) ) / 24 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-2 {\r\n\t\twidth: calc( 2 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) ) !important;\r\n\t\tmax-width: calc( 2 * ( var(--qp-maximum-form-width) + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-5_24 {\r\n\t\twidth: calc( 5 * ( 100% + var(--qp-sections-column-gap) ) / 24 - var(--qp-sections-column-gap) ) !important;\r\n\t\tmax-width: calc( 5 * ( var(--qp-maximum-form-width) + var(--qp-sections-column-gap) ) / 24 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-3 {\r\n\t\twidth: calc( 3 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) ) !important;\r\n\t\tmax-width: calc( 3 * ( var(--qp-maximum-form-width) + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-7_24 {\r\n\t\twidth: calc( 7 * ( 100% + var(--qp-sections-column-gap) ) / 24 - var(--qp-sections-column-gap) ) !important;\r\n\t\tmax-width: calc( 7 * ( var(--qp-maximum-form-width) + var(--qp-sections-column-gap) ) / 24 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-4 {\r\n\t\twidth: calc( 4 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) ) !important;\r\n\t\tmax-width: calc( 4 * ( var(--qp-maximum-form-width) + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-9_24 {\r\n\t\twidth: calc( 9 * ( 100% + var(--qp-sections-column-gap) ) / 24 - var(--qp-sections-column-gap) ) !important;\r\n\t\tmax-width: calc( 9 * ( var(--qp-maximum-form-width) + var(--qp-sections-column-gap) ) / 24 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-5 {\r\n\t\twidth: calc( 5 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) ) !important;\r\n\t\tmax-width: calc( 5 * ( var(--qp-maximum-form-width) + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-11_24 {\r\n\t\twidth: calc( 11 * ( 100% + var(--qp-sections-column-gap) ) / 24 - var(--qp-sections-column-gap) ) !important;\r\n\t\tmax-width: calc( 11 * ( var(--qp-maximum-form-width) + var(--qp-sections-column-gap) ) / 24 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-6 {\r\n\t\twidth: calc( 6 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) ) !important;\r\n\t\tmax-width: calc( 6 * ( var(--qp-maximum-form-width) + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-13_24 {\r\n\t\twidth: calc( 13 * ( 100% + var(--qp-sections-column-gap) ) / 24 - var(--qp-sections-column-gap) ) !important;\r\n\t\tmax-width: calc( 13 * ( var(--qp-maximum-form-width) + var(--qp-sections-column-gap) ) / 24 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-7 {\r\n\t\twidth: calc( 7 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) ) !important;\r\n\t\tmax-width: calc( 7 * ( var(--qp-maximum-form-width) + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-15_24 {\r\n\t\twidth: calc( 15 * ( 100% + var(--qp-sections-column-gap) ) / 24 - var(--qp-sections-column-gap) ) !important;\r\n\t\tmax-width: calc( 15 * ( var(--qp-maximum-form-width) + var(--qp-sections-column-gap) ) / 24 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-8 {\r\n\t\twidth: calc( 8 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) ) !important;\r\n\t\tmax-width: calc( 8 * ( var(--qp-maximum-form-width) + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-17_24 {\r\n\t\twidth: calc( 17 * ( 100% + var(--qp-sections-column-gap) ) / 24 - var(--qp-sections-column-gap) ) !important;\r\n\t\tmax-width: calc( 17 * ( var(--qp-maximum-form-width) + var(--qp-sections-column-gap) ) / 24 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-9 {\r\n\t\twidth: calc( 9 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) ) !important;\r\n\t\tmax-width: calc( 9 * ( var(--qp-maximum-form-width) + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-19_24 {\r\n\t\twidth: calc( 19 * ( 100% + var(--qp-sections-column-gap) ) / 24 - var(--qp-sections-column-gap) ) !important;\r\n\t\tmax-width: calc( 19 * ( var(--qp-maximum-form-width) + var(--qp-sections-column-gap) ) / 24 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-10 {\r\n\t\twidth: calc( 10 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) ) !important;\r\n\t\tmax-width: calc( 10 * ( var(--qp-maximum-form-width) + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-21_24 {\r\n\t\twidth: calc( 21 * ( 100% + var(--qp-sections-column-gap) ) / 24 - var(--qp-sections-column-gap) ) !important;\r\n\t\tmax-width: calc( 21 * ( var(--qp-maximum-form-width) + var(--qp-sections-column-gap) ) / 24 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-11 {\r\n\t\twidth: calc( 11 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) ) !important;\r\n\t\tmax-width: calc( 11 * ( var(--qp-maximum-form-width) + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-23_24 {\r\n\t\twidth: calc( 23 * ( 100% + var(--qp-sections-column-gap) ) / 24 - var(--qp-sections-column-gap) ) !important;\r\n\t\tmax-width: calc( 23 * ( var(--qp-maximum-form-width) + var(--qp-sections-column-gap) ) / 24 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-12 {\r\n\t\twidth: 100% !important;\r\n\t\tmax-width: var(--qp-maximum-form-width);\r\n\t}\r\n\r\n\t.col-lg-7_17 {\r\n\t\twidth: calc( 7 * ( 100% + var(--qp-sections-column-gap) ) / 17 - var(--qp-sections-column-gap) ) !important;\r\n\t\tmax-width: calc( 7 * ( var(--qp-maximum-form-width) + var(--qp-sections-column-gap) ) / 17 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-10_17 {\r\n\t\twidth: calc( 10 * ( 100% + var(--qp-sections-column-gap) ) / 17 - var(--qp-sections-column-gap) ) !important;\r\n\t\tmax-width: calc( 10 * ( var(--qp-maximum-form-width) + var(--qp-sections-column-gap) ) / 17 - var(--qp-sections-column-gap) );\r\n\t}\r\n\r\n\t.col-lg-17_48 {\r\n\t\twidth: calc( 17 * ( 100% + var(--qp-sections-column-gap) ) / 48 - var(--qp-sections-column-gap) ) !important;\r\n\t\tmax-width: calc( 17 * ( var(--qp-maximum-form-width) + var(--qp-sections-column-gap) ) / 48 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-lg-31_48 {\r\n\t\twidth: calc( 31 * ( 100% + var(--qp-sections-column-gap) ) / 48 - var(--qp-sections-column-gap) ) !important;\r\n\t\tmax-width: calc( 31 * ( var(--qp-maximum-form-width) + var(--qp-sections-column-gap) ) / 48 - var(--qp-sections-column-gap) );\r\n\t}\r\n\r\n\r\n\r\n}\r\n\r\n@media (min-width: 692px) and (max-width: 1140px) { /* MD */\r\n\t.col-md-0 {\r\n\t\tdisplay: none;\r\n\t}\r\n\t.col-md-1 {\r\n\t\t/* width: 6.5%; */\r\n\t\twidth: calc( ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-md-2 {\r\n\t\t/* width: 15%; */\r\n\t\twidth: calc( 2 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-md-3 {\r\n\t\t/* width: 23.5%; */\r\n\t\twidth: calc( 3 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-md-4 {\r\n\t\t/* width: 32%; */\r\n\t\twidth: calc( 4 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-md-5 {\r\n\t\t/* width: 40.5%; */\r\n\t\twidth: calc( 5 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-md-6 {\r\n\t\t/* width: 49%; */\r\n\t\twidth: calc( 6 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-md-7 {\r\n\t\t/* width: 57.5%; */\r\n\t\twidth: calc( 7 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-md-8 {\r\n\t\t/* width: 66%; */\r\n\t\twidth: calc( 8 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-md-9 {\r\n\t\t/* width: 74.5%; */\r\n\t\twidth: calc( 9 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-md-10 {\r\n\t\t/* width: 83%; */\r\n\t\twidth: calc( 10 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-md-11 {\r\n\t\t/* width: 91.5%; */\r\n\t\twidth: calc( 11 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-md-12 {\r\n\t\twidth: 100%;\r\n\t}\r\n}\r\n@container qp-screen (min-width: 692px) and (max-width: 1140px) { /* MD */\r\n\t.col-md-1 {\r\n\t\t/* width: 6.5%; */\r\n\t\twidth: calc( ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) ) !important;\r\n\t}\r\n\t.col-md-2 {\r\n\t\t/* width: 15%; */\r\n\t\twidth: calc( 2 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) ) !important;\r\n\t}\r\n\t.col-md-3 {\r\n\t\t/* width: 23.5%; */\r\n\t\twidth: calc( 3 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) ) !important;\r\n\t}\r\n\t.col-md-4 {\r\n\t\t/* width: 32%; */\r\n\t\twidth: calc( 4 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) ) !important;\r\n\t}\r\n\t.col-md-5 {\r\n\t\t/* width: 40.5%; */\r\n\t\twidth: calc( 5 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) ) !important;\r\n\t}\r\n\t.col-md-6 {\r\n\t\t/* width: 49%; */\r\n\t\twidth: calc( 6 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) ) !important;\r\n\t}\r\n\t.col-md-7 {\r\n\t\t/* width: 57.5%; */\r\n\t\twidth: calc( 7 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) ) !important;\r\n\t}\r\n\t.col-md-8 {\r\n\t\t/* width: 66%; */\r\n\t\twidth: calc( 8 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) ) !important;\r\n\t}\r\n\t.col-md-9 {\r\n\t\t/* width: 74.5%; */\r\n\t\twidth: calc( 9 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) ) !important;\r\n\t}\r\n\t.col-md-10 {\r\n\t\t/* width: 83%; */\r\n\t\twidth: calc( 10 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) ) !important;\r\n\t}\r\n\t.col-md-11 {\r\n\t\t/* width: 91.5%; */\r\n\t\twidth: calc( 11 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) ) !important;\r\n\t}\r\n\t.col-md-12 {\r\n\t\twidth: 100% !important;\r\n\t}\r\n}\r\n\r\n@media (min-width: 0) and (max-width: 692px) { /* SM */\r\n\t.col-sm-0 {\r\n\t\tdisplay: none;\r\n\t}\r\n\t.col-sm-1 {\r\n\t\t/* width: 6.5%; */\r\n\t\twidth: calc( ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-sm-2 {\r\n\t\t/* width: 15%; */\r\n\t\twidth: calc( 2 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-sm-3 {\r\n\t\t/* width: 23.5%; */\r\n\t\twidth: calc( 3 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-sm-4 {\r\n\t\t/* width: 32%; */\r\n\t\twidth: calc( 4 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-sm-5 {\r\n\t\t/* width: 40.5%; */\r\n\t\twidth: calc( 5 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-sm-6 {\r\n\t\t/* width: 49%; */\r\n\t\twidth: calc( 6 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-sm-7 {\r\n\t\t/* width: 57.5%; */\r\n\t\twidth: calc( 7 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-sm-8 {\r\n\t\t/* width: 66%; */\r\n\t\twidth: calc( 8 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-sm-9 {\r\n\t\t/* width: 74.5%; */\r\n\t\twidth: calc( 9 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-sm-10 {\r\n\t\t/* width: 83%; */\r\n\t\twidth: calc( 10 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-sm-11 {\r\n\t\t/* width: 91.5%; */\r\n\t\twidth: calc( 11 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) );\r\n\t}\r\n\t.col-sm-12 {\r\n\t\twidth: 100%;\r\n\t}\r\n\t.qp-field .size-s,\r\n\t.qp-field .size-l {\r\n\t\tmin-width: 100px !important;\r\n\t\twidth: 1px !important;\r\n\t\tflex-shrink: 0;\r\n\t\tflex-grow: 1 !important;\r\n\t}\r\n}\r\n@container qp-screen (min-width: 0) and (max-width: 692px) { /* SM */\r\n\t.col-sm-1 {\r\n\t\t/* width: 6.5%; */\r\n\t\twidth: calc( ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) ) !important;\r\n\t}\r\n\t.col-sm-2 {\r\n\t\t/* width: 15%; */\r\n\t\twidth: calc( 2 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) ) !important;\r\n\t}\r\n\t.col-sm-3 {\r\n\t\t/* width: 23.5%; */\r\n\t\twidth: calc( 3 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) ) !important;\r\n\t}\r\n\t.col-sm-4 {\r\n\t\t/* width: 32%; */\r\n\t\twidth: calc( 4 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) ) !important;\r\n\t}\r\n\t.col-sm-5 {\r\n\t\t/* width: 40.5%; */\r\n\t\twidth: calc( 5 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) ) !important;\r\n\t}\r\n\t.col-sm-6 {\r\n\t\t/* width: 49%; */\r\n\t\twidth: calc( 6 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) ) !important;\r\n\t}\r\n\t.col-sm-7 {\r\n\t\t/* width: 57.5%; */\r\n\t\twidth: calc( 7 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) ) !important;\r\n\t}\r\n\t.col-sm-8 {\r\n\t\t/* width: 66%; */\r\n\t\twidth: calc( 8 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) ) !important;\r\n\t}\r\n\t.col-sm-9 {\r\n\t\t/* width: 74.5%; */\r\n\t\twidth: calc( 9 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) ) !important;\r\n\t}\r\n\t.col-sm-10 {\r\n\t\t/* width: 83%; */\r\n\t\twidth: calc( 10 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) ) !important;\r\n\t}\r\n\t.col-sm-11 {\r\n\t\t/* width: 91.5%; */\r\n\t\twidth: calc( 11 * ( 100% + var(--qp-sections-column-gap) ) / 12 - var(--qp-sections-column-gap) ) !important;\r\n\t}\r\n\t.col-sm-12 {\r\n\t\twidth: 100% !important;\r\n\t}\r\n\t.qp-field .size-s,\r\n\t.qp-field .size-l {\r\n\t\tmin-width: 100px !important;\r\n\t\twidth: 1px !important;\r\n\t\tflex-shrink: 0;\r\n\t\tflex-grow: 1 !important;\r\n\t}\r\n}\r\n\r\n\r\n.col-auto {\r\n\twidth: auto !important;\r\n}\r\n.col-1 {\r\n\tflex-grow: initial !important;\r\n\twidth: calc( ( 100% + 10px ) / 12 - 10px ) !important;\r\n}\r\n.col-2 {\r\n\tflex-grow: initial !important;\r\n\twidth: calc( 2 * ( 100% + 10px ) / 12 - 10px ) !important;\r\n}\r\n.col-3 {\r\n\tflex-grow: initial !important;\r\n\twidth: calc( 3 * ( 100% + 10px ) / 12 - 10px ) !important;\r\n}\r\n.col-4 {\r\n\tflex-grow: initial !important;\r\n\twidth: calc( 4 * ( 100% + 10px ) / 12 - 10px ) !important;\r\n}\r\n.col-5 {\r\n\tflex-grow: initial !important;\r\n\twidth: calc( 5 * ( 100% + 10px ) / 12 - 10px ) !important;\r\n}\r\n.col-6 {\r\n\tflex-grow: initial !important;\r\n\twidth: calc( 6 * ( 100% + 10px ) / 12 - 10px ) !important;\r\n}\r\n.col-7 {\r\n\tflex-grow: initial !important;\r\n\twidth: calc( 7 * ( 100% + 10px ) / 12 - 10px ) !important;\r\n}\r\n.col-8 {\r\n\tflex-grow: initial !important;\r\n\twidth: calc( 8 * ( 100% + 10px ) / 12 - 10px ) !important;\r\n}\r\n.col-9 {\r\n\tflex-grow: initial !important;\r\n\twidth: calc( 9 * ( 100% + 10px ) / 12 - 10px ) !important;\r\n}\r\n.col-10 {\r\n\tflex-grow: initial !important;\r\n\twidth: calc( 10 * ( 100% + 10px ) / 12 - 10px ) !important;\r\n}\r\n.col-11 {\r\n\tflex-grow: initial !important;\r\n\twidth: calc( 11 * ( 100% + 10px ) / 12 - 10px ) !important;\r\n}\r\n.col-12 {\r\n\tflex-grow: initial !important;\r\n\twidth: 100% !important;\r\n}\r\n",""]),e.exports=o},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].use[1]!./static/custom.css":(e,n,r)=>{var i=r("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),o=r("./node_modules/css-loader/dist/runtime/api.js")(i);o.push([e.id,".red-cell {\r\n\tbackground-color: red !important;\r\n}\r\n\r\n.yellow-column {\r\n\tbackground-color: yellow !important;\r\n}\r\n\r\n.bold-row {\r\n\tfont-weight: 800 !important;\r\n}\r\n",""]),e.exports=o},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].use[1]!./static/font-awesome.css":(e,n,r)=>{var i=r("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),o=r("./node_modules/css-loader/dist/runtime/api.js"),s=r("./node_modules/css-loader/dist/runtime/getUrl.js"),a=r("./fonts/acumatica-font-v1.eot?q9otuf"),l=r("./fonts/acumatica-font-v1.woff2?q9otuf"),c=r("./fonts/acumatica-font-v1.ttf?q9otuf"),d=r("./fonts/acumatica-font-v1.woff?q9otuf"),u=r("./fonts/acumatica-font-v1.svg?q9otuf"),h=o(i),g=s(a),p=s(a,{hash:"#iefix"}),m=s(l),f=s(c),b=s(d),v=s(u,{hash:"#acumatica-font-v1"});h.push([e.id,"\r\n@font-face {\r\n\tfont-family: 'FontAwesome';\r\n\tsrc:  url("+g+");\r\n\tsrc:  url("+p+") format('embedded-opentype'),\r\n\t  url("+m+") format('woff2'),\r\n\t  url("+f+") format('truetype'),\r\n\t  url("+b+") format('woff'),\r\n\t  url("+v+') format(\'svg\');\r\n\tfont-weight: normal;\r\n  font-style: normal;\r\n}\r\n\r\n.ac, .ac-icon-img {\r\n\tdisplay: inline-block;\r\n\tfont: normal normal normal 14px/1 \'FontAwesome\';\r\n\tfont-size: inherit;\r\n\ttext-rendering: auto;\r\n\t-webkit-font-smoothing: antialiased;\r\n\t-moz-osx-font-smoothing: grayscale;\r\n}\r\n\r\n\r\n.ac-lg {\r\n\tfont-size: 1.33333333em;\r\n\tline-height: 0.75em;\r\n\tvertical-align: -15%;\r\n}\r\n\r\n.ac-2x {\r\n\tfont-size: 2em;\r\n}\r\n\r\n.ac-3x {\r\n\tfont-size: 3em;\r\n}\r\n\r\n.ac-4x {\r\n\tfont-size: 4em;\r\n}\r\n\r\n.ac-5x {\r\n\tfont-size: 5em;\r\n}\r\n\r\n\r\n.ac-fw {\r\n\twidth: 1.28571429em;\r\n\ttext-align: center;\r\n}\r\n\r\n\r\n.ac-ul {\r\n\tpadding-left: 0;\r\n\tmargin-left: 2.14285714em;\r\n\tlist-style-type: none;\r\n}\r\n\r\n\t.ac-ul > li {\r\n\t\tposition: relative;\r\n\t}\r\n\r\n.ac-li {\r\n\tposition: absolute;\r\n\tleft: -2.14285714em;\r\n\twidth: 2.14285714em;\r\n\ttop: 0.14285714em;\r\n\ttext-align: center;\r\n}\r\n\r\n\t.ac-li.ac-lg {\r\n\t\tleft: -1.85714286em;\r\n\t}\r\n\r\n\t\r\n.ac-border {\r\n\tpadding: .2em .25em .15em;\r\n\tborder: solid 0.08em #eeeeee;\r\n\tborder-radius: .1em;\r\n}\r\n\r\n.ac-pull-left {\r\n  float: left;\r\n}\r\n.ac-pull-right {\r\n  float: right;\r\n}\r\n.ac.ac-pull-left {\r\n  margin-right: .3em;\r\n}\r\n.ac.ac-pull-right {\r\n  margin-left: .3em;\r\n}\r\n\r\n.ac-spin {\r\n\t-webkit-animation: ac-spin 2s infinite linear;\r\n\tanimation: ac-spin 2s infinite linear;\r\n}\r\n\r\n.ac-pulse {\r\n\t-webkit-animation: ac-spin 1s infinite steps(8);\r\n\tanimation: ac-spin 1s infinite steps(8);\r\n}\r\n\r\n@-webkit-keyframes ac-spin {\r\n\t0% {\r\n\t\t-webkit-transform: rotate(0deg);\r\n\t\ttransform: rotate(0deg);\r\n\t}\r\n\r\n\t100% {\r\n\t\t-webkit-transform: rotate(359deg);\r\n\t\ttransform: rotate(359deg);\r\n\t}\r\n}\r\n\r\n@keyframes ac-spin {\r\n\t0% {\r\n\t\t-webkit-transform: rotate(0deg);\r\n\t\ttransform: rotate(0deg);\r\n\t}\r\n\r\n\t100% {\r\n\t\t-webkit-transform: rotate(359deg);\r\n\t\ttransform: rotate(359deg);\r\n\t}\r\n}\r\n\r\n\r\n.ac-rotate-90 {\r\n\tfilter: "progid: DXImageTransform.Microsoft.BasicImage(rotation=1)";\r\n\t-webkit-transform: rotate(90deg);\r\n\t-ms-transform: rotate(90deg);\r\n\ttransform: rotate(90deg);\r\n}\r\n\r\n.ac-rotate-180 {\r\n\tfilter: "progid: DXImageTransform.Microsoft.BasicImage(rotation=2)";\r\n\t-webkit-transform: rotate(180deg);\r\n\t-ms-transform: rotate(180deg);\r\n\ttransform: rotate(180deg);\r\n}\r\n\r\n.ac-rotate-270 {\r\n\tfilter: "progid: DXImageTransform.Microsoft.BasicImage(rotation=3)";\r\n\t-webkit-transform: rotate(270deg);\r\n\t-ms-transform: rotate(270deg);\r\n\ttransform: rotate(270deg);\r\n}\r\n\r\n.ac-flip-horizontal {\r\n\tfilter: "progid: DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";\r\n\t-webkit-transform: scale(-1, 1);\r\n\t-ms-transform: scale(-1, 1);\r\n\ttransform: scale(-1, 1);\r\n}\r\n\r\n.ac-flip-vertical {\r\n\tfilter: "progid: DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\r\n\t-webkit-transform: scale(1, -1);\r\n\t-ms-transform: scale(1, -1);\r\n\ttransform: scale(1, -1);\r\n}\r\n\r\n:root .ac-rotate-90,\r\n:root .ac-rotate-180,\r\n:root .ac-rotate-270,\r\n:root .ac-flip-horizontal,\r\n:root .ac-flip-vertical {\r\n\tfilter: none;\r\n}\r\n\r\n\r\n.ac-stack {\r\n\tposition: relative;\r\n\tdisplay: inline-block;\r\n\twidth: 2em;\r\n\theight: 2em;\r\n\tline-height: 2em;\r\n\tvertical-align: middle;\r\n}\r\n\r\n.ac-stack-1x,\r\n.ac-stack-2x {\r\n\tposition: absolute;\r\n\tleft: 0;\r\n\twidth: 100%;\r\n\ttext-align: center;\r\n}\r\n\r\n.ac-stack-1x {\r\n\tline-height: inherit;\r\n}\r\n\r\n.ac-stack-2x {\r\n\tfont-size: 2em;\r\n}\r\n\r\n.ac-SortAsc:before {\r\n  content: "\\ea3f";\r\n}\r\n.ac-SortDesc:before {\r\n  content: "\\ea40";\r\n}\r\n.ac-home:before {\r\n  content: "\\ea3d";\r\n}\r\n.ac-drag:before {\r\n  content: "\\ea3b";\r\n}\r\n.ac-duplicate:before {\r\n  content: "\\ea3c";\r\n}\r\n.main-SaveClose:before {\r\n  content: "\\ea39";\r\n}\r\n.ac-plus_dollar:before {\r\n  content: "\\e9fb";\r\n}\r\n.ac-payroll:before {\r\n  content: "\\e9f4";\r\n}\r\n.ac-TabOff:before {\r\n  content: "\\e9ef";\r\n}\r\n.ac-TabOn:before {\r\n  content: "\\e9f3";\r\n}\r\n.ac-basket:before {\r\n  content: "\\e9ec";\r\n}\r\n.ac-inverse {\r\n\tcolor: #ffffff;\r\n}\r\n.ac-compliance:before {\r\n  content: "\\e900";\r\n}\r\n.ac-cran:before {\r\n  content: "\\e91b";\r\n}\r\n.ac-helmet:before {\r\n  content: "\\e9a5";\r\n}\r\n.ac-todo:before {\r\n  content: "\\e935";\r\n}\r\n.ac-row_security:before {\r\n  content: "\\e996";\r\n}\r\n.ac-progress:before {\r\n  content: "\\e9de";\r\n}\r\n.ac-hat:before {\r\n  content: "\\e9e2";\r\n}\r\n.ac-flow:before {\r\n  content: "\\e9e3";\r\n}\r\n.ac-curcles:before {\r\n  content: "\\e9e4";\r\n}\r\n.ac-badge:before {\r\n  content: "\\e9eb";\r\n}\r\n.ac-warning:before {\r\n  content: "\\e9fe";\r\n}\r\n.sad:before {\r\n  content: "\\e9da";\r\n  color: #b6b6b6;\r\n}\r\n.control-MenuCheck:before {\r\n  content: "\\e92a";\r\n}\r\n.control-UnCheck:before {\r\n  content: "\\e9db";\r\n}\r\n.text-Params:before {\r\n  content: "\\e9cf";\r\n}\r\n.text-Anchor:before {\r\n  content: "\\e9d5";\r\n}\r\n.text-JustifyCenter:before {\r\n  content: "\\ea2b";\r\n}\r\n.text-DelColumn:before {\r\n  content: "\\e9ca";\r\n  color: rgb(51, 51, 51);\r\n}\r\n.text-DelColumn:after {\r\n  content: "\\e9cb";\r\n  position:absolute;top:0;left:0;\r\n  color: rgb(83, 178, 255);\r\n}\r\n.text-ColumnAfter:before {\r\n  content: "\\e9d6";\r\n  color: rgb(51, 51, 51);\r\n}\r\n.text-ColumnAfter:after {\r\n  content: "\\e9d8";\r\n  position:absolute;top:0;left:0;\r\n  color: rgb(83, 178, 255);\r\n}\r\n.text-ColumnBefore:before {\r\n  content: "\\e9df";\r\n  color: rgb(51, 51, 51);\r\n}\r\n.text-ColumnBefore:after {\r\n  content: "\\e9e1";\r\n  position:absolute;top:0;left:0;\r\n  color: rgb(83, 178, 255);\r\n}\r\n.text-DelRow:before {\r\n  content: "\\e9e9";\r\n  color: rgb(51, 51, 51);\r\n}\r\n.text-DelRow:after {\r\n  content: "\\e9ea";\r\n  position:absolute;top:0;left:0;\r\n  color: rgb(83, 178, 255);\r\n}\r\n.text-RowAfter:before {\r\n  content: "\\e9f0";\r\n  color: rgb(51, 51, 51);\r\n}\r\n.text-RowAfter:after {\r\n  content: "\\e9f1";\r\n  position:absolute;top:0;left:0;\r\n  color: rgb(83, 178, 255);\r\n}\r\n.text-RowBefore:before {\r\n  content: "\\e9f9";\r\n  color: rgb(51, 51, 51);\r\n}\r\n.text-RowBefore:after {\r\n  content: "\\e9fa";\r\n  position:absolute;top:0;left:0;\r\n  color: rgb(83, 178, 255);\r\n}\r\n.text-BoxInfo:before {\r\n\tcontent: "\\e9f8";\r\n}\r\n.text-BoxWarn:before {\r\n  content: "\\e9fe";\r\n}\r\n.text-BoxDanger:before {\r\n\tcontent: "\\e995";\r\n}\r\n.text-BoxGoodPractice:before {\r\n\tcontent: "\\e986";\r\n}\r\n.text-Box:before {\r\n  content: "\\ea01";\r\n}\r\n.text-BoxCode:before {\r\n  content: "\\ea02";\r\n}\r\n.text-CodeBox:before {\r\n  content: "\\ea02";\r\n}\r\n.text-Bold:before {\r\n  content: "\\ea03";\r\n}\r\n.text-JustifyFull:before {\r\n  content: "\\ea05";\r\n}\r\n.text-Code:before {\r\n  content: "\\ea07";\r\n}\r\n.text-Strike:before {\r\n  content: "\\ea08";\r\n}\r\n.text-UnOrdered:before {\r\n  content: "\\ea09";\r\n}\r\n.text-TextPaste:before {\r\n  content: "\\ea0a";\r\n}\r\n.text-Grid:before {\r\n  content: "\\ea0b";\r\n}\r\n.text-H1:before {\r\n  content: "\\ea0c";\r\n}\r\n.text-H2:before {\r\n  content: "\\ea0d";\r\n}\r\n.text-H3:before {\r\n  content: "\\ea0e";\r\n}\r\n.text-H4:before {\r\n  content: "\\ea0f";\r\n}\r\n.text-BoxHint:before {\r\n  content: "\\ea10";\r\n}\r\n.text-Image:before {\r\n  content: "\\ea11";\r\n}\r\n.text-Italic:before {\r\n  content: "\\ea12";\r\n}\r\n.text-OneSection:before {\r\n  content: "\\ea13";\r\n}\r\n.text-RightSection:before {\r\n  content: "\\ea14";\r\n}\r\n.text-CentralSection:before {\r\n  content: "\\ea15";\r\n}\r\n.text-LeftSection:before {\r\n  content: "\\ea16";\r\n}\r\n.text-ThreeSections:before {\r\n  content: "\\ea17";\r\n}\r\n.text-TwoSections:before {\r\n  content: "\\ea18";\r\n}\r\n.text-JustifyLeft:before {\r\n  content: "\\ea19";\r\n}\r\n.text-Link:before {\r\n  content: "\\ea1c";\r\n}\r\n.text-Macros:before {\r\n  content: "\\ea1d";\r\n}\r\n.text-HR:before {\r\n  content: "\\ea1e";\r\n}\r\n.text-Ordered:before {\r\n  content: "\\ea1f";\r\n}\r\n.text-PageBreak:before {\r\n  content: "\\ea20";\r\n}\r\n.text-BR:before {\r\n  content: "\\ea21";\r\n}\r\n.text-JustifyRight:before {\r\n  content: "\\ea22";\r\n}\r\n.text-TOC:before {\r\n  content: "\\ea23";\r\n}\r\n.text-ColorBg:before {\r\n  content: "\\ea24";\r\n  color: rgb(250, 237, 38);\r\n}\r\n.text-ColorBg:after {\r\n  content: "\\ea25";\r\n  position:absolute;top:0;left:0;\r\n  color: rgb(0, 0, 0);\r\n}\r\n.text-ColorText:before {\r\n  content: "\\ea26";\r\n  color: rgb(255, 0, 0);\r\n}\r\n.text-ColorText:after {\r\n  content: "\\ea27";\r\n  position:absolute;top:0;left:0;\r\n  color: rgb(51, 51, 51);\r\n}\r\n.text-Underline:before {\r\n  content: "\\ea28";\r\n}\r\n.text-Sub:before {\r\n  content: "\\ea29";\r\n}\r\n.text-Super:before {\r\n  content: "\\ea2a";\r\n}\r\n.ac-smartphone:before {\r\n  content: "\\e9c7";\r\n}\r\n.ac-unlock:before {\r\n  content: "\\e9c8";\r\n}\r\n.main-Release:before {\r\n  content: "\\e933";\r\n}\r\n.main-Process:before {\r\n  content: "\\e933";\r\n}\r\n.main-ProcessF:before {\r\n  content: "\\e933";\r\n}\r\n.ac-play_circle_filled:before {\r\n  content: "\\e933";\r\n}\r\n.ac-play_arrow:before {\r\n  content: "\\e902";\r\n}\r\n.main-Cancel:before {\r\n  content: "\\e906";\r\n}\r\n.ac-reply:before {\r\n  content: "\\e906";\r\n}\r\n.main-Redo:before {\r\n  content: "\\e907";\r\n}\r\n.ac-reply2:before {\r\n  content: "\\e907";\r\n}\r\n.ac-code:before {\r\n  content: "\\e958";\r\n}\r\n.main-Html:before {\r\n  content: "\\e901";\r\n}\r\n.ac-business:before {\r\n  content: "\\e9c9";\r\n}\r\n.main-ArrowDown:before {\r\n  content: "\\e908";\r\n}\r\n.ac-arrow_downwards:before {\r\n  content: "\\e908";\r\n}\r\n.main-ArrowLeft:before {\r\n  content: "\\e909";\r\n}\r\n.ac-arrow_back:before {\r\n  content: "\\e909";\r\n}\r\n.main-ArrowRight:before {\r\n  content: "\\e90a";\r\n}\r\n.ac-arrow_forward:before {\r\n  content: "\\e90a";\r\n}\r\n.main-ArrowUp:before {\r\n  content: "\\e90b";\r\n}\r\n.ac-arrow_upwards:before {\r\n  content: "\\e90b";\r\n}\r\n.main-Refresh:before {\r\n  content: "\\e9d3";\r\n}\r\n.ac-refresh:before {\r\n  content: "\\e9d3";\r\n}\r\n.main-SyncTOC:before {\r\n  content: "\\e9d4";\r\n}\r\n.ac-sync:before {\r\n  content: "\\e9ab";\r\n}\r\n.main-Adjust:before {\r\n  content: "\\e904";\r\n}\r\n.ac-trending_down:before {\r\n  content: "\\e905";\r\n}\r\n.ac-taxes:before {\r\n  content: "\\e90c";\r\n}\r\n.ac-power_settings_new:before {\r\n  content: "\\e90d";\r\n}\r\n.main-Logout:before {\r\n  content: "\\e90d";\r\n}\r\n.ac-balance-scale:before {\r\n  content: "\\e916";\r\n}\r\n.main-LinkWB:before {\r\n  content: "\\e917";\r\n}\r\n.ac-exit_to_app:before {\r\n  content: "\\e918";\r\n}\r\n.main-outlookLogOut:before {\r\n  content: "\\e918";\r\n}\r\n.ac-format_indent_decrease:before {\r\n  content: "\\e919";\r\n}\r\n.text-IndentR:before {\r\n  content: "\\e919";\r\n}\r\n.ac-format_indent_increase:before {\r\n  content: "\\e91c";\r\n}\r\n.text-IndentL:before {\r\n  content: "\\e91c";\r\n}\r\n.ac-fullscreen_exit:before {\r\n  content: "\\e923";\r\n}\r\n.ac-fullscreen:before {\r\n  content: "\\e924";\r\n}\r\n.ac-subdirectory_arrow_left:before {\r\n  content: "\\e925";\r\n}\r\n.ac-subdirectory_arrow_right:before {\r\n  content: "\\e926";\r\n}\r\n.ac-swap_horiz:before {\r\n  content: "\\e927";\r\n}\r\n.ac-close_pane:before {\r\n  content: "\\e928";\r\n}\r\n.ac-device_hub:before {\r\n  content: "\\e92b";\r\n}\r\n.ac-payment:before {\r\n  content: "\\e92d";\r\n}\r\n.ac-star:before {\r\n  content: "\\e9bc";\r\n}\r\n.main-StarGray:before {\r\n  content: "\\e9bc";\r\n}\r\n.main-Favorites:before {\r\n  content: "\\e9bc";\r\n}\r\n.ac-star_border:before {\r\n  content: "\\e9bb";\r\n}\r\n.main-StarWhite:before {\r\n  content: "\\e9bb";\r\n}\r\n.main-FavoritesGray:before {\r\n  content: "\\e9bb";\r\n}\r\n.ac-vertical_align_top:before {\r\n  content: "\\e92e";\r\n}\r\n.ac-access_alarm:before {\r\n  content: "\\e936";\r\n}\r\n.ac-access_time:before {\r\n  content: "\\e937";\r\n}\r\n.main-Meeting:before {\r\n  content: "\\e937";\r\n}\r\n.control-History:before {\r\n  content: "\\e937";\r\n}\r\n.main-Shedule:before {\r\n  content: "\\e939";\r\n}\r\n.ac-update:before {\r\n  content: "\\e939";\r\n}\r\n.ac-calendar:before {\r\n  content: "\\e93a";\r\n}\r\n.main-Roles:before {\r\n  content: "\\e9d7";\r\n}\r\n.ac-people:before {\r\n  content: "\\e99c";\r\n}\r\n.ac-person_add:before {\r\n  content: "\\e99d";\r\n}\r\n.ac-person_outline:before {\r\n  content: "\\e99e";\r\n}\r\n.ac-person:before {\r\n  content: "\\e99f";\r\n}\r\n.ac-visibility:before {\r\n  content: "\\e9d2";\r\n}\r\n.main-Preview:before {\r\n  content: "\\e9d2";\r\n}\r\n.ac-shopping_cart:before {\r\n  content: "\\e93b";\r\n}\r\n.ac-add_shopping_cart:before {\r\n  content: "\\e93d";\r\n}\r\n.main-Filter:before {\r\n  content: "\\e934";\r\n}\r\n.ac-filter_list:before {\r\n  content: "\\e934";\r\n}\r\n.ac-filter_none:before {\r\n  content: "\\e934";\r\n}\r\n.ac-no_filter:before {\r\n  content: "\\e934";\r\n}\r\n.ac-settings:before {\r\n  content: "\\e93e";\r\n}\r\n.main-SettingsF:before {\r\n  content: "\\e93e";\r\n}\r\n.main-Settings:before {\r\n  content: "\\e932";\r\n}\r\n.ac-notifications:before {\r\n  content: "\\e93f";\r\n}\r\n.main-Reminder:before {\r\n  content: "\\e93f";\r\n}\r\n.main-Event:before {\r\n  content: "\\e922";\r\n}\r\n.ac-event_note:before {\r\n  content: "\\e93c";\r\n}\r\n.ac-date_range:before {\r\n  content: "\\e93c";\r\n}\r\n.ac-event_add:before {\r\n  content: "\\e940";\r\n}\r\n.ac-event_available:before {\r\n  content: "\\e941";\r\n}\r\n.ac-event:before {\r\n  content: "\\e943";\r\n}\r\n.control-Event:before {\r\n  content: "\\e943";\r\n}\r\n.ac-insert_invitation:before {\r\n  content: "\\e944";\r\n}\r\n.ac-attach_money:before {\r\n  content: "\\e947";\r\n}\r\n.ac-account_balance:before {\r\n  content: "\\e949";\r\n}\r\n.ac-banking:before {\r\n  content: "\\e94a";\r\n}\r\n.ac-finance:before {\r\n  content: "\\e948";\r\n}\r\n.ac-open_in_new:before {\r\n  content: "\\e903";\r\n}\r\n.ac-approval:before {\r\n  content: "\\e967";\r\n}\r\n.ac-new_quote:before {\r\n  content: "\\e956";\r\n}\r\n.ac-pin:before {\r\n  content: "\\e95a";\r\n}\r\n.ac-unpin:before {\r\n  content: "\\e95b";\r\n}\r\n.ac-apps:before {\r\n  content: "\\e94b";\r\n}\r\n.ac-search:before {\r\n  content: "\\e91a";\r\n}\r\n.main-Search:before {\r\n  content: "\\e91a";\r\n}\r\n.main-Search2:before {\r\n  content: "\\e9a6";\r\n}\r\n.ac-message:before {\r\n  content: "\\e94c";\r\n}\r\n.ac-miscellaneous:before {\r\n  content: "\\e94d";\r\n}\r\n.main-Chat:before {\r\n  content: "\\e94e";\r\n}\r\n.main-LevelDown:before {\r\n  content: "\\e929";\r\n}\r\n.main-LevelUp:before {\r\n  content: "\\e929";\r\n}\r\n.ac-dashboard:before {\r\n  content: "\\e9d0";\r\n}\r\n.main-Dashboard:before {\r\n  content: "\\e94f";\r\n}\r\n.main-Pdf:before {\r\n  content: "\\e9cd";\r\n}\r\n.ac-picture_as_pdf:before {\r\n  content: "\\e9cd";\r\n}\r\n.main-Excel:before {\r\n  content: "\\e9cc";\r\n}\r\n.main-Report:before {\r\n  content: "\\e9ce";\r\n}\r\n.main-ReportF:before {\r\n  content: "\\e9ce";\r\n}\r\n.ac-project:before {\r\n  content: "\\e95e";\r\n}\r\n.main-Task:before {\r\n  content: "\\e95e";\r\n}\r\n.main-Copy:before {\r\n  content: "\\e950";\r\n}\r\n.text-Copy:before {\r\n  content: "\\e950";\r\n}\r\n.main-Paste:before {\r\n  content: "\\e951";\r\n}\r\n.ac-content_paste:before {\r\n  content: "\\e951";\r\n}\r\n.text-Paste:before {\r\n  content: "\\e951";\r\n}\r\n.ac-content_cut:before {\r\n  content: "\\e952";\r\n}\r\n.main-Cut:before {\r\n  content: "\\e952";\r\n}\r\n.text-Cut:before {\r\n  content: "\\e952";\r\n}\r\n.ac-more_horiz:before {\r\n  content: "\\e991";\r\n}\r\n.ac-more_vert:before {\r\n  content: "\\e992";\r\n}\r\n.ac-delete:before {\r\n  content: "\\e930";\r\n}\r\n.main-Remove:before {\r\n  content: "\\e930";\r\n}\r\n.ac-delete_forever:before {\r\n  content: "\\e953";\r\n}\r\n.ac-life-bouy:before {\r\n  content: "\\e954";\r\n}\r\n.ac-work:before {\r\n  content: "\\e955";\r\n}\r\n.main-Folder:before {\r\n  content: "\\e959";\r\n}\r\n.ac-folder_open:before {\r\n  content: "\\e959";\r\n}\r\n.ac-extension:before {\r\n  content: "\\e95c";\r\n}\r\n.ac-flag:before {\r\n  content: "\\e95d";\r\n}\r\n.ac-handshake:before {\r\n  content: "\\e9aa";\r\n}\r\n.ac-lock:before {\r\n  content: "\\e95f";\r\n}\r\n.ac-markunread:before {\r\n  content: "\\e9ac";\r\n}\r\n.ac-email_outline:before {\r\n  content: "\\e960";\r\n}\r\n.main-MailReceive:before {\r\n  content: "\\e960";\r\n}\r\n.control-MailSelectorN:before {\r\n  content: "\\e960";\r\n}\r\n.control-MailSelectorH:before {\r\n  content: "\\e960";\r\n}\r\n.control-MailSelectorP:before {\r\n  content: "\\e960";\r\n}\r\n.control-MailSelectorD:before {\r\n  content: "\\e960";\r\n}\r\n.main-MailSend:before {\r\n  content: "\\e961";\r\n}\r\n.ac-build:before {\r\n  content: "\\e966";\r\n}\r\n.ac-language:before {\r\n  content: "\\e968";\r\n}\r\n.ac-translate:before {\r\n  content: "\\e969";\r\n}\r\n.ac-import_contacts:before {\r\n  content: "\\e96a";\r\n}\r\n.main-Files:before {\r\n  content: "\\e96b";\r\n  color: rgb(255, 216, 0);\r\n}\r\n.main-Files:after {\r\n  content: "\\e96c";\r\n  position:absolute;top:0;left:0;\r\n  color: rgb(0, 0, 0);\r\n}\r\n.main-FilesEmpty:before {\r\n  content: "\\e96f";\r\n}\r\n.ac-attach_file:before {\r\n  content: "\\e96f";\r\n}\r\n.ac-receipt:before {\r\n  content: "\\e970";\r\n}\r\n.ac-description:before {\r\n  content: "\\e970";\r\n}\r\n.main-Activity:before {\r\n  content: "\\e91d";\r\n  color: rgb(255, 216, 0);\r\n}\r\n.main-Activity:after {\r\n  content: "\\e91e";\r\n  position:absolute;top:0;left:0;\r\n  color: rgb(0, 0, 0);\r\n}\r\n.main-ActivityEmpty:before {\r\n  content: "\\e91f";\r\n}\r\n.ac-insert_drive_file:before {\r\n  content: "\\e91f";\r\n}\r\n.main-Note:before {\r\n  content: "\\e920";\r\n  color: rgb(255, 216, 0);\r\n}\r\n.main-Note:after {\r\n  content: "\\e921";\r\n  position:absolute;top:0;left:0;\r\n  color: rgb(0, 0, 0);\r\n}\r\n.main-NoteEmpty:before {\r\n  content: "\\e945";\r\n  color: rgb(0, 0, 0);\r\n}\r\n.main-NoteEmpty:after {\r\n  content: "\\e946";\r\n  position:absolute;top:0;left:0;\r\n  color: rgb(255, 255, 255);\r\n}\r\n.ac-pie_chart:before {\r\n  content: "\\e971";\r\n}\r\n.ac-archive:before {\r\n  content: "\\e9ad";\r\n}\r\n.ac-unarchive:before {\r\n  content: "\\e9ae";\r\n}\r\n.ac-menu:before {\r\n  content: "\\e942";\r\n}\r\n.ac-key:before {\r\n  content: "\\e962";\r\n}\r\n.ac-details:before {\r\n  content: "\\e976";\r\n}\r\n.ac-inquiries:before {\r\n  content: "\\e97a";\r\n}\r\n.ac-account_details:before {\r\n  content: "\\e980";\r\n}\r\n.ac-rate-review:before {\r\n  content: "\\e974";\r\n}\r\n.ac-security:before {\r\n  content: "\\e972";\r\n}\r\n.ac-poll:before {\r\n  content: "\\e973";\r\n}\r\n.ac-local_hotel:before {\r\n  content: "\\e975";\r\n}\r\n.ac-local_shipping:before {\r\n  content: "\\e98d";\r\n}\r\n.ac-directions_car:before {\r\n  content: "\\e977";\r\n}\r\n.ac-drive_eta:before {\r\n  content: "\\e977";\r\n}\r\n.ac-local_bar:before {\r\n  content: "\\e978";\r\n}\r\n.ac-flight:before {\r\n  content: "\\e979";\r\n}\r\n.ac-local_airport:before {\r\n  content: "\\e979";\r\n}\r\n.ac-local_offer:before {\r\n  content: "\\e9ba";\r\n}\r\n.ac-file_upload:before {\r\n  content: "\\ea1b";\r\n}\r\n.main-Upload:before {\r\n  content: "\\ea1b";\r\n}\r\n.ac-get_app:before {\r\n  content: "\\ea1a";\r\n}\r\n.main-GetFile:before {\r\n  content: "\\ea1a";\r\n}\r\n.main-RecordEdit:before {\r\n  content: "\\e97b";\r\n}\r\n.main-DataEntry:before {\r\n  content: "\\e97b";\r\n}\r\n.main-DataEntryF:before {\r\n  content: "\\e97b";\r\n}\r\n.ac-border_color:before {\r\n  content: "\\e97b";\r\n}\r\n.control-EditN:before {\r\n  content: "\\e97b";\r\n}\r\n.control-EditH:before {\r\n  content: "\\e97b";\r\n}\r\n.control-EditP:before {\r\n  content: "\\e97b";\r\n}\r\n.control-EditD:before {\r\n  content: "\\e97b";\r\n}\r\n.ac-pen_frame:before {\r\n  content: "\\e97c";\r\n}\r\n.control-DataEntry:before {\r\n  content: "\\e97c";\r\n}\r\n.ac-save:before {\r\n  content: "\\e92f";\r\n}\r\n.main-RecordSave:before {\r\n  content: "\\e92f";\r\n}\r\n.main-Save:before {\r\n  content: "\\e92f";\r\n}\r\n.ac-phone_iphone:before {\r\n  content: "\\e9d1";\r\n}\r\n.main-Phone:before {\r\n  content: "\\e9d1";\r\n}\r\n.control-Phone:before {\r\n  content: "\\e9d1";\r\n}\r\n.main-PageFirst:before {\r\n  content: "\\e90e";\r\n}\r\n.ac-first-page:before {\r\n  content: "\\e90e";\r\n}\r\n.main-PageFirstR:before {\r\n  content: "\\e90f";\r\n}\r\n.main-PageLast:before {\r\n  content: "\\e910";\r\n}\r\n.ac-last-page:before {\r\n  content: "\\e910";\r\n}\r\n.main-PageLastR:before {\r\n  content: "\\e911";\r\n}\r\n.main-PageNextR:before {\r\n  content: "\\e914";\r\n}\r\n.main-PageNext:before {\r\n  content: "\\e913";\r\n}\r\n.main-PagePrev:before {\r\n  content: "\\e912";\r\n}\r\n.main-PagePrevR:before {\r\n  content: "\\e915";\r\n}\r\n.main-Collapse:before {\r\n  content: "\\e96d";\r\n}\r\n.main-Expand:before {\r\n  content: "\\e96e";\r\n}\r\n.ac-done:before {\r\n  content: "\\e965";\r\n}\r\n.control-CompleteHead:before {\r\n  content: "\\e965";\r\n}\r\n.control-Complete:before {\r\n  content: "\\e965";\r\n}\r\n.control-ClearN:before {\r\n  content: "\\e957";\r\n}\r\n.control-ClearH:before {\r\n  content: "\\e957";\r\n}\r\n.control-ClearP:before {\r\n  content: "\\e957";\r\n}\r\n.control-ClearD:before {\r\n  content: "\\e957";\r\n}\r\n.ac-keyboard_return:before {\r\n  content: "\\e92c";\r\n}\r\n.main-CancelClose:before {\r\n  content: "\\e92c";\r\n}\r\n.main-AddNew:before {\r\n  content: "\\e931";\r\n}\r\n.main-RecordAdd:before {\r\n  content: "\\e931";\r\n}\r\n.ac-add:before {\r\n  content: "\\e931";\r\n}\r\n.main-FilterSet:before {\r\n  content: "\\e987";\r\n}\r\n.main-RecordDel:before {\r\n  content: "\\e987";\r\n}\r\n.control-Close:before {\r\n  content: "\\e987";\r\n}\r\n.control-CloseB:before {\r\n  content: "\\e987";\r\n}\r\n.ac-check_box_outline_blank:before {\r\n  content: "\\e97d";\r\n}\r\n.ac-plus_square:before {\r\n  content: "\\e97f";\r\n}\r\n.ac-minus_square:before {\r\n  content: "\\e982";\r\n}\r\n.ac-check_box:before {\r\n  content: "\\e984";\r\n}\r\n.ac-check_circle_filled:before {\r\n  content: "\\e985";\r\n}\r\n.ac-check_circle:before {\r\n  content: "\\e986";\r\n}\r\n.ac-check_circle_circle:before {\r\n  content: "\\e988";\r\n}\r\n.ac-remove_circle:before {\r\n  content: "\\e98a";\r\n}\r\n.ac-remove_circle_outline:before {\r\n  content: "\\e98a";\r\n}\r\n.ac-control_point:before {\r\n  content: "\\e98c";\r\n}\r\n.ac-add_circle:before {\r\n  content: "\\e98c";\r\n}\r\n.ac-arrow_drop_down_circle:before {\r\n  content: "\\e98f";\r\n}\r\n.ac-help_filled:before {\r\n  content: "\\e990";\r\n}\r\n.main-outlookHelp:before {\r\n  content: "\\e990";\r\n}\r\n.ac-help:before {\r\n  content: "\\e993";\r\n}\r\n.ac-cancel:before {\r\n  content: "\\e995";\r\n}\r\n.main-Fail:before {\r\n  content: "\\e997";\r\n  color: #dc3545;\r\n}\r\n.control-Error:before {\r\n  content: "\\e997";\r\n  color: #dc3545;\r\n}\r\n.main-Success:before {\r\n  content: "\\e998";\r\n  color: rgb(40, 167, 69);\r\n}\r\n.main-Success:after {\r\n  content: "\\e999";\r\n  position:absolute;top:0;left:0;\r\n  color: rgb(255, 255, 255);\r\n}\r\n.main-Complete:before {\r\n  content: "\\e998";\r\n  color: rgb(40, 167, 69);\r\n}\r\n.main-Complete:after {\r\n  content: "\\e999";\r\n  position:absolute;top:0;left:0;\r\n  color: rgb(255, 255, 255);\r\n}\r\n.control-Info:before {\r\n  content: "\\e998";\r\n  color: rgb(40, 167, 69);\r\n}\r\n.control-Info:after {\r\n  content: "\\e999";\r\n  position:absolute;top:0;left:0;\r\n  color: rgb(255, 255, 255);\r\n}\r\n.control-Warning:before {\r\n  content: "\\e99a";\r\n  color: rgb(255, 193, 9);\r\n}\r\n.control-Warning:after {\r\n  content: "\\e99b";\r\n  position:absolute;top:0;left:0;\r\n  color: rgb(0, 0, 0);\r\n}\r\n.ac-skip_previous:before {\r\n  content: "\\e9af";\r\n}\r\n.ac-skip_next:before {\r\n  content: "\\e9b0";\r\n}\r\n.control-HideFrame:before {\r\n  content: "\\e9a0";\r\n}\r\n.control-PrevMonth:before {\r\n  content: "\\e9a0";\r\n}\r\n.control-PrevYear:before {\r\n  content: "\\e9a0";\r\n}\r\n.control-ShowFrame:before {\r\n  content: "\\e9a1";\r\n}\r\n.control-NextMonth:before {\r\n  content: "\\e9a1";\r\n}\r\n.control-NextYear:before {\r\n  content: "\\e9a1";\r\n}\r\n.control-Reminder:before {\r\n  content: "\\e9a2";\r\n}\r\n.control-ReminderHead:before {\r\n  content: "\\e9a3";\r\n}\r\n.control-SubMenu:before {\r\n  content: "\\e9a4";\r\n}\r\n.control-Search:before {\r\n  content: "\\e91a";\r\n}\r\n.control-SelectorN:before {\r\n  content: "\\e9a6";\r\n}\r\n.control-SelectorH:before {\r\n  content: "\\e9a6";\r\n}\r\n.control-SelectorP:before {\r\n  content: "\\e9a6";\r\n}\r\n.control-SelectorD:before {\r\n  content: "\\e9a6";\r\n}\r\n.control-Filter:before {\r\n  content: "\\e9a7";\r\n}\r\n.control-FilterSortAsc:before {\r\n  content: "\\e9a8";\r\n}\r\n.control-FilterSortDesc:before {\r\n  content: "\\e9a9";\r\n}\r\n.control-Empty:before {\r\n  content: "";\r\n  color: transparent;\r\n}\r\n.control-Required:before {\r\n  content: "\\e9d9";\r\n  color: #d0021b;\r\n}\r\n.control-ScrollUp:before {\r\n  content: "\\e9dc";\r\n}\r\n.control-ScrollDown:before {\r\n  content: "\\e9dd";\r\n}\r\n.control-ArrowDown:before {\r\n  content: "\\e9e0";\r\n}\r\n.control-DropDownN:before {\r\n  content: "\\e9e0";\r\n}\r\n.control-DropDownH:before {\r\n  content: "\\e9e0";\r\n}\r\n.control-DropDownP:before {\r\n  content: "\\e9e0";\r\n}\r\n.control-DropDownD:before {\r\n  content: "\\e9e0";\r\n}\r\n.control-DropMenuN:before {\r\n  content: "\\e9e0";\r\n}\r\n.control-DropMenuH:before {\r\n  content: "\\e9e0";\r\n}\r\n.control-DropMenuP:before {\r\n  content: "\\e9e0";\r\n}\r\n.control-DropMenuD:before {\r\n  content: "\\e9e0";\r\n}\r\n.control-HiddenItems:before {\r\n  content: "\\e9e5";\r\n}\r\n.control-LocalMenu:before {\r\n  content: "\\e9e6";\r\n}\r\n.control-CurrentRow:before {\r\n  content: "\\e9e7";\r\n}\r\n.control-NewRow:before {\r\n  content: "\\e9e8";\r\n}\r\n.control-GridCheck:before {\r\n  content: "\\e9b6";\r\n  color: rgb(255, 255, 255);\r\n}\r\n.control-GridCheck:after {\r\n  content: "\\e9b7";\r\n  position:absolute;top:0;left:0;\r\n  color: rgb(0, 0, 0);\r\n}\r\n.control-GridUncheck:before {\r\n  content: "\\e9b8";\r\n  color: rgb(255, 255, 255);\r\n}\r\n.control-GridUncheck:after {\r\n  content: "\\e9b9";\r\n  position:absolute;top:0;left:0;\r\n  color: rgb(155, 155, 155);\r\n}\r\n.control-SortDesc:before {\r\n  content: "\\e9ed";\r\n}\r\n.control-PriorityLow:before {\r\n  content: "\\e9ed";\r\n}\r\n.control-RedArrowDown:before {\r\n  content: "\\e9ed";\r\n}\r\n.control-SortAsc:before {\r\n  content: "\\e9ee";\r\n}\r\n.control-RedArrowUp:before {\r\n  content: "\\e9ee";\r\n}\r\n.control-RowFile:before {\r\n  content: "\\e9b4";\r\n  color: rgb(255, 193, 9);\r\n}\r\n.control-RowFile:after {\r\n  content: "\\e9b5";\r\n  position:absolute;top:0;left:0;\r\n  color: rgb(0, 0, 0);\r\n}\r\n.control-RowFileEmpty:before {\r\n  content: "\\e9f2";\r\n}\r\n\r\n.control-RowNote:before {\r\n  content: "\\e9bf";\r\n  color: rgb(255, 216, 0);\r\n}\r\n.control-RowNote:after {\r\n  content: "\\e9c0";\r\n  position:absolute;top:0;left:0;\r\n  color: rgb(0, 0, 0);\r\n}\r\n.control-RowNoteEmpty:before {\r\n  content: "\\e9c1";\r\n  color: rgb(255, 255, 255);\r\n}\r\n.control-RowNoteEmpty:after {\r\n  content: "\\e9c2";\r\n  position:absolute;top:0;left:0;\r\n  color: rgb(0, 0, 0);\r\n}\r\n.control-RowInserted:before {\r\n  content: "\\e9f5";\r\n  color: #28a745;\r\n}\r\n.control-RowModified:before {\r\n  content: "\\e9f6";\r\n  color: #dc3545;\r\n}\r\n.control-RowDeleted:before {\r\n  content: "\\e9f7";\r\n  color: #d0021b;\r\n}\r\n.control-Mail:before {\r\n  content: "\\e963";\r\n}\r\n.control-MailReply:before {\r\n  content: "\\e964";\r\n}\r\n.control-Task:before {\r\n  content: "\\e9ff";\r\n  color: rgb(0, 0, 0);\r\n}\r\n.control-Task:after {\r\n  content: "\\ea00";\r\n  position:absolute;top:0;left:0;\r\n  color: rgb(220, 53, 69);\r\n}\r\n.control-WebN:before {\r\n  content: "\\ea04";\r\n}\r\n.control-WebH:before {\r\n  content: "\\ea04";\r\n}\r\n.control-WebP:before {\r\n  content: "\\ea04";\r\n}\r\n.control-WebD:before {\r\n  content: "\\ea04";\r\n}\r\n.control-Maximize:before {\r\n  content: "\\e9c3";\r\n  color: rgb(255, 255, 255);\r\n}\r\n.control-Maximize:after {\r\n  content: "\\e9c4";\r\n  position:absolute;top:0;left:0;\r\n  color: rgb(0, 0, 0);\r\n}\r\n.control-PriorityHigh:before {\r\n  content: "\\ea06";\r\n  color: #bf1d34;\r\n}\r\n.control-PriorityHead:before {\r\n  content: "\\ea06";\r\n  color: #bf1d34;\r\n}\r\n.ac-watch_later:before {\r\n  content: "\\e938";\r\n}\r\n.ac-plus_square_filled:before {\r\n  content: "\\e97e";\r\n}\r\n.ac-minus_square_filled:before {\r\n  content: "\\e981";\r\n}\r\n.ac-check_box_filled:before {\r\n  content: "\\e983";\r\n}\r\n.ac-minus_circle_filled:before {\r\n  content: "\\e989";\r\n}\r\n.ac-plus_circle_filled:before {\r\n  content: "\\e98b";\r\n}\r\n.ac-arrow_drop_down_circle_filled:before {\r\n  content: "\\e98e";\r\n}\r\n.ac-cross_filled:before {\r\n  content: "\\e994";\r\n}\r\n.ac-close:before {\r\n  content: "\\e9b1";\r\n}\r\n.ac-mode_edit:before {\r\n  content: "\\e9b3";\r\n}\r\n.control-EditRow:before {\r\n  content: "\\e9b3";\r\n}\r\n.ac-format_list_numbered:before {\r\n  content: "\\e9b2";\r\n}\r\n.ac-keyboard_arrow_left:before {\r\n  content: "\\e9bd";\r\n}\r\n.ac-keyboard_arrow_right:before {\r\n  content: "\\e9be";\r\n}\r\n.ac-expand_less:before {\r\n  content: "\\e9c5";\r\n}\r\n.ac-keyboard_arrow_up:before {\r\n  content: "\\e9c5";\r\n}\r\n.ac-expand_more:before {\r\n  content: "\\e9c6";\r\n}\r\n.ac-keyboard_arrow_down:before {\r\n  content: "\\e9c6";\r\n}\r\n.ac-info:before {\r\n\tcontent: "\\e9f8";\r\n}\r\n.sr-only {\r\n\tposition: absolute;\r\n\twidth: 1px;\r\n\theight: 1px;\r\n\tpadding: 0;\r\n\tmargin: -1px;\r\n\toverflow: hidden;\r\n\tclip: rect(0, 0, 0, 0);\r\n\tborder: 0;\r\n}\r\n\r\n.sr-only-focusable:active,\r\n.sr-only-focusable:focus {\r\n\tposition: static;\r\n\twidth: auto;\r\n\theight: auto;\r\n\tmargin: 0;\r\n\toverflow: visible;\r\n\tclip: auto;\r\n}\r\n',""]),e.exports=h},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].use[1]!./static/styles.css":(e,n,r)=>{var i=r("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),o=r("./node_modules/css-loader/dist/runtime/api.js")(i);o.push([e.id,"\r\n.splash {\r\n\ttext-align: center;\r\n\tbox-sizing: border-box;\r\n\tbackground: transparent;\r\n\tz-index: 10000;\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tcursor: wait;\r\n}\r\n.splash.initialization {\r\n\tbackground: white;\r\n}\r\n.splash.loading {\r\n\tbackground: rgba(255, 255, 255, 0.5);\r\n}\r\n\r\n.splash .message {\r\n\tmargin-top: 10vh;\r\n\tfont-size: 36px;\r\n\tline-height: 36px;\r\n\ttext-shadow: rgba(0, 0, 0, 0.5) 0 0 15px;\r\n\tfont-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif;\r\n\tcolor: black;\r\n\tanimation: message 30s linear;\r\n\r\n\tdisplay: inline-block;\r\n\tbackground: white;\r\n\tpadding: 20px;\r\n\tborder-radius: 5px;\r\n}\r\n\r\n\r\n@keyframes spinner {\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n\r\n@keyframes message {\r\n  0% { color: white; text-shadow: none; }\r\n  66% { color: white; text-shadow: none;}\r\n  100% { color: black; text-shadow: rgba(0, 0, 0, 0.5) 0 0 15px;}\r\n}\r\n\r\n\r\n.splash.initialization::before,\r\n.splash.loading::before {\r\n\tcontent: '';\r\n\tposition: absolute;\r\n\tborder-radius: 50%;\r\n\tborder: 2px solid rgba(0, 0, 0, 0.3);\r\n\tborder-top-color: rgba(0, 0, 0, 0.6);\r\n\tanimation: spinner .6s linear infinite;\r\n\t-webkit-animation: spinner .6s linear infinite;\r\n\ttop: 50%;\r\n\tleft: 50%;\r\n\twidth: 28px;\r\n\theight: 28px;\r\n\tmargin-top: -16px;\r\n\tmargin-left: -16px;\r\n}\r\n\r\n.actions-container\r\n{\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\twidth: 100%;\r\n\tpadding: 5px;\r\n}\r\n\r\n.actions-container > *\r\n{\r\n\twidth: 100%;\r\n\tpadding-bottom: 5px;\r\n\tmax-width: 400px;\r\n}\r\n\r\n@media print {\r\n  .page-host {\r\n    position: absolute;\r\n    left: 10px;\r\n    right: 0;\r\n    top: 0px;\r\n    bottom: 0;\r\n    overflow-y: inherit;\r\n    overflow-x: inherit;\r\n  }\r\n}\r\n\r\nsection {\r\n  margin: 0 20px;\r\n}\r\n\r\n/* animate page transitions */\r\nsection.au-enter-active {\r\n  animation: fadeInRight 1s;\r\n}\r\n\r\ndiv.au-stagger {\r\n  /* 50ms will be applied between each successive enter operation */\r\n  animation-delay: 50ms;\r\n}\r\n\r\n/* animation definitions */\r\n@-webkit-keyframes fadeInRight {\r\n  0% {\r\n    opacity: 0;\r\n    transform: translate3d(100%, 0, 0)\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n    transform: none\r\n  }\r\n}\r\n\r\n@keyframes fadeInRight {\r\n  0% {\r\n    opacity: 0;\r\n    transform: translate3d(100%, 0, 0)\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n    transform: none\r\n  }\r\n}\r\n\r\n@-webkit-keyframes fadeIn {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n@keyframes fadeIn {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n",""]),e.exports=o},"app.css":(e,n,r)=>{var i=r("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),o=r("./node_modules/css-loader/dist/runtime/api.js")(i);o.push([e.id,".page-container {\r\n\tdisplay: block;\r\n\theight: 100vh;\r\n}\r\n\r\n.page-container > .qp-splitter {\r\n\tborder: none;\r\n\toverflow: hidden;\r\n}\r\n\r\n.page-container > .qp-splitter > qp-split-pane:not(.page-content) {\r\n\toverflow: unset;\r\n}\r\n\r\n.page-content {\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tmin-width: 320px;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\toverflow: hidden;\r\n\r\n\tcontainer-type: inline-size;\r\n\tcontainer-name: qp-screen;\r\n}\r\n\r\n.page-container-side-panel {\r\n\tdisplay: flex;\r\n\r\n\theight: 100%;\r\n}\r\n\r\n.qp-splitter--disabled .page-content {\r\n\tmin-width: 0;\r\n}\r\n\r\n.page-host {\r\n\toverflow-x: hidden;\r\n\toverflow-y: auto;\r\n\tflex-grow: 1;\r\n\tmargin: 0 var(--qp-page-host-margin);\r\n\tpadding: 0 var(--qp-page-host-padding);\r\n\tposition: relative;\r\n\tscrollbar-width: thin;\r\n\tscrollbar-color: rgba(0, 0, 0, 0.15) transparent;\r\n}\r\n\r\n.page-host::-webkit-scrollbar-thumb {\r\n\tbackground-color: transparent;\r\n}\r\n\r\n.page-host::-webkit-scrollbar-track {\r\n\tbackground-color: transparent;\r\n}\r\n\r\n.page-workspace {\r\n\toverflow: visible;\r\n\tposition: absolute;\r\n\twidth: calc( 100% - var(--qp-page-host-padding) * 2 );\r\n}\r\n\r\n@supports (container-type: inline-size) {\r\n\t.page-workspace {\r\n\t\twidth: calc( 100cqi - (var(--qp-page-host-padding) + var(--qp-page-host-margin)) * 2 );\r\n\t}\r\n}\r\n\r\n.page-host:hover::-webkit-scrollbar-thumb {\r\n\tbackground: rgba(0,0,0,0.15);\r\n}\r\n\r\n.page-host:hover::-webkit-scrollbar-track {\r\n\tbackground-color: rgba(0,0,0,0.06);\r\n}\r\n\r\n*::-webkit-scrollbar-thumb {\r\n\tbackground: rgba(0,0,0,0.15);\r\n\tborder-radius: 5px;\r\n}\r\n*::-webkit-scrollbar-track {\r\n\tbackground-color: rgba(0,0,0,0.06);\r\n\tborder-radius: 5px;\r\n}\r\n\r\n*::-webkit-scrollbar {\r\n\twidth: 8px;\r\n\theight: 10px;\r\n}\r\n\r\n*::-webkit-scrollbar-thumb:hover {\r\n\tbackground-color: rgba(0,0,0,0.40);\r\n}\r\n\r\n\r\n\r\n.pageHeader {\r\n\tdisplay: flex;\r\n\tflex-wrap: wrap-reverse;\r\n\tmargin-inline-start: calc( var(--qp-page-host-margin) + var(--qp-page-host-padding) );\r\n\tpadding: var(--qp-sections-row-gap) 0;\r\n\trow-gap: var(--qp-sections-row-gap);\r\n}\r\n\r\n\r\n.pageTitle {\r\n\tpadding-inline-end: 4px;\r\n\toverflow: hidden;\r\n\tflex-grow: 1;\r\n\tflex-shrink: .5;\r\n}\r\n\r\n.toolsMenu {\r\n\tpadding-inline-end: calc( var(--qp-page-host-margin) + var(--qp-page-host-padding) );;\r\n\tflex-shrink: 1;\r\n\tflex-grow: 1;\r\n}\r\n\r\n.toolsMenu .qp-menu-button {\r\n\tfont-size: 14px;\r\n}\r\n\r\n.top-bar-cont {\r\n\tdisplay: flex;\r\n\tpadding: 0 var(--qp-page-host-padding);\r\n\tmargin-bottom: var(--qp-sections-row-gap);\r\n\talign-items: flex-end;\r\n}\r\n\r\n.top-bar-cont .qp-tool-bar-suffix{\r\n\twhite-space: nowrap;\r\n\tmargin-inline-end: var(--qp-page-host-margin);;\r\n}\r\n\r\n\r\n/* .top-bar-cont > qp-tool-bar {\r\n\tflex-grow: initial;\r\n} */\r\n.top-bar-cont .grid-bar-cont {\r\n\tflex-grow: 1;\r\n\tpadding-inline-end: 5px;\r\n}\r\n\r\n.top-bar-cont .filter-box {\r\n\tmargin-inline-end: 5px;\r\n}\r\n\r\n#InfoBannerContainer {\r\n\tpadding: 0px 8px;\r\n}\r\n\r\n",""]),e.exports=o},"screens/FS/FS300300/styles/FS300300-boxes.css":(e,n,r)=>{var i=r("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),o=r("./node_modules/css-loader/dist/runtime/api.js")(i);o.push([e.id,'.qp-sch-event-info > div:first-child > span:first-child,\r\n.qp-sch-event-info > div:first-child > span:first-child *  {\r\n\tfont-weight: 700 !important;\r\n}\r\n\r\n*:is(.qp-sch-main-container, .qp-sch-dragged) span[sch-field="SelectedAppointment.RefNbr"] {\r\n\tfont-size: 12px;\r\n\tfont-weight: 700;\r\n}\r\n\r\n.qp-sch-left-container span[sch-field="SelectedAppointment.RefNbr"] {\r\n\tline-height: 26px;\r\n\tfont-size: 16px;\r\n\tfont-weight: 700;\r\n}\r\n.qp-sch-tile-icon:has(span > svg[sch-value="H"]) {\r\n\tflex-shrink: 0;\r\n}\r\n\r\n*[sch-field="SelectedAppointment.Status"][sch-value="N"] {\r\n\tcolor: var(--qp-primary-color);\r\n}\r\n*[sch-field="SelectedAppointment.Status"][sch-value="Z"],\r\n*[sch-field="SelectedAppointment.Status"][sch-value="C"],\r\n*[sch-field="SelectedAppointment.Status"][sch-value="B"] {\r\n\tcolor: #626262;\r\n}\r\n\r\n*[sch-field="SelectedSO.Priority"] {\r\n\tfont-weight: 700 !important;\r\n}\r\n\t*[sch-field="SelectedSO.Priority"][sch-value="H"] {\r\n\t\tcolor: #EE4051;\r\n\t}\r\n\t*[sch-field="SelectedSO.Priority"][sch-value="M"] {\r\n\t\tcolor: #BFBFBF;\r\n\t}\r\n\t*[sch-field="SelectedSO.Priority"][sch-value="L"] {\r\n\t\tcolor: #4BA5E2;\r\n\t}\r\nspan:has(> *[sch-field="SelectedSO.Priority"][sch-value="M"]) {\r\n\tdisplay: none;\r\n}\r\n\r\n*[sch-field="SelectedSO.Severity"] {\r\n\tfont-weight: 700 !important;\r\n}\r\n\t*[sch-field="SelectedSO.Severity"][sch-value="H"] {\r\n\t\tcolor: #EE4051;\r\n\t}\r\n\t*[sch-field="SelectedSO.Severity"][sch-value="M"] {\r\n\t\tcolor: #BFBFBF;\r\n\t}\r\n\t*[sch-field="SelectedSO.Severity"][sch-value="L"] {\r\n\t\tcolor: #4BA5E2;\r\n\t}\r\nspan:has(> *[sch-field="SelectedSO.Severity"][sch-value="M"]) {\r\n\tdisplay: none;\r\n}\r\n\r\n*[sch-field="SelectedAppointment.StaffCntr"]:not([sch-value="1"]) {\r\n\tcolor: black;\r\n}\r\n\t.qp-sch-not-confirmed *[sch-field="SelectedAppointment.StaffCntr"]:not([sch-value="1"]) {\r\n\t\tcolor: white;\r\n\t}\r\n',""]),e.exports=o},"screens/FS/FS300300/styles/FS300300.css":(e,n,r)=>{var i=r("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),o=r("./node_modules/css-loader/dist/runtime/api.js")(i);o.push([e.id,".hidden {\r\n\tdisplay: none !important;\r\n}\r\n\r\n.qp-system-menu {\r\n\tz-index: auto; /* we need this for the drop down menu to be on top of Bing Map's controls AND appointment popup */\r\n}\r\n.qp-menu-options {\r\n\tz-index: 4500; /* we need this for the drop down menu to be on top of Bing Map's controls  AND appointment popup */\r\n}\r\n\r\n.b-float-root {\r\n\tz-index: 4000; /* below grid filter dialog */\r\n}\r\n\r\n.main-tab-bar {\r\n\theight: 100%;\r\n}\r\n\r\n.botton-row-buttons {\r\n    height: 40px;\r\n\tposition: relative;\r\n}\r\n\r\n.switch-mode-button {\r\n\tposition: absolute;\r\n    right: 0px;\r\n}\r\n\r\n.switch-table-button {\r\n\tposition: absolute;\r\n    left: 0px;\r\n}\r\n\r\n.top-bar-cont {\r\n\tdisplay: none;\r\n}\r\n\r\n/* TODO: temporary fix for an issue in UI platform */\r\n#mainTabBar .left-toolbar-cont {\r\n\tflex: 1 0 100px;\r\n}\r\n#mainTabBar .right-toolbar-cont {\r\n    flex: 0 1 200px;\r\n}\r\n#mainTabBar .filter-box {\r\n\tmin-width: 100px;\r\n    max-width: 200px;\r\n    width: auto !important;\r\n}\r\n.qp-sch-grid-container .left-toolbar-cont {\r\n\tflex: 1 0 190px;\r\n}\r\n\r\n/* TODO: temporary fix for an issue in UI platform */\r\n.filter-combo {\r\n\theight: var(--qp-toolbar-height);\r\n}\r\n\r\n#searchAppointmentsGridID_topBaradjust,\r\n#appointmentsAllStaffGridID_topBaradjust,\r\n#serviceOrderGridID_topBaradjust,\r\n#searchAppointmentsGridID_topBarexportToExcel,\r\n#appointmentsAllStaffGridID_topBarexportToExcel,\r\n#serviceOrderGridID_topBarexportToExcel {\r\n\tdisplay: none;\r\n}\r\n\r\n.horizontal-splitter {\r\n\theight: 100%;\r\n\tdisplay: block;\r\n}\r\n\t.horizontal-splitter > .qp-splitter > .qp-splitter-bar {\r\n\t\tmargin: 38px 0px 0px 0px;\r\n\t}\r\n\r\n.main-map {\r\n\tpadding-top: 38px;\r\n    position: relative;\r\n    height: 100%;\r\n    display: block;\r\n}\r\n\r\n#SODetailsGridID .grid-top-bar {\r\n\tdisplay: none;\r\n}\r\n#SODetailsGridID .grid-content {\r\n\tmin-height: 32px !important;\r\n}\r\n\r\n.MicrosoftMap .NavBar_Container {\r\n\tz-index: 999 !important;\r\n}\r\n\r\n#edEditedAppointment-Status.drop-down__editor .drop-down__text[valueattr='V'],\r\n#edSelectedAppointment-Status.drop-down__editor .drop-down__text[valueattr='V'],\r\n#edSelectedSO-Status.drop-down__editor .drop-down__text[valueattr='V'],\r\n#edEditedAppointment-Status.drop-down__editor .drop-down__text[valueattr='N'],\r\n#edSelectedAppointment-Status.drop-down__editor .drop-down__text[valueattr='N'],\r\n#edSelectedSO-Status.drop-down__editor .drop-down__text[valueattr='N'] {\r\n\tbackground-color: rgba(195, 231, 255, 1);\r\n}\r\n#edEditedAppointment-Status.drop-down__editor .drop-down__text[valueattr='H'],\r\n#edSelectedAppointment-Status.drop-down__editor .drop-down__text[valueattr='H'],\r\n#edSelectedSO-Status.drop-down__editor .drop-down__text[valueattr='H'],\r\n#edEditedAppointment-Status.drop-down__editor .drop-down__text[valueattr='W'],\r\n#edSelectedAppointment-Status.drop-down__editor .drop-down__text[valueattr='W'],\r\n#edSelectedSO-Status.drop-down__editor .drop-down__text[valueattr='W'] {\r\n\tbackground-color: rgba(228, 192, 0, 0.25);\r\n}\r\n#edEditedAppointment-Status.drop-down__editor .drop-down__text[valueattr='C'],\r\n#edSelectedAppointment-Status.drop-down__editor .drop-down__text[valueattr='C'],\r\n#edSelectedSO-Status.drop-down__editor .drop-down__text[valueattr='C'],\r\n#edEditedAppointment-Status.drop-down__editor .drop-down__text[valueattr='Z'],\r\n#edSelectedAppointment-Status.drop-down__editor .drop-down__text[valueattr='Z'],\r\n#edSelectedSO-Status.drop-down__editor .drop-down__text[valueattr='Z'] {\r\n\tbackground-color: rgba(0, 0, 0, 0.1);\r\n}\r\n#edEditedAppointment-Status.drop-down__editor .drop-down__text[valueattr='X'],\r\n#edSelectedAppointment-Status.drop-down__editor .drop-down__text[valueattr='X'],\r\n#edSelectedSO-Status.drop-down__editor .drop-down__text[valueattr='X'] {\r\n\tbackground-color: rgba(255, 208, 208, 0.6);\r\n}\r\n#edEditedAppointment-Status.drop-down__editor .drop-down__text[valueattr='A'],\r\n#edSelectedAppointment-Status.drop-down__editor .drop-down__text[valueattr='A'],\r\n#edSelectedSO-Status.drop-down__editor .drop-down__text[valueattr='A'],\r\n#edEditedAppointment-Status.drop-down__editor .drop-down__text[valueattr='O'],\r\n#edSelectedAppointment-Status.drop-down__editor .drop-down__text[valueattr='O'],\r\n#edSelectedSO-Status.drop-down__editor .drop-down__text[valueattr='O'],\r\n#edEditedAppointment-Status.drop-down__editor .drop-down__text[valueattr='P'],\r\n#edSelectedAppointment-Status.drop-down__editor .drop-down__text[valueattr='P'],\r\n#edSelectedSO-Status.drop-down__editor .drop-down__text[valueattr='P'] {\r\n\tbackground-color: rgba(200, 229, 190, 0.6);\r\n}\r\n\r\n.edit-dialog {\r\n    width: 800px;  /* TODO: Temporary bugfix */\r\n}\r\n\r\n#pnlFiles, #pnlActivities, #pnlNote {\r\n\tdisplay: none;\r\n}\r\n",""]),e.exports=o},"screens/FS/FS300300/styles/qp-scheduler-popup.css":(e,n,r)=>{var i=r("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),o=r("./node_modules/css-loader/dist/runtime/api.js")(i);o.push([e.id,'\r\n:root {\r\n\t--qp-sch-dialog-width: 450px;\r\n\t--qp-sch-edit-dialog-width: 500px;\r\n}\r\n.qp-sch-popup-holder {\r\n\tposition: absolute;\r\n\theight: 100px;\r\n\ttop: -10000px;\r\n}\r\n\r\n.qp-sch-popup {\r\n\tmax-height: calc(100% - 40px);\r\n\tmax-width: var(----qp-sch-dialog-width) !important;\r\n\tborder-radius: 10px !important;\r\n\tbox-shadow: 0px 0px 24px 2px #00000059 !important;\r\n}\r\n\r\n/* the collapse icon needs to be in the same style as the close button (per the mockup) */\r\n/* TODO: remove once/if platform adds alternative styling for qp-collapsible-anchor */\r\n.qp-sch-popup .qp-collapser {\r\n\tbackground-color: transparent !important;\r\n\theight: 16px !important;\r\n\twidth: 16px !important;\r\n\tpadding: 0px !important;\r\n}\r\n\t.qp-sch-popup .qp-collapser.expanded:before {\r\n\t\tcontent: "\\e915" !important;\r\n\t}\r\n\t.qp-sch-popup .qp-collapser:not(.expanded):before {\r\n\t\tcontent: "\\e914" !important;\r\n\t}\r\n\r\n.qp-sch-popup.qp-sch-edit-popup {\r\n\tmax-width: var(----qp-sch-edit-dialog-width) !important;\r\n}\r\n\r\n.qp-sch-popup .b-panel-content {\r\n\tbackground-color: white !important;\r\n\tborder-radius: 10px !important;\r\n\tpadding: 20px 20px 10px 20px;\r\n}\r\n\t/* .qp-sch-popup.qp-sch-view-popup .b-panel-content {\r\n\t\tpadding-top: 20px;\r\n\t} */\r\n\r\n\r\n.qp-sch-popup .grid-content-table > tbody > tr.active > td,\r\n.qp-sch-popup .grid-content-table > tbody > tr.active > td.active {\r\n\tbackground-color: transparent !important;\r\n}\r\n\r\n.qp-sch-popup .gray-pane .grid-content .grid-content-table {\r\n\tbackground-color: var(--qp-sch-dark-background);\r\n}\r\n\r\n.qp-sch-popup .control-CurrentRow:before {\r\n\tcontent: none;\r\n}\r\n\r\n.qp-sch-popup .toggle {\r\n\tposition: static;\r\n    background: transparent;\r\n    color: #00000066;\r\n}\r\n\t.qp-sch-popup .toggle:hover {\r\n\t\tcolor: #000000;\r\n\t}\r\n\r\n.qp-sch-popup .qp-menu-shadow {\r\n\tbackground-color: transparent;\r\n}\r\n\r\n.qp-sch-popup .qp-fieldset {\r\n\toverflow: hidden;\r\n}\r\n\r\n.qp-sch-popup .gray-pane qp-grid {\r\n\tpadding-left: 10px;\r\n}\r\n\r\n.qp-sch-popup .transparent-section.qp-fieldset {\r\n\tpadding: 0px;\r\n}\r\n\t.qp-sch-popup .transparent-section.qp-fieldset .qp-field .wrapper{\r\n\t\tpadding: 0px;\r\n\t}\r\n\r\n\t.qp-sch-popup .transparent-section.qp-fieldset *:is(\r\n\t\t.qp-selector.qp-selector-readonly,\r\n\t\t.qp-datetime__editor.ReadOnly,\r\n\t\ttextarea.qp-text-editor,\r\n\t\tinput.qp-text-editor\r\n\t) {\r\n\t\tborder-bottom-color: #00000014;\r\n\t}\r\n\t.qp-sch-popup .transparent-section .qp-fieldset-caption {\r\n\t\tpadding: 0px;\r\n\t}\r\n\r\n.qp-sch-popup qp-tool-bar {\r\n\tmargin-left: -4px;\r\n}\r\n\r\n\r\n.qp-sch-popup-data {\r\n\toverflow: visible;\r\n\tposition: absolute;\r\n\tz-index: 10000;\r\n    background: white;\r\n    width: calc(var(--qp-sch-dialog-width) - 40px);\r\n\theight: auto;\r\n}\r\n\t.qp-sch-popup-edit-data {\r\n\t\twidth: calc(var(--qp-sch-edit-dialog-width) - 40px);\r\n\t}\r\n\t.qp-sch-popup-data qp-shrinking-panel {\r\n\t\tposition: initial;\r\n\t\twidth: 100%;\r\n\t\tpadding: 0px;\r\n\t}\r\n\t\t.qp-sch-popup-data .qp-field .label-wrapper {\r\n\t\t\twidth: 122px;\r\n\t\t}\r\n\r\n\t.qp-sch-popup-data ux-dialog {\r\n\t\tbox-shadow: none;\r\n\t\twidth: 100%;\r\n\t}\r\n\t\t.qp-sch-popup-data ux-dialog ux-dialog-header {\r\n\t\t\t/* TODO: Remove once adapted to native popups */\r\n\t\t\tpadding: 0;\r\n    \t\tborder-bottom: none;\r\n\t\t}\r\n\t\t\t.qp-sch-popup-data ux-dialog ux-dialog-header .qp-dialog-header {\r\n\t\t\t\t/* TODO: Remove once adapted to native popups */\r\n\t\t\t\tpadding: 0;\r\n\t\t\t\tmargin: 0;\r\n\t\t\t}\r\n\t\t.qp-sch-popup-data ux-dialog qp-tab {\r\n\t\t\tborder-bottom-left-radius: 10px;\r\n\t\t\tborder-bottom-right-radius: 10px;\r\n\t\t}\r\n\t\t.qp-sch-popup-data ux-dialog ux-dialog-body {\r\n\t\t\tpadding: 16px 0px 0px 0px;\r\n\t\t}\r\n\t\t.qp-sch-popup-data ux-dialog .qp-dialog-title {\r\n\t\t\tcolor: black;\r\n\t\t\tfont-weight: 600;\r\n\t\t}\r\n\t\t.qp-sch-popup-data ux-dialog .qp-tool-bar {\r\n\t\t\tmargin-top: 5px;\r\n\t\t}\r\n\r\n\t.qp-sch-popup-data .qp-field:not(.qp-sch-no-label) .control-container.size-default {\r\n\t\tflex-grow: 0.5 !important;\r\n\t\tflex-shrink: 0;\r\n\t}\r\n\t\t.qp-sch-edit-popup .qp-sch-popup-data .qp-field:not(.qp-sch-no-label) .control-container.size-default {\r\n\t\t\tflex-grow: 1 !important;\r\n\t\t}\r\n\r\n\t*:not(.event-info) > .qp-sch-popup-data.transparent {\r\n\t\tfilter:alpha(opacity=0);\r\n\t\tpointer-events: none;\r\n\t\topacity: 0;\r\n\t\tz-index: 0;\r\n\t}\r\n\t.qp-sch-popup-data .grid-top-bar {\r\n\t\tdisplay: none;\r\n\t}\r\n\t.qp-sch-popup-data .grid-content {\r\n\t\tmin-height: 32px !important;\r\n\t}\r\n\t\t.qp-sch-popup-data .grid-content-wrap {\r\n\t\t\tposition: initial;\r\n\t\t}\r\n\r\n\r\n.qp-sch-grid-fieldset {\r\n    gap: 6px;\r\n\tbackground-color: #F5F7F9;\r\n\tdisplay: flex;\r\n    flex-direction: column;\r\n}\r\n',""]),e.exports=o},"screens/FS/FS300300/styles/qp-scheduler-splitters.css":(e,n,r)=>{var i=r("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),o=r("./node_modules/css-loader/dist/runtime/api.js")(i);o.push([e.id,"/* TODO: It's a quick fix for a bug in qp-splitter*/\r\n.qp-splitter.qp-splitter-width {\r\n    height: 100% !important;\r\n    min-height: unset !important;\r\n}\r\n\r\n.qp-sch-backlog .b-grid-splitter-buttons {\r\n\tdisplay: none !important;\r\n}\r\n\r\n.qp-sch-calendar .b-grid-splitter-buttons {\r\n\tdisplay: flex !important;\r\n}\r\n\r\n.qp-sch-grid-container .b-grid-splitter {\r\n\tflex-basis: 1px !important;\r\n\tbackground-color: #c3c6ca !important;\r\n\t/* background-color: #6D6D6D !important; */\r\n}\r\n\t.qp-sch-grid-container .b-grid-splitter .b-grid-splitter-inner {\r\n\t\twidth: 1px !important;\r\n\t\tbackground-color: rgba(0,0,0,0) !important;\r\n\t\tpadding-right: 8px;\r\n\t\tpadding-left: 8px;\r\n\t\tmargin-left: -8px;\r\n\t\tleft: 0 !important;\r\n\t}\r\n\r\n\t.qp-sch-grid-container .b-grid-splitter-buttons {\r\n\t\tflex-direction: column-reverse;\r\n\t}\r\n\r\n\t.qp-sch-grid-container .b-hover:not(.b-grid-splitter-collapsed) > div > .b-grid-splitter-buttons {\r\n\t\topacity: 100%;\r\n\t}\r\n\t\t.b-draghelper-active .b-grid-splitter:not(.b-grid-splitter-collapsed) > div > .b-grid-splitter-buttons {\r\n\t\t\topacity: 0% !important;\r\n\t\t}\r\n\r\n\t.qp-sch-grid-container .b-grid-splitter:not(.b-hover):not(.b-grid-splitter-collapsed) > div > .b-grid-splitter-buttons {\r\n\t\topacity: 0%;\r\n\t\tanimation: 0.5s linear 0s fadeOut;\r\n\t}\r\n\r\n\t.qp-sch-grid-container .b-gridbase.b-split .b-grid-splitter .b-grid-splitter-buttons {\r\n\t\twidth: 26px;\r\n\t\theight: 54px;\r\n\t}\r\n\t.qp-sch-grid-container .b-gridbase.b-split .b-grid-splitter .b-grid-splitter-button-expand,\r\n\t.qp-sch-grid-container .b-gridbase.b-split .b-grid-splitter .b-grid-splitter-button-collapse {\r\n\t\tborder-radius: 0px;\r\n\t\tjustify-content: center;\r\n\t\tbackground-color: white;\r\n\t\tborder-left: 1px solid var(--qp-sch-splitter-line, rgba(0, 0, 0, 0.2));\r\n\t\tborder-right: 1px solid var(--qp-sch-splitter-line, rgba(0, 0, 0, 0.2));\r\n\t}\r\n\t\t.qp-sch-grid-container .b-gridbase.b-split .b-grid-splitter:not(.b-grid-splitter-collapsed) .b-grid-splitter-button-expand {\r\n\t\t\t/* border-top-right-radius: 7px 7px;\r\n\t\t\tborder-top-left-radius: 7px 7px;\r\n\t\t\tborder-top: 1px solid var(--qp-sch-splitter-line, rgba(0, 0, 0, 0.2)); */\r\n\t\t\tdisplay: none;\r\n\t\t}\r\n\r\n\t\t.qp-sch-grid-container .b-gridbase.b-split .b-grid-splitter:not(.b-grid-splitter-expanded) .b-grid-splitter-button-collapse {\r\n\t\t\tborder-radius: 7px;\r\n\t\t\tborder: 1px solid var(--qp-sch-splitter-line, rgba(0, 0, 0, 0.2));\r\n\t\t}\r\n\r\n\t.qp-sch-grid-container .b-grid-splitter-button-icon {\r\n\t\theight: 8px;\r\n\t\twidth: 5px;\r\n\t}\r\n\t.qp-sch-grid-container .b-grid-splitter.b-grid-splitter-collapsed{\r\n\t\tbackground: none !important;\r\n\t\tflex-basis: 24px !important;\r\n\t}\r\n\t\t.qp-sch-grid-container .b-virtual-scrollers .b-grid-splitter.b-grid-splitter-collapsed {\r\n\t\t\tbackground: var(--qp-highlight-color) !important;\r\n\t\t}\r\n\t\t.qp-sch-grid-container .b-gridbase.b-split .b-grid-splitter.b-grid-splitter-collapsed .b-grid-splitter-inner {\r\n\t\t\twidth: 24px !important;\r\n\t\t\tmargin: 0px;\r\n\t\t}\r\n\t\t.qp-sch-grid-container .b-gridbase.b-split .b-grid-splitter.b-grid-splitter-collapsed .b-grid-splitter-buttons {\r\n\t\t\twidth: 24px;\r\n\t\t\theight: 100%;\r\n\t\t}\r\n\t\t\t.qp-sch-main-container .b-gridbase.b-split:nth-child(2) .b-grid-splitter.b-grid-splitter-collapsed .b-grid-splitter-buttons {\r\n\t\t\t\ttop: 50% !important;\r\n\t\t\t}\r\n\r\n\t\t\t.qp-sch-grid-container .b-gridbase.b-split\r\n\t\t\t\t.b-grid-splitter.b-grid-splitter-collapsed:not(.b-grid-splitter-allow-collapse) .b-grid-splitter-button-expand {\r\n\t\t\t\tbackground-color: #eff7ff; /* cant't use a transparent color due to overlapped items */\r\n\t\t\t\tborder: none;\r\n\t\t\t}\r\n\t\t\tbody:not(.b-draghelper-active) .qp-sch-grid-container .b-gridbase.b-split\r\n\t\t\t\t\t.b-grid-splitter.b-grid-splitter-collapsed:not(.b-grid-splitter-allow-collapse) .b-grid-splitter-button-expand:hover {\r\n\t\t\t\t\tbackground-color: var(--qp-highlight-hover-color);\r\n\t\t\t\t}\r\n\t\t\t.qp-sch-grid-container .b-gridbase.b-split\r\n\t\t\t\t.b-grid-splitter.b-grid-splitter-collapsed:not(.b-grid-splitter-allow-collapse) .b-grid-splitter-button-collapse {\r\n\t\t\t\tdisplay: none;\r\n\t\t\t}\r\n\r\n.qp-splitter-width > .qp-splitter-bar {\r\n\tflex-basis: 20px;\r\n}\r\n.qp-splitter-width > .qp-splitter-bar > .qp-splitter-line {\r\n\tmargin-left: 10px;\r\n}\r\n.qp-splitter-bar .qp-splitter-buttons {\r\n\talign-items: center;\r\n}\r\n.qp-splitter-bar:not(.qp-splitter-collapsed) > .qp-splitter-line {\r\n\tbackground-color: #C8C8C8;\r\n}\r\n\r\n.qp-splitter-width > .qp-splitter-collapsed > .qp-splitter-buttons > .qp-splitter-button {\r\n\tbackground-color: var(--qp-highlight-color);\r\n}\r\n\r\n.qp-splitter > .qp-splitter-bar > .qp-splitter-buttons > *:is(.qp-splitter-button-first, .qp-splitter-button-second) {\r\n\tdisplay: flex !important;\r\n}\r\n\r\n.qp-splitter-collapsed .qp-splitter-button > qp-icon > svg {\r\n\tcolor: var(--qp-primary-color) !important;\r\n}\r\n\r\n.b-draghelper-active .qp-splitter-bar:not(.qp-splitter-collapsed) > .qp-splitter-buttons,\r\n.b-draghelper-active .qp-splitter-bar:not(.qp-splitter-collapsed) > .qp-splitter-line {\r\n\topacity: 0% !important;\r\n}\r\n.b-draghelper-active .qp-splitter-collapsed .b-grid-splitter-button-icon {\r\n\tdisplay: block !important;\r\n}\r\n\r\n.b-draghelper-active .qp-splitter-collapsed > .qp-splitter-buttons > .qp-splitter-button:hover {\r\n\tbackground-color: var(--qp-highlight-color) !important;\r\n}\r\n",""]),e.exports=o},"screens/FS/FS300300/styles/qp-scheduler.css":(e,n,r)=>{var i=r("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),o=r("./node_modules/css-loader/dist/runtime/api.js")(i);o.push([e.id,':root {\r\n\t/* --qp-highlight-color-alt: #d2e9fe80;\r\n\t--qp-highlight-hover-color-alt: #d2e9fe; */\r\n\t--qp-sch-event-background-alt: #d2e9fe;\r\n\r\n\t--qp-highlight-color: #D6EFFF80;\r\n\t--qp-highlight-hover-color: #D6EFFF;\r\n\r\n\t--qp-sch-black: #1B1B1B;\r\n\t--qp-sch-event-background: #D6EFFF;\r\n\t--qp-sch-event-border: #007ACC1F;\r\n\t--qp-sch-event-color: #1B1B1B;\r\n\t--qp-sch-event-unassigned: #1B1B1B;\r\n\t--qp-sch-event-unassigned-border: #D0D0D0;\r\n\t--qp-sch-splitter-line: var(--qp-shadow-color, rgba(0, 0, 0, 0.2));\r\n\t--qp-sch-unavailable-background: #00204012;\r\n\t--qp-sch-header-background: white;\r\n\t--qp-sch-dark-background: #F5F7F8;\r\n\t--qp-sch-button-hover-background: rgba(0, 0, 0, 0.10);\r\n\t--qp-sch-header-border: #E8E8E8;\r\n\t--qp-sch-border: rgba(0, 0, 0, 0.09);\r\n\t--qp-sch-semi-transparent-main: rgba(var(--primary-color-rgb), 0.88);\r\n}\r\n\r\n@keyframes fadeIn {\r\n\tfrom {\r\n\t\topacity: 0%;\r\n\t}\r\n\r\n\tto {\r\n\t\topacity: 100%;\r\n\t}\r\n}\r\n\r\n@keyframes fadeOut {\r\n\t0% {\r\n\t\topacity: 100%;\r\n\t}\r\n\r\n\t50% {\r\n\t\topacity: 100%;\r\n\t}\r\n\r\n\t100% {\r\n\t\topacity: 0%;\r\n\t}\r\n}\r\n\r\nbody.b-draghelper-active div {\r\n\t/* TODO: it\'s nice to have it not changing whilу drag&drop, but we need to show a wait cursor at the end */\r\n\t/* cursor: default !important; */\r\n}\r\n\r\n.qp-sch-tile-icon {\r\n\tdisplay: flex;\r\n    flex-wrap: wrap;\r\n    height: 16px;\r\n    overflow: hidden;\r\n\tflex-shrink: 10000;\r\n}\r\n\t.qp-sch-tile-icon > span:first-child {\r\n\t\twidth: 10px;\r\n\t\theight: 16px;\r\n\t}\r\n\t.qp-sch-tile-icon > span:last-child {\r\n\t\theight: 16px;\r\n\t\tflex-wrap: nowrap;\r\n    \tdisplay: flex;\r\n\t}\r\n\r\n\t.qp-sch-tile-icon span:has(> svg),\r\n\t.qp-sch-tile-icon svg {\r\n\t\twidth: 16px;\r\n\t\theight: 16px;\r\n\t}\r\n\t\t.qp-sch-tile-icon span:has(> svg) + span:has(> svg) {\r\n\t\t\tmargin-left: 6px;\r\n\t\t}\r\n\t\t/* *:is(.qp-sch-not-confirmed, .qp-sch-dragged) .qp-sch-tile-icon svg {\r\n\t\t\tfilter: brightness(100) saturate(0%) brightness(100);\r\n\t\t} */\r\n\r\n.qp-sch-left-container {\r\n\tflex: 1 1 0%;\r\n\t/* border-top: 1px solid var(--qp-sch-border, rgba(0, 0, 0, 0.09)); */\r\n}\r\n\t.qp-sch-left-container .qp-sch-event-info.b-hidden {\r\n\t\t/* display: none !important; */\r\n\t\tfont-style: italic;\r\n\t\tdisplay: inherit !important;\r\n\t}\r\n\t.qp-sch-left-container .qp-sch-popup-link:hover {\r\n\t\ttext-decoration: underline;\r\n\t}\r\n\t.qp-sch-left-container .b-grid-header-container {\r\n\t\tdisplay: none;\r\n\t}\r\n\t.qp-sch-left-container .b-grid-row.b-selected,\r\n\t.qp-sch-left-container .b-grid-row.b-hover {\r\n\t\tbackground-color: transparent !important;\r\n\t}\r\n\t.qp-sch-left-container .qp-sch-not-assigned {\r\n\t\tborder-radius: 10px;\r\n\t\tfont-weight: 700;\r\n\t\tfont-size: 12px;\r\n\t\twidth: 100%;\r\n\t\tcursor: pointer;\r\n\t\toverflow: hidden;\r\n\t\ttransition: background-color 0.2s, color 0.2s, opacity 0.2s, font-weight 0.2s, border 0.2s !important;\r\n \t}\r\n\r\n\t.qp-sch-left-container .b-grid-row {\r\n\t\tborder-color: transparent;\r\n\t\t/* padding-top: 2px;\r\n\t\tpadding-bottom: 2px; */\r\n\t}\r\n\t.qp-sch-left-container .b-grid-vertical-scroller {\r\n\t\tbackground-color: var(--qp-sch-dark-background);\r\n\t\tpadding: 0px 4px 12px 12px;\r\n\t}\r\n\t.qp-sch-left-container .b-grid-cell {\r\n\t\tflex-direction: column;\r\n\t\talign-items: flex-start;\r\n\t\tpadding: 0;\r\n\t\tpadding-bottom: 9px;\r\n\t}\r\n\t\t.qp-sch-left-container.qp-sch-so-container .qp-sch-event-info {\r\n\t\t\tpadding-left: 12px;\r\n\t\t}\r\n\t\t.qp-sch-left-container .qp-sch-event-info + div {\r\n\t\t\tmax-height: 128px;\r\n    \t\toverflow: auto;\r\n\t\t}\r\n\r\n\t\t.qp-sch-left-container .qp-sch-service-info {\r\n\t\t\twidth: 100%;\r\n\t\t}\r\n\t\t\t/* TODO: Simplify this */\r\n\t\t\t.qp-sch-left-container div:not(.qp-sch-service-info:not(.only-child):not(.scheduled):hover) + .qp-sch-service-info,\r\n\t\t\tbody.b-draghelper-active .qp-sch-left-container div + .qp-sch-service-info {\r\n\t\t\t\tbackground-image:\r\n\t\t\t\t\trepeating-linear-gradient(to right, rgba(0, 0, 0, 0.13) 0%, rgba(0, 0, 0, 0.13) 50%, transparent 50%, transparent 100%);\r\n\t\t\t\tbackground-position: left top;\r\n\t\t\t\tbackground-repeat: repeat-x;\r\n\t\t\t\tbackground-size: 6px 1px;\r\n\t\t\t\tbackground-color: transparent!important;\r\n\t\t\t}\r\n\t\t\t/* TODO: Simplify this */\r\n\t\t\tbody:not(.b-draghelper-active) .qp-sch-left-container .qp-sch-not-assigned:hover:not(:has(.qp-sch-service-info:not(.only-child):hover)) .qp-sch-service-info {\r\n\t\t\t\tbackground-image:\r\n\t\t\t\t\trepeating-linear-gradient(to right, white 0%, white 50%, transparent 50%, transparent 100%);\r\n\t\t\t\tbackground-position: left top;\r\n\t\t\t\tbackground-repeat: repeat-x;\r\n\t\t\t\tbackground-size: 6px 1px;\r\n\t\t\t\tbackground-color: transparent!important;\r\n\t\t\t}\r\n\t\t\t.qp-sch-service-info ul {\r\n\t\t\t\tmargin: 0;\r\n\t\t\t\tpadding-left: 0px;\r\n\t\t\t\ttext-overflow: ellipsis;\r\n    \t\t\toverflow: hidden;\r\n\t\t\t}\r\n\t\t\t\t.qp-sch-service-info li {\r\n\t\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\tlist-style-position: inside;\r\n\t\t\t\t\ttext-wrap: nowrap;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.qp-sch-service-info li span {\r\n\t\t\t\t\tmargin-left: -5px;\r\n\t\t\t\t}\r\n\r\n\t\t\t.qp-sch-service-info.scheduled li::marker {\r\n\t\t\t\tcontent: \'\\2713\';\r\n\t\t\t\tcolor: #c0c2c4;\r\n\t\t\t}\r\n\t\t\t.qp-sch-service-info.scheduled li span {\r\n\t\t\t\tpadding-left: 4px;\r\n\t\t\t\tcolor: #c0c2c4;\r\n\t\t\t}\r\n\r\n\t\tbody:not(.b-draghelper-active) .qp-sch-left-container .qp-sch-service-info:not(.only-child):not(.scheduled):hover {\r\n\t\t\tbackground: #1B202450 !important;\r\n\t\t\tcolor: white!important;\r\n\t\t}\r\n\t\tbody:not(.b-draghelper-active) .qp-sch-left-container .qp-sch-service-info.scheduled:hover {\r\n\t\t\tcursor: initial;\r\n\t\t}\r\n\r\n\t.qp-sch-left-container\t.b-gridbase .b-grid-panel-body:not(.b-autoheight) > .b-grid-body-container {\r\n\t\toverflow-y: scroll !important;\r\n\t\tpadding-top: 11px;\r\n    \tbackground-color: var(--qp-sch-dark-background);\r\n\t}\r\n\r\n.qp-sch-config-form {\r\n\tposition: absolute;\r\n    z-index: 1;\r\n    right: 0px;\r\n\tpointer-events:none;\r\n}\r\n\t.qp-sch-config-form .container {\r\n\t\tpadding-right: 0px;\r\n\t}\r\n\t\t.qp-sch-config-form .v-stack {\r\n\t\t\tcolor: transparent;\r\n\t\t\toverflow: hidden;\r\n\t\t}\r\n\t\t.qp-sch-config-form .qp-fieldset-icon {\r\n\t\t\tpointer-events: all;\r\n\t\t\tborder: 1px solid var(--qp-sch-black);\r\n\t\t\tpadding-top: 4px;\r\n\t\t\tpadding-left: 8px;\r\n    \t\tpadding-right: 10px;\r\n\t\t\ttop: 9px;\r\n\t\t\tright: 10px;\r\n\t\t\twidth: max-content;\r\n\t\t\ttext-align: center;\r\n\t\t}\r\n\t\t\t.qp-sch-left-container .qp-sch-config-form .qp-fieldset-icon {\r\n\t\t\t\ttop: 10px;\r\n\t\t\t\tright: 20px;\r\n\t\t\t}\r\n\t\t\t.qp-sch-config-form .qp-fieldset-icon:not(:hover) {\r\n\t\t\t\tbackground: white;\r\n\t\t\t}\r\n\t\t\t.qp-sch-config-form .qp-fieldset-icon:hover {\r\n\t\t\t\tbackground: #F0F0F0; /* can\'t have it semi-transparent - it\'s right on the grid */\r\n\t\t\t}\r\n\t\t\t.qp-sch-config-form .qp-fieldset-icon:after {\r\n\t\t\t\tfont-size: 13px;\r\n\t\t\t\tfont-family: Arial, sans-serif !important;\r\n\t\t\t\tposition: relative;\r\n\t\t\t\ttop: -2px;\r\n\t\t\t\tleft: -1px;\r\n\t\t\t}\r\n\t\t\t\t.qp-sch-config-form .qp-sch-config-left .qp-fieldset-icon:after {\r\n\t\t\t\t\tcontent: "Left";\r\n\t\t\t\t}\r\n\t\t\t\t.qp-sch-config-form .qp-sch-config-right .qp-fieldset-icon:after {\r\n\t\t\t\t\tcontent: "Right";\r\n\t\t\t\t}\r\n\r\n\t.qp-sch-config-form qp-fieldset {\r\n\t\tpadding: 0;\r\n\t\tborder: 0;\r\n\t}\r\n\r\n\t.qp-sch-config-form .toggle,\r\n\t.qp-sch-config-form fieldset {\r\n\t\tvisibility: hidden;\r\n\t}\r\n\r\n\t.qp-sch-config-left {\r\n\t\tposition: absolute;\r\n\t\tright: 82px;\r\n\t}\r\n\r\n\t.qp-sch-config-right {\r\n\t\tposition: absolute;\r\n\t}\r\n\r\n.b-grid-vertical-scroller {\r\n\tmin-height: 54px;\r\n}\r\n\r\n.qp-sch-main-container {\r\n\tbackground-color: var(--qp-sch-header-background);\r\n\tbox-shadow: inset 0 0 0 1px rgb(0 0 0 / 3%);\r\n\twidth: 100%;\r\n\tborder: 1px solid var(--qp-sch-border, rgba(0, 0, 0, 0.09));\r\n\tposition: relative;\r\n    flex: 1;\r\n    min-height: 0;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: stretch;\r\n    transform: translate(0, 0);\r\n    overflow: hidden;\r\n}\r\n\t.qp-sch-main-container .b-grid-header-text > .b-grid-header-text-content {\r\n\t\tfont-size: 14px;\r\n\t}\r\n\r\n\t.qp-sch-backlog {\r\n\t\tborder-bottom: 1px solid var(--qp-sch-border, rgba(0, 0, 0, 0.09));\r\n\t\tmin-height: 110px !important;\r\n\t\tmax-height: 33%;\r\n\t}\r\n\t\t.qp-sch-backlog .b-sch-color-blue {\r\n\t\t\tmin-height: 54px;\r\n\t\t}\r\n\t\t.qp-sch-backlog .b-grid-subgrid-locked .b-grid-cell {\r\n\t\t\talign-items: flex-start;\r\n\t\t\tpadding-top: 19px;\r\n\t\t}\r\n\t\t.qp-sch-backlog .b-virtual-scrollers {\r\n\t\t\tdisplay: none;\r\n\t\t}\r\n\t\t.qp-sch-backlog .b-grid-body-container {\r\n\t\t\tmin-height: 54px;\r\n\t\t}\r\n\t\t\t.qp-sch-backlog .b-grid-body-container .b-grid-row {\r\n\t\t\t\tmin-height: 54px;\r\n\t\t\t\tbackground: transparent;\r\n\t\t\t\tborder: none;\r\n\t\t\t}\r\n\t\t\t.qp-sch-backlog .b-grid-body-container .b-grid-subgrid-locked {\r\n\t\t\t\tbackground-color: var(--qp-sch-unavailable-background);\r\n\t\t\t}\r\n\t\t\t\t.qp-sch-backlog .b-grid-body-container .b-grid-subgrid-locked.b-grid-subgrid-collapsed div {\r\n\t\t\t\t\tdisplay: none;\r\n\t\t\t\t}\r\n\t\t.qp-sch-backlog .b-grid-row.b-hover {\r\n\t\t\tbackground-color: transparent !important;\r\n\t\t}\r\n\r\n\t.qp-sch-calendar {\r\n\t\tflex: 1 1 0%;\r\n\t}\r\n\t\tbody:not(.b-draghelper-active) .qp-sch-calendar .b-grid-subgrid-locked .b-grid-cell {\r\n\t\t\tcursor: pointer;\r\n\t\t}\r\n\r\n.qp-sch-hide-grid .grid-content,\r\n.qp-sch-hide-grid .grid-header,\r\n.qp-sch-hide-grid .grid-pager {\r\n\tposition: absolute;\r\n\tdisplay: none;\r\n\theight: 10000px;\r\n}\r\n\r\n.qp-sch-grid-container {\r\n\theight: 100%;\r\n\tposition: relative;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n}\r\n\t.qp-sch-grid-container .b-sch-event-wrap:not(.b-sch-vertical) {\r\n\t\tpadding-left: 2px;\r\n\t\tpadding-right: 2px;\r\n\t}\r\n\t.qp-sch-grid-container .b-sch-event-wrap.b-sch-vertical {\r\n\t\tpadding-top: 2px;\r\n\t\tpadding-bottom: 3px;\r\n\t}\r\n\r\n\t.qp-sch-grid-container-inner {\r\n\t\theight: calc(100% - 43px); /* TDDO: change it to flex */\r\n\t\tposition: relative;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tpadding-top: 5px;\r\n\t\tborder-bottom: 1px solid var(--qp-sch-border, rgba(0, 0, 0, 0.09));\r\n\t\tborder-top: 1px solid rgba(0, 0, 0, 0.0);\r\n\t}\r\n\t.qp-sch-grid-container .reversed qp-hyper-icon {\r\n\t\tvertical-align: baseline;\r\n\t\ttransform: rotate(270deg) scaleX(-1);\r\n\t}\r\n\t.qp-sch-grid-container .around-the-clock svg {\r\n\t\tcolor: var(--qp-primary-color);\r\n\t}\r\n\t.qp-sch-grid-container qp-tabbar {\r\n\t\tmin-height: 43px;\r\n\t\tflex: 0 0 43px;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.qp-sch-grid-container .grid-right-toolbar-cont .qp-tool-bar {\r\n\t\tmargin-right: -4px; /* TODO: Qickfix for the bug in qp-tool-bar: it has a margin-left:-4px, but 0 for margin-right */\r\n\t\ttext-wrap: nowrap; /* TODO: Qickfixes for the bugs in qp-grid/qp-tool-bar */\r\n\t\toverflow: visible;\r\n\t}\r\n\t\t.qp-sch-grid-container .qp-datetime__editor {\r\n\t\t\tborder: none !important;\r\n\t\t\tbox-shadow: none !important;\r\n\t\t\tbackground-color: rgba(0, 0, 0, 0.06);\r\n\t\t}\r\n\t\t\t.qp-sch-grid-container .qp-datetime__editor input {\r\n\t\t\t\tcolor: transparent;\r\n\t\t\t}\r\n\t\t\t.qp-sch-grid-container .qp-datetime__editor .buttonsCont {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: row;\r\n\t\t\t}\r\n\t\t\t\t.qp-sch-grid-container .qp-datetime__editor .buttonsCont span {\r\n\t\t\t\t\tpadding-top: 2px;\r\n\t\t\t\t\tpadding-right: 5px;\r\n\t\t\t\t\ttext-wrap: nowrap;\r\n\t\t\t\t}\r\n\t\t\t\t.qp-sch-grid-container .qp-datetime__editor .buttonsCont > qp-icon {\r\n\t\t\t\t\tmargin-top: 7px;\r\n\t\t\t\t}\r\n\r\n.qp-sch-time-period {\r\n    border: 1px solid #0000001A !important;\r\n    height: calc(var(--qp-toolbar-height) - 2px) !important;\r\n}\r\n\t.qp-sch-time-period > * {\r\n\t\tpadding: calc( ( var(--qp-toolbar-height) - var(--qp-icon-size) ) / 2 - 1px) 10px;\r\n\t}\r\n\t.qp-sch-time-period:not(.qp-sch-selected-time-period):not(:hover) > * {\r\n\t\tbackground: inherit !important;\r\n\t}\r\n\r\n.qp-sch-calendar-container .b-sch-event,\r\n.qp-sch-search-container .b-sch-event {\r\n\tbackground-color: var(--qp-sch-event-background);\r\n\tcolor: var(--qp-sch-event-color);\r\n\tborder-radius: 10px;\r\n\tfont-weight: 700;\r\n\tfont-size: 12px;\r\n\toutline: none !important;\r\n}\r\n\t.qp-sch-search-container .b-sch-event:is(:not(.qp-sch-not-confirmed):not(.qp-sch-locked),.qp-sch-not-assigned),\r\n\t.qp-sch-calendar-container .b-sch-event:is(:not(.qp-sch-not-confirmed):not(.qp-sch-locked),.qp-sch-not-assigned):not(.qp-sch-search-highlight-event):not(.qp-sch-projected-assignment):not(.b-sch-dirty-new) {\r\n\t\tborder: 1px solid var(--qp-sch-event-border);\r\n\r\n\t}\r\n\t.qp-sch-calendar-container .b-sch-event.qp-sch-locked,\r\n\t.qp-sch-search-container .b-sch-event.qp-sch-locked {\r\n\t\tbackground-color: #0000001A;\r\n\t\tborder: 1px solid #00000010;\r\n\t}\r\n\r\n.qp-sch-calendar-container .b-sch-event:not(.b-sch-dirty-new):not(.qp-sch-filtered-out):is(:not(.qp-sch-not-confirmed),.qp-sch-not-assigned):not(.qp-sch-not-assigned:hover) .qp-sch-event-info > div {\r\n\tbackground: linear-gradient(var(--qp-sch-event-color), var(--qp-sch-event-color)) left/calc(100% - 12px) 100%, transparent;\r\n\t-webkit-background-clip: text;\r\n\tbackground-clip: text;\r\n\t-webkit-text-fill-color: transparent;\r\n\tcolor: transparent;\r\n}\r\n\r\n.qp-sch-calendar-container .b-sch-event.qp-sch-filtered-out {\r\n\tbackground-color: #00204010;\r\n\tcolor: transparent;\r\n}\r\n\t.qp-sch-calendar-container .b-sch-event.qp-sch-filtered-out svg {\r\n\t\tdisplay: none;\r\n\t}\r\n\r\n.qp-sch-not-confirmed:not(.qp-sch-not-assigned):not(.qp-sch-projected-assignment),\r\n.qp-sch-calendar-container .b-sch-dirty-new {\r\n\tbackground: repeating-linear-gradient(\r\n\t\t290deg,\r\n\t\tvar(--qp-primary-color),\r\n\t\tvar(--qp-primary-color) 8px,\r\n\t\tvar(--qp-sch-semi-transparent-main) 8px,\r\n\t\tvar(--qp-sch-semi-transparent-main) 16px\r\n\t);\r\n\tcolor: white !important;\r\n}\r\n\t/* hide text with width < 12px */\r\n\t.qp-sch-calendar .qp-sch-not-confirmed:not(.qp-sch-not-assigned):not(.qp-sch-projected-assignment) .qp-sch-event-info > div > span,\r\n\tbody:not(.b-draghelper-active) .qp-sch-backlog .b-sch-event:not(.b-sch-dirty-new):hover .qp-sch-event-info > div > span {\r\n\t\t/* width: 100%; */\r\n\t\tbackground: linear-gradient(white,white) left/calc(100% - 12px) 100%, transparent;\r\n\t\t-webkit-background-clip: text;\r\n\t\tbackground-clip: text;\r\n\t\t-webkit-text-fill-color: transparent;\r\n\t\tcolor: transparent;\r\n\t}\r\n\r\n\t/* make all text white on the left pane, with narrow font as on the board (not the same as "color: white") */\r\n\t.qp-sch-left-container .qp-sch-not-confirmed:not(.qp-sch-not-assigned):not(.qp-sch-projected-assignment) .qp-sch-event-info > div > span > span {\r\n\t\tbackground: white;\r\n\t\t-webkit-background-clip: text;\r\n\t\tbackground-clip: text;\r\n\t\t-webkit-text-fill-color: transparent;\r\n\t\tcolor: transparent;\r\n\t}\r\n\r\n\t.qp-sch-not-confirmed:not(.qp-sch-not-assigned):not(.qp-sch-projected-assignment) .qp-sch-event-info > div mark {\r\n\t\t-webkit-text-fill-color: black;\r\n    \tbackground-color: yellow;\r\n\t}\r\n\r\n.qp-sch-backlog .qp-sch-search-highlight-event {\r\n\tborder: none !important;\r\n}\r\n\r\n.qp-sch-not-assigned {\r\n\tbackground-color: #fff !important;\r\n\tcolor: var(--qp-sch-event-unassigned) !important;\r\n\tborder: solid 1px var(--qp-sch-event-unassigned-border) !important;\r\n}\r\n\r\n\t.qp-sch-not-assigned.qp-sch-not-confirmed {\r\n\t\tbackground: repeating-linear-gradient(\r\n\t\t\t290deg,\r\n\t\t\twhite,\r\n\t\t\twhite 8px,\r\n\t\t\t#F3F4F5 8px,\r\n\t\t\t#F3F4F5 16px\r\n\t\t);\r\n\t}\r\n\tbody:not(.b-draghelper-active) .qp-sch-grid-container > div:not(.qp-sch-search-container) .qp-sch-not-assigned:hover:not(:has(.qp-sch-service-info:not(.only-child):hover)),\r\n\tbody:not(.b-draghelper-active) .qp-sch-grid-container > div:not(.qp-sch-search-container) .qp-sch-not-assigned.qp-sch-not-confirmed:hover {\r\n\t\tbackground: #1B202450 !important;\r\n\t\tborder: 1px solid transparent;\r\n\t\tcolor: white!important;\r\n\t}\r\n\t\tbody:not(.b-draghelper-active) .qp-sch-grid-container > div:not(.qp-sch-search-container) .qp-sch-not-assigned:hover:not(:has(.qp-sch-service-info:not(.only-child):hover)) .qp-sch-tile-icon,\r\n\t\tbody:not(.b-draghelper-active) .qp-sch-grid-container > div:not(.qp-sch-search-container) .qp-sch-not-assigned.qp-sch-not-confirmed:hover .qp-sch-tile-icon {\r\n\t\t\tfilter: brightness(100) saturate(0%) brightness(100);\r\n\t\t}\r\n\r\n\tbody:not(.b-draghelper-active) .qp-sch-grid-container > div:not(.qp-sch-search-container) .qp-sch-not-assigned:hover:not(:has(.qp-sch-service-info:not(.only-child):hover)) span,\r\n\tbody:not(.b-draghelper-active) .qp-sch-grid-container > div:not(.qp-sch-search-container) .qp-sch-not-assigned.qp-sch-not-confirmed:hover span {\r\n\t\tcolor: white!important;\r\n\t}\r\n\r\n.qp-sch-left-container .b-sch-event:is(:not(.qp-sch-not-confirmed),.qp-sch-not-assigned) .qp-sch-event-info {\r\n\tpadding-block: 7px;\r\n}\r\n\r\n.qp-sch-left-container .b-sch-event:is(:not(.qp-sch-not-confirmed),.qp-sch-not-assigned) .b-sch-event-content > div:first-child {\r\n\tmargin-left: -1px;\r\n}\r\n\r\n.qp-sch-left-container .b-sch-event:is(:not(.qp-sch-not-confirmed),.qp-sch-not-assigned) .b-sch-event-content > div:last-child {\r\n\t/* margin-right: -1px; */\r\n}\r\n\r\n.qp-sch-search-highlight,\r\n.qp-sch-search-highlight-event:not(.qp-sch-projected-assignment) > div {\r\n\tborder: 3px solid black !important;\r\n\tborder-radius: 10px;\r\n\tbackground-position: 2px 2px !important;\r\n\twidth: 100%;\r\n}\r\n\t.qp-sch-search-highlight.qp-sch-not-confirmed:not(.qp-sch-not-assigned),\r\n\t.qp-sch-search-highlight-event.qp-sch-not-confirmed:not(.qp-sch-not-assigned):not(.qp-sch-projected-assignment) > div {\r\n\t\tbackground-position: 1px 1px !important;\r\n\t\tborder-width: 2px !important;\r\n\t}\r\n\r\n\t.qp-sch-search-highlight.qp-sch-not-confirmed:not(.qp-sch-not-assigned):before,\r\n\t.qp-sch-search-highlight-event.qp-sch-not-confirmed:not(.qp-sch-not-assigned):not(.qp-sch-projected-assignment) > div:before {\r\n\t\tposition: absolute;\r\n\t\tz-index: 2;\r\n\t\tdisplay: block;\r\n\t\tcontent: \'\';\r\n\t\tborder-radius: 8px;\r\n\t\tborder: 2px solid #ffffffff;\r\n\t\tbox-sizing: border-box;\r\n\t\t-moz-box-sizing: border-box;\r\n\t\t-webkit-box-sizing: border-box;\r\n\t\tpointer-events: none;\r\n\t}\r\n\t\t.qp-sch-search-highlight-event:not(.qp-sch-projected-assignment) > div:before {\r\n\t\t\theight: calc(100% - 4px);\r\n\t\t\twidth: calc(100% - 4px);\r\n\t\t}\r\n\t\t.qp-sch-search-highlight:before {\r\n\t\t\theight: 100%;\r\n\t\t\twidth: 100%;\r\n\t\t}\r\n\r\n\r\n\t/* TODO: Simplify this logic */\r\n\t.qp-sch-search-highlight .qp-sch-event-info {\r\n\t\tpadding-block: 5px !important;\r\n\t}\r\n\t\t.qp-sch-search-highlight.qp-sch-not-confirmed:not(.qp-sch-not-assigned) .qp-sch-event-info {\r\n\t\t\tpadding-block: 6px !important;\r\n\t\t}\r\n\r\n\t.qp-sch-search-container .qp-sch-search-highlight-event:not(.qp-sch-projected-assignment) .qp-sch-event-info {\r\n\t\tpadding-block: 5px !important;\r\n\t}\r\n\t.qp-sch-calendar-container .qp-sch-search-highlight-event:not(.qp-sch-projected-assignment) .qp-sch-event-info {\r\n\t\tpadding-block: 6px !important;\r\n\t}\r\n\r\n\t.qp-sch-search-highlight .b-sch-event-content > div:first-child,\r\n\t.qp-sch-search-highlight-event:not(.qp-sch-projected-assignment) .b-sch-event-content > div:first-child {\r\n\t\tmargin-left: -3px !important;\r\n\t}\r\n\t\t.qp-sch-search-highlight.qp-sch-not-confirmed:not(.qp-sch-not-assigned) .b-sch-event-content > div:first-child,\r\n\t\t.qp-sch-search-highlight-event.qp-sch-not-confirmed:not(.qp-sch-not-assigned):not(.qp-sch-projected-assignment) .b-sch-event-content > div:first-child {\r\n\t\t\tmargin-left: -2px !important;\r\n\t\t}\r\n\r\n\t.qp-sch-search-highlight .b-sch-event-content > div:last-child {\r\n\t\tmargin-right: -1px !important;\r\n\t}\r\n\t.qp-sch-search-highlight-event:not(.qp-sch-projected-assignment) .b-sch-event-content > div:last-child {\r\n\t\tmargin-right: -2px !important;\r\n\t}\r\n\r\n.qp-sch-search-dimmed-event {\r\n\topacity: 0.5;\r\n}\r\n\r\n.qp-sch-grid-container .b-grid-cell {\r\n\tcolor: inherit;\r\n\toutline: none !important;\r\n}\r\n\r\n.b-sch-event {\r\n\toutline: none !important;\r\n}\r\n\r\n/* Note: Bryntum manages b-hover incorrectly while dragging is on */\r\n.qp-sch-calendar .b-grid-subgrid-locked .b-grid-row:is(.b-selected, [qp-sch-dragged-over~="true"]),\r\nbody:not(.b-draghelper-active) .qp-sch-calendar .b-grid-subgrid:not(.b-timeaxissubgrid) .b-grid-row:not(.b-group-row).b-hover {\r\n\tbackground-color: var(--qp-highlight-color) !important;\r\n}\r\n\tbody.b-draghelper-active .qp-sch-calendar .b-grid-subgrid:not(.b-timeaxissubgrid) .b-grid-row:not(.b-group-row).b-hover:not(.b-selected):not([qp-sch-dragged-over~="true"]) {\r\n\t\tbackground-color: transparent !important;\r\n\t}\r\n\t.qp-sch-grid-container .b-grid-subgrid:not(.b-timeaxissubgrid) .b-grid-row:not(.b-group-row).b-hover .b-grid-cell {\r\n\t\tbackground-color: transparent !important;\r\n\t}\r\n\t.qp-sch-calendar .b-grid-subgrid:not(.b-timeaxissubgrid) .b-grid-row:not(.b-group-row).b-selected[qp-sch-dragged-over~="true"],\r\n\tbody:not(.b-draghelper-active) .qp-sch-calendar .b-grid-subgrid:not(.b-timeaxissubgrid) .b-grid-row:not(.b-group-row).b-selected.b-hover  {\r\n\t\tbackground-color: var(--qp-highlight-hover-color) !important;\r\n\t}\r\n\r\n\t.qp-sch-grid-container .b-gridbase.b-split .b-grid-splitter:not(.b-disabled).b-grid-splitter-collapsed {\r\n\t\tborder-right: 1px solid #E8E8E8;\r\n\t}\r\n\r\n.qp-sch-dragged-wrapper {\r\n\twidth: 100%;\r\n\theight: 100%;\r\n}\r\n\t.qp-sch-dragged-wrapper:not(.qp-sch-vertical) {\r\n\t\tpadding-left: 2px;\r\n\t\tpadding-right: 3px;\r\n\t}\r\n\t\t.qp-sch-dragged-wrapper:not(.qp-sch-vertical) .qp-sch-dragged {\r\n\t\t\tvertical-align: middle;\r\n\t\t}\r\n\t\t.qp-sch-dragged-wrapper:not(.qp-sch-vertical) table,\r\n\t\t.qp-sch-dragged-wrapper:not(.qp-sch-vertical) tr {\r\n\t\t\theight: 100%;\r\n\t\t\tvertical-align: middle;\r\n\t\t}\r\n\t.qp-sch-dragged-wrapper.qp-sch-vertical {\r\n\t\tpadding-right: 1px;\r\n\t\tpadding-top: 2px;\r\n\t\tpadding-bottom: 3px;\r\n\t}\r\n\r\n\t.qp-sch-dragged {\r\n\t\tbackground-color: rgba(0, 0, 0, 0.35);\r\n\t\tborder-radius: 9px;\r\n\t\tcolor: white;\r\n\t\theight: 100%;\r\n\t\tborder: none;\r\n\t\tdisplay: flex;\r\n\t}\r\n\t\t.qp-sch-dragged-valid .qp-sch-dragged {\r\n\t\t\tbackground-color: color-mix(in srgb, var(--qp-primary-color) 71%, transparent) !important;\r\n\t\t}\r\n\t\t.qp-sch-dragged-overheader .qp-sch-dragged {\r\n\t\t\tbackground-color: color-mix(in srgb, var(--qp-primary-color) 71%, transparent) !important;\r\n\t\t}\r\n\t\t.qp-sch-dragged-resource {\r\n\t\t\tpadding: 8px 8px 8px 16px;\r\n\t\t}\r\n\r\n.qp-sch-new-event-tooltip {\r\n\twidth: 180px !important;\r\n\theight: 100px !important;\r\n\toverflow: visible !important;\r\n}\r\n\r\n.qp-sch-projected-assignment,\r\n.qp-sch-grid-container .b-sch-event.b-sch-dirty-new {\r\n\tcolor: var(--qp-primary-color) !important;\r\n\tborder: 2px solid var(--qp-primary-color);\r\n\t/* background: repeating-linear-gradient( 135deg, #007ACC, #007ACC 7px, #007ACC80 7px, #007ACC80 14px ) !important; */\r\n\tbackground-color: white !important;\r\n\tbackground: white;\r\n}\r\n\r\n.b-sch-event.b-sch-dirty-new .qp-sch-event-info b {\r\n\toverflow: hidden;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\n.b-grid-header-container {\r\n\tbox-shadow: none;\r\n\tbackground-color: var(--qp-sch-header-background);\r\n\tflex-basis: 60px;\r\n}\r\n\t.b-grid-header-container .b-sch-timeaxiscolumn {\r\n\t\tbackground-color: var(--qp-sch-header-background);\r\n\t}\r\n\t\t.b-grid-header-container .b-sch-timeaxiscolumn.b-depth-0:hover {\r\n\t\t\tbackground-color: var(--qp-sch-header-background) !important;\r\n\t\t}\r\n\t\t.b-grid-header-container .b-sch-timeaxiscolumn .b-sch-header-timeaxis-cell:hover,\r\n\t\t.b-grid-header-container .b-depth-0:not(.b-sch-timeaxiscolumn):hover {\r\n\t\t\tbackground-color: var(--qp-sch-button-hover-background) !important;\r\n\t\t}\r\n\t.b-grid-header {\r\n\t\ttext-transform: none;\r\n\t}\r\n\t\t.b-grid-header.b-sort .b-grid-header-text .b-sort-icon::before {\r\n\t\t\tcontent: "\\e9ed" !important;\r\n\t\t\tdisplay: inline-block;\r\n\t\t\tfont: normal normal normal 14px/1 \'FontAwesome\' !important;\r\n\t\t\ttext-rendering: auto;\r\n\t\t\t-webkit-font-smoothing: antialiased;\r\n\t\t\tcolor: rgba(0, 0, 0, 0.5) !important;\r\n\t\t}\r\n\r\n.b-sch-header-timeaxis-cell {\r\n\ttext-transform: none !important;\r\n\tjustify-content: left;\r\n\tpadding-bottom: 2px !important;\r\n\tcolor: black;\r\n\tborder-color: var(--qp-sch-header-border);\r\n}\r\n\t.b-sch-header-row-0 .b-sch-header-timeaxis-cell {\r\n\t\tpadding-inline-start: 0px;\r\n\t\tfont-size: 14px;\r\n\t}\r\n\t.b-sch-header-row-1 .b-sch-header-timeaxis-cell {\r\n\t\tpadding-inline-start: 5px;\r\n\t\tfont-size: 10px;\r\n\t\theight: 36px;\r\n\t}\r\n\r\n\t.b-sticky-headers .b-horizontaltimeaxis .b-sch-header-text.b-sticky-header {\r\n\t\tpadding-inline-start: 6px;\r\n\t}\r\n\r\n.b-sch-color-blue.b-sch-resourcetimerange {\r\n\tbackground-color: var(--qp-sch-unavailable-background);\r\n\tcolor: #015be2;\r\n}\r\n\r\n.b-sch-vertical .b-sch-event {\r\n\tpadding-inline: 0px 10px !important;\r\n}\r\n\r\n.b-sch-event.b-sch-event-selected * {\r\n\tz-index: initial !important;\r\n}\r\n\r\n.b-sch-event-content {\r\n\theight: 100% !important;\r\n\tmargin: 0 !important;\r\n\tposition: initial !important;\r\n\twidth: 100%;\r\n}\r\n\t.qp-sch-event-status-bar {\r\n\t\tflex-basis: 22px;\r\n\t\tmin-width: 22px;\r\n\t\theight: 100%;\r\n\t\tborder-top-left-radius: 9px;\r\n\t\tborder-bottom-left-radius: 9px;\r\n\t\tbackground: repeating-linear-gradient(90deg, #007ACA, #007ACA 7px, white 7px, white 8px, transparent 8px, transparent);\r\n\t}\r\n\t\t*:is(.qp-sch-dragged, .qp-sch-backlog .b-sch-event:hover) .qp-sch-event-status-bar {\r\n\t\t\tbackground: repeating-linear-gradient(90deg, transparent, transparent 9px, #FFFFFF60 9px, #FFFFFF60 10px, transparent 10px, transparent) !important;\r\n\t\t}\r\n\r\n\t.qp-sch-event-empty-status-bar {\r\n\t\tflex-basis: 11px;\r\n\t\tmin-width: 11px;\r\n\t}\r\n\r\n\t.qp-sch-event-info {\r\n\t\tpadding-inline-end: 11px;\r\n\t\tpadding-block: 8px;\r\n\t\tfont-weight: 400;\r\n\t\tfont-size: 13px;\r\n\t\tline-height: 16px;\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\tflex-direction: column;\r\n\t\ttext-overflow: ellipsis;\r\n    \toverflow: hidden;\r\n\t}\r\n\t\t.qp-sch-event-info > div,\r\n\t\t.qp-sch-event-info-line > div {\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: row;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\talign-items: center;\r\n\t\t}\r\n\r\n\t\t\t.qp-sch-event-info > div > span,\r\n\t\t\t.qp-sch-event-info-line > div > span {\r\n\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\toverflow: hidden;\r\n\t\t\t\twhite-space: nowrap;\r\n\t\t\t}\r\n\r\n\t\t.qp-sch-event-info b,\r\n\t\t.qp-sch-event-info-line:first-child > div {\r\n\t\t\tfont-weight: 700 !important;\r\n\t\t\tfont-size: 13px;\r\n\t\t}\r\n\r\n\t\t/* .qp-sch-main-container .qp-sch-event-info {\r\n\t\t\tflex-wrap: wrap;\r\n\t\t}\r\n\t\t\t.qp-sch-main-container .qp-sch-event-info > div:first-child {\r\n\t\t\t\theight: 1000px;\r\n\t\t\t} */\r\n\r\n\t\t.qp-sch-event-info > div > span:nth-child(2) {\r\n\t\t\tpadding-left: 16px;\r\n\t\t}\r\n\t\t\t.qp-sch-left-container .qp-sch-event-info > div > span:nth-child(2) {\r\n\t\t\t\tflex: none;\r\n\t\t\t\ttext-align: right;\r\n\t\t\t\tflex-shrink: 10000;\r\n\t\t\t}\r\n\r\n\t\t.qp-sch-projected-assignment .qp-sch-event-info {\r\n\t\t\tpadding-block: 7px;\r\n\t\t}\r\n\r\n\r\n.qp-sch-menu {\r\n\tcolor: black\r\n}\r\n\r\n.qp-sch-menu.b-menuitem.b-contains-focus,\r\n.qp-sch-menu.b-menuitem:focus {\r\n\tbackground-color: rgb(230,242,250);\r\n}\r\n\r\n\r\n.qp-sch-time-projection {\r\n    background-image:\r\n\t\trepeating-linear-gradient(to right, transparent 0%, transparent 100%),\r\n\t\trepeating-linear-gradient(to right, transparent 0%, transparent 100%),\r\n\t\trepeating-linear-gradient(to bottom, var(--qp-sch-semi-transparent-main) 0%, var(--qp-sch-semi-transparent-main) 50%, transparent 50%, transparent 100%),\r\n\t\trepeating-linear-gradient(to bottom, var(--qp-sch-semi-transparent-main) 0%, var(--qp-sch-semi-transparent-main) 50%, transparent 50%, transparent 100%);\r\n    background-position: left top, left bottom, left top, right top;\r\n    background-repeat: repeat-x, repeat-x, repeat-y, repeat-y;\r\n    background-size: 20px 1px, 20px 1px, 1px 20px, 1px 20px;\r\n    background-color: transparent!important;\r\n}\r\n\r\n\r\n*:hover::-webkit-scrollbar-thumb {\r\n    background: rgba(0,0,0,0.15);\r\n}\r\n*:not(:hover)::-webkit-scrollbar-thumb {\r\n    background: rgba(0,0,0,0.09);\r\n}\r\n\r\n.qp-sch-left-container .qp-fieldset-caption {\r\n\tdisplay: none;\r\n}\r\n\r\n.qp-sch-left-container *::-webkit-scrollbar-track {\r\n    background-color: var(--qp-sch-dark-background);\r\n}\r\n\r\n.qp-sch-left-container *:not(:hover)::-webkit-scrollbar-thumb {\r\n    background: rgba(0,0,0,0.04);\r\n}\r\n.qp-sch-left-container *:hover::-webkit-scrollbar-thumb {\r\n    background: rgba(0,0,0,0.10);\r\n}\r\n\r\n.qp-sch-calendar-container.qp-disable-filters  .filter-button.filtered .content span.text {\r\n    text-decoration-color: black;\r\n    color: #bbb;\r\n    font-style: italic;\r\n}\r\n\r\n.qp-sch-calendar-container .grid-left-toolbar-cont {\r\n\tflex: 1 0 132px; /* TODO: it\'s a quickfix for a bug in Platform */\r\n}\r\n\r\n.qp-sch-calendar-container .grid-filter-button .text {\r\n\tdisplay: none; /* text duplicates tab name */\r\n}\r\n\r\n.b-sch-tooltip-startdate svg {\r\n\twidth: 16px;\r\n\theight: 16px;\r\n\tpadding-top: 4px;\r\n}\r\n\r\n.b-float-root > .b-floating.b-tooltip,\r\n.b-float-root > .b-floating.b-tooltip > .b-panel-body-wrap {\r\n\toverflow: visible !important;\r\n}\r\n\r\n.b-float-root .b-anchor-bottom {\r\n\ttransform: translateX(77.7778px);\r\n}\r\n\r\n.b-float-root .b-pointer-el path {\r\n\tfill: rgb(255, 255, 255);\r\n}\r\n',""]),e.exports=o},"screens/FS/FS300300/styles/schedulerpro.stockholm.css":(e,n,r)=>{var i=r("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),o=r("./node_modules/css-loader/dist/runtime/api.js"),s=r("./node_modules/css-loader/dist/runtime/getUrl.js"),a=r("./src/screens/FS/FS300300/styles/fonts/fa-solid-900.woff2"),l=r("./src/screens/FS/FS300300/styles/fonts/fa-solid-900.ttf"),c=o(i),d=s(a),u=s(l);c.push([e.id,'/*!\r\n *\r\n * Bryntum Scheduler Pro 5.3.7\r\n *\r\n * Copyright(c) 2023 Bryntum AB\r\n * https://bryntum.com/contact\r\n * https://bryntum.com/license\r\n *\r\n */\r\n/*!\r\n * Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com\r\n * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)\r\n * Copyright 2022 Fonticons, Inc.\r\n */\r\n:root, :host {\r\n  --b-fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";\r\n}\r\n\r\n@font-face {\r\n  font-family: "Font Awesome 6 Free";\r\n  font-style: normal;\r\n  font-weight: 900;\r\n  font-display: block;\r\n  src: url('+d+') format("woff2"), url('+u+') format("truetype");\r\n}\r\n.fas,\r\n.b-fa-solid {\r\n  font-family: "Font Awesome 6 Free";\r\n  font-weight: 900;\r\n}\r\n\r\n.b-content-icon, .b-group-state-icon, .b-gridbase.b-columnresize.b-touch.b-column-resizing .b-grid-header.b-resizing::before {\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  display: inline-block;\r\n  font-style: normal;\r\n  font-variant: normal;\r\n  font-weight: normal;\r\n  line-height: 1;\r\n  font-family: "Font Awesome 6 Free", FontAwesome6Free;\r\n  font-weight: 900;\r\n  vertical-align: 0;\r\n}\r\n\r\n.b-theme-info:before {\r\n  content: \'{"name":"Stockholm"}\';\r\n}\r\n\r\n.b-slidetoggle .b-slidetoggle-label,\r\n:not(.b-fieldset-has-label) > .b-checkbox .b-checkbox-label {\r\n  text-transform: uppercase;\r\n  font-size: 0.9em;\r\n}\r\n.b-slidetoggle .b-slidetoggle-label::before,\r\n:not(.b-fieldset-has-label) > .b-checkbox .b-checkbox-label::before {\r\n  font-size: 1.1111111111em;\r\n}\r\n\r\n.b-popup > .b-panel-body-wrap > .b-bottom-toolbar {\r\n  background: #f8f9fa;\r\n}\r\n\r\n/*!\r\n * Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com\r\n * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)\r\n * Copyright 2022 Fonticons, Inc.\r\n */\r\n:root, :host {\r\n  --b-fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";\r\n}\r\n\r\n@font-face {\r\n  font-family: "Font Awesome 6 Free";\r\n  font-style: normal;\r\n  font-weight: 900;\r\n  font-display: block;\r\n  src: url('+d+') format("woff2"), url('+u+') format("truetype");\r\n}\r\n.fas,\r\n.b-fa-solid {\r\n  font-family: "Font Awesome 6 Free";\r\n  font-weight: 900;\r\n}\r\n\r\n.b-content-icon, .b-group-state-icon, .b-gridbase.b-columnresize.b-touch.b-column-resizing .b-grid-header.b-resizing::before {\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  display: inline-block;\r\n  font-style: normal;\r\n  font-variant: normal;\r\n  font-weight: normal;\r\n  line-height: 1;\r\n  font-family: "Font Awesome 6 Free", FontAwesome6Free;\r\n  font-weight: 900;\r\n  vertical-align: 0;\r\n}\r\n\r\n.b-fa {\r\n  font-family: var(--b-fa-style-family, "Font Awesome 6 Free");\r\n  font-weight: var(--b-fa-style, 900);\r\n}\r\n\r\n.b-fa,\r\n.fas,\r\n.b-fa-solid,\r\n.far,\r\n.b-fa-regular,\r\n.fal,\r\n.b-fa-light,\r\n.fat,\r\n.b-fa-thin,\r\n.fad,\r\n.b-fa-duotone,\r\n.fab,\r\n.b-fa-brands {\r\n  -moz-osx-font-smoothing: grayscale;\r\n  -webkit-font-smoothing: antialiased;\r\n  display: var(--b-fa-display, inline-block);\r\n  font-style: normal;\r\n  font-variant: normal;\r\n  line-height: 1;\r\n  text-rendering: auto;\r\n}\r\n\r\n.b-fa-lg {\r\n  font-size: 1.3333333333em;\r\n  line-height: 0.75em;\r\n  vertical-align: -0.0667em;\r\n}\r\n\r\n.b-fa-xs {\r\n  font-size: 0.75em;\r\n}\r\n\r\n.b-fa-sm {\r\n  font-size: 0.875em;\r\n}\r\n\r\n.b-fa-1x {\r\n  font-size: 1em;\r\n}\r\n\r\n.b-fa-2x {\r\n  font-size: 2em;\r\n}\r\n\r\n.b-fa-3x {\r\n  font-size: 3em;\r\n}\r\n\r\n.b-fa-4x {\r\n  font-size: 4em;\r\n}\r\n\r\n.b-fa-5x {\r\n  font-size: 5em;\r\n}\r\n\r\n.b-fa-6x {\r\n  font-size: 6em;\r\n}\r\n\r\n.b-fa-7x {\r\n  font-size: 7em;\r\n}\r\n\r\n.b-fa-8x {\r\n  font-size: 8em;\r\n}\r\n\r\n.b-fa-9x {\r\n  font-size: 9em;\r\n}\r\n\r\n.b-fa-10x {\r\n  font-size: 10em;\r\n}\r\n\r\n.b-fa-fw, .b-fw-icon:before {\r\n  text-align: center;\r\n  width: 1.25em;\r\n}\r\n\r\n.b-fa-ul {\r\n  list-style-type: none;\r\n  margin-left: var(--b-fa-li-margin, 2.5em);\r\n  padding-left: 0;\r\n}\r\n.b-fa-ul > li {\r\n  position: relative;\r\n}\r\n\r\n.b-fa-li {\r\n  left: calc(var(--b-fa-li-width, 2em) * -1);\r\n  position: absolute;\r\n  text-align: center;\r\n  width: var(--b-fa-li-width, 2em);\r\n  line-height: inherit;\r\n}\r\n\r\n.b-fa-border {\r\n  border-color: var(--b-fa-border-color, #eee);\r\n  border-radius: var(--b-fa-border-radius, 0.1em);\r\n  border-style: var(--b-fa-border-style, solid);\r\n  border-width: var(--b-fa-border-width, 0.08em);\r\n  padding: var(--b-fa-border-padding, 0.2em 0.25em 0.15em);\r\n}\r\n\r\n.b-fa-pull-left {\r\n  float: left;\r\n  margin-right: var(--b-fa-pull-margin, 0.3em);\r\n}\r\n\r\n.b-fa-pull-right {\r\n  float: right;\r\n  margin-left: var(--b-fa-pull-margin, 0.3em);\r\n}\r\n\r\n.b-fa-beat {\r\n  animation-name: b-fa-beat;\r\n  animation-delay: var(--b-fa-animation-delay, 0);\r\n  animation-direction: var(--b-fa-animation-direction, normal);\r\n  animation-duration: var(--b-fa-animation-duration, 1s);\r\n  animation-iteration-count: var(--b-fa-animation-iteration-count, infinite);\r\n  animation-timing-function: var(--b-fa-animation-timing, ease-in-out);\r\n}\r\n\r\n.b-fa-bounce {\r\n  animation-name: b-fa-bounce;\r\n  animation-delay: var(--b-fa-animation-delay, 0);\r\n  animation-direction: var(--b-fa-animation-direction, normal);\r\n  animation-duration: var(--b-fa-animation-duration, 1s);\r\n  animation-iteration-count: var(--b-fa-animation-iteration-count, infinite);\r\n  animation-timing-function: var(--b-fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\r\n}\r\n\r\n.b-fa-fade {\r\n  animation-name: b-fa-fade;\r\n  animation-delay: var(--b-fa-animation-delay, 0);\r\n  animation-direction: var(--b-fa-animation-direction, normal);\r\n  animation-duration: var(--b-fa-animation-duration, 1s);\r\n  animation-iteration-count: var(--b-fa-animation-iteration-count, infinite);\r\n  animation-timing-function: var(--b-fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\r\n}\r\n\r\n.b-fa-beat-fade {\r\n  animation-name: b-fa-beat-fade;\r\n  animation-delay: var(--b-fa-animation-delay, 0);\r\n  animation-direction: var(--b-fa-animation-direction, normal);\r\n  animation-duration: var(--b-fa-animation-duration, 1s);\r\n  animation-iteration-count: var(--b-fa-animation-iteration-count, infinite);\r\n  animation-timing-function: var(--b-fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\r\n}\r\n\r\n.b-fa-flip {\r\n  animation-name: b-fa-flip;\r\n  animation-delay: var(--b-fa-animation-delay, 0);\r\n  animation-direction: var(--b-fa-animation-direction, normal);\r\n  animation-duration: var(--b-fa-animation-duration, 1s);\r\n  animation-iteration-count: var(--b-fa-animation-iteration-count, infinite);\r\n  animation-timing-function: var(--b-fa-animation-timing, ease-in-out);\r\n}\r\n\r\n.b-fa-shake {\r\n  animation-name: b-fa-shake;\r\n  animation-delay: var(--b-fa-animation-delay, 0);\r\n  animation-direction: var(--b-fa-animation-direction, normal);\r\n  animation-duration: var(--b-fa-animation-duration, 1s);\r\n  animation-iteration-count: var(--b-fa-animation-iteration-count, infinite);\r\n  animation-timing-function: var(--b-fa-animation-timing, linear);\r\n}\r\n\r\n.b-fa-spin {\r\n  animation-name: b-fa-spin;\r\n  animation-delay: var(--b-fa-animation-delay, 0);\r\n  animation-direction: var(--b-fa-animation-direction, normal);\r\n  animation-duration: var(--b-fa-animation-duration, 2s);\r\n  animation-iteration-count: var(--b-fa-animation-iteration-count, infinite);\r\n  animation-timing-function: var(--b-fa-animation-timing, linear);\r\n}\r\n\r\n.b-fa-spin-reverse {\r\n  --b-fa-animation-direction: reverse;\r\n}\r\n\r\n.b-fa-pulse,\r\n.b-fa-spin-pulse {\r\n  animation-name: b-fa-spin;\r\n  animation-direction: var(--b-fa-animation-direction, normal);\r\n  animation-duration: var(--b-fa-animation-duration, 1s);\r\n  animation-iteration-count: var(--b-fa-animation-iteration-count, infinite);\r\n  animation-timing-function: var(--b-fa-animation-timing, steps(8));\r\n}\r\n\r\n@media (prefers-reduced-motion: reduce) {\r\n  .b-fa-beat,\r\n  .b-fa-bounce,\r\n  .b-fa-fade,\r\n  .b-fa-beat-fade,\r\n  .b-fa-flip,\r\n  .b-fa-pulse,\r\n  .b-fa-shake,\r\n  .b-fa-spin,\r\n  .b-fa-spin-pulse {\r\n    animation-delay: -1ms;\r\n    animation-duration: 1ms;\r\n    animation-iteration-count: 1;\r\n    transition-delay: 0s;\r\n    transition-duration: 0s;\r\n  }\r\n}\r\n@keyframes b-fa-beat {\r\n  0%, 90% {\r\n    transform: scale(1);\r\n  }\r\n  45% {\r\n    transform: scale(var(--b-fa-beat-scale, 1.25));\r\n  }\r\n}\r\n@keyframes b-fa-bounce {\r\n  0% {\r\n    transform: scale(1, 1) translateY(0);\r\n  }\r\n  10% {\r\n    transform: scale(var(--b-fa-bounce-start-scale-x, 1.1), var(--b-fa-bounce-start-scale-y, 0.9)) translateY(0);\r\n  }\r\n  30% {\r\n    transform: scale(var(--b-fa-bounce-jump-scale-x, 0.9), var(--b-fa-bounce-jump-scale-y, 1.1)) translateY(var(--b-fa-bounce-height, -0.5em));\r\n  }\r\n  50% {\r\n    transform: scale(var(--b-fa-bounce-land-scale-x, 1.05), var(--b-fa-bounce-land-scale-y, 0.95)) translateY(0);\r\n  }\r\n  57% {\r\n    transform: scale(1, 1) translateY(var(--b-fa-bounce-rebound, -0.125em));\r\n  }\r\n  64% {\r\n    transform: scale(1, 1) translateY(0);\r\n  }\r\n  100% {\r\n    transform: scale(1, 1) translateY(0);\r\n  }\r\n}\r\n@keyframes b-fa-fade {\r\n  50% {\r\n    opacity: var(--b-fa-fade-opacity, 0.4);\r\n  }\r\n}\r\n@keyframes b-fa-beat-fade {\r\n  0%, 100% {\r\n    opacity: var(--b-fa-beat-fade-opacity, 0.4);\r\n    transform: scale(1);\r\n  }\r\n  50% {\r\n    opacity: 1;\r\n    transform: scale(var(--b-fa-beat-fade-scale, 1.125));\r\n  }\r\n}\r\n@keyframes b-fa-flip {\r\n  50% {\r\n    transform: rotate3d(var(--b-fa-flip-x, 0), var(--b-fa-flip-y, 1), var(--b-fa-flip-z, 0), var(--b-fa-flip-angle, -180deg));\r\n  }\r\n}\r\n@keyframes b-fa-shake {\r\n  0% {\r\n    transform: rotate(-15deg);\r\n  }\r\n  4% {\r\n    transform: rotate(15deg);\r\n  }\r\n  8%, 24% {\r\n    transform: rotate(-18deg);\r\n  }\r\n  12%, 28% {\r\n    transform: rotate(18deg);\r\n  }\r\n  16% {\r\n    transform: rotate(-22deg);\r\n  }\r\n  20% {\r\n    transform: rotate(22deg);\r\n  }\r\n  32% {\r\n    transform: rotate(-12deg);\r\n  }\r\n  36% {\r\n    transform: rotate(12deg);\r\n  }\r\n  40%, 100% {\r\n    transform: rotate(0deg);\r\n  }\r\n}\r\n@keyframes b-fa-spin {\r\n  0% {\r\n    transform: rotate(0deg);\r\n  }\r\n  100% {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n.b-fa-rotate-90 {\r\n  transform: rotate(90deg);\r\n}\r\n\r\n.b-fa-rotate-180 {\r\n  transform: rotate(180deg);\r\n}\r\n\r\n.b-fa-rotate-270 {\r\n  transform: rotate(270deg);\r\n}\r\n\r\n.b-fa-flip-horizontal {\r\n  transform: scale(-1, 1);\r\n}\r\n\r\n.b-fa-flip-vertical {\r\n  transform: scale(1, -1);\r\n}\r\n\r\n.b-fa-flip-both,\r\n.b-fa-flip-horizontal.b-fa-flip-vertical {\r\n  transform: scale(-1, -1);\r\n}\r\n\r\n.b-fa-rotate-by {\r\n  transform: rotate(var(--b-fa-rotate-angle, none));\r\n}\r\n\r\n.b-fa-stack {\r\n  display: inline-block;\r\n  height: 2em;\r\n  line-height: 2em;\r\n  position: relative;\r\n  vertical-align: middle;\r\n  width: 2.5em;\r\n}\r\n\r\n.b-fa-stack-1x,\r\n.b-fa-stack-2x {\r\n  left: 0;\r\n  position: absolute;\r\n  text-align: center;\r\n  width: 100%;\r\n  z-index: var(--b-fa-stack-z-index, auto);\r\n}\r\n\r\n.b-fa-stack-1x {\r\n  line-height: inherit;\r\n}\r\n\r\n.b-fa-stack-2x {\r\n  font-size: 2em;\r\n}\r\n\r\n.b-fa-inverse {\r\n  color: var(--b-fa-inverse, #fff);\r\n}\r\n\r\n/* Font Awesome uses the Unicode Private Use Area (PUA) to ensure screen\r\nreaders do not read off random characters that represent icons */\r\n.b-fa-0::before {\r\n  content: "\\30 ";\r\n}\r\n\r\n.b-fa-1::before {\r\n  content: "\\31 ";\r\n}\r\n\r\n.b-fa-2::before {\r\n  content: "\\32 ";\r\n}\r\n\r\n.b-fa-3::before {\r\n  content: "\\33 ";\r\n}\r\n\r\n.b-fa-4::before {\r\n  content: "\\34 ";\r\n}\r\n\r\n.b-fa-5::before {\r\n  content: "\\35 ";\r\n}\r\n\r\n.b-fa-6::before {\r\n  content: "\\36 ";\r\n}\r\n\r\n.b-fa-7::before {\r\n  content: "\\37 ";\r\n}\r\n\r\n.b-fa-8::before {\r\n  content: "\\38 ";\r\n}\r\n\r\n.b-fa-9::before {\r\n  content: "\\39 ";\r\n}\r\n\r\n.b-fa-a::before {\r\n  content: "A";\r\n}\r\n\r\n.b-fa-address-book::before {\r\n  content: "\\f2b9";\r\n}\r\n\r\n.b-fa-contact-book::before {\r\n  content: "\\f2b9";\r\n}\r\n\r\n.b-fa-address-card::before {\r\n  content: "\\f2bb";\r\n}\r\n\r\n.b-fa-contact-card::before {\r\n  content: "\\f2bb";\r\n}\r\n\r\n.b-fa-vcard::before {\r\n  content: "\\f2bb";\r\n}\r\n\r\n.b-fa-align-center::before {\r\n  content: "\\f037";\r\n}\r\n\r\n.b-fa-align-justify::before {\r\n  content: "\\f039";\r\n}\r\n\r\n.b-fa-align-left::before {\r\n  content: "\\f036";\r\n}\r\n\r\n.b-fa-align-right::before {\r\n  content: "\\f038";\r\n}\r\n\r\n.b-fa-anchor::before {\r\n  content: "\\f13d";\r\n}\r\n\r\n.b-fa-anchor-circle-check::before {\r\n  content: "\\e4aa";\r\n}\r\n\r\n.b-fa-anchor-circle-exclamation::before {\r\n  content: "\\e4ab";\r\n}\r\n\r\n.b-fa-anchor-circle-xmark::before {\r\n  content: "\\e4ac";\r\n}\r\n\r\n.b-fa-anchor-lock::before {\r\n  content: "\\e4ad";\r\n}\r\n\r\n.b-fa-angle-down::before {\r\n  content: "\\f107";\r\n}\r\n\r\n.b-fa-angle-left::before {\r\n  content: "\\f104";\r\n}\r\n\r\n.b-fa-angle-right::before {\r\n  content: "\\f105";\r\n}\r\n\r\n.b-fa-angle-up::before {\r\n  content: "\\f106";\r\n}\r\n\r\n.b-fa-angles-down::before {\r\n  content: "\\f103";\r\n}\r\n\r\n.b-fa-angle-double-down::before {\r\n  content: "\\f103";\r\n}\r\n\r\n.b-fa-angles-left::before {\r\n  content: "\\f100";\r\n}\r\n\r\n.b-fa-angle-double-left::before {\r\n  content: "\\f100";\r\n}\r\n\r\n.b-fa-angles-right::before {\r\n  content: "\\f101";\r\n}\r\n\r\n.b-fa-angle-double-right::before {\r\n  content: "\\f101";\r\n}\r\n\r\n.b-fa-angles-up::before {\r\n  content: "\\f102";\r\n}\r\n\r\n.b-fa-angle-double-up::before {\r\n  content: "\\f102";\r\n}\r\n\r\n.b-fa-ankh::before {\r\n  content: "\\f644";\r\n}\r\n\r\n.b-fa-apple-whole::before {\r\n  content: "\\f5d1";\r\n}\r\n\r\n.b-fa-apple-alt::before {\r\n  content: "\\f5d1";\r\n}\r\n\r\n.b-fa-archway::before {\r\n  content: "\\f557";\r\n}\r\n\r\n.b-fa-arrow-down::before {\r\n  content: "\\f063";\r\n}\r\n\r\n.b-fa-arrow-down-1-9::before {\r\n  content: "\\f162";\r\n}\r\n\r\n.b-fa-sort-numeric-asc::before {\r\n  content: "\\f162";\r\n}\r\n\r\n.b-fa-sort-numeric-down::before {\r\n  content: "\\f162";\r\n}\r\n\r\n.b-fa-arrow-down-9-1::before {\r\n  content: "\\f886";\r\n}\r\n\r\n.b-fa-sort-numeric-desc::before {\r\n  content: "\\f886";\r\n}\r\n\r\n.b-fa-sort-numeric-down-alt::before {\r\n  content: "\\f886";\r\n}\r\n\r\n.b-fa-arrow-down-a-z::before {\r\n  content: "\\f15d";\r\n}\r\n\r\n.b-fa-sort-alpha-asc::before {\r\n  content: "\\f15d";\r\n}\r\n\r\n.b-fa-sort-alpha-down::before {\r\n  content: "\\f15d";\r\n}\r\n\r\n.b-fa-arrow-down-long::before {\r\n  content: "\\f175";\r\n}\r\n\r\n.b-fa-long-arrow-down::before {\r\n  content: "\\f175";\r\n}\r\n\r\n.b-fa-arrow-down-short-wide::before {\r\n  content: "\\f884";\r\n}\r\n\r\n.b-fa-sort-amount-desc::before {\r\n  content: "\\f884";\r\n}\r\n\r\n.b-fa-sort-amount-down-alt::before {\r\n  content: "\\f884";\r\n}\r\n\r\n.b-fa-arrow-down-up-across-line::before {\r\n  content: "\\e4af";\r\n}\r\n\r\n.b-fa-arrow-down-up-lock::before {\r\n  content: "\\e4b0";\r\n}\r\n\r\n.b-fa-arrow-down-wide-short::before {\r\n  content: "\\f160";\r\n}\r\n\r\n.b-fa-sort-amount-asc::before {\r\n  content: "\\f160";\r\n}\r\n\r\n.b-fa-sort-amount-down::before {\r\n  content: "\\f160";\r\n}\r\n\r\n.b-fa-arrow-down-z-a::before {\r\n  content: "\\f881";\r\n}\r\n\r\n.b-fa-sort-alpha-desc::before {\r\n  content: "\\f881";\r\n}\r\n\r\n.b-fa-sort-alpha-down-alt::before {\r\n  content: "\\f881";\r\n}\r\n\r\n.b-fa-arrow-left::before {\r\n  content: "\\f060";\r\n}\r\n\r\n.b-fa-arrow-left-long::before {\r\n  content: "\\f177";\r\n}\r\n\r\n.b-fa-long-arrow-left::before {\r\n  content: "\\f177";\r\n}\r\n\r\n.b-fa-arrow-pointer::before {\r\n  content: "\\f245";\r\n}\r\n\r\n.b-fa-mouse-pointer::before {\r\n  content: "\\f245";\r\n}\r\n\r\n.b-fa-arrow-right::before {\r\n  content: "\\f061";\r\n}\r\n\r\n.b-fa-arrow-right-arrow-left::before {\r\n  content: "\\f0ec";\r\n}\r\n\r\n.b-fa-exchange::before {\r\n  content: "\\f0ec";\r\n}\r\n\r\n.b-fa-arrow-right-from-bracket::before {\r\n  content: "\\f08b";\r\n}\r\n\r\n.b-fa-sign-out::before {\r\n  content: "\\f08b";\r\n}\r\n\r\n.b-fa-arrow-right-long::before {\r\n  content: "\\f178";\r\n}\r\n\r\n.b-fa-long-arrow-right::before {\r\n  content: "\\f178";\r\n}\r\n\r\n.b-fa-arrow-right-to-bracket::before {\r\n  content: "\\f090";\r\n}\r\n\r\n.b-fa-sign-in::before {\r\n  content: "\\f090";\r\n}\r\n\r\n.b-fa-arrow-right-to-city::before {\r\n  content: "\\e4b3";\r\n}\r\n\r\n.b-fa-arrow-rotate-left::before {\r\n  content: "\\f0e2";\r\n}\r\n\r\n.b-fa-arrow-left-rotate::before {\r\n  content: "\\f0e2";\r\n}\r\n\r\n.b-fa-arrow-rotate-back::before {\r\n  content: "\\f0e2";\r\n}\r\n\r\n.b-fa-arrow-rotate-backward::before {\r\n  content: "\\f0e2";\r\n}\r\n\r\n.b-fa-undo::before {\r\n  content: "\\f0e2";\r\n}\r\n\r\n.b-fa-arrow-rotate-right::before {\r\n  content: "\\f01e";\r\n}\r\n\r\n.b-fa-arrow-right-rotate::before {\r\n  content: "\\f01e";\r\n}\r\n\r\n.b-fa-arrow-rotate-forward::before {\r\n  content: "\\f01e";\r\n}\r\n\r\n.b-fa-redo::before {\r\n  content: "\\f01e";\r\n}\r\n\r\n.b-fa-arrow-trend-down::before {\r\n  content: "\\e097";\r\n}\r\n\r\n.b-fa-arrow-trend-up::before {\r\n  content: "\\e098";\r\n}\r\n\r\n.b-fa-arrow-turn-down::before {\r\n  content: "\\f149";\r\n}\r\n\r\n.b-fa-level-down::before {\r\n  content: "\\f149";\r\n}\r\n\r\n.b-fa-arrow-turn-up::before {\r\n  content: "\\f148";\r\n}\r\n\r\n.b-fa-level-up::before {\r\n  content: "\\f148";\r\n}\r\n\r\n.b-fa-arrow-up::before {\r\n  content: "\\f062";\r\n}\r\n\r\n.b-fa-arrow-up-1-9::before {\r\n  content: "\\f163";\r\n}\r\n\r\n.b-fa-sort-numeric-up::before {\r\n  content: "\\f163";\r\n}\r\n\r\n.b-fa-arrow-up-9-1::before {\r\n  content: "\\f887";\r\n}\r\n\r\n.b-fa-sort-numeric-up-alt::before {\r\n  content: "\\f887";\r\n}\r\n\r\n.b-fa-arrow-up-a-z::before {\r\n  content: "\\f15e";\r\n}\r\n\r\n.b-fa-sort-alpha-up::before {\r\n  content: "\\f15e";\r\n}\r\n\r\n.b-fa-arrow-up-from-bracket::before {\r\n  content: "\\e09a";\r\n}\r\n\r\n.b-fa-arrow-up-from-ground-water::before {\r\n  content: "\\e4b5";\r\n}\r\n\r\n.b-fa-arrow-up-from-water-pump::before {\r\n  content: "\\e4b6";\r\n}\r\n\r\n.b-fa-arrow-up-long::before {\r\n  content: "\\f176";\r\n}\r\n\r\n.b-fa-long-arrow-up::before {\r\n  content: "\\f176";\r\n}\r\n\r\n.b-fa-arrow-up-right-dots::before {\r\n  content: "\\e4b7";\r\n}\r\n\r\n.b-fa-arrow-up-right-from-square::before {\r\n  content: "\\f08e";\r\n}\r\n\r\n.b-fa-external-link::before {\r\n  content: "\\f08e";\r\n}\r\n\r\n.b-fa-arrow-up-short-wide::before {\r\n  content: "\\f885";\r\n}\r\n\r\n.b-fa-sort-amount-up-alt::before {\r\n  content: "\\f885";\r\n}\r\n\r\n.b-fa-arrow-up-wide-short::before {\r\n  content: "\\f161";\r\n}\r\n\r\n.b-fa-sort-amount-up::before {\r\n  content: "\\f161";\r\n}\r\n\r\n.b-fa-arrow-up-z-a::before {\r\n  content: "\\f882";\r\n}\r\n\r\n.b-fa-sort-alpha-up-alt::before {\r\n  content: "\\f882";\r\n}\r\n\r\n.b-fa-arrows-down-to-line::before {\r\n  content: "\\e4b8";\r\n}\r\n\r\n.b-fa-arrows-down-to-people::before {\r\n  content: "\\e4b9";\r\n}\r\n\r\n.b-fa-arrows-left-right::before {\r\n  content: "\\f07e";\r\n}\r\n\r\n.b-fa-arrows-h::before {\r\n  content: "\\f07e";\r\n}\r\n\r\n.b-fa-arrows-left-right-to-line::before {\r\n  content: "\\e4ba";\r\n}\r\n\r\n.b-fa-arrows-rotate::before {\r\n  content: "\\f021";\r\n}\r\n\r\n.b-fa-refresh::before {\r\n  content: "\\f021";\r\n}\r\n\r\n.b-fa-sync::before {\r\n  content: "\\f021";\r\n}\r\n\r\n.b-fa-arrows-spin::before {\r\n  content: "\\e4bb";\r\n}\r\n\r\n.b-fa-arrows-split-up-and-left::before {\r\n  content: "\\e4bc";\r\n}\r\n\r\n.b-fa-arrows-to-circle::before {\r\n  content: "\\e4bd";\r\n}\r\n\r\n.b-fa-arrows-to-dot::before {\r\n  content: "\\e4be";\r\n}\r\n\r\n.b-fa-arrows-to-eye::before {\r\n  content: "\\e4bf";\r\n}\r\n\r\n.b-fa-arrows-turn-right::before {\r\n  content: "\\e4c0";\r\n}\r\n\r\n.b-fa-arrows-turn-to-dots::before {\r\n  content: "\\e4c1";\r\n}\r\n\r\n.b-fa-arrows-up-down::before {\r\n  content: "\\f07d";\r\n}\r\n\r\n.b-fa-arrows-v::before {\r\n  content: "\\f07d";\r\n}\r\n\r\n.b-fa-arrows-up-down-left-right::before {\r\n  content: "\\f047";\r\n}\r\n\r\n.b-fa-arrows::before {\r\n  content: "\\f047";\r\n}\r\n\r\n.b-fa-arrows-up-to-line::before {\r\n  content: "\\e4c2";\r\n}\r\n\r\n.b-fa-asterisk::before {\r\n  content: "\\*";\r\n}\r\n\r\n.b-fa-at::before {\r\n  content: "\\@";\r\n}\r\n\r\n.b-fa-atom::before {\r\n  content: "\\f5d2";\r\n}\r\n\r\n.b-fa-audio-description::before {\r\n  content: "\\f29e";\r\n}\r\n\r\n.b-fa-austral-sign::before {\r\n  content: "\\e0a9";\r\n}\r\n\r\n.b-fa-award::before {\r\n  content: "\\f559";\r\n}\r\n\r\n.b-fa-b::before {\r\n  content: "B";\r\n}\r\n\r\n.b-fa-baby::before {\r\n  content: "\\f77c";\r\n}\r\n\r\n.b-fa-baby-carriage::before {\r\n  content: "\\f77d";\r\n}\r\n\r\n.b-fa-carriage-baby::before {\r\n  content: "\\f77d";\r\n}\r\n\r\n.b-fa-backward::before {\r\n  content: "\\f04a";\r\n}\r\n\r\n.b-fa-backward-fast::before {\r\n  content: "\\f049";\r\n}\r\n\r\n.b-fa-fast-backward::before {\r\n  content: "\\f049";\r\n}\r\n\r\n.b-fa-backward-step::before {\r\n  content: "\\f048";\r\n}\r\n\r\n.b-fa-step-backward::before {\r\n  content: "\\f048";\r\n}\r\n\r\n.b-fa-bacon::before {\r\n  content: "\\f7e5";\r\n}\r\n\r\n.b-fa-bacteria::before {\r\n  content: "\\e059";\r\n}\r\n\r\n.b-fa-bacterium::before {\r\n  content: "\\e05a";\r\n}\r\n\r\n.b-fa-bag-shopping::before {\r\n  content: "\\f290";\r\n}\r\n\r\n.b-fa-shopping-bag::before {\r\n  content: "\\f290";\r\n}\r\n\r\n.b-fa-bahai::before {\r\n  content: "\\f666";\r\n}\r\n\r\n.b-fa-baht-sign::before {\r\n  content: "\\e0ac";\r\n}\r\n\r\n.b-fa-ban::before {\r\n  content: "\\f05e";\r\n}\r\n\r\n.b-fa-cancel::before {\r\n  content: "\\f05e";\r\n}\r\n\r\n.b-fa-ban-smoking::before {\r\n  content: "\\f54d";\r\n}\r\n\r\n.b-fa-smoking-ban::before {\r\n  content: "\\f54d";\r\n}\r\n\r\n.b-fa-bandage::before {\r\n  content: "\\f462";\r\n}\r\n\r\n.b-fa-band-aid::before {\r\n  content: "\\f462";\r\n}\r\n\r\n.b-fa-barcode::before {\r\n  content: "\\f02a";\r\n}\r\n\r\n.b-fa-bars::before {\r\n  content: "\\f0c9";\r\n}\r\n\r\n.b-fa-navicon::before {\r\n  content: "\\f0c9";\r\n}\r\n\r\n.b-fa-bars-progress::before {\r\n  content: "\\f828";\r\n}\r\n\r\n.b-fa-tasks-alt::before {\r\n  content: "\\f828";\r\n}\r\n\r\n.b-fa-bars-staggered::before {\r\n  content: "\\f550";\r\n}\r\n\r\n.b-fa-reorder::before {\r\n  content: "\\f550";\r\n}\r\n\r\n.b-fa-stream::before {\r\n  content: "\\f550";\r\n}\r\n\r\n.b-fa-baseball::before {\r\n  content: "\\f433";\r\n}\r\n\r\n.b-fa-baseball-ball::before {\r\n  content: "\\f433";\r\n}\r\n\r\n.b-fa-baseball-bat-ball::before {\r\n  content: "\\f432";\r\n}\r\n\r\n.b-fa-basket-shopping::before {\r\n  content: "\\f291";\r\n}\r\n\r\n.b-fa-shopping-basket::before {\r\n  content: "\\f291";\r\n}\r\n\r\n.b-fa-basketball::before {\r\n  content: "\\f434";\r\n}\r\n\r\n.b-fa-basketball-ball::before {\r\n  content: "\\f434";\r\n}\r\n\r\n.b-fa-bath::before {\r\n  content: "\\f2cd";\r\n}\r\n\r\n.b-fa-bathtub::before {\r\n  content: "\\f2cd";\r\n}\r\n\r\n.b-fa-battery-empty::before {\r\n  content: "\\f244";\r\n}\r\n\r\n.b-fa-battery-0::before {\r\n  content: "\\f244";\r\n}\r\n\r\n.b-fa-battery-full::before {\r\n  content: "\\f240";\r\n}\r\n\r\n.b-fa-battery::before {\r\n  content: "\\f240";\r\n}\r\n\r\n.b-fa-battery-5::before {\r\n  content: "\\f240";\r\n}\r\n\r\n.b-fa-battery-half::before {\r\n  content: "\\f242";\r\n}\r\n\r\n.b-fa-battery-3::before {\r\n  content: "\\f242";\r\n}\r\n\r\n.b-fa-battery-quarter::before {\r\n  content: "\\f243";\r\n}\r\n\r\n.b-fa-battery-2::before {\r\n  content: "\\f243";\r\n}\r\n\r\n.b-fa-battery-three-quarters::before {\r\n  content: "\\f241";\r\n}\r\n\r\n.b-fa-battery-4::before {\r\n  content: "\\f241";\r\n}\r\n\r\n.b-fa-bed::before {\r\n  content: "\\f236";\r\n}\r\n\r\n.b-fa-bed-pulse::before {\r\n  content: "\\f487";\r\n}\r\n\r\n.b-fa-procedures::before {\r\n  content: "\\f487";\r\n}\r\n\r\n.b-fa-beer-mug-empty::before {\r\n  content: "\\f0fc";\r\n}\r\n\r\n.b-fa-beer::before {\r\n  content: "\\f0fc";\r\n}\r\n\r\n.b-fa-bell::before {\r\n  content: "\\f0f3";\r\n}\r\n\r\n.b-fa-bell-concierge::before {\r\n  content: "\\f562";\r\n}\r\n\r\n.b-fa-concierge-bell::before {\r\n  content: "\\f562";\r\n}\r\n\r\n.b-fa-bell-slash::before {\r\n  content: "\\f1f6";\r\n}\r\n\r\n.b-fa-bezier-curve::before {\r\n  content: "\\f55b";\r\n}\r\n\r\n.b-fa-bicycle::before {\r\n  content: "\\f206";\r\n}\r\n\r\n.b-fa-binoculars::before {\r\n  content: "\\f1e5";\r\n}\r\n\r\n.b-fa-biohazard::before {\r\n  content: "\\f780";\r\n}\r\n\r\n.b-fa-bitcoin-sign::before {\r\n  content: "\\e0b4";\r\n}\r\n\r\n.b-fa-blender::before {\r\n  content: "\\f517";\r\n}\r\n\r\n.b-fa-blender-phone::before {\r\n  content: "\\f6b6";\r\n}\r\n\r\n.b-fa-blog::before {\r\n  content: "\\f781";\r\n}\r\n\r\n.b-fa-bold::before {\r\n  content: "\\f032";\r\n}\r\n\r\n.b-fa-bolt::before {\r\n  content: "\\f0e7";\r\n}\r\n\r\n.b-fa-zap::before {\r\n  content: "\\f0e7";\r\n}\r\n\r\n.b-fa-bolt-lightning::before {\r\n  content: "\\e0b7";\r\n}\r\n\r\n.b-fa-bomb::before {\r\n  content: "\\f1e2";\r\n}\r\n\r\n.b-fa-bone::before {\r\n  content: "\\f5d7";\r\n}\r\n\r\n.b-fa-bong::before {\r\n  content: "\\f55c";\r\n}\r\n\r\n.b-fa-book::before {\r\n  content: "\\f02d";\r\n}\r\n\r\n.b-fa-book-atlas::before {\r\n  content: "\\f558";\r\n}\r\n\r\n.b-fa-atlas::before {\r\n  content: "\\f558";\r\n}\r\n\r\n.b-fa-book-bible::before {\r\n  content: "\\f647";\r\n}\r\n\r\n.b-fa-bible::before {\r\n  content: "\\f647";\r\n}\r\n\r\n.b-fa-book-bookmark::before {\r\n  content: "\\e0bb";\r\n}\r\n\r\n.b-fa-book-journal-whills::before {\r\n  content: "\\f66a";\r\n}\r\n\r\n.b-fa-journal-whills::before {\r\n  content: "\\f66a";\r\n}\r\n\r\n.b-fa-book-medical::before {\r\n  content: "\\f7e6";\r\n}\r\n\r\n.b-fa-book-open::before {\r\n  content: "\\f518";\r\n}\r\n\r\n.b-fa-book-open-reader::before {\r\n  content: "\\f5da";\r\n}\r\n\r\n.b-fa-book-reader::before {\r\n  content: "\\f5da";\r\n}\r\n\r\n.b-fa-book-quran::before {\r\n  content: "\\f687";\r\n}\r\n\r\n.b-fa-quran::before {\r\n  content: "\\f687";\r\n}\r\n\r\n.b-fa-book-skull::before {\r\n  content: "\\f6b7";\r\n}\r\n\r\n.b-fa-book-dead::before {\r\n  content: "\\f6b7";\r\n}\r\n\r\n.b-fa-bookmark::before {\r\n  content: "\\f02e";\r\n}\r\n\r\n.b-fa-border-all::before {\r\n  content: "\\f84c";\r\n}\r\n\r\n.b-fa-border-none::before {\r\n  content: "\\f850";\r\n}\r\n\r\n.b-fa-border-top-left::before {\r\n  content: "\\f853";\r\n}\r\n\r\n.b-fa-border-style::before {\r\n  content: "\\f853";\r\n}\r\n\r\n.b-fa-bore-hole::before {\r\n  content: "\\e4c3";\r\n}\r\n\r\n.b-fa-bottle-droplet::before {\r\n  content: "\\e4c4";\r\n}\r\n\r\n.b-fa-bottle-water::before {\r\n  content: "\\e4c5";\r\n}\r\n\r\n.b-fa-bowl-food::before {\r\n  content: "\\e4c6";\r\n}\r\n\r\n.b-fa-bowl-rice::before {\r\n  content: "\\e2eb";\r\n}\r\n\r\n.b-fa-bowling-ball::before {\r\n  content: "\\f436";\r\n}\r\n\r\n.b-fa-box::before {\r\n  content: "\\f466";\r\n}\r\n\r\n.b-fa-box-archive::before {\r\n  content: "\\f187";\r\n}\r\n\r\n.b-fa-archive::before {\r\n  content: "\\f187";\r\n}\r\n\r\n.b-fa-box-open::before {\r\n  content: "\\f49e";\r\n}\r\n\r\n.b-fa-box-tissue::before {\r\n  content: "\\e05b";\r\n}\r\n\r\n.b-fa-boxes-packing::before {\r\n  content: "\\e4c7";\r\n}\r\n\r\n.b-fa-boxes-stacked::before {\r\n  content: "\\f468";\r\n}\r\n\r\n.b-fa-boxes::before {\r\n  content: "\\f468";\r\n}\r\n\r\n.b-fa-boxes-alt::before {\r\n  content: "\\f468";\r\n}\r\n\r\n.b-fa-braille::before {\r\n  content: "\\f2a1";\r\n}\r\n\r\n.b-fa-brain::before {\r\n  content: "\\f5dc";\r\n}\r\n\r\n.b-fa-brazilian-real-sign::before {\r\n  content: "\\e46c";\r\n}\r\n\r\n.b-fa-bread-slice::before {\r\n  content: "\\f7ec";\r\n}\r\n\r\n.b-fa-bridge::before {\r\n  content: "\\e4c8";\r\n}\r\n\r\n.b-fa-bridge-circle-check::before {\r\n  content: "\\e4c9";\r\n}\r\n\r\n.b-fa-bridge-circle-exclamation::before {\r\n  content: "\\e4ca";\r\n}\r\n\r\n.b-fa-bridge-circle-xmark::before {\r\n  content: "\\e4cb";\r\n}\r\n\r\n.b-fa-bridge-lock::before {\r\n  content: "\\e4cc";\r\n}\r\n\r\n.b-fa-bridge-water::before {\r\n  content: "\\e4ce";\r\n}\r\n\r\n.b-fa-briefcase::before {\r\n  content: "\\f0b1";\r\n}\r\n\r\n.b-fa-briefcase-medical::before {\r\n  content: "\\f469";\r\n}\r\n\r\n.b-fa-broom::before {\r\n  content: "\\f51a";\r\n}\r\n\r\n.b-fa-broom-ball::before {\r\n  content: "\\f458";\r\n}\r\n\r\n.b-fa-quidditch::before {\r\n  content: "\\f458";\r\n}\r\n\r\n.b-fa-quidditch-broom-ball::before {\r\n  content: "\\f458";\r\n}\r\n\r\n.b-fa-brush::before {\r\n  content: "\\f55d";\r\n}\r\n\r\n.b-fa-bucket::before {\r\n  content: "\\e4cf";\r\n}\r\n\r\n.b-fa-bug::before {\r\n  content: "\\f188";\r\n}\r\n\r\n.b-fa-bug-slash::before {\r\n  content: "\\e490";\r\n}\r\n\r\n.b-fa-bugs::before {\r\n  content: "\\e4d0";\r\n}\r\n\r\n.b-fa-building::before {\r\n  content: "\\f1ad";\r\n}\r\n\r\n.b-fa-building-circle-arrow-right::before {\r\n  content: "\\e4d1";\r\n}\r\n\r\n.b-fa-building-circle-check::before {\r\n  content: "\\e4d2";\r\n}\r\n\r\n.b-fa-building-circle-exclamation::before {\r\n  content: "\\e4d3";\r\n}\r\n\r\n.b-fa-building-circle-xmark::before {\r\n  content: "\\e4d4";\r\n}\r\n\r\n.b-fa-building-columns::before {\r\n  content: "\\f19c";\r\n}\r\n\r\n.b-fa-bank::before {\r\n  content: "\\f19c";\r\n}\r\n\r\n.b-fa-institution::before {\r\n  content: "\\f19c";\r\n}\r\n\r\n.b-fa-museum::before {\r\n  content: "\\f19c";\r\n}\r\n\r\n.b-fa-university::before {\r\n  content: "\\f19c";\r\n}\r\n\r\n.b-fa-building-flag::before {\r\n  content: "\\e4d5";\r\n}\r\n\r\n.b-fa-building-lock::before {\r\n  content: "\\e4d6";\r\n}\r\n\r\n.b-fa-building-ngo::before {\r\n  content: "\\e4d7";\r\n}\r\n\r\n.b-fa-building-shield::before {\r\n  content: "\\e4d8";\r\n}\r\n\r\n.b-fa-building-un::before {\r\n  content: "\\e4d9";\r\n}\r\n\r\n.b-fa-building-user::before {\r\n  content: "\\e4da";\r\n}\r\n\r\n.b-fa-building-wheat::before {\r\n  content: "\\e4db";\r\n}\r\n\r\n.b-fa-bullhorn::before {\r\n  content: "\\f0a1";\r\n}\r\n\r\n.b-fa-bullseye::before {\r\n  content: "\\f140";\r\n}\r\n\r\n.b-fa-burger::before {\r\n  content: "\\f805";\r\n}\r\n\r\n.b-fa-hamburger::before {\r\n  content: "\\f805";\r\n}\r\n\r\n.b-fa-burst::before {\r\n  content: "\\e4dc";\r\n}\r\n\r\n.b-fa-bus::before {\r\n  content: "\\f207";\r\n}\r\n\r\n.b-fa-bus-simple::before {\r\n  content: "\\f55e";\r\n}\r\n\r\n.b-fa-bus-alt::before {\r\n  content: "\\f55e";\r\n}\r\n\r\n.b-fa-business-time::before {\r\n  content: "\\f64a";\r\n}\r\n\r\n.b-fa-briefcase-clock::before {\r\n  content: "\\f64a";\r\n}\r\n\r\n.b-fa-c::before {\r\n  content: "C";\r\n}\r\n\r\n.b-fa-cake-candles::before {\r\n  content: "\\f1fd";\r\n}\r\n\r\n.b-fa-birthday-cake::before {\r\n  content: "\\f1fd";\r\n}\r\n\r\n.b-fa-cake::before {\r\n  content: "\\f1fd";\r\n}\r\n\r\n.b-fa-calculator::before {\r\n  content: "\\f1ec";\r\n}\r\n\r\n.b-fa-calendar::before {\r\n  content: "\\f133";\r\n}\r\n\r\n.b-fa-calendar-check::before {\r\n  content: "\\f274";\r\n}\r\n\r\n.b-fa-calendar-day::before {\r\n  content: "\\f783";\r\n}\r\n\r\n.b-fa-calendar-days::before {\r\n  content: "\\f073";\r\n}\r\n\r\n.b-fa-calendar-alt::before {\r\n  content: "\\f073";\r\n}\r\n\r\n.b-fa-calendar-minus::before {\r\n  content: "\\f272";\r\n}\r\n\r\n.b-fa-calendar-plus::before {\r\n  content: "\\f271";\r\n}\r\n\r\n.b-fa-calendar-week::before {\r\n  content: "\\f784";\r\n}\r\n\r\n.b-fa-calendar-xmark::before {\r\n  content: "\\f273";\r\n}\r\n\r\n.b-fa-calendar-times::before {\r\n  content: "\\f273";\r\n}\r\n\r\n.b-fa-camera::before {\r\n  content: "\\f030";\r\n}\r\n\r\n.b-fa-camera-alt::before {\r\n  content: "\\f030";\r\n}\r\n\r\n.b-fa-camera-retro::before {\r\n  content: "\\f083";\r\n}\r\n\r\n.b-fa-camera-rotate::before {\r\n  content: "\\e0d8";\r\n}\r\n\r\n.b-fa-campground::before {\r\n  content: "\\f6bb";\r\n}\r\n\r\n.b-fa-candy-cane::before {\r\n  content: "\\f786";\r\n}\r\n\r\n.b-fa-cannabis::before {\r\n  content: "\\f55f";\r\n}\r\n\r\n.b-fa-capsules::before {\r\n  content: "\\f46b";\r\n}\r\n\r\n.b-fa-car::before {\r\n  content: "\\f1b9";\r\n}\r\n\r\n.b-fa-automobile::before {\r\n  content: "\\f1b9";\r\n}\r\n\r\n.b-fa-car-battery::before {\r\n  content: "\\f5df";\r\n}\r\n\r\n.b-fa-battery-car::before {\r\n  content: "\\f5df";\r\n}\r\n\r\n.b-fa-car-burst::before {\r\n  content: "\\f5e1";\r\n}\r\n\r\n.b-fa-car-crash::before {\r\n  content: "\\f5e1";\r\n}\r\n\r\n.b-fa-car-on::before {\r\n  content: "\\e4dd";\r\n}\r\n\r\n.b-fa-car-rear::before {\r\n  content: "\\f5de";\r\n}\r\n\r\n.b-fa-car-alt::before {\r\n  content: "\\f5de";\r\n}\r\n\r\n.b-fa-car-side::before {\r\n  content: "\\f5e4";\r\n}\r\n\r\n.b-fa-car-tunnel::before {\r\n  content: "\\e4de";\r\n}\r\n\r\n.b-fa-caravan::before {\r\n  content: "\\f8ff";\r\n}\r\n\r\n.b-fa-caret-down::before {\r\n  content: "\\f0d7";\r\n}\r\n\r\n.b-fa-caret-left::before {\r\n  content: "\\f0d9";\r\n}\r\n\r\n.b-fa-caret-right::before {\r\n  content: "\\f0da";\r\n}\r\n\r\n.b-fa-caret-up::before {\r\n  content: "\\f0d8";\r\n}\r\n\r\n.b-fa-carrot::before {\r\n  content: "\\f787";\r\n}\r\n\r\n.b-fa-cart-arrow-down::before {\r\n  content: "\\f218";\r\n}\r\n\r\n.b-fa-cart-flatbed::before {\r\n  content: "\\f474";\r\n}\r\n\r\n.b-fa-dolly-flatbed::before {\r\n  content: "\\f474";\r\n}\r\n\r\n.b-fa-cart-flatbed-suitcase::before {\r\n  content: "\\f59d";\r\n}\r\n\r\n.b-fa-luggage-cart::before {\r\n  content: "\\f59d";\r\n}\r\n\r\n.b-fa-cart-plus::before {\r\n  content: "\\f217";\r\n}\r\n\r\n.b-fa-cart-shopping::before {\r\n  content: "\\f07a";\r\n}\r\n\r\n.b-fa-shopping-cart::before {\r\n  content: "\\f07a";\r\n}\r\n\r\n.b-fa-cash-register::before {\r\n  content: "\\f788";\r\n}\r\n\r\n.b-fa-cat::before {\r\n  content: "\\f6be";\r\n}\r\n\r\n.b-fa-cedi-sign::before {\r\n  content: "\\e0df";\r\n}\r\n\r\n.b-fa-cent-sign::before {\r\n  content: "\\e3f5";\r\n}\r\n\r\n.b-fa-certificate::before {\r\n  content: "\\f0a3";\r\n}\r\n\r\n.b-fa-chair::before {\r\n  content: "\\f6c0";\r\n}\r\n\r\n.b-fa-chalkboard::before {\r\n  content: "\\f51b";\r\n}\r\n\r\n.b-fa-blackboard::before {\r\n  content: "\\f51b";\r\n}\r\n\r\n.b-fa-chalkboard-user::before {\r\n  content: "\\f51c";\r\n}\r\n\r\n.b-fa-chalkboard-teacher::before {\r\n  content: "\\f51c";\r\n}\r\n\r\n.b-fa-champagne-glasses::before {\r\n  content: "\\f79f";\r\n}\r\n\r\n.b-fa-glass-cheers::before {\r\n  content: "\\f79f";\r\n}\r\n\r\n.b-fa-charging-station::before {\r\n  content: "\\f5e7";\r\n}\r\n\r\n.b-fa-chart-area::before {\r\n  content: "\\f1fe";\r\n}\r\n\r\n.b-fa-area-chart::before {\r\n  content: "\\f1fe";\r\n}\r\n\r\n.b-fa-chart-bar::before {\r\n  content: "\\f080";\r\n}\r\n\r\n.b-fa-bar-chart::before {\r\n  content: "\\f080";\r\n}\r\n\r\n.b-fa-chart-column::before {\r\n  content: "\\e0e3";\r\n}\r\n\r\n.b-fa-chart-gantt::before {\r\n  content: "\\e0e4";\r\n}\r\n\r\n.b-fa-chart-line::before {\r\n  content: "\\f201";\r\n}\r\n\r\n.b-fa-line-chart::before {\r\n  content: "\\f201";\r\n}\r\n\r\n.b-fa-chart-pie::before {\r\n  content: "\\f200";\r\n}\r\n\r\n.b-fa-pie-chart::before {\r\n  content: "\\f200";\r\n}\r\n\r\n.b-fa-chart-simple::before {\r\n  content: "\\e473";\r\n}\r\n\r\n.b-fa-check::before {\r\n  content: "\\f00c";\r\n}\r\n\r\n.b-fa-check-double::before {\r\n  content: "\\f560";\r\n}\r\n\r\n.b-fa-check-to-slot::before {\r\n  content: "\\f772";\r\n}\r\n\r\n.b-fa-vote-yea::before {\r\n  content: "\\f772";\r\n}\r\n\r\n.b-fa-cheese::before {\r\n  content: "\\f7ef";\r\n}\r\n\r\n.b-fa-chess::before {\r\n  content: "\\f439";\r\n}\r\n\r\n.b-fa-chess-bishop::before {\r\n  content: "\\f43a";\r\n}\r\n\r\n.b-fa-chess-board::before {\r\n  content: "\\f43c";\r\n}\r\n\r\n.b-fa-chess-king::before {\r\n  content: "\\f43f";\r\n}\r\n\r\n.b-fa-chess-knight::before {\r\n  content: "\\f441";\r\n}\r\n\r\n.b-fa-chess-pawn::before {\r\n  content: "\\f443";\r\n}\r\n\r\n.b-fa-chess-queen::before {\r\n  content: "\\f445";\r\n}\r\n\r\n.b-fa-chess-rook::before {\r\n  content: "\\f447";\r\n}\r\n\r\n.b-fa-chevron-down::before {\r\n  content: "\\f078";\r\n}\r\n\r\n.b-fa-chevron-left::before {\r\n  content: "\\f053";\r\n}\r\n\r\n.b-fa-chevron-right::before {\r\n  content: "\\f054";\r\n}\r\n\r\n.b-fa-chevron-up::before {\r\n  content: "\\f077";\r\n}\r\n\r\n.b-fa-child::before {\r\n  content: "\\f1ae";\r\n}\r\n\r\n.b-fa-child-dress::before {\r\n  content: "\\e59c";\r\n}\r\n\r\n.b-fa-child-reaching::before {\r\n  content: "\\e59d";\r\n}\r\n\r\n.b-fa-child-rifle::before {\r\n  content: "\\e4e0";\r\n}\r\n\r\n.b-fa-children::before {\r\n  content: "\\e4e1";\r\n}\r\n\r\n.b-fa-church::before {\r\n  content: "\\f51d";\r\n}\r\n\r\n.b-fa-circle::before {\r\n  content: "\\f111";\r\n}\r\n\r\n.b-fa-circle-arrow-down::before {\r\n  content: "\\f0ab";\r\n}\r\n\r\n.b-fa-arrow-circle-down::before {\r\n  content: "\\f0ab";\r\n}\r\n\r\n.b-fa-circle-arrow-left::before {\r\n  content: "\\f0a8";\r\n}\r\n\r\n.b-fa-arrow-circle-left::before {\r\n  content: "\\f0a8";\r\n}\r\n\r\n.b-fa-circle-arrow-right::before {\r\n  content: "\\f0a9";\r\n}\r\n\r\n.b-fa-arrow-circle-right::before {\r\n  content: "\\f0a9";\r\n}\r\n\r\n.b-fa-circle-arrow-up::before {\r\n  content: "\\f0aa";\r\n}\r\n\r\n.b-fa-arrow-circle-up::before {\r\n  content: "\\f0aa";\r\n}\r\n\r\n.b-fa-circle-check::before {\r\n  content: "\\f058";\r\n}\r\n\r\n.b-fa-check-circle::before {\r\n  content: "\\f058";\r\n}\r\n\r\n.b-fa-circle-chevron-down::before {\r\n  content: "\\f13a";\r\n}\r\n\r\n.b-fa-chevron-circle-down::before {\r\n  content: "\\f13a";\r\n}\r\n\r\n.b-fa-circle-chevron-left::before {\r\n  content: "\\f137";\r\n}\r\n\r\n.b-fa-chevron-circle-left::before {\r\n  content: "\\f137";\r\n}\r\n\r\n.b-fa-circle-chevron-right::before {\r\n  content: "\\f138";\r\n}\r\n\r\n.b-fa-chevron-circle-right::before {\r\n  content: "\\f138";\r\n}\r\n\r\n.b-fa-circle-chevron-up::before {\r\n  content: "\\f139";\r\n}\r\n\r\n.b-fa-chevron-circle-up::before {\r\n  content: "\\f139";\r\n}\r\n\r\n.b-fa-circle-dollar-to-slot::before {\r\n  content: "\\f4b9";\r\n}\r\n\r\n.b-fa-donate::before {\r\n  content: "\\f4b9";\r\n}\r\n\r\n.b-fa-circle-dot::before {\r\n  content: "\\f192";\r\n}\r\n\r\n.b-fa-dot-circle::before {\r\n  content: "\\f192";\r\n}\r\n\r\n.b-fa-circle-down::before {\r\n  content: "\\f358";\r\n}\r\n\r\n.b-fa-arrow-alt-circle-down::before {\r\n  content: "\\f358";\r\n}\r\n\r\n.b-fa-circle-exclamation::before {\r\n  content: "\\f06a";\r\n}\r\n\r\n.b-fa-exclamation-circle::before {\r\n  content: "\\f06a";\r\n}\r\n\r\n.b-fa-circle-h::before {\r\n  content: "\\f47e";\r\n}\r\n\r\n.b-fa-hospital-symbol::before {\r\n  content: "\\f47e";\r\n}\r\n\r\n.b-fa-circle-half-stroke::before {\r\n  content: "\\f042";\r\n}\r\n\r\n.b-fa-adjust::before {\r\n  content: "\\f042";\r\n}\r\n\r\n.b-fa-circle-info::before {\r\n  content: "\\f05a";\r\n}\r\n\r\n.b-fa-info-circle::before {\r\n  content: "\\f05a";\r\n}\r\n\r\n.b-fa-circle-left::before {\r\n  content: "\\f359";\r\n}\r\n\r\n.b-fa-arrow-alt-circle-left::before {\r\n  content: "\\f359";\r\n}\r\n\r\n.b-fa-circle-minus::before {\r\n  content: "\\f056";\r\n}\r\n\r\n.b-fa-minus-circle::before {\r\n  content: "\\f056";\r\n}\r\n\r\n.b-fa-circle-nodes::before {\r\n  content: "\\e4e2";\r\n}\r\n\r\n.b-fa-circle-notch::before {\r\n  content: "\\f1ce";\r\n}\r\n\r\n.b-fa-circle-pause::before {\r\n  content: "\\f28b";\r\n}\r\n\r\n.b-fa-pause-circle::before {\r\n  content: "\\f28b";\r\n}\r\n\r\n.b-fa-circle-play::before {\r\n  content: "\\f144";\r\n}\r\n\r\n.b-fa-play-circle::before {\r\n  content: "\\f144";\r\n}\r\n\r\n.b-fa-circle-plus::before {\r\n  content: "\\f055";\r\n}\r\n\r\n.b-fa-plus-circle::before {\r\n  content: "\\f055";\r\n}\r\n\r\n.b-fa-circle-question::before {\r\n  content: "\\f059";\r\n}\r\n\r\n.b-fa-question-circle::before {\r\n  content: "\\f059";\r\n}\r\n\r\n.b-fa-circle-radiation::before {\r\n  content: "\\f7ba";\r\n}\r\n\r\n.b-fa-radiation-alt::before {\r\n  content: "\\f7ba";\r\n}\r\n\r\n.b-fa-circle-right::before {\r\n  content: "\\f35a";\r\n}\r\n\r\n.b-fa-arrow-alt-circle-right::before {\r\n  content: "\\f35a";\r\n}\r\n\r\n.b-fa-circle-stop::before {\r\n  content: "\\f28d";\r\n}\r\n\r\n.b-fa-stop-circle::before {\r\n  content: "\\f28d";\r\n}\r\n\r\n.b-fa-circle-up::before {\r\n  content: "\\f35b";\r\n}\r\n\r\n.b-fa-arrow-alt-circle-up::before {\r\n  content: "\\f35b";\r\n}\r\n\r\n.b-fa-circle-user::before {\r\n  content: "\\f2bd";\r\n}\r\n\r\n.b-fa-user-circle::before {\r\n  content: "\\f2bd";\r\n}\r\n\r\n.b-fa-circle-xmark::before {\r\n  content: "\\f057";\r\n}\r\n\r\n.b-fa-times-circle::before {\r\n  content: "\\f057";\r\n}\r\n\r\n.b-fa-xmark-circle::before {\r\n  content: "\\f057";\r\n}\r\n\r\n.b-fa-city::before {\r\n  content: "\\f64f";\r\n}\r\n\r\n.b-fa-clapperboard::before {\r\n  content: "\\e131";\r\n}\r\n\r\n.b-fa-clipboard::before {\r\n  content: "\\f328";\r\n}\r\n\r\n.b-fa-clipboard-check::before {\r\n  content: "\\f46c";\r\n}\r\n\r\n.b-fa-clipboard-list::before {\r\n  content: "\\f46d";\r\n}\r\n\r\n.b-fa-clipboard-question::before {\r\n  content: "\\e4e3";\r\n}\r\n\r\n.b-fa-clipboard-user::before {\r\n  content: "\\f7f3";\r\n}\r\n\r\n.b-fa-clock::before {\r\n  content: "\\f017";\r\n}\r\n\r\n.b-fa-clock-four::before {\r\n  content: "\\f017";\r\n}\r\n\r\n.b-fa-clock-rotate-left::before {\r\n  content: "\\f1da";\r\n}\r\n\r\n.b-fa-history::before {\r\n  content: "\\f1da";\r\n}\r\n\r\n.b-fa-clone::before {\r\n  content: "\\f24d";\r\n}\r\n\r\n.b-fa-closed-captioning::before {\r\n  content: "\\f20a";\r\n}\r\n\r\n.b-fa-cloud::before {\r\n  content: "\\f0c2";\r\n}\r\n\r\n.b-fa-cloud-arrow-down::before {\r\n  content: "\\f0ed";\r\n}\r\n\r\n.b-fa-cloud-download::before {\r\n  content: "\\f0ed";\r\n}\r\n\r\n.b-fa-cloud-download-alt::before {\r\n  content: "\\f0ed";\r\n}\r\n\r\n.b-fa-cloud-arrow-up::before {\r\n  content: "\\f0ee";\r\n}\r\n\r\n.b-fa-cloud-upload::before {\r\n  content: "\\f0ee";\r\n}\r\n\r\n.b-fa-cloud-upload-alt::before {\r\n  content: "\\f0ee";\r\n}\r\n\r\n.b-fa-cloud-bolt::before {\r\n  content: "\\f76c";\r\n}\r\n\r\n.b-fa-thunderstorm::before {\r\n  content: "\\f76c";\r\n}\r\n\r\n.b-fa-cloud-meatball::before {\r\n  content: "\\f73b";\r\n}\r\n\r\n.b-fa-cloud-moon::before {\r\n  content: "\\f6c3";\r\n}\r\n\r\n.b-fa-cloud-moon-rain::before {\r\n  content: "\\f73c";\r\n}\r\n\r\n.b-fa-cloud-rain::before {\r\n  content: "\\f73d";\r\n}\r\n\r\n.b-fa-cloud-showers-heavy::before {\r\n  content: "\\f740";\r\n}\r\n\r\n.b-fa-cloud-showers-water::before {\r\n  content: "\\e4e4";\r\n}\r\n\r\n.b-fa-cloud-sun::before {\r\n  content: "\\f6c4";\r\n}\r\n\r\n.b-fa-cloud-sun-rain::before {\r\n  content: "\\f743";\r\n}\r\n\r\n.b-fa-clover::before {\r\n  content: "\\e139";\r\n}\r\n\r\n.b-fa-code::before {\r\n  content: "\\f121";\r\n}\r\n\r\n.b-fa-code-branch::before {\r\n  content: "\\f126";\r\n}\r\n\r\n.b-fa-code-commit::before {\r\n  content: "\\f386";\r\n}\r\n\r\n.b-fa-code-compare::before {\r\n  content: "\\e13a";\r\n}\r\n\r\n.b-fa-code-fork::before {\r\n  content: "\\e13b";\r\n}\r\n\r\n.b-fa-code-merge::before {\r\n  content: "\\f387";\r\n}\r\n\r\n.b-fa-code-pull-request::before {\r\n  content: "\\e13c";\r\n}\r\n\r\n.b-fa-coins::before {\r\n  content: "\\f51e";\r\n}\r\n\r\n.b-fa-colon-sign::before {\r\n  content: "\\e140";\r\n}\r\n\r\n.b-fa-comment::before {\r\n  content: "\\f075";\r\n}\r\n\r\n.b-fa-comment-dollar::before {\r\n  content: "\\f651";\r\n}\r\n\r\n.b-fa-comment-dots::before {\r\n  content: "\\f4ad";\r\n}\r\n\r\n.b-fa-commenting::before {\r\n  content: "\\f4ad";\r\n}\r\n\r\n.b-fa-comment-medical::before {\r\n  content: "\\f7f5";\r\n}\r\n\r\n.b-fa-comment-slash::before {\r\n  content: "\\f4b3";\r\n}\r\n\r\n.b-fa-comment-sms::before {\r\n  content: "\\f7cd";\r\n}\r\n\r\n.b-fa-sms::before {\r\n  content: "\\f7cd";\r\n}\r\n\r\n.b-fa-comments::before {\r\n  content: "\\f086";\r\n}\r\n\r\n.b-fa-comments-dollar::before {\r\n  content: "\\f653";\r\n}\r\n\r\n.b-fa-compact-disc::before {\r\n  content: "\\f51f";\r\n}\r\n\r\n.b-fa-compass::before {\r\n  content: "\\f14e";\r\n}\r\n\r\n.b-fa-compass-drafting::before {\r\n  content: "\\f568";\r\n}\r\n\r\n.b-fa-drafting-compass::before {\r\n  content: "\\f568";\r\n}\r\n\r\n.b-fa-compress::before {\r\n  content: "\\f066";\r\n}\r\n\r\n.b-fa-computer::before {\r\n  content: "\\e4e5";\r\n}\r\n\r\n.b-fa-computer-mouse::before {\r\n  content: "\\f8cc";\r\n}\r\n\r\n.b-fa-mouse::before {\r\n  content: "\\f8cc";\r\n}\r\n\r\n.b-fa-cookie::before {\r\n  content: "\\f563";\r\n}\r\n\r\n.b-fa-cookie-bite::before {\r\n  content: "\\f564";\r\n}\r\n\r\n.b-fa-copy::before {\r\n  content: "\\f0c5";\r\n}\r\n\r\n.b-fa-copyright::before {\r\n  content: "\\f1f9";\r\n}\r\n\r\n.b-fa-couch::before {\r\n  content: "\\f4b8";\r\n}\r\n\r\n.b-fa-cow::before {\r\n  content: "\\f6c8";\r\n}\r\n\r\n.b-fa-credit-card::before {\r\n  content: "\\f09d";\r\n}\r\n\r\n.b-fa-credit-card-alt::before {\r\n  content: "\\f09d";\r\n}\r\n\r\n.b-fa-crop::before {\r\n  content: "\\f125";\r\n}\r\n\r\n.b-fa-crop-simple::before {\r\n  content: "\\f565";\r\n}\r\n\r\n.b-fa-crop-alt::before {\r\n  content: "\\f565";\r\n}\r\n\r\n.b-fa-cross::before {\r\n  content: "\\f654";\r\n}\r\n\r\n.b-fa-crosshairs::before {\r\n  content: "\\f05b";\r\n}\r\n\r\n.b-fa-crow::before {\r\n  content: "\\f520";\r\n}\r\n\r\n.b-fa-crown::before {\r\n  content: "\\f521";\r\n}\r\n\r\n.b-fa-crutch::before {\r\n  content: "\\f7f7";\r\n}\r\n\r\n.b-fa-cruzeiro-sign::before {\r\n  content: "\\e152";\r\n}\r\n\r\n.b-fa-cube::before {\r\n  content: "\\f1b2";\r\n}\r\n\r\n.b-fa-cubes::before {\r\n  content: "\\f1b3";\r\n}\r\n\r\n.b-fa-cubes-stacked::before {\r\n  content: "\\e4e6";\r\n}\r\n\r\n.b-fa-d::before {\r\n  content: "D";\r\n}\r\n\r\n.b-fa-database::before {\r\n  content: "\\f1c0";\r\n}\r\n\r\n.b-fa-delete-left::before {\r\n  content: "\\f55a";\r\n}\r\n\r\n.b-fa-backspace::before {\r\n  content: "\\f55a";\r\n}\r\n\r\n.b-fa-democrat::before {\r\n  content: "\\f747";\r\n}\r\n\r\n.b-fa-desktop::before {\r\n  content: "\\f390";\r\n}\r\n\r\n.b-fa-desktop-alt::before {\r\n  content: "\\f390";\r\n}\r\n\r\n.b-fa-dharmachakra::before {\r\n  content: "\\f655";\r\n}\r\n\r\n.b-fa-diagram-next::before {\r\n  content: "\\e476";\r\n}\r\n\r\n.b-fa-diagram-predecessor::before {\r\n  content: "\\e477";\r\n}\r\n\r\n.b-fa-diagram-project::before {\r\n  content: "\\f542";\r\n}\r\n\r\n.b-fa-project-diagram::before {\r\n  content: "\\f542";\r\n}\r\n\r\n.b-fa-diagram-successor::before {\r\n  content: "\\e47a";\r\n}\r\n\r\n.b-fa-diamond::before {\r\n  content: "\\f219";\r\n}\r\n\r\n.b-fa-diamond-turn-right::before {\r\n  content: "\\f5eb";\r\n}\r\n\r\n.b-fa-directions::before {\r\n  content: "\\f5eb";\r\n}\r\n\r\n.b-fa-dice::before {\r\n  content: "\\f522";\r\n}\r\n\r\n.b-fa-dice-d20::before {\r\n  content: "\\f6cf";\r\n}\r\n\r\n.b-fa-dice-d6::before {\r\n  content: "\\f6d1";\r\n}\r\n\r\n.b-fa-dice-five::before {\r\n  content: "\\f523";\r\n}\r\n\r\n.b-fa-dice-four::before {\r\n  content: "\\f524";\r\n}\r\n\r\n.b-fa-dice-one::before {\r\n  content: "\\f525";\r\n}\r\n\r\n.b-fa-dice-six::before {\r\n  content: "\\f526";\r\n}\r\n\r\n.b-fa-dice-three::before {\r\n  content: "\\f527";\r\n}\r\n\r\n.b-fa-dice-two::before {\r\n  content: "\\f528";\r\n}\r\n\r\n.b-fa-disease::before {\r\n  content: "\\f7fa";\r\n}\r\n\r\n.b-fa-display::before {\r\n  content: "\\e163";\r\n}\r\n\r\n.b-fa-divide::before {\r\n  content: "\\f529";\r\n}\r\n\r\n.b-fa-dna::before {\r\n  content: "\\f471";\r\n}\r\n\r\n.b-fa-dog::before {\r\n  content: "\\f6d3";\r\n}\r\n\r\n.b-fa-dollar-sign::before {\r\n  content: "\\$";\r\n}\r\n\r\n.b-fa-dollar::before {\r\n  content: "\\$";\r\n}\r\n\r\n.b-fa-usd::before {\r\n  content: "\\$";\r\n}\r\n\r\n.b-fa-dolly::before {\r\n  content: "\\f472";\r\n}\r\n\r\n.b-fa-dolly-box::before {\r\n  content: "\\f472";\r\n}\r\n\r\n.b-fa-dong-sign::before {\r\n  content: "\\e169";\r\n}\r\n\r\n.b-fa-door-closed::before {\r\n  content: "\\f52a";\r\n}\r\n\r\n.b-fa-door-open::before {\r\n  content: "\\f52b";\r\n}\r\n\r\n.b-fa-dove::before {\r\n  content: "\\f4ba";\r\n}\r\n\r\n.b-fa-down-left-and-up-right-to-center::before {\r\n  content: "\\f422";\r\n}\r\n\r\n.b-fa-compress-alt::before {\r\n  content: "\\f422";\r\n}\r\n\r\n.b-fa-down-long::before {\r\n  content: "\\f309";\r\n}\r\n\r\n.b-fa-long-arrow-alt-down::before {\r\n  content: "\\f309";\r\n}\r\n\r\n.b-fa-download::before {\r\n  content: "\\f019";\r\n}\r\n\r\n.b-fa-dragon::before {\r\n  content: "\\f6d5";\r\n}\r\n\r\n.b-fa-draw-polygon::before {\r\n  content: "\\f5ee";\r\n}\r\n\r\n.b-fa-droplet::before {\r\n  content: "\\f043";\r\n}\r\n\r\n.b-fa-tint::before {\r\n  content: "\\f043";\r\n}\r\n\r\n.b-fa-droplet-slash::before {\r\n  content: "\\f5c7";\r\n}\r\n\r\n.b-fa-tint-slash::before {\r\n  content: "\\f5c7";\r\n}\r\n\r\n.b-fa-drum::before {\r\n  content: "\\f569";\r\n}\r\n\r\n.b-fa-drum-steelpan::before {\r\n  content: "\\f56a";\r\n}\r\n\r\n.b-fa-drumstick-bite::before {\r\n  content: "\\f6d7";\r\n}\r\n\r\n.b-fa-dumbbell::before {\r\n  content: "\\f44b";\r\n}\r\n\r\n.b-fa-dumpster::before {\r\n  content: "\\f793";\r\n}\r\n\r\n.b-fa-dumpster-fire::before {\r\n  content: "\\f794";\r\n}\r\n\r\n.b-fa-dungeon::before {\r\n  content: "\\f6d9";\r\n}\r\n\r\n.b-fa-e::before {\r\n  content: "E";\r\n}\r\n\r\n.b-fa-ear-deaf::before {\r\n  content: "\\f2a4";\r\n}\r\n\r\n.b-fa-deaf::before {\r\n  content: "\\f2a4";\r\n}\r\n\r\n.b-fa-deafness::before {\r\n  content: "\\f2a4";\r\n}\r\n\r\n.b-fa-hard-of-hearing::before {\r\n  content: "\\f2a4";\r\n}\r\n\r\n.b-fa-ear-listen::before {\r\n  content: "\\f2a2";\r\n}\r\n\r\n.b-fa-assistive-listening-systems::before {\r\n  content: "\\f2a2";\r\n}\r\n\r\n.b-fa-earth-africa::before {\r\n  content: "\\f57c";\r\n}\r\n\r\n.b-fa-globe-africa::before {\r\n  content: "\\f57c";\r\n}\r\n\r\n.b-fa-earth-americas::before {\r\n  content: "\\f57d";\r\n}\r\n\r\n.b-fa-earth::before {\r\n  content: "\\f57d";\r\n}\r\n\r\n.b-fa-earth-america::before {\r\n  content: "\\f57d";\r\n}\r\n\r\n.b-fa-globe-americas::before {\r\n  content: "\\f57d";\r\n}\r\n\r\n.b-fa-earth-asia::before {\r\n  content: "\\f57e";\r\n}\r\n\r\n.b-fa-globe-asia::before {\r\n  content: "\\f57e";\r\n}\r\n\r\n.b-fa-earth-europe::before {\r\n  content: "\\f7a2";\r\n}\r\n\r\n.b-fa-globe-europe::before {\r\n  content: "\\f7a2";\r\n}\r\n\r\n.b-fa-earth-oceania::before {\r\n  content: "\\e47b";\r\n}\r\n\r\n.b-fa-globe-oceania::before {\r\n  content: "\\e47b";\r\n}\r\n\r\n.b-fa-egg::before {\r\n  content: "\\f7fb";\r\n}\r\n\r\n.b-fa-eject::before {\r\n  content: "\\f052";\r\n}\r\n\r\n.b-fa-elevator::before {\r\n  content: "\\e16d";\r\n}\r\n\r\n.b-fa-ellipsis::before {\r\n  content: "\\f141";\r\n}\r\n\r\n.b-fa-ellipsis-h::before {\r\n  content: "\\f141";\r\n}\r\n\r\n.b-fa-ellipsis-vertical::before {\r\n  content: "\\f142";\r\n}\r\n\r\n.b-fa-ellipsis-v::before {\r\n  content: "\\f142";\r\n}\r\n\r\n.b-fa-envelope::before {\r\n  content: "\\f0e0";\r\n}\r\n\r\n.b-fa-envelope-circle-check::before {\r\n  content: "\\e4e8";\r\n}\r\n\r\n.b-fa-envelope-open::before {\r\n  content: "\\f2b6";\r\n}\r\n\r\n.b-fa-envelope-open-text::before {\r\n  content: "\\f658";\r\n}\r\n\r\n.b-fa-envelopes-bulk::before {\r\n  content: "\\f674";\r\n}\r\n\r\n.b-fa-mail-bulk::before {\r\n  content: "\\f674";\r\n}\r\n\r\n.b-fa-equals::before {\r\n  content: "\\=";\r\n}\r\n\r\n.b-fa-eraser::before {\r\n  content: "\\f12d";\r\n}\r\n\r\n.b-fa-ethernet::before {\r\n  content: "\\f796";\r\n}\r\n\r\n.b-fa-euro-sign::before {\r\n  content: "\\f153";\r\n}\r\n\r\n.b-fa-eur::before {\r\n  content: "\\f153";\r\n}\r\n\r\n.b-fa-euro::before {\r\n  content: "\\f153";\r\n}\r\n\r\n.b-fa-exclamation::before {\r\n  content: "\\!";\r\n}\r\n\r\n.b-fa-expand::before {\r\n  content: "\\f065";\r\n}\r\n\r\n.b-fa-explosion::before {\r\n  content: "\\e4e9";\r\n}\r\n\r\n.b-fa-eye::before {\r\n  content: "\\f06e";\r\n}\r\n\r\n.b-fa-eye-dropper::before {\r\n  content: "\\f1fb";\r\n}\r\n\r\n.b-fa-eye-dropper-empty::before {\r\n  content: "\\f1fb";\r\n}\r\n\r\n.b-fa-eyedropper::before {\r\n  content: "\\f1fb";\r\n}\r\n\r\n.b-fa-eye-low-vision::before {\r\n  content: "\\f2a8";\r\n}\r\n\r\n.b-fa-low-vision::before {\r\n  content: "\\f2a8";\r\n}\r\n\r\n.b-fa-eye-slash::before {\r\n  content: "\\f070";\r\n}\r\n\r\n.b-fa-f::before {\r\n  content: "F";\r\n}\r\n\r\n.b-fa-face-angry::before {\r\n  content: "\\f556";\r\n}\r\n\r\n.b-fa-angry::before {\r\n  content: "\\f556";\r\n}\r\n\r\n.b-fa-face-dizzy::before {\r\n  content: "\\f567";\r\n}\r\n\r\n.b-fa-dizzy::before {\r\n  content: "\\f567";\r\n}\r\n\r\n.b-fa-face-flushed::before {\r\n  content: "\\f579";\r\n}\r\n\r\n.b-fa-flushed::before {\r\n  content: "\\f579";\r\n}\r\n\r\n.b-fa-face-frown::before {\r\n  content: "\\f119";\r\n}\r\n\r\n.b-fa-frown::before {\r\n  content: "\\f119";\r\n}\r\n\r\n.b-fa-face-frown-open::before {\r\n  content: "\\f57a";\r\n}\r\n\r\n.b-fa-frown-open::before {\r\n  content: "\\f57a";\r\n}\r\n\r\n.b-fa-face-grimace::before {\r\n  content: "\\f57f";\r\n}\r\n\r\n.b-fa-grimace::before {\r\n  content: "\\f57f";\r\n}\r\n\r\n.b-fa-face-grin::before {\r\n  content: "\\f580";\r\n}\r\n\r\n.b-fa-grin::before {\r\n  content: "\\f580";\r\n}\r\n\r\n.b-fa-face-grin-beam::before {\r\n  content: "\\f582";\r\n}\r\n\r\n.b-fa-grin-beam::before {\r\n  content: "\\f582";\r\n}\r\n\r\n.b-fa-face-grin-beam-sweat::before {\r\n  content: "\\f583";\r\n}\r\n\r\n.b-fa-grin-beam-sweat::before {\r\n  content: "\\f583";\r\n}\r\n\r\n.b-fa-face-grin-hearts::before {\r\n  content: "\\f584";\r\n}\r\n\r\n.b-fa-grin-hearts::before {\r\n  content: "\\f584";\r\n}\r\n\r\n.b-fa-face-grin-squint::before {\r\n  content: "\\f585";\r\n}\r\n\r\n.b-fa-grin-squint::before {\r\n  content: "\\f585";\r\n}\r\n\r\n.b-fa-face-grin-squint-tears::before {\r\n  content: "\\f586";\r\n}\r\n\r\n.b-fa-grin-squint-tears::before {\r\n  content: "\\f586";\r\n}\r\n\r\n.b-fa-face-grin-stars::before {\r\n  content: "\\f587";\r\n}\r\n\r\n.b-fa-grin-stars::before {\r\n  content: "\\f587";\r\n}\r\n\r\n.b-fa-face-grin-tears::before {\r\n  content: "\\f588";\r\n}\r\n\r\n.b-fa-grin-tears::before {\r\n  content: "\\f588";\r\n}\r\n\r\n.b-fa-face-grin-tongue::before {\r\n  content: "\\f589";\r\n}\r\n\r\n.b-fa-grin-tongue::before {\r\n  content: "\\f589";\r\n}\r\n\r\n.b-fa-face-grin-tongue-squint::before {\r\n  content: "\\f58a";\r\n}\r\n\r\n.b-fa-grin-tongue-squint::before {\r\n  content: "\\f58a";\r\n}\r\n\r\n.b-fa-face-grin-tongue-wink::before {\r\n  content: "\\f58b";\r\n}\r\n\r\n.b-fa-grin-tongue-wink::before {\r\n  content: "\\f58b";\r\n}\r\n\r\n.b-fa-face-grin-wide::before {\r\n  content: "\\f581";\r\n}\r\n\r\n.b-fa-grin-alt::before {\r\n  content: "\\f581";\r\n}\r\n\r\n.b-fa-face-grin-wink::before {\r\n  content: "\\f58c";\r\n}\r\n\r\n.b-fa-grin-wink::before {\r\n  content: "\\f58c";\r\n}\r\n\r\n.b-fa-face-kiss::before {\r\n  content: "\\f596";\r\n}\r\n\r\n.b-fa-kiss::before {\r\n  content: "\\f596";\r\n}\r\n\r\n.b-fa-face-kiss-beam::before {\r\n  content: "\\f597";\r\n}\r\n\r\n.b-fa-kiss-beam::before {\r\n  content: "\\f597";\r\n}\r\n\r\n.b-fa-face-kiss-wink-heart::before {\r\n  content: "\\f598";\r\n}\r\n\r\n.b-fa-kiss-wink-heart::before {\r\n  content: "\\f598";\r\n}\r\n\r\n.b-fa-face-laugh::before {\r\n  content: "\\f599";\r\n}\r\n\r\n.b-fa-laugh::before {\r\n  content: "\\f599";\r\n}\r\n\r\n.b-fa-face-laugh-beam::before {\r\n  content: "\\f59a";\r\n}\r\n\r\n.b-fa-laugh-beam::before {\r\n  content: "\\f59a";\r\n}\r\n\r\n.b-fa-face-laugh-squint::before {\r\n  content: "\\f59b";\r\n}\r\n\r\n.b-fa-laugh-squint::before {\r\n  content: "\\f59b";\r\n}\r\n\r\n.b-fa-face-laugh-wink::before {\r\n  content: "\\f59c";\r\n}\r\n\r\n.b-fa-laugh-wink::before {\r\n  content: "\\f59c";\r\n}\r\n\r\n.b-fa-face-meh::before {\r\n  content: "\\f11a";\r\n}\r\n\r\n.b-fa-meh::before {\r\n  content: "\\f11a";\r\n}\r\n\r\n.b-fa-face-meh-blank::before {\r\n  content: "\\f5a4";\r\n}\r\n\r\n.b-fa-meh-blank::before {\r\n  content: "\\f5a4";\r\n}\r\n\r\n.b-fa-face-rolling-eyes::before {\r\n  content: "\\f5a5";\r\n}\r\n\r\n.b-fa-meh-rolling-eyes::before {\r\n  content: "\\f5a5";\r\n}\r\n\r\n.b-fa-face-sad-cry::before {\r\n  content: "\\f5b3";\r\n}\r\n\r\n.b-fa-sad-cry::before {\r\n  content: "\\f5b3";\r\n}\r\n\r\n.b-fa-face-sad-tear::before {\r\n  content: "\\f5b4";\r\n}\r\n\r\n.b-fa-sad-tear::before {\r\n  content: "\\f5b4";\r\n}\r\n\r\n.b-fa-face-smile::before {\r\n  content: "\\f118";\r\n}\r\n\r\n.b-fa-smile::before {\r\n  content: "\\f118";\r\n}\r\n\r\n.b-fa-face-smile-beam::before {\r\n  content: "\\f5b8";\r\n}\r\n\r\n.b-fa-smile-beam::before {\r\n  content: "\\f5b8";\r\n}\r\n\r\n.b-fa-face-smile-wink::before {\r\n  content: "\\f4da";\r\n}\r\n\r\n.b-fa-smile-wink::before {\r\n  content: "\\f4da";\r\n}\r\n\r\n.b-fa-face-surprise::before {\r\n  content: "\\f5c2";\r\n}\r\n\r\n.b-fa-surprise::before {\r\n  content: "\\f5c2";\r\n}\r\n\r\n.b-fa-face-tired::before {\r\n  content: "\\f5c8";\r\n}\r\n\r\n.b-fa-tired::before {\r\n  content: "\\f5c8";\r\n}\r\n\r\n.b-fa-fan::before {\r\n  content: "\\f863";\r\n}\r\n\r\n.b-fa-faucet::before {\r\n  content: "\\e005";\r\n}\r\n\r\n.b-fa-faucet-drip::before {\r\n  content: "\\e006";\r\n}\r\n\r\n.b-fa-fax::before {\r\n  content: "\\f1ac";\r\n}\r\n\r\n.b-fa-feather::before {\r\n  content: "\\f52d";\r\n}\r\n\r\n.b-fa-feather-pointed::before {\r\n  content: "\\f56b";\r\n}\r\n\r\n.b-fa-feather-alt::before {\r\n  content: "\\f56b";\r\n}\r\n\r\n.b-fa-ferry::before {\r\n  content: "\\e4ea";\r\n}\r\n\r\n.b-fa-file::before {\r\n  content: "\\f15b";\r\n}\r\n\r\n.b-fa-file-arrow-down::before {\r\n  content: "\\f56d";\r\n}\r\n\r\n.b-fa-file-download::before {\r\n  content: "\\f56d";\r\n}\r\n\r\n.b-fa-file-arrow-up::before {\r\n  content: "\\f574";\r\n}\r\n\r\n.b-fa-file-upload::before {\r\n  content: "\\f574";\r\n}\r\n\r\n.b-fa-file-audio::before {\r\n  content: "\\f1c7";\r\n}\r\n\r\n.b-fa-file-circle-check::before {\r\n  content: "\\e493";\r\n}\r\n\r\n.b-fa-file-circle-exclamation::before {\r\n  content: "\\e4eb";\r\n}\r\n\r\n.b-fa-file-circle-minus::before {\r\n  content: "\\e4ed";\r\n}\r\n\r\n.b-fa-file-circle-plus::before {\r\n  content: "\\e4ee";\r\n}\r\n\r\n.b-fa-file-circle-question::before {\r\n  content: "\\e4ef";\r\n}\r\n\r\n.b-fa-file-circle-xmark::before {\r\n  content: "\\e494";\r\n}\r\n\r\n.b-fa-file-code::before {\r\n  content: "\\f1c9";\r\n}\r\n\r\n.b-fa-file-contract::before {\r\n  content: "\\f56c";\r\n}\r\n\r\n.b-fa-file-csv::before {\r\n  content: "\\f6dd";\r\n}\r\n\r\n.b-fa-file-excel::before {\r\n  content: "\\f1c3";\r\n}\r\n\r\n.b-fa-file-export::before {\r\n  content: "\\f56e";\r\n}\r\n\r\n.b-fa-arrow-right-from-file::before {\r\n  content: "\\f56e";\r\n}\r\n\r\n.b-fa-file-image::before {\r\n  content: "\\f1c5";\r\n}\r\n\r\n.b-fa-file-import::before {\r\n  content: "\\f56f";\r\n}\r\n\r\n.b-fa-arrow-right-to-file::before {\r\n  content: "\\f56f";\r\n}\r\n\r\n.b-fa-file-invoice::before {\r\n  content: "\\f570";\r\n}\r\n\r\n.b-fa-file-invoice-dollar::before {\r\n  content: "\\f571";\r\n}\r\n\r\n.b-fa-file-lines::before {\r\n  content: "\\f15c";\r\n}\r\n\r\n.b-fa-file-alt::before {\r\n  content: "\\f15c";\r\n}\r\n\r\n.b-fa-file-text::before {\r\n  content: "\\f15c";\r\n}\r\n\r\n.b-fa-file-medical::before {\r\n  content: "\\f477";\r\n}\r\n\r\n.b-fa-file-pdf::before {\r\n  content: "\\f1c1";\r\n}\r\n\r\n.b-fa-file-pen::before {\r\n  content: "\\f31c";\r\n}\r\n\r\n.b-fa-file-edit::before {\r\n  content: "\\f31c";\r\n}\r\n\r\n.b-fa-file-powerpoint::before {\r\n  content: "\\f1c4";\r\n}\r\n\r\n.b-fa-file-prescription::before {\r\n  content: "\\f572";\r\n}\r\n\r\n.b-fa-file-shield::before {\r\n  content: "\\e4f0";\r\n}\r\n\r\n.b-fa-file-signature::before {\r\n  content: "\\f573";\r\n}\r\n\r\n.b-fa-file-video::before {\r\n  content: "\\f1c8";\r\n}\r\n\r\n.b-fa-file-waveform::before {\r\n  content: "\\f478";\r\n}\r\n\r\n.b-fa-file-medical-alt::before {\r\n  content: "\\f478";\r\n}\r\n\r\n.b-fa-file-word::before {\r\n  content: "\\f1c2";\r\n}\r\n\r\n.b-fa-file-zipper::before {\r\n  content: "\\f1c6";\r\n}\r\n\r\n.b-fa-file-archive::before {\r\n  content: "\\f1c6";\r\n}\r\n\r\n.b-fa-fill::before {\r\n  content: "\\f575";\r\n}\r\n\r\n.b-fa-fill-drip::before {\r\n  content: "\\f576";\r\n}\r\n\r\n.b-fa-film::before {\r\n  content: "\\f008";\r\n}\r\n\r\n.b-fa-filter::before {\r\n  content: "\\f0b0";\r\n}\r\n\r\n.b-fa-filter-circle-dollar::before {\r\n  content: "\\f662";\r\n}\r\n\r\n.b-fa-funnel-dollar::before {\r\n  content: "\\f662";\r\n}\r\n\r\n.b-fa-filter-circle-xmark::before {\r\n  content: "\\e17b";\r\n}\r\n\r\n.b-fa-fingerprint::before {\r\n  content: "\\f577";\r\n}\r\n\r\n.b-fa-fire::before {\r\n  content: "\\f06d";\r\n}\r\n\r\n.b-fa-fire-burner::before {\r\n  content: "\\e4f1";\r\n}\r\n\r\n.b-fa-fire-extinguisher::before {\r\n  content: "\\f134";\r\n}\r\n\r\n.b-fa-fire-flame-curved::before {\r\n  content: "\\f7e4";\r\n}\r\n\r\n.b-fa-fire-alt::before {\r\n  content: "\\f7e4";\r\n}\r\n\r\n.b-fa-fire-flame-simple::before {\r\n  content: "\\f46a";\r\n}\r\n\r\n.b-fa-burn::before {\r\n  content: "\\f46a";\r\n}\r\n\r\n.b-fa-fish::before {\r\n  content: "\\f578";\r\n}\r\n\r\n.b-fa-fish-fins::before {\r\n  content: "\\e4f2";\r\n}\r\n\r\n.b-fa-flag::before {\r\n  content: "\\f024";\r\n}\r\n\r\n.b-fa-flag-checkered::before {\r\n  content: "\\f11e";\r\n}\r\n\r\n.b-fa-flag-usa::before {\r\n  content: "\\f74d";\r\n}\r\n\r\n.b-fa-flask::before {\r\n  content: "\\f0c3";\r\n}\r\n\r\n.b-fa-flask-vial::before {\r\n  content: "\\e4f3";\r\n}\r\n\r\n.b-fa-floppy-disk::before {\r\n  content: "\\f0c7";\r\n}\r\n\r\n.b-fa-save::before {\r\n  content: "\\f0c7";\r\n}\r\n\r\n.b-fa-florin-sign::before {\r\n  content: "\\e184";\r\n}\r\n\r\n.b-fa-folder::before {\r\n  content: "\\f07b";\r\n}\r\n\r\n.b-fa-folder-blank::before {\r\n  content: "\\f07b";\r\n}\r\n\r\n.b-fa-folder-closed::before {\r\n  content: "\\e185";\r\n}\r\n\r\n.b-fa-folder-minus::before {\r\n  content: "\\f65d";\r\n}\r\n\r\n.b-fa-folder-open::before {\r\n  content: "\\f07c";\r\n}\r\n\r\n.b-fa-folder-plus::before {\r\n  content: "\\f65e";\r\n}\r\n\r\n.b-fa-folder-tree::before {\r\n  content: "\\f802";\r\n}\r\n\r\n.b-fa-font::before {\r\n  content: "\\f031";\r\n}\r\n\r\n.b-fa-football::before {\r\n  content: "\\f44e";\r\n}\r\n\r\n.b-fa-football-ball::before {\r\n  content: "\\f44e";\r\n}\r\n\r\n.b-fa-forward::before {\r\n  content: "\\f04e";\r\n}\r\n\r\n.b-fa-forward-fast::before {\r\n  content: "\\f050";\r\n}\r\n\r\n.b-fa-fast-forward::before {\r\n  content: "\\f050";\r\n}\r\n\r\n.b-fa-forward-step::before {\r\n  content: "\\f051";\r\n}\r\n\r\n.b-fa-step-forward::before {\r\n  content: "\\f051";\r\n}\r\n\r\n.b-fa-franc-sign::before {\r\n  content: "\\e18f";\r\n}\r\n\r\n.b-fa-frog::before {\r\n  content: "\\f52e";\r\n}\r\n\r\n.b-fa-futbol::before {\r\n  content: "\\f1e3";\r\n}\r\n\r\n.b-fa-futbol-ball::before {\r\n  content: "\\f1e3";\r\n}\r\n\r\n.b-fa-soccer-ball::before {\r\n  content: "\\f1e3";\r\n}\r\n\r\n.b-fa-g::before {\r\n  content: "G";\r\n}\r\n\r\n.b-fa-gamepad::before {\r\n  content: "\\f11b";\r\n}\r\n\r\n.b-fa-gas-pump::before {\r\n  content: "\\f52f";\r\n}\r\n\r\n.b-fa-gauge::before {\r\n  content: "\\f624";\r\n}\r\n\r\n.b-fa-dashboard::before {\r\n  content: "\\f624";\r\n}\r\n\r\n.b-fa-gauge-med::before {\r\n  content: "\\f624";\r\n}\r\n\r\n.b-fa-tachometer-alt-average::before {\r\n  content: "\\f624";\r\n}\r\n\r\n.b-fa-gauge-high::before {\r\n  content: "\\f625";\r\n}\r\n\r\n.b-fa-tachometer-alt::before {\r\n  content: "\\f625";\r\n}\r\n\r\n.b-fa-tachometer-alt-fast::before {\r\n  content: "\\f625";\r\n}\r\n\r\n.b-fa-gauge-simple::before {\r\n  content: "\\f629";\r\n}\r\n\r\n.b-fa-gauge-simple-med::before {\r\n  content: "\\f629";\r\n}\r\n\r\n.b-fa-tachometer-average::before {\r\n  content: "\\f629";\r\n}\r\n\r\n.b-fa-gauge-simple-high::before {\r\n  content: "\\f62a";\r\n}\r\n\r\n.b-fa-tachometer::before {\r\n  content: "\\f62a";\r\n}\r\n\r\n.b-fa-tachometer-fast::before {\r\n  content: "\\f62a";\r\n}\r\n\r\n.b-fa-gavel::before {\r\n  content: "\\f0e3";\r\n}\r\n\r\n.b-fa-legal::before {\r\n  content: "\\f0e3";\r\n}\r\n\r\n.b-fa-gear::before {\r\n  content: "\\f013";\r\n}\r\n\r\n.b-fa-cog::before {\r\n  content: "\\f013";\r\n}\r\n\r\n.b-fa-gears::before {\r\n  content: "\\f085";\r\n}\r\n\r\n.b-fa-cogs::before {\r\n  content: "\\f085";\r\n}\r\n\r\n.b-fa-gem::before {\r\n  content: "\\f3a5";\r\n}\r\n\r\n.b-fa-genderless::before {\r\n  content: "\\f22d";\r\n}\r\n\r\n.b-fa-ghost::before {\r\n  content: "\\f6e2";\r\n}\r\n\r\n.b-fa-gift::before {\r\n  content: "\\f06b";\r\n}\r\n\r\n.b-fa-gifts::before {\r\n  content: "\\f79c";\r\n}\r\n\r\n.b-fa-glass-water::before {\r\n  content: "\\e4f4";\r\n}\r\n\r\n.b-fa-glass-water-droplet::before {\r\n  content: "\\e4f5";\r\n}\r\n\r\n.b-fa-glasses::before {\r\n  content: "\\f530";\r\n}\r\n\r\n.b-fa-globe::before {\r\n  content: "\\f0ac";\r\n}\r\n\r\n.b-fa-golf-ball-tee::before {\r\n  content: "\\f450";\r\n}\r\n\r\n.b-fa-golf-ball::before {\r\n  content: "\\f450";\r\n}\r\n\r\n.b-fa-gopuram::before {\r\n  content: "\\f664";\r\n}\r\n\r\n.b-fa-graduation-cap::before {\r\n  content: "\\f19d";\r\n}\r\n\r\n.b-fa-mortar-board::before {\r\n  content: "\\f19d";\r\n}\r\n\r\n.b-fa-greater-than::before {\r\n  content: "\\>";\r\n}\r\n\r\n.b-fa-greater-than-equal::before {\r\n  content: "\\f532";\r\n}\r\n\r\n.b-fa-grip::before {\r\n  content: "\\f58d";\r\n}\r\n\r\n.b-fa-grip-horizontal::before {\r\n  content: "\\f58d";\r\n}\r\n\r\n.b-fa-grip-lines::before {\r\n  content: "\\f7a4";\r\n}\r\n\r\n.b-fa-grip-lines-vertical::before {\r\n  content: "\\f7a5";\r\n}\r\n\r\n.b-fa-grip-vertical::before {\r\n  content: "\\f58e";\r\n}\r\n\r\n.b-fa-group-arrows-rotate::before {\r\n  content: "\\e4f6";\r\n}\r\n\r\n.b-fa-guarani-sign::before {\r\n  content: "\\e19a";\r\n}\r\n\r\n.b-fa-guitar::before {\r\n  content: "\\f7a6";\r\n}\r\n\r\n.b-fa-gun::before {\r\n  content: "\\e19b";\r\n}\r\n\r\n.b-fa-h::before {\r\n  content: "H";\r\n}\r\n\r\n.b-fa-hammer::before {\r\n  content: "\\f6e3";\r\n}\r\n\r\n.b-fa-hamsa::before {\r\n  content: "\\f665";\r\n}\r\n\r\n.b-fa-hand::before {\r\n  content: "\\f256";\r\n}\r\n\r\n.b-fa-hand-paper::before {\r\n  content: "\\f256";\r\n}\r\n\r\n.b-fa-hand-back-fist::before {\r\n  content: "\\f255";\r\n}\r\n\r\n.b-fa-hand-rock::before {\r\n  content: "\\f255";\r\n}\r\n\r\n.b-fa-hand-dots::before {\r\n  content: "\\f461";\r\n}\r\n\r\n.b-fa-allergies::before {\r\n  content: "\\f461";\r\n}\r\n\r\n.b-fa-hand-fist::before {\r\n  content: "\\f6de";\r\n}\r\n\r\n.b-fa-fist-raised::before {\r\n  content: "\\f6de";\r\n}\r\n\r\n.b-fa-hand-holding::before {\r\n  content: "\\f4bd";\r\n}\r\n\r\n.b-fa-hand-holding-dollar::before {\r\n  content: "\\f4c0";\r\n}\r\n\r\n.b-fa-hand-holding-usd::before {\r\n  content: "\\f4c0";\r\n}\r\n\r\n.b-fa-hand-holding-droplet::before {\r\n  content: "\\f4c1";\r\n}\r\n\r\n.b-fa-hand-holding-water::before {\r\n  content: "\\f4c1";\r\n}\r\n\r\n.b-fa-hand-holding-hand::before {\r\n  content: "\\e4f7";\r\n}\r\n\r\n.b-fa-hand-holding-heart::before {\r\n  content: "\\f4be";\r\n}\r\n\r\n.b-fa-hand-holding-medical::before {\r\n  content: "\\e05c";\r\n}\r\n\r\n.b-fa-hand-lizard::before {\r\n  content: "\\f258";\r\n}\r\n\r\n.b-fa-hand-middle-finger::before {\r\n  content: "\\f806";\r\n}\r\n\r\n.b-fa-hand-peace::before {\r\n  content: "\\f25b";\r\n}\r\n\r\n.b-fa-hand-point-down::before {\r\n  content: "\\f0a7";\r\n}\r\n\r\n.b-fa-hand-point-left::before {\r\n  content: "\\f0a5";\r\n}\r\n\r\n.b-fa-hand-point-right::before {\r\n  content: "\\f0a4";\r\n}\r\n\r\n.b-fa-hand-point-up::before {\r\n  content: "\\f0a6";\r\n}\r\n\r\n.b-fa-hand-pointer::before {\r\n  content: "\\f25a";\r\n}\r\n\r\n.b-fa-hand-scissors::before {\r\n  content: "\\f257";\r\n}\r\n\r\n.b-fa-hand-sparkles::before {\r\n  content: "\\e05d";\r\n}\r\n\r\n.b-fa-hand-spock::before {\r\n  content: "\\f259";\r\n}\r\n\r\n.b-fa-handcuffs::before {\r\n  content: "\\e4f8";\r\n}\r\n\r\n.b-fa-hands::before {\r\n  content: "\\f2a7";\r\n}\r\n\r\n.b-fa-sign-language::before {\r\n  content: "\\f2a7";\r\n}\r\n\r\n.b-fa-signing::before {\r\n  content: "\\f2a7";\r\n}\r\n\r\n.b-fa-hands-asl-interpreting::before {\r\n  content: "\\f2a3";\r\n}\r\n\r\n.b-fa-american-sign-language-interpreting::before {\r\n  content: "\\f2a3";\r\n}\r\n\r\n.b-fa-asl-interpreting::before {\r\n  content: "\\f2a3";\r\n}\r\n\r\n.b-fa-hands-american-sign-language-interpreting::before {\r\n  content: "\\f2a3";\r\n}\r\n\r\n.b-fa-hands-bound::before {\r\n  content: "\\e4f9";\r\n}\r\n\r\n.b-fa-hands-bubbles::before {\r\n  content: "\\e05e";\r\n}\r\n\r\n.b-fa-hands-wash::before {\r\n  content: "\\e05e";\r\n}\r\n\r\n.b-fa-hands-clapping::before {\r\n  content: "\\e1a8";\r\n}\r\n\r\n.b-fa-hands-holding::before {\r\n  content: "\\f4c2";\r\n}\r\n\r\n.b-fa-hands-holding-child::before {\r\n  content: "\\e4fa";\r\n}\r\n\r\n.b-fa-hands-holding-circle::before {\r\n  content: "\\e4fb";\r\n}\r\n\r\n.b-fa-hands-praying::before {\r\n  content: "\\f684";\r\n}\r\n\r\n.b-fa-praying-hands::before {\r\n  content: "\\f684";\r\n}\r\n\r\n.b-fa-handshake::before {\r\n  content: "\\f2b5";\r\n}\r\n\r\n.b-fa-handshake-angle::before {\r\n  content: "\\f4c4";\r\n}\r\n\r\n.b-fa-hands-helping::before {\r\n  content: "\\f4c4";\r\n}\r\n\r\n.b-fa-handshake-simple::before {\r\n  content: "\\f4c6";\r\n}\r\n\r\n.b-fa-handshake-alt::before {\r\n  content: "\\f4c6";\r\n}\r\n\r\n.b-fa-handshake-simple-slash::before {\r\n  content: "\\e05f";\r\n}\r\n\r\n.b-fa-handshake-alt-slash::before {\r\n  content: "\\e05f";\r\n}\r\n\r\n.b-fa-handshake-slash::before {\r\n  content: "\\e060";\r\n}\r\n\r\n.b-fa-hanukiah::before {\r\n  content: "\\f6e6";\r\n}\r\n\r\n.b-fa-hard-drive::before {\r\n  content: "\\f0a0";\r\n}\r\n\r\n.b-fa-hdd::before {\r\n  content: "\\f0a0";\r\n}\r\n\r\n.b-fa-hashtag::before {\r\n  content: "\\#";\r\n}\r\n\r\n.b-fa-hat-cowboy::before {\r\n  content: "\\f8c0";\r\n}\r\n\r\n.b-fa-hat-cowboy-side::before {\r\n  content: "\\f8c1";\r\n}\r\n\r\n.b-fa-hat-wizard::before {\r\n  content: "\\f6e8";\r\n}\r\n\r\n.b-fa-head-side-cough::before {\r\n  content: "\\e061";\r\n}\r\n\r\n.b-fa-head-side-cough-slash::before {\r\n  content: "\\e062";\r\n}\r\n\r\n.b-fa-head-side-mask::before {\r\n  content: "\\e063";\r\n}\r\n\r\n.b-fa-head-side-virus::before {\r\n  content: "\\e064";\r\n}\r\n\r\n.b-fa-heading::before {\r\n  content: "\\f1dc";\r\n}\r\n\r\n.b-fa-header::before {\r\n  content: "\\f1dc";\r\n}\r\n\r\n.b-fa-headphones::before {\r\n  content: "\\f025";\r\n}\r\n\r\n.b-fa-headphones-simple::before {\r\n  content: "\\f58f";\r\n}\r\n\r\n.b-fa-headphones-alt::before {\r\n  content: "\\f58f";\r\n}\r\n\r\n.b-fa-headset::before {\r\n  content: "\\f590";\r\n}\r\n\r\n.b-fa-heart::before {\r\n  content: "\\f004";\r\n}\r\n\r\n.b-fa-heart-circle-bolt::before {\r\n  content: "\\e4fc";\r\n}\r\n\r\n.b-fa-heart-circle-check::before {\r\n  content: "\\e4fd";\r\n}\r\n\r\n.b-fa-heart-circle-exclamation::before {\r\n  content: "\\e4fe";\r\n}\r\n\r\n.b-fa-heart-circle-minus::before {\r\n  content: "\\e4ff";\r\n}\r\n\r\n.b-fa-heart-circle-plus::before {\r\n  content: "\\e500";\r\n}\r\n\r\n.b-fa-heart-circle-xmark::before {\r\n  content: "\\e501";\r\n}\r\n\r\n.b-fa-heart-crack::before {\r\n  content: "\\f7a9";\r\n}\r\n\r\n.b-fa-heart-broken::before {\r\n  content: "\\f7a9";\r\n}\r\n\r\n.b-fa-heart-pulse::before {\r\n  content: "\\f21e";\r\n}\r\n\r\n.b-fa-heartbeat::before {\r\n  content: "\\f21e";\r\n}\r\n\r\n.b-fa-helicopter::before {\r\n  content: "\\f533";\r\n}\r\n\r\n.b-fa-helicopter-symbol::before {\r\n  content: "\\e502";\r\n}\r\n\r\n.b-fa-helmet-safety::before {\r\n  content: "\\f807";\r\n}\r\n\r\n.b-fa-hard-hat::before {\r\n  content: "\\f807";\r\n}\r\n\r\n.b-fa-hat-hard::before {\r\n  content: "\\f807";\r\n}\r\n\r\n.b-fa-helmet-un::before {\r\n  content: "\\e503";\r\n}\r\n\r\n.b-fa-highlighter::before {\r\n  content: "\\f591";\r\n}\r\n\r\n.b-fa-hill-avalanche::before {\r\n  content: "\\e507";\r\n}\r\n\r\n.b-fa-hill-rockslide::before {\r\n  content: "\\e508";\r\n}\r\n\r\n.b-fa-hippo::before {\r\n  content: "\\f6ed";\r\n}\r\n\r\n.b-fa-hockey-puck::before {\r\n  content: "\\f453";\r\n}\r\n\r\n.b-fa-holly-berry::before {\r\n  content: "\\f7aa";\r\n}\r\n\r\n.b-fa-horse::before {\r\n  content: "\\f6f0";\r\n}\r\n\r\n.b-fa-horse-head::before {\r\n  content: "\\f7ab";\r\n}\r\n\r\n.b-fa-hospital::before {\r\n  content: "\\f0f8";\r\n}\r\n\r\n.b-fa-hospital-alt::before {\r\n  content: "\\f0f8";\r\n}\r\n\r\n.b-fa-hospital-wide::before {\r\n  content: "\\f0f8";\r\n}\r\n\r\n.b-fa-hospital-user::before {\r\n  content: "\\f80d";\r\n}\r\n\r\n.b-fa-hot-tub-person::before {\r\n  content: "\\f593";\r\n}\r\n\r\n.b-fa-hot-tub::before {\r\n  content: "\\f593";\r\n}\r\n\r\n.b-fa-hotdog::before {\r\n  content: "\\f80f";\r\n}\r\n\r\n.b-fa-hotel::before {\r\n  content: "\\f594";\r\n}\r\n\r\n.b-fa-hourglass::before {\r\n  content: "\\f254";\r\n}\r\n\r\n.b-fa-hourglass-2::before {\r\n  content: "\\f254";\r\n}\r\n\r\n.b-fa-hourglass-half::before {\r\n  content: "\\f254";\r\n}\r\n\r\n.b-fa-hourglass-empty::before {\r\n  content: "\\f252";\r\n}\r\n\r\n.b-fa-hourglass-end::before {\r\n  content: "\\f253";\r\n}\r\n\r\n.b-fa-hourglass-3::before {\r\n  content: "\\f253";\r\n}\r\n\r\n.b-fa-hourglass-start::before {\r\n  content: "\\f251";\r\n}\r\n\r\n.b-fa-hourglass-1::before {\r\n  content: "\\f251";\r\n}\r\n\r\n.b-fa-house::before {\r\n  content: "\\f015";\r\n}\r\n\r\n.b-fa-home::before {\r\n  content: "\\f015";\r\n}\r\n\r\n.b-fa-home-alt::before {\r\n  content: "\\f015";\r\n}\r\n\r\n.b-fa-home-lg-alt::before {\r\n  content: "\\f015";\r\n}\r\n\r\n.b-fa-house-chimney::before {\r\n  content: "\\e3af";\r\n}\r\n\r\n.b-fa-home-lg::before {\r\n  content: "\\e3af";\r\n}\r\n\r\n.b-fa-house-chimney-crack::before {\r\n  content: "\\f6f1";\r\n}\r\n\r\n.b-fa-house-damage::before {\r\n  content: "\\f6f1";\r\n}\r\n\r\n.b-fa-house-chimney-medical::before {\r\n  content: "\\f7f2";\r\n}\r\n\r\n.b-fa-clinic-medical::before {\r\n  content: "\\f7f2";\r\n}\r\n\r\n.b-fa-house-chimney-user::before {\r\n  content: "\\e065";\r\n}\r\n\r\n.b-fa-house-chimney-window::before {\r\n  content: "\\e00d";\r\n}\r\n\r\n.b-fa-house-circle-check::before {\r\n  content: "\\e509";\r\n}\r\n\r\n.b-fa-house-circle-exclamation::before {\r\n  content: "\\e50a";\r\n}\r\n\r\n.b-fa-house-circle-xmark::before {\r\n  content: "\\e50b";\r\n}\r\n\r\n.b-fa-house-crack::before {\r\n  content: "\\e3b1";\r\n}\r\n\r\n.b-fa-house-fire::before {\r\n  content: "\\e50c";\r\n}\r\n\r\n.b-fa-house-flag::before {\r\n  content: "\\e50d";\r\n}\r\n\r\n.b-fa-house-flood-water::before {\r\n  content: "\\e50e";\r\n}\r\n\r\n.b-fa-house-flood-water-circle-arrow-right::before {\r\n  content: "\\e50f";\r\n}\r\n\r\n.b-fa-house-laptop::before {\r\n  content: "\\e066";\r\n}\r\n\r\n.b-fa-laptop-house::before {\r\n  content: "\\e066";\r\n}\r\n\r\n.b-fa-house-lock::before {\r\n  content: "\\e510";\r\n}\r\n\r\n.b-fa-house-medical::before {\r\n  content: "\\e3b2";\r\n}\r\n\r\n.b-fa-house-medical-circle-check::before {\r\n  content: "\\e511";\r\n}\r\n\r\n.b-fa-house-medical-circle-exclamation::before {\r\n  content: "\\e512";\r\n}\r\n\r\n.b-fa-house-medical-circle-xmark::before {\r\n  content: "\\e513";\r\n}\r\n\r\n.b-fa-house-medical-flag::before {\r\n  content: "\\e514";\r\n}\r\n\r\n.b-fa-house-signal::before {\r\n  content: "\\e012";\r\n}\r\n\r\n.b-fa-house-tsunami::before {\r\n  content: "\\e515";\r\n}\r\n\r\n.b-fa-house-user::before {\r\n  content: "\\e1b0";\r\n}\r\n\r\n.b-fa-home-user::before {\r\n  content: "\\e1b0";\r\n}\r\n\r\n.b-fa-hryvnia-sign::before {\r\n  content: "\\f6f2";\r\n}\r\n\r\n.b-fa-hryvnia::before {\r\n  content: "\\f6f2";\r\n}\r\n\r\n.b-fa-hurricane::before {\r\n  content: "\\f751";\r\n}\r\n\r\n.b-fa-i::before {\r\n  content: "I";\r\n}\r\n\r\n.b-fa-i-cursor::before {\r\n  content: "\\f246";\r\n}\r\n\r\n.b-fa-ice-cream::before {\r\n  content: "\\f810";\r\n}\r\n\r\n.b-fa-icicles::before {\r\n  content: "\\f7ad";\r\n}\r\n\r\n.b-fa-icons::before {\r\n  content: "\\f86d";\r\n}\r\n\r\n.b-fa-heart-music-camera-bolt::before {\r\n  content: "\\f86d";\r\n}\r\n\r\n.b-fa-id-badge::before {\r\n  content: "\\f2c1";\r\n}\r\n\r\n.b-fa-id-card::before {\r\n  content: "\\f2c2";\r\n}\r\n\r\n.b-fa-drivers-license::before {\r\n  content: "\\f2c2";\r\n}\r\n\r\n.b-fa-id-card-clip::before {\r\n  content: "\\f47f";\r\n}\r\n\r\n.b-fa-id-card-alt::before {\r\n  content: "\\f47f";\r\n}\r\n\r\n.b-fa-igloo::before {\r\n  content: "\\f7ae";\r\n}\r\n\r\n.b-fa-image::before {\r\n  content: "\\f03e";\r\n}\r\n\r\n.b-fa-image-portrait::before {\r\n  content: "\\f3e0";\r\n}\r\n\r\n.b-fa-portrait::before {\r\n  content: "\\f3e0";\r\n}\r\n\r\n.b-fa-images::before {\r\n  content: "\\f302";\r\n}\r\n\r\n.b-fa-inbox::before {\r\n  content: "\\f01c";\r\n}\r\n\r\n.b-fa-indent::before {\r\n  content: "\\f03c";\r\n}\r\n\r\n.b-fa-indian-rupee-sign::before {\r\n  content: "\\e1bc";\r\n}\r\n\r\n.b-fa-indian-rupee::before {\r\n  content: "\\e1bc";\r\n}\r\n\r\n.b-fa-inr::before {\r\n  content: "\\e1bc";\r\n}\r\n\r\n.b-fa-industry::before {\r\n  content: "\\f275";\r\n}\r\n\r\n.b-fa-infinity::before {\r\n  content: "\\f534";\r\n}\r\n\r\n.b-fa-info::before {\r\n  content: "\\f129";\r\n}\r\n\r\n.b-fa-italic::before {\r\n  content: "\\f033";\r\n}\r\n\r\n.b-fa-j::before {\r\n  content: "J";\r\n}\r\n\r\n.b-fa-jar::before {\r\n  content: "\\e516";\r\n}\r\n\r\n.b-fa-jar-wheat::before {\r\n  content: "\\e517";\r\n}\r\n\r\n.b-fa-jedi::before {\r\n  content: "\\f669";\r\n}\r\n\r\n.b-fa-jet-fighter::before {\r\n  content: "\\f0fb";\r\n}\r\n\r\n.b-fa-fighter-jet::before {\r\n  content: "\\f0fb";\r\n}\r\n\r\n.b-fa-jet-fighter-up::before {\r\n  content: "\\e518";\r\n}\r\n\r\n.b-fa-joint::before {\r\n  content: "\\f595";\r\n}\r\n\r\n.b-fa-jug-detergent::before {\r\n  content: "\\e519";\r\n}\r\n\r\n.b-fa-k::before {\r\n  content: "K";\r\n}\r\n\r\n.b-fa-kaaba::before {\r\n  content: "\\f66b";\r\n}\r\n\r\n.b-fa-key::before {\r\n  content: "\\f084";\r\n}\r\n\r\n.b-fa-keyboard::before {\r\n  content: "\\f11c";\r\n}\r\n\r\n.b-fa-khanda::before {\r\n  content: "\\f66d";\r\n}\r\n\r\n.b-fa-kip-sign::before {\r\n  content: "\\e1c4";\r\n}\r\n\r\n.b-fa-kit-medical::before {\r\n  content: "\\f479";\r\n}\r\n\r\n.b-fa-first-aid::before {\r\n  content: "\\f479";\r\n}\r\n\r\n.b-fa-kitchen-set::before {\r\n  content: "\\e51a";\r\n}\r\n\r\n.b-fa-kiwi-bird::before {\r\n  content: "\\f535";\r\n}\r\n\r\n.b-fa-l::before {\r\n  content: "L";\r\n}\r\n\r\n.b-fa-land-mine-on::before {\r\n  content: "\\e51b";\r\n}\r\n\r\n.b-fa-landmark::before {\r\n  content: "\\f66f";\r\n}\r\n\r\n.b-fa-landmark-dome::before {\r\n  content: "\\f752";\r\n}\r\n\r\n.b-fa-landmark-alt::before {\r\n  content: "\\f752";\r\n}\r\n\r\n.b-fa-landmark-flag::before {\r\n  content: "\\e51c";\r\n}\r\n\r\n.b-fa-language::before {\r\n  content: "\\f1ab";\r\n}\r\n\r\n.b-fa-laptop::before {\r\n  content: "\\f109";\r\n}\r\n\r\n.b-fa-laptop-code::before {\r\n  content: "\\f5fc";\r\n}\r\n\r\n.b-fa-laptop-file::before {\r\n  content: "\\e51d";\r\n}\r\n\r\n.b-fa-laptop-medical::before {\r\n  content: "\\f812";\r\n}\r\n\r\n.b-fa-lari-sign::before {\r\n  content: "\\e1c8";\r\n}\r\n\r\n.b-fa-layer-group::before {\r\n  content: "\\f5fd";\r\n}\r\n\r\n.b-fa-leaf::before {\r\n  content: "\\f06c";\r\n}\r\n\r\n.b-fa-left-long::before {\r\n  content: "\\f30a";\r\n}\r\n\r\n.b-fa-long-arrow-alt-left::before {\r\n  content: "\\f30a";\r\n}\r\n\r\n.b-fa-left-right::before {\r\n  content: "\\f337";\r\n}\r\n\r\n.b-fa-arrows-alt-h::before {\r\n  content: "\\f337";\r\n}\r\n\r\n.b-fa-lemon::before {\r\n  content: "\\f094";\r\n}\r\n\r\n.b-fa-less-than::before {\r\n  content: "\\<";\r\n}\r\n\r\n.b-fa-less-than-equal::before {\r\n  content: "\\f537";\r\n}\r\n\r\n.b-fa-life-ring::before {\r\n  content: "\\f1cd";\r\n}\r\n\r\n.b-fa-lightbulb::before {\r\n  content: "\\f0eb";\r\n}\r\n\r\n.b-fa-lines-leaning::before {\r\n  content: "\\e51e";\r\n}\r\n\r\n.b-fa-link::before {\r\n  content: "\\f0c1";\r\n}\r\n\r\n.b-fa-chain::before {\r\n  content: "\\f0c1";\r\n}\r\n\r\n.b-fa-link-slash::before {\r\n  content: "\\f127";\r\n}\r\n\r\n.b-fa-chain-broken::before {\r\n  content: "\\f127";\r\n}\r\n\r\n.b-fa-chain-slash::before {\r\n  content: "\\f127";\r\n}\r\n\r\n.b-fa-unlink::before {\r\n  content: "\\f127";\r\n}\r\n\r\n.b-fa-lira-sign::before {\r\n  content: "\\f195";\r\n}\r\n\r\n.b-fa-list::before {\r\n  content: "\\f03a";\r\n}\r\n\r\n.b-fa-list-squares::before {\r\n  content: "\\f03a";\r\n}\r\n\r\n.b-fa-list-check::before {\r\n  content: "\\f0ae";\r\n}\r\n\r\n.b-fa-tasks::before {\r\n  content: "\\f0ae";\r\n}\r\n\r\n.b-fa-list-ol::before {\r\n  content: "\\f0cb";\r\n}\r\n\r\n.b-fa-list-1-2::before {\r\n  content: "\\f0cb";\r\n}\r\n\r\n.b-fa-list-numeric::before {\r\n  content: "\\f0cb";\r\n}\r\n\r\n.b-fa-list-ul::before {\r\n  content: "\\f0ca";\r\n}\r\n\r\n.b-fa-list-dots::before {\r\n  content: "\\f0ca";\r\n}\r\n\r\n.b-fa-litecoin-sign::before {\r\n  content: "\\e1d3";\r\n}\r\n\r\n.b-fa-location-arrow::before {\r\n  content: "\\f124";\r\n}\r\n\r\n.b-fa-location-crosshairs::before {\r\n  content: "\\f601";\r\n}\r\n\r\n.b-fa-location::before {\r\n  content: "\\f601";\r\n}\r\n\r\n.b-fa-location-dot::before {\r\n  content: "\\f3c5";\r\n}\r\n\r\n.b-fa-map-marker-alt::before {\r\n  content: "\\f3c5";\r\n}\r\n\r\n.b-fa-location-pin::before {\r\n  content: "\\f041";\r\n}\r\n\r\n.b-fa-map-marker::before {\r\n  content: "\\f041";\r\n}\r\n\r\n.b-fa-location-pin-lock::before {\r\n  content: "\\e51f";\r\n}\r\n\r\n.b-fa-lock::before {\r\n  content: "\\f023";\r\n}\r\n\r\n.b-fa-lock-open::before {\r\n  content: "\\f3c1";\r\n}\r\n\r\n.b-fa-locust::before {\r\n  content: "\\e520";\r\n}\r\n\r\n.b-fa-lungs::before {\r\n  content: "\\f604";\r\n}\r\n\r\n.b-fa-lungs-virus::before {\r\n  content: "\\e067";\r\n}\r\n\r\n.b-fa-m::before {\r\n  content: "M";\r\n}\r\n\r\n.b-fa-magnet::before {\r\n  content: "\\f076";\r\n}\r\n\r\n.b-fa-magnifying-glass::before {\r\n  content: "\\f002";\r\n}\r\n\r\n.b-fa-search::before {\r\n  content: "\\f002";\r\n}\r\n\r\n.b-fa-magnifying-glass-arrow-right::before {\r\n  content: "\\e521";\r\n}\r\n\r\n.b-fa-magnifying-glass-chart::before {\r\n  content: "\\e522";\r\n}\r\n\r\n.b-fa-magnifying-glass-dollar::before {\r\n  content: "\\f688";\r\n}\r\n\r\n.b-fa-search-dollar::before {\r\n  content: "\\f688";\r\n}\r\n\r\n.b-fa-magnifying-glass-location::before {\r\n  content: "\\f689";\r\n}\r\n\r\n.b-fa-search-location::before {\r\n  content: "\\f689";\r\n}\r\n\r\n.b-fa-magnifying-glass-minus::before {\r\n  content: "\\f010";\r\n}\r\n\r\n.b-fa-search-minus::before {\r\n  content: "\\f010";\r\n}\r\n\r\n.b-fa-magnifying-glass-plus::before {\r\n  content: "\\f00e";\r\n}\r\n\r\n.b-fa-search-plus::before {\r\n  content: "\\f00e";\r\n}\r\n\r\n.b-fa-manat-sign::before {\r\n  content: "\\e1d5";\r\n}\r\n\r\n.b-fa-map::before {\r\n  content: "\\f279";\r\n}\r\n\r\n.b-fa-map-location::before {\r\n  content: "\\f59f";\r\n}\r\n\r\n.b-fa-map-marked::before {\r\n  content: "\\f59f";\r\n}\r\n\r\n.b-fa-map-location-dot::before {\r\n  content: "\\f5a0";\r\n}\r\n\r\n.b-fa-map-marked-alt::before {\r\n  content: "\\f5a0";\r\n}\r\n\r\n.b-fa-map-pin::before {\r\n  content: "\\f276";\r\n}\r\n\r\n.b-fa-marker::before {\r\n  content: "\\f5a1";\r\n}\r\n\r\n.b-fa-mars::before {\r\n  content: "\\f222";\r\n}\r\n\r\n.b-fa-mars-and-venus::before {\r\n  content: "\\f224";\r\n}\r\n\r\n.b-fa-mars-and-venus-burst::before {\r\n  content: "\\e523";\r\n}\r\n\r\n.b-fa-mars-double::before {\r\n  content: "\\f227";\r\n}\r\n\r\n.b-fa-mars-stroke::before {\r\n  content: "\\f229";\r\n}\r\n\r\n.b-fa-mars-stroke-right::before {\r\n  content: "\\f22b";\r\n}\r\n\r\n.b-fa-mars-stroke-h::before {\r\n  content: "\\f22b";\r\n}\r\n\r\n.b-fa-mars-stroke-up::before {\r\n  content: "\\f22a";\r\n}\r\n\r\n.b-fa-mars-stroke-v::before {\r\n  content: "\\f22a";\r\n}\r\n\r\n.b-fa-martini-glass::before {\r\n  content: "\\f57b";\r\n}\r\n\r\n.b-fa-glass-martini-alt::before {\r\n  content: "\\f57b";\r\n}\r\n\r\n.b-fa-martini-glass-citrus::before {\r\n  content: "\\f561";\r\n}\r\n\r\n.b-fa-cocktail::before {\r\n  content: "\\f561";\r\n}\r\n\r\n.b-fa-martini-glass-empty::before {\r\n  content: "\\f000";\r\n}\r\n\r\n.b-fa-glass-martini::before {\r\n  content: "\\f000";\r\n}\r\n\r\n.b-fa-mask::before {\r\n  content: "\\f6fa";\r\n}\r\n\r\n.b-fa-mask-face::before {\r\n  content: "\\e1d7";\r\n}\r\n\r\n.b-fa-mask-ventilator::before {\r\n  content: "\\e524";\r\n}\r\n\r\n.b-fa-masks-theater::before {\r\n  content: "\\f630";\r\n}\r\n\r\n.b-fa-theater-masks::before {\r\n  content: "\\f630";\r\n}\r\n\r\n.b-fa-mattress-pillow::before {\r\n  content: "\\e525";\r\n}\r\n\r\n.b-fa-maximize::before {\r\n  content: "\\f31e";\r\n}\r\n\r\n.b-fa-expand-arrows-alt::before {\r\n  content: "\\f31e";\r\n}\r\n\r\n.b-fa-medal::before {\r\n  content: "\\f5a2";\r\n}\r\n\r\n.b-fa-memory::before {\r\n  content: "\\f538";\r\n}\r\n\r\n.b-fa-menorah::before {\r\n  content: "\\f676";\r\n}\r\n\r\n.b-fa-mercury::before {\r\n  content: "\\f223";\r\n}\r\n\r\n.b-fa-message::before {\r\n  content: "\\f27a";\r\n}\r\n\r\n.b-fa-comment-alt::before {\r\n  content: "\\f27a";\r\n}\r\n\r\n.b-fa-meteor::before {\r\n  content: "\\f753";\r\n}\r\n\r\n.b-fa-microchip::before {\r\n  content: "\\f2db";\r\n}\r\n\r\n.b-fa-microphone::before {\r\n  content: "\\f130";\r\n}\r\n\r\n.b-fa-microphone-lines::before {\r\n  content: "\\f3c9";\r\n}\r\n\r\n.b-fa-microphone-alt::before {\r\n  content: "\\f3c9";\r\n}\r\n\r\n.b-fa-microphone-lines-slash::before {\r\n  content: "\\f539";\r\n}\r\n\r\n.b-fa-microphone-alt-slash::before {\r\n  content: "\\f539";\r\n}\r\n\r\n.b-fa-microphone-slash::before {\r\n  content: "\\f131";\r\n}\r\n\r\n.b-fa-microscope::before {\r\n  content: "\\f610";\r\n}\r\n\r\n.b-fa-mill-sign::before {\r\n  content: "\\e1ed";\r\n}\r\n\r\n.b-fa-minimize::before {\r\n  content: "\\f78c";\r\n}\r\n\r\n.b-fa-compress-arrows-alt::before {\r\n  content: "\\f78c";\r\n}\r\n\r\n.b-fa-minus::before {\r\n  content: "\\f068";\r\n}\r\n\r\n.b-fa-subtract::before {\r\n  content: "\\f068";\r\n}\r\n\r\n.b-fa-mitten::before {\r\n  content: "\\f7b5";\r\n}\r\n\r\n.b-fa-mobile::before {\r\n  content: "\\f3ce";\r\n}\r\n\r\n.b-fa-mobile-android::before {\r\n  content: "\\f3ce";\r\n}\r\n\r\n.b-fa-mobile-phone::before {\r\n  content: "\\f3ce";\r\n}\r\n\r\n.b-fa-mobile-button::before {\r\n  content: "\\f10b";\r\n}\r\n\r\n.b-fa-mobile-retro::before {\r\n  content: "\\e527";\r\n}\r\n\r\n.b-fa-mobile-screen::before {\r\n  content: "\\f3cf";\r\n}\r\n\r\n.b-fa-mobile-android-alt::before {\r\n  content: "\\f3cf";\r\n}\r\n\r\n.b-fa-mobile-screen-button::before {\r\n  content: "\\f3cd";\r\n}\r\n\r\n.b-fa-mobile-alt::before {\r\n  content: "\\f3cd";\r\n}\r\n\r\n.b-fa-money-bill::before {\r\n  content: "\\f0d6";\r\n}\r\n\r\n.b-fa-money-bill-1::before {\r\n  content: "\\f3d1";\r\n}\r\n\r\n.b-fa-money-bill-alt::before {\r\n  content: "\\f3d1";\r\n}\r\n\r\n.b-fa-money-bill-1-wave::before {\r\n  content: "\\f53b";\r\n}\r\n\r\n.b-fa-money-bill-wave-alt::before {\r\n  content: "\\f53b";\r\n}\r\n\r\n.b-fa-money-bill-transfer::before {\r\n  content: "\\e528";\r\n}\r\n\r\n.b-fa-money-bill-trend-up::before {\r\n  content: "\\e529";\r\n}\r\n\r\n.b-fa-money-bill-wave::before {\r\n  content: "\\f53a";\r\n}\r\n\r\n.b-fa-money-bill-wheat::before {\r\n  content: "\\e52a";\r\n}\r\n\r\n.b-fa-money-bills::before {\r\n  content: "\\e1f3";\r\n}\r\n\r\n.b-fa-money-check::before {\r\n  content: "\\f53c";\r\n}\r\n\r\n.b-fa-money-check-dollar::before {\r\n  content: "\\f53d";\r\n}\r\n\r\n.b-fa-money-check-alt::before {\r\n  content: "\\f53d";\r\n}\r\n\r\n.b-fa-monument::before {\r\n  content: "\\f5a6";\r\n}\r\n\r\n.b-fa-moon::before {\r\n  content: "\\f186";\r\n}\r\n\r\n.b-fa-mortar-pestle::before {\r\n  content: "\\f5a7";\r\n}\r\n\r\n.b-fa-mosque::before {\r\n  content: "\\f678";\r\n}\r\n\r\n.b-fa-mosquito::before {\r\n  content: "\\e52b";\r\n}\r\n\r\n.b-fa-mosquito-net::before {\r\n  content: "\\e52c";\r\n}\r\n\r\n.b-fa-motorcycle::before {\r\n  content: "\\f21c";\r\n}\r\n\r\n.b-fa-mound::before {\r\n  content: "\\e52d";\r\n}\r\n\r\n.b-fa-mountain::before {\r\n  content: "\\f6fc";\r\n}\r\n\r\n.b-fa-mountain-city::before {\r\n  content: "\\e52e";\r\n}\r\n\r\n.b-fa-mountain-sun::before {\r\n  content: "\\e52f";\r\n}\r\n\r\n.b-fa-mug-hot::before {\r\n  content: "\\f7b6";\r\n}\r\n\r\n.b-fa-mug-saucer::before {\r\n  content: "\\f0f4";\r\n}\r\n\r\n.b-fa-coffee::before {\r\n  content: "\\f0f4";\r\n}\r\n\r\n.b-fa-music::before {\r\n  content: "\\f001";\r\n}\r\n\r\n.b-fa-n::before {\r\n  content: "N";\r\n}\r\n\r\n.b-fa-naira-sign::before {\r\n  content: "\\e1f6";\r\n}\r\n\r\n.b-fa-network-wired::before {\r\n  content: "\\f6ff";\r\n}\r\n\r\n.b-fa-neuter::before {\r\n  content: "\\f22c";\r\n}\r\n\r\n.b-fa-newspaper::before {\r\n  content: "\\f1ea";\r\n}\r\n\r\n.b-fa-not-equal::before {\r\n  content: "\\f53e";\r\n}\r\n\r\n.b-fa-note-sticky::before {\r\n  content: "\\f249";\r\n}\r\n\r\n.b-fa-sticky-note::before {\r\n  content: "\\f249";\r\n}\r\n\r\n.b-fa-notes-medical::before {\r\n  content: "\\f481";\r\n}\r\n\r\n.b-fa-o::before {\r\n  content: "O";\r\n}\r\n\r\n.b-fa-object-group::before {\r\n  content: "\\f247";\r\n}\r\n\r\n.b-fa-object-ungroup::before {\r\n  content: "\\f248";\r\n}\r\n\r\n.b-fa-oil-can::before {\r\n  content: "\\f613";\r\n}\r\n\r\n.b-fa-oil-well::before {\r\n  content: "\\e532";\r\n}\r\n\r\n.b-fa-om::before {\r\n  content: "\\f679";\r\n}\r\n\r\n.b-fa-otter::before {\r\n  content: "\\f700";\r\n}\r\n\r\n.b-fa-outdent::before {\r\n  content: "\\f03b";\r\n}\r\n\r\n.b-fa-dedent::before {\r\n  content: "\\f03b";\r\n}\r\n\r\n.b-fa-p::before {\r\n  content: "P";\r\n}\r\n\r\n.b-fa-pager::before {\r\n  content: "\\f815";\r\n}\r\n\r\n.b-fa-paint-roller::before {\r\n  content: "\\f5aa";\r\n}\r\n\r\n.b-fa-paintbrush::before {\r\n  content: "\\f1fc";\r\n}\r\n\r\n.b-fa-paint-brush::before {\r\n  content: "\\f1fc";\r\n}\r\n\r\n.b-fa-palette::before {\r\n  content: "\\f53f";\r\n}\r\n\r\n.b-fa-pallet::before {\r\n  content: "\\f482";\r\n}\r\n\r\n.b-fa-panorama::before {\r\n  content: "\\e209";\r\n}\r\n\r\n.b-fa-paper-plane::before {\r\n  content: "\\f1d8";\r\n}\r\n\r\n.b-fa-paperclip::before {\r\n  content: "\\f0c6";\r\n}\r\n\r\n.b-fa-parachute-box::before {\r\n  content: "\\f4cd";\r\n}\r\n\r\n.b-fa-paragraph::before {\r\n  content: "\\f1dd";\r\n}\r\n\r\n.b-fa-passport::before {\r\n  content: "\\f5ab";\r\n}\r\n\r\n.b-fa-paste::before {\r\n  content: "\\f0ea";\r\n}\r\n\r\n.b-fa-file-clipboard::before {\r\n  content: "\\f0ea";\r\n}\r\n\r\n.b-fa-pause::before {\r\n  content: "\\f04c";\r\n}\r\n\r\n.b-fa-paw::before {\r\n  content: "\\f1b0";\r\n}\r\n\r\n.b-fa-peace::before {\r\n  content: "\\f67c";\r\n}\r\n\r\n.b-fa-pen::before {\r\n  content: "\\f304";\r\n}\r\n\r\n.b-fa-pen-clip::before {\r\n  content: "\\f305";\r\n}\r\n\r\n.b-fa-pen-alt::before {\r\n  content: "\\f305";\r\n}\r\n\r\n.b-fa-pen-fancy::before {\r\n  content: "\\f5ac";\r\n}\r\n\r\n.b-fa-pen-nib::before {\r\n  content: "\\f5ad";\r\n}\r\n\r\n.b-fa-pen-ruler::before {\r\n  content: "\\f5ae";\r\n}\r\n\r\n.b-fa-pencil-ruler::before {\r\n  content: "\\f5ae";\r\n}\r\n\r\n.b-fa-pen-to-square::before {\r\n  content: "\\f044";\r\n}\r\n\r\n.b-fa-edit::before {\r\n  content: "\\f044";\r\n}\r\n\r\n.b-fa-pencil::before {\r\n  content: "\\f303";\r\n}\r\n\r\n.b-fa-pencil-alt::before {\r\n  content: "\\f303";\r\n}\r\n\r\n.b-fa-people-arrows-left-right::before {\r\n  content: "\\e068";\r\n}\r\n\r\n.b-fa-people-arrows::before {\r\n  content: "\\e068";\r\n}\r\n\r\n.b-fa-people-carry-box::before {\r\n  content: "\\f4ce";\r\n}\r\n\r\n.b-fa-people-carry::before {\r\n  content: "\\f4ce";\r\n}\r\n\r\n.b-fa-people-group::before {\r\n  content: "\\e533";\r\n}\r\n\r\n.b-fa-people-line::before {\r\n  content: "\\e534";\r\n}\r\n\r\n.b-fa-people-pulling::before {\r\n  content: "\\e535";\r\n}\r\n\r\n.b-fa-people-robbery::before {\r\n  content: "\\e536";\r\n}\r\n\r\n.b-fa-people-roof::before {\r\n  content: "\\e537";\r\n}\r\n\r\n.b-fa-pepper-hot::before {\r\n  content: "\\f816";\r\n}\r\n\r\n.b-fa-percent::before {\r\n  content: "\\%";\r\n}\r\n\r\n.b-fa-percentage::before {\r\n  content: "\\%";\r\n}\r\n\r\n.b-fa-person::before {\r\n  content: "\\f183";\r\n}\r\n\r\n.b-fa-male::before {\r\n  content: "\\f183";\r\n}\r\n\r\n.b-fa-person-arrow-down-to-line::before {\r\n  content: "\\e538";\r\n}\r\n\r\n.b-fa-person-arrow-up-from-line::before {\r\n  content: "\\e539";\r\n}\r\n\r\n.b-fa-person-biking::before {\r\n  content: "\\f84a";\r\n}\r\n\r\n.b-fa-biking::before {\r\n  content: "\\f84a";\r\n}\r\n\r\n.b-fa-person-booth::before {\r\n  content: "\\f756";\r\n}\r\n\r\n.b-fa-person-breastfeeding::before {\r\n  content: "\\e53a";\r\n}\r\n\r\n.b-fa-person-burst::before {\r\n  content: "\\e53b";\r\n}\r\n\r\n.b-fa-person-cane::before {\r\n  content: "\\e53c";\r\n}\r\n\r\n.b-fa-person-chalkboard::before {\r\n  content: "\\e53d";\r\n}\r\n\r\n.b-fa-person-circle-check::before {\r\n  content: "\\e53e";\r\n}\r\n\r\n.b-fa-person-circle-exclamation::before {\r\n  content: "\\e53f";\r\n}\r\n\r\n.b-fa-person-circle-minus::before {\r\n  content: "\\e540";\r\n}\r\n\r\n.b-fa-person-circle-plus::before {\r\n  content: "\\e541";\r\n}\r\n\r\n.b-fa-person-circle-question::before {\r\n  content: "\\e542";\r\n}\r\n\r\n.b-fa-person-circle-xmark::before {\r\n  content: "\\e543";\r\n}\r\n\r\n.b-fa-person-digging::before {\r\n  content: "\\f85e";\r\n}\r\n\r\n.b-fa-digging::before {\r\n  content: "\\f85e";\r\n}\r\n\r\n.b-fa-person-dots-from-line::before {\r\n  content: "\\f470";\r\n}\r\n\r\n.b-fa-diagnoses::before {\r\n  content: "\\f470";\r\n}\r\n\r\n.b-fa-person-dress::before {\r\n  content: "\\f182";\r\n}\r\n\r\n.b-fa-female::before {\r\n  content: "\\f182";\r\n}\r\n\r\n.b-fa-person-dress-burst::before {\r\n  content: "\\e544";\r\n}\r\n\r\n.b-fa-person-drowning::before {\r\n  content: "\\e545";\r\n}\r\n\r\n.b-fa-person-falling::before {\r\n  content: "\\e546";\r\n}\r\n\r\n.b-fa-person-falling-burst::before {\r\n  content: "\\e547";\r\n}\r\n\r\n.b-fa-person-half-dress::before {\r\n  content: "\\e548";\r\n}\r\n\r\n.b-fa-person-harassing::before {\r\n  content: "\\e549";\r\n}\r\n\r\n.b-fa-person-hiking::before {\r\n  content: "\\f6ec";\r\n}\r\n\r\n.b-fa-hiking::before {\r\n  content: "\\f6ec";\r\n}\r\n\r\n.b-fa-person-military-pointing::before {\r\n  content: "\\e54a";\r\n}\r\n\r\n.b-fa-person-military-rifle::before {\r\n  content: "\\e54b";\r\n}\r\n\r\n.b-fa-person-military-to-person::before {\r\n  content: "\\e54c";\r\n}\r\n\r\n.b-fa-person-praying::before {\r\n  content: "\\f683";\r\n}\r\n\r\n.b-fa-pray::before {\r\n  content: "\\f683";\r\n}\r\n\r\n.b-fa-person-pregnant::before {\r\n  content: "\\e31e";\r\n}\r\n\r\n.b-fa-person-rays::before {\r\n  content: "\\e54d";\r\n}\r\n\r\n.b-fa-person-rifle::before {\r\n  content: "\\e54e";\r\n}\r\n\r\n.b-fa-person-running::before {\r\n  content: "\\f70c";\r\n}\r\n\r\n.b-fa-running::before {\r\n  content: "\\f70c";\r\n}\r\n\r\n.b-fa-person-shelter::before {\r\n  content: "\\e54f";\r\n}\r\n\r\n.b-fa-person-skating::before {\r\n  content: "\\f7c5";\r\n}\r\n\r\n.b-fa-skating::before {\r\n  content: "\\f7c5";\r\n}\r\n\r\n.b-fa-person-skiing::before {\r\n  content: "\\f7c9";\r\n}\r\n\r\n.b-fa-skiing::before {\r\n  content: "\\f7c9";\r\n}\r\n\r\n.b-fa-person-skiing-nordic::before {\r\n  content: "\\f7ca";\r\n}\r\n\r\n.b-fa-skiing-nordic::before {\r\n  content: "\\f7ca";\r\n}\r\n\r\n.b-fa-person-snowboarding::before {\r\n  content: "\\f7ce";\r\n}\r\n\r\n.b-fa-snowboarding::before {\r\n  content: "\\f7ce";\r\n}\r\n\r\n.b-fa-person-swimming::before {\r\n  content: "\\f5c4";\r\n}\r\n\r\n.b-fa-swimmer::before {\r\n  content: "\\f5c4";\r\n}\r\n\r\n.b-fa-person-through-window::before {\r\n  content: "\\e433";\r\n}\r\n\r\n.b-fa-person-walking::before {\r\n  content: "\\f554";\r\n}\r\n\r\n.b-fa-walking::before {\r\n  content: "\\f554";\r\n}\r\n\r\n.b-fa-person-walking-arrow-loop-left::before {\r\n  content: "\\e551";\r\n}\r\n\r\n.b-fa-person-walking-arrow-right::before {\r\n  content: "\\e552";\r\n}\r\n\r\n.b-fa-person-walking-dashed-line-arrow-right::before {\r\n  content: "\\e553";\r\n}\r\n\r\n.b-fa-person-walking-luggage::before {\r\n  content: "\\e554";\r\n}\r\n\r\n.b-fa-person-walking-with-cane::before {\r\n  content: "\\f29d";\r\n}\r\n\r\n.b-fa-blind::before {\r\n  content: "\\f29d";\r\n}\r\n\r\n.b-fa-peseta-sign::before {\r\n  content: "\\e221";\r\n}\r\n\r\n.b-fa-peso-sign::before {\r\n  content: "\\e222";\r\n}\r\n\r\n.b-fa-phone::before {\r\n  content: "\\f095";\r\n}\r\n\r\n.b-fa-phone-flip::before {\r\n  content: "\\f879";\r\n}\r\n\r\n.b-fa-phone-alt::before {\r\n  content: "\\f879";\r\n}\r\n\r\n.b-fa-phone-slash::before {\r\n  content: "\\f3dd";\r\n}\r\n\r\n.b-fa-phone-volume::before {\r\n  content: "\\f2a0";\r\n}\r\n\r\n.b-fa-volume-control-phone::before {\r\n  content: "\\f2a0";\r\n}\r\n\r\n.b-fa-photo-film::before {\r\n  content: "\\f87c";\r\n}\r\n\r\n.b-fa-photo-video::before {\r\n  content: "\\f87c";\r\n}\r\n\r\n.b-fa-piggy-bank::before {\r\n  content: "\\f4d3";\r\n}\r\n\r\n.b-fa-pills::before {\r\n  content: "\\f484";\r\n}\r\n\r\n.b-fa-pizza-slice::before {\r\n  content: "\\f818";\r\n}\r\n\r\n.b-fa-place-of-worship::before {\r\n  content: "\\f67f";\r\n}\r\n\r\n.b-fa-plane::before {\r\n  content: "\\f072";\r\n}\r\n\r\n.b-fa-plane-arrival::before {\r\n  content: "\\f5af";\r\n}\r\n\r\n.b-fa-plane-circle-check::before {\r\n  content: "\\e555";\r\n}\r\n\r\n.b-fa-plane-circle-exclamation::before {\r\n  content: "\\e556";\r\n}\r\n\r\n.b-fa-plane-circle-xmark::before {\r\n  content: "\\e557";\r\n}\r\n\r\n.b-fa-plane-departure::before {\r\n  content: "\\f5b0";\r\n}\r\n\r\n.b-fa-plane-lock::before {\r\n  content: "\\e558";\r\n}\r\n\r\n.b-fa-plane-slash::before {\r\n  content: "\\e069";\r\n}\r\n\r\n.b-fa-plane-up::before {\r\n  content: "\\e22d";\r\n}\r\n\r\n.b-fa-plant-wilt::before {\r\n  content: "\\e43b";\r\n}\r\n\r\n.b-fa-plate-wheat::before {\r\n  content: "\\e55a";\r\n}\r\n\r\n.b-fa-play::before {\r\n  content: "\\f04b";\r\n}\r\n\r\n.b-fa-plug::before {\r\n  content: "\\f1e6";\r\n}\r\n\r\n.b-fa-plug-circle-bolt::before {\r\n  content: "\\e55b";\r\n}\r\n\r\n.b-fa-plug-circle-check::before {\r\n  content: "\\e55c";\r\n}\r\n\r\n.b-fa-plug-circle-exclamation::before {\r\n  content: "\\e55d";\r\n}\r\n\r\n.b-fa-plug-circle-minus::before {\r\n  content: "\\e55e";\r\n}\r\n\r\n.b-fa-plug-circle-plus::before {\r\n  content: "\\e55f";\r\n}\r\n\r\n.b-fa-plug-circle-xmark::before {\r\n  content: "\\e560";\r\n}\r\n\r\n.b-fa-plus::before {\r\n  content: "\\+";\r\n}\r\n\r\n.b-fa-add::before {\r\n  content: "\\+";\r\n}\r\n\r\n.b-fa-plus-minus::before {\r\n  content: "\\e43c";\r\n}\r\n\r\n.b-fa-podcast::before {\r\n  content: "\\f2ce";\r\n}\r\n\r\n.b-fa-poo::before {\r\n  content: "\\f2fe";\r\n}\r\n\r\n.b-fa-poo-storm::before {\r\n  content: "\\f75a";\r\n}\r\n\r\n.b-fa-poo-bolt::before {\r\n  content: "\\f75a";\r\n}\r\n\r\n.b-fa-poop::before {\r\n  content: "\\f619";\r\n}\r\n\r\n.b-fa-power-off::before {\r\n  content: "\\f011";\r\n}\r\n\r\n.b-fa-prescription::before {\r\n  content: "\\f5b1";\r\n}\r\n\r\n.b-fa-prescription-bottle::before {\r\n  content: "\\f485";\r\n}\r\n\r\n.b-fa-prescription-bottle-medical::before {\r\n  content: "\\f486";\r\n}\r\n\r\n.b-fa-prescription-bottle-alt::before {\r\n  content: "\\f486";\r\n}\r\n\r\n.b-fa-print::before {\r\n  content: "\\f02f";\r\n}\r\n\r\n.b-fa-pump-medical::before {\r\n  content: "\\e06a";\r\n}\r\n\r\n.b-fa-pump-soap::before {\r\n  content: "\\e06b";\r\n}\r\n\r\n.b-fa-puzzle-piece::before {\r\n  content: "\\f12e";\r\n}\r\n\r\n.b-fa-q::before {\r\n  content: "Q";\r\n}\r\n\r\n.b-fa-qrcode::before {\r\n  content: "\\f029";\r\n}\r\n\r\n.b-fa-question::before {\r\n  content: "\\?";\r\n}\r\n\r\n.b-fa-quote-left::before {\r\n  content: "\\f10d";\r\n}\r\n\r\n.b-fa-quote-left-alt::before {\r\n  content: "\\f10d";\r\n}\r\n\r\n.b-fa-quote-right::before {\r\n  content: "\\f10e";\r\n}\r\n\r\n.b-fa-quote-right-alt::before {\r\n  content: "\\f10e";\r\n}\r\n\r\n.b-fa-r::before {\r\n  content: "R";\r\n}\r\n\r\n.b-fa-radiation::before {\r\n  content: "\\f7b9";\r\n}\r\n\r\n.b-fa-radio::before {\r\n  content: "\\f8d7";\r\n}\r\n\r\n.b-fa-rainbow::before {\r\n  content: "\\f75b";\r\n}\r\n\r\n.b-fa-ranking-star::before {\r\n  content: "\\e561";\r\n}\r\n\r\n.b-fa-receipt::before {\r\n  content: "\\f543";\r\n}\r\n\r\n.b-fa-record-vinyl::before {\r\n  content: "\\f8d9";\r\n}\r\n\r\n.b-fa-rectangle-ad::before {\r\n  content: "\\f641";\r\n}\r\n\r\n.b-fa-ad::before {\r\n  content: "\\f641";\r\n}\r\n\r\n.b-fa-rectangle-list::before {\r\n  content: "\\f022";\r\n}\r\n\r\n.b-fa-list-alt::before {\r\n  content: "\\f022";\r\n}\r\n\r\n.b-fa-rectangle-xmark::before {\r\n  content: "\\f410";\r\n}\r\n\r\n.b-fa-rectangle-times::before {\r\n  content: "\\f410";\r\n}\r\n\r\n.b-fa-times-rectangle::before {\r\n  content: "\\f410";\r\n}\r\n\r\n.b-fa-window-close::before {\r\n  content: "\\f410";\r\n}\r\n\r\n.b-fa-recycle::before {\r\n  content: "\\f1b8";\r\n}\r\n\r\n.b-fa-registered::before {\r\n  content: "\\f25d";\r\n}\r\n\r\n.b-fa-repeat::before {\r\n  content: "\\f363";\r\n}\r\n\r\n.b-fa-reply::before {\r\n  content: "\\f3e5";\r\n}\r\n\r\n.b-fa-mail-reply::before {\r\n  content: "\\f3e5";\r\n}\r\n\r\n.b-fa-reply-all::before {\r\n  content: "\\f122";\r\n}\r\n\r\n.b-fa-mail-reply-all::before {\r\n  content: "\\f122";\r\n}\r\n\r\n.b-fa-republican::before {\r\n  content: "\\f75e";\r\n}\r\n\r\n.b-fa-restroom::before {\r\n  content: "\\f7bd";\r\n}\r\n\r\n.b-fa-retweet::before {\r\n  content: "\\f079";\r\n}\r\n\r\n.b-fa-ribbon::before {\r\n  content: "\\f4d6";\r\n}\r\n\r\n.b-fa-right-from-bracket::before {\r\n  content: "\\f2f5";\r\n}\r\n\r\n.b-fa-sign-out-alt::before {\r\n  content: "\\f2f5";\r\n}\r\n\r\n.b-fa-right-left::before {\r\n  content: "\\f362";\r\n}\r\n\r\n.b-fa-exchange-alt::before {\r\n  content: "\\f362";\r\n}\r\n\r\n.b-fa-right-long::before {\r\n  content: "\\f30b";\r\n}\r\n\r\n.b-fa-long-arrow-alt-right::before {\r\n  content: "\\f30b";\r\n}\r\n\r\n.b-fa-right-to-bracket::before {\r\n  content: "\\f2f6";\r\n}\r\n\r\n.b-fa-sign-in-alt::before {\r\n  content: "\\f2f6";\r\n}\r\n\r\n.b-fa-ring::before {\r\n  content: "\\f70b";\r\n}\r\n\r\n.b-fa-road::before {\r\n  content: "\\f018";\r\n}\r\n\r\n.b-fa-road-barrier::before {\r\n  content: "\\e562";\r\n}\r\n\r\n.b-fa-road-bridge::before {\r\n  content: "\\e563";\r\n}\r\n\r\n.b-fa-road-circle-check::before {\r\n  content: "\\e564";\r\n}\r\n\r\n.b-fa-road-circle-exclamation::before {\r\n  content: "\\e565";\r\n}\r\n\r\n.b-fa-road-circle-xmark::before {\r\n  content: "\\e566";\r\n}\r\n\r\n.b-fa-road-lock::before {\r\n  content: "\\e567";\r\n}\r\n\r\n.b-fa-road-spikes::before {\r\n  content: "\\e568";\r\n}\r\n\r\n.b-fa-robot::before {\r\n  content: "\\f544";\r\n}\r\n\r\n.b-fa-rocket::before {\r\n  content: "\\f135";\r\n}\r\n\r\n.b-fa-rotate::before {\r\n  content: "\\f2f1";\r\n}\r\n\r\n.b-fa-sync-alt::before {\r\n  content: "\\f2f1";\r\n}\r\n\r\n.b-fa-rotate-left::before {\r\n  content: "\\f2ea";\r\n}\r\n\r\n.b-fa-rotate-back::before {\r\n  content: "\\f2ea";\r\n}\r\n\r\n.b-fa-rotate-backward::before {\r\n  content: "\\f2ea";\r\n}\r\n\r\n.b-fa-undo-alt::before {\r\n  content: "\\f2ea";\r\n}\r\n\r\n.b-fa-rotate-right::before {\r\n  content: "\\f2f9";\r\n}\r\n\r\n.b-fa-redo-alt::before {\r\n  content: "\\f2f9";\r\n}\r\n\r\n.b-fa-rotate-forward::before {\r\n  content: "\\f2f9";\r\n}\r\n\r\n.b-fa-route::before {\r\n  content: "\\f4d7";\r\n}\r\n\r\n.b-fa-rss::before {\r\n  content: "\\f09e";\r\n}\r\n\r\n.b-fa-feed::before {\r\n  content: "\\f09e";\r\n}\r\n\r\n.b-fa-ruble-sign::before {\r\n  content: "\\f158";\r\n}\r\n\r\n.b-fa-rouble::before {\r\n  content: "\\f158";\r\n}\r\n\r\n.b-fa-rub::before {\r\n  content: "\\f158";\r\n}\r\n\r\n.b-fa-ruble::before {\r\n  content: "\\f158";\r\n}\r\n\r\n.b-fa-rug::before {\r\n  content: "\\e569";\r\n}\r\n\r\n.b-fa-ruler::before {\r\n  content: "\\f545";\r\n}\r\n\r\n.b-fa-ruler-combined::before {\r\n  content: "\\f546";\r\n}\r\n\r\n.b-fa-ruler-horizontal::before {\r\n  content: "\\f547";\r\n}\r\n\r\n.b-fa-ruler-vertical::before {\r\n  content: "\\f548";\r\n}\r\n\r\n.b-fa-rupee-sign::before {\r\n  content: "\\f156";\r\n}\r\n\r\n.b-fa-rupee::before {\r\n  content: "\\f156";\r\n}\r\n\r\n.b-fa-rupiah-sign::before {\r\n  content: "\\e23d";\r\n}\r\n\r\n.b-fa-s::before {\r\n  content: "S";\r\n}\r\n\r\n.b-fa-sack-dollar::before {\r\n  content: "\\f81d";\r\n}\r\n\r\n.b-fa-sack-xmark::before {\r\n  content: "\\e56a";\r\n}\r\n\r\n.b-fa-sailboat::before {\r\n  content: "\\e445";\r\n}\r\n\r\n.b-fa-satellite::before {\r\n  content: "\\f7bf";\r\n}\r\n\r\n.b-fa-satellite-dish::before {\r\n  content: "\\f7c0";\r\n}\r\n\r\n.b-fa-scale-balanced::before {\r\n  content: "\\f24e";\r\n}\r\n\r\n.b-fa-balance-scale::before {\r\n  content: "\\f24e";\r\n}\r\n\r\n.b-fa-scale-unbalanced::before {\r\n  content: "\\f515";\r\n}\r\n\r\n.b-fa-balance-scale-left::before {\r\n  content: "\\f515";\r\n}\r\n\r\n.b-fa-scale-unbalanced-flip::before {\r\n  content: "\\f516";\r\n}\r\n\r\n.b-fa-balance-scale-right::before {\r\n  content: "\\f516";\r\n}\r\n\r\n.b-fa-school::before {\r\n  content: "\\f549";\r\n}\r\n\r\n.b-fa-school-circle-check::before {\r\n  content: "\\e56b";\r\n}\r\n\r\n.b-fa-school-circle-exclamation::before {\r\n  content: "\\e56c";\r\n}\r\n\r\n.b-fa-school-circle-xmark::before {\r\n  content: "\\e56d";\r\n}\r\n\r\n.b-fa-school-flag::before {\r\n  content: "\\e56e";\r\n}\r\n\r\n.b-fa-school-lock::before {\r\n  content: "\\e56f";\r\n}\r\n\r\n.b-fa-scissors::before {\r\n  content: "\\f0c4";\r\n}\r\n\r\n.b-fa-cut::before {\r\n  content: "\\f0c4";\r\n}\r\n\r\n.b-fa-screwdriver::before {\r\n  content: "\\f54a";\r\n}\r\n\r\n.b-fa-screwdriver-wrench::before {\r\n  content: "\\f7d9";\r\n}\r\n\r\n.b-fa-tools::before {\r\n  content: "\\f7d9";\r\n}\r\n\r\n.b-fa-scroll::before {\r\n  content: "\\f70e";\r\n}\r\n\r\n.b-fa-scroll-torah::before {\r\n  content: "\\f6a0";\r\n}\r\n\r\n.b-fa-torah::before {\r\n  content: "\\f6a0";\r\n}\r\n\r\n.b-fa-sd-card::before {\r\n  content: "\\f7c2";\r\n}\r\n\r\n.b-fa-section::before {\r\n  content: "\\e447";\r\n}\r\n\r\n.b-fa-seedling::before {\r\n  content: "\\f4d8";\r\n}\r\n\r\n.b-fa-sprout::before {\r\n  content: "\\f4d8";\r\n}\r\n\r\n.b-fa-server::before {\r\n  content: "\\f233";\r\n}\r\n\r\n.b-fa-shapes::before {\r\n  content: "\\f61f";\r\n}\r\n\r\n.b-fa-triangle-circle-square::before {\r\n  content: "\\f61f";\r\n}\r\n\r\n.b-fa-share::before {\r\n  content: "\\f064";\r\n}\r\n\r\n.b-fa-arrow-turn-right::before {\r\n  content: "\\f064";\r\n}\r\n\r\n.b-fa-mail-forward::before {\r\n  content: "\\f064";\r\n}\r\n\r\n.b-fa-share-from-square::before {\r\n  content: "\\f14d";\r\n}\r\n\r\n.b-fa-share-square::before {\r\n  content: "\\f14d";\r\n}\r\n\r\n.b-fa-share-nodes::before {\r\n  content: "\\f1e0";\r\n}\r\n\r\n.b-fa-share-alt::before {\r\n  content: "\\f1e0";\r\n}\r\n\r\n.b-fa-sheet-plastic::before {\r\n  content: "\\e571";\r\n}\r\n\r\n.b-fa-shekel-sign::before {\r\n  content: "\\f20b";\r\n}\r\n\r\n.b-fa-ils::before {\r\n  content: "\\f20b";\r\n}\r\n\r\n.b-fa-shekel::before {\r\n  content: "\\f20b";\r\n}\r\n\r\n.b-fa-sheqel::before {\r\n  content: "\\f20b";\r\n}\r\n\r\n.b-fa-sheqel-sign::before {\r\n  content: "\\f20b";\r\n}\r\n\r\n.b-fa-shield::before {\r\n  content: "\\f132";\r\n}\r\n\r\n.b-fa-shield-blank::before {\r\n  content: "\\f132";\r\n}\r\n\r\n.b-fa-shield-cat::before {\r\n  content: "\\e572";\r\n}\r\n\r\n.b-fa-shield-dog::before {\r\n  content: "\\e573";\r\n}\r\n\r\n.b-fa-shield-halved::before {\r\n  content: "\\f3ed";\r\n}\r\n\r\n.b-fa-shield-alt::before {\r\n  content: "\\f3ed";\r\n}\r\n\r\n.b-fa-shield-heart::before {\r\n  content: "\\e574";\r\n}\r\n\r\n.b-fa-shield-virus::before {\r\n  content: "\\e06c";\r\n}\r\n\r\n.b-fa-ship::before {\r\n  content: "\\f21a";\r\n}\r\n\r\n.b-fa-shirt::before {\r\n  content: "\\f553";\r\n}\r\n\r\n.b-fa-t-shirt::before {\r\n  content: "\\f553";\r\n}\r\n\r\n.b-fa-tshirt::before {\r\n  content: "\\f553";\r\n}\r\n\r\n.b-fa-shoe-prints::before {\r\n  content: "\\f54b";\r\n}\r\n\r\n.b-fa-shop::before {\r\n  content: "\\f54f";\r\n}\r\n\r\n.b-fa-store-alt::before {\r\n  content: "\\f54f";\r\n}\r\n\r\n.b-fa-shop-lock::before {\r\n  content: "\\e4a5";\r\n}\r\n\r\n.b-fa-shop-slash::before {\r\n  content: "\\e070";\r\n}\r\n\r\n.b-fa-store-alt-slash::before {\r\n  content: "\\e070";\r\n}\r\n\r\n.b-fa-shower::before {\r\n  content: "\\f2cc";\r\n}\r\n\r\n.b-fa-shrimp::before {\r\n  content: "\\e448";\r\n}\r\n\r\n.b-fa-shuffle::before {\r\n  content: "\\f074";\r\n}\r\n\r\n.b-fa-random::before {\r\n  content: "\\f074";\r\n}\r\n\r\n.b-fa-shuttle-space::before {\r\n  content: "\\f197";\r\n}\r\n\r\n.b-fa-space-shuttle::before {\r\n  content: "\\f197";\r\n}\r\n\r\n.b-fa-sign-hanging::before {\r\n  content: "\\f4d9";\r\n}\r\n\r\n.b-fa-sign::before {\r\n  content: "\\f4d9";\r\n}\r\n\r\n.b-fa-signal::before {\r\n  content: "\\f012";\r\n}\r\n\r\n.b-fa-signal-5::before {\r\n  content: "\\f012";\r\n}\r\n\r\n.b-fa-signal-perfect::before {\r\n  content: "\\f012";\r\n}\r\n\r\n.b-fa-signature::before {\r\n  content: "\\f5b7";\r\n}\r\n\r\n.b-fa-signs-post::before {\r\n  content: "\\f277";\r\n}\r\n\r\n.b-fa-map-signs::before {\r\n  content: "\\f277";\r\n}\r\n\r\n.b-fa-sim-card::before {\r\n  content: "\\f7c4";\r\n}\r\n\r\n.b-fa-sink::before {\r\n  content: "\\e06d";\r\n}\r\n\r\n.b-fa-sitemap::before {\r\n  content: "\\f0e8";\r\n}\r\n\r\n.b-fa-skull::before {\r\n  content: "\\f54c";\r\n}\r\n\r\n.b-fa-skull-crossbones::before {\r\n  content: "\\f714";\r\n}\r\n\r\n.b-fa-slash::before {\r\n  content: "\\f715";\r\n}\r\n\r\n.b-fa-sleigh::before {\r\n  content: "\\f7cc";\r\n}\r\n\r\n.b-fa-sliders::before {\r\n  content: "\\f1de";\r\n}\r\n\r\n.b-fa-sliders-h::before {\r\n  content: "\\f1de";\r\n}\r\n\r\n.b-fa-smog::before {\r\n  content: "\\f75f";\r\n}\r\n\r\n.b-fa-smoking::before {\r\n  content: "\\f48d";\r\n}\r\n\r\n.b-fa-snowflake::before {\r\n  content: "\\f2dc";\r\n}\r\n\r\n.b-fa-snowman::before {\r\n  content: "\\f7d0";\r\n}\r\n\r\n.b-fa-snowplow::before {\r\n  content: "\\f7d2";\r\n}\r\n\r\n.b-fa-soap::before {\r\n  content: "\\e06e";\r\n}\r\n\r\n.b-fa-socks::before {\r\n  content: "\\f696";\r\n}\r\n\r\n.b-fa-solar-panel::before {\r\n  content: "\\f5ba";\r\n}\r\n\r\n.b-fa-sort::before {\r\n  content: "\\f0dc";\r\n}\r\n\r\n.b-fa-unsorted::before {\r\n  content: "\\f0dc";\r\n}\r\n\r\n.b-fa-sort-down::before {\r\n  content: "\\f0dd";\r\n}\r\n\r\n.b-fa-sort-desc::before {\r\n  content: "\\f0dd";\r\n}\r\n\r\n.b-fa-sort-up::before {\r\n  content: "\\f0de";\r\n}\r\n\r\n.b-fa-sort-asc::before {\r\n  content: "\\f0de";\r\n}\r\n\r\n.b-fa-spa::before {\r\n  content: "\\f5bb";\r\n}\r\n\r\n.b-fa-spaghetti-monster-flying::before {\r\n  content: "\\f67b";\r\n}\r\n\r\n.b-fa-pastafarianism::before {\r\n  content: "\\f67b";\r\n}\r\n\r\n.b-fa-spell-check::before {\r\n  content: "\\f891";\r\n}\r\n\r\n.b-fa-spider::before {\r\n  content: "\\f717";\r\n}\r\n\r\n.b-fa-spinner::before {\r\n  content: "\\f110";\r\n}\r\n\r\n.b-fa-splotch::before {\r\n  content: "\\f5bc";\r\n}\r\n\r\n.b-fa-spoon::before {\r\n  content: "\\f2e5";\r\n}\r\n\r\n.b-fa-utensil-spoon::before {\r\n  content: "\\f2e5";\r\n}\r\n\r\n.b-fa-spray-can::before {\r\n  content: "\\f5bd";\r\n}\r\n\r\n.b-fa-spray-can-sparkles::before {\r\n  content: "\\f5d0";\r\n}\r\n\r\n.b-fa-air-freshener::before {\r\n  content: "\\f5d0";\r\n}\r\n\r\n.b-fa-square::before {\r\n  content: "\\f0c8";\r\n}\r\n\r\n.b-fa-square-arrow-up-right::before {\r\n  content: "\\f14c";\r\n}\r\n\r\n.b-fa-external-link-square::before {\r\n  content: "\\f14c";\r\n}\r\n\r\n.b-fa-square-caret-down::before {\r\n  content: "\\f150";\r\n}\r\n\r\n.b-fa-caret-square-down::before {\r\n  content: "\\f150";\r\n}\r\n\r\n.b-fa-square-caret-left::before {\r\n  content: "\\f191";\r\n}\r\n\r\n.b-fa-caret-square-left::before {\r\n  content: "\\f191";\r\n}\r\n\r\n.b-fa-square-caret-right::before {\r\n  content: "\\f152";\r\n}\r\n\r\n.b-fa-caret-square-right::before {\r\n  content: "\\f152";\r\n}\r\n\r\n.b-fa-square-caret-up::before {\r\n  content: "\\f151";\r\n}\r\n\r\n.b-fa-caret-square-up::before {\r\n  content: "\\f151";\r\n}\r\n\r\n.b-fa-square-check::before {\r\n  content: "\\f14a";\r\n}\r\n\r\n.b-fa-check-square::before {\r\n  content: "\\f14a";\r\n}\r\n\r\n.b-fa-square-envelope::before {\r\n  content: "\\f199";\r\n}\r\n\r\n.b-fa-envelope-square::before {\r\n  content: "\\f199";\r\n}\r\n\r\n.b-fa-square-full::before {\r\n  content: "\\f45c";\r\n}\r\n\r\n.b-fa-square-h::before {\r\n  content: "\\f0fd";\r\n}\r\n\r\n.b-fa-h-square::before {\r\n  content: "\\f0fd";\r\n}\r\n\r\n.b-fa-square-minus::before {\r\n  content: "\\f146";\r\n}\r\n\r\n.b-fa-minus-square::before {\r\n  content: "\\f146";\r\n}\r\n\r\n.b-fa-square-nfi::before {\r\n  content: "\\e576";\r\n}\r\n\r\n.b-fa-square-parking::before {\r\n  content: "\\f540";\r\n}\r\n\r\n.b-fa-parking::before {\r\n  content: "\\f540";\r\n}\r\n\r\n.b-fa-square-pen::before {\r\n  content: "\\f14b";\r\n}\r\n\r\n.b-fa-pen-square::before {\r\n  content: "\\f14b";\r\n}\r\n\r\n.b-fa-pencil-square::before {\r\n  content: "\\f14b";\r\n}\r\n\r\n.b-fa-square-person-confined::before {\r\n  content: "\\e577";\r\n}\r\n\r\n.b-fa-square-phone::before {\r\n  content: "\\f098";\r\n}\r\n\r\n.b-fa-phone-square::before {\r\n  content: "\\f098";\r\n}\r\n\r\n.b-fa-square-phone-flip::before {\r\n  content: "\\f87b";\r\n}\r\n\r\n.b-fa-phone-square-alt::before {\r\n  content: "\\f87b";\r\n}\r\n\r\n.b-fa-square-plus::before {\r\n  content: "\\f0fe";\r\n}\r\n\r\n.b-fa-plus-square::before {\r\n  content: "\\f0fe";\r\n}\r\n\r\n.b-fa-square-poll-horizontal::before {\r\n  content: "\\f682";\r\n}\r\n\r\n.b-fa-poll-h::before {\r\n  content: "\\f682";\r\n}\r\n\r\n.b-fa-square-poll-vertical::before {\r\n  content: "\\f681";\r\n}\r\n\r\n.b-fa-poll::before {\r\n  content: "\\f681";\r\n}\r\n\r\n.b-fa-square-root-variable::before {\r\n  content: "\\f698";\r\n}\r\n\r\n.b-fa-square-root-alt::before {\r\n  content: "\\f698";\r\n}\r\n\r\n.b-fa-square-rss::before {\r\n  content: "\\f143";\r\n}\r\n\r\n.b-fa-rss-square::before {\r\n  content: "\\f143";\r\n}\r\n\r\n.b-fa-square-share-nodes::before {\r\n  content: "\\f1e1";\r\n}\r\n\r\n.b-fa-share-alt-square::before {\r\n  content: "\\f1e1";\r\n}\r\n\r\n.b-fa-square-up-right::before {\r\n  content: "\\f360";\r\n}\r\n\r\n.b-fa-external-link-square-alt::before {\r\n  content: "\\f360";\r\n}\r\n\r\n.b-fa-square-virus::before {\r\n  content: "\\e578";\r\n}\r\n\r\n.b-fa-square-xmark::before {\r\n  content: "\\f2d3";\r\n}\r\n\r\n.b-fa-times-square::before {\r\n  content: "\\f2d3";\r\n}\r\n\r\n.b-fa-xmark-square::before {\r\n  content: "\\f2d3";\r\n}\r\n\r\n.b-fa-staff-aesculapius::before {\r\n  content: "\\e579";\r\n}\r\n\r\n.b-fa-rod-asclepius::before {\r\n  content: "\\e579";\r\n}\r\n\r\n.b-fa-rod-snake::before {\r\n  content: "\\e579";\r\n}\r\n\r\n.b-fa-staff-snake::before {\r\n  content: "\\e579";\r\n}\r\n\r\n.b-fa-stairs::before {\r\n  content: "\\e289";\r\n}\r\n\r\n.b-fa-stamp::before {\r\n  content: "\\f5bf";\r\n}\r\n\r\n.b-fa-star::before {\r\n  content: "\\f005";\r\n}\r\n\r\n.b-fa-star-and-crescent::before {\r\n  content: "\\f699";\r\n}\r\n\r\n.b-fa-star-half::before {\r\n  content: "\\f089";\r\n}\r\n\r\n.b-fa-star-half-stroke::before {\r\n  content: "\\f5c0";\r\n}\r\n\r\n.b-fa-star-half-alt::before {\r\n  content: "\\f5c0";\r\n}\r\n\r\n.b-fa-star-of-david::before {\r\n  content: "\\f69a";\r\n}\r\n\r\n.b-fa-star-of-life::before {\r\n  content: "\\f621";\r\n}\r\n\r\n.b-fa-sterling-sign::before {\r\n  content: "\\f154";\r\n}\r\n\r\n.b-fa-gbp::before {\r\n  content: "\\f154";\r\n}\r\n\r\n.b-fa-pound-sign::before {\r\n  content: "\\f154";\r\n}\r\n\r\n.b-fa-stethoscope::before {\r\n  content: "\\f0f1";\r\n}\r\n\r\n.b-fa-stop::before {\r\n  content: "\\f04d";\r\n}\r\n\r\n.b-fa-stopwatch::before {\r\n  content: "\\f2f2";\r\n}\r\n\r\n.b-fa-stopwatch-20::before {\r\n  content: "\\e06f";\r\n}\r\n\r\n.b-fa-store::before {\r\n  content: "\\f54e";\r\n}\r\n\r\n.b-fa-store-slash::before {\r\n  content: "\\e071";\r\n}\r\n\r\n.b-fa-street-view::before {\r\n  content: "\\f21d";\r\n}\r\n\r\n.b-fa-strikethrough::before {\r\n  content: "\\f0cc";\r\n}\r\n\r\n.b-fa-stroopwafel::before {\r\n  content: "\\f551";\r\n}\r\n\r\n.b-fa-subscript::before {\r\n  content: "\\f12c";\r\n}\r\n\r\n.b-fa-suitcase::before {\r\n  content: "\\f0f2";\r\n}\r\n\r\n.b-fa-suitcase-medical::before {\r\n  content: "\\f0fa";\r\n}\r\n\r\n.b-fa-medkit::before {\r\n  content: "\\f0fa";\r\n}\r\n\r\n.b-fa-suitcase-rolling::before {\r\n  content: "\\f5c1";\r\n}\r\n\r\n.b-fa-sun::before {\r\n  content: "\\f185";\r\n}\r\n\r\n.b-fa-sun-plant-wilt::before {\r\n  content: "\\e57a";\r\n}\r\n\r\n.b-fa-superscript::before {\r\n  content: "\\f12b";\r\n}\r\n\r\n.b-fa-swatchbook::before {\r\n  content: "\\f5c3";\r\n}\r\n\r\n.b-fa-synagogue::before {\r\n  content: "\\f69b";\r\n}\r\n\r\n.b-fa-syringe::before {\r\n  content: "\\f48e";\r\n}\r\n\r\n.b-fa-t::before {\r\n  content: "T";\r\n}\r\n\r\n.b-fa-table::before {\r\n  content: "\\f0ce";\r\n}\r\n\r\n.b-fa-table-cells::before {\r\n  content: "\\f00a";\r\n}\r\n\r\n.b-fa-th::before {\r\n  content: "\\f00a";\r\n}\r\n\r\n.b-fa-table-cells-large::before {\r\n  content: "\\f009";\r\n}\r\n\r\n.b-fa-th-large::before {\r\n  content: "\\f009";\r\n}\r\n\r\n.b-fa-table-columns::before {\r\n  content: "\\f0db";\r\n}\r\n\r\n.b-fa-columns::before {\r\n  content: "\\f0db";\r\n}\r\n\r\n.b-fa-table-list::before {\r\n  content: "\\f00b";\r\n}\r\n\r\n.b-fa-th-list::before {\r\n  content: "\\f00b";\r\n}\r\n\r\n.b-fa-table-tennis-paddle-ball::before {\r\n  content: "\\f45d";\r\n}\r\n\r\n.b-fa-ping-pong-paddle-ball::before {\r\n  content: "\\f45d";\r\n}\r\n\r\n.b-fa-table-tennis::before {\r\n  content: "\\f45d";\r\n}\r\n\r\n.b-fa-tablet::before {\r\n  content: "\\f3fb";\r\n}\r\n\r\n.b-fa-tablet-android::before {\r\n  content: "\\f3fb";\r\n}\r\n\r\n.b-fa-tablet-button::before {\r\n  content: "\\f10a";\r\n}\r\n\r\n.b-fa-tablet-screen-button::before {\r\n  content: "\\f3fa";\r\n}\r\n\r\n.b-fa-tablet-alt::before {\r\n  content: "\\f3fa";\r\n}\r\n\r\n.b-fa-tablets::before {\r\n  content: "\\f490";\r\n}\r\n\r\n.b-fa-tachograph-digital::before {\r\n  content: "\\f566";\r\n}\r\n\r\n.b-fa-digital-tachograph::before {\r\n  content: "\\f566";\r\n}\r\n\r\n.b-fa-tag::before {\r\n  content: "\\f02b";\r\n}\r\n\r\n.b-fa-tags::before {\r\n  content: "\\f02c";\r\n}\r\n\r\n.b-fa-tape::before {\r\n  content: "\\f4db";\r\n}\r\n\r\n.b-fa-tarp::before {\r\n  content: "\\e57b";\r\n}\r\n\r\n.b-fa-tarp-droplet::before {\r\n  content: "\\e57c";\r\n}\r\n\r\n.b-fa-taxi::before {\r\n  content: "\\f1ba";\r\n}\r\n\r\n.b-fa-cab::before {\r\n  content: "\\f1ba";\r\n}\r\n\r\n.b-fa-teeth::before {\r\n  content: "\\f62e";\r\n}\r\n\r\n.b-fa-teeth-open::before {\r\n  content: "\\f62f";\r\n}\r\n\r\n.b-fa-temperature-arrow-down::before {\r\n  content: "\\e03f";\r\n}\r\n\r\n.b-fa-temperature-down::before {\r\n  content: "\\e03f";\r\n}\r\n\r\n.b-fa-temperature-arrow-up::before {\r\n  content: "\\e040";\r\n}\r\n\r\n.b-fa-temperature-up::before {\r\n  content: "\\e040";\r\n}\r\n\r\n.b-fa-temperature-empty::before {\r\n  content: "\\f2cb";\r\n}\r\n\r\n.b-fa-temperature-0::before {\r\n  content: "\\f2cb";\r\n}\r\n\r\n.b-fa-thermometer-0::before {\r\n  content: "\\f2cb";\r\n}\r\n\r\n.b-fa-thermometer-empty::before {\r\n  content: "\\f2cb";\r\n}\r\n\r\n.b-fa-temperature-full::before {\r\n  content: "\\f2c7";\r\n}\r\n\r\n.b-fa-temperature-4::before {\r\n  content: "\\f2c7";\r\n}\r\n\r\n.b-fa-thermometer-4::before {\r\n  content: "\\f2c7";\r\n}\r\n\r\n.b-fa-thermometer-full::before {\r\n  content: "\\f2c7";\r\n}\r\n\r\n.b-fa-temperature-half::before {\r\n  content: "\\f2c9";\r\n}\r\n\r\n.b-fa-temperature-2::before {\r\n  content: "\\f2c9";\r\n}\r\n\r\n.b-fa-thermometer-2::before {\r\n  content: "\\f2c9";\r\n}\r\n\r\n.b-fa-thermometer-half::before {\r\n  content: "\\f2c9";\r\n}\r\n\r\n.b-fa-temperature-high::before {\r\n  content: "\\f769";\r\n}\r\n\r\n.b-fa-temperature-low::before {\r\n  content: "\\f76b";\r\n}\r\n\r\n.b-fa-temperature-quarter::before {\r\n  content: "\\f2ca";\r\n}\r\n\r\n.b-fa-temperature-1::before {\r\n  content: "\\f2ca";\r\n}\r\n\r\n.b-fa-thermometer-1::before {\r\n  content: "\\f2ca";\r\n}\r\n\r\n.b-fa-thermometer-quarter::before {\r\n  content: "\\f2ca";\r\n}\r\n\r\n.b-fa-temperature-three-quarters::before {\r\n  content: "\\f2c8";\r\n}\r\n\r\n.b-fa-temperature-3::before {\r\n  content: "\\f2c8";\r\n}\r\n\r\n.b-fa-thermometer-3::before {\r\n  content: "\\f2c8";\r\n}\r\n\r\n.b-fa-thermometer-three-quarters::before {\r\n  content: "\\f2c8";\r\n}\r\n\r\n.b-fa-tenge-sign::before {\r\n  content: "\\f7d7";\r\n}\r\n\r\n.b-fa-tenge::before {\r\n  content: "\\f7d7";\r\n}\r\n\r\n.b-fa-tent::before {\r\n  content: "\\e57d";\r\n}\r\n\r\n.b-fa-tent-arrow-down-to-line::before {\r\n  content: "\\e57e";\r\n}\r\n\r\n.b-fa-tent-arrow-left-right::before {\r\n  content: "\\e57f";\r\n}\r\n\r\n.b-fa-tent-arrow-turn-left::before {\r\n  content: "\\e580";\r\n}\r\n\r\n.b-fa-tent-arrows-down::before {\r\n  content: "\\e581";\r\n}\r\n\r\n.b-fa-tents::before {\r\n  content: "\\e582";\r\n}\r\n\r\n.b-fa-terminal::before {\r\n  content: "\\f120";\r\n}\r\n\r\n.b-fa-text-height::before {\r\n  content: "\\f034";\r\n}\r\n\r\n.b-fa-text-slash::before {\r\n  content: "\\f87d";\r\n}\r\n\r\n.b-fa-remove-format::before {\r\n  content: "\\f87d";\r\n}\r\n\r\n.b-fa-text-width::before {\r\n  content: "\\f035";\r\n}\r\n\r\n.b-fa-thermometer::before {\r\n  content: "\\f491";\r\n}\r\n\r\n.b-fa-thumbs-down::before {\r\n  content: "\\f165";\r\n}\r\n\r\n.b-fa-thumbs-up::before {\r\n  content: "\\f164";\r\n}\r\n\r\n.b-fa-thumbtack::before {\r\n  content: "\\f08d";\r\n}\r\n\r\n.b-fa-thumb-tack::before {\r\n  content: "\\f08d";\r\n}\r\n\r\n.b-fa-ticket::before {\r\n  content: "\\f145";\r\n}\r\n\r\n.b-fa-ticket-simple::before {\r\n  content: "\\f3ff";\r\n}\r\n\r\n.b-fa-ticket-alt::before {\r\n  content: "\\f3ff";\r\n}\r\n\r\n.b-fa-timeline::before {\r\n  content: "\\e29c";\r\n}\r\n\r\n.b-fa-toggle-off::before {\r\n  content: "\\f204";\r\n}\r\n\r\n.b-fa-toggle-on::before {\r\n  content: "\\f205";\r\n}\r\n\r\n.b-fa-toilet::before {\r\n  content: "\\f7d8";\r\n}\r\n\r\n.b-fa-toilet-paper::before {\r\n  content: "\\f71e";\r\n}\r\n\r\n.b-fa-toilet-paper-slash::before {\r\n  content: "\\e072";\r\n}\r\n\r\n.b-fa-toilet-portable::before {\r\n  content: "\\e583";\r\n}\r\n\r\n.b-fa-toilets-portable::before {\r\n  content: "\\e584";\r\n}\r\n\r\n.b-fa-toolbox::before {\r\n  content: "\\f552";\r\n}\r\n\r\n.b-fa-tooth::before {\r\n  content: "\\f5c9";\r\n}\r\n\r\n.b-fa-torii-gate::before {\r\n  content: "\\f6a1";\r\n}\r\n\r\n.b-fa-tornado::before {\r\n  content: "\\f76f";\r\n}\r\n\r\n.b-fa-tower-broadcast::before {\r\n  content: "\\f519";\r\n}\r\n\r\n.b-fa-broadcast-tower::before {\r\n  content: "\\f519";\r\n}\r\n\r\n.b-fa-tower-cell::before {\r\n  content: "\\e585";\r\n}\r\n\r\n.b-fa-tower-observation::before {\r\n  content: "\\e586";\r\n}\r\n\r\n.b-fa-tractor::before {\r\n  content: "\\f722";\r\n}\r\n\r\n.b-fa-trademark::before {\r\n  content: "\\f25c";\r\n}\r\n\r\n.b-fa-traffic-light::before {\r\n  content: "\\f637";\r\n}\r\n\r\n.b-fa-trailer::before {\r\n  content: "\\e041";\r\n}\r\n\r\n.b-fa-train::before {\r\n  content: "\\f238";\r\n}\r\n\r\n.b-fa-train-subway::before {\r\n  content: "\\f239";\r\n}\r\n\r\n.b-fa-subway::before {\r\n  content: "\\f239";\r\n}\r\n\r\n.b-fa-train-tram::before {\r\n  content: "\\f7da";\r\n}\r\n\r\n.b-fa-tram::before {\r\n  content: "\\f7da";\r\n}\r\n\r\n.b-fa-transgender::before {\r\n  content: "\\f225";\r\n}\r\n\r\n.b-fa-transgender-alt::before {\r\n  content: "\\f225";\r\n}\r\n\r\n.b-fa-trash::before {\r\n  content: "\\f1f8";\r\n}\r\n\r\n.b-fa-trash-arrow-up::before {\r\n  content: "\\f829";\r\n}\r\n\r\n.b-fa-trash-restore::before {\r\n  content: "\\f829";\r\n}\r\n\r\n.b-fa-trash-can::before {\r\n  content: "\\f2ed";\r\n}\r\n\r\n.b-fa-trash-alt::before {\r\n  content: "\\f2ed";\r\n}\r\n\r\n.b-fa-trash-can-arrow-up::before {\r\n  content: "\\f82a";\r\n}\r\n\r\n.b-fa-trash-restore-alt::before {\r\n  content: "\\f82a";\r\n}\r\n\r\n.b-fa-tree::before {\r\n  content: "\\f1bb";\r\n}\r\n\r\n.b-fa-tree-city::before {\r\n  content: "\\e587";\r\n}\r\n\r\n.b-fa-triangle-exclamation::before {\r\n  content: "\\f071";\r\n}\r\n\r\n.b-fa-exclamation-triangle::before {\r\n  content: "\\f071";\r\n}\r\n\r\n.b-fa-warning::before {\r\n  content: "\\f071";\r\n}\r\n\r\n.b-fa-trophy::before {\r\n  content: "\\f091";\r\n}\r\n\r\n.b-fa-trowel::before {\r\n  content: "\\e589";\r\n}\r\n\r\n.b-fa-trowel-bricks::before {\r\n  content: "\\e58a";\r\n}\r\n\r\n.b-fa-truck::before {\r\n  content: "\\f0d1";\r\n}\r\n\r\n.b-fa-truck-arrow-right::before {\r\n  content: "\\e58b";\r\n}\r\n\r\n.b-fa-truck-droplet::before {\r\n  content: "\\e58c";\r\n}\r\n\r\n.b-fa-truck-fast::before {\r\n  content: "\\f48b";\r\n}\r\n\r\n.b-fa-shipping-fast::before {\r\n  content: "\\f48b";\r\n}\r\n\r\n.b-fa-truck-field::before {\r\n  content: "\\e58d";\r\n}\r\n\r\n.b-fa-truck-field-un::before {\r\n  content: "\\e58e";\r\n}\r\n\r\n.b-fa-truck-front::before {\r\n  content: "\\e2b7";\r\n}\r\n\r\n.b-fa-truck-medical::before {\r\n  content: "\\f0f9";\r\n}\r\n\r\n.b-fa-ambulance::before {\r\n  content: "\\f0f9";\r\n}\r\n\r\n.b-fa-truck-monster::before {\r\n  content: "\\f63b";\r\n}\r\n\r\n.b-fa-truck-moving::before {\r\n  content: "\\f4df";\r\n}\r\n\r\n.b-fa-truck-pickup::before {\r\n  content: "\\f63c";\r\n}\r\n\r\n.b-fa-truck-plane::before {\r\n  content: "\\e58f";\r\n}\r\n\r\n.b-fa-truck-ramp-box::before {\r\n  content: "\\f4de";\r\n}\r\n\r\n.b-fa-truck-loading::before {\r\n  content: "\\f4de";\r\n}\r\n\r\n.b-fa-tty::before {\r\n  content: "\\f1e4";\r\n}\r\n\r\n.b-fa-teletype::before {\r\n  content: "\\f1e4";\r\n}\r\n\r\n.b-fa-turkish-lira-sign::before {\r\n  content: "\\e2bb";\r\n}\r\n\r\n.b-fa-try::before {\r\n  content: "\\e2bb";\r\n}\r\n\r\n.b-fa-turkish-lira::before {\r\n  content: "\\e2bb";\r\n}\r\n\r\n.b-fa-turn-down::before {\r\n  content: "\\f3be";\r\n}\r\n\r\n.b-fa-level-down-alt::before {\r\n  content: "\\f3be";\r\n}\r\n\r\n.b-fa-turn-up::before {\r\n  content: "\\f3bf";\r\n}\r\n\r\n.b-fa-level-up-alt::before {\r\n  content: "\\f3bf";\r\n}\r\n\r\n.b-fa-tv::before {\r\n  content: "\\f26c";\r\n}\r\n\r\n.b-fa-television::before {\r\n  content: "\\f26c";\r\n}\r\n\r\n.b-fa-tv-alt::before {\r\n  content: "\\f26c";\r\n}\r\n\r\n.b-fa-u::before {\r\n  content: "U";\r\n}\r\n\r\n.b-fa-umbrella::before {\r\n  content: "\\f0e9";\r\n}\r\n\r\n.b-fa-umbrella-beach::before {\r\n  content: "\\f5ca";\r\n}\r\n\r\n.b-fa-underline::before {\r\n  content: "\\f0cd";\r\n}\r\n\r\n.b-fa-universal-access::before {\r\n  content: "\\f29a";\r\n}\r\n\r\n.b-fa-unlock::before {\r\n  content: "\\f09c";\r\n}\r\n\r\n.b-fa-unlock-keyhole::before {\r\n  content: "\\f13e";\r\n}\r\n\r\n.b-fa-unlock-alt::before {\r\n  content: "\\f13e";\r\n}\r\n\r\n.b-fa-up-down::before {\r\n  content: "\\f338";\r\n}\r\n\r\n.b-fa-arrows-alt-v::before {\r\n  content: "\\f338";\r\n}\r\n\r\n.b-fa-up-down-left-right::before {\r\n  content: "\\f0b2";\r\n}\r\n\r\n.b-fa-arrows-alt::before {\r\n  content: "\\f0b2";\r\n}\r\n\r\n.b-fa-up-long::before {\r\n  content: "\\f30c";\r\n}\r\n\r\n.b-fa-long-arrow-alt-up::before {\r\n  content: "\\f30c";\r\n}\r\n\r\n.b-fa-up-right-and-down-left-from-center::before {\r\n  content: "\\f424";\r\n}\r\n\r\n.b-fa-expand-alt::before {\r\n  content: "\\f424";\r\n}\r\n\r\n.b-fa-up-right-from-square::before {\r\n  content: "\\f35d";\r\n}\r\n\r\n.b-fa-external-link-alt::before {\r\n  content: "\\f35d";\r\n}\r\n\r\n.b-fa-upload::before {\r\n  content: "\\f093";\r\n}\r\n\r\n.b-fa-user::before {\r\n  content: "\\f007";\r\n}\r\n\r\n.b-fa-user-astronaut::before {\r\n  content: "\\f4fb";\r\n}\r\n\r\n.b-fa-user-check::before {\r\n  content: "\\f4fc";\r\n}\r\n\r\n.b-fa-user-clock::before {\r\n  content: "\\f4fd";\r\n}\r\n\r\n.b-fa-user-doctor::before {\r\n  content: "\\f0f0";\r\n}\r\n\r\n.b-fa-user-md::before {\r\n  content: "\\f0f0";\r\n}\r\n\r\n.b-fa-user-gear::before {\r\n  content: "\\f4fe";\r\n}\r\n\r\n.b-fa-user-cog::before {\r\n  content: "\\f4fe";\r\n}\r\n\r\n.b-fa-user-graduate::before {\r\n  content: "\\f501";\r\n}\r\n\r\n.b-fa-user-group::before {\r\n  content: "\\f500";\r\n}\r\n\r\n.b-fa-user-friends::before {\r\n  content: "\\f500";\r\n}\r\n\r\n.b-fa-user-injured::before {\r\n  content: "\\f728";\r\n}\r\n\r\n.b-fa-user-large::before {\r\n  content: "\\f406";\r\n}\r\n\r\n.b-fa-user-alt::before {\r\n  content: "\\f406";\r\n}\r\n\r\n.b-fa-user-large-slash::before {\r\n  content: "\\f4fa";\r\n}\r\n\r\n.b-fa-user-alt-slash::before {\r\n  content: "\\f4fa";\r\n}\r\n\r\n.b-fa-user-lock::before {\r\n  content: "\\f502";\r\n}\r\n\r\n.b-fa-user-minus::before {\r\n  content: "\\f503";\r\n}\r\n\r\n.b-fa-user-ninja::before {\r\n  content: "\\f504";\r\n}\r\n\r\n.b-fa-user-nurse::before {\r\n  content: "\\f82f";\r\n}\r\n\r\n.b-fa-user-pen::before {\r\n  content: "\\f4ff";\r\n}\r\n\r\n.b-fa-user-edit::before {\r\n  content: "\\f4ff";\r\n}\r\n\r\n.b-fa-user-plus::before {\r\n  content: "\\f234";\r\n}\r\n\r\n.b-fa-user-secret::before {\r\n  content: "\\f21b";\r\n}\r\n\r\n.b-fa-user-shield::before {\r\n  content: "\\f505";\r\n}\r\n\r\n.b-fa-user-slash::before {\r\n  content: "\\f506";\r\n}\r\n\r\n.b-fa-user-tag::before {\r\n  content: "\\f507";\r\n}\r\n\r\n.b-fa-user-tie::before {\r\n  content: "\\f508";\r\n}\r\n\r\n.b-fa-user-xmark::before {\r\n  content: "\\f235";\r\n}\r\n\r\n.b-fa-user-times::before {\r\n  content: "\\f235";\r\n}\r\n\r\n.b-fa-users::before {\r\n  content: "\\f0c0";\r\n}\r\n\r\n.b-fa-users-between-lines::before {\r\n  content: "\\e591";\r\n}\r\n\r\n.b-fa-users-gear::before {\r\n  content: "\\f509";\r\n}\r\n\r\n.b-fa-users-cog::before {\r\n  content: "\\f509";\r\n}\r\n\r\n.b-fa-users-line::before {\r\n  content: "\\e592";\r\n}\r\n\r\n.b-fa-users-rays::before {\r\n  content: "\\e593";\r\n}\r\n\r\n.b-fa-users-rectangle::before {\r\n  content: "\\e594";\r\n}\r\n\r\n.b-fa-users-slash::before {\r\n  content: "\\e073";\r\n}\r\n\r\n.b-fa-users-viewfinder::before {\r\n  content: "\\e595";\r\n}\r\n\r\n.b-fa-utensils::before {\r\n  content: "\\f2e7";\r\n}\r\n\r\n.b-fa-cutlery::before {\r\n  content: "\\f2e7";\r\n}\r\n\r\n.b-fa-v::before {\r\n  content: "V";\r\n}\r\n\r\n.b-fa-van-shuttle::before {\r\n  content: "\\f5b6";\r\n}\r\n\r\n.b-fa-shuttle-van::before {\r\n  content: "\\f5b6";\r\n}\r\n\r\n.b-fa-vault::before {\r\n  content: "\\e2c5";\r\n}\r\n\r\n.b-fa-vector-square::before {\r\n  content: "\\f5cb";\r\n}\r\n\r\n.b-fa-venus::before {\r\n  content: "\\f221";\r\n}\r\n\r\n.b-fa-venus-double::before {\r\n  content: "\\f226";\r\n}\r\n\r\n.b-fa-venus-mars::before {\r\n  content: "\\f228";\r\n}\r\n\r\n.b-fa-vest::before {\r\n  content: "\\e085";\r\n}\r\n\r\n.b-fa-vest-patches::before {\r\n  content: "\\e086";\r\n}\r\n\r\n.b-fa-vial::before {\r\n  content: "\\f492";\r\n}\r\n\r\n.b-fa-vial-circle-check::before {\r\n  content: "\\e596";\r\n}\r\n\r\n.b-fa-vial-virus::before {\r\n  content: "\\e597";\r\n}\r\n\r\n.b-fa-vials::before {\r\n  content: "\\f493";\r\n}\r\n\r\n.b-fa-video::before {\r\n  content: "\\f03d";\r\n}\r\n\r\n.b-fa-video-camera::before {\r\n  content: "\\f03d";\r\n}\r\n\r\n.b-fa-video-slash::before {\r\n  content: "\\f4e2";\r\n}\r\n\r\n.b-fa-vihara::before {\r\n  content: "\\f6a7";\r\n}\r\n\r\n.b-fa-virus::before {\r\n  content: "\\e074";\r\n}\r\n\r\n.b-fa-virus-covid::before {\r\n  content: "\\e4a8";\r\n}\r\n\r\n.b-fa-virus-covid-slash::before {\r\n  content: "\\e4a9";\r\n}\r\n\r\n.b-fa-virus-slash::before {\r\n  content: "\\e075";\r\n}\r\n\r\n.b-fa-viruses::before {\r\n  content: "\\e076";\r\n}\r\n\r\n.b-fa-voicemail::before {\r\n  content: "\\f897";\r\n}\r\n\r\n.b-fa-volcano::before {\r\n  content: "\\f770";\r\n}\r\n\r\n.b-fa-volleyball::before {\r\n  content: "\\f45f";\r\n}\r\n\r\n.b-fa-volleyball-ball::before {\r\n  content: "\\f45f";\r\n}\r\n\r\n.b-fa-volume-high::before {\r\n  content: "\\f028";\r\n}\r\n\r\n.b-fa-volume-up::before {\r\n  content: "\\f028";\r\n}\r\n\r\n.b-fa-volume-low::before {\r\n  content: "\\f027";\r\n}\r\n\r\n.b-fa-volume-down::before {\r\n  content: "\\f027";\r\n}\r\n\r\n.b-fa-volume-off::before {\r\n  content: "\\f026";\r\n}\r\n\r\n.b-fa-volume-xmark::before {\r\n  content: "\\f6a9";\r\n}\r\n\r\n.b-fa-volume-mute::before {\r\n  content: "\\f6a9";\r\n}\r\n\r\n.b-fa-volume-times::before {\r\n  content: "\\f6a9";\r\n}\r\n\r\n.b-fa-vr-cardboard::before {\r\n  content: "\\f729";\r\n}\r\n\r\n.b-fa-w::before {\r\n  content: "W";\r\n}\r\n\r\n.b-fa-walkie-talkie::before {\r\n  content: "\\f8ef";\r\n}\r\n\r\n.b-fa-wallet::before {\r\n  content: "\\f555";\r\n}\r\n\r\n.b-fa-wand-magic::before {\r\n  content: "\\f0d0";\r\n}\r\n\r\n.b-fa-magic::before {\r\n  content: "\\f0d0";\r\n}\r\n\r\n.b-fa-wand-magic-sparkles::before {\r\n  content: "\\e2ca";\r\n}\r\n\r\n.b-fa-magic-wand-sparkles::before {\r\n  content: "\\e2ca";\r\n}\r\n\r\n.b-fa-wand-sparkles::before {\r\n  content: "\\f72b";\r\n}\r\n\r\n.b-fa-warehouse::before {\r\n  content: "\\f494";\r\n}\r\n\r\n.b-fa-water::before {\r\n  content: "\\f773";\r\n}\r\n\r\n.b-fa-water-ladder::before {\r\n  content: "\\f5c5";\r\n}\r\n\r\n.b-fa-ladder-water::before {\r\n  content: "\\f5c5";\r\n}\r\n\r\n.b-fa-swimming-pool::before {\r\n  content: "\\f5c5";\r\n}\r\n\r\n.b-fa-wave-square::before {\r\n  content: "\\f83e";\r\n}\r\n\r\n.b-fa-weight-hanging::before {\r\n  content: "\\f5cd";\r\n}\r\n\r\n.b-fa-weight-scale::before {\r\n  content: "\\f496";\r\n}\r\n\r\n.b-fa-weight::before {\r\n  content: "\\f496";\r\n}\r\n\r\n.b-fa-wheat-awn::before {\r\n  content: "\\e2cd";\r\n}\r\n\r\n.b-fa-wheat-alt::before {\r\n  content: "\\e2cd";\r\n}\r\n\r\n.b-fa-wheat-awn-circle-exclamation::before {\r\n  content: "\\e598";\r\n}\r\n\r\n.b-fa-wheelchair::before {\r\n  content: "\\f193";\r\n}\r\n\r\n.b-fa-wheelchair-move::before {\r\n  content: "\\e2ce";\r\n}\r\n\r\n.b-fa-wheelchair-alt::before {\r\n  content: "\\e2ce";\r\n}\r\n\r\n.b-fa-whiskey-glass::before {\r\n  content: "\\f7a0";\r\n}\r\n\r\n.b-fa-glass-whiskey::before {\r\n  content: "\\f7a0";\r\n}\r\n\r\n.b-fa-wifi::before {\r\n  content: "\\f1eb";\r\n}\r\n\r\n.b-fa-wifi-3::before {\r\n  content: "\\f1eb";\r\n}\r\n\r\n.b-fa-wifi-strong::before {\r\n  content: "\\f1eb";\r\n}\r\n\r\n.b-fa-wind::before {\r\n  content: "\\f72e";\r\n}\r\n\r\n.b-fa-window-maximize::before {\r\n  content: "\\f2d0";\r\n}\r\n\r\n.b-fa-window-minimize::before {\r\n  content: "\\f2d1";\r\n}\r\n\r\n.b-fa-window-restore::before {\r\n  content: "\\f2d2";\r\n}\r\n\r\n.b-fa-wine-bottle::before {\r\n  content: "\\f72f";\r\n}\r\n\r\n.b-fa-wine-glass::before {\r\n  content: "\\f4e3";\r\n}\r\n\r\n.b-fa-wine-glass-empty::before {\r\n  content: "\\f5ce";\r\n}\r\n\r\n.b-fa-wine-glass-alt::before {\r\n  content: "\\f5ce";\r\n}\r\n\r\n.b-fa-won-sign::before {\r\n  content: "\\f159";\r\n}\r\n\r\n.b-fa-krw::before {\r\n  content: "\\f159";\r\n}\r\n\r\n.b-fa-won::before {\r\n  content: "\\f159";\r\n}\r\n\r\n.b-fa-worm::before {\r\n  content: "\\e599";\r\n}\r\n\r\n.b-fa-wrench::before {\r\n  content: "\\f0ad";\r\n}\r\n\r\n.b-fa-x::before {\r\n  content: "X";\r\n}\r\n\r\n.b-fa-x-ray::before {\r\n  content: "\\f497";\r\n}\r\n\r\n.b-fa-xmark::before {\r\n  content: "\\f00d";\r\n}\r\n\r\n.b-fa-close::before {\r\n  content: "\\f00d";\r\n}\r\n\r\n.b-fa-multiply::before {\r\n  content: "\\f00d";\r\n}\r\n\r\n.b-fa-remove::before {\r\n  content: "\\f00d";\r\n}\r\n\r\n.b-fa-times::before {\r\n  content: "\\f00d";\r\n}\r\n\r\n.b-fa-xmarks-lines::before {\r\n  content: "\\e59a";\r\n}\r\n\r\n.b-fa-y::before {\r\n  content: "Y";\r\n}\r\n\r\n.b-fa-yen-sign::before {\r\n  content: "\\f157";\r\n}\r\n\r\n.b-fa-cny::before {\r\n  content: "\\f157";\r\n}\r\n\r\n.b-fa-jpy::before {\r\n  content: "\\f157";\r\n}\r\n\r\n.b-fa-rmb::before {\r\n  content: "\\f157";\r\n}\r\n\r\n.b-fa-yen::before {\r\n  content: "\\f157";\r\n}\r\n\r\n.b-fa-yin-yang::before {\r\n  content: "\\f6ad";\r\n}\r\n\r\n.b-fa-z::before {\r\n  content: "Z";\r\n}\r\n\r\n.sr-only,\r\n.b-fa-sr-only {\r\n  position: absolute;\r\n  width: 1px;\r\n  height: 1px;\r\n  padding: 0;\r\n  margin: -1px;\r\n  overflow: hidden;\r\n  clip: rect(0, 0, 0, 0);\r\n  white-space: nowrap;\r\n  border-width: 0;\r\n}\r\n\r\n.sr-only-focusable:not(:focus),\r\n.b-fa-sr-only-focusable:not(:focus) {\r\n  position: absolute;\r\n  width: 1px;\r\n  height: 1px;\r\n  padding: 0;\r\n  margin: -1px;\r\n  overflow: hidden;\r\n  clip: rect(0, 0, 0, 0);\r\n  white-space: nowrap;\r\n  border-width: 0;\r\n}\r\n\r\n.b-fa {\r\n  font-family: inherit;\r\n  font-weight: inherit;\r\n  line-height: inherit;\r\n  -webkit-font-smoothing: inherit;\r\n}\r\n\r\n.b-fa:before {\r\n  font-family: "Font Awesome 6 Free", FontAwesome6Free;\r\n  font-weight: 900;\r\n}\r\n\r\n.b-icon:before, .b-icon-version:before {\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  display: inline-block;\r\n  font-style: normal;\r\n  font-variant: normal;\r\n  font-weight: normal;\r\n  line-height: 1;\r\n  font-family: "Font Awesome 6 Free", FontAwesome6Free;\r\n  font-weight: 900;\r\n  display: inline-flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.b-fw-icon:before {\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  display: inline-block;\r\n  font-style: normal;\r\n  font-variant: normal;\r\n  font-weight: normal;\r\n  line-height: 1;\r\n  font-family: "Font Awesome 6 Free", FontAwesome6Free;\r\n  font-weight: 900;\r\n  vertical-align: 0;\r\n}\r\n\r\n.b-icon-add:before {\r\n  content: "+";\r\n}\r\n\r\n.b-icon-remove:before {\r\n  content: "\\f00d";\r\n}\r\n\r\n.b-icon-clear:before {\r\n  content: "\\f00d";\r\n}\r\n\r\n.b-icon-close:before, .b-popup-close:before {\r\n  content: "\\f00d";\r\n}\r\n\r\n.b-icon-collapse-down:before {\r\n  content: "\\f078";\r\n}\r\n\r\n.b-icon-collapse-left:before {\r\n  content: "\\f053";\r\n}\r\n\r\n.b-icon-collapse-right:before {\r\n  content: "\\f054";\r\n}\r\n\r\n.b-icon-collapse-up:before {\r\n  content: "\\f077";\r\n}\r\n\r\n.b-icon-filter-disable:before {\r\n  content: "\\f05e";\r\n}\r\n\r\n.b-icon-search:before {\r\n  content: "\\f002";\r\n}\r\n\r\n.b-icon-search-plus:before {\r\n  content: "\\f00e";\r\n}\r\n\r\n.b-icon-search-minus:before {\r\n  content: "\\f010";\r\n}\r\n\r\n.b-icon-hide:before {\r\n  content: "\\f057";\r\n}\r\n\r\n.b-icon-trash:before {\r\n  content: "\\f1f8";\r\n}\r\n\r\n.b-icon-edit:before {\r\n  content: "\\f303";\r\n}\r\n\r\n.b-icon-rename:before {\r\n  content: "\\f044";\r\n}\r\n\r\n.b-icon-copy:before {\r\n  content: "\\f0c5";\r\n}\r\n\r\n.b-icon-cut:before {\r\n  content: "\\f0c4";\r\n}\r\n\r\n.b-icon-paste:before {\r\n  content: "\\f0ea";\r\n}\r\n\r\n.b-icon-expand-row:before {\r\n  content: "\\f107";\r\n}\r\n\r\n.b-icon-expand-column:before {\r\n  content: "\\f105";\r\n}\r\n\r\n.b-icon-expand, .b-popup-expand:before {\r\n  content: "\\f065";\r\n}\r\n\r\n.b-icon-first:before {\r\n  content: "\\f100";\r\n}\r\n\r\n.b-rtl > .b-icon-first:before {\r\n  transform: scaleX(-1);\r\n}\r\n\r\n.b-icon-last:before {\r\n  content: "\\f101";\r\n}\r\n\r\n.b-rtl > .b-icon-last:before {\r\n  transform: scaleX(-1);\r\n}\r\n\r\n.b-icon-reload:before {\r\n  content: "\\f01e";\r\n}\r\n\r\n.b-icon-undo:before {\r\n  content: "\\f0e2";\r\n}\r\n\r\n.b-icon-redo:before {\r\n  content: "\\f01e";\r\n}\r\n\r\n.b-icon-compare:before {\r\n  content: "\\e13a";\r\n}\r\n\r\n.b-icon-code:before {\r\n  content: "\\f121";\r\n}\r\n\r\n.b-icon-clipboard:before {\r\n  content: "\\f328";\r\n}\r\n\r\n.b-icon-filter:before,\r\n.b-icon-filter-equal:before {\r\n  content: "\\f0b0";\r\n}\r\n\r\n.b-icon-filter-less:before,\r\n.b-icon-filter-before:before {\r\n  content: "\\f053";\r\n}\r\n\r\n.b-icon-filter-more:before,\r\n.b-icon-filter-after:before {\r\n  content: "\\f054";\r\n}\r\n\r\n.b-icon-check:before {\r\n  content: "\\f00c";\r\n}\r\n\r\n.b-icon-checked:before {\r\n  content: "\\f14a";\r\n}\r\n\r\n.b-icon-unchecked:before {\r\n  content: "\\f0c8";\r\n}\r\n\r\n.b-icon-radio:before {\r\n  content: "\\f111";\r\n}\r\n\r\n.b-icon-radio-checked:before {\r\n  content: "\\f192";\r\n}\r\n\r\n.b-icon-radio-unchecked:before {\r\n  content: "\\f111";\r\n}\r\n\r\n.b-icon-calendar:before {\r\n  content: "\\f133";\r\n}\r\n\r\n.b-icon-calendar-day:before {\r\n  content: "\\f783";\r\n}\r\n\r\n.b-icon-clock:before {\r\n  content: "\\f017";\r\n}\r\n\r\n.b-icon-recurring:before {\r\n  content: "\\f021";\r\n}\r\n\r\n.b-icon-duration:before {\r\n  content: "\\f254";\r\n}\r\n\r\n.b-icon-milestone:before {\r\n  content: "\\f219";\r\n}\r\n\r\n.b-icon-locked:before {\r\n  content: "\\f023";\r\n}\r\n\r\n.b-icon-user:before {\r\n  content: "\\f007";\r\n}\r\n\r\n.b-icon-menu:before {\r\n  content: "\\f0c9";\r\n}\r\n\r\n.b-icon-menu-horizontal:before {\r\n  content: "\\f141";\r\n}\r\n\r\n.b-icon-menu-vertical:before {\r\n  content: "\\f142";\r\n}\r\n\r\n.b-icon-info:before {\r\n  content: "\\f129";\r\n}\r\n\r\n.b-icon-sub-menu:before {\r\n  content: "\\f054";\r\n}\r\n\r\n.b-icon-star:before {\r\n  content: "\\f005";\r\n}\r\n\r\n.b-icon-warning:before {\r\n  content: "\\f071";\r\n}\r\n\r\n.b-icon-columns:before {\r\n  content: "\\f0db";\r\n}\r\n\r\n.b-icon-picker:before {\r\n  content: "\\f0d7";\r\n  transition: transform 0.2s;\r\n}\r\n\r\n.b-icon-picker-rotated:before {\r\n  content: "\\f0d7";\r\n  transform: rotate(180deg);\r\n  transition: transform 0.2s;\r\n}\r\n\r\n.b-icon-resize-horizontal:before {\r\n  content: "\\f337";\r\n}\r\n\r\n.b-icon-fullscreen:before {\r\n  content: "\\f0b2";\r\n}\r\n\r\n.b-icon-cog:before {\r\n  content: "\\f013";\r\n}\r\n.b-linux .b-icon-cog:before, .b-windows .b-icon-cog:before {\r\n  vertical-align: middle;\r\n}\r\n\r\n.b-icon-file-download:before {\r\n  content: "\\f56d";\r\n}\r\n\r\n.b-icon-sync:before {\r\n  content: "\\f2f1";\r\n}\r\n\r\n.b-icon-bad-mood-emoji:before {\r\n  content: "\\f119";\r\n}\r\n\r\n.b-icon-circle:before {\r\n  content: "\\f111";\r\n}\r\n\r\n.b-icon-square:before {\r\n  content: "\\f0c8";\r\n}\r\n\r\n.b-icon-merge-cells:before {\r\n  content: "\\f5fd";\r\n}\r\n\r\n.b-icon-up:before {\r\n  content: "\\f062";\r\n}\r\n\r\n.b-icon-down:before {\r\n  content: "\\f063";\r\n}\r\n\r\n.b-icon-left:before {\r\n  content: "\\f060";\r\n}\r\n\r\n.b-icon-right:before {\r\n  content: "\\f061";\r\n}\r\n\r\n.b-icon-angle-left:before {\r\n  content: "\\f104";\r\n}\r\n\r\n.b-icon-angle-right:before {\r\n  content: "\\f105";\r\n}\r\n\r\n.b-icon-previous:before {\r\n  content: "\\f053";\r\n}\r\n\r\n.b-rtl > .b-icon-previous:before {\r\n  transform: scaleX(-1);\r\n}\r\n\r\n.b-icon-next:before {\r\n  content: "\\f054";\r\n}\r\n\r\n.b-rtl > .b-icon-next:before {\r\n  transform: scaleX(-1);\r\n}\r\n\r\n.b-icon-move-left-right:before {\r\n  content: "\\f337";\r\n}\r\n\r\n.b-icon-move-up-down:before {\r\n  content: "\\f338";\r\n}\r\n\r\n.b-icon-spinner:before {\r\n  content: "\\f110";\r\n  animation: rotate 2s infinite linear;\r\n}\r\n\r\n.b-icon-column-move-left:before {\r\n  content: "\\f0a8";\r\n}\r\n\r\n.b-icon-column-move-right:before {\r\n  content: "\\f0a9";\r\n}\r\n\r\n.b-icon-hide-column:before {\r\n  content: "\\f057";\r\n}\r\n\r\n.b-icon-sort:before {\r\n  content: "\\f0dc";\r\n}\r\n\r\n.b-icon-sort-asc:before {\r\n  content: "\\f15e";\r\n}\r\n\r\n.b-icon-sort-desc:before {\r\n  content: "\\f15d";\r\n}\r\n\r\n.b-icon-sorted-asc:before {\r\n  content: "\\f062";\r\n}\r\n\r\n.b-icon-group-asc:before {\r\n  content: "\\f885";\r\n}\r\n\r\n.b-icon-group-desc:before {\r\n  content: "\\f160";\r\n}\r\n\r\n.b-icon-group-collapse:before {\r\n  content: "\\f056";\r\n}\r\n\r\n.b-icon-group-expand:before {\r\n  content: "\\f055";\r\n}\r\n\r\n.b-icon-grouped-asc:before {\r\n  content: "\\f012";\r\n}\r\n\r\n.b-icon-tree-expand:before {\r\n  content: "\\f105";\r\n}\r\n\r\n.b-icon-tree-collapse:before {\r\n  content: "\\f107";\r\n}\r\n\r\n.b-icon-tree-folder:before {\r\n  content: "\\f07b";\r\n}\r\n\r\n.b-icon-tree-folder-open:before {\r\n  content: "\\f07c";\r\n}\r\n\r\n.b-icon-tree-leaf:before {\r\n  content: "\\f111";\r\n}\r\n\r\n.b-icon-expand-gridregion:before {\r\n  content: "\\f054";\r\n}\r\n\r\n.b-icon-collapse-gridregion:before {\r\n  content: "\\f053";\r\n}\r\n\r\n.b-icon-unassign:before {\r\n  content: "\\f506";\r\n}\r\n\r\n.b-icon-valid:before {\r\n  content: "\\f00c";\r\n}\r\n\r\n.b-icon-invalid:before {\r\n  content: "\\f05e";\r\n}\r\n\r\n.b-icon-checking:before {\r\n  content: "\\f110";\r\n}\r\n\r\n.b-icon-expand-resource:before {\r\n  content: "\\f103";\r\n}\r\n\r\n.b-icon-note:before {\r\n  content: "\\f249";\r\n}\r\n\r\n.b-icon-advanced:before {\r\n  content: "\\f085";\r\n}\r\n\r\n.b-icon-renumber:before {\r\n  content: "\\f884";\r\n}\r\n\r\n.b-icon-indent:before {\r\n  content: "\\f03c";\r\n}\r\n\r\n.b-icon-outdent:before {\r\n  content: "\\f03b";\r\n}\r\n\r\n.b-icon-subtask::before {\r\n  content: "\\e476";\r\n}\r\n\r\n.b-icon-predecessor::before {\r\n  content: "\\e477";\r\n}\r\n\r\n.b-icon-successor::before {\r\n  content: "\\e47a";\r\n}\r\n\r\n.b-icon-link:before {\r\n  content: "\\f0c1";\r\n}\r\n\r\n.b-icon-unlink:before {\r\n  content: "\\f127";\r\n}\r\n\r\n.b-icon-calendar-days:before {\r\n  content: "\\f073";\r\n}\r\n\r\n.b-icon-calendar-week:before {\r\n  content: "\\f784";\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-noselect {\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n}\r\n\r\nbody {\r\n  --rtl-negate: 1;\r\n}\r\n\r\n.b-rtl {\r\n  --rtl-negate: -1;\r\n}\r\n\r\n.b-released,\r\n.b-hide-display,\r\n.b-theme-info {\r\n  display: none !important;\r\n}\r\n\r\n.b-hide-visibility {\r\n  visibility: hidden !important;\r\n}\r\n\r\n.b-hide-offscreen {\r\n  visibility: hidden !important;\r\n  position: absolute !important;\r\n  top: -10000em;\r\n  left: -10000em;\r\n}\r\n\r\n.b-yscroll-pad {\r\n  display: none;\r\n}\r\n\r\n.b-visible-scrollbar .b-show-yscroll-padding > .b-yscroll-pad {\r\n  display: block;\r\n  order: 9999;\r\n  border-inline-start: 1px solid #ddd;\r\n}\r\n.b-visible-scrollbar .b-show-yscroll-padding > .b-yscroll-pad .b-yscroll-pad-sizer {\r\n  overflow-x: hidden;\r\n  overflow-y: scroll;\r\n  visibility: hidden;\r\n  margin-inline-start: -1px;\r\n  height: 0;\r\n}\r\n\r\n.b-fx-highlight {\r\n  z-index: 9999;\r\n  animation-name: b-fx-highlight-animation;\r\n  animation-duration: 1s;\r\n  animation: b-fx-highlight-animation 1s ease 0s 1;\r\n}\r\n\r\n@keyframes b-fx-highlight-animation {\r\n  0% {\r\n    box-shadow: none;\r\n  }\r\n  50% {\r\n    box-shadow: 0 0 10px 5px rgba(253, 126, 20, 0.5);\r\n  }\r\n  100% {\r\n    box-shadow: none;\r\n  }\r\n}\r\n@keyframes b-slide-in-from-right {\r\n  30% {\r\n    transform: translateX(-30%);\r\n    opacity: 0.1;\r\n  }\r\n  30.01% {\r\n    transform: translateX(30%);\r\n  }\r\n  100% {\r\n    transform: translateX(0);\r\n    opacity: 1;\r\n  }\r\n}\r\n@keyframes b-slide-in-from-left {\r\n  30% {\r\n    transform: translateX(30%);\r\n    opacity: 0.1;\r\n  }\r\n  30.01% {\r\n    transform: translateX(-30%);\r\n  }\r\n  100% {\r\n    transform: translateX(0);\r\n    opacity: 1;\r\n  }\r\n}\r\n@keyframes b-slide-in-from-below {\r\n  30% {\r\n    transform: translateY(-30%);\r\n    opacity: 0.1;\r\n  }\r\n  30.01% {\r\n    transform: translateY(30%);\r\n  }\r\n  100% {\r\n    transform: translateY(0);\r\n    opacity: 1;\r\n  }\r\n}\r\n@keyframes b-slide-in-from-above {\r\n  30% {\r\n    transform: translateY(30%);\r\n    opacity: 0.1;\r\n  }\r\n  30.01% {\r\n    transform: translateY(-30%);\r\n  }\r\n  100% {\r\n    transform: translateY(0);\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-slide-vertical.b-slide-in-next {\r\n  animation: b-slide-in-from-below 0.3s ease 0s 1 normal;\r\n}\r\n.b-slide-vertical.b-slide-in-previous {\r\n  animation: b-slide-in-from-above 0.3s ease 0s 1 normal;\r\n}\r\n\r\n:not(.b-slide-vertical).b-slide-in-next {\r\n  animation: b-slide-in-from-right 0.3s ease 0s 1 normal;\r\n}\r\n:not(.b-slide-vertical).b-slide-in-previous {\r\n  animation: b-slide-in-from-left 0.3s ease 0s 1 normal;\r\n}\r\n\r\n.b-rtl :not(.b-slide-vertical).b-slide-in-next {\r\n  animation: b-slide-in-from-left 0.3s ease 0s 1 normal;\r\n}\r\n.b-rtl :not(.b-slide-vertical).b-slide-in-previous {\r\n  animation: b-slide-in-from-right 0.3s ease 0s 1 normal;\r\n}\r\n\r\n/**\r\n * DomHelper size monitoring polyfill for when ResizeObserver not available\r\n * now only necessary on IE.\r\n */\r\n.b-no-resizeobserver.b-resize-monitored {\r\n  position: relative;\r\n}\r\n.b-no-resizeobserver.b-resize-monitored .b-resize-monitors {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  visibility: hidden;\r\n  overflow: hidden;\r\n}\r\n.b-no-resizeobserver.b-resize-monitored .b-resize-monitors > * {\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: hidden;\r\n}\r\n.b-no-resizeobserver.b-resize-monitored .b-resize-monitors > .b-resize-monitor-expand:after {\r\n  content: "";\r\n  display: block;\r\n  width: 100000px;\r\n  height: 100000px;\r\n}\r\n.b-no-resizeobserver.b-resize-monitored .b-resize-monitors > .b-resize-monitor-shrink:after {\r\n  content: "";\r\n  display: block;\r\n  width: 200%;\r\n  height: 200%;\r\n  min-width: 1px;\r\n  min-height: 1px;\r\n}\r\n\r\n.b-float-root {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  pointer-events: none;\r\n  overflow: hidden;\r\n  overflow: -moz-hidden-unscrollable;\r\n  overflow: clip;\r\n  z-index: 11000;\r\n  contain: strict;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n.b-float-root.b-safari {\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n}\r\n.b-float-root > .b-floating {\r\n  position: absolute;\r\n  contain: layout style;\r\n  pointer-events: all;\r\n  transition: opacity 0.2s;\r\n  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.12), 0 3px 6px rgba(0, 0, 0, 0.24);\r\n  top: 0;\r\n  left: 0;\r\n  z-index: 11001;\r\n}\r\n.b-firefox .b-float-root > .b-floating {\r\n  contain: layout;\r\n}\r\n.b-float-root > .b-floating.b-hidden {\r\n  opacity: 0;\r\n}\r\n.b-float-root > .b-floating.b-aligned-above:not(.b-anchored) {\r\n  box-shadow: -3px -1px 6px rgba(0, 0, 0, 0.12), 3px -2px 6px rgba(0, 0, 0, 0.24);\r\n}\r\n\r\n/*\r\n    The Gripper\r\n    ===========\r\n    The Hoverable mixin applies various b-hover classes to a hoverTarget element. Based on these classes, a resize\r\n    gripper element inside the target is styled. This element may be always present, or (as with CalendarDrag), moved\r\n    in to the active hoverTarget on hoverEnter.\r\n\r\n    Hoverable may set the following classes simultaneously. Within each are the classes that are mutually exclusive:\r\n\r\n     - b-hover-(top|bottom)\r\n     - b-hover-(right|left)\r\n     - b-hover-edge   (set when hovering near any edge)\r\n\r\n   It may be that none of the above are present if hoverEdges is used. When hoverEdges is not used, these classes will\r\n   be present on the hoverTarget no matter where the cursor is inside it.\r\n\r\n   To facilitate animations, the b-hover-anim class is added in a way such that transitions for styles activated by it\r\n   will be animated.\r\n*/\r\n.b-gripper {\r\n  position: absolute;\r\n  /*\r\n   Horizontal gripper (top and bottom):\r\n          +---------------------------+\r\n          |           =====           |\r\n          |                           |\r\n          |                           |\r\n          |           =====           |\r\n          +---------------------------+\r\n   */\r\n  /*\r\n   Vertical gripper (left and right):\r\n          +---------------------------+\r\n          |                           |\r\n          | ||                     || |\r\n          | ||                     || |\r\n          |                           |\r\n          +---------------------------+\r\n   */\r\n}\r\n.b-gripper:after {\r\n  content: " ";\r\n  position: absolute;\r\n  opacity: 0;\r\n}\r\n.b-hover-top .b-gripper.b-gripper-horz, .b-hover-bottom .b-gripper.b-gripper-horz {\r\n  cursor: ns-resize;\r\n  height: 1em;\r\n  left: 0;\r\n  right: 0;\r\n}\r\n.b-hover-bottom .b-gripper.b-gripper-horz {\r\n  bottom: 0;\r\n}\r\n.b-gripper.b-gripper-horz:after {\r\n  border-top: 1px solid rgba(0, 0, 0, 0.3);\r\n  border-bottom: 1px solid rgba(0, 0, 0, 0.3);\r\n  width: 0;\r\n  height: 0.25em;\r\n  left: 50%;\r\n  margin-inline-start: 0;\r\n}\r\n.b-hover-top .b-gripper.b-gripper-horz:after {\r\n  top: 0.4em;\r\n}\r\n.b-hover-bottom .b-gripper.b-gripper-horz:after {\r\n  bottom: 0.4em;\r\n}\r\n.b-hover-anim.b-hover-edge .b-gripper.b-gripper-horz:after {\r\n  transition: opacity 0.2s, margin-inline-start 0.2s, width 0.2s;\r\n  opacity: 1;\r\n  margin-inline-start: -0.6em;\r\n  width: 1.2em;\r\n}\r\n.b-hover-left .b-gripper.b-gripper-vert, .b-hover-right .b-gripper.b-gripper-vert {\r\n  cursor: ew-resize;\r\n  width: 1em;\r\n  top: 0;\r\n  bottom: 0;\r\n}\r\n.b-hover-right .b-gripper.b-gripper-vert {\r\n  right: 0;\r\n}\r\n.b-hover-left .b-gripper.b-gripper-vert {\r\n  left: 0;\r\n}\r\n.b-gripper.b-gripper-vert:after {\r\n  background: repeating-linear-gradient(90deg, rgba(0, 0, 0, 0.5), rgba(255, 255, 255, 0.8) 3px);\r\n  height: 0;\r\n  width: 0.5em;\r\n  top: 50%;\r\n  margin-top: 0;\r\n}\r\n.b-hover-left .b-gripper.b-gripper-vert:after {\r\n  left: 4px;\r\n}\r\n.b-hover-right .b-gripper.b-gripper-vert:after {\r\n  right: 4px;\r\n}\r\n.b-hover-anim.b-hover-edge .b-gripper.b-gripper-vert:after {\r\n  transition: opacity 0.2s, margin-top 0.2s, height 0.2s;\r\n  opacity: 1;\r\n  margin-top: -6px;\r\n  height: 12px;\r\n}\r\n\r\n.b-dragging {\r\n  z-index: 100;\r\n  pointer-events: none !important;\r\n  opacity: 0.8;\r\n  box-sizing: border-box;\r\n}\r\n.b-dragging.b-drag-unified-proxy {\r\n  opacity: 0.65;\r\n}\r\n.b-dragging.b-drag-main {\r\n  z-index: 101;\r\n  opacity: 1;\r\n}\r\n\r\n/*\r\n Used when Drag code is creating a separate proxy element representing the dragged element,\r\n   as opposed to the \'inline\' drag of the actual element\r\n*/\r\n.b-drag-proxy {\r\n  position: absolute !important;\r\n  top: 0;\r\n  left: 0;\r\n  pointer-events: none !important;\r\n  box-sizing: border-box;\r\n}\r\n.b-drag-proxy * {\r\n  box-sizing: border-box;\r\n}\r\n\r\n.b-aborting,\r\n.b-drag-final-transition {\r\n  transition-duration: 0.3s;\r\n  transition-property: all !important;\r\n}\r\n\r\n.b-drag-unified-animation {\r\n  transition: transform 0.2s;\r\n}\r\n\r\n.b-drag-original.b-hidden {\r\n  display: none !important;\r\n}\r\n\r\n.b-draghelper-active * {\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n}\r\n\r\n.simulated-mouse {\r\n  position: absolute;\r\n  z-index: 100;\r\n  top: 10px;\r\n  left: 10px;\r\n  transition: top 0.5s, left 0.5s;\r\n  pointer-events: none;\r\n  font-size: 16px;\r\n}\r\n.simulated-mouse.quick {\r\n  transition: top 0.05s, left 0.05s;\r\n}\r\n.simulated-mouse:after {\r\n  position: absolute;\r\n  content: "\\f245";\r\n  font-family: "Font Awesome 6 Free";\r\n  font-weight: 900;\r\n  z-index: 102;\r\n}\r\n.simulated-mouse.drag:before, .simulated-mouse.mousedown:before, .simulated-mouse.dblclick:before, .simulated-mouse.click:before {\r\n  position: absolute;\r\n  content: "";\r\n  border: 2px solid transparent;\r\n  border-radius: 50%;\r\n  animation-name: click;\r\n  animation-duration: 0.2s;\r\n  top: 0;\r\n  left: 0;\r\n  transform: translate(-50%, -50%);\r\n  z-index: 101;\r\n  opacity: 0.7;\r\n}\r\n.simulated-mouse.drag:after {\r\n  content: "\\f25a";\r\n  left: -3px;\r\n}\r\n.simulated-mouse.dblclick:before {\r\n  animation-name: dblclick;\r\n  animation-duration: 0.3s;\r\n}\r\n.simulated-mouse.mousedown:before, .simulated-mouse.drag:before {\r\n  animation-name: none;\r\n  width: 1.5em;\r\n  height: 1.5em;\r\n  border-color: red;\r\n}\r\n\r\n@keyframes click {\r\n  0% {\r\n    width: 0;\r\n    height: 0;\r\n  }\r\n  90% {\r\n    width: 1.5em;\r\n    height: 1.5em;\r\n    border-color: red;\r\n  }\r\n  100% {\r\n    width: 0;\r\n    height: 0;\r\n    border-color: transparent;\r\n  }\r\n}\r\n@keyframes dblclick {\r\n  0% {\r\n    width: 0;\r\n    height: 0;\r\n  }\r\n  40% {\r\n    width: 1.5em;\r\n    height: 1.5em;\r\n    border-color: red;\r\n  }\r\n  50% {\r\n    width: 0;\r\n    height: 0;\r\n  }\r\n  90% {\r\n    width: 1.5em;\r\n    height: 1.5em;\r\n    border-color: red;\r\n  }\r\n  100% {\r\n    width: 0;\r\n    height: 0;\r\n    border-color: transparent;\r\n  }\r\n}\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-widget {\r\n  display: inline-flex;\r\n  overflow: hidden;\r\n  line-height: initial;\r\n  font-weight: 400;\r\n  font-size: 1em;\r\n  box-sizing: border-box;\r\n  color-scheme: light;\r\n}\r\n.b-widget.b-measure {\r\n  display: block !important;\r\n}\r\n.b-widget.b-anchored {\r\n  overflow: visible;\r\n}\r\n.b-widget.b-maximized {\r\n  transform: none !important;\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n  max-width: 100% !important;\r\n  max-height: 100% !important;\r\n}\r\n.b-widget * {\r\n  box-sizing: border-box;\r\n}\r\n.b-widget:before, .b-widget:after,\r\n.b-widget *:before,\r\n.b-widget *:after {\r\n  box-sizing: border-box;\r\n}\r\n.b-widget.b-positioned {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n}\r\n.b-widget.b-floating.b-centered, .b-widget.b-positioned.b-centered {\r\n  left: 50%;\r\n  top: 50%;\r\n  transform: translate(-50%, -50%);\r\n}\r\n.b-widget > .b-focus-trap {\r\n  position: absolute;\r\n  display: none;\r\n  clip: rect(0, 0, 0, 0);\r\n}\r\n.b-widget.b-focus-trapped.b-contains-focus > .b-focus-trap {\r\n  display: inherit;\r\n}\r\n.b-widget.b-hidden {\r\n  display: none !important;\r\n}\r\n.b-widget.b-hiding {\r\n  pointer-events: none;\r\n}\r\n.b-widget .b-aria-desc-element {\r\n  position: absolute;\r\n  clip-path: polygon(0 0);\r\n  contain: strict;\r\n}\r\n.b-widget .b-widget-inner {\r\n  width: 100%;\r\n  position: relative;\r\n  flex: 1;\r\n}\r\n.b-widget .b-anchor {\r\n  width: 16px;\r\n  height: 8px;\r\n  position: absolute;\r\n  z-index: -1;\r\n}\r\n.b-widget .b-anchor svg {\r\n  position: absolute;\r\n  top: 0;\r\n  overflow: visible;\r\n}\r\n.b-widget .b-anchor.b-anchor-top {\r\n  left: 0;\r\n  bottom: calc(100% - 1px);\r\n}\r\n.b-widget .b-anchor.b-anchor-bottom {\r\n  left: 0;\r\n  top: calc(100% - 1px);\r\n}\r\n.b-widget .b-anchor.b-anchor-bottom svg {\r\n  transform: rotate(180deg);\r\n}\r\n.b-widget .b-anchor.b-anchor-left {\r\n  top: 0;\r\n  width: 8px;\r\n  height: 16px;\r\n  right: calc(100% - 1px);\r\n}\r\n.b-widget .b-anchor.b-anchor-left svg {\r\n  transform: rotate(270deg);\r\n  transform-origin: 8px 8px;\r\n}\r\n.b-widget .b-anchor.b-anchor-right {\r\n  top: 0;\r\n  width: 8px;\r\n  height: 16px;\r\n  left: calc(100% - 1px);\r\n}\r\n.b-widget .b-anchor.b-anchor-right svg {\r\n  transform: rotate(90deg);\r\n  transform-origin: 4px 4px;\r\n}\r\n.b-widget.b-rtl > .b-anchor.b-anchor-left {\r\n  right: calc(100% - 1px - 8px);\r\n}\r\n.b-widget.b-rtl > .b-anchor.b-anchor-right {\r\n  left: calc(100% - 1px + 8px);\r\n}\r\n\r\n.b-slidingcontent-content {\r\n  display: flex;\r\n  flex-flow: row nowrap !important;\r\n  align-items: stretch;\r\n  scroll-snap-type: x mandatory;\r\n}\r\n.b-slidingcontent-content .b-carousel-item {\r\n  flex: 1 0 100%;\r\n}\r\n\r\n.b-widget-scroller {\r\n  overflow: hidden;\r\n  -webkit-overflow-scrolling: touch;\r\n  overflow-anchor: none; /* without this we see weird issues in Mac Chrome <= 63 with no scrollbar, covered in Tree.t.js */\r\n  position: relative;\r\n}\r\n.b-widget-scroller.b-hide-scroll {\r\n  scrollbar-width: none;\r\n}\r\n.b-widget-scroller.b-hide-scroll::-webkit-scrollbar {\r\n  display: none;\r\n}\r\n\r\n.b-scroller-stretcher {\r\n  position: absolute;\r\n  height: 1px;\r\n  width: 1px;\r\n  top: 0;\r\n  left: 0;\r\n}\r\n.b-rtl > .b-scroller-stretcher {\r\n  left: auto;\r\n  right: 0;\r\n}\r\n\r\n.b-text-align-start,\r\n.b-text-align-left {\r\n  text-align: start;\r\n}\r\n\r\n.b-text-align-center {\r\n  text-align: center;\r\n}\r\n\r\n.b-text-align-end,\r\n.b-text-align-right {\r\n  text-align: end;\r\n}\r\n\r\n.b-rtl {\r\n  direction: rtl;\r\n}\r\n\r\n.b-ltr {\r\n  direction: ltr;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-widget.b-badge {\r\n  overflow: visible;\r\n}\r\n\r\n.b-badge::before {\r\n  content: attr(data-badge);\r\n  position: absolute;\r\n  right: -1em;\r\n  top: -1em;\r\n  width: 0;\r\n  height: 0;\r\n  overflow: visible;\r\n  padding: 1em;\r\n  background-color: #e53f2c;\r\n  color: #fff;\r\n  border-radius: 50%;\r\n  font-size: 0.6em;\r\n  z-index: 5;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  animation-name: b-badge-show;\r\n  animation-duration: 0.3s;\r\n}\r\n\r\n.b-badge.b-rtl::before {\r\n  left: -1em;\r\n  right: auto;\r\n}\r\n\r\n.b-button.b-badge:before {\r\n  font-size: 0.7em;\r\n}\r\n\r\n@keyframes b-badge-show {\r\n  0% {\r\n    opacity: 0;\r\n    transform: scale(0.1) rotate(180deg);\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n    transform: scale(1) rotate(0deg);\r\n  }\r\n}\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-button {\r\n  --widget-primary-color-rgb: 120,120,131;\r\n  --button-background-opacity: 0.05;\r\n  --button-border-opacity: 0.3;\r\n  --button-text-color: var(--widget-primary-color-rgb);\r\n  --button-text-opacity: 1;\r\n  --button-hover-background-opacity: var(--button-border-opacity);\r\n  --button-pressed-text-color: 255, 255, 255;\r\n  --button-pressed-background-opacity: 0.8;\r\n  --button-pressed-hover-background-opacity: 0.7;\r\n  --button-pressed-disabled-background-opacity: 0.1;\r\n  --button-active-background-opacity: 1;\r\n  --button-focus-background-opacity: 0.3;\r\n  --button-pressed-focus-background-opacity: 1;\r\n  --button-disabled-background-opacity: 0;\r\n  --button-disabled-text-opacity: 0.3;\r\n  --button-disabled-border-opacity: 0.2;\r\n  --button-transparent-background-opacity: 0;\r\n  --button-transparent-text-opacity: 0.6;\r\n  --button-transparent-pressed-text-opacity: 1;\r\n  --button-transparent-hover-background-opacity: 0.1;\r\n  position: relative;\r\n  padding: 0 1em;\r\n  min-height: 2.7em;\r\n  cursor: pointer;\r\n  font-family: inherit;\r\n  font-weight: 400;\r\n  transition: background-color 200ms, color 200ms, border 200ms;\r\n  white-space: nowrap;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  text-transform: uppercase;\r\n  border: 1px solid rgba(var(--widget-primary-color-rgb), var(--button-border-opacity));\r\n  background-color: rgba(var(--widget-primary-color-rgb), var(--button-background-opacity));\r\n  color: rgba(var(--button-text-color), var(--button-text-opacity));\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n}\r\n.b-button.b-text {\r\n  min-width: 3.3em;\r\n}\r\n.b-button.b-transparent {\r\n  --button-background-opacity: var(--button-transparent-background-opacity);\r\n  --button-text-opacity: var(--button-transparent-text-opacity);\r\n  border: none;\r\n}\r\n.b-button.b-pressed {\r\n  --button-background-opacity: var(--button-pressed-background-opacity);\r\n  --button-text-color: var(--button-pressed-text-color);\r\n}\r\n.b-button.b-pressed.b-transparent {\r\n  --button-text-color: var(--widget-primary-color-rgb);\r\n  --button-background-opacity: var(--button-transparent-background-opacity);\r\n  --button-text-opacity: var(--button-transparent-pressed-text-opacity);\r\n}\r\n.b-button.b-pressed:hover:not(.b-disabled) {\r\n  --button-background-opacity: var(--button-pressed-hover-background-opacity);\r\n}\r\n.b-button.b-pressed:hover:not(.b-disabled).b-transparent {\r\n  --button-background-opacity: var(--button-transparent-hover-background-opacity);\r\n}\r\n.b-button.b-pressed[data-group]:not(.b-disabled):hover {\r\n  --button-background-opacity: var(--button-pressed-hover-background-opacity);\r\n}\r\n.b-button:hover:not(.b-disabled) {\r\n  --button-background-opacity: var(--button-hover-background-opacity);\r\n}\r\n.b-button:hover:not(.b-disabled).b-transparent {\r\n  --button-background-opacity: var(--button-transparent-hover-background-opacity);\r\n}\r\n.b-button:active:not(.b-disabled), .b-button:active:focus:not(.b-disabled) {\r\n  --button-background-opacity: var(--button-active-background-opacity);\r\n  --button-text-color: var(--button-pressed-text-color);\r\n}\r\n.b-using-keyboard .b-button:focus, .b-button.b-using-keyboard:focus {\r\n  --button-background-opacity: var(--button-focus-background-opacity);\r\n}\r\n.b-using-keyboard .b-button:focus.b-pressed:not(.b-transparent), .b-button.b-using-keyboard:focus.b-pressed:not(.b-transparent) {\r\n  --button-background-opacity: var(--button-pressed-focus-background-opacity);\r\n}\r\n.b-button.b-disabled {\r\n  --button-background-opacity: var(--button-disabled-background-opacity);\r\n  --button-text-opacity: var(--button-disabled-text-opacity);\r\n  --button-border-opacity: var(--button-disabled-border-opacity);\r\n}\r\n.b-button.b-disabled.b-pressed {\r\n  --button-background-opacity: var(--button-pressed-disabled-background-opacity);\r\n}\r\n.b-button:not(.b-tab) {\r\n  border-radius: 2px;\r\n}\r\n.b-button::-moz-focus-inner {\r\n  border: 0;\r\n}\r\n.b-button label {\r\n  cursor: pointer;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n.b-button.b-rotate-vertical {\r\n  min-height: 3em;\r\n  min-width: 2.7em;\r\n  padding: 1em 0 1em 0;\r\n}\r\n.b-button.b-rotate-vertical label {\r\n  -webkit-writing-mode: vertical-lr;\r\n  writing-mode: vertical-lr;\r\n  -ms-writing-mode: tb-lr;\r\n}\r\n.b-button.b-rotate-left {\r\n  flex-direction: column-reverse;\r\n}\r\n.b-button.b-rotate-left label {\r\n  transform: rotate(180deg);\r\n}\r\n.b-button.b-rotate-left i {\r\n  transform: rotate(270deg);\r\n}\r\n.b-button.b-rotate-right {\r\n  flex-direction: column;\r\n}\r\n.b-button.b-rotate-right i {\r\n  transform: rotate(90deg);\r\n}\r\n.b-button.b-icon-align-start i:not(.b-button-menu-icon) {\r\n  order: -100;\r\n}\r\n.b-button.b-icon-align-start:not(.b-rotate-vertical) label {\r\n  margin-inline-start: 0.5em;\r\n}\r\n.b-button.b-icon-align-start.b-rotate-right label {\r\n  margin-inline-end: 0.5em;\r\n}\r\n.b-button.b-icon-align-start.b-rotate-left label {\r\n  margin-inline-start: 0.5em;\r\n}\r\n.b-button.b-icon-align-end i {\r\n  order: 100;\r\n}\r\n.b-button.b-icon-align-end:not(.b-rotate-vertical) label {\r\n  margin-inline-end: 0.5em;\r\n}\r\n.b-button.b-icon-align-end.b-rotate-right label {\r\n  margin-inline-start: 0.5em;\r\n}\r\n.b-button.b-icon-align-end.b-rotate-left label {\r\n  margin-inline-end: 0.5em;\r\n}\r\n.b-button .b-button-menu-icon {\r\n  margin-inline-start: 0.5em;\r\n}\r\n.b-button i {\r\n  font-size: 1em;\r\n}\r\n.b-button label:empty {\r\n  display: none;\r\n}\r\n.b-button.b-badge {\r\n  overflow: visible !important;\r\n}\r\n.b-button.b-rounded {\r\n  border-radius: 50%;\r\n  width: 3em;\r\n  height: 3em;\r\n}\r\n.b-button:focus {\r\n  outline: none;\r\n}\r\n.b-button:disabled {\r\n  cursor: default;\r\n}\r\n.b-toolbar-content > .b-button {\r\n  font-size: 0.9em;\r\n}\r\n.b-button.b-borderless {\r\n  border: none;\r\n}\r\n\r\n.b-button.b-raised {\r\n  --button-background-opacity: 1;\r\n  --button-focus-background-opacity: 0.7;\r\n  --button-hover-background-opacity: 0.8;\r\n  --button-pressed-hover-background-opacity: 1;\r\n  color: #fff;\r\n  border: none;\r\n}\r\n.b-button.b-raised:active {\r\n  box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.3);\r\n}\r\n.b-button.b-raised.b-pressed {\r\n  box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.3);\r\n  background-image: linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2));\r\n}\r\n.b-using-keyboard .b-button.b-raised.b-pressed:focus, .b-button.b-raised.b-pressed.b-using-keyboard:focus {\r\n  background-image: linear-gradient(rgba(0, 0, 0, 0.0666666667), rgba(0, 0, 0, 0.0666666667));\r\n}\r\n.b-button.b-raised.b-disabled {\r\n  --widget-primary-color-rgb: 224,224,231;\r\n}\r\n\r\n.b-popup .b-bottom-toolbar .b-button.b-text {\r\n  min-width: 8em;\r\n}\r\n\r\na.b-button {\r\n  text-decoration: none;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-buttongroup {\r\n  overflow: visible;\r\n  flex-shrink: 0;\r\n}\r\n.b-buttongroup.b-content-element {\r\n  display: inline-flex;\r\n  flex-flow: row nowrap;\r\n}\r\n.b-buttongroup.b-content-element.b-rotate-vertical {\r\n  flex-direction: column;\r\n}\r\n.b-toolbar .b-buttongroup {\r\n  font-size: 0.9em;\r\n}\r\n.b-buttongroup .b-button {\r\n  margin: 0;\r\n}\r\n.b-buttongroup .b-button:not(.b-pressed) {\r\n  box-shadow: none !important;\r\n}\r\n.b-buttongroup .b-button.b-pressed, .b-buttongroup .b-button:active {\r\n  z-index: 2;\r\n}\r\n.b-buttongroup .b-button:not(.b-first-visible-child) {\r\n  margin-inline-start: -1px;\r\n}\r\n.b-buttongroup.b-columned.b-content-element {\r\n  flex: 1;\r\n  flex-wrap: wrap;\r\n}\r\n.b-buttongroup.b-columned.b-content-element .b-button {\r\n  margin-inline-start: 0;\r\n}\r\n.b-buttongroup .b-button:not(.b-first-visible-child):not(.b-last-visible-child) {\r\n  border-radius: 0;\r\n}\r\n.b-buttongroup .b-button.b-first-visible-child:not(.b-last-visible-child) {\r\n  border-top-right-radius: 0;\r\n  border-bottom-right-radius: 0;\r\n}\r\n.b-buttongroup .b-button.b-last-visible-child:not(.b-first-visible-child) {\r\n  border-top-left-radius: 0;\r\n  border-bottom-left-radius: 0;\r\n}\r\n.b-buttongroup.b-rtl .b-button.b-first-visible-child:not(.b-last-visible-child) {\r\n  border-top-left-radius: 0;\r\n  border-bottom-left-radius: 0;\r\n}\r\n.b-buttongroup.b-rtl .b-button.b-last-visible-child:not(.b-first-visible-child) {\r\n  border-top-right-radius: 0;\r\n  border-bottom-right-radius: 0;\r\n}\r\n\r\n.b-calendarpanel {\r\n  --min-row-height: 75;\r\n  --min-column-width: 75;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n}\r\n.b-calendarpanel.b-outer {\r\n  display: inline-flex;\r\n}\r\n.b-calendarpanel .b-week-number-cell {\r\n  display: none;\r\n}\r\n.b-calendarpanel.b-show-week-column .b-week-number-cell {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n.b-calendarpanel.b-hide-othermonth-cells .b-calendar-cell.b-other-month {\r\n  visibility: hidden;\r\n  pointer-events: none;\r\n}\r\n.b-calendarpanel.b-disable-othermonth-cells .b-calendar-cell.b-other-month {\r\n  opacity: 0.7;\r\n  pointer-events: none;\r\n}\r\n.b-calendarpanel.b-disable-othermonth-cells .b-calendar-cell.b-other-month.b-first-visible-cell .b-cal-event-wrap {\r\n  pointer-events: all;\r\n}\r\n.b-calendarpanel .b-panel-body-wrap {\r\n  background-color: #f8f9fa;\r\n}\r\n.b-calendarpanel .b-calendar-weekdays .b-calendar-day-header {\r\n  flex: 1 0 0;\r\n  text-align: center;\r\n}\r\n.b-calendarpanel .b-calendarpanel-content {\r\n  flex-flow: column nowrap;\r\n  align-items: stretch;\r\n}\r\n.b-calendarpanel .b-calendarpanel-content.b-hide-nonworking-days .b-calendar-day-header.b-nonworking-day, .b-calendarpanel .b-calendarpanel-content.b-hide-nonworking-days .b-calendar-cell.b-nonworking-day {\r\n  display: none;\r\n}\r\n.b-calendarpanel .b-calendar-row {\r\n  display: flex;\r\n}\r\n.b-calendarpanel .b-calendar-cell {\r\n  display: flex;\r\n  text-align: center;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n}\r\n.b-calendarpanel .b-calendar-days {\r\n  flex: 1 1 auto;\r\n  display: flex;\r\n  justify-content: space-around;\r\n  overflow: hidden;\r\n}\r\n.b-calendarpanel .b-weeks-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n.b-calendarpanel .b-weeks-container.b-min-columnwidth.b-horizontal-overflow {\r\n  align-items: flex-start;\r\n}\r\n.b-calendarpanel .b-weeks-container.b-min-columnwidth.b-horizontal-overflow .b-calendar-row {\r\n  overflow: hidden;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-checkbox {\r\n  --widget-primary-color-rgb: 176,176,183;\r\n  --checkbox-unchecked-check-opacity: 0.1;\r\n  --checkbox-unchecked-check-color: rgb(var(--widget-primary-color-rgb), var(--checkbox-unchecked-check-opacity));\r\n  --checkbox-unchecked-background-color: transparent;\r\n  --checkbox-unchecked-border-color: rgb(var(--widget-primary-color-rgb));\r\n  --checkbox-checked-check-color: #fff;\r\n  --checkbox-checked-background-color: rgb(var(--widget-primary-color-rgb));\r\n  --checkbox-checked-border-color: rgb(var(--widget-primary-color-rgb));\r\n  --checkbox-disabled-unchecked-check-color: transparent;\r\n  --checkbox-disabled-checked-check-color: rgba(128, 128, 128, 0.15);\r\n  --checkbox-disabled-background-color: rgba(128, 128, 128, 0.1);\r\n  --checkbox-disabled-border-color: rgba(128, 128, 128, 0.15);\r\n  --checkbox-check-color: var(--checkbox-unchecked-check-color);\r\n  --checkbox-background-color: var(--checkbox-unchecked-background-color);\r\n  --checkbox-border-color: var(--checkbox-unchecked-border-color);\r\n  --checkbox-label-transition: color 0.2s, background-color 0.2s;\r\n  --checkbox-input-transition: color 0.5s, background-color 0.5s;\r\n  position: relative;\r\n  align-items: center;\r\n}\r\n.b-checkbox.b-field-container > .b-field-inner {\r\n  min-height: 5.4ex;\r\n}\r\n.b-checkbox > .b-field-inner {\r\n  border: none;\r\n  background-color: transparent;\r\n  white-space: nowrap;\r\n  word-break: break-all;\r\n}\r\n.b-checkbox > .b-field-inner .b-checkbox-label {\r\n  position: relative;\r\n  font-size: inherit;\r\n  cursor: pointer;\r\n  color: #4f5964;\r\n  white-space: normal;\r\n}\r\n.b-container .b-checkbox > .b-field-inner .b-checkbox-label {\r\n  color: #616161;\r\n}\r\n.b-checkbox > .b-field-inner .b-checkbox-label:before {\r\n  font-family: "Font Awesome 6 Free", FontAwesome6Free;\r\n  font-weight: 900;\r\n  display: inline-flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin-inline-end: 0.4em;\r\n  font-size: inherit;\r\n  width: 1.6em;\r\n  height: 1.6em;\r\n  padding: 0.15em;\r\n  border-radius: 2px;\r\n  transition: var(--checkbox-label-transition);\r\n  background-color: var(--checkbox-background-color);\r\n  border: 1px solid var(--checkbox-border-color);\r\n}\r\n.b-checkbox > .b-field-inner .b-checkbox-label:not(.b-radio-label):before {\r\n  content: "\\f00c";\r\n  color: var(--checkbox-check-color);\r\n}\r\n.b-checkbox > .b-field-inner input[type=checkbox] {\r\n  z-index: 1;\r\n  opacity: 0;\r\n  width: 2.2em;\r\n  height: 2.2em;\r\n  position: absolute;\r\n  margin: 0;\r\n  cursor: pointer;\r\n  transition: var(--checkbox-input-transition);\r\n}\r\n.b-checkbox > .b-field-inner input[type=checkbox]:checked + .b-checkbox-label:before {\r\n  --checkbox-check-color: var(--checkbox-checked-check-color);\r\n  --checkbox-background-color: var(--checkbox-checked-background-color);\r\n  --checkbox-border-color: var(--checkbox-checked-border-color);\r\n}\r\n.b-checkbox.b-disabled > .b-field-inner {\r\n  --checkbox-check-color: var(--checkbox-disabled-unchecked-check-color);\r\n  --checkbox-background-color: var(--checkbox-disabled-background-color);\r\n  --checkbox-border-color: var(--checkbox-disabled-border-color);\r\n}\r\n.b-checkbox.b-disabled > .b-field-inner .b-checkbox-label {\r\n  color: #b0b0b7;\r\n}\r\n.b-checkbox.b-disabled > .b-field-inner input[type=checkbox]:checked + .b-checkbox-label:before {\r\n  --checkbox-check-color: var(--checkbox-disabled-checked-check-color);\r\n  --checkbox-background-color: var(--checkbox-disabled-background-color);\r\n  --checkbox-border-color: var(--checkbox-disabled-border-color);\r\n}\r\n\r\n.b-container .b-checkbox-label:before {\r\n  margin: 0.675em;\r\n  margin-inline-end: 0.4em;\r\n  margin-inline-start: 0;\r\n  margin-top: 0.5em;\r\n}\r\n\r\n.b-checkbox.b-field-container:not(.b-field-container-inline) > .b-field-container-wrap {\r\n  margin-inline-start: 2.2em;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-combo.b-open .b-fieldtrigger.b-icon-picker:before {\r\n  transform: rotate(180deg);\r\n}\r\n.b-combo.b-inline-picker:not(.b-label-above) {\r\n  flex-wrap: wrap;\r\n  align-content: flex-start;\r\n}\r\n.b-combo.b-inline-picker:not(.b-label-above) .b-field-inner {\r\n  flex-shrink: 0;\r\n  align-self: flex-start;\r\n}\r\n.b-combo.b-inline-picker:not(.b-label-above) .b-combo-picker {\r\n  flex: 1 0 100%;\r\n}\r\n.b-combo .b-field-inner .b-fieldtrigger.b-icon-remove {\r\n  font-size: 0.8em;\r\n}\r\n.b-combo.b-hide-trigger .b-fieldtrigger.b-icon-picker, .b-combo.b-readonly .b-fieldtrigger.b-icon-picker {\r\n  display: none;\r\n}\r\n.b-combo.b-uses-chipview .b-field-inner {\r\n  align-self: stretch;\r\n}\r\n.b-combo.b-uses-chipview .b-chipview {\r\n  align-self: stretch;\r\n  display: flex;\r\n  flex-flow: wrap;\r\n  flex: 1 1 auto;\r\n  align-items: center;\r\n  margin: 0.16em 0.3em;\r\n}\r\n.b-combo.b-uses-chipview .b-chipview:not(.b-empty) input {\r\n  padding-inline-start: 0.2em;\r\n  order: 99999;\r\n}\r\n.b-combo.b-uses-chipview.b-not-editable input {\r\n  order: -1;\r\n  min-width: 0;\r\n  padding-inline: 0;\r\n  flex: 0 1 0;\r\n  margin-inline-start: -0.3em;\r\n}\r\n.b-combo.b-uses-chipview.b-not-editable:not(.b-empty) .b-chipview .b-chip {\r\n  padding-block: calc(0.3em + 0.5px);\r\n  padding-inline: 0.7em;\r\n}\r\n.b-combo.b-uses-chipview.b-not-editable:not(.b-empty) input {\r\n  padding-inline: 0;\r\n}\r\n\r\n.b-list.b-combo-picker.b-empty:not(.b-masked)[data-add-new-value]::after {\r\n  content: attr(data-add-new-value);\r\n  display: block;\r\n  padding: 0.8em;\r\n  color: #4f5964;\r\n  cursor: pointer;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-container.b-outer, .b-auto-container:not(.b-toolbar-content).b-single-child > .b-container {\r\n  align-self: stretch;\r\n  flex: 1 1 auto;\r\n}\r\n\r\nbody.b-container.b-outer {\r\n  margin: 0;\r\n  height: 100%;\r\n  width: 100%;\r\n  overflow: hidden;\r\n}\r\n\r\n.b-container:focus {\r\n  outline: none;\r\n}\r\n\r\n.b-content-element {\r\n  position: relative;\r\n  display: flex;\r\n  flex-flow: row wrap;\r\n}\r\n.b-content-element.b-flex-row {\r\n  align-content: flex-start;\r\n}\r\n.b-content-element.b-text-content {\r\n  display: block;\r\n  overflow: auto;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-datepicker:focus {\r\n  outline: 0;\r\n}\r\n.b-datepicker .b-datepicker-title {\r\n  font-weight: bold;\r\n  gap: 0;\r\n  flex-flow: row nowrap;\r\n  justify-content: center;\r\n  margin: 0 !important;\r\n}\r\n.b-datepicker .b-field {\r\n  background-color: transparent;\r\n  border: 0 none;\r\n  color: #4f5964;\r\n  min-width: 0;\r\n  display: inline-flex;\r\n  flex: none !important;\r\n  width: auto;\r\n  margin-bottom: 0 !important;\r\n  height: 100%;\r\n  cursor: pointer;\r\n}\r\n.b-datepicker .b-field:not(.b-readonly):hover {\r\n  opacity: 0.7;\r\n}\r\n.b-datepicker .b-field .b-field-inner {\r\n  flex: none;\r\n  border: 0 none;\r\n  background-color: transparent;\r\n  align-self: stretch;\r\n  padding: 0;\r\n  box-shadow: none;\r\n}\r\n.b-datepicker .b-field div[type=text] {\r\n  outline: none;\r\n}\r\n.b-datepicker .b-toolbar.b-dock-top {\r\n  background-color: #fff5e6;\r\n  color: #4f5964;\r\n  border-bottom: none;\r\n  min-height: 0;\r\n  font-size: 1.2em;\r\n}\r\n.b-datepicker .b-toolbar.b-dock-top .b-toolbar-content {\r\n  padding: 0.5em 0.5ex !important;\r\n  gap: 0.5ex;\r\n  justify-content: space-around;\r\n}\r\n.b-datepicker .b-toolbar.b-dock-top .b-datepicker-title {\r\n  flex: 1 1 auto;\r\n}\r\n.b-datepicker .b-toolbar.b-dock-top .b-icon, .b-datepicker .b-toolbar.b-dock-top .b-icon-version {\r\n  color: #4f5964;\r\n}\r\n.b-datepicker .b-toolbar.b-dock-top .b-icon:before, .b-datepicker .b-toolbar.b-dock-top .b-icon-version:before {\r\n  line-height: normal;\r\n}\r\n.b-datepicker .b-toolbar.b-dock-top .b-button.b-icon, .b-datepicker .b-toolbar.b-dock-top .b-button.b-icon-version {\r\n  border: none;\r\n  border-radius: 50%;\r\n  min-width: 0;\r\n  min-height: 0;\r\n  width: 2em;\r\n  height: 2em;\r\n  font-size: 80%;\r\n}\r\n.b-datepicker .b-toolbar.b-dock-top .b-button.b-icon:hover, .b-datepicker .b-toolbar.b-dock-top .b-button.b-icon-version:hover {\r\n  opacity: 0.7;\r\n}\r\n.b-datepicker .b-toolbar.b-dock-top .b-button.b-icon:not(.b-contains-focus), .b-datepicker .b-toolbar.b-dock-top .b-button.b-icon-version:not(.b-contains-focus) {\r\n  background: transparent !important;\r\n}\r\n.b-datepicker .b-calendar-weekdays {\r\n  background-color: #fff5e6;\r\n  font-size: 0.85em;\r\n}\r\n.b-datepicker .b-calendar-weekdays .b-calendar-day-header {\r\n  padding: 0.4em 0;\r\n}\r\n.b-datepicker.b-show-week-column .b-week-number-cell {\r\n  line-height: 2.25em;\r\n  width: 2.25em;\r\n  margin: 5px 4px;\r\n  text-align: center;\r\n}\r\n.b-datepicker .b-calendarpanel-content {\r\n  padding: 0;\r\n  justify-content: flex-start;\r\n}\r\n.b-datepicker .b-week-number-cell {\r\n  color: #76c579;\r\n}\r\n.b-datepicker .b-calendar-cell {\r\n  outline: 0 none;\r\n  position: relative;\r\n  flex: 1 0 2.25em;\r\n  padding: 0 4px;\r\n  margin: 5px 0;\r\n  transition: background-color 0.2s, color 0.2s;\r\n  align-items: center;\r\n}\r\n.b-datepicker .b-calendar-cell > .b-datepicker-cell-inner {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 2.25em;\r\n  width: 2.25em;\r\n  border-width: 1px;\r\n  border-style: solid;\r\n  border-color: transparent;\r\n  border-radius: 50%;\r\n}\r\n.b-datepicker .b-calendar-cell.b-today > .b-datepicker-cell-inner {\r\n  border-color: #feac31;\r\n  border-width: 1px;\r\n}\r\n.b-datepicker .b-calendar-cell.b-active-date:not(.b-selected-date) > .b-datepicker-cell-inner {\r\n  border-color: #feac31;\r\n}\r\n.b-datepicker .b-calendar-cell.b-selected-date:not(.b-in-range) > .b-datepicker-cell-inner {\r\n  color: #fff;\r\n  background-color: #3183fe;\r\n  border-color: #3183fe;\r\n}\r\n.b-datepicker .b-calendar-cell.b-other-month > .b-datepicker-cell-inner {\r\n  color: #bbb;\r\n}\r\n.b-datepicker .b-calendar-cell:not(.b-disabled-date, .b-selected-date) > .b-datepicker-cell-inner {\r\n  cursor: pointer;\r\n}\r\n.b-datepicker .b-calendar-cell:not(.b-disabled-date, .b-selected-date) > .b-datepicker-cell-inner:hover {\r\n  background-color: rgba(49, 131, 254, 0.15);\r\n  border-color: transparent;\r\n}\r\n.b-datepicker .b-calendar-cell:not(.b-disabled-date, .b-selected-date) > .b-datepicker-cell-inner:hover.b-today {\r\n  background-color: #feac31;\r\n  border-color: #feac31;\r\n}\r\n.b-datepicker .b-calendar-cell.b-out-of-range > .b-datepicker-cell-inner {\r\n  color: #aaa;\r\n}\r\n.b-datepicker .b-calendar-cell.b-disabled-date > .b-datepicker-cell-inner {\r\n  color: #aaa;\r\n  opacity: 0.4;\r\n}\r\n.b-datepicker .b-calendar-cell.b-in-range {\r\n  background-color: rgba(49, 131, 254, 0.15);\r\n  border-radius: 0 !important;\r\n}\r\n.b-datepicker .b-calendar-cell.b-in-range.b-first-visible-cell {\r\n  clip-path: polygon(0 50%, 8px 0, 100% 0, 100% 100%, 8px 100%);\r\n}\r\n.b-datepicker .b-calendar-cell.b-in-range.b-last-visible-cell {\r\n  clip-path: polygon(0 0, calc(100% - 8px) 0, 100% 50%, calc(100% - 8px) 100%, 0 100%);\r\n}\r\n.b-datepicker .b-calendar-cell.b-range-start, .b-datepicker .b-calendar-cell.b-range-end {\r\n  z-index: 0;\r\n}\r\n.b-datepicker .b-calendar-cell.b-range-start:before, .b-datepicker .b-calendar-cell.b-range-end:before {\r\n  content: " ";\r\n  background-color: rgba(49, 131, 254, 0.15);\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  z-index: -1;\r\n}\r\n.b-datepicker .b-calendar-cell.b-range-start > .b-datepicker-cell-inner, .b-datepicker .b-calendar-cell.b-range-end > .b-datepicker-cell-inner {\r\n  position: relative;\r\n  background-color: #fff;\r\n}\r\n.b-datepicker .b-calendar-cell.b-range-start > .b-datepicker-cell-inner:after, .b-datepicker .b-calendar-cell.b-range-end > .b-datepicker-cell-inner:after {\r\n  content: " ";\r\n  background-color: rgba(49, 131, 254, 0.15);\r\n  border-radius: 50%;\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  z-index: -1;\r\n}\r\n.b-datepicker .b-calendar-cell.b-range-start:before {\r\n  left: 50%;\r\n}\r\n.b-datepicker .b-calendar-cell.b-range-end:before {\r\n  right: 50%;\r\n}\r\n.b-datepicker.b-multiselect .b-calendar-cell {\r\n  flex-grow: 1 !important;\r\n  margin-inline: 0 !important;\r\n}\r\n.b-datepicker.b-rtl .b-icon::before, .b-datepicker.b-rtl .b-icon-version::before {\r\n  transform: scaleX(-1);\r\n}\r\n.b-datepicker .b-yearpicker {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.b-datepicker .b-datepicker-yearbutton {\r\n  margin-inline-start: 0.5ex;\r\n  padding: 0;\r\n  border: 0 none;\r\n  color: inherit !important;\r\n  min-height: unset;\r\n  min-width: unset;\r\n  background-color: unset;\r\n  font-weight: 400;\r\n}\r\n.b-datepicker .b-datepicker-yearbutton:not(.b-disabled):not(.b-tab):hover {\r\n  opacity: 0.7;\r\n  background-color: unset;\r\n}\r\n\r\n.b-readonly-combo-list.b-empty {\r\n  display: none;\r\n}\r\n.b-readonly-combo-list .b-list-item {\r\n  min-width: auto;\r\n}\r\n.b-visible-scrollbar .b-readonly-combo-list .b-list-item {\r\n  padding-inline-end: 2em;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-editor {\r\n  background-color: #fff;\r\n  border-radius: 2px;\r\n}\r\n.b-editor.b-positioned {\r\n  box-shadow: 0 0 6px rgba(0, 0, 0, 0.1);\r\n}\r\n.b-editor.b-content-element > .b-widget.b-field {\r\n  margin: 0;\r\n}\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n@keyframes b-field-updated {\r\n  0% {\r\n    color: #4f5964;\r\n  }\r\n  25% {\r\n    color: #9ca6b0;\r\n  }\r\n  75% {\r\n    color: #9ca6b0;\r\n  }\r\n  100% {\r\n    color: #4f5964;\r\n  }\r\n}\r\n.b-has-label.b-label-above {\r\n  flex-direction: column;\r\n}\r\n.b-has-label.b-label-before .b-label {\r\n  align-self: center;\r\n  margin-inline-end: 1em;\r\n}\r\n.b-has-label.b-label-above .b-label {\r\n  align-self: flex-start;\r\n  flex: none !important;\r\n  margin: 0 0 0.4em 0.1em;\r\n}\r\n.b-has-label.b-open .b-label, .b-has-label:focus-within .b-label, .b-has-label.b-ie:focus .b-label {\r\n  color: #4f5964;\r\n}\r\n.b-container .b-has-label .b-label.b-align-end {\r\n  margin-inline-start: 1em;\r\n  text-align: left;\r\n}\r\n.b-container .b-has-label.b-open .b-label, .b-container .b-has-label:focus-within .b-label, .b-container .b-has-label.b-ie:focus .b-label {\r\n  color: #212121;\r\n}\r\n.b-has-label.b-invalid .b-label {\r\n  color: #e53f2c !important;\r\n}\r\n.b-has-label.b-disabled .b-label {\r\n  color: #b0b0b7;\r\n}\r\n\r\n.b-field-updated {\r\n  animation-name: b-field-updated;\r\n  animation-duration: 0.5s;\r\n}\r\n\r\n.b-vbox.b-box-justify-stretch > .b-field,\r\n.b-flex-column > .b-field {\r\n  width: auto;\r\n}\r\n\r\n.b-flex-row > .b-field {\r\n  align-self: flex-start;\r\n  flex: 1 0 100%;\r\n  margin-bottom: 0.6em;\r\n}\r\n.b-flex-row > .b-field.b-label-above {\r\n  margin-bottom: 1.2em;\r\n}\r\n.b-flex-row > .b-field.b-inline .b-field-inner {\r\n  margin-inline-end: 0.6em;\r\n}\r\n.b-flex-row > .b-field.b-last-visible-child, .b-flex-row > .b-field.b-last-row {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.b-vbox > .b-field {\r\n  margin-bottom: 0.6em;\r\n}\r\n.b-vbox > .b-field.b-label-above {\r\n  margin-bottom: 1.2em;\r\n}\r\n.b-vbox > .b-field:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.b-field-inner {\r\n  display: flex;\r\n  flex: 1 1 100%;\r\n  align-items: center;\r\n  background-color: #fff;\r\n  border-radius: 2px;\r\n  border-width: 1px;\r\n  border-style: solid;\r\n  border-color: #d0d1d2;\r\n  min-width: 0;\r\n  position: relative;\r\n}\r\n.b-field-container-inline > .b-field-inner {\r\n  flex: 0 1 auto;\r\n}\r\n\r\n.b-field-container:not(.b-field-container-inline) {\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.b-field-container-wrap {\r\n  display: flex;\r\n  flex: 1 1 auto;\r\n  overflow: hidden;\r\n  position: relative;\r\n}\r\n.b-field-container-wrap > .b-container {\r\n  width: 100%;\r\n}\r\n.b-field.b-collapsed:not(.b-field-container-inline) > .b-field-container-wrap {\r\n  height: 0;\r\n}\r\n.b-field.b-collapsed.b-field-container-inline > .b-field-container-wrap {\r\n  opacity: 0;\r\n}\r\n\r\n.b-field.b-collapsed:not(.b-field-container-inline) > .b-field-container-wrap > .b-container, .b-field.b-collapsing:not(.b-field-container-inline) > .b-field-container-wrap > .b-container {\r\n  position: absolute;\r\n  bottom: 0;\r\n}\r\n\r\n.b-field-container-inline:not(.b-no-input) > .b-field-container-wrap {\r\n  margin-inline-start: 1em;\r\n}\r\n\r\n.b-field-hint {\r\n  align-self: stretch;\r\n  overflow: visible;\r\n  pointer-events: none;\r\n  position: relative;\r\n  white-space: nowrap;\r\n  width: 0;\r\n}\r\n.b-field-hint .b-field-hint-content {\r\n  position: absolute;\r\n  inset-inline-end: 0.6em;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  font-size: 0.9em;\r\n  text-transform: uppercase;\r\n}\r\n.b-legacy-inset .b-field-hint .b-field-hint-content {\r\n  right: 0.6em;\r\n}\r\n.b-legacy-inset .b-field-hint .b-field-hint-content.b-rtl {\r\n  left: 0.6em;\r\n}\r\n.b-field-no-hint .b-field-hint {\r\n  display: none;\r\n}\r\n\r\n.b-numberfield,\r\n.b-textareafield,\r\n.b-textfield {\r\n  align-items: stretch;\r\n  min-width: 3em;\r\n  color: #4f5964;\r\n  border-radius: 2px;\r\n  position: relative;\r\n  width: 12.5em;\r\n}\r\n.b-numberfield.b-has-width,\r\n.b-textareafield.b-has-width,\r\n.b-textfield.b-has-width {\r\n  width: auto;\r\n}\r\n.b-numberfield.b-contains-focus .b-field-inner,\r\n.b-textareafield.b-contains-focus .b-field-inner,\r\n.b-textfield.b-contains-focus .b-field-inner {\r\n  border-color: rgba(254, 172, 49, 0.6);\r\n}\r\n.b-numberfield .b-fieldtrigger,\r\n.b-textareafield .b-fieldtrigger,\r\n.b-textfield .b-fieldtrigger {\r\n  color: #b0b1b2;\r\n  font-size: 0.9em;\r\n  cursor: pointer;\r\n  flex: 0 0 auto;\r\n  align-items: center;\r\n}\r\n.b-numberfield .b-fieldtrigger.b-align-start,\r\n.b-textareafield .b-fieldtrigger.b-align-start,\r\n.b-textfield .b-fieldtrigger.b-align-start {\r\n  padding-inline: 0.8em 0;\r\n}\r\n.b-numberfield .b-fieldtrigger.b-align-end,\r\n.b-textareafield .b-fieldtrigger.b-align-end,\r\n.b-textfield .b-fieldtrigger.b-align-end {\r\n  padding-inline: 0 0.8em;\r\n}\r\n.b-numberfield .b-fieldtrigger:before,\r\n.b-textareafield .b-fieldtrigger:before,\r\n.b-textfield .b-fieldtrigger:before {\r\n  font-size: 1.3em;\r\n  transition: transform 0.3s;\r\n}\r\n.b-numberfield .b-spintrigger,\r\n.b-textareafield .b-spintrigger,\r\n.b-textfield .b-spintrigger {\r\n  flex-direction: column;\r\n  font-size: 1em;\r\n}\r\n.b-numberfield .b-spintrigger .b-spin-up:before,\r\n.b-textareafield .b-spintrigger .b-spin-up:before,\r\n.b-textfield .b-spintrigger .b-spin-up:before {\r\n  content: "\\f0d8";\r\n  vertical-align: bottom;\r\n}\r\n.b-numberfield .b-spintrigger .b-spin-down:before,\r\n.b-textareafield .b-spintrigger .b-spin-down:before,\r\n.b-textfield .b-spintrigger .b-spin-down:before {\r\n  content: "\\f0d7";\r\n  vertical-align: top;\r\n}\r\n.b-numberfield.b-hide-spinner .b-spintrigger,\r\n.b-textareafield.b-hide-spinner .b-spintrigger,\r\n.b-textfield.b-hide-spinner .b-spintrigger {\r\n  display: none;\r\n}\r\n.b-numberfield input, .b-numberfield textarea,\r\n.b-textareafield input,\r\n.b-textareafield textarea,\r\n.b-textfield input,\r\n.b-textfield textarea {\r\n  background-color: transparent;\r\n  color: inherit;\r\n  padding: 0.8em;\r\n  font-weight: 400;\r\n  flex: 1 1 0;\r\n  border: 0 none;\r\n  margin: 0;\r\n  font-family: inherit;\r\n  font-size: inherit;\r\n  min-width: 1em;\r\n  text-align: inherit;\r\n}\r\n.b-numberfield input:focus, .b-numberfield textarea:focus,\r\n.b-textareafield input:focus,\r\n.b-textareafield textarea:focus,\r\n.b-textfield input:focus,\r\n.b-textfield textarea:focus {\r\n  outline: none;\r\n}\r\n.b-numberfield input::-ms-clear, .b-numberfield textarea::-ms-clear,\r\n.b-textareafield input::-ms-clear,\r\n.b-textareafield textarea::-ms-clear,\r\n.b-textfield input::-ms-clear,\r\n.b-textfield textarea::-ms-clear {\r\n  display: none;\r\n}\r\n.b-numberfield textarea,\r\n.b-textareafield textarea,\r\n.b-textfield textarea {\r\n  align-self: stretch;\r\n}\r\n.b-numberfield ::-webkit-input-placeholder,\r\n.b-textareafield ::-webkit-input-placeholder,\r\n.b-textfield ::-webkit-input-placeholder {\r\n  color: #b0b0b7;\r\n}\r\n.b-numberfield.b-empty .b-fieldtrigger.b-icon-remove,\r\n.b-textareafield.b-empty .b-fieldtrigger.b-icon-remove,\r\n.b-textfield.b-empty .b-fieldtrigger.b-icon-remove {\r\n  visibility: hidden;\r\n}\r\n.b-numberfield:focus-within .b-label i,\r\n.b-textareafield:focus-within .b-label i,\r\n.b-textfield:focus-within .b-label i {\r\n  color: rgba(254, 172, 49, 0.6);\r\n}\r\n.b-numberfield:not(.b-disabled):hover .b-label i,\r\n.b-textareafield:not(.b-disabled):hover .b-label i,\r\n.b-textfield:not(.b-disabled):hover .b-label i {\r\n  color: rgba(254, 172, 49, 0.6);\r\n}\r\n.b-numberfield:not(.b-disabled):hover .b-field-inner,\r\n.b-textareafield:not(.b-disabled):hover .b-field-inner,\r\n.b-textfield:not(.b-disabled):hover .b-field-inner {\r\n  border-color: rgba(254, 172, 49, 0.6);\r\n}\r\n.b-numberfield.b-invalid .b-field-inner,\r\n.b-textareafield.b-invalid .b-field-inner,\r\n.b-textfield.b-invalid .b-field-inner {\r\n  border-color: #e53f2c !important;\r\n}\r\n.b-numberfield.b-disabled,\r\n.b-textareafield.b-disabled,\r\n.b-textfield.b-disabled {\r\n  color: #b0b0b7;\r\n  cursor: default;\r\n}\r\n.b-numberfield.b-disabled input,\r\n.b-textareafield.b-disabled input,\r\n.b-textfield.b-disabled input {\r\n  cursor: text;\r\n}\r\n.b-numberfield.b-disabled .b-fieldtrigger,\r\n.b-textareafield.b-disabled .b-fieldtrigger,\r\n.b-textfield.b-disabled .b-fieldtrigger {\r\n  color: #e4e4e4;\r\n}\r\n.b-numberfield.b-disabled .b-fieldtrigger,\r\n.b-textareafield.b-disabled .b-fieldtrigger,\r\n.b-textfield.b-disabled .b-fieldtrigger {\r\n  cursor: default;\r\n}\r\n.b-numberfield.b-disabled .b-field-inner,\r\n.b-textareafield.b-disabled .b-field-inner,\r\n.b-textfield.b-disabled .b-field-inner {\r\n  border-style: solid;\r\n}\r\n.b-numberfield.b-readonly,\r\n.b-textareafield.b-readonly,\r\n.b-textfield.b-readonly {\r\n  cursor: default;\r\n}\r\n.b-numberfield.b-readonly input,\r\n.b-textareafield.b-readonly input,\r\n.b-textfield.b-readonly input {\r\n  cursor: text;\r\n}\r\n.b-numberfield.b-readonly .b-fieldtrigger,\r\n.b-textareafield.b-readonly .b-fieldtrigger,\r\n.b-textfield.b-readonly .b-fieldtrigger {\r\n  color: #e4e4e4;\r\n  cursor: default;\r\n}\r\n\r\n.b-numberfield input[type=number]::-webkit-inner-spin-button,\r\n.b-numberfield input[type=number]::-webkit-outer-spin-button {\r\n  -webkit-appearance: none;\r\n  margin: 0;\r\n}\r\n.b-numberfield input[type=number] {\r\n  -moz-appearance: textfield;\r\n}\r\n.b-numberfield .b-field-inner .b-fieldtrigger.b-icon-remove {\r\n  font-size: 0.8em;\r\n}\r\n\r\n.b-tooltip.b-field-error-tip {\r\n  border: 1px solid #e53f2c;\r\n}\r\n.b-tooltip.b-field-error-tip .b-popup-content {\r\n  background-color: #fffef6;\r\n  color: #e53f2c;\r\n  font-weight: bold;\r\n}\r\n\r\n.b-divider {\r\n  position: relative;\r\n  justify-content: center;\r\n  margin: 1em 0 1.5em 0;\r\n}\r\n.b-divider::before {\r\n  content: "";\r\n  width: 100%;\r\n  border-bottom: 1px solid #d0d1d2;\r\n  position: absolute;\r\n  top: 50%;\r\n}\r\n.b-divider::after {\r\n  display: flex;\r\n  content: attr(data-text);\r\n  color: #616161;\r\n  background: #f8f9fa;\r\n  padding: 0 1em;\r\n  z-index: 1;\r\n  text-transform: uppercase;\r\n  font-size: 0.8em;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-fieldfilterpicker .b-fieldfilterpicker-property {\r\n  flex: 0 0 50%;\r\n}\r\n.b-fieldfilterpicker .b-fieldfilterpicker-operator {\r\n  flex: 0 1 50%;\r\n  margin-inline-start: 1em;\r\n}\r\n.b-fieldfilterpicker .b-fieldfilterpicker-combo-locked > .b-field-inner {\r\n  border: none;\r\n  background: none;\r\n}\r\n.b-fieldfilterpicker .b-fieldfilterpicker-values {\r\n  margin-block-end: 0.2em;\r\n}\r\n.b-fieldfilterpicker .b-fieldfilterpicker-values > .b-field {\r\n  flex: 1;\r\n  margin-block-end: 0;\r\n}\r\n.b-fieldfilterpicker .b-fieldfilterpicker-value-separator {\r\n  flex: none;\r\n  padding: 0 0.4em;\r\n  align-self: center;\r\n}\r\n.b-fieldfilterpicker .b-fieldfilterpicker-values > .b-field:last-child::after {\r\n  display: none;\r\n}\r\n\r\n.b-fieldfilterpickergroup .b-fieldfilterpickergroup-row {\r\n  padding-top: 2.2em;\r\n  position: relative;\r\n  flex-shrink: 0;\r\n}\r\n.b-fieldfilterpickergroup .b-fieldfilterpickergroup-row:first-child {\r\n  padding-top: 0;\r\n}\r\n.b-fieldfilterpickergroup .b-fieldfilterpickergroup-row::before {\r\n  content: attr(data-separator-text);\r\n  font-size: 85%;\r\n  position: absolute;\r\n  text-align: center;\r\n  line-height: 2.2em;\r\n  width: 100%;\r\n  height: 2.2em;\r\n  top: 0;\r\n  background-image: linear-gradient(to right, #e0e0e7, #e0e0e7 44%, transparent 46%, transparent 54%, #e0e0e7 56%);\r\n  background-position: 0 50%;\r\n  background-size: 100% 1px;\r\n  background-repeat: no-repeat;\r\n}\r\n.b-fieldfilterpickergroup .b-fieldfilterpickergroup-row:first-child::before {\r\n  display: none;\r\n}\r\n.b-fieldfilterpickergroup .b-fieldfilterpickergroup-filter-active {\r\n  flex: 0 0 2.2em;\r\n}\r\n.b-fieldfilterpickergroup .b-fieldfilterpickergroup-other-filters {\r\n  padding: 0.5em 0;\r\n}\r\n.b-fieldfilterpickergroup .b-fieldfilterpickergroup-add-button {\r\n  align-self: center;\r\n  margin-top: 1.1em;\r\n}\r\n.b-fieldfilterpickergroup .b-fieldfilterpickergroup-remove {\r\n  padding: 0 0.25em;\r\n  margin-inline-start: 0.5em;\r\n}\r\n\r\n.b-filepicker {\r\n  overflow: visible;\r\n}\r\n.b-filepicker.b-content-element {\r\n  align-content: stretch;\r\n}\r\n\r\n.b-displayfield {\r\n  color: inherit;\r\n}\r\n.b-displayfield .b-field-inner {\r\n  border: 0;\r\n  background: transparent;\r\n}\r\n.b-displayfield .b-field-inner span {\r\n  padding: 0.8em;\r\n}\r\n\r\n.b-pickerfield.b-open .b-field-inner {\r\n  border-color: #feac31;\r\n}\r\n.b-pickerfield:not(.b-readonly):not(.b-disabled) input[readonly] {\r\n  cursor: pointer;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-datefield.b-open .b-fieldtrigger {\r\n  color: #feac31 !important;\r\n}\r\n.b-datefield.b-no-steppers .b-step-trigger {\r\n  display: none;\r\n}\r\n.b-datefield.b-rtl .b-step-trigger::before {\r\n  transform: scaleX(-1);\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-datetimefield {\r\n  align-items: center;\r\n  position: relative;\r\n}\r\n.b-datetimefield input {\r\n  text-align: center;\r\n}\r\n.b-datetimefield .b-field-inner {\r\n  height: 100%;\r\n}\r\n.b-datetimefield .b-datefield {\r\n  flex: 1 1 55%;\r\n  border-top-right-radius: 0;\r\n  border-bottom-right-radius: 0;\r\n}\r\n.b-datetimefield .b-datefield .b-field-inner {\r\n  border: none;\r\n  border-inline-end: 1px solid #dedfe0;\r\n  border-top-right-radius: 0;\r\n  border-bottom-right-radius: 0;\r\n}\r\n.b-datetimefield .b-timefield {\r\n  flex: 1 1 45%;\r\n  border-top-left-radius: 0;\r\n  border-bottom-left-radius: 0;\r\n}\r\n.b-datetimefield .b-timefield .b-field-inner {\r\n  border: none;\r\n  border-top-left-radius: 0;\r\n  border-bottom-left-radius: 0;\r\n}\r\n.b-datetimefield:not(.b-disabled):hover .b-field-inner, .b-datetimefield:focus-within .b-field-inner {\r\n  border-color: rgba(254, 172, 49, 0.6);\r\n}\r\n.b-datetimefield:not(.b-disabled):hover .b-datefield .b-field-inner, .b-datetimefield:focus-within .b-datefield .b-field-inner {\r\n  border-inline-end: 1px solid #dedfe0;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-label {\r\n  align-items: center;\r\n  color: #4f5964;\r\n  font-size: 0.9em;\r\n  text-transform: uppercase;\r\n  text-align: right;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n}\r\n.b-container .b-label {\r\n  color: #616161;\r\n  margin-inline-start: 0.3em;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-list {\r\n  display: block;\r\n  background-color: white;\r\n  outline: none;\r\n  padding: 0;\r\n  margin: 0;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n}\r\n.b-list.b-floating {\r\n  border-radius: 2px;\r\n}\r\n.b-list.b-empty:not(.b-masked) {\r\n  min-height: initial !important;\r\n}\r\n.b-list.b-empty:not(.b-masked)[data-empty-text]::after {\r\n  content: attr(data-empty-text);\r\n  display: block;\r\n  padding: 0.8em;\r\n  color: #4f5964;\r\n}\r\n.b-list.b-masked {\r\n  padding: 2em 0;\r\n}\r\n.b-list .b-selected-icon {\r\n  margin-inline-end: 0.5em;\r\n  display: none;\r\n}\r\n.b-list .b-select-all-item {\r\n  border-bottom: 1px solid;\r\n  font-weight: 600;\r\n  position: sticky;\r\n  top: 0;\r\n  background-color: white;\r\n  z-index: 1;\r\n}\r\n.b-list.b-multiselect .b-list-item .b-selected-icon {\r\n  display: initial;\r\n  visibility: hidden;\r\n}\r\n.b-list.b-multiselect .b-list-item.b-selected .b-selected-icon {\r\n  visibility: visible;\r\n}\r\n\r\n.b-list-item {\r\n  position: relative;\r\n  padding: 0.8em;\r\n  color: #4f5964;\r\n  cursor: pointer;\r\n  background-color: transparent;\r\n  transition: background-color 0.2s, color 0.2s;\r\n  border-top: 1px dotted rgba(224, 224, 231, 0.8);\r\n  min-width: 100px;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n}\r\n.b-list-item.b-hidden {\r\n  display: none;\r\n}\r\n.b-list-item:first-child {\r\n  border-top: none;\r\n  border-top-right-radius: 2px;\r\n  border-top-left-radius: 2px;\r\n}\r\n.b-list-item:last-child {\r\n  border-bottom-right-radius: 2px;\r\n  border-bottom-left-radius: 2px;\r\n}\r\n.b-list-item.b-active, .b-list-item:focus {\r\n  outline: none;\r\n}\r\n.b-list-item.b-active:not(.b-disabled), .b-list-item:focus:not(.b-disabled) {\r\n  background-color: rgba(254, 172, 49, 0.3);\r\n  color: #4f5964;\r\n}\r\n.b-list-item.b-list-item-group-header {\r\n  font-weight: bold;\r\n}\r\n.b-list-item.b-list-item-group-header .b-icon-check {\r\n  display: none;\r\n}\r\n.b-grouped .b-list-item:not(.b-list-item-group-header) {\r\n  padding-inline-start: 2em;\r\n}\r\n\r\n.b-chip {\r\n  display: flex;\r\n  align-items: center;\r\n  padding-block: 0.3em;\r\n  padding-inline: 0.7em;\r\n  border-radius: 1em;\r\n  background-color: #e0e0e7;\r\n  color: #5a6672;\r\n  transition: background-color 0.3s, color 0.3s;\r\n}\r\n.b-chip .b-icon, .b-chip .b-icon-version {\r\n  height: 1.5em;\r\n  width: 1.5em;\r\n  border-radius: 50%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background-color: #eeeef2;\r\n  color: #474849;\r\n}\r\n.b-chip .b-icon:first-child:not(.b-close-icon), .b-chip .b-icon-version:first-child:not(.b-close-icon) {\r\n  margin-inline-end: 0.5em;\r\n  margin-inline-start: -0.4em;\r\n}\r\n.b-chip:hover {\r\n  background-color: #d2d2dc;\r\n  color: #4f5964;\r\n}\r\n.b-chip:hover .b-icon, .b-chip:hover .b-icon-version {\r\n  background-color: #eeeef2;\r\n  color: #474849;\r\n}\r\n.b-chip.b-selected {\r\n  background-color: #feac31;\r\n  color: #fff;\r\n}\r\n.b-chip.b-selected .b-icon, .b-chip.b-selected .b-icon-version {\r\n  background-color: #eeeef2;\r\n  color: #feac31;\r\n}\r\n.b-chip.b-selected:hover {\r\n  background-color: #fea218;\r\n  color: #fff;\r\n}\r\n.b-chip.b-selected:hover .b-icon, .b-chip.b-selected:hover .b-icon-version {\r\n  background-color: #eeeef2;\r\n  color: #fea218;\r\n}\r\n.b-chip.b-active {\r\n  outline: 1px solid rgba(254, 172, 49, 0.6);\r\n  outline-offset: 2px;\r\n}\r\n.b-chip .b-close-icon {\r\n  margin-inline-start: 0.5em;\r\n  cursor: pointer;\r\n}\r\n\r\n.b-chipview {\r\n  background-color: transparent;\r\n  gap: 0.3em;\r\n}\r\n.b-chipview.b-empty::after {\r\n  display: none;\r\n}\r\n.b-chipview input {\r\n  padding-top: 0.6em;\r\n  padding-bottom: calc(0.6em + 1px);\r\n}\r\n.b-chipview.b-chips-closable .b-chip {\r\n  padding-inline-end: 0.3em;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n@keyframes maskOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-masked {\r\n  position: relative;\r\n}\r\n\r\n.b-mask {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  bottom: 0;\r\n  right: 0;\r\n  z-index: 10000;\r\n  background-color: transparent;\r\n}\r\n.b-mask:not(.b-prevent-transitions) {\r\n  transition: opacity 1s;\r\n}\r\n.b-mask.b-visible {\r\n  pointer-events: all;\r\n  opacity: 1;\r\n}\r\n.b-mask.b-visible:not(.b-prevent-transitions):not(.b-delayed-show) {\r\n  animation: maskOpacity 0.3s ease 0s 1;\r\n}\r\n.b-mask.b-hidden {\r\n  pointer-events: none;\r\n  opacity: 0;\r\n}\r\n.b-mask.b-hidden:not(.b-prevent-transitions) {\r\n  animation: maskOpacity 0.2s ease 0s 1 reverse;\r\n}\r\n.b-mask.b-delayed-show {\r\n  opacity: 0;\r\n}\r\n.b-mask.b-mask-bright, .b-mask.b-mask-bright-blur {\r\n  background-color: rgba(255, 255, 255, 0.6980392157);\r\n}\r\n.b-mask.b-mask-dark, .b-mask.b-mask-dark-blur {\r\n  background-color: rgba(0, 0, 0, 0.2980392157);\r\n}\r\n\r\n.b-mask-content {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  display: flex;\r\n  flex-direction: column;\r\n  color: #fff;\r\n  background-color: #feac31;\r\n  border-radius: 2px;\r\n}\r\n\r\n.b-mask-text {\r\n  padding: 1em;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.b-mask-progress-bar {\r\n  height: 3px;\r\n  background-color: #3183fe;\r\n}\r\n\r\n.b-mask-icon {\r\n  margin-inline-end: 0.5em;\r\n}\r\n\r\n.b-masked-dark-blur,\r\n.b-masked-bright-blur {\r\n  filter: blur(3px);\r\n  transform: scale(1.01);\r\n  transition: all 0.5s;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-messagedialog.b-popup {\r\n  min-width: 18em;\r\n}\r\n.b-messagedialog.b-popup .b-button {\r\n  min-width: 9em;\r\n}\r\n.b-messagedialog.b-popup .b-messagedialog-header,\r\n.b-messagedialog.b-popup .b-messagedialog-content {\r\n  padding: 1em;\r\n}\r\n.b-messagedialog.b-popup .b-messagedialog-content.b-panel-content {\r\n  border-radius: 0;\r\n  min-height: 4em;\r\n}\r\n.b-messagedialog.b-popup .b-messagedialog-input,\r\n.b-messagedialog.b-popup .b-messagedialog-okbutton,\r\n.b-messagedialog.b-popup .b-messagedialog-cancelbutton {\r\n  display: none;\r\n}\r\n.b-messagedialog.b-popup.b-messagedialog-prompt .b-messagedialog-okbutton,\r\n.b-messagedialog.b-popup.b-messagedialog-prompt .b-messagedialog-cancelbutton, .b-messagedialog.b-popup.b-messagedialog-confirm .b-messagedialog-okbutton,\r\n.b-messagedialog.b-popup.b-messagedialog-confirm .b-messagedialog-cancelbutton {\r\n  display: initial;\r\n}\r\n.b-messagedialog.b-popup.b-messagedialog-prompt .b-messagedialog-input {\r\n  display: initial;\r\n  margin: 1em 0 0 0;\r\n}\r\n.b-messagedialog.b-popup.b-messagedialog-alert .b-messagedialog-okbutton {\r\n  display: initial;\r\n}\r\n.b-messagedialog.b-popup .b-panel-body-wrap {\r\n  background: #f8f9fa;\r\n}\r\n.b-messagedialog.b-popup .b-popup-content,\r\n.b-messagedialog.b-popup .b-toolbar {\r\n  background: transparent;\r\n}\r\n.b-messagedialog.b-popup .b-toolbar .b-toolbar-content {\r\n  justify-content: flex-end;\r\n}\r\n.b-messagedialog.b-popup .b-toolbar .b-toolbar-content .b-button:not(:first-child) {\r\n  margin-inline-start: 1em;\r\n}\r\n\r\n.b-pagingtoolbar .b-toolbar-content {\r\n  justify-content: center;\r\n}\r\n.b-pagingtoolbar .b-toolbar-content .b-numberfield {\r\n  width: unset;\r\n}\r\n.b-pagingtoolbar .b-toolbar-content .b-numberfield input {\r\n  width: 4em;\r\n  text-align: center;\r\n}\r\n.b-pagingtoolbar .b-toolbar-content .b-disabled.b-html {\r\n  color: #b0b0b7;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-panel.b-floating {\r\n  border-radius: 2px;\r\n}\r\n.b-panel.b-floating > .b-panel-body-wrap > .b-panel-content {\r\n  border-radius: 2px;\r\n}\r\n.b-panel.b-floating > .b-panel-header.b-dock-top, .b-panel.b-floating:not(.b-has-header) > .b-panel-body-wrap > .b-toolbar.b-dock-top {\r\n  border-top-left-radius: 2px;\r\n  border-top-right-radius: 2px;\r\n}\r\n.b-panel.b-floating > .b-panel-body-wrap > .b-toolbar.b-dock-bottom {\r\n  border-bottom-left-radius: 2px;\r\n  border-bottom-right-radius: 2px;\r\n}\r\n.b-panel.b-floating.b-panel-has-header > .b-panel-body-wrap > .b-panel-content, .b-panel.b-floating.b-panel-has-top-toolbar > .b-panel-body-wrap > .b-panel-content {\r\n  border-top-left-radius: 0;\r\n  border-top-right-radius: 0;\r\n}\r\n.b-panel.b-floating.b-panel-has-bottom-toolbar > .b-panel-body-wrap > .b-panel-content {\r\n  border-bottom-left-radius: 0;\r\n  border-bottom-right-radius: 0;\r\n}\r\n\r\n.b-panel {\r\n  padding: 0;\r\n  color: #4f5964;\r\n  z-index: 0;\r\n}\r\n.b-panel .b-panel-body-wrap {\r\n  overflow: hidden;\r\n}\r\n.b-panel > .b-panel-overlay,\r\n.b-panel > .b-panel-body-wrap {\r\n  z-index: 0;\r\n}\r\n.b-panel > .b-panel-collapse-size-locker {\r\n  position: absolute !important;\r\n}\r\n.b-panel:not(.b-panel-collapsible-overlay).b-collapsed > .b-panel-collapse-size-locker {\r\n  clip: rect(0, 0, 0, 0);\r\n}\r\n.b-panel:not(.b-panel-collapsible-overlay).b-panel-collapse-down:not(.b-panel-has-header) > .b-panel-collapse-size-locker, .b-panel:not(.b-panel-collapsible-overlay).b-header-dock-bottom.b-panel-collapse-down > .b-panel-collapse-size-locker, .b-panel:not(.b-panel-collapsible-overlay).b-header-dock-bottom.b-panel-collapse-up > .b-panel-collapse-size-locker {\r\n  top: 0;\r\n}\r\n.b-panel:not(.b-panel-collapsible-overlay).b-panel-collapse-up:not(.b-panel-has-header) > .b-panel-collapse-size-locker, .b-panel:not(.b-panel-collapsible-overlay).b-header-dock-top.b-panel-collapse-up > .b-panel-collapse-size-locker, .b-panel:not(.b-panel-collapsible-overlay).b-header-dock-top.b-panel-collapse-down > .b-panel-collapse-size-locker {\r\n  bottom: 0;\r\n}\r\n.b-panel:not(.b-panel-collapsible-overlay).b-panel-collapse-left:not(.b-panel-has-header) > .b-panel-collapse-size-locker, .b-panel:not(.b-panel-collapsible-overlay).b-header-dock-left.b-panel-collapse-left > .b-panel-collapse-size-locker, .b-panel:not(.b-panel-collapsible-overlay).b-header-dock-left.b-panel-collapse-right > .b-panel-collapse-size-locker {\r\n  right: 0;\r\n}\r\n.b-panel:not(.b-panel-collapsible-overlay).b-panel-collapse-right:not(.b-panel-has-header) > .b-panel-collapse-size-locker, .b-panel:not(.b-panel-collapsible-overlay).b-header-dock-right.b-panel-collapse-left > .b-panel-collapse-size-locker, .b-panel:not(.b-panel-collapsible-overlay).b-header-dock-right.b-panel-collapse-right > .b-panel-collapse-size-locker {\r\n  left: 0;\r\n}\r\n.b-panel.b-panel-collapsible-overlay:not(.b-collapsing, .b-expanding, .b-panel-overlay-revealed, .b-panel-overlay-revealing) > .b-panel-overlay > .b-panel-overlay-header {\r\n  display: none;\r\n}\r\n.b-panel.b-panel-collapsible-overlay.b-panel-overlay-revealed > .b-panel-overlay {\r\n  box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.3);\r\n  overflow: visible;\r\n}\r\n.b-panel.b-panel-collapsible-overlay > .b-panel-header {\r\n  transition: transform 0.2s ease-in-out;\r\n}\r\n.b-panel.b-panel-collapsible-overlay.b-collapsed > .b-panel-header > .b-collapsify-hide {\r\n  display: none;\r\n}\r\n.b-panel.b-panel-collapsible-overlay.b-collapsing > .b-panel-header, .b-panel.b-panel-collapsible-overlay.b-expanding > .b-panel-header {\r\n  opacity: 0;\r\n}\r\n.b-panel.b-panel-collapsible-overlay:not(.b-collapsed, .b-collapsing) > .b-panel-overlay > .b-panel-overlay-header {\r\n  display: none;\r\n}\r\n.b-panel.b-panel-collapsible-overlay.b-collapsing, .b-panel.b-panel-collapsible-overlay.b-expanding, .b-panel.b-panel-collapsible-overlay.b-panel-overlay-revealing, .b-panel.b-panel-collapsible-overlay.b-panel-overlay-revealed {\r\n  overflow: visible;\r\n  z-index: 1;\r\n}\r\n.b-panel.b-panel-collapsible-overlay.b-collapsing {\r\n  overflow: visible;\r\n}\r\n.b-panel.b-panel-collapsible-overlay.b-collapsing > .b-panel-header {\r\n  z-index: -1;\r\n}\r\n.b-panel.b-panel-collapsible-overlay.b-collapsing.b-panel-collapse-up > .b-panel-header {\r\n  transform: translate(0, -100%);\r\n}\r\n.b-panel.b-panel-collapsible-overlay.b-collapsing.b-panel-collapse-down > .b-panel-header {\r\n  transform: translate(0, 100%);\r\n}\r\n.b-panel.b-panel-collapsible-overlay.b-collapsing.b-panel-collapse-right > .b-panel-header {\r\n  transform: translate(100%, 0);\r\n}\r\n.b-panel.b-panel-collapsible-overlay.b-collapsing.b-panel-collapse-left > .b-panel-header {\r\n  transform: translate(-100%, 0);\r\n}\r\n.b-panel.b-panel-collapsible-overlay.b-collapsed:not(.b-expanding) > .b-panel-collapse-size-locker {\r\n  transition: transform 0.2s ease-in-out, clip-path 0.2s ease-in-out, top 0.2s ease-in-out, right 0.2s ease-in-out, bottom 0.2s ease-in-out, left 0.2s ease-in-out;\r\n}\r\n.b-panel.b-panel-collapsible-overlay.b-collapsed:not(.b-expanding).b-panel-collapse-up > .b-panel-collapse-size-locker {\r\n  transform: translate(0, -100%);\r\n}\r\n.b-panel.b-panel-collapsible-overlay.b-collapsed:not(.b-expanding).b-panel-collapse-up.b-panel-overlay-revealed > .b-panel-collapse-size-locker {\r\n  clip-path: inset(0 0 -10px 0);\r\n  transform: translate(0, 0);\r\n}\r\n.b-panel.b-panel-collapsible-overlay.b-collapsed:not(.b-expanding).b-panel-collapse-down > .b-panel-collapse-size-locker {\r\n  transform: translate(0, 100%);\r\n}\r\n.b-panel.b-panel-collapsible-overlay.b-collapsed:not(.b-expanding).b-panel-collapse-down.b-panel-overlay-revealed > .b-panel-collapse-size-locker {\r\n  clip-path: inset(-10px 0 0 0);\r\n  transform: translate(0, 0);\r\n}\r\n.b-panel.b-panel-collapsible-overlay.b-collapsed:not(.b-expanding).b-panel-collapse-left > .b-panel-collapse-size-locker {\r\n  transform: translate(-100%, 0);\r\n}\r\n.b-panel.b-panel-collapsible-overlay.b-collapsed:not(.b-expanding).b-panel-collapse-left.b-panel-overlay-revealed > .b-panel-collapse-size-locker {\r\n  clip-path: inset(0 -10px 0 0);\r\n  transform: translate(0, 0);\r\n}\r\n.b-panel.b-panel-collapsible-overlay.b-collapsed:not(.b-expanding).b-panel-collapse-right > .b-panel-collapse-size-locker {\r\n  transform: translate(100%, 0);\r\n}\r\n.b-panel.b-panel-collapsible-overlay.b-collapsed:not(.b-expanding).b-panel-collapse-right.b-panel-overlay-revealed > .b-panel-collapse-size-locker {\r\n  clip-path: inset(0 0 0 -10px);\r\n  transform: translate(0, 0);\r\n}\r\n.b-panel.b-panel-collapsible-overlay.b-expanding {\r\n  flex: none !important;\r\n  overflow: visible;\r\n}\r\n.b-panel.b-header-dock-right, .b-panel.b-header-dock-bottom {\r\n  justify-content: flex-end;\r\n}\r\n.b-panel.b-collapsed:not(.b-expanding):not(.b-panel-overlay-revealed):not(.b-panel-overlay-revealing) {\r\n  visibility: hidden;\r\n  flex: 0 1 0px;\r\n}\r\n.b-panel.b-collapsed > .b-panel-collapse-revealer {\r\n  visibility: visible;\r\n  cursor: pointer;\r\n}\r\n.b-panel .b-panel-collapser-header {\r\n  display: none;\r\n}\r\n.b-panel.b-collapse-unflex {\r\n  flex-grow: unset !important;\r\n  flex-basis: unset !important;\r\n  flex-shrink: 0 !important;\r\n}\r\n.b-panel.b-collapsed .b-panel-collapser-header, .b-panel.b-collapsing .b-panel-collapser-header {\r\n  display: flex;\r\n}\r\n.b-panel.b-collapsed.b-header-dock-top, .b-panel.b-collapsed.b-header-dock-bottom, .b-panel.b-collapsing.b-header-dock-top, .b-panel.b-collapsing.b-header-dock-bottom {\r\n  min-height: auto !important;\r\n}\r\n.b-panel.b-collapsed.b-header-dock-top.b-panel-collapsible-overlay, .b-panel.b-collapsed.b-header-dock-bottom.b-panel-collapsible-overlay, .b-panel.b-collapsing.b-header-dock-top.b-panel-collapsible-overlay, .b-panel.b-collapsing.b-header-dock-bottom.b-panel-collapsible-overlay {\r\n  height: unset !important;\r\n}\r\n.b-vbox > .b-panel.b-collapsed.b-header-dock-top, .b-vbox > .b-panel.b-collapsed.b-header-dock-bottom, .b-vbox > .b-panel.b-collapsing.b-header-dock-top, .b-vbox > .b-panel.b-collapsing.b-header-dock-bottom {\r\n  flex: none !important;\r\n}\r\n.b-panel.b-collapsed.b-header-dock-right, .b-panel.b-collapsed.b-header-dock-left, .b-panel.b-collapsing.b-header-dock-right, .b-panel.b-collapsing.b-header-dock-left {\r\n  min-width: auto !important;\r\n}\r\n.b-panel.b-collapsed.b-header-dock-right.b-panel-collapsible-overlay, .b-panel.b-collapsed.b-header-dock-left.b-panel-collapsible-overlay, .b-panel.b-collapsing.b-header-dock-right.b-panel-collapsible-overlay, .b-panel.b-collapsing.b-header-dock-left.b-panel-collapsible-overlay {\r\n  width: unset !important;\r\n}\r\n.b-hbox > .b-panel.b-collapsed.b-header-dock-right, .b-hbox > .b-panel.b-collapsed.b-header-dock-left, .b-hbox > .b-panel.b-collapsing.b-header-dock-right, .b-hbox > .b-panel.b-collapsing.b-header-dock-left {\r\n  flex: none !important;\r\n}\r\n.b-panel.b-collapsed:not(.b-expanding).b-header-dock-right, .b-panel.b-collapsed:not(.b-expanding).b-header-dock-left {\r\n  width: unset !important;\r\n  flex: unset !important;\r\n}\r\n.b-panel.b-header-dock-top .b-panel-content {\r\n  border-top-right-radius: 0;\r\n  border-top-left-radius: 0;\r\n}\r\n.b-panel.b-header-dock-right .b-panel-content {\r\n  border-top-right-radius: 0;\r\n  border-bottom-right-radius: 0;\r\n}\r\n.b-panel.b-header-dock-bottom .b-panel-content {\r\n  border-bottom-left-radius: 0;\r\n  border-bottom-right-radius: 0;\r\n}\r\n.b-panel.b-header-dock-left .b-panel-content {\r\n  border-top-left-radius: 0;\r\n  border-bottom-left-radius: 0;\r\n}\r\n.b-panel.b-panel-has-bottom-toolbar .b-panel-content {\r\n  border-bottom-left-radius: 0;\r\n  border-bottom-right-radius: 0;\r\n}\r\n.b-panel.b-floating > .b-dock-top {\r\n  border-top-right-radius: 2px;\r\n  border-top-left-radius: 2px;\r\n}\r\n.b-panel.b-floating > .b-dock-right {\r\n  border-top-right-radius: 2px;\r\n  border-bottom-right-radius: 2px;\r\n}\r\n.b-panel.b-floating > .b-dock-bottom {\r\n  position: static;\r\n  border-bottom-left-radius: 2px;\r\n  border-bottom-right-radius: 2px;\r\n}\r\n.b-panel.b-floating > .b-dock-left {\r\n  border-top-left-radius: 2px;\r\n  border-bottom-left-radius: 2px;\r\n}\r\n\r\n.b-panel-content {\r\n  background-color: #f8f9fa;\r\n  justify-content: space-between;\r\n  overflow: hidden;\r\n  padding: 1em;\r\n}\r\n.b-panel-content.b-auto-container.b-single-child > .b-container {\r\n  flex: 1 1 auto;\r\n}\r\n.b-panel-content.b-fit-container {\r\n  padding: 0;\r\n}\r\n\r\n.b-tabpanel .b-panel-content {\r\n  background-color: transparent;\r\n}\r\n\r\n.b-panel-collapser {\r\n  z-index: 0;\r\n}\r\n\r\n.b-panel-header {\r\n  display: flex;\r\n  background-color: #fff5e6;\r\n  color: #4f5964;\r\n  padding: 1em;\r\n  flex: 0 0 auto;\r\n  align-items: center;\r\n  z-index: 1;\r\n}\r\n.b-panel-header.b-panel-ui-toolbar {\r\n  background-color: #f3f4f5;\r\n  color: #4f5964;\r\n  padding: 0.5em;\r\n}\r\n.b-panel-header.b-panel-ui-toolbar.b-dock-top, .b-panel-header.b-panel-ui-toolbar.b-dock-bottom {\r\n  min-height: 4em;\r\n}\r\n.b-panel-header.b-panel-ui-toolbar.b-dock-left, .b-panel-header.b-panel-ui-toolbar.b-dock-right {\r\n  min-width: 4em;\r\n}\r\n.b-panel-header.b-panel-ui-toolbar .b-header-title {\r\n  font-size: unset;\r\n  font-weight: unset;\r\n}\r\n.b-panel-header.b-panel-ui-toolbar.b-dock-top {\r\n  border-bottom: 1px solid #d8d9da;\r\n}\r\n.b-panel-header.b-dock-top {\r\n  border-bottom: 1px solid #feac31;\r\n}\r\n.b-panel-header.b-dock-right {\r\n  flex-flow: column nowrap;\r\n}\r\n.b-panel-header.b-dock-left {\r\n  flex-flow: column-reverse nowrap;\r\n}\r\n.b-panel-header.b-dock-left .b-header-title {\r\n  transform: rotate(180deg);\r\n}\r\n.b-panel-header .b-header-title {\r\n  flex: 1 1 auto;\r\n  text-align: center;\r\n  justify-content: center;\r\n  font-size: 1.2em;\r\n  font-weight: 500;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n.b-panel-header .b-header-title:not(:last-child) {\r\n  padding-inline-end: 1em;\r\n}\r\n.b-panel-header .b-header-title.b-align-start {\r\n  text-align: start;\r\n  justify-content: flex-start;\r\n}\r\n.b-panel-header .b-header-title.b-align-center {\r\n  text-align: center;\r\n  justify-content: center;\r\n  padding-inline-end: 0;\r\n}\r\n.b-panel-header .b-header-title.b-align-end {\r\n  text-align: end;\r\n  justify-content: flex-end;\r\n}\r\n.b-panel-header .b-header-title.b-align-end:not(:last-child) {\r\n  margin-inline-end: 1em;\r\n}\r\n.b-panel-has-tools .b-panel-collapser .b-panel-header .b-header-title {\r\n  line-height: 1.8em;\r\n}\r\n.b-panel-header.b-dock-right .b-header-title, .b-panel-header.b-dock-left .b-header-title {\r\n  -webkit-writing-mode: vertical-lr;\r\n  writing-mode: vertical-lr;\r\n  -ms-writing-mode: tb-lr;\r\n}\r\n.b-panel-header.b-dock-right, .b-panel-header.b-dock-bottom {\r\n  order: 100;\r\n}\r\n\r\n.b-button.b-tool,\r\n.b-tool {\r\n  cursor: pointer;\r\n  color: #4f5964;\r\n  height: 2em;\r\n  width: 2em;\r\n  font-size: 0.9em;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 50%;\r\n  border: 0 none;\r\n  background-color: transparent;\r\n  flex-shrink: 0;\r\n  contain: paint;\r\n}\r\n.b-button.b-tool::-moz-focus-inner,\r\n.b-tool::-moz-focus-inner {\r\n  border: 0;\r\n}\r\n.b-button.b-tool:focus,\r\n.b-tool:focus {\r\n  outline: none;\r\n}\r\n.b-using-keyboard .b-button.b-tool:focus,\r\n.b-using-keyboard .b-tool:focus {\r\n  background-color: rgba(220, 220, 220, 0.5);\r\n}\r\n.b-button.b-tool.b-icon:before,\r\n.b-tool.b-icon:before,\r\n.b-tool.b-icon-version:before {\r\n  width: 1em;\r\n  height: 1em;\r\n  text-align: center;\r\n  line-height: inherit;\r\n}\r\n.b-button.b-tool:hover,\r\n.b-tool:hover {\r\n  opacity: 0.8;\r\n}\r\n.b-button.b-tool.b-disabled,\r\n.b-tool.b-disabled {\r\n  opacity: 0.4;\r\n}\r\n.b-button.b-tool.b-rotate-left:before,\r\n.b-tool.b-rotate-left:before {\r\n  transform: rotate(270deg);\r\n}\r\n.b-button.b-tool.b-rotate-right:before,\r\n.b-tool.b-rotate-right:before {\r\n  transform: rotate(90deg);\r\n}\r\n.b-button.b-tool i,\r\n.b-tool i {\r\n  display: flex;\r\n}\r\n.b-button.b-tool a,\r\n.b-tool a {\r\n  color: #4f5964;\r\n}\r\n\r\n.b-button.b-tool {\r\n  min-height: 2em;\r\n  min-width: 2em;\r\n}\r\n\r\n.b-collapsetool:not(.b-collapsing):before {\r\n  transition: all 0.2s ease-in-out;\r\n}\r\n.b-collapsetool.b-rotate-left:before, .b-collapsetool.b-rotate-right:before {\r\n  transform: rotate(0deg);\r\n}\r\n.b-collapsetool.b-collapsed:before {\r\n  transform: rotate(180deg);\r\n}\r\n.b-panel-ui-toolbar.b-panel-collapse-right .b-collapsible-tr.b-dock-right .b-collapsetool {\r\n  margin-block-start: 0.6em;\r\n}\r\n.b-panel-ui-toolbar.b-panel-collapse-right .b-collapsible-tr.b-dock-top .b-collapsetool {\r\n  margin-inline-end: 0.7em;\r\n}\r\n\r\n.b-dock-top .b-header-title:not(:last-child), .b-dock-bottom .b-header-title:not(:last-child) {\r\n  padding-inline-end: 0.2em;\r\n}\r\n.b-dock-top .b-tool.b-align-start, .b-dock-bottom .b-tool.b-align-start {\r\n  margin-block: 0;\r\n  margin-inline: 0 0.4em;\r\n}\r\n.b-dock-top .b-tool.b-align-end, .b-dock-bottom .b-tool.b-align-end {\r\n  margin-block: 0;\r\n  margin-inline: 0.4em 0;\r\n}\r\n\r\n.b-dock-right .b-header-title:not(:last-child), .b-dock-left .b-header-title:not(:last-child) {\r\n  padding: 0.2em 0;\r\n}\r\n.b-dock-right .b-tool.b-align-start, .b-dock-left .b-tool.b-align-start {\r\n  margin-block-end: 0.4em;\r\n}\r\n.b-dock-right .b-tool.b-align-end, .b-dock-left .b-tool.b-align-end {\r\n  margin-block-start: 0.4em;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-fieldset.b-has-label {\r\n  align-items: center;\r\n}\r\n.b-fieldset.b-has-label.b-label-before > .b-panel-body-wrap {\r\n  flex: 1 1 100%;\r\n}\r\n.b-fieldset.b-has-label > label {\r\n  flex-shrink: 0;\r\n}\r\n\r\n.b-fieldset-header {\r\n  background-color: transparent;\r\n  padding: 0.5em;\r\n  color: #4f5964;\r\n}\r\n.b-fieldset-header .b-header-title {\r\n  font-weight: 600;\r\n}\r\n\r\nfieldset.b-fieldset-content {\r\n  border: none;\r\n  background-color: transparent;\r\n  margin-inline-start: 0;\r\n  margin-inline-end: 0;\r\n  overflow: unset;\r\n  padding-block-end: 0;\r\n}\r\n.b-panel-has-header > .b-radiogroup-body-wrap > fieldset.b-fieldset-content {\r\n  padding-block-start: 1em;\r\n  padding-inline-start: 1em;\r\n  padding-inline-end: 1em;\r\n}\r\n.b-fieldset:not(.b-panel-has-header) > .b-radiogroup-body-wrap > fieldset.b-fieldset-content {\r\n  padding: 0;\r\n}\r\nfieldset.b-fieldset-content.b-inline > .b-field:not(:first-child) {\r\n  margin-inline-start: 1em;\r\n}\r\nfieldset.b-fieldset-content > legend.b-fieldset-legend {\r\n  position: absolute;\r\n  top: -10000px;\r\n  clip: rect(0, 0, 0, 0);\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-popup {\r\n  color: #4f5964;\r\n}\r\n.b-popup.b-text-popup {\r\n  max-width: 25em;\r\n}\r\n.b-popup.b-positioned {\r\n  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.12), 0 3px 6px rgba(0, 0, 0, 0.24);\r\n}\r\n\r\n.b-popup-content {\r\n  background: #f8f9fa;\r\n}\r\n.b-popup-content a {\r\n  color: #22262b;\r\n}\r\n\r\n.b-popup-header {\r\n  background-color: #fff5e6;\r\n  color: #4f5964;\r\n}\r\n\r\n.b-modal-mask {\r\n  background-color: rgba(100, 100, 100, 0.5);\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  bottom: 0;\r\n  right: 0;\r\n  pointer-events: all;\r\n  z-index: 11001;\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .b-popup {\r\n    max-width: 100% !important;\r\n  }\r\n}\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-menu {\r\n  min-height: 20px;\r\n  outline: none;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: stretch;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n}\r\n.b-menu .b-panel-content {\r\n  background-color: #fff;\r\n}\r\n.b-menu.b-empty::after {\r\n  content: attr(data-empty-text);\r\n  display: block;\r\n  padding: 0.8em;\r\n  color: #4f5964;\r\n}\r\n.b-menu .b-icon:before, .b-menu .b-icon-version:before, .b-menu .b-icon-fw:before {\r\n  min-width: 1.3em;\r\n}\r\n.b-menu.b-menu-with-submenu .b-menuitem:not(.b-has-submenu) .b-menu-text {\r\n  margin-inline-end: 2em;\r\n}\r\n\r\n.b-sub-menu .b-anchor:before {\r\n  position: absolute;\r\n  height: 2.7em;\r\n  width: 11px;\r\n  left: -2px;\r\n  content: " ";\r\n  margin-top: -0.8em;\r\n}\r\n\r\n.b-menu-content {\r\n  flex-flow: column nowrap;\r\n  justify-content: flex-start;\r\n  align-items: stretch;\r\n  padding: 0;\r\n}\r\n.b-menu-content > :not(.b-menuitem) {\r\n  margin: 0.2em 0.6em;\r\n  display: flex;\r\n}\r\n.b-menu-content > :not(.b-menuitem):first-child {\r\n  margin-top: 0.4em;\r\n}\r\n.b-menu-content > :not(.b-menuitem):last-child {\r\n  margin-bottom: 0.4em;\r\n}\r\n.b-menu-content > .b-button {\r\n  justify-content: flex-start;\r\n}\r\n\r\n.b-menuitem {\r\n  flex-shrink: 0;\r\n  padding: 0.8em;\r\n  color: #4f5964;\r\n  cursor: pointer;\r\n  transition: background-color 0.2s, color 0.2s;\r\n  border-top: 1px dotted rgba(224, 224, 231, 0.8);\r\n  font-size: 1em;\r\n  min-width: 7em;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.b-menuitem.b-disabled {\r\n  opacity: 0.5;\r\n}\r\n.b-menuitem:first-child {\r\n  border-top: none;\r\n  border-top-right-radius: 2px;\r\n  border-top-left-radius: 2px;\r\n}\r\n.b-menuitem:last-child {\r\n  border-bottom-right-radius: 2px;\r\n  border-bottom-left-radius: 2px;\r\n}\r\n.b-menuitem.b-separator:not(.b-first-visible-child) {\r\n  border-top: 1px solid #c3c3d1;\r\n}\r\n.b-menuitem.b-contains-focus, .b-menuitem:focus {\r\n  outline: none;\r\n  background-color: rgba(254, 172, 49, 0.3);\r\n  color: #4f5964;\r\n}\r\n.b-menuitem span.b-menu-text {\r\n  flex: 1 1 auto;\r\n  white-space: nowrap;\r\n  margin-inline-start: 0.6em;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  min-width: 5em;\r\n}\r\n.b-menuitem.b-has-submenu .b-icon-sub-menu {\r\n  margin-inline-start: 0.3em;\r\n}\r\n.b-menuitem.b-rtl .b-icon-sub-menu::before {\r\n  transform: scaleX(-1);\r\n}\r\n\r\na.b-menuitem:hover .b-menu-text {\r\n  text-decoration: underline;\r\n}\r\n\r\n.b-menu-with-icon .b-menuitem-icon {\r\n  width: 1.25em;\r\n  text-align: center;\r\n  flex-shrink: 0;\r\n  margin-inline-end: 0.5em;\r\n}\r\n.b-menu-with-icon span.b-menu-text {\r\n  margin-inline-start: 1.75em;\r\n}\r\n.b-menu-with-icon .b-menuitem-icon ~ span.b-menu-text {\r\n  margin-inline-start: 0;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-radio {\r\n  --radio-background-color: #fff;\r\n  --radio-dot-color: var(----radio-background-color);\r\n  --radio-border-color: rgb(var(--widget-primary-color-rgb));\r\n  --radio-checked-dot-color: rgb(var(--widget-primary-color-rgb));\r\n  --radio-disabled-color: #e0e0e7;\r\n  /* forcing keyboard focus appearance */\r\n  /* Overrides checkbox css */\r\n}\r\n.b-radio.b-disabled {\r\n  --radio-border-color: var(--radio-disabled-color);\r\n  --radio-checked-dot-color: var(--radio-disabled-color);\r\n}\r\n.b-radio input[type=radio]:checked {\r\n  --radio-dot-color: var(--radio-checked-dot-color);\r\n}\r\n.b-radio input[type=radio] {\r\n  border-radius: 50%;\r\n  box-shadow: 0 0 0 1px var(--radio-border-color);\r\n  border: 0.25em solid var(--radio-background-color);\r\n  background-color: var(--radio-dot-color);\r\n  height: 1.3em;\r\n  width: 1.3em;\r\n  min-width: 1.3em;\r\n  /* Margin as large as border so not to be clipped by overflow hidden parent el */\r\n  margin: 1px;\r\n  z-index: 1;\r\n  -webkit-appearance: none;\r\n  appearance: none;\r\n  cursor: pointer;\r\n}\r\n.b-radio input[type=radio]:focus-visible {\r\n  outline: 1px solid rgba(254, 172, 49, 0.6);\r\n  outline-offset: 0;\r\n}\r\n.b-radio > .b-field-inner label.b-radio-label {\r\n  margin-inline-start: 0.4em;\r\n}\r\n.b-radio > .b-field-inner label.b-radio-label:before {\r\n  content: none;\r\n}\r\n\r\n@media screen and (min-resolution: 120dpi) {\r\n  .b-firefox .b-radio input {\r\n    transform: rotate(1deg);\r\n    margin: calc(1px + 0.5px);\r\n  }\r\n}\r\n.b-ripple {\r\n  display: none;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-slider {\r\n  background-color: transparent;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  overflow: visible;\r\n}\r\n.b-slider label {\r\n  font-size: 0.8em;\r\n  transition: color 0.2s;\r\n}\r\n.b-slider.b-rtl > [type=range] {\r\n  direction: rtl;\r\n}\r\n.b-slider [type=range] {\r\n  align-self: stretch;\r\n  max-width: 100%;\r\n  -webkit-appearance: none;\r\n  margin: 10px 0;\r\n  padding: 0;\r\n  font-size: inherit;\r\n  background-color: transparent;\r\n}\r\n.b-slider [type=range]:focus {\r\n  outline: 0;\r\n}\r\n.b-slider [type=range]:focus::-webkit-slider-runnable-track {\r\n  background: #c9dfff;\r\n}\r\n.b-slider [type=range]:focus::-moz-range-track {\r\n  background: #c9dfff;\r\n}\r\n.b-slider [type=range]:focus::-ms-fill-lower, .b-slider [type=range]:focus::-ms-fill-upper {\r\n  background: #c9dfff;\r\n}\r\n.b-slider [type=range]:focus::-webkit-slider-thumb {\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15), 0 2px 4px rgba(0, 0, 0, 0.2);\r\n}\r\n.b-slider [type=range]::-moz-focus-outer {\r\n  border: 0;\r\n}\r\n.b-slider [type=range]::-ms-tooltip {\r\n  display: none;\r\n}\r\n.b-slider [type=range]::-webkit-slider-runnable-track {\r\n  cursor: pointer;\r\n  height: 8px;\r\n  transition: all 0.2s ease;\r\n  width: 100%;\r\n  background: #e0e0e7;\r\n  border: none;\r\n  border-radius: 2px;\r\n}\r\n.b-slider [type=range]::-webkit-slider-thumb {\r\n  background: #3183fe;\r\n  border: none;\r\n  border-radius: 50%;\r\n  cursor: pointer;\r\n  height: 20px;\r\n  width: 20px;\r\n  -webkit-appearance: none;\r\n  margin-top: -6px;\r\n  transition: all 0.5s;\r\n}\r\n.b-slider [type=range]::-moz-range-track {\r\n  cursor: pointer;\r\n  height: 8px;\r\n  transition: all 0.2s ease;\r\n  width: 100%;\r\n  background: #e0e0e7;\r\n  border: none;\r\n  border-radius: 2px;\r\n}\r\n.b-slider [type=range]::-moz-range-thumb {\r\n  background: #3183fe;\r\n  border: none;\r\n  border-radius: 50%;\r\n  cursor: pointer;\r\n  height: 20px;\r\n  width: 20px;\r\n}\r\n.b-slider [type=range]::-ms-track {\r\n  cursor: pointer;\r\n  height: 8px;\r\n  transition: all 0.2s ease;\r\n  width: 100%;\r\n  background: transparent;\r\n  border-color: transparent;\r\n  border-width: 10px 0;\r\n  color: transparent;\r\n}\r\n.b-slider [type=range]::-ms-fill-lower, .b-slider [type=range]::-ms-fill-upper {\r\n  background: #e0e0e7;\r\n  border: none;\r\n  border-radius: 4px;\r\n}\r\n.b-slider [type=range]::-ms-thumb {\r\n  background: #3183fe;\r\n  border: none;\r\n  border-radius: 50%;\r\n  cursor: pointer;\r\n  height: 20px;\r\n  width: 20px;\r\n  margin-top: 0;\r\n}\r\n.b-slider.b-disabled [type=range]::-ms-thumb, .b-slider.b-disabled [type=range]::-ms-fill-lower, .b-slider.b-disabled [type=range]::-ms-fill-upper {\r\n  background: #d2d2dc;\r\n  cursor: default;\r\n}\r\n.b-slider.b-disabled [type=range]::-moz-range-thumb, .b-slider.b-disabled [type=range]::-moz-range-track {\r\n  background: #d2d2dc;\r\n  cursor: default;\r\n}\r\n.b-slider.b-disabled [type=range]::-webkit-slider-thumb, .b-slider.b-disabled [type=range]::-webkit-slider-runnable-track {\r\n  background: #d2d2dc;\r\n  cursor: default;\r\n}\r\n.b-grid-cell .b-slider {\r\n  width: 100%;\r\n}\r\n\r\n.b-container .b-slider label {\r\n  margin: 0;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-slidetoggle {\r\n  --widget-primary-color-rgb: 120,120,131;\r\n  --slidetoggle-background-color: rgb(var(--widget-primary-color-rgb));\r\n  --slidetoggle-toggle-background-opacity: 0.5;\r\n  --slidetoggle-toggle-background-color: rgba(var(--widget-primary-color-rgb), var(--slidetoggle-toggle-background-opacity));\r\n  height: 3.25em;\r\n}\r\n.b-slidetoggle.b-disabled {\r\n  --slidetoggle-toggle-background-color: #e0e0e7;\r\n  --slidetoggle-background-color: #e0e0e7;\r\n}\r\n.b-slidetoggle .b-field-inner::before {\r\n  width: 2.4em;\r\n}\r\n.b-slidetoggle input,\r\n.b-slidetoggle .b-slidetoggle-toggle {\r\n  width: 2.4em;\r\n  height: 1.4em;\r\n  font-size: inherit;\r\n  flex-shrink: 0;\r\n}\r\n.b-slidetoggle input {\r\n  top: -0.4em;\r\n}\r\n.b-slidetoggle input:checked + .b-slidetoggle-toggle {\r\n  opacity: 1;\r\n  background-color: var(--slidetoggle-background-color);\r\n}\r\n.b-slidetoggle input:checked + .b-slidetoggle-toggle .b-slidetoggle-thumb {\r\n  background-color: #fff;\r\n  transform: translate(1.2em, 0.2em);\r\n}\r\n.b-slidetoggle .b-slidetoggle-toggle {\r\n  transition: background-color 0.2s, opacity 0.2s;\r\n  opacity: 0.7;\r\n  border-radius: 0.7em;\r\n  margin-inline-end: 0.4em;\r\n  background-color: var(--slidetoggle-toggle-background-color);\r\n}\r\n.b-slidetoggle:hover .b-slidetoggle-toggle {\r\n  opacity: 1;\r\n}\r\n.b-slidetoggle .b-slidetoggle-thumb {\r\n  height: 1em;\r\n  width: 1em;\r\n  background-color: white;\r\n  border-radius: 0.5em;\r\n  position: absolute;\r\n  transform: translate(0.2em, 0.2em);\r\n  transition: transform 0.3s ease;\r\n}\r\n.b-slidetoggle.b-rtl .b-slidetoggle-thumb {\r\n  transform: translate(-0.2em, 0.2em);\r\n}\r\n.b-slidetoggle.b-rtl input:checked + .b-slidetoggle-toggle .b-slidetoggle-thumb {\r\n  transform: translate(-1.2em, 0.2em);\r\n}\r\n\r\n.b-slidetoggle-label {\r\n  cursor: pointer;\r\n}\r\n\r\n.b-container .b-slidetoggle .b-slidetoggle-label {\r\n  margin-inline-start: 0;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-splitter {\r\n  background-color: #e5e5e8;\r\n  flex: 0 0 0.5em;\r\n  position: relative;\r\n  touch-action: none;\r\n}\r\n@media (pointer: coarse) {\r\n  .b-splitter {\r\n    --splitter-inner-size: 2em;\r\n  }\r\n}\r\n@media (pointer: fine) {\r\n  .b-splitter {\r\n    --splitter-inner-size: 0;\r\n  }\r\n}\r\n.b-splitter.b-disabled {\r\n  flex: 0 0 1px;\r\n  pointer-events: none;\r\n}\r\n.b-splitter:not(.b-disabled) {\r\n  overflow: visible;\r\n}\r\n.b-splitter::after {\r\n  content: "";\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  z-index: 1;\r\n}\r\n.b-splitter:hover::after, .b-splitter.b-moving::after {\r\n  background-color: #e5e5e8;\r\n}\r\n.b-splitter.b-horizontal {\r\n  cursor: ns-resize;\r\n  min-height: 0.5em;\r\n}\r\n.b-splitter.b-horizontal.b-disabled {\r\n  min-height: 1px;\r\n}\r\n.b-splitter.b-horizontal::after {\r\n  height: var(--splitter-inner-size);\r\n  width: 100%;\r\n}\r\n.b-splitter.b-horizontal:hover::after, .b-splitter.b-horizontal.b-moving::after {\r\n  top: calc((10px - 0.5em) / -2);\r\n  height: 10px;\r\n}\r\n.b-splitter.b-vertical {\r\n  cursor: ew-resize;\r\n  min-width: 0.5em;\r\n}\r\n.b-splitter.b-vertical.b-disabled {\r\n  min-width: 1px;\r\n}\r\n.b-splitter.b-vertical::after {\r\n  width: var(--splitter-inner-size);\r\n  height: 100%;\r\n}\r\n.b-splitter.b-vertical:hover::after, .b-splitter.b-vertical.b-moving::after {\r\n  left: calc((10px - 0.5em) / -2);\r\n  width: 10px;\r\n}\r\n.b-splitter:last-child, .b-splitter:first-child {\r\n  visibility: hidden;\r\n  flex: 0;\r\n  min-width: 0;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-timefield.b-open .b-icon-clock-live {\r\n  background-color: #feac31 !important;\r\n}\r\n.b-timefield.b-empty .b-fieldtrigger {\r\n  animation-delay: -300s;\r\n}\r\n.b-timefield.b-disabled .b-icon-clock-live, .b-timefield.b-readonly .b-icon-clock-live {\r\n  background-color: #e4e4e4;\r\n}\r\n.b-timefield:not(.b-disabled):not(.b-readonly) .b-icon-angle-left:hover,\r\n.b-timefield:not(.b-disabled):not(.b-readonly) .b-icon-angle-right:hover {\r\n  color: #feac31;\r\n}\r\n.b-timefield.b-no-steppers .b-step-trigger {\r\n  display: none;\r\n}\r\n.b-timefield .b-step-trigger::before {\r\n  transition: color 0.3s;\r\n}\r\n.b-timefield.b-rtl .b-step-trigger::before {\r\n  transform: scaleX(-1);\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-timepicker.b-content-element {\r\n  background-color: #f8f9fa;\r\n  align-items: center;\r\n  padding: 0.5em 0.3em;\r\n  gap: 0.3em;\r\n}\r\n.b-timepicker.b-content-element .b-widget {\r\n  margin: 0;\r\n  flex: 0 0 auto;\r\n  width: auto;\r\n}\r\n.b-timepicker.b-content-element .b-numberfield > .b-label {\r\n  clip-path: polygon(0 0);\r\n  position: absolute;\r\n  contain: strict;\r\n}\r\n.b-timepicker.b-content-element .b-numberfield:not(.b-first-visible-child)::before {\r\n  content: ":";\r\n  align-self: center;\r\n  margin-inline-end: 0.3em;\r\n  font-weight: bold;\r\n}\r\n.b-timepicker.b-content-element .b-numberfield input {\r\n  width: 2.8em;\r\n}\r\n.b-timepicker.b-content-element .b-button {\r\n  flex: 0 0 3em;\r\n  padding: 0;\r\n}\r\n.b-timepicker.b-content-element .b-button label {\r\n  text-overflow: clip;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n@keyframes progress {\r\n  0% {\r\n    width: 0;\r\n  }\r\n  100% {\r\n    width: 100%;\r\n  }\r\n}\r\n.b-toast {\r\n  --widget-primary-color-rgb: 248,249,250;\r\n  --toast-background-color: rgb(var(--widget-primary-color-rgb));\r\n  --toast-color: #4f5964;\r\n  --toast-progress-background-color: #feac31;\r\n  background-color: var(--toast-background-color);\r\n  color: var(--toast-color);\r\n}\r\n\r\n.b-float-root > .b-floating.b-toast {\r\n  display: inline-block;\r\n  overflow-x: hidden;\r\n  overflow-y: auto;\r\n  top: auto;\r\n  inset-inline-end: 2em;\r\n  inset-inline-start: auto;\r\n  max-width: 60%;\r\n  max-height: 60%;\r\n  line-height: 1.4em;\r\n  transition: bottom 0.25s ease-in, transform 0.25s ease-in;\r\n  padding: 1em;\r\n  border-radius: 2px;\r\n  cursor: pointer;\r\n}\r\n.b-legacy-inset .b-float-root > .b-floating.b-toast {\r\n  left: auto;\r\n  right: 2em;\r\n}\r\n.b-legacy-inset .b-float-root > .b-floating.b-toast.b-rtl {\r\n  left: 2em;\r\n  right: auto;\r\n}\r\n.b-float-root > .b-floating.b-toast.b-toast-hide {\r\n  bottom: 0 !important;\r\n  transform: translateY(100%) !important;\r\n}\r\n.b-float-root > .b-floating.b-toast.b-icon:before, .b-float-root > .b-floating.b-toast.b-icon-version:before {\r\n  margin-inline-end: 0.5em;\r\n}\r\n\r\n.b-toast-progress {\r\n  position: absolute;\r\n  top: 0;\r\n  inset-inline-start: 0;\r\n  height: 3px;\r\n  background: var(--toast-progress-background-color);\r\n  animation-name: progress;\r\n  animation-timing-function: linear;\r\n}\r\n.b-legacy-inset .b-toast-progress {\r\n  left: 0;\r\n}\r\n.b-legacy-inset .b-toast-progress.b-rtl {\r\n  right: 0;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-tooltip:not(.b-allow-over) {\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n}\r\n.b-tooltip .b-tooltip-loading .b-icon, .b-tooltip .b-tooltip-loading .b-icon-version {\r\n  display: inline-block;\r\n  margin-inline-end: 0.5em;\r\n}\r\n\r\n.b-tooltip-content {\r\n  background: white;\r\n  color: #4f5964;\r\n  font-size: 1em;\r\n  line-height: 1.4em;\r\n  padding: 1em;\r\n}\r\n.b-tooltip-content a {\r\n  color: #4f5964;\r\n}\r\n\r\n.b-tooltip-header.b-dock-right .b-header-title,\r\n.b-tooltip-header.b-dock-left .b-header-title {\r\n  font-size: 1em;\r\n}\r\n\r\n.b-textareafield textarea,\r\n.b-textareapickerfield textarea {\r\n  padding: 0.8em;\r\n  align-self: stretch;\r\n}\r\n\r\n.b-textareapickerfield-picker {\r\n  display: flex;\r\n  flex: 1;\r\n  min-height: 10em;\r\n}\r\n.b-textareapickerfield-picker:focus {\r\n  outline: none;\r\n  border-color: rgba(254, 172, 49, 0.6);\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-toolbar {\r\n  background-color: #f3f4f5;\r\n  color: #4f5964;\r\n  flex-shrink: 0;\r\n}\r\n.b-toolbar.b-dock-header, .b-toolbar.b-dock-pre-header {\r\n  background-color: transparent;\r\n}\r\n.b-toolbar.b-dock-header .b-toolbar-content, .b-toolbar.b-dock-pre-header .b-toolbar-content {\r\n  padding: 0;\r\n}\r\n.b-toolbar.b-dock-header > .b-button, .b-toolbar.b-dock-pre-header > .b-button {\r\n  margin: 0;\r\n}\r\n.b-toolbar.b-dock-header .b-button, .b-toolbar.b-dock-pre-header .b-button {\r\n  min-height: auto;\r\n}\r\n.b-toolbar.b-dock-header {\r\n  margin-inline-start: 1em;\r\n}\r\n.b-toolbar.b-dock-pre-header {\r\n  margin-inline-end: 1em;\r\n}\r\n.b-toolbar > .b-tool {\r\n  align-self: center;\r\n  background-color: transparent;\r\n}\r\n.b-toolbar > .b-tool.b-pressed {\r\n  background-color: rgba(50, 50, 50, 0.2);\r\n}\r\n.b-toolbar .b-button:not(.b-text) {\r\n  flex-shrink: 0;\r\n}\r\n.b-toolbar .b-row-start-scroller {\r\n  margin: 0;\r\n  margin-inline-end: 0.5em;\r\n}\r\n.b-toolbar.b-dock-left .b-row-start-scroller {\r\n  margin: 0;\r\n  margin-inline-start: 0.5em;\r\n}\r\n.b-toolbar.b-dock-right .b-row-start-scroller {\r\n  margin: 0;\r\n  margin-inline-start: 0.5em;\r\n}\r\n.b-toolbar .b-row-end-scroller, .b-toolbar .b-row-menu {\r\n  margin: 0;\r\n  margin-inline-start: 0.5em;\r\n}\r\n.b-toolbar .b-column-start-scroller {\r\n  margin: 0 0 0.5em 0;\r\n}\r\n.b-toolbar .b-column-end-scroller, .b-toolbar .b-column-menu {\r\n  margin: 0.5em 0 0 0;\r\n}\r\n.b-toolbar > .b-overflow-button {\r\n  margin: 0.5em;\r\n}\r\n.b-toolbar.b-rtl > .b-overflow-button::before {\r\n  transform: scaleX(-1);\r\n}\r\n.b-toolbar .b-toolbar-content {\r\n  overflow: hidden;\r\n  padding: 0.5em;\r\n  gap: 0.5em;\r\n}\r\n.b-toolbar .b-toolbar-content .b-field {\r\n  margin-bottom: 0;\r\n}\r\n.b-toolbar .b-toolbar-content > .b-toolbar-fill {\r\n  flex: 1 1 0%;\r\n}\r\n.b-toolbar .b-toolbar-content .b-html {\r\n  align-items: center;\r\n}\r\n.b-toolbar .b-toolbar-content .b-html code {\r\n  margin: 0 0.5em;\r\n}\r\n.b-toolbar .b-toolbar-content.b-overflow .b-field, .b-toolbar .b-toolbar-content.b-overflow .b-button {\r\n  flex-shrink: 0;\r\n}\r\n.b-toolbar.b-dock-top, .b-toolbar.b-dock-bottom {\r\n  min-height: 4em;\r\n}\r\n.b-toolbar.b-dock-top .b-toolbar-content > .b-toolbar-separator, .b-toolbar.b-dock-bottom .b-toolbar-content > .b-toolbar-separator {\r\n  margin-block: 0.2em;\r\n  border-style: solid;\r\n  border-width: 0 1px 0 1px;\r\n  border-inline-start-color: #d7dbde;\r\n  border-inline-end-color: #e5e7e9;\r\n}\r\n.b-toolbar.b-dock-top .b-toolbar-content > .b-widget:not(.b-button), .b-toolbar.b-dock-bottom .b-toolbar-content > .b-widget:not(.b-button) {\r\n  min-height: 0;\r\n}\r\n.b-toolbar.b-dock-bottom .b-toolbar-content {\r\n  padding: 1em;\r\n}\r\n.b-toolbar.b-dock-top {\r\n  border-bottom: 1px solid #d8d9da;\r\n}\r\n.b-toolbar.b-dock-left, .b-toolbar.b-dock-right {\r\n  min-width: 4em;\r\n}\r\n.b-toolbar.b-dock-left .b-toolbar-content > .b-toolbar-separator, .b-toolbar.b-dock-right .b-toolbar-content > .b-toolbar-separator {\r\n  margin: 0 0.5em 0.2em 0.2em;\r\n  border-style: solid;\r\n  border-width: 1px 0 1px 0;\r\n  border-top-color: #d7dbde;\r\n  border-bottom-color: #e5e7e9;\r\n}\r\n.b-toolbar.b-dock-left .b-toolbar-content > .b-widget:not(.b-button), .b-toolbar.b-dock-right .b-toolbar-content > .b-widget:not(.b-button) {\r\n  min-width: 0;\r\n}\r\n\r\n.b-tabpanel .b-panel .b-toolbar {\r\n  background-color: transparent;\r\n}\r\n\r\n.b-toolbar.b-outer {\r\n  background-color: #f8f9fa;\r\n}\r\n\r\n.b-toolbar-overflow-menu > .b-panel-body-wrap > .b-menu-content .b-widget {\r\n  flex: 0 0 auto !important;\r\n  width: auto;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-tabpanel-tabs {\r\n  display: flex;\r\n  flex: 0 0 auto;\r\n  flex-direction: row;\r\n  margin-bottom: 0;\r\n  background-color: transparent;\r\n}\r\n.b-toolbar .b-tabpanel-tabs {\r\n  gap: 0;\r\n}\r\n.b-tabpanel-tab {\r\n  display: flex;\r\n  padding: 0.9em;\r\n  cursor: pointer;\r\n  transition: background-color 0.2s, color 0.2s;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 0.9em;\r\n  font-weight: 500;\r\n  text-transform: uppercase;\r\n  color: #7b7b7b;\r\n  background-color: transparent;\r\n  border-width: 0;\r\n  border-style: solid;\r\n  border-color: transparent;\r\n  border-top-left-radius: 2px;\r\n  border-top-right-radius: 2px;\r\n}\r\n.b-tabpanel-tab.b-rotate-vertical {\r\n  min-width: auto;\r\n  min-height: 3em;\r\n}\r\n.b-tabpanel-tab:not(.b-rotate-vertical) {\r\n  min-height: auto;\r\n  min-width: 3em;\r\n}\r\n.b-tabpanel-tab.b-active {\r\n  background-color: #fff5e6;\r\n  border-color: #d0d1d2;\r\n  color: #3b3b3b;\r\n  z-index: 1;\r\n}\r\n.b-dock-left > .b-tabpanel-tabs > .b-tabpanel-tab {\r\n  border-width: 0 0 0 0;\r\n}\r\n.b-dock-right > .b-tabpanel-tabs > .b-tabpanel-tab {\r\n  border-width: 0 0 0 0;\r\n}\r\n.b-dock-bottom > .b-tabpanel-tabs > .b-tabpanel-tab {\r\n  border-width: 0 0 0 0;\r\n}\r\n.b-tabpanel-tab.b-hidden {\r\n  display: none !important;\r\n}\r\n.b-tabpanel-tab.b-disabled {\r\n  background-color: transparent;\r\n  color: rgba(123, 123, 123, 0.3);\r\n  border-color: rgba(0, 0, 0, 0);\r\n}\r\n.b-tabpanel-tab:focus {\r\n  outline: none;\r\n}\r\n.b-tabpanel-tab:hover:not(.b-active):not(.b-disabled), .b-tabpanel-tab:focus:not(.b-active):not(.b-disabled) {\r\n  background-color: #fff5e6;\r\n  color: #616161;\r\n}\r\n.b-tabpanel-body.b-card-container {\r\n  background-color: transparent;\r\n  border-radius: 2px;\r\n  border: 0 solid #d0d1d2;\r\n  flex: 1 0 auto;\r\n  padding: 1em 0;\r\n}\r\n.b-tabpanel[data-active-index="0"] .b-tabpanel-body {\r\n  border-top-left-radius: 0;\r\n}\r\n.b-tabpanel .b-html {\r\n  color: #4f5964;\r\n}\r\n\r\n.b-toolbar.b-tabbar {\r\n  background-color: transparent;\r\n  min-height: auto;\r\n}\r\n.b-toolbar.b-tabbar > .b-tabpanel-tabs {\r\n  padding: 0;\r\n}\r\n.b-toolbar.b-tabbar.b-dock-top {\r\n  border-bottom: 1px solid #feac31;\r\n}\r\n.b-toolbar.b-tabbar.b-dock-right {\r\n  border-inline-start: 1px solid #feac31;\r\n}\r\n.b-toolbar.b-tabbar.b-dock-bottom {\r\n  border-top: 1px solid #feac31;\r\n}\r\n.b-toolbar.b-tabbar.b-dock-left {\r\n  border-inline-end: 1px solid #feac31;\r\n}\r\n\r\n.b-tabbar.b-dock-top .b-tabpanel-tabs > .b-widget:not(.b-last-visible-child), .b-tabbar.b-dock-bottom .b-tabpanel-tabs > .b-widget:not(.b-last-visible-child), .b-tabbar.b-dock-left .b-tabpanel-tabs > .b-widget:not(.b-last-visible-child), .b-tabbar.b-dock-right .b-tabpanel-tabs > .b-widget:not(.b-last-visible-child) {\r\n  margin-inline-end: 0;\r\n  margin-bottom: 0;\r\n}\r\n\r\n.b-toolbar.b-undoredo {\r\n  padding: 0;\r\n}\r\n.b-toolbar.b-undoredo > * {\r\n  border-radius: 0;\r\n}\r\n.b-buttongroup .b-toolbar.b-undoredo:not(:first-child) > button:first-child {\r\n  margin-inline-start: -1px;\r\n}\r\n.b-buttongroup .b-toolbar.b-undoredo > .b-widget {\r\n  margin-inline-end: 0;\r\n}\r\n.b-toolbar.b-undoredo .b-widget.b-combo {\r\n  flex: 1 1 250px;\r\n  margin: 0 0.5em;\r\n}\r\n.b-theme-material .b-toolbar.b-undoredo .b-widget.b-combo .b-field-inner {\r\n  padding-inline: 0.7em;\r\n}\r\n\r\n.b-yearpicker {\r\n  width: max-content;\r\n}\r\n.b-yearpicker .b-toolbar.b-dock-top {\r\n  background-color: #fff5e6;\r\n  color: #4f5964;\r\n  border-bottom: none;\r\n  min-height: 0;\r\n  font-size: 1.2em;\r\n}\r\n.b-yearpicker .b-toolbar.b-dock-top .b-toolbar-content {\r\n  padding: 0.5em 0.5ex !important;\r\n  gap: 0.5ex;\r\n}\r\n.b-yearpicker .b-toolbar.b-dock-top .b-icon:before, .b-yearpicker .b-toolbar.b-dock-top .b-icon-version:before {\r\n  line-height: normal;\r\n}\r\n.b-yearpicker .b-toolbar.b-dock-top button {\r\n  border: none;\r\n  min-height: 0;\r\n}\r\n.b-yearpicker .b-toolbar.b-dock-top .b-tool {\r\n  font-size: 80%;\r\n}\r\n.b-yearpicker .b-toolbar.b-dock-top .b-tool:hover {\r\n  opacity: 0.7;\r\n}\r\n.b-yearpicker .b-toolbar.b-dock-top .b-tool:not(.b-contains-focus) {\r\n  background: transparent !important;\r\n}\r\n.b-yearpicker .b-toolbar.b-dock-top .b-yearpicker-title {\r\n  margin-inline: auto;\r\n  color: inherit;\r\n  font-weight: 400;\r\n  background-color: unset;\r\n}\r\n.b-yearpicker .b-toolbar.b-dock-top .b-yearpicker-title[data-item-index="0"] {\r\n  margin-inline: 0.5em auto !important;\r\n}\r\n.b-yearpicker .b-toolbar.b-dock-top .b-yearpicker-title:not(.b-disabled):not(.b-tab):hover {\r\n  opacity: 0.7;\r\n  background-color: unset;\r\n}\r\n.b-yearpicker .b-yearpicker-body-wrap {\r\n  background-color: #f8f9fa;\r\n}\r\n.b-yearpicker .b-yearpicker-content {\r\n  display: grid;\r\n  align-items: center;\r\n  grid-template-columns: repeat(4, 1fr);\r\n  padding: 1em;\r\n  gap: 1em;\r\n}\r\n.b-yearpicker .b-yearpicker-content button.b-yearpicker-year {\r\n  border-width: 1px;\r\n  border-style: solid;\r\n  border-color: transparent;\r\n  border-radius: 1em;\r\n  height: 2em;\r\n  background: transparent;\r\n  font-size: 1em;\r\n  cursor: pointer;\r\n  color: #4f5964;\r\n  font-family: inherit;\r\n  font-weight: 400;\r\n  padding-inline: 0;\r\n}\r\n.b-yearpicker .b-yearpicker-content button.b-yearpicker-year:hover {\r\n  background-color: rgba(49, 131, 254, 0.15);\r\n  border-color: transparent;\r\n}\r\n.b-yearpicker .b-yearpicker-content button.b-yearpicker-year.b-selected {\r\n  color: #fff;\r\n  background-color: #3183fe;\r\n  border-color: #3183fe;\r\n}\r\n.b-yearpicker.b-outer, .b-yearpicker.b-floating {\r\n  min-width: 20.4em;\r\n  min-height: 18.2em;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-histogram {\r\n  background-color: #fff;\r\n  padding: 1px;\r\n  contain: strict;\r\n}\r\n.b-histogram svg * {\r\n  vector-effect: non-scaling-stroke;\r\n}\r\n.b-histogram rect {\r\n  fill: #27ca37;\r\n  transition-property: x, y, width, height, fill;\r\n  transition-duration: 1000ms;\r\n}\r\n.b-histogram rect.b-exceeds-top {\r\n  fill: #e53f2c;\r\n}\r\n.b-histogram text.b-bar-legend {\r\n  writing-mode: tb;\r\n  text-anchor: end;\r\n  font-size: 75%;\r\n}\r\n.b-histogram svg {\r\n  overflow: visible;\r\n}\r\n.b-histogram path {\r\n  fill: transparent;\r\n  stroke: #f99;\r\n  transition: d 1000ms;\r\n  pointer-events: none;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-scale {\r\n  contain: strict;\r\n}\r\n.b-scale svg * {\r\n  vector-effect: non-scaling-stroke;\r\n}\r\n.b-scale.b-scale-vertical text.b-scale-tick-label {\r\n  transform: translateY(0.3em);\r\n}\r\n.b-scale.b-scale-vertical.b-align-right {\r\n  text-anchor: end;\r\n}\r\n.b-scale.b-scale-horizontal text.b-scale-tick-label {\r\n  text-anchor: middle;\r\n}\r\n.b-scale path {\r\n  stroke: #9c9c9c;\r\n  pointer-events: none;\r\n}\r\n.b-scale text {\r\n  fill: #808080;\r\n}\r\n\r\n.b-hbox,\r\n.b-vbox {\r\n  display: flex;\r\n  align-items: stretch;\r\n  justify-content: flex-start;\r\n  position: relative;\r\n}\r\n.b-hbox > .b-box-center,\r\n.b-vbox > .b-box-center {\r\n  flex: 1 1 auto;\r\n}\r\n\r\n.b-hbox {\r\n  flex-flow: row nowrap;\r\n}\r\n\r\n.b-vbox {\r\n  flex-flow: column nowrap;\r\n}\r\n\r\n.b-box-justify-stretch {\r\n  justify-content: stretch;\r\n}\r\n\r\n.b-card-container {\r\n  display: flex;\r\n  flex-flow: row nowrap;\r\n  align-items: stretch;\r\n  overflow: hidden;\r\n  padding: 0;\r\n  position: relative;\r\n}\r\n.b-card-container.b-animating {\r\n  overflow: hidden;\r\n}\r\n.b-card-container > .b-card-item {\r\n  flex: 1 0 100%;\r\n  align-items: stretch;\r\n  max-width: 100%;\r\n}\r\n.b-card-container.b-hide-child-headers > .b-panel:not(.b-positioned) > .b-panel-header {\r\n  display: none;\r\n}\r\n\r\n@keyframes b-card-slide-in-left {\r\n  0% {\r\n    transform: translateX(-100%);\r\n  }\r\n  100% {\r\n    transform: translateX(0);\r\n  }\r\n}\r\n@keyframes b-card-slide-out-right {\r\n  0% {\r\n    transform: translateX(-100%);\r\n  }\r\n  100% {\r\n    transform: translateX(0);\r\n  }\r\n}\r\n@keyframes b-card-slide-in-right {\r\n  0% {\r\n    transform: translateX(0);\r\n  }\r\n  100% {\r\n    transform: translateX(-100%);\r\n  }\r\n}\r\n@keyframes b-card-slide-out-left {\r\n  0% {\r\n    transform: translateX(0);\r\n  }\r\n  100% {\r\n    transform: translateX(-100%);\r\n  }\r\n}\r\n.b-slide-in-left {\r\n  animation: b-card-slide-in-left 0.3s ease 0s 1;\r\n}\r\n\r\n.b-slide-out-right {\r\n  pointer-events: none;\r\n  left: 1em;\r\n  animation: b-card-slide-out-right 0.3s ease 0s 1;\r\n}\r\n\r\n.b-slide-in-right {\r\n  animation: b-card-slide-in-right 0.3s ease 0s 1;\r\n}\r\n\r\n.b-slide-out-left {\r\n  pointer-events: none;\r\n  margin-inline-start: -1em;\r\n  margin-inline-end: 1em;\r\n  animation: b-card-slide-out-left 0.3s ease 0s 1;\r\n}\r\n\r\n.b-fit-container {\r\n  display: flex;\r\n  flex-flow: row nowrap;\r\n  align-items: stretch;\r\n  overflow: hidden;\r\n  position: relative;\r\n}\r\n.b-fit-container > .b-fit-item {\r\n  flex: 1 0 auto;\r\n  margin: 0;\r\n  max-width: 100%;\r\n  align-self: stretch !important;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-resource-avatar {\r\n  touch-action: pan-x pan-y;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 2.2em;\r\n  height: 2.2em;\r\n  border-radius: 50%;\r\n  flex-shrink: 0;\r\n}\r\n.b-resource-avatar.b-resource-icon:before {\r\n  font-size: 1.5em;\r\n}\r\n\r\n.b-resource-initials {\r\n  background: #3183fe;\r\n  color: #fff;\r\n  text-transform: uppercase;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-color-indigo {\r\n  background-color: #4531fe;\r\n}\r\n\r\n.b-color-blue {\r\n  background-color: #3183fe;\r\n}\r\n\r\n.b-color-cyan {\r\n  background-color: #3bc9db;\r\n}\r\n\r\n.b-color-red {\r\n  background-color: #e53f2c;\r\n}\r\n\r\n.b-color-deep-orange {\r\n  background-color: #ff5722;\r\n}\r\n\r\n.b-color-orange {\r\n  background-color: #feac31;\r\n}\r\n\r\n.b-color-amber {\r\n  background-color: #ffc107;\r\n}\r\n\r\n.b-color-yellow {\r\n  background-color: #ecfe26;\r\n}\r\n\r\n.b-color-teal {\r\n  background-color: #31feac;\r\n}\r\n\r\n.b-color-green {\r\n  background-color: #27ca37;\r\n}\r\n\r\n.b-color-light-green {\r\n  background-color: #9efea7;\r\n}\r\n\r\n.b-color-lime {\r\n  background-color: #83fe31;\r\n}\r\n\r\n.b-color-purple {\r\n  background-color: #fe31ea;\r\n}\r\n\r\n.b-color-violet {\r\n  background-color: #9775fa;\r\n}\r\n\r\n.b-color-pink {\r\n  background-color: #f783ac;\r\n}\r\n\r\n.b-color-dark-gray {\r\n  background-color: #474849;\r\n}\r\n\r\n.b-color-gray {\r\n  background-color: #b0b0b7;\r\n}\r\n\r\n.b-color-light-gray {\r\n  background-color: #e0e0e7;\r\n}\r\n\r\n.b-color-white {\r\n  background-color: #fff;\r\n}\r\n\r\n.b-indigo {\r\n  --widget-primary-color-rgb: 69,49,254;\r\n}\r\n\r\n.b-blue {\r\n  --widget-primary-color-rgb: 49,131,254;\r\n}\r\n\r\n.b-cyan {\r\n  --widget-primary-color-rgb: 59,201,219;\r\n}\r\n\r\n.b-red {\r\n  --widget-primary-color-rgb: 229,63,44;\r\n}\r\n\r\n.b-deep-orange {\r\n  --widget-primary-color-rgb: 255,87,34;\r\n}\r\n\r\n.b-orange {\r\n  --widget-primary-color-rgb: 254,172,49;\r\n}\r\n\r\n.b-amber {\r\n  --widget-primary-color-rgb: 255,193,7;\r\n}\r\n\r\n.b-yellow {\r\n  --widget-primary-color-rgb: 236,254,38;\r\n}\r\n\r\n.b-teal {\r\n  --widget-primary-color-rgb: 49,254,172;\r\n}\r\n\r\n.b-green {\r\n  --widget-primary-color-rgb: 39,202,55;\r\n}\r\n\r\n.b-light-green {\r\n  --widget-primary-color-rgb: 158,254,167;\r\n}\r\n\r\n.b-lime {\r\n  --widget-primary-color-rgb: 131,254,49;\r\n}\r\n\r\n.b-purple {\r\n  --widget-primary-color-rgb: 254,49,234;\r\n}\r\n\r\n.b-violet {\r\n  --widget-primary-color-rgb: 151,117,250;\r\n}\r\n\r\n.b-pink {\r\n  --widget-primary-color-rgb:247,131,172;\r\n}\r\n\r\n.b-dark-gray {\r\n  --widget-primary-color-rgb: 71,72,73;\r\n}\r\n\r\n.b-gray {\r\n  --widget-primary-color-rgb: 176,176,183;\r\n}\r\n\r\n.b-light-gray {\r\n  --widget-primary-color-rgb: 224,224,231;\r\n}\r\n\r\n.b-white {\r\n  --widget-primary-color-rgb: 255,255,255;\r\n}\r\n\r\n.b-icon-clock-live {\r\n  background-color: #b0b1b2;\r\n  border-radius: 50%;\r\n  width: 1em;\r\n  height: 1em;\r\n  position: relative;\r\n  animation-delay: 0s;\r\n}\r\n.b-icon-clock-live:before, .b-icon-clock-live:after {\r\n  position: absolute;\r\n  display: block;\r\n  font-size: 1em !important;\r\n  content: "";\r\n  width: 0.1em !important;\r\n  left: 0.44em; /* half width of clock - half width of hand */\r\n  background: #fff;\r\n  border-radius: 0.5em;\r\n}\r\n.b-icon-clock-live:before {\r\n  top: 0.15em;\r\n  height: 0.4em !important; /* half the width/height of the clock */\r\n  transform-origin: 0.05em 0.35em;\r\n  animation: rotate 6s infinite linear;\r\n  animation-play-state: paused;\r\n  animation-delay: inherit;\r\n}\r\n.b-icon-clock-live:after {\r\n  top: 0.22em;\r\n  height: 0.33em; /* top + height for little hand must = top + height for big hand */\r\n  transform-origin: 0.05em 0.3em;\r\n  animation: rotate 72s infinite linear; /* time should be big-hand time * 12 */\r\n  animation-play-state: paused;\r\n  animation-delay: inherit;\r\n}\r\n\r\n/* Animations */\r\n@keyframes rotate {\r\n  0% {\r\n    transform: rotate(0deg);\r\n  }\r\n  100% {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n.b-checkbox {\r\n  --checkbox-unchecked-check-color: transparent;\r\n  --checkbox-checked-background-color: transparent;\r\n  --checkbox-checked-check-color: #474849;\r\n}\r\n\r\n/*!\r\n * Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com\r\n * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)\r\n * Copyright 2022 Fonticons, Inc.\r\n */\r\n:root, :host {\r\n  --b-fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";\r\n}\r\n\r\n@font-face {\r\n  font-family: "Font Awesome 6 Free";\r\n  font-style: normal;\r\n  font-weight: 900;\r\n  font-display: block;\r\n  src: url('+d+') format("woff2"), url('+u+') format("truetype");\r\n}\r\n.fas,\r\n.b-fa-solid {\r\n  font-family: "Font Awesome 6 Free";\r\n  font-weight: 900;\r\n}\r\n\r\n.b-content-icon, .b-group-state-icon, .b-gridbase.b-columnresize.b-touch.b-column-resizing .b-grid-header.b-resizing::before {\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  display: inline-block;\r\n  font-style: normal;\r\n  font-variant: normal;\r\n  font-weight: normal;\r\n  line-height: 1;\r\n  font-family: "Font Awesome 6 Free", FontAwesome6Free;\r\n  font-weight: 900;\r\n  vertical-align: 0;\r\n}\r\n\r\n.b-theme-info:before {\r\n  content: \'{"name":"Stockholm"}\';\r\n}\r\n\r\n.b-slidetoggle .b-slidetoggle-label,\r\n:not(.b-fieldset-has-label) > .b-checkbox .b-checkbox-label {\r\n  text-transform: uppercase;\r\n  font-size: 0.9em;\r\n}\r\n.b-slidetoggle .b-slidetoggle-label::before,\r\n:not(.b-fieldset-has-label) > .b-checkbox .b-checkbox-label::before {\r\n  font-size: 1.1111111111em;\r\n}\r\n\r\n.b-popup > .b-panel-body-wrap > .b-bottom-toolbar {\r\n  background: #f8f9fa;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-grid.b-readonly.b-actioncolumn-readonly .b-action-cell {\r\n  filter: grayscale(1);\r\n  opacity: 0.2;\r\n  pointer-events: none;\r\n}\r\n\r\n.b-action-cell {\r\n  text-align: end;\r\n}\r\n\r\n.b-action-ct {\r\n  display: flex;\r\n  flex-flow: row nowrap;\r\n}\r\n\r\n.b-action-item {\r\n  margin: 0 -0.2em;\r\n  text-align: center;\r\n  font-size: 1.2em;\r\n  color: #4d4d4d;\r\n}\r\n\r\n.b-action-cell.b-grid-cell .b-action-item {\r\n  transition: all 0.15s ease-in-out;\r\n}\r\n\r\n.b-action-item:hover {\r\n  transform: scale3d(1.2, 1.2, 1);\r\n  color: #feac31;\r\n}\r\n\r\n.b-check-header-with-checkbox .b-grid-header-text {\r\n  display: none;\r\n}\r\n.b-check-header-with-checkbox .b-field-inner {\r\n  justify-content: center;\r\n}\r\n\r\n.b-check-header-with-checkbox .b-checkbox-label,\r\n.b-check-cell .b-checkbox-label {\r\n  display: flex;\r\n  gap: 0.4em;\r\n  align-items: center;\r\n}\r\n.b-check-header-with-checkbox .b-checkbox-label:before,\r\n.b-check-cell .b-checkbox-label:before {\r\n  margin: 0 !important;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-percent-bar-outer {\r\n  flex: 1;\r\n  height: 30%;\r\n  max-height: 0.8em;\r\n  background: #f1f1f1;\r\n}\r\n\r\n.b-percent-bar {\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  height: 100%;\r\n  max-width: 100%;\r\n  padding: 0 0.2em;\r\n  background: #27ca37;\r\n  color: #fff;\r\n  font-size: 0.7em;\r\n  text-align: end;\r\n  transition: width 0.5s, padding 0.5s, background-color 0.5s;\r\n}\r\n.b-percent-bar.b-zero {\r\n  padding: 0;\r\n  text-indent: 0.2em;\r\n}\r\n.b-percent-bar.b-low {\r\n  background: #e53f2c;\r\n  color: #4f5964;\r\n}\r\n.b-percent-bar.b-low span {\r\n  left: 100%;\r\n  margin-block: 0;\r\n  margin-inline: 5px 0;\r\n}\r\n.b-percent-bar span {\r\n  position: relative;\r\n  display: inline-block;\r\n  margin-block: 0;\r\n  margin-inline: 0 5px;\r\n  line-height: 1em;\r\n}\r\n\r\n.b-grid-body-container.b-scrolling .b-percent-bar {\r\n  transition: none;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-rating-cell .b-icon, .b-rating-cell .b-icon-version {\r\n  font-size: 1.8em;\r\n}\r\n.b-rating-cell .b-empty {\r\n  color: rgba(224, 224, 231, 0.3);\r\n}\r\n.b-rating-cell .b-filled {\r\n  color: #ffce3a;\r\n}\r\n\r\n.b-gridbase:not(.b-readonly) .b-rating-cell-inner:not(.b-not-editable) .b-icon, .b-gridbase:not(.b-readonly) .b-rating-cell-inner:not(.b-not-editable) .b-icon-version {\r\n  cursor: pointer;\r\n  transition: all 0.2s linear;\r\n  position: relative;\r\n}\r\n.b-gridbase:not(.b-readonly) .b-rating-cell-inner:not(.b-not-editable):hover .b-icon, .b-gridbase:not(.b-readonly) .b-rating-cell-inner:not(.b-not-editable):hover .b-icon-version {\r\n  color: #ffce3a;\r\n}\r\n.b-gridbase:not(.b-readonly) .b-rating-cell-inner:not(.b-not-editable):hover .b-icon.b-empty::before, .b-gridbase:not(.b-readonly) .b-rating-cell-inner:not(.b-not-editable):hover .b-empty.b-icon-version::before {\r\n  opacity: 0.4;\r\n}\r\n.b-gridbase:not(.b-readonly) .b-rating-cell-inner:not(.b-not-editable) .b-icon:hover, .b-gridbase:not(.b-readonly) .b-rating-cell-inner:not(.b-not-editable) .b-icon-version:hover {\r\n  transform: scale(1.3);\r\n}\r\n.b-gridbase:not(.b-readonly) .b-rating-cell-inner:not(.b-not-editable) .b-icon:hover.b-filled, .b-gridbase:not(.b-readonly) .b-rating-cell-inner:not(.b-not-editable) .b-icon-version:hover.b-filled {\r\n  opacity: 1;\r\n}\r\n.b-gridbase:not(.b-readonly) .b-rating-cell-inner:not(.b-not-editable) .b-icon:hover:hover ~ .b-icon::before, .b-gridbase:not(.b-readonly) .b-rating-cell-inner:not(.b-not-editable) .b-icon-version:hover:hover ~ .b-icon::before, .b-gridbase:not(.b-readonly) .b-rating-cell-inner:not(.b-not-editable) .b-icon:hover:hover ~ .b-icon-version::before, .b-gridbase:not(.b-readonly) .b-rating-cell-inner:not(.b-not-editable) .b-icon-version:hover:hover ~ .b-icon-version::before {\r\n  color: rgba(224, 224, 231, 0.3);\r\n  opacity: 1;\r\n}\r\n\r\n.b-grid-body-container.b-scrolling .b-rating-cell-inner .b-icon, .b-grid-body-container.b-scrolling .b-rating-cell-inner .b-icon-version {\r\n  transition: none;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-grid-cell.b-row-number-cell {\r\n  background-color: #f1f1f1;\r\n  border-inline-end: 1px solid #e9eaeb;\r\n}\r\n\r\n.b-grid-row.b-hover .b-grid-cell.b-row-number-cell:hover {\r\n  border-inline-end: 1px solid #e9eaeb;\r\n}\r\n\r\n.b-group-row .b-grid-cell.b-row-number-cell:first-child {\r\n  border-inline-end: 1px solid #e9eaeb;\r\n}\r\n\r\n.b-gridbase:focus .b-grid-row.b-selected .b-grid-cell.b-row-number-cell.b-selected {\r\n  border-inline-end: 1px solid #e9eaeb;\r\n}\r\n\r\n.b-gridbase .b-grid-row.b-selected .b-row-number-cell, .b-gridbase .b-grid-row .b-grid-cell.b-selected.b-row-number-cell {\r\n  background-color: #e4e4e4;\r\n}\r\n\r\n.b-gridbase:not(.b-moving-splitter) .b-grid-subgrid:not(.b-timeaxissubgrid) .b-grid-row:not(.b-group-row).b-hover .b-grid-cell.b-row-number-cell, .b-gridbase:not(.b-moving-splitter) .b-grid-subgrid:not(.b-timeaxissubgrid) .b-grid-row:not(.b-group-row) .b-grid-cell.b-row-number-cell.b-hover {\r\n  background-color: #ececec;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-tree-expander {\r\n  position: relative;\r\n  top: 1px;\r\n  margin: 0 0.55em;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.b-loading-children .b-tree-expander .b-icon:before, .b-loading-children .b-tree-expander .b-icon-version:before {\r\n  content: "\\f110";\r\n  animation: spin 2s infinite linear;\r\n}\r\n\r\n.b-grid-cell.b-tree-cell {\r\n  align-items: stretch;\r\n}\r\n\r\n.b-tree-leaf-cell .b-tree-cell-inner:before {\r\n  font-family: "Font Awesome 6 Free", FontAwesome6Free;\r\n  font-weight: 900;\r\n  color: #adaeaf;\r\n  margin-inline-end: 0.6em;\r\n  width: 1.25em;\r\n  min-width: 1.25em;\r\n  text-align: center;\r\n}\r\n\r\n.b-tree-icon,\r\n.b-icon-tree-leaf,\r\n.b-icon-tree-folder,\r\n.b-icon-tree-folder-open,\r\n.b-icon-tree-expand,\r\n.b-icon-tree-collapse {\r\n  color: #adaeaf;\r\n  width: 1.25em;\r\n  min-width: 1.25em;\r\n  text-align: center;\r\n}\r\n\r\n.b-tree-icon,\r\n.b-icon-tree-leaf,\r\n.b-icon-tree-folder,\r\n.b-icon-tree-folder-open {\r\n  margin-inline-end: 0.6em;\r\n}\r\n\r\n.b-icon-tree-leaf:before {\r\n  font-size: 0.3em;\r\n  vertical-align: middle;\r\n}\r\n\r\n.b-icon-tree-folder:before,\r\n.b-icon-tree-folder-open:before {\r\n  margin-inline-start: 0.1em;\r\n}\r\n\r\n.b-icon-tree-expand.b-empty-parent,\r\n.b-icon-tree-collapse.b-empty-parent {\r\n  visibility: hidden;\r\n}\r\n.b-icon-tree-expand:before,\r\n.b-icon-tree-collapse:before {\r\n  font-size: 1.2em;\r\n}\r\n\r\n.b-tree-cell-inner {\r\n  padding: 0.5em 0;\r\n  display: flex;\r\n  align-items: center;\r\n  flex-shrink: 0;\r\n  flex-grow: 1;\r\n}\r\n.b-tree-cell-inner.b-text-value {\r\n  flex-shrink: 1;\r\n  overflow: hidden;\r\n}\r\n.b-tree-cell-inner.b-text-value .b-tree-cell-value {\r\n  display: initial;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n.b-tree-cell.b-auto-height .b-tree-cell-inner {\r\n  flex-shrink: 1;\r\n}\r\n\r\n.b-tree-cell.b-auto-height {\r\n  flex-shrink: 1;\r\n}\r\n\r\na.b-tree-cell-inner {\r\n  text-decoration: none;\r\n}\r\na.b-tree-cell-inner:hover .b-tree-cell-value {\r\n  text-decoration: underline;\r\n}\r\n\r\n.b-tree-parent-cell,\r\n.b-tree-leaf-cell {\r\n  padding-inline-start: 10px;\r\n}\r\n\r\n.b-tree-cell.b-tree-parent-cell {\r\n  font-weight: 600;\r\n  color: #797b7d;\r\n}\r\n\r\n.b-tree-cell-value {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n}\r\n\r\n.b-touch .b-tree-expander {\r\n  width: 1.1em;\r\n}\r\n.b-touch .b-icon-tree-expand:before,\r\n.b-touch .b-icon-tree-collapse:before {\r\n  font-size: 1.8em;\r\n}\r\n.b-touch .b-icon-tree-leaf:before {\r\n  font-size: 0.6em;\r\n}\r\n.b-touch .b-tree-icon,\r\n.b-touch .b-tree-leaf-cell:not(.b-tree-parent-cell):before {\r\n  font-size: 1.2em;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-editor.b-cell-editor {\r\n  position: absolute;\r\n  background-color: transparent;\r\n  border-width: 0;\r\n  border-style: solid;\r\n  box-shadow: none !important;\r\n  z-index: 1;\r\n}\r\n.b-grid-cell:not(.b-tree-cell) .b-editor.b-cell-editor {\r\n  width: 100% !important;\r\n}\r\n.b-editor.b-cell-editor .b-field > .b-label {\r\n  clip-path: inset(0 100% 100% 0);\r\n  position: absolute;\r\n  contain: strict;\r\n}\r\n.b-editor.b-cell-editor .b-numberfield:not(.b-has-start-trigger) .b-field-inner,\r\n.b-editor.b-cell-editor .b-textfield:not(.b-has-start-trigger) .b-field-inner {\r\n  padding-inline-start: 0;\r\n}\r\n.b-editor.b-cell-editor .b-numberfield input,\r\n.b-editor.b-cell-editor .b-textfield input {\r\n  padding: 0 calc(0.5em - 1px);\r\n}\r\n.b-editor.b-cell-editor .b-combo.b-uses-chipview .b-chipview {\r\n  margin: 0.3em;\r\n}\r\n\r\n.b-gridbase .b-editing {\r\n  overflow: visible;\r\n  contain: unset;\r\n  z-index: 1;\r\n  outline: none !important;\r\n}\r\n.b-gridbase .b-editing .b-grid-cell.b-editing {\r\n  color: transparent;\r\n}\r\n\r\n.b-grid-cell:not(.b-editing) .b-cell-editor {\r\n  display: none;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-celltooltip-tip {\r\n  max-height: 50%;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-columndragtoolbar {\r\n  position: absolute;\r\n  top: calc(100% - 3em);\r\n  left: 50%;\r\n  z-index: 100;\r\n  animation-name: b-show-columndragtoolbar;\r\n  animation-duration: 0.2s;\r\n  transform: translateX(-50%);\r\n  display: inline-flex;\r\n  flex-direction: row;\r\n  flex-wrap: wrap;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 1em;\r\n  background: #f8f9fa;\r\n  transition: opacity 0.2s, top 0.2s;\r\n  box-shadow: none;\r\n  padding: 1em 1em 0.5em 1em;\r\n  opacity: 0.4;\r\n  font-size: 0.8em;\r\n}\r\n.b-columndragtoolbar.b-closer {\r\n  top: 50%;\r\n  transform: translate(-50%, -50%);\r\n}\r\n.b-columndragtoolbar.b-hover {\r\n  opacity: 0.8;\r\n}\r\n.b-columndragtoolbar.b-remove {\r\n  animation-name: b-hide-columndragtoolbar;\r\n  animation-duration: 0.2s;\r\n  top: 100%;\r\n  opacity: 0;\r\n}\r\n.b-columndragtoolbar.b-remove.b-closer {\r\n  animation-name: b-hide-columndragtoolbar-closer;\r\n}\r\n.b-columndragtoolbar > .b-title {\r\n  color: #fff;\r\n  flex-basis: 100%;\r\n  margin-bottom: 1em;\r\n  text-align: center;\r\n}\r\n.b-columndragtoolbar > .b-title:before {\r\n  content: "Drag header downwards";\r\n}\r\n.b-columndragtoolbar.b-closer > .b-title:before {\r\n  content: "Drop header on a button";\r\n}\r\n.b-columndragtoolbar .b-group {\r\n  display: inline-flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  margin-inline-end: 1.5em;\r\n}\r\n.b-columndragtoolbar .b-group:last-child {\r\n  margin-inline-end: 0;\r\n}\r\n.b-columndragtoolbar .b-group .b-title {\r\n  color: #fff;\r\n  margin-block: 0.5em;\r\n}\r\n.b-columndragtoolbar .b-buttons {\r\n  display: inline-flex;\r\n  flex-direction: row;\r\n}\r\n.b-columndragtoolbar .b-target-button {\r\n  display: inline-flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  transition: all 0.2s;\r\n  color: #4f5964;\r\n  border: 0.3em solid #feac31;\r\n  border-radius: 1em;\r\n  background: transparent;\r\n  padding: 1em 0;\r\n  width: 7em;\r\n  margin-inline-end: 0.5em;\r\n  box-shadow: none;\r\n}\r\n.b-columndragtoolbar .b-target-button:last-child {\r\n  margin-inline-end: 0;\r\n}\r\n.b-columndragtoolbar .b-target-button i {\r\n  font-size: 2.5em;\r\n  color: #feac31;\r\n  pointer-events: none;\r\n  transition: all 0.2s;\r\n}\r\n.b-columndragtoolbar .b-target-button.b-hover:not([data-disabled=true]) {\r\n  background-color: #feac31;\r\n  color: #fff;\r\n  box-shadow: none;\r\n}\r\n.b-columndragtoolbar .b-target-button.b-hover:not([data-disabled=true]) i {\r\n  transform: scale(1.1);\r\n  color: #fff;\r\n}\r\n.b-columndragtoolbar .b-target-button.b-activate i {\r\n  transform: scale(1.1) rotate(180deg) !important;\r\n}\r\n.b-columndragtoolbar .b-target-button[data-button-id^=group] {\r\n  border-color: #3183fe;\r\n  background-color: transparent;\r\n}\r\n.b-columndragtoolbar .b-target-button[data-button-id^=group] i {\r\n  color: #3183fe;\r\n}\r\n.b-columndragtoolbar .b-target-button[data-button-id^=group].b-hover:not([data-disabled=true]) {\r\n  background-color: #3183fe;\r\n}\r\n.b-columndragtoolbar .b-target-button[data-button-id^=group].b-hover:not([data-disabled=true]) i {\r\n  color: #fff;\r\n}\r\n.b-columndragtoolbar .b-target-button[data-button-id^=multisort] {\r\n  border-color: #fb9701;\r\n}\r\n.b-columndragtoolbar .b-target-button[data-button-id^=multisort] i {\r\n  color: #fb9701;\r\n}\r\n.b-columndragtoolbar .b-target-button[data-button-id^=multisort].b-hover:not([data-disabled=true]) {\r\n  background-color: #fb9701;\r\n}\r\n.b-columndragtoolbar .b-target-button[data-button-id^=multisort].b-hover:not([data-disabled=true]) i {\r\n  color: #fff;\r\n}\r\n.b-columndragtoolbar .b-target-button[data-disabled=true] {\r\n  opacity: 0.5;\r\n}\r\n\r\n@keyframes b-show-columndragtoolbar {\r\n  from {\r\n    top: 100%;\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    top: calc(100% - 3em);\r\n    opacity: 0.4;\r\n  }\r\n}\r\n@keyframes b-hide-columndragtoolbar {\r\n  from {\r\n    top: calc(100% - 3em);\r\n    opacity: 0.4;\r\n  }\r\n  to {\r\n    top: 100%;\r\n    opacity: 0;\r\n  }\r\n}\r\n@keyframes b-hide-columndragtoolbar-closer {\r\n  from {\r\n    top: 50%;\r\n    opacity: 0.4;\r\n  }\r\n  to {\r\n    top: 100%;\r\n    opacity: 0;\r\n  }\r\n}\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-grid-header.b-drag-proxy {\r\n  line-height: normal;\r\n  font-weight: 500;\r\n  background-color: #f3f4f5;\r\n  outline: 1px solid #d8d9da;\r\n  transition: background-color 0.3s;\r\n  border-inline-end: none;\r\n}\r\n.b-grid-header.b-drag-proxy.b-grid-header-parent {\r\n  justify-content: stretch;\r\n}\r\n.b-grid-header.b-drag-proxy.b-grid-header-parent > .b-grid-header-text {\r\n  border-inline-end: none;\r\n}\r\n.b-grid-header.b-drag-proxy .b-grid-header:last-child {\r\n  border-inline-end: none;\r\n}\r\n.b-grid-header.b-drop-placeholder {\r\n  opacity: 0.3;\r\n}\r\n.b-grid-header.b-drag-invalid {\r\n  outline: 1px solid #e53f2c;\r\n}\r\n.b-grid-header.b-drag-invalid, .b-grid-header.b-drag-invalid .b-grid-header {\r\n  color: #e53f2c;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-gridbase.b-columnresize .b-grid-header.b-resize-handle {\r\n  cursor: ew-resize !important;\r\n}\r\n.b-gridbase.b-columnresize .b-grid-header.b-resizing {\r\n  background: white;\r\n}\r\n.b-gridbase.b-columnresize.b-sort .b-grid-header.b-resizing:not(.b-filter):not(.b-multifilter) .b-filter-icon,\r\n.b-gridbase.b-columnresize.b-sort .b-grid-header.b-over-resize-handle:not(.b-filter):not(.b-multifilter) .b-filter-icon,\r\n.b-gridbase.b-columnresize.b-sort .b-grid-header.b-resizing:not(.b-sort):after,\r\n.b-gridbase.b-columnresize.b-sort .b-grid-header.b-over-resize-handle:hover:not(.b-sort):after {\r\n  display: none;\r\n}\r\n.b-gridbase.b-columnresize.b-touch.b-column-resizing .b-grid-header.b-resizing {\r\n  overflow: visible;\r\n  z-index: 100;\r\n}\r\n.b-gridbase.b-columnresize.b-touch.b-column-resizing .b-grid-header.b-resizing::before {\r\n  content: "\\f337";\r\n  font-size: 1.5em;\r\n  color: #fff;\r\n  position: absolute;\r\n  top: 50%;\r\n  transform: translateX(50%) translateY(-50%);\r\n  right: 0;\r\n  z-index: 101;\r\n  border-radius: 100%;\r\n  background-color: #d8d9da;\r\n  pointer-events: none;\r\n  padding: 0.5em;\r\n}\r\n.b-rtl .b-gridbase.b-columnresize.b-touch.b-column-resizing .b-grid-header.b-resizing::before {\r\n  right: auto;\r\n  left: 0;\r\n}\r\n.b-gridbase.b-columnresize.b-touch.b-column-resizing .b-grid-header:not(.b-resizing) {\r\n  z-index: 1;\r\n}\r\n\r\n.b-context-menu {\r\n  min-width: 14em;\r\n}\r\n\r\n.b-fill-handle {\r\n  width: 0.8em;\r\n  height: 0.8em;\r\n  transform: translate(-50%, -50%);\r\n  position: absolute;\r\n  background: #64a2fe;\r\n  cursor: crosshair;\r\n  border: 1px solid #fff;\r\n  z-index: 2;\r\n  background-clip: content-box;\r\n  user-select: none;\r\n  -webkit-user-select: none;\r\n}\r\n\r\n.b-fill-selection-border {\r\n  position: absolute;\r\n  border: 1px solid #64a2fe;\r\n  border-radius: 0.1em;\r\n  pointer-events: none;\r\n  z-index: 2;\r\n  user-select: none;\r\n  -webkit-user-select: none;\r\n}\r\n\r\n.b-indicate-crop {\r\n  opacity: 0.4;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n@keyframes b-filter-icon-color {\r\n  0% {\r\n    color: #b0b0b7;\r\n  }\r\n  50% {\r\n    color: #3183fe;\r\n  }\r\n  100% {\r\n    color: #b0b0b7;\r\n  }\r\n}\r\n.b-grid-header .b-filter-icon {\r\n  display: none;\r\n  cursor: pointer;\r\n  transition: opacity 0.2s;\r\n}\r\n.b-grid-header .b-filter-icon::after {\r\n  font-family: "Font Awesome 6 Free", FontAwesome6Free;\r\n  font-weight: 900;\r\n  font-size: 0.8em;\r\n  color: #e5e7e9;\r\n  margin-inline-start: 0.5em;\r\n  transition: transform 0.3s, color 0.2s;\r\n  transform: none;\r\n  background: inherit; /* Transparent bg will look bad if there is text under the icon */\r\n  content: "\\f0b0";\r\n}\r\n.b-grid-header .b-filter-icon:hover::after {\r\n  color: #b0b0b7;\r\n}\r\n\r\n.b-gridbase:not(.b-filter):not(.b-multifilter) .b-filter-icon {\r\n  opacity: 0.2;\r\n  pointer-events: none;\r\n}\r\n\r\n.b-gridbase:not(.b-column-resizing) .b-grid-header-container:not(.b-dragging-header) .b-grid-header.b-filterable:hover > .b-grid-header-text > .b-filter-icon {\r\n  display: flex;\r\n}\r\n\r\n.b-grid-header.b-filter .b-grid-header-text {\r\n  font-weight: 700;\r\n  color: #666;\r\n}\r\n.b-grid-header.b-filter .b-filter-icon {\r\n  display: flex;\r\n}\r\n.b-grid-header.b-filter .b-filter-icon::after {\r\n  color: #b0b0b7;\r\n}\r\n.b-grid-header.b-filter .b-filter-icon.b-latest::after {\r\n  animation-name: b-filter-icon-color;\r\n  animation-duration: 0.75s;\r\n}\r\n\r\n.b-filter-popup .b-field {\r\n  width: 15em;\r\n}\r\n\r\n.b-filter-popup .b-multifilter-add {\r\n  width: 12em;\r\n  align-self: center;\r\n  margin: 1.1em 0 0 0;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-filter-bar-field {\r\n  margin: 0 0 0.5em 0;\r\n  width: 100%;\r\n}\r\n\r\n.b-filter-bar-compact .b-grid-header.b-filter-bar-enabled {\r\n  flex-direction: row;\r\n}\r\n.b-filter-bar-compact .b-grid-header.b-filter-bar-enabled .b-grid-header-text {\r\n  padding: 0.25em 0;\r\n  width: 2em;\r\n  order: 1;\r\n  margin-inline-end: -0.5em;\r\n}\r\n.b-filter-bar-compact .b-grid-header.b-filter-bar-enabled .b-grid-header-text .b-grid-header-text-content {\r\n  display: none;\r\n}\r\n.b-filter-bar-compact .b-filter-bar-field {\r\n  margin: 0;\r\n}\r\n.b-filter-bar-compact .b-filter-bar-field .b-field-inner {\r\n  background-color: transparent;\r\n  border: none;\r\n}\r\n.b-filter-bar-compact .b-filter-bar-field .b-field-inner::before {\r\n  display: none;\r\n}\r\n.b-filter-bar-compact .b-filter-bar-field .b-field-inner input {\r\n  padding: 0.8em 0;\r\n}\r\n.b-filter-bar-compact .b-filter-bar-field .b-field-inner input::placeholder {\r\n  color: #667280;\r\n  text-transform: uppercase;\r\n  font-size: 0.9em;\r\n  font-weight: 500;\r\n}\r\n.b-filter-bar-compact .b-filter-bar-field .b-fieldtrigger {\r\n  display: none;\r\n}\r\n.b-filter-bar-compact .b-filter-bar-field:focus-within:not(.b-empty) .b-icon-remove, .b-filter-bar-compact .b-filter-bar-field:focus-within .b-fieldtrigger:not(.b-step-trigger):not(.b-icon-remove):not(.b-spintrigger) {\r\n  display: inline-flex;\r\n}\r\n.b-filter-bar-compact .b-filter-bar-field .b-fieldtrigger.b-align-end {\r\n  padding: 0;\r\n}\r\n.b-filter-bar-compact .b-filter-bar-field.b-uses-chipview:not(.b-empty) input {\r\n  margin-inline-start: 0.5em;\r\n  margin-top: -0.25em;\r\n}\r\n.b-filter-bar-compact .b-filter-bar-field.b-uses-chipview:not(.b-empty) input::placeholder {\r\n  color: transparent;\r\n}\r\n.b-filter-bar-compact .b-filter-bar-field.b-uses-chipview:not(.b-empty) .b-chip {\r\n  font-size: 0.9em;\r\n}\r\n.b-filter-bar-compact .b-filter-bar-field.b-uses-chipview:not(.b-empty) .b-chip[data-index="0"] {\r\n  margin-inline-start: 0;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-group-summary .b-grid-group-collapsed.b-header-summary .b-grid-cell.b-group-title {\r\n  overflow: hidden;\r\n}\r\n.b-group-summary .b-grid-row.b-group-footer .b-grid-cell {\r\n  border-inline-end-color: transparent;\r\n  background-color: #fffbf5;\r\n}\r\n.b-group-summary .b-grid-row.b-group-footer td {\r\n  padding: 0.25em 0;\r\n}\r\n.b-group-summary .b-grid-row.b-group-footer .b-grid-summary-label {\r\n  padding-inline-end: 1em;\r\n}\r\n.b-group-summary .b-grid-row.b-group-footer .b-grid-summary-value {\r\n  width: 100%;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-gridbase.b-firefox .b-mergecells .b-single-child .b-grid-subgrid:not(.b-timeaxissubgrid):not(.b-overlay-scrollbar), .b-mergecells.b-gridbase.b-firefox .b-single-child .b-grid-subgrid:not(.b-timeaxissubgrid):not(.b-overlay-scrollbar) {\r\n  overflow: visible !important;\r\n}\r\n.b-mergecells .b-single-child .b-grid-subgrid:not(.b-grid-subgrid-collapsed):not(.b-timeaxissubgrid):not(.b-horizontal-overflow),\r\n.b-mergecells .b-grid-vertical-scroller {\r\n  overflow: visible !important;\r\n}\r\n.b-mergecells .b-grid-row.b-hover, .b-mergecells.b-mergecells-passthrough .b-grid-row.b-selected, .b-using-keyboard .b-mergecells .b-grid-row.b-selected {\r\n  z-index: 1;\r\n  overflow: visible;\r\n}\r\n.b-mergecells .b-grid-row.b-hover .b-merged-cell, .b-mergecells.b-mergecells-passthrough .b-grid-row.b-selected .b-merged-cell, .b-using-keyboard .b-mergecells .b-grid-row.b-selected .b-merged-cell {\r\n  top: -1px;\r\n  height: calc(100% + 1px);\r\n  border-top: 1px solid #e9eaeb;\r\n}\r\n.b-mergecells .b-merged-cell {\r\n  border-bottom: none;\r\n}\r\n\r\n.b-grid-merged-cells {\r\n  position: absolute;\r\n  contain: strict;\r\n  border-inline-end: 1px solid #e9eaeb;\r\n  border-bottom: 1px solid #e9eaeb;\r\n  z-index: 1;\r\n  display: flex;\r\n  align-items: flex-start;\r\n  background: #fff;\r\n}\r\n.b-gridbase.b-mergecells-passthrough .b-grid-merged-cells {\r\n  pointer-events: none;\r\n}\r\n.b-grid-merged-cells:hover {\r\n  box-shadow: inset 0 0 0 1000px rgba(254, 172, 49, 0.1);\r\n}\r\n.b-grid-merged-cells.b-selected {\r\n  box-shadow: inset 0 0 0 1000px rgba(254, 172, 49, 0.25);\r\n}\r\n.b-grid-merged-cells .b-grid-cell {\r\n  position: sticky;\r\n  top: 0;\r\n  flex: 1;\r\n  contain: none;\r\n  overflow: visible;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-export {\r\n  overflow: hidden;\r\n}\r\n.b-export .b-export-content {\r\n  position: absolute;\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n}\r\n.b-export .b-export-body {\r\n  flex: 1;\r\n}\r\n.b-export .b-grid-header-container {\r\n  margin-inline-end: 0 !important;\r\n  border-inline-end: none !important;\r\n}\r\n.b-export .b-grid-body-container.b-widget-scroller {\r\n  overflow-y: hidden !important;\r\n}\r\n.b-export .b-grid-footer-container {\r\n  padding-inline-end: 0 !important;\r\n}\r\n.b-export .b-virtual-scrollers {\r\n  display: none;\r\n}\r\n.b-export.b-visible-scrollbar .b-show-yscroll-padding > .b-yscroll-pad {\r\n  display: none;\r\n}\r\n.b-export.b-multipage .b-export-content {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.b-export.b-multipage .b-export-body {\r\n  overflow: hidden;\r\n}\r\n\r\n.b-export-content,\r\n.b-export-content * {\r\n  box-sizing: border-box;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-quick-hit-cell {\r\n  background: #f5fe8c;\r\n}\r\n\r\n.b-quick-hit-text {\r\n  font-weight: 400;\r\n  background: #f5fe8c;\r\n}\r\n\r\n.b-quick-hit-text {\r\n  padding: 0.3em 0;\r\n}\r\n\r\n.b-quick-hit-header {\r\n  position: absolute;\r\n  top: 0.3em;\r\n  left: 0.3em;\r\n  bottom: 0.3em;\r\n  right: 0.3em;\r\n  z-index: 1;\r\n}\r\n.b-quick-hit-header.b-quick-hit-mode-grid {\r\n  bottom: auto;\r\n  height: 3em;\r\n  z-index: 100;\r\n  opacity: 0.75;\r\n}\r\n\r\n.b-quick-hit-field {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  bottom: 0;\r\n  right: 0;\r\n  padding: 0.5em 0;\r\n  background: #f5fe8c;\r\n}\r\n\r\n.b-quick-hit-cell-badge,\r\n.b-quick-hit-header .b-quick-hit-badge {\r\n  position: absolute;\r\n  top: 0.4em;\r\n  right: 0.4em;\r\n  font-size: 0.7em;\r\n  line-height: 0.7em;\r\n}\r\n.b-rtl .b-quick-hit-cell-badge,\r\n.b-rtl .b-quick-hit-header .b-quick-hit-badge {\r\n  right: auto;\r\n  left: 0.4em;\r\n}\r\n\r\n.b-quick-hit-header .b-quick-hit-badge {\r\n  color: #7f8a01;\r\n}\r\n\r\n.b-quick-hit-cell-badge {\r\n  color: #7f8a01;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-grid-splitter {\r\n  z-index: 5;\r\n  position: relative;\r\n  background: #bec0c1;\r\n  flex: 0 0 1px;\r\n}\r\n@media (pointer: coarse) {\r\n  .b-grid-splitter {\r\n    --splitter-button-size: 1.3em;\r\n  }\r\n}\r\n@media (pointer: fine) {\r\n  .b-grid-splitter {\r\n    --splitter-button-size: 1em;\r\n  }\r\n}\r\n.b-grid-splitter .b-grid-splitter-inner {\r\n  display: none;\r\n}\r\n.b-grid-splitter.b-disabled {\r\n  pointer-events: none;\r\n}\r\n\r\n.b-gridbase.b-split.b-rtl .b-grid-splitter-inner .b-grid-splitter-buttons .b-grid-splitter-button-collapse, .b-gridbase.b-split.b-rtl .b-grid-splitter-inner .b-grid-splitter-buttons .b-grid-splitter-button-expand {\r\n  transform: scaleX(-1);\r\n}\r\n.b-gridbase.b-split.b-rtl .b-grid-splitter-inner .b-grid-splitter-buttons .b-grid-splitter-button-expand {\r\n  justify-content: flex-end;\r\n}\r\n.b-gridbase.b-split.b-rtl .b-grid-splitter-inner .b-grid-splitter-buttons .b-grid-splitter-button-collapse {\r\n  justify-content: flex-start;\r\n}\r\n\r\n.b-gridbase.b-split .b-grid-splitter:not(.b-disabled) {\r\n  flex: 0 0 0.5em;\r\n  background: #e5e5e8;\r\n}\r\n.b-gridbase.b-split .b-grid-splitter:not(.b-disabled) .b-grid-splitter-inner {\r\n  display: flex;\r\n  background: #e5e5e8;\r\n}\r\n.b-gridbase.b-split .b-grid-splitter:not(.b-disabled).b-grid-splitter-collapsed {\r\n  cursor: initial;\r\n  flex: 0 0 0.5em;\r\n}\r\n.b-gridbase.b-split .b-grid-splitter:not(.b-disabled).b-grid-splitter-collapsed .b-grid-splitter-inner {\r\n  width: 0.5em;\r\n}\r\n.b-gridbase.b-split .b-grid-splitter:not(.b-disabled).b-grid-splitter-collapsed:not(.b-grid-splitter-allow-collapse) .b-grid-splitter-button-collapse, .b-gridbase.b-split .b-grid-splitter:not(.b-disabled).b-grid-splitter-collapsed.b-grid-splitter-allow-collapse .b-grid-splitter-button-expand {\r\n  visibility: hidden;\r\n}\r\n.b-gridbase.b-split .b-grid-splitter:not(.b-disabled).b-grid-splitter-collapsed .b-grid-splitter-buttons {\r\n  display: flex;\r\n}\r\n.b-gridbase.b-split .b-grid-splitter:not(.b-disabled).b-left-only:not(.b-grid-splitter-collapsed) .b-grid-splitter-button-expand, .b-gridbase.b-split .b-grid-splitter:not(.b-disabled).b-right-only:not(.b-grid-splitter-collapsed) .b-grid-splitter-button-collapse {\r\n  visibility: hidden;\r\n}\r\n.b-gridbase.b-split .b-grid-splitter:not(.b-disabled) .b-grid-splitter-buttons {\r\n  display: none;\r\n  position: absolute;\r\n  transform: translateY(-50%);\r\n  height: 2.4em;\r\n  width: 2.4em;\r\n  font-size: var(--splitter-button-size);\r\n}\r\n.b-gridbase.b-split .b-grid-splitter:not(.b-disabled) .b-grid-splitter-button-collapse,\r\n.b-gridbase.b-split .b-grid-splitter:not(.b-disabled) .b-grid-splitter-button-expand {\r\n  flex: 1;\r\n  cursor: pointer;\r\n  background: #e5e5e8;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.b-gridbase.b-split .b-grid-splitter:not(.b-disabled) .b-grid-splitter-button-collapse:hover .b-grid-splitter-button-icon,\r\n.b-gridbase.b-split .b-grid-splitter:not(.b-disabled) .b-grid-splitter-button-expand:hover .b-grid-splitter-button-icon {\r\n  fill: #3183fe;\r\n}\r\n.b-gridbase.b-split .b-grid-splitter:not(.b-disabled) .b-grid-splitter-button-collapse {\r\n  border-top-left-radius: 100% 50%;\r\n  border-bottom-left-radius: 100% 50%;\r\n  justify-content: flex-end;\r\n  padding-right: 0.1em;\r\n}\r\n.b-gridbase.b-split .b-grid-splitter:not(.b-disabled) .b-grid-splitter-button-expand {\r\n  border-top-right-radius: 100% 50%;\r\n  border-bottom-right-radius: 100% 50%;\r\n  padding-left: 0.1em;\r\n}\r\n.b-gridbase.b-split .b-grid-splitter:not(.b-disabled) .b-grid-splitter-button-icon {\r\n  cursor: pointer;\r\n  fill: #7b7b86;\r\n  height: 1.5em;\r\n}\r\n.b-gridbase.b-split .b-grid-splitter:not(.b-disabled).b-hover, .b-gridbase.b-split .b-grid-splitter:not(.b-disabled).b-touching, .b-gridbase.b-split .b-grid-splitter:not(.b-disabled).b-moving {\r\n  overflow: visible;\r\n}\r\n.b-gridbase.b-split .b-grid-splitter:not(.b-disabled).b-hover .b-grid-splitter-inner, .b-gridbase.b-split .b-grid-splitter:not(.b-disabled).b-touching .b-grid-splitter-inner, .b-gridbase.b-split .b-grid-splitter:not(.b-disabled).b-moving .b-grid-splitter-inner {\r\n  left: calc((10px - 0.5em) / -2);\r\n  width: 10px;\r\n  transition: width 0.1s, left 0.1s;\r\n}\r\n.b-gridbase.b-split .b-grid-splitter:not(.b-disabled).b-hover .b-grid-splitter-buttons, .b-gridbase.b-split .b-grid-splitter:not(.b-disabled).b-touching .b-grid-splitter-buttons, .b-gridbase.b-split .b-grid-splitter:not(.b-disabled).b-moving .b-grid-splitter-buttons {\r\n  display: flex;\r\n}\r\n.b-gridbase.b-split .b-grid-splitter:not(.b-disabled).b-grid-splitter-collapsed:nth-child(2):hover:not(.b-moving) .b-grid-splitter-inner {\r\n  left: 0;\r\n}\r\n.b-gridbase.b-split .b-grid-splitter:not(.b-disabled) .b-grid-splitter-inner {\r\n  width: 0.5em;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  bottom: 0;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n.b-gridbase.b-split .b-grid-splitter:not(.b-disabled):not(.b-grid-splitter-collapsed) .b-grid-splitter-inner {\r\n  cursor: col-resize;\r\n}\r\n\r\n.b-grid-header-scroller.b-collapsed,\r\n.b-grid-footer-scroller.b-collapsed,\r\n.b-virtual-scroller.b-collapsed {\r\n  width: 0;\r\n  min-width: 0 !important;\r\n}\r\n\r\n.b-splitter-touch-area {\r\n  width: 2em;\r\n  left: calc((2em - 0.5em) / -2);\r\n  position: absolute;\r\n  top: 0;\r\n  height: 100%;\r\n}\r\n\r\n.b-splitter-button-touch-area {\r\n  height: 3em;\r\n  top: -0.3em;\r\n  width: 2em;\r\n  position: absolute;\r\n}\r\n\r\n.b-grid-splitter-button-collapse .b-splitter-button-touch-area {\r\n  left: -0.9em;\r\n}\r\n\r\n.b-grid-splitter-button-expand .b-splitter-button-touch-area {\r\n  right: -0.9em;\r\n}\r\n\r\n.b-draghelper-active .b-gridbase.b-split .b-grid-splitter:not(.b-disabled) {\r\n  cursor: initial;\r\n  flex: 0 0 0.5em;\r\n  transform: none !important;\r\n}\r\n.b-draghelper-active .b-gridbase.b-split .b-grid-splitter:not(.b-disabled) .b-grid-splitter-button-icon {\r\n  display: none !important;\r\n}\r\n.b-draghelper-active .b-gridbase.b-split .b-grid-splitter:not(.b-disabled) .b-grid-splitter-inner {\r\n  width: 0.5em;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-row-drop-indicator {\r\n  display: none;\r\n  pointer-events: none;\r\n}\r\n\r\n.b-row-reordering .b-row-drop-indicator {\r\n  position: absolute;\r\n  display: block;\r\n  left: 0;\r\n  top: -1px;\r\n  width: 100%;\r\n  height: 2px;\r\n  background-color: #feac31;\r\n  z-index: 2000;\r\n}\r\n.b-row-reordering .b-row-drop-indicator.b-drag-invalid {\r\n  background-color: #e53f2c;\r\n}\r\n.b-row-reordering .b-row-reorder-proxy.b-dragging {\r\n  transition: margin-top 0.2s, opacity 0.2s;\r\n  background: transparent;\r\n  opacity: 0.5;\r\n}\r\n.b-row-reordering .b-row-reorder-proxy.b-dragging .b-grid-row {\r\n  width: 100%;\r\n}\r\n.b-row-reordering .b-row-reorder-proxy.b-dragging .b-grid-row, .b-row-reordering .b-row-reorder-proxy.b-dragging .b-row-dragging-multiple {\r\n  transition: transform 0.2s, background-color 0.2s;\r\n  box-shadow: 1px 1px 4px rgba(0, 0, 0, 0.2);\r\n  background: #fff;\r\n}\r\n.b-row-reordering .b-row-reorder-proxy.b-dragging .b-row-dragging-multiple {\r\n  top: -0.3em;\r\n  left: 0.3em;\r\n  z-index: -1;\r\n}\r\n.b-row-reordering .b-row-reorder-proxy.b-dragging.b-drag-invalid .b-grid-row {\r\n  border: none;\r\n  background: rgba(229, 63, 44, 0.2);\r\n}\r\n.b-row-reordering .b-grid-body-container {\r\n  z-index: 4;\r\n}\r\n.b-row-reordering .b-drag-original {\r\n  opacity: 0.3;\r\n}\r\n.b-row-reordering .b-grid-row.b-grid-group-collapsed.b-row-reordering-target {\r\n  background-color: rgba(254, 172, 49, 0.1);\r\n}\r\n.b-row-reordering .b-grid-body-container .b-grid-subgrid .b-row-reordering-target {\r\n  box-shadow: 0 1px 0 0 #feac31 inset, 0 -1px 0 0 #feac31 inset;\r\n  z-index: 9999;\r\n}\r\n\r\n.b-row-reorder-with-grip .b-grid-subgrid[data-item-index="0"] .b-grid-cell:first-child {\r\n  padding-inline-start: 1.4em;\r\n}\r\n.b-row-reorder-with-grip .b-grid-subgrid[data-item-index="0"] .b-grid-cell:first-child.b-rownumber-cell {\r\n  padding-inline: 0.9em 0;\r\n}\r\n.b-row-reorder-with-grip .b-grid-subgrid[data-item-index="0"] .b-grid-cell:first-child:before {\r\n  align-self: stretch;\r\n  display: flex;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  font-family: "Font Awesome 6 Free", FontAwesome6Free;\r\n  align-items: center;\r\n  content: "\\f58e";\r\n  cursor: move;\r\n  padding-inline: 0.6em;\r\n  font-size: 0.8em;\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  height: 100%;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-search-hit-cell {\r\n  background: #f5fe8c;\r\n}\r\n\r\n.b-search-hit-text {\r\n  font-weight: 400;\r\n  background: #f5fe8c;\r\n  padding: 0.3em 0;\r\n}\r\n\r\n.b-search-hit-field {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  bottom: 0;\r\n  right: 0;\r\n  padding: 0.5em 0;\r\n  background: #f5fe8c;\r\n}\r\n\r\n.b-search-hit-cell-badge {\r\n  position: absolute;\r\n  top: 0.4em;\r\n  right: 0.4em;\r\n  font-size: 0.7em;\r\n  line-height: 0.7em;\r\n  color: #7f8a01;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-gridbase.b-sort .b-grid-header .b-sort-icon {\r\n  display: contents;\r\n}\r\n.b-gridbase.b-sort .b-grid-header.b-sort .b-grid-header-text {\r\n  color: #667280;\r\n}\r\n.b-gridbase.b-sort .b-grid-header.b-sort .b-grid-header-text .b-sort-icon::before {\r\n  font-family: "Font Awesome 6 Free", FontAwesome6Free;\r\n  font-weight: 900;\r\n  font-size: 0.8em;\r\n  color: #b0b0b7;\r\n  margin-inline-start: 0.5em;\r\n  transition: transform 0.3s, color 0.2s;\r\n  transform: none;\r\n  background: inherit; /* Transparent bg will look bad if there is text under the icon */\r\n  content: "\\f062";\r\n}\r\n.b-gridbase.b-sort .b-grid-header.b-sort .b-grid-header-text[data-sort-index]::before {\r\n  content: attr(data-sort-index);\r\n  position: relative;\r\n  top: 1em;\r\n  color: #7b7b86;\r\n  z-index: 30;\r\n  font-size: 0.6em;\r\n  order: 1;\r\n}\r\n.b-gridbase.b-sort .b-grid-header.b-sort.b-desc .b-grid-header-text .b-sort-icon::before {\r\n  transform: rotate(180deg);\r\n}\r\n\r\n.b-gridbase.b-sort:not(.b-column-resizing) .b-grid-header-container:not(.b-dragging-header) .b-grid-header.b-sortable.b-depth-0:hover:not(.b-sort):not(.b-group) .b-grid-header-text .b-sort-icon::before, .b-gridbase.b-sort:not(.b-column-resizing) .b-grid-header-container:not(.b-dragging-header) .b-grid-header.b-sortable.b-depth-0:focus:not(.b-sort):not(.b-group) .b-grid-header-text .b-sort-icon::before {\r\n  font-family: "Font Awesome 6 Free", FontAwesome6Free;\r\n  font-weight: 900;\r\n  font-size: 0.8em;\r\n  color: #e5e7e9;\r\n  margin-inline-start: 0.5em;\r\n  transition: transform 0.3s, color 0.2s;\r\n  transform: none;\r\n  background: inherit; /* Transparent bg will look bad if there is text under the icon */\r\n  content: "\\f15e";\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-grid-header.b-group .b-grid-header-text .b-sort-icon::after {\r\n  font-family: "Font Awesome 6 Free", FontAwesome6Free;\r\n  font-weight: 900;\r\n  font-size: 0.8em;\r\n  color: #3183fe;\r\n  margin-inline-start: 0.5em;\r\n  transition: transform 0.3s, color 0.2s;\r\n  transform: none;\r\n  background: inherit; /* Transparent bg will look bad if there is text under the icon */\r\n  content: "\\f012";\r\n  transform: rotate(90deg);\r\n}\r\n.b-grid-header.b-group.b-desc .b-grid-header-text .b-sort-icon::after {\r\n  transform: rotate(270deg) scaleX(-1);\r\n}\r\n\r\n.b-group-row {\r\n  background: #fafbfc;\r\n}\r\n.b-group-row .b-grid-cell {\r\n  border-inline-end-color: transparent;\r\n}\r\n.b-group-row .b-group-title.b-grid-cell-align-right, .b-group-row .b-group-title.b-grid-cell-align-end {\r\n  justify-content: flex-end;\r\n}\r\n.b-group-row .b-group-title.b-grid-cell-align-center {\r\n  justify-content: flex-start;\r\n}\r\n\r\n.b-grid-cell.b-group-title {\r\n  color: #4f5964;\r\n  overflow: visible;\r\n  contain: size layout style;\r\n  font-weight: 500;\r\n  text-transform: uppercase;\r\n}\r\n.b-firefox .b-grid-cell.b-group-title {\r\n  contain: size layout;\r\n}\r\n\r\n.b-group-state-icon {\r\n  margin-inline-end: 0.5em;\r\n  cursor: pointer;\r\n  color: #babbbc;\r\n}\r\n.b-group-state-icon:before {\r\n  content: "\\f056";\r\n}\r\n\r\n.b-grid-group-collapsed .b-group-state-icon:before {\r\n  content: "\\f055";\r\n}\r\n\r\n.b-stripe .b-grid-row.b-group-row,\r\n.b-grid-row.b-group-row {\r\n  border-bottom: 1px solid #d8d9da;\r\n  cursor: pointer;\r\n}\r\n\r\n.b-cut-row {\r\n  opacity: 0.4;\r\n}\r\n\r\n.b-stickycells .b-grid-sticky-row {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  min-width: auto;\r\n  border: 0 none;\r\n  padding: 0;\r\n  contain: initial;\r\n}\r\n.b-stickycells .b-grid-sticky-row .b-grid-cell {\r\n  width: min-content;\r\n  contain: initial;\r\n  padding: 0;\r\n  border: 0 none;\r\n}\r\n.b-stickycells .b-sticky-cells-current-top-row .b-sticky-content-el {\r\n  visibility: hidden;\r\n}\r\n.b-stickycells .b-sticky-cells-current-top-row.b-not-enough-height .b-sticky-content-el {\r\n  visibility: visible;\r\n  align-self: flex-end;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-stripe .b-grid-row.b-odd {\r\n  background-color: rgba(250, 250, 250, 0.8);\r\n}\r\n.b-stripe .b-grid-row.b-even {\r\n  background-color: rgba(255, 255, 255, 0.8);\r\n}\r\n.b-stripe .b-grid-row {\r\n  border-bottom: none;\r\n}\r\n.b-stripe .b-grid-row.b-selected {\r\n  background-color: rgba(254, 172, 49, 0.25);\r\n}\r\n.b-stripe .b-grid-row.b-selected .b-grid-cell.b-selected {\r\n  background-color: rgba(254, 172, 49, 0.25);\r\n}\r\n\r\n.b-stripe:focus .b-grid-row.b-selected {\r\n  background-color: rgba(254, 172, 49, 0.3);\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-grid-footer-summary td {\r\n  padding: 0.25em 0;\r\n}\r\n.b-grid-footer-summary .b-grid-summary-label {\r\n  font-size: 0.7em;\r\n  padding-inline-end: 1em;\r\n}\r\n.b-grid-footer-summary .b-grid-summary-value {\r\n  width: 100%;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.b-summary-disabled .b-grid-footer-container {\r\n  display: none;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-generated-parent.b-readonly .b-grid-cell {\r\n  color: #606263;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-rowexpander-row-expanded .b-rowexpander-body {\r\n  display: flex;\r\n  border-top: 1px solid #e9eaeb;\r\n  position: absolute;\r\n  left: 0;\r\n  right: 0;\r\n  color: #606263;\r\n  font-weight: 400;\r\n}\r\n.b-rowexpander-row-expanded .b-rowexpander-loading {\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-size: 1.2em;\r\n}\r\n.b-rowexpander-row-expanded .b-rowexpander-loading .b-icon-spinner {\r\n  margin-inline-end: 0.5em;\r\n}\r\n\r\n.b-gridbase .b-grid-row [data-column=expanderActionColumn] .b-icon.b-icon-collapse-down, .b-gridbase .b-grid-row [data-column=expanderActionColumn] .b-icon-collapse-down.b-icon-version {\r\n  transition: transform 0.15s ease-in-out;\r\n  font-size: 1em;\r\n}\r\n\r\n.b-rowexpander-disabled [data-column=expanderActionColumn] {\r\n  opacity: 0.2;\r\n  pointer-events: none;\r\n}\r\n\r\n.b-rowexpander.b-gridbase.b-animating.b-rowexpander-animating .b-grid-row {\r\n  transition: height 0.3s, transform 0.3s;\r\n}\r\n\r\n.b-rowexpander-row-expanded:not(.b-row-is-collapsing) [data-column=expanderActionColumn] .b-icon-collapse-down {\r\n  transform: rotate(180deg);\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-exportdialog.b-popup .b-bottom-toolbar > button {\r\n  flex: 1;\r\n  margin-inline-end: 0.5em;\r\n}\r\n.b-exportdialog.b-popup .b-bottom-toolbar > button:last-child {\r\n  margin-inline-end: 0;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-grid-footer-container {\r\n  background-color: #f3f4f5;\r\n  outline: 1px solid #d8d9da;\r\n  z-index: 2;\r\n  box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.08);\r\n}\r\n.b-grid-footer-container.b-hidden {\r\n  display: none;\r\n}\r\n\r\n.b-grid-footers {\r\n  display: inline-flex;\r\n  align-items: stretch;\r\n  height: 100%;\r\n  white-space: nowrap;\r\n  line-height: initial;\r\n}\r\n\r\n.b-grid-footer {\r\n  display: flex;\r\n  border-inline-end: 1px solid #d8d9da;\r\n  flex-direction: column;\r\n  flex-shrink: 0;\r\n  align-items: stretch;\r\n  justify-content: center;\r\n  position: relative;\r\n  padding: 0.5em 0.5em;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n  height: 100%;\r\n  color: #667280;\r\n  overflow: hidden;\r\n}\r\n\r\n.b-grid-footer:last-child {\r\n  border-inline-end: none;\r\n}\r\n\r\n.b-grid-footer-align-start,\r\n.b-grid-footer-align-left {\r\n  text-align: start;\r\n}\r\n\r\n.b-grid-footer-align-center {\r\n  text-align: center;\r\n}\r\n\r\n.b-grid-footer-align-end,\r\n.b-grid-footer-align-right {\r\n  text-align: end;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-gridbase {\r\n  position: relative;\r\n  /*\r\n   * This implements the fillLastColumn config. It causes the last leaf header, and the last cell in\r\n   * each row to flex-grow to consume all available space when there are no configured flexed columns and rows are not\r\n   * wider than their container.\r\n   */\r\n}\r\n.b-gridbase.b-outer {\r\n  height: 100%;\r\n}\r\n.b-gridbase.b-autoheight {\r\n  height: auto;\r\n  flex: none;\r\n}\r\n.b-gridbase.b-autoheight.b-ie {\r\n  display: block;\r\n}\r\n.b-gridbase .b-grid-panel-body:not(.b-autoheight) > .b-grid-body-container {\r\n  flex: 1 1 0;\r\n  contain: strict;\r\n}\r\n.b-gridbase .b-grid-panel-body:not(.b-autoheight) > .b-grid-body-container > .b-grid-vertical-scroller {\r\n  min-height: 100%;\r\n}\r\n.b-gridbase.b-grid-translate .b-grid-row, .b-gridbase.b-grid-translate3d .b-grid-row {\r\n  transform-style: flat;\r\n}\r\n.b-gridbase.b-enable-sticky .b-sticky-cell,\r\n.b-gridbase.b-enable-sticky .b-grid-subgrid,\r\n.b-gridbase.b-enable-sticky .b-grid-vertical-scroller,\r\n.b-gridbase.b-enable-sticky .b-grid-row {\r\n  overflow: visible !important;\r\n}\r\n.b-gridbase.b-no-column-lines .b-grid-row .b-grid-cell {\r\n  border-inline-end-color: transparent;\r\n}\r\n.b-gridbase.b-fill-last-column .b-grid-subgrid:not(.b-has-flex):not(.b-horizontal-overflow) .b-grid-cell:last-child,\r\n.b-gridbase.b-fill-last-column .b-grid-footers:not(.b-has-flex):not(.b-horizontal-overflow) .b-grid-footer:last-child,\r\n.b-gridbase.b-fill-last-column .b-grid-headers:not(.b-has-flex):not(.b-horizontal-overflow) .b-last-parent,\r\n.b-gridbase.b-fill-last-column .b-grid-headers:not(.b-has-flex):not(.b-horizontal-overflow) .b-last-leaf {\r\n  flex-grow: 1;\r\n}\r\n.b-gridbase:not(.b-masked) .b-grid-empty {\r\n  min-height: 5em;\r\n}\r\n.b-gridbase:not(.b-masked) .b-grid-empty .b-empty-text {\r\n  display: block;\r\n  color: #667280;\r\n  background-color: #fff;\r\n  padding: 1em;\r\n  position: absolute;\r\n  pointer-events: none;\r\n}\r\n.b-gridbase.b-grid-notextselection .b-grid-cell {\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n}\r\n.b-gridbase.b-notransition .b-grid-cell * {\r\n  transition: none !important;\r\n}\r\n.b-gridbase.b-disabled {\r\n  opacity: 0.5;\r\n}\r\n\r\n.b-grid-panel-body {\r\n  position: relative;\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n  background-color: #fff;\r\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\r\n}\r\n\r\n.b-gridbase:not(.b-animating) .b-grid-row:not(.b-grid-row-updating) * {\r\n  transition: none;\r\n}\r\n\r\n.b-gridbase.b-autoheight .b-grid-empty .b-grid-vertical-scroller {\r\n  min-height: 100%;\r\n}\r\n\r\n.b-grid-body-container {\r\n  position: relative;\r\n}\r\n.b-grid-body-container .b-empty-text {\r\n  display: none;\r\n}\r\n.b-grid-body-container:focus {\r\n  outline: none;\r\n}\r\n.b-grid-body-container:focus .b-grid-row.b-selected {\r\n  background-color: rgba(254, 172, 49, 0.3);\r\n}\r\n\r\n.b-playing-demo .b-grid-body-container {\r\n  overflow: hidden !important;\r\n}\r\n\r\n.b-grid-vertical-scroller {\r\n  position: absolute;\r\n  display: flex;\r\n  flex-flow: row nowrap;\r\n  overflow: hidden;\r\n  width: 100%;\r\n  align-items: stretch;\r\n}\r\n\r\n.b-grid-row-container {\r\n  display: inline-block;\r\n  min-width: 100%;\r\n}\r\n\r\n.b-virtual-scrollers {\r\n  display: flex;\r\n  flex-direction: row;\r\n  contain: paint style layout;\r\n}\r\n.b-firefox .b-virtual-scrollers {\r\n  contain: paint layout;\r\n}\r\n.b-overlay-scrollbar.b-firefox.b-windows .b-virtual-scrollers {\r\n  pointer-events: auto;\r\n}\r\n.b-overlay-scrollbar.b-firefox.b-windows .b-virtual-scrollers .b-virtual-scroller {\r\n  pointer-events: auto;\r\n}\r\n.b-overlay-scrollbar .b-virtual-scrollers {\r\n  position: absolute;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  pointer-events: none;\r\n}\r\n.b-overlay-scrollbar .b-virtual-scrollers .b-virtual-scroller {\r\n  height: 16px;\r\n  opacity: 0;\r\n  pointer-events: none;\r\n}\r\n.b-virtual-scrollers .b-virtual-scroller {\r\n  overflow-x: scroll;\r\n  overflow-y: hidden;\r\n}\r\n.b-virtual-scrollers .b-virtual-width {\r\n  height: 1px;\r\n}\r\n\r\n.b-overlay-scrollbar .b-virtual-scroller:hover,\r\n.b-overlay-scrollbar .b-virtual-scroller.b-show-virtual-scroller {\r\n  pointer-events: all;\r\n  opacity: 1;\r\n  transition: opacity 0.5s;\r\n}\r\n\r\n/* using tag name to increase specificity, otherwise rule gets overridden by salesforce styles */\r\n.b-grid-footer-container,\r\nheader.b-grid-header-container {\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n\r\n.b-grid-header-container {\r\n  border-bottom: 1px solid #d8d9da;\r\n}\r\n\r\n.b-grid-footer-scroller,\r\n.b-grid-header-scroller {\r\n  overflow: hidden;\r\n  position: relative;\r\n  display: flex;\r\n}\r\n\r\n.b-grid-footers,\r\n.b-grid-headers {\r\n  z-index: 2;\r\n  contain: paint style layout;\r\n  flex: 1 1 auto;\r\n}\r\n.b-firefox .b-grid-footers,\r\n.b-firefox .b-grid-headers {\r\n  contain: paint layout;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-grid-row {\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: stretch;\r\n  position: absolute;\r\n  left: 0;\r\n  overflow: hidden;\r\n  border-bottom: 1px solid #e9eaeb;\r\n  height: 45px;\r\n  contain: layout;\r\n}\r\n.b-grid-subgrid .b-grid-row {\r\n  min-width: 100%;\r\n}\r\n.b-grid-row.b-aborting {\r\n  transition: background-color 0.2s, transform 0.3s;\r\n}\r\n.b-rtl .b-grid-row {\r\n  left: auto;\r\n  right: 0;\r\n}\r\n.b-grid-row.b-selected {\r\n  background-color: rgba(254, 172, 49, 0.25);\r\n}\r\n.b-grid-row.b-selected .b-grid-cell.b-checkbox-selection {\r\n  background-color: #e4e4e4;\r\n}\r\n.b-grid-row.b-removing {\r\n  left: -100%;\r\n  transition: left 0.4s, right 0.4s;\r\n  pointer-events: none;\r\n  z-index: 2;\r\n}\r\n.b-rtl .b-grid-row.b-removing {\r\n  left: auto;\r\n  right: -100%;\r\n}\r\n\r\n.b-grid-refreshing .b-grid-row {\r\n  transition: none;\r\n}\r\n\r\n.b-grid-row:not(.b-selected) .b-grid-cell.b-selected {\r\n  background-color: rgba(254, 172, 49, 0.15);\r\n}\r\n.b-grid-row:not(.b-selected) .b-grid-cell.b-selected.b-hover {\r\n  background-color: rgba(254, 172, 49, 0.2);\r\n}\r\n.b-grid-row:not(.b-selected) .b-grid-cell.b-selected.b-checkbox-selection {\r\n  background-color: #e4e4e4;\r\n}\r\n\r\n.b-grid-cell {\r\n  position: relative;\r\n  display: flex;\r\n  align-items: center;\r\n  color: #606263;\r\n  font-weight: 400;\r\n  padding: 0 0.5em;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  flex-shrink: 0;\r\n  text-overflow: ellipsis;\r\n  border-inline-end: 1px solid #e9eaeb;\r\n  transform-style: flat;\r\n  width: 0;\r\n  contain: strict;\r\n}\r\n.b-grid-cell:last-child {\r\n  border-inline-end-color: transparent;\r\n}\r\n.b-grid-cell > i:not(:last-child) {\r\n  margin-inline-end: 0.5em;\r\n}\r\n.b-show-dirty .b-grid-cell.b-cell-dirty:before {\r\n  content: " ";\r\n  position: absolute;\r\n  top: -0.35em;\r\n  left: -0.35em;\r\n  background-color: red;\r\n  width: 0.7em;\r\n  height: 0.7em;\r\n  transform: rotateZ(45deg);\r\n}\r\n.b-rtl .b-show-dirty .b-grid-cell.b-cell-dirty:before {\r\n  left: auto;\r\n  right: -0.35em;\r\n}\r\n.b-grid-cell.b-checkbox-selection {\r\n  background-color: #f1f1f1;\r\n}\r\n.b-grid-cell:focus, .b-grid-cell:focus-within {\r\n  transition: none !important;\r\n  outline: none;\r\n}\r\n.b-grid-cell.b-auto-height {\r\n  white-space: normal;\r\n}\r\n.b-grid-cell.b-measuring-auto-height {\r\n  contain: paint style layout;\r\n  align-self: baseline;\r\n}\r\n.b-firefox .b-grid-cell.b-measuring-auto-height {\r\n  contain: paint layout;\r\n}\r\n\r\nbody.b-using-keyboard .b-grid-cell:focus, body.b-using-keyboard .b-grid-cell:focus-within, body.b-using-keyboard .b-grid-header:focus, body.b-using-keyboard .b-grid-header:focus-within,\r\n.b-outer.b-using-keyboard .b-grid-cell:focus,\r\n.b-outer.b-using-keyboard .b-grid-cell:focus-within,\r\n.b-outer.b-using-keyboard .b-grid-header:focus,\r\n.b-outer.b-using-keyboard .b-grid-header:focus-within {\r\n  outline: 1px solid #64a2fe;\r\n  outline-offset: -1px;\r\n}\r\n\r\n.b-readonly > .b-grid-cell {\r\n  color: #b3b3b3;\r\n}\r\n\r\n.b-grid-cell-align-right, .b-grid-cell-align-end {\r\n  justify-content: flex-end;\r\n}\r\n\r\n.b-grid-cell-align-center {\r\n  justify-content: center;\r\n}\r\n\r\n.b-grid-subgrid {\r\n  overscroll-behavior: contain auto;\r\n  position: relative;\r\n}\r\n.b-grid-subgrid.b-grid-subgrid-collapsed {\r\n  width: 0;\r\n  min-width: 0 !important;\r\n}\r\n.b-grid-subgrid.b-grid-subgrid-animate-collapse {\r\n  transition: width 0.15s;\r\n}\r\n\r\n.b-playing-demo .b-grid-subgrid {\r\n  overflow: hidden !important;\r\n}\r\n\r\n.b-grid-header-scroller.b-grid-subgrid-animate-collapse {\r\n  transition: width 0.15s;\r\n}\r\n\r\n.b-gridbase:not(.b-moving-splitter) .b-grid-subgrid:not(.b-timeaxissubgrid) .b-grid-row:not(.b-group-row).b-hover {\r\n  background-color: rgba(254, 172, 49, 0.1);\r\n}\r\n.b-gridbase:not(.b-moving-splitter) .b-grid-subgrid:not(.b-timeaxissubgrid) .b-grid-row:not(.b-group-row).b-hover.b-selected {\r\n  background-color: rgba(254, 172, 49, 0.25);\r\n}\r\n.b-gridbase:not(.b-moving-splitter) .b-grid-subgrid:not(.b-timeaxissubgrid) .b-grid-row:not(.b-group-row).b-hover .b-grid-cell {\r\n  background-color: rgba(254, 172, 49, 0.1);\r\n}\r\n.b-gridbase:not(.b-moving-splitter) .b-grid-subgrid:not(.b-timeaxissubgrid) .b-grid-row:not(.b-group-row).b-hover .b-grid-cell.b-checkbox-selection {\r\n  background-color: #ececec;\r\n}\r\n.b-gridbase:not(.b-moving-splitter) .b-grid-subgrid:not(.b-timeaxissubgrid) .b-grid-row:not(.b-group-row) .b-grid-cell.b-hover {\r\n  background-color: rgba(254, 172, 49, 0.1);\r\n}\r\n.b-gridbase:not(.b-moving-splitter) .b-grid-subgrid:not(.b-timeaxissubgrid) .b-grid-row:not(.b-group-row) .b-grid-cell.b-hover.b-selected {\r\n  background-color: rgba(254, 172, 49, 0.2);\r\n}\r\n.b-gridbase:not(.b-moving-splitter) .b-grid-subgrid:not(.b-timeaxissubgrid) .b-grid-row:not(.b-group-row) .b-grid-cell.b-hover.b-checkbox-selection {\r\n  background-color: #ececec;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-grid-header-container {\r\n  background-color: #f3f4f5;\r\n  z-index: 4;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);\r\n}\r\n.b-grid-header-container.b-hidden {\r\n  position: absolute;\r\n  clip-path: inset(0 0 100% 0);\r\n  contain: strict;\r\n}\r\n\r\n.b-grid-headers {\r\n  display: inline-flex;\r\n  flex-flow: row nowrap;\r\n  align-items: stretch;\r\n  line-height: initial;\r\n  position: relative;\r\n}\r\n\r\n.b-grid-header-align-right > .b-grid-header-text > .b-grid-header-text-content,\r\n.b-grid-header-align-end > .b-grid-header-text > .b-grid-header-text-content {\r\n  text-align: end;\r\n}\r\n\r\n.b-grid-header-align-center > .b-grid-header-text > .b-grid-header-text-content {\r\n  text-align: center;\r\n}\r\n\r\n.b-gridbase:not(.b-column-resizing):not(.b-row-reordering) .b-grid-header-container:not(.b-dragging-header) .b-depth-0:focus, .b-gridbase:not(.b-column-resizing):not(.b-row-reordering) .b-grid-header-container:not(.b-dragging-header) .b-depth-0.b-check-header-with-checkbox:focus-within {\r\n  background-color: #fafafb;\r\n}\r\n.b-gridbase:not(.b-column-resizing):not(.b-row-reordering) .b-grid-header-container:not(.b-dragging-header) .b-depth-0:hover, .b-gridbase:not(.b-column-resizing):not(.b-row-reordering) .b-grid-header-container:not(.b-dragging-header) .b-depth-0.b-hover {\r\n  background-color: white;\r\n}\r\n\r\n.b-gridbase.b-columnresize .b-grid-header-resizable:not(.b-last-leaf) {\r\n  overflow: visible;\r\n}\r\n.b-gridbase.b-columnresize .b-grid-header-resizable .b-grid-header-resize-handle {\r\n  position: absolute;\r\n  top: 0;\r\n  right: -5px;\r\n  bottom: 0;\r\n  width: 10px;\r\n  background-color: transparent;\r\n  z-index: 3;\r\n  cursor: col-resize;\r\n  display: block;\r\n}\r\n\r\n.b-gridbase.b-columnresize.b-rtl .b-grid-header-resizable .b-grid-header-resize-handle {\r\n  left: -5px;\r\n  right: auto;\r\n}\r\n\r\n.b-touch-events .b-gridbase.b-columnresize .b-grid-header-resizable .b-grid-header-resize-handle {\r\n  right: -10px;\r\n  width: 20px;\r\n}\r\n.b-rtl .b-touch-events .b-gridbase.b-columnresize .b-grid-header-resizable .b-grid-header-resize-handle {\r\n  left: -10px;\r\n  right: auto;\r\n}\r\n\r\n.b-fill-last-column .b-grid-headers .b-last-parent,\r\n.b-fill-last-column .b-grid-headers .b-last-leaf {\r\n  border-inline-end-color: transparent;\r\n}\r\n.b-fill-last-column .b-grid-headers .b-last-parent > .b-grid-header-text,\r\n.b-fill-last-column .b-grid-headers .b-last-leaf > .b-grid-header-text {\r\n  border-inline-end-color: transparent;\r\n}\r\n\r\n.b-grid-header-text {\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  padding: 1em 0 1em 0;\r\n  white-space: nowrap;\r\n  position: relative;\r\n  font-weight: 500;\r\n  display: flex;\r\n  align-items: center;\r\n  overflow: hidden;\r\n}\r\n.b-grid-header-text > .b-grid-header-text-content {\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  flex: 1 1 0;\r\n  width: 0;\r\n  font-size: 0.9em;\r\n}\r\n.b-grid-header-text > .b-grid-header-text-content > i {\r\n  margin-inline-end: 0.5em;\r\n}\r\n\r\n.b-grid-header-children {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n.b-grid-header-children > * {\r\n  width: inherit;\r\n}\r\n\r\n.b-grid-header {\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: stretch;\r\n  justify-content: center;\r\n  flex-shrink: 0;\r\n  position: relative;\r\n  overflow: hidden;\r\n  color: #667280;\r\n  outline: none;\r\n  border-inline-end: 1px solid #d8d9da;\r\n  text-transform: uppercase;\r\n}\r\n.b-grid-header:not(.b-depth-0) {\r\n  overflow: visible;\r\n}\r\n.b-grid-header.b-depth-0 {\r\n  padding-inline: 0.5em 0.5em;\r\n  width: 0;\r\n}\r\n.b-grid-header.b-depth-0 .b-grid-header-text {\r\n  border-bottom: none;\r\n  transition: background-color 0.2s;\r\n  flex-direction: row;\r\n}\r\n.b-grid-header.b-sortable {\r\n  cursor: pointer;\r\n}\r\n.b-grid-header.b-grid-header-parent {\r\n  border-inline-end: none;\r\n  flex-basis: auto;\r\n  padding-inline: 0;\r\n}\r\n.b-grid-header.b-grid-header-parent > .b-grid-header-text {\r\n  padding-inline: 0.5em 0.5em;\r\n  border-inline-end: 1px solid #d8d9da;\r\n  flex: 1 1 auto;\r\n}\r\n.b-grid-header .b-grid-header-resize-handle {\r\n  display: none;\r\n}\r\n\r\n.b-grid-header-parent > .b-grid-header-children {\r\n  border-top: 1px solid #d8d9da;\r\n  flex-flow: row nowrap;\r\n  flex: 1 1 auto;\r\n}\r\n\r\n.b-grid-header .b-button[data-ref=collapseExpand] {\r\n  min-width: 2em;\r\n  min-height: 2em;\r\n  padding: 0;\r\n  position: absolute;\r\n  right: 0;\r\n}\r\n.b-grid-header .b-button[data-ref=collapseExpand]:hover {\r\n  background-color: transparent;\r\n}\r\n\r\n.b-icon-sort-asc:before {\r\n  content: "\\f062";\r\n}\r\n\r\n.b-icon-sort-desc:before {\r\n  content: "\\f063";\r\n}\r\n\r\n.b-icon-group-collapse:before {\r\n  content: "\\f068" !important;\r\n}\r\n\r\n.b-icon-group-expand:before {\r\n  content: "\\f067" !important;\r\n}\r\n\r\n.b-gridbase.b-no-column-lines .b-grid-header {\r\n  border-right-color: transparent;\r\n}\r\n\r\n/*!\r\n * Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com\r\n * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)\r\n * Copyright 2022 Fonticons, Inc.\r\n */\r\n:root, :host {\r\n  --b-fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";\r\n}\r\n\r\n@font-face {\r\n  font-family: "Font Awesome 6 Free";\r\n  font-style: normal;\r\n  font-weight: 900;\r\n  font-display: block;\r\n  src: url('+d+') format("woff2"), url('+u+') format("truetype");\r\n}\r\n.fas,\r\n.b-fa-solid {\r\n  font-family: "Font Awesome 6 Free";\r\n  font-weight: 900;\r\n}\r\n\r\n.b-content-icon, .b-gridbase.b-columnresize.b-touch.b-column-resizing .b-grid-header.b-resizing::before, .b-group-state-icon {\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  display: inline-block;\r\n  font-style: normal;\r\n  font-variant: normal;\r\n  font-weight: normal;\r\n  line-height: 1;\r\n  font-family: "Font Awesome 6 Free", FontAwesome6Free;\r\n  font-weight: 900;\r\n  vertical-align: 0;\r\n}\r\n\r\n.b-theme-info:before {\r\n  content: \'{"name":"Stockholm"}\';\r\n}\r\n\r\n.b-slidetoggle .b-slidetoggle-label,\r\n:not(.b-fieldset-has-label) > .b-checkbox .b-checkbox-label {\r\n  text-transform: uppercase;\r\n  font-size: 0.9em;\r\n}\r\n.b-slidetoggle .b-slidetoggle-label::before,\r\n:not(.b-fieldset-has-label) > .b-checkbox .b-checkbox-label::before {\r\n  font-size: 1.1111111111em;\r\n}\r\n\r\n.b-popup > .b-panel-body-wrap > .b-bottom-toolbar {\r\n  background: #f8f9fa;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-sch-vertical .b-sch-event-wrap.b-milestone-wrap {\r\n  transform: translateY(-50%);\r\n  margin-inline-start: 0;\r\n  height: 1em;\r\n}\r\n.b-sch-vertical .b-sch-event-wrap.b-milestone-wrap .b-sch-event {\r\n  padding-inline-start: 0;\r\n  width: 100%;\r\n}\r\n.b-sch-vertical .b-sch-event-wrap.b-milestone-wrap .b-sch-event .b-sch-event-content {\r\n  justify-content: center;\r\n  margin: 0;\r\n}\r\n.b-sch-vertical .b-sch-event-wrap.b-milestone-wrap .b-sch-event .b-sch-event-content label {\r\n  left: unset;\r\n  top: 105%;\r\n}\r\n\r\n.b-sch-canvas,\r\n.b-sch-foreground-canvas,\r\n.b-sch-background-canvas {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  pointer-events: none;\r\n  height: 100%;\r\n  overflow: hidden;\r\n  overflow: clip;\r\n  contain: strict;\r\n}\r\n.b-sch-vertical .b-sch-canvas,\r\n.b-sch-vertical .b-sch-foreground-canvas,\r\n.b-sch-vertical .b-sch-background-canvas {\r\n  min-width: 100%;\r\n}\r\n.b-rtl .b-sch-canvas,\r\n.b-rtl .b-sch-foreground-canvas,\r\n.b-rtl .b-sch-background-canvas {\r\n  left: auto;\r\n  right: 0;\r\n}\r\n\r\n.b-sch-background-canvas {\r\n  z-index: 1;\r\n  background-repeat: repeat;\r\n}\r\n\r\n.b-sch-foreground-canvas {\r\n  z-index: 2;\r\n}\r\n.b-row-reordering .b-sch-foreground-canvas * {\r\n  pointer-events: none !important;\r\n}\r\n\r\n.b-schedulerbase > .b-editor {\r\n  z-index: 5;\r\n}\r\n\r\n.b-sch-event.b-milestone label,\r\n.b-sch-event .b-sch-event-content,\r\n.b-sch-event-wrap:not(.b-milestone-wrap) .b-sch-event {\r\n  font-size: 13px;\r\n}\r\n\r\n.b-sch-event-wrap {\r\n  position: absolute;\r\n  z-index: 5;\r\n  justify-content: center;\r\n  align-items: center;\r\n  pointer-events: all;\r\n  transition: background-color 0.2s, color 0.2s, opacity 0.2s, font-weight 0.2s, border 0.2s;\r\n  contain: layout style;\r\n}\r\n.b-sch-event-wrap.b-readonly {\r\n  opacity: 0.8;\r\n}\r\n.b-sch-event-wrap.b-readonly .b-sch-event-content {\r\n  opacity: 0.5;\r\n}\r\n.b-animating:not(.b-eventbuffer-transition) .b-sch-event-wrap:not(.b-dragging):not(.b-sch-event-wrap-resizing) {\r\n  transition: background-color 0.2s, color 0.2s, opacity 0.2s, font-weight 0.2s, border 0.2s, left 0.2s, top 0.2s, transform 0.2s, width 0.2s, height 0.2s, font-size 0.2s;\r\n}\r\n.b-toggling-node .b-sch-event-wrap {\r\n  transition: none;\r\n}\r\n.b-sch-event-wrap:focus {\r\n  z-index: 105 !important;\r\n  outline: none;\r\n}\r\n.b-scrolling .b-sch-event-wrap:not(.b-aborting) {\r\n  transition: none !important;\r\n}\r\n.b-scrolling .b-sch-event-wrap:not(.b-aborting) .b-sch-event {\r\n  transition: none !important;\r\n}\r\n.b-grid-body-container.b-scrolling .b-sch-event-wrap {\r\n  pointer-events: none;\r\n}\r\n\r\n.b-sch-event-wrap.b-milestone-wrap {\r\n  margin-inline-start: -0.5em;\r\n  z-index: 4;\r\n}\r\n.b-sch-event-wrap.b-milestone-wrap .b-sch-event {\r\n  overflow: visible;\r\n  box-shadow: none;\r\n  background-color: transparent;\r\n  width: 1em;\r\n}\r\n.b-sch-event-wrap.b-milestone-wrap .b-sch-event:not(.b-sch-event-withicon) .b-sch-event-content {\r\n  transition: background-color 0.2s, border 0.2s;\r\n}\r\n.b-sch-event-wrap.b-milestone-wrap .b-sch-event.b-sch-event-withicon {\r\n  justify-content: center;\r\n}\r\n.b-sch-event-wrap.b-milestone-wrap .b-sch-event.b-sch-event-withicon .b-sch-event-content {\r\n  font-size: inherit;\r\n  justify-content: center;\r\n  background-color: transparent;\r\n}\r\n.b-sch-event-wrap.b-milestone-wrap .b-sch-event.b-sch-event-withicon i {\r\n  margin-inline-end: 0;\r\n  line-height: 1em;\r\n}\r\n.b-sch-event-wrap.b-milestone-wrap .b-sch-event label {\r\n  position: absolute;\r\n  left: 110%;\r\n}\r\n.b-sch-event-wrap.b-milestone-wrap .b-sch-event-content {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.b-sch-event-wrap.b-milestone-wrap .b-fa, .b-sch-event-wrap.b-milestone-wrap .b-icon, .b-sch-event-wrap.b-milestone-wrap .b-icon-version {\r\n  margin-inline-end: 1em;\r\n  color: #777;\r\n  font-size: inherit;\r\n}\r\n.b-labels-topbottom .b-sch-event-wrap.b-milestone-wrap .b-sch-event:not(.b-sch-event-withicon) {\r\n  font-size: 40%;\r\n}\r\n.b-sch-event-wrap.b-milestone-wrap .b-sch-event:not(.b-sch-event-withicon) .b-sch-event-content {\r\n  font-size: inherit;\r\n}\r\n.b-sch-event-wrap.b-milestone-wrap .b-sch-event:not(.b-sch-event-withicon) .b-sch-event-content::before {\r\n  position: absolute;\r\n  left: 0.1464465em;\r\n  content: " ";\r\n  height: 0.707107em;\r\n  width: 0.707107em;\r\n  transform-origin: 50% 50%;\r\n  transform: rotate(45deg);\r\n  background-color: inherit;\r\n}\r\n.b-using-keyboard .b-sch-event-wrap.b-milestone-wrap.b-active .b-sch-event.b-sch-event-withicon {\r\n  outline: 1px solid #64a2fe;\r\n  outline-offset: 3px;\r\n}\r\n.b-using-keyboard .b-sch-event-wrap.b-milestone-wrap.b-active .b-sch-event:not(.b-sch-event-withicon) .b-sch-event-content:before {\r\n  outline: 1px solid #64a2fe;\r\n  outline-offset: 3px;\r\n}\r\n.b-sch-event-wrap.b-milestone-wrap.b-measure {\r\n  height: 1em;\r\n  position: fixed;\r\n  top: -10000px;\r\n  left: -10000px;\r\n  visibility: hidden;\r\n}\r\n.b-sch-event-wrap.b-milestone-wrap.b-measure label {\r\n  font-weight: 400;\r\n}\r\n.b-schedulerbase.b-sch-layout-milestones .b-sch-event-wrap.b-milestone-wrap {\r\n  margin: 0;\r\n  min-width: 0;\r\n  flex-direction: row;\r\n}\r\n.b-using-keyboard .b-schedulerbase.b-sch-layout-milestones .b-sch-event-wrap.b-milestone-wrap.b-active {\r\n  outline: 1px solid #64a2fe;\r\n  outline-offset: 3px;\r\n}\r\n.b-schedulerbase.b-sch-layout-milestones .b-sch-event-wrap.b-milestone-wrap.b-active .b-sch-event.b-milestone,\r\n.b-schedulerbase.b-sch-layout-milestones .b-sch-event-wrap.b-milestone-wrap.b-active .b-sch-event.b-milestone:before {\r\n  outline: none;\r\n}\r\n.b-schedulerbase.b-sch-layout-milestones .b-sch-event-wrap.b-milestone-wrap .b-sch-event.b-milestone {\r\n  font-size: inherit;\r\n  left: 0.5em;\r\n  width: calc(100% - 1em);\r\n  min-width: 0;\r\n  padding: 0;\r\n  align-self: stretch;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1;\r\n}\r\n.b-schedulerbase.b-sch-layout-milestones .b-sch-event-wrap.b-milestone-wrap .b-sch-event.b-milestone .b-sch-event-content {\r\n  background-color: transparent;\r\n  font-size: 13px;\r\n  justify-content: center;\r\n}\r\n.b-schedulerbase.b-sch-layout-milestones .b-sch-event-wrap.b-milestone-wrap .b-sch-event.b-milestone .b-sch-event-content::before {\r\n  content: none;\r\n}\r\n.b-schedulerbase.b-sch-layout-milestones .b-sch-event-wrap.b-milestone-wrap .b-sch-event.b-milestone::before, .b-schedulerbase.b-sch-layout-milestones .b-sch-event-wrap.b-milestone-wrap .b-sch-event.b-milestone::after {\r\n  background: inherit;\r\n  position: absolute;\r\n  content: " ";\r\n  height: 0.707107em;\r\n  width: 0.707107em;\r\n  z-index: 0;\r\n}\r\n.b-schedulerbase.b-sch-layout-milestones .b-sch-event-wrap.b-milestone-wrap .b-sch-event.b-milestone::before {\r\n  top: 50%;\r\n  left: 0;\r\n  transform-origin: 50% 50%;\r\n  transform: translate(-50%, -50%) rotate(45deg);\r\n}\r\n.b-schedulerbase.b-sch-layout-milestones .b-sch-event-wrap.b-milestone-wrap .b-sch-event.b-milestone::after {\r\n  right: 0;\r\n  transform: rotate(-45deg);\r\n  transform-origin: 100% 0;\r\n}\r\n.b-schedulerbase.b-sch-layout-milestones .b-sch-event-wrap.b-milestone-wrap.b-measure .b-sch-event.b-milestone {\r\n  width: calc(100% + 1em);\r\n}\r\n\r\n.b-sch-event {\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-start;\r\n  cursor: pointer;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  width: calc(100% - 1px);\r\n  text-align: left;\r\n  min-width: 5px;\r\n  min-height: 5px;\r\n  transition: background-color 0.2s, color 0.2s, opacity 0.2s, font-weight 0.2s, border 0.2s;\r\n  position: relative;\r\n}\r\n.b-toggling-node .b-sch-event {\r\n  transition: none;\r\n}\r\n.b-sch-event label {\r\n  color: #888;\r\n}\r\n.b-sch-event:not(.b-milestone) .b-fa, .b-sch-event:not(.b-milestone) .b-icon, .b-sch-event:not(.b-milestone) .b-icon-version {\r\n  margin-inline-end: 0.75em;\r\n  line-height: inherit;\r\n}\r\n.b-sch-event:before {\r\n  font-family: "Font Awesome 6 Free", FontAwesome6Free;\r\n  font-weight: 900;\r\n}\r\n.b-sch-event.b-sch-event-resizing, .b-sch-event:hover {\r\n  z-index: 6;\r\n}\r\n.b-sch-event.b-sch-event-selected, .b-sch-event.b-sch-event-selected * {\r\n  font-weight: 500;\r\n  z-index: 6;\r\n}\r\n.b-sch-event.b-sch-event-assign-selected {\r\n  animation-name: instance-selected;\r\n  animation-duration: 0.2s;\r\n  animation-iteration-count: 3;\r\n  animation-timing-function: ease-in-out;\r\n}\r\n.b-sch-event.b-milestone {\r\n  transition: background 0s;\r\n}\r\n\r\n.b-sch-event-wrap:not(.b-milestone-wrap) {\r\n  min-width: 6px;\r\n  min-height: 6px;\r\n}\r\n.b-using-keyboard .b-sch-event-wrap:not(.b-milestone-wrap).b-active .b-sch-event {\r\n  outline: 1px solid #64a2fe;\r\n  outline-offset: 3px;\r\n}\r\n.b-sch-event-wrap:not(.b-milestone-wrap) .b-sch-event {\r\n  align-self: flex-start;\r\n}\r\n\r\n@keyframes instance-selected {\r\n  0% {\r\n    top: -2px;\r\n  }\r\n  50% {\r\n    top: 2px;\r\n  }\r\n  100% {\r\n    top: 0;\r\n  }\r\n}\r\n.b-initial-fade-in .b-sch-dependency,\r\n.b-initial-fade-in .b-sch-event-wrap {\r\n  opacity: 0;\r\n  animation-name: initial-fade-in;\r\n  animation-duration: 0.5s;\r\n  animation-fill-mode: forwards;\r\n}\r\n\r\n@keyframes initial-fade-in {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-initial-zoom-in .b-sch-event-wrap .b-sch-event {\r\n  animation-name: initial-zoom-in;\r\n  animation-duration: 0.4s;\r\n  animation-timing-function: ease-in;\r\n}\r\n\r\n@keyframes initial-zoom-in {\r\n  0% {\r\n    transform: scale(0.01);\r\n  }\r\n  100% {\r\n    transform: scale(1);\r\n  }\r\n}\r\n.b-initial-slide-from-left .b-sch-event-wrap {\r\n  transform: translateX(-100vw);\r\n  animation-name: initial-slide-from-left;\r\n  animation-duration: 0.7s;\r\n  animation-fill-mode: forwards;\r\n}\r\n\r\n@keyframes initial-slide-from-left {\r\n  100% {\r\n    transform: translateX(0);\r\n  }\r\n}\r\n.b-initial-slide-from-top .b-sch-event-wrap {\r\n  transform: translateY(-100vh);\r\n  animation-name: initial-slide-from-top;\r\n  animation-duration: 0.7s;\r\n  animation-fill-mode: forwards;\r\n}\r\n\r\n@keyframes initial-slide-from-top {\r\n  100% {\r\n    transform: translateY(0);\r\n  }\r\n}\r\n.b-sch-event-content {\r\n  z-index: 1;\r\n}\r\n\r\n.b-milestone .b-sch-event-content {\r\n  flex: 1;\r\n}\r\n\r\n.b-sch-event:not(.b-milestone) .b-sch-event-content {\r\n  margin: 0 0.5em 0 0.75em;\r\n  text-overflow: ellipsis;\r\n  overflow: hidden;\r\n  display: flex;\r\n}\r\n.b-sch-event:not(.b-milestone) .b-sch-event-content > :not(i) {\r\n  text-overflow: ellipsis;\r\n  overflow: hidden;\r\n}\r\n\r\n.b-verticaltimeaxis-row .b-sch-event:not(.b-milestone) .b-sch-event-content {\r\n  flex-direction: column;\r\n}\r\n\r\n.b-prevent-event-transitions .b-sch-event-wrap {\r\n  transition: none !important;\r\n}\r\n\r\n.b-sch-event-wrap {\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  grid-template-rows: 1fr;\r\n}\r\n.b-sch-event-wrap .b-sch-event {\r\n  height: 100%;\r\n  grid-row: 2;\r\n}\r\n.b-sch-horizontal .b-sch-event-wrap, .b-sch-event-wrap.b-sch-horizontal {\r\n  grid-template-columns: auto min-content minmax(auto, 100%) min-content auto;\r\n  grid-template-rows: min-content auto min-content;\r\n}\r\n.b-sch-horizontal .b-sch-event-wrap .b-sch-event, .b-sch-event-wrap.b-sch-horizontal .b-sch-event {\r\n  grid-column: 3;\r\n}\r\n.b-sch-event-wrap.b-sch-vertical {\r\n  grid-template-rows: min-content minmax(auto, 100%) min-content;\r\n  grid-template-columns: 100%;\r\n}\r\n.b-sch-event-wrap.b-sch-vertical .b-sch-event-narrow {\r\n  justify-content: center;\r\n  padding-inline-start: 0;\r\n  padding-inline-end: 0;\r\n}\r\n.b-sch-event-wrap.b-sch-vertical .b-sch-event-narrow .b-sch-event-content {\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n.b-sch-event-wrap.b-sch-vertical .b-sch-event-narrow i {\r\n  margin-inline-end: 0;\r\n  align-self: center;\r\n}\r\n.b-sch-event-wrap.b-sch-vertical .b-sch-event-narrow .b-event-text-wrap {\r\n  writing-mode: vertical-rl;\r\n}\r\n.b-sch-event-wrap.b-sch-vertical .b-sch-event {\r\n  grid-column: 1;\r\n}\r\n.b-sch-horizontal.b-eventbuffer-transition.b-animating .b-sch-event-wrap:not(.b-dragging):not(.b-sch-event-wrap-resizing) {\r\n  transition: background-color 0.2s, color 0.2s, opacity 0.2s, font-weight 0.2s, border 0.2s, height 0.2s, font-size 0.2s;\r\n}\r\n.b-sch-vertical.b-eventbuffer-transition.b-animating .b-sch-event-wrap:not(.b-dragging):not(.b-sch-event-wrap-resizing) {\r\n  transition: background-color 0.2s, color 0.2s, opacity 0.2s, font-weight 0.2s, border 0.2s, width 0.2s, font-size 0.2s;\r\n}\r\n\r\n.b-sch-event-wrap {\r\n  --event-primary-color-h: 125.8895705521deg;\r\n  --event-primary-color-s: 67.6348547718%;\r\n  --event-primary-color-l: 47.2549019608%;\r\n  --event-primary-color: hsl(var(--event-primary-color-h), var(--event-primary-color-s), var(--event-primary-color-l));\r\n}\r\n.b-sch-event-wrap > .b-sch-event:hover, .b-sch-event-wrap > .b-sch-event.b-sch-event-selected, .b-sch-event-wrap > .b-sch-event.b-sch-event-resizing {\r\n  --event-s-factor: var(--event-hover-s-factor);\r\n  --event-l-factor: var(--event-hover-l-factor);\r\n  --event-a: var(--event-hover-a);\r\n  --event-color: var(--event-hover-color);\r\n  --event-opacity: var(--event-hover-opacity);\r\n}\r\n.b-sch-event-wrap > .b-sch-event.b-sch-event-selected:hover {\r\n  --event-s-factor: var(--event-selected-hover-s-factor);\r\n  --event-l-factor: var(--event-selected-hover-l-factor);\r\n  --event-a: var(--event-selected-hover-a);\r\n}\r\n\r\n.b-sch-color-none {\r\n  --event-primary-color-h: null;\r\n  --event-primary-color-s: null;\r\n  --event-primary-color-l: null;\r\n  --event-primary-color: null;\r\n}\r\n\r\n.b-sch-event,\r\n.b-sch-event > .b-sch-event-segments > .b-sch-event {\r\n  --event-background-h: var(--event-primary-color-h);\r\n  --event-background-s: var(--event-primary-color-s);\r\n  --event-background-l: var(--event-primary-color-l);\r\n  --event-s-factor: 1;\r\n  --event-l-factor: 1;\r\n  --event-a: 1;\r\n  --event-hover-s-factor: 1;\r\n  --event-hover-l-factor: 1;\r\n  --event-hover-a: 1;\r\n  --event-selected-hover-s-factor: 1;\r\n  --event-selected-hover-l-factor: 1;\r\n  --event-selected-hover-a: 1;\r\n  --event-background-color: hsla(\r\n          var(--event-background-h),\r\n          calc(var(--event-background-s) * var(--event-s-factor)),\r\n          calc(var(--event-background-l) * var(--event-l-factor)),\r\n          var(--event-a)\r\n  );\r\n  --event-border-color: var(--event-primary-color);\r\n  --event-border-width: 0px;\r\n  --event-border-style: solid;\r\n  --event-border-radius: 0;\r\n  --event-color: #fff;\r\n  --event-hover-color: #fff;\r\n  --event-opacity: 1;\r\n  --event-hover-opacity: 1;\r\n  --event-font-weight: 500;\r\n  color: var(--event-color);\r\n  background-color: var(--event-background-color);\r\n  border-color: var(--event-border-color);\r\n  border-width: var(--event-border-width);\r\n  border-style: var(--event-border-style);\r\n  border-radius: var(--event-border-radius);\r\n  font-weight: var(--event-font-weight);\r\n  opacity: var(--event-opacity);\r\n}\r\n.b-sch-event.b-sch-event-startsoutside,\r\n.b-sch-event > .b-sch-event-segments > .b-sch-event.b-sch-event-startsoutside {\r\n  border-inline-start: none;\r\n}\r\n\r\n.b-sch-event-wrap.b-milestone-wrap > .b-sch-event.b-milestone {\r\n  border-width: 0;\r\n}\r\n\r\n.b-sch-event.b-milestone {\r\n  border-radius: 0;\r\n}\r\n.b-sch-event.b-milestone .b-sch-event-content {\r\n  background-color: var(--event-background-color);\r\n}\r\n.b-sch-event.b-milestone .b-sch-event-content::before {\r\n  border-width: var(--event-border-width);\r\n  border-radius: var(--event-border-radius);\r\n  border-color: var(--event-border-color);\r\n  opacity: var(--event-opacity);\r\n  border-style: var(--event-border-style);\r\n}\r\n.b-schedulerbase.b-sch-layout-milestones .b-sch-event.b-milestone {\r\n  background-color: var(--event-background-color);\r\n  border-color: var(--event-border-color);\r\n  border-width: var(--event-border-width) 0 var(--event-border-width) 0;\r\n  opacity: var(--event-opacity);\r\n  border-style: var(--event-border-style);\r\n  font-weight: var(--event-font-weight);\r\n}\r\n.b-schedulerbase.b-sch-layout-milestones .b-sch-event.b-milestone::before {\r\n  --event-border-width: inherit;\r\n  --event-border-radius: inherit;\r\n  border-style: var(--event-border-style);\r\n  border-color: var(--event-border-color);\r\n  border-top-width: 0;\r\n  border-inline-end-width: 0;\r\n  border-bottom-width: var(--event-border-width);\r\n  border-inline-start-width: var(--event-border-width);\r\n  border-bottom-left-radius: var(--event-border-radius);\r\n}\r\n.b-schedulerbase.b-sch-layout-milestones .b-sch-event.b-milestone::after {\r\n  --event-border-width: inherit;\r\n  --event-border-radius: inherit;\r\n  border-style: var(--event-border-style);\r\n  border-color: var(--event-border-color);\r\n  border-top-width: 0;\r\n  border-inline-end-width: var(--event-border-width);\r\n  border-inline-start-width: 0;\r\n  border-bottom-width: var(--event-border-width);\r\n  border-bottom-right-radius: var(--event-border-radius);\r\n  top: calc(var(--event-border-width) * -1);\r\n}\r\n\r\n.b-sch-style-none .b-sch-event {\r\n  --event-background-image: none;\r\n}\r\n.b-sch-style-none .b-sch-event.b-sch-event-selected {\r\n  --event-background-image: linear-gradient(rgba(0, 0, 0, 0.25), rgba(0, 0, 0, 0.25));\r\n}\r\n.b-sch-style-none .b-sch-event.b-sch-event-selected:hover {\r\n  --event-background-image: linear-gradient(rgba(0, 0, 0, 0.35), rgba(0, 0, 0, 0.35));\r\n}\r\n.b-sch-style-none .b-sch-event:hover {\r\n  --event-background-image: linear-gradient(rgba(0, 0, 0, 0.15), rgba(0, 0, 0, 0.15));\r\n}\r\n.b-sch-style-none .b-sch-event:not(.b-milestone) {\r\n  background-image: var(--event-background-image);\r\n}\r\n.b-sch-style-none .b-sch-event.b-milestone > .b-sch-event-content::before {\r\n  background-image: var(--event-background-image);\r\n}\r\n\r\n.b-sch-vertical .b-sch-event {\r\n  align-items: flex-start;\r\n  padding-inline: 0.75em;\r\n  white-space: normal;\r\n}\r\n.b-sch-vertical .b-sch-event .b-sch-event-content {\r\n  margin: 0.75em 0 0.5em 0;\r\n}\r\n.b-sch-vertical:not(.b-masked) .b-grid-empty .b-grid-subgrid:first-child::before {\r\n  content: "";\r\n  display: none;\r\n}\r\n.b-sch-vertical:not(.b-masked) .b-grid-empty .b-timeline-subgrid::before {\r\n  color: #262626;\r\n  content: attr(data-empty-text);\r\n  padding: 1em;\r\n}\r\n.b-sch-vertical .b-grid-row {\r\n  border-bottom: none;\r\n}\r\n\r\n.b-sch-vertical.b-eventlayout-mixed .b-sch-event {\r\n  opacity: 0.8;\r\n}\r\n\r\n.b-timelinebase.b-overlay-scrollbar .b-virtual-scrollers {\r\n  z-index: 100;\r\n}\r\n\r\n.b-sch-layout-milestone-labels .b-milestone-wrap {\r\n  padding-inline-start: 1em;\r\n}\r\n\r\n.b-sch-layout-milestone .b-milestone-wrap {\r\n  min-width: 1em;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-schedulerbase.b-animating .b-grid-row {\r\n  transition: height 0.2s, transform 0.2s;\r\n}\r\n\r\n.b-grid-footer-container .b-sch-timeaxiscolumn {\r\n  padding: 0;\r\n}\r\n\r\n.b-sch-timeaxis-cell {\r\n  padding: 0;\r\n  flex: none !important;\r\n  align-items: baseline;\r\n  border-inline-end: none;\r\n}\r\n\r\n.b-gridbase .b-timeline-subgrid .b-grid-row.b-selected:not(.b-group-row) {\r\n  background-color: transparent;\r\n}\r\n.b-gridbase .b-timeline-subgrid .b-grid-row.b-selected .b-grid-cell.b-sch-timeaxis-cell.b-selected {\r\n  background-color: transparent;\r\n}\r\n\r\n.b-stripe .b-timeline-subgrid .b-grid-row.b-selected.b-odd,\r\n.b-stripe .b-timeline-subgrid .b-grid-row.b-odd,\r\n.b-gridbase.b-stripe .b-timeline-subgrid .b-grid-row.b-selected.b-odd,\r\n.b-gridbase.b-stripe .b-timeline-subgrid .b-grid-row.b-odd {\r\n  background-color: rgba(250, 250, 250, 0.8);\r\n}\r\n.b-stripe .b-timeline-subgrid .b-grid-row.b-selected.b-even,\r\n.b-stripe .b-timeline-subgrid .b-grid-row.b-even,\r\n.b-gridbase.b-stripe .b-timeline-subgrid .b-grid-row.b-selected.b-even,\r\n.b-gridbase.b-stripe .b-timeline-subgrid .b-grid-row.b-even {\r\n  background-color: rgba(255, 255, 255, 0.8);\r\n}\r\n\r\n.b-stripe .b-timeline-subgrid .b-grid-row.b-selected .b-grid-cell.b-selected {\r\n  background-color: transparent;\r\n}\r\n\r\n.b-stripe .b-timeline-subgrid .b-grid-row.b-selected .b-grid-cell.b-selected {\r\n  background-color: transparent;\r\n}\r\n\r\n.b-gridbase .b-timeline-subgrid .b-group-row.b-selected,\r\n.b-timeline-subgrid .b-group-row.b-selected,\r\n.b-timeline-subgrid .b-group-row {\r\n  z-index: 3;\r\n  background-color: rgba(250, 251, 252, 0.8);\r\n}\r\n\r\n.b-timeline-subgrid {\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-resource-info {\r\n  flex: 1;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  overflow: hidden;\r\n}\r\n.b-resource-info dl {\r\n  overflow: hidden;\r\n}\r\n.b-resource-info dt {\r\n  font-weight: 600;\r\n  margin-bottom: 0.2em;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n.b-resource-info dd {\r\n  margin: 0;\r\n  font-size: 0.8em;\r\n  color: #b0b0b7;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n.b-resource-info .b-resource-avatar {\r\n  margin-inline-end: 0.5em;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-resourcecollapse-cell {\r\n  cursor: pointer;\r\n}\r\n.b-resourcecollapse-cell .b-icon, .b-resourcecollapse-cell .b-icon-version {\r\n  transition: transform 0.2s !important;\r\n}\r\n.b-resourcecollapse-cell .b-icon.b-flip, .b-resourcecollapse-cell .b-flip.b-icon-version {\r\n  transform: rotate(180deg);\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-columnlines .b-grid-cell:not(:last-child) {\r\n  border-inline-end: 1px solid #e9eaeb;\r\n}\r\n\r\n.b-columnlines .b-group-row .b-grid-cell {\r\n  border-inline-end-color: transparent;\r\n}\r\n\r\n.b-column-line,\r\n.b-column-line-major {\r\n  height: 100%;\r\n  position: absolute;\r\n  border-left-width: 1px;\r\n  border-left-style: solid;\r\n}\r\n\r\n.b-column-line {\r\n  border-color: #f4f5f5;\r\n}\r\n\r\n.b-column-line-major {\r\n  border-color: #d0d3d5;\r\n  z-index: 1;\r\n}\r\n\r\n.b-sch-vertical .b-column-line:not(.b-resource-column-line),\r\n.b-sch-vertical .b-column-line-major {\r\n  height: auto;\r\n  width: 100%;\r\n  position: absolute;\r\n  border-left: none;\r\n  border-top-width: 1px;\r\n  border-top-style: solid;\r\n}\r\n.b-sch-vertical .b-resource-group-divider {\r\n  border-color: #d8d9da;\r\n}\r\n\r\n.b-animating .b-resource-column-line {\r\n  transition: left 0.2s linear;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-sch-foreground-canvas > svg {\r\n  overflow: visible;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  pointer-events: none;\r\n  height: 100%;\r\n  z-index: 3;\r\n  --scheduler-dependency-marker: url("#arrowEnd");\r\n}\r\n\r\n.b-sch-dependency-arrow {\r\n  fill: #bbb;\r\n}\r\n.b-sch-dependency-arrow path {\r\n  fill: inherit;\r\n}\r\n\r\n.b-sch-dependency {\r\n  pointer-events: visibleStroke;\r\n  fill: transparent;\r\n  stroke: #bbb;\r\n  stroke-width: 1;\r\n  transition: stroke-width 0.2s linear;\r\n}\r\n.b-sch-dependency.b-sch-dependency-over {\r\n  stroke-width: 2;\r\n  stroke-dasharray: 0;\r\n}\r\n.b-sch-dependency.b-sch-released {\r\n  display: none;\r\n}\r\n.b-sch-dependency.b-click-area {\r\n  stroke: transparent;\r\n  stroke-dasharray: none !important;\r\n  marker-end: none;\r\n}\r\n\r\n.b-sch-dependency {\r\n  marker-end: var(--scheduler-dependency-marker);\r\n}\r\n.b-sch-dependency.b-sch-bidirectional-line {\r\n  marker-start: var(--scheduler-dependency-marker);\r\n}\r\n.b-sch-dependency.b-sch-dependency-markerless {\r\n  marker-end: none;\r\n}\r\n\r\n.b-dependencies .b-sch-event.b-sch-terminals-visible,\r\n.b-dependencies .b-gantt-task.b-sch-terminals-visible {\r\n  overflow: visible;\r\n}\r\n.b-dependencies.b-highlighting .b-sch-event-wrap .b-sch-event,\r\n.b-dependencies.b-highlighting .b-sch-dependency {\r\n  opacity: 0.3;\r\n}\r\n.b-dependencies.b-highlighting .b-sch-event-wrap .b-sch-event.b-highlight,\r\n.b-dependencies.b-highlighting .b-sch-dependency.b-highlight {\r\n  opacity: 1;\r\n}\r\n.b-dependencies.b-highlighting .b-sch-resourcetimerange {\r\n  opacity: 0.3;\r\n}\r\n\r\n.b-sch-terminal {\r\n  width: 12px;\r\n  height: 12px;\r\n  background-color: #fff;\r\n  border-width: 1px;\r\n  border-style: solid;\r\n  border-color: inherit;\r\n  border-radius: 50%;\r\n  position: absolute;\r\n  z-index: 2;\r\n  cursor: pointer;\r\n  --terminal-start-end-offset: 80%;\r\n}\r\n@media (pointer: coarse) {\r\n  .b-sch-terminal {\r\n    --terminal-start-end-offset: 115%;\r\n  }\r\n  .b-sch-terminal::after {\r\n    content: "";\r\n    height: 24px;\r\n    width: 24px;\r\n    border-radius: 50%;\r\n    position: absolute;\r\n    transform: translate(-7px, -7px);\r\n  }\r\n}\r\n.b-sch-terminal.b-sch-terminal:hover {\r\n  background-color: #e6e6e6;\r\n}\r\n.b-dragging .b-sch-terminal, .b-sch-event-resizing .b-sch-terminal {\r\n  display: none;\r\n}\r\n\r\n.b-sch-event-wrap:not(.b-sch-event-hover) .b-sch-terminal {\r\n  display: none;\r\n}\r\n\r\n.b-creating-dependency .b-sch-terminal:hover,\r\n.b-creating-dependency .b-sch-terminal-active {\r\n  background-color: #e6e6e6;\r\n}\r\n.b-creating-dependency .b-sch-terminal:hover.b-valid,\r\n.b-creating-dependency .b-sch-terminal-active.b-valid {\r\n  border-color: #27ca37;\r\n  background-color: #9eeca5;\r\n}\r\n.b-creating-dependency .b-sch-terminal:hover.b-invalid,\r\n.b-creating-dependency .b-sch-terminal-active.b-invalid {\r\n  border-color: #e53f2c;\r\n  background-color: #f6bbb4;\r\n}\r\n.b-creating-dependency * {\r\n  touch-action: none;\r\n}\r\n\r\n.b-sch-terminal-top {\r\n  top: 0;\r\n  left: 50%;\r\n  transform: translateX(-50%) translateY(-80%);\r\n}\r\n\r\n.b-sch-terminal-bottom {\r\n  bottom: 0;\r\n  left: 50%;\r\n  transform: translateX(-50%) translateY(80%);\r\n}\r\n\r\n.b-sch-terminal-start {\r\n  left: 0;\r\n  top: 50%;\r\n  transform: translateX(calc(var(--terminal-start-end-offset) * -1 * var(--rtl-negate))) translateY(-50%);\r\n}\r\n.b-rtl .b-sch-terminal-start {\r\n  left: auto;\r\n  right: 0;\r\n}\r\n\r\n.b-sch-terminal-end {\r\n  right: 0;\r\n  top: 50%;\r\n  transform: translateX(calc(var(--terminal-start-end-offset) * var(--rtl-negate))) translateY(-50%);\r\n}\r\n.b-rtl .b-sch-terminal-end {\r\n  right: auto;\r\n  left: 0;\r\n}\r\n\r\n.b-labels-topbottom .b-schedulerbase:not(.b-sch-layout-milestones) .b-milestone:not(.b-sch-event-withicon) .b-sch-terminal-start,\r\n.b-labels-topbottom .b-gantt:not(.b-sch-layout-milestones) .b-milestone:not(.b-gantt-task-withicon) .b-sch-terminal-start {\r\n  transform: translate(calc(-0.35em * var(--rtl-negate)), -50%);\r\n}\r\n.b-labels-topbottom .b-schedulerbase:not(.b-sch-layout-milestones) .b-milestone:not(.b-sch-event-withicon) .b-sch-terminal-end,\r\n.b-labels-topbottom .b-gantt:not(.b-sch-layout-milestones) .b-milestone:not(.b-gantt-task-withicon) .b-sch-terminal-end {\r\n  transform: translate(calc(0.35em * var(--rtl-negate)), -50%);\r\n}\r\n\r\n.b-sch-dependency-connector {\r\n  position: absolute;\r\n  contain: strict;\r\n  border-top: 2px dashed #bbb;\r\n  z-index: 10;\r\n  transform-origin: 0 0;\r\n  pointer-events: none;\r\n}\r\n.b-sch-dependency-connector.b-removing {\r\n  transition: width 0.2s ease-out;\r\n}\r\n.b-sch-dependency-connector.b-valid {\r\n  border-color: #27ca37;\r\n  border-top-style: solid;\r\n}\r\n\r\n.b-sch-dependency-creation-tooltip.b-popup {\r\n  max-width: none;\r\n}\r\n.b-sch-dependency-creation-tooltip .b-popup-header {\r\n  padding: 0.5em 0.075em;\r\n  background-color: #27ca37;\r\n}\r\n.b-safari .b-sch-dependency-creation-tooltip .b-popup-header, .b-firefox .b-sch-dependency-creation-tooltip .b-popup-header {\r\n  width: 1.5em;\r\n}\r\n.b-sch-dependency-creation-tooltip .b-popup-header i {\r\n  margin-bottom: 0.5em;\r\n}\r\n.b-sch-dependency-creation-tooltip.b-rtl .b-popup-header i {\r\n  margin-bottom: 0;\r\n  margin-top: 0.5em;\r\n}\r\n.b-sch-dependency-creation-tooltip.b-invalid .b-popup-header {\r\n  background-color: #e53f2c;\r\n}\r\n.b-sch-dependency-creation-tooltip.b-checking .b-popup-header {\r\n  background-color: #b0b0b7;\r\n}\r\n\r\n.b-sch-dependency-tooltip {\r\n  display: grid;\r\n  grid-template-columns: auto auto auto;\r\n  grid-column-gap: 0.5em;\r\n  align-items: center;\r\n}\r\n.b-sch-dependency-tooltip label {\r\n  font-size: 0.8em;\r\n}\r\n\r\n.b-sch-dependency-creation-tooltip .b-panel-header,\r\n.b-sch-dependency-tooltip .b-panel-header {\r\n  color: #fff;\r\n}\r\n.b-sch-dependency-creation-tooltip .b-sch-box,\r\n.b-sch-dependency-tooltip .b-sch-box {\r\n  width: 12px;\r\n  height: 8px;\r\n  border: 1px solid #bbb;\r\n  display: none;\r\n  position: relative;\r\n}\r\n.b-sch-dependency-creation-tooltip .b-sch-box.b-start, .b-sch-dependency-creation-tooltip .b-sch-box.b-end, .b-sch-dependency-creation-tooltip .b-sch-box.b-right, .b-sch-dependency-creation-tooltip .b-sch-box.b-left, .b-sch-dependency-creation-tooltip .b-sch-box.b-top, .b-sch-dependency-creation-tooltip .b-sch-box.b-bottom,\r\n.b-sch-dependency-tooltip .b-sch-box.b-start,\r\n.b-sch-dependency-tooltip .b-sch-box.b-end,\r\n.b-sch-dependency-tooltip .b-sch-box.b-right,\r\n.b-sch-dependency-tooltip .b-sch-box.b-left,\r\n.b-sch-dependency-tooltip .b-sch-box.b-top,\r\n.b-sch-dependency-tooltip .b-sch-box.b-bottom {\r\n  display: block;\r\n}\r\n.b-sch-dependency-creation-tooltip .b-sch-box:after,\r\n.b-sch-dependency-tooltip .b-sch-box:after {\r\n  content: "";\r\n  width: 3px;\r\n  height: 3px;\r\n  border-radius: 50%;\r\n  background-color: #888;\r\n  position: absolute;\r\n}\r\n.b-sch-dependency-creation-tooltip .b-sch-box.b-end:after, .b-sch-dependency-creation-tooltip .b-sch-box.b-right:after,\r\n.b-sch-dependency-tooltip .b-sch-box.b-end:after,\r\n.b-sch-dependency-tooltip .b-sch-box.b-right:after {\r\n  right: -2px;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n}\r\n.b-rtl .b-sch-dependency-creation-tooltip .b-sch-box.b-end:after,\r\n.b-rtl .b-sch-dependency-tooltip .b-sch-box.b-end:after {\r\n  right: auto;\r\n  left: -2px;\r\n}\r\n.b-sch-dependency-creation-tooltip .b-sch-box.b-start:after, .b-sch-dependency-creation-tooltip .b-sch-box.b-left:after,\r\n.b-sch-dependency-tooltip .b-sch-box.b-start:after,\r\n.b-sch-dependency-tooltip .b-sch-box.b-left:after {\r\n  left: -2px;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n}\r\n.b-rtl .b-sch-dependency-creation-tooltip .b-sch-box.b-start:after,\r\n.b-rtl .b-sch-dependency-tooltip .b-sch-box.b-start:after {\r\n  left: auto;\r\n  right: -2px;\r\n}\r\n.b-sch-dependency-creation-tooltip .b-sch-box.b-top:after,\r\n.b-sch-dependency-tooltip .b-sch-box.b-top:after {\r\n  top: -2px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n}\r\n.b-sch-dependency-creation-tooltip .b-sch-box.b-bottom:after,\r\n.b-sch-dependency-tooltip .b-sch-box.b-bottom:after {\r\n  bottom: -2px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n}\r\n\r\n.b-predecessor-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n.b-predecessor-list > * {\r\n  flex: 0 0 auto;\r\n  align-self: stretch;\r\n  width: auto;\r\n}\r\n.b-predecessor-list > .b-list-item .b-predecessor-item-text {\r\n  flex: 1;\r\n}\r\n.b-predecessor-list > .b-list-item .b-sch-box {\r\n  width: 1.2em;\r\n  height: 0.9em;\r\n  border: 1px solid #bbb;\r\n  margin-inline-start: 0.5em;\r\n  position: relative;\r\n}\r\n.b-predecessor-list > .b-list-item .b-sch-box:after {\r\n  content: "";\r\n  width: 0.5em;\r\n  height: 0.5em;\r\n  border-radius: 50%;\r\n  background-color: #fff;\r\n  position: absolute;\r\n  border: 1px solid #bbb;\r\n  display: none;\r\n}\r\n.b-predecessor-list > .b-list-item.b-selected .b-sch-box {\r\n  background-color: #27ca37;\r\n}\r\n.b-predecessor-list > .b-list-item.b-selected.b-fs .b-sch-box.b-from::after {\r\n  right: -0.25em;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  display: block;\r\n}\r\n.b-predecessor-list > .b-list-item.b-selected.b-fs .b-sch-box.b-to::after {\r\n  left: -0.25em;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  display: block;\r\n}\r\n.b-predecessor-list > .b-list-item.b-selected.b-sf .b-sch-box.b-from::after {\r\n  left: -0.25em;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  display: block;\r\n}\r\n.b-predecessor-list > .b-list-item.b-selected.b-sf .b-sch-box.b-to::after {\r\n  right: -0.25em;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  display: block;\r\n}\r\n.b-predecessor-list > .b-list-item.b-selected.b-ss .b-sch-box.b-from::after {\r\n  left: -0.25em;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  display: block;\r\n}\r\n.b-predecessor-list > .b-list-item.b-selected.b-ss .b-sch-box.b-to::after {\r\n  left: -0.25em;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  display: block;\r\n}\r\n.b-predecessor-list > .b-list-item.b-selected.b-ff .b-sch-box.b-from::after {\r\n  right: -0.25em;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  display: block;\r\n}\r\n.b-predecessor-list > .b-list-item.b-selected.b-ff .b-sch-box.b-to::after {\r\n  right: -0.25em;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  display: block;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-dependencyeditor.b-popup {\r\n  width: 29em;\r\n}\r\n.b-dependencyeditor.b-popup .b-popup-content {\r\n  padding: 1em 1em 0 1em;\r\n}\r\n.b-dependencyeditor.b-popup .b-popup-content .b-textfield label,\r\n.b-dependencyeditor.b-popup .b-popup-content .b-checkbox label {\r\n  flex: 1 0 4em;\r\n}\r\n.b-dependencyeditor.b-popup .b-popup-content .b-textfield .b-checkbox-label,\r\n.b-dependencyeditor.b-popup .b-popup-content .b-checkbox .b-checkbox-label {\r\n  text-align: start;\r\n}\r\n.b-dependencyeditor.b-popup .b-bottom-toolbar {\r\n  padding: 1em 1em 0.4em 1em;\r\n}\r\n.b-dependencyeditor.b-popup .b-bottom-toolbar .b-label-filler {\r\n  display: none;\r\n}\r\n.b-dependencyeditor.b-popup .b-bottom-toolbar > button {\r\n  flex: 1;\r\n  margin-inline-end: 0.5em;\r\n}\r\n.b-dependencyeditor.b-popup .b-bottom-toolbar > button:last-child {\r\n  margin-inline-end: 0;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-dragselect-rect {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  transform-origin: 0 0;\r\n  pointer-events: none;\r\n  z-index: 100;\r\n  border: 1px dashed #474849;\r\n}\r\n\r\ndiv.b-sch-event-wrap > .b-sch-event.b-cut-item {\r\n  opacity: 0.4;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-schedulerbase.b-dragging-event {\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n}\r\n\r\n.b-sch-event-wrap.b-aborting, .b-sch-event-wrap.b-drag-unified-animation {\r\n  transition: background-color 0.2s, color 0.2s, opacity 0.2s, font-weight 0.2s, border 0.2s, transform 0.2s, left 0.2s, top 0.2s;\r\n}\r\n.b-sch-event-wrap.b-dragging {\r\n  z-index: 200;\r\n}\r\n.b-sch-event-wrap.b-dragging.b-drag-main {\r\n  z-index: 201;\r\n}\r\n.b-sch-event-wrap.b-dragging .b-sch-event {\r\n  outline: none !important;\r\n}\r\n.b-sch-event-wrap.b-dragging .b-sch-event.b-sch-style-plain .b-sch-event-wrap.b-dragging .b-sch-event, .b-sch-event-wrap.b-dragging .b-sch-event.b-sch-style-border .b-sch-event-wrap.b-dragging .b-sch-event, .b-sch-event-wrap.b-dragging .b-sch-event.b-sch-style-colored .b-sch-event-wrap.b-dragging .b-sch-event {\r\n  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.12), 0 3px 6px rgba(0, 0, 0, 0.24);\r\n}\r\n.b-sch-event-wrap.b-hidden {\r\n  display: none !important;\r\n}\r\n\r\n.b-float-root > .b-tooltip.b-eventdrag-tooltip {\r\n  pointer-events: none;\r\n}\r\n\r\n.b-sch-tip-message {\r\n  margin-top: 0.5em;\r\n}\r\n.b-sch-tip-invalid .b-sch-tip-message {\r\n  color: #e53f2c;\r\n}\r\n.b-sch-tip-message .b-icon:first-child, .b-sch-tip-message .b-icon-version:first-child {\r\n  margin-inline-end: 0.4em;\r\n}\r\n.b-sch-tip-message:empty {\r\n  display: none;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-timelinebase.b-dragcreating {\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n}\r\n.b-timelinebase.b-dragcreating .b-sch-timeaxis-cell,\r\n.b-timelinebase.b-dragcreating .b-sch-event-wrap,\r\n.b-timelinebase.b-dragcreating .b-gantt-task-wrap {\r\n  pointer-events: none;\r\n}\r\n\r\n.b-dragcreate-lock .b-iscreating {\r\n  opacity: 0.5;\r\n}\r\n.b-dragcreate-lock .b-iscreating .b-sch-event-content {\r\n  display: none;\r\n}\r\n\r\n.b-sch-dragcreating.b-too-narrow {\r\n  opacity: 0.25;\r\n}\r\n\r\n.b-sch-dragcreate-tooltip.b-too-narrow .b-sch-tooltip-startdate,\r\n.b-sch-dragcreate-tooltip.b-too-narrow .b-sch-tooltip-enddate {\r\n  color: #e53f2c;\r\n}\r\n.b-sch-dragcreate-tooltip.b-too-narrow .b-sch-tooltip-startdate .b-sch-clock,\r\n.b-sch-dragcreate-tooltip.b-too-narrow .b-sch-tooltip-enddate .b-sch-clock {\r\n  border-color: #e53f2c;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-eventeditor.b-popup {\r\n  width: min(100%, 15em + var(--date-time-length));\r\n  min-width: min(100%, 15em + var(--date-time-length));\r\n  flex: unset;\r\n}\r\n.b-eventeditor.b-popup.b-collapsed .b-panel-collapse-revealer {\r\n  display: none;\r\n}\r\n.b-eventeditor.b-popup .b-eventeditor-content.b-popup-content .b-textfield label,\r\n.b-eventeditor.b-popup .b-eventeditor-content.b-popup-content .b-numberfield label,\r\n.b-eventeditor.b-popup .b-eventeditor-content.b-popup-content .b-textareafield label,\r\n.b-eventeditor.b-popup .b-eventeditor-content.b-popup-content .b-radiogroup > label,\r\n.b-eventeditor.b-popup .b-eventeditor-content.b-popup-content .b-checkbox > label {\r\n  flex: 1 0 6em;\r\n}\r\n.b-eventeditor.b-popup .b-eventeditor-content.b-popup-content [data-ref=startDateField], .b-eventeditor.b-popup .b-eventeditor-content.b-popup-content [data-ref=endDateField] {\r\n  flex: 1 0 calc(56.5% + var(--date-width-difference));\r\n}\r\n.b-eventeditor.b-popup .b-eventeditor-content.b-popup-content [data-ref=startTimeField], .b-eventeditor.b-popup .b-eventeditor-content.b-popup-content [data-ref=endTimeField] {\r\n  flex: 1 0 calc(43.5% - var(--date-width-difference));\r\n}\r\n.b-eventeditor.b-popup .b-bottom-toolbar > .b-toolbar-content {\r\n  padding-inline-start: calc(1em + 6.6em);\r\n}\r\n.b-eventeditor.b-popup .b-bottom-toolbar > .b-toolbar-content > button {\r\n  flex: 1;\r\n  margin-inline-end: 0.5em;\r\n  min-width: 0;\r\n}\r\n.b-eventeditor.b-popup .b-bottom-toolbar > .b-toolbar-content > button:last-child {\r\n  margin-inline-end: 0;\r\n}\r\n\r\n.b-eventeditor-content {\r\n  padding-bottom: 0;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-sch-event-wrap .b-sch-nonworkingtime {\r\n  z-index: 0;\r\n}\r\n\r\n.b-dragging-event .b-sch-event-wrap.b-dragging .b-sch-nonworkingtime {\r\n  display: none;\r\n}\r\n\r\n.b-animating .b-sch-event-wrap .b-sch-timerange {\r\n  transition: none;\r\n}\r\n\r\n.b-sch-vertical .b-sch-event-wrap .b-sch-nonworkingtime {\r\n  left: 0;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-sch-event-resizable-true, .b-sch-event-resizable-start, .b-sch-event-resizable-end {\r\n  --handle-size: 0.5em;\r\n}\r\n@media (pointer: coarse) {\r\n  .b-sch-event-resizable-true, .b-sch-event-resizable-start, .b-sch-event-resizable-end {\r\n    --handle-size: 1em;\r\n  }\r\n}\r\n.b-sch-event-resizable-true::before, .b-sch-event-resizable-true::after, .b-sch-event-resizable-start::before, .b-sch-event-resizable-start::after, .b-sch-event-resizable-end::before, .b-sch-event-resizable-end::after {\r\n  --handle-width: 9px;\r\n  --handle-height: 50%;\r\n  --handle-inset: 3px;\r\n  --handle-align-inset: 25%;\r\n  --gradient-dir: to right;\r\n  --handle-opacity: 0.7;\r\n  --clip-path: inset(0 0 0 var(--handle-inset));\r\n  position: absolute;\r\n  clip-path: var(--clip-path);\r\n  left: 0;\r\n  top: var(--handle-align-inset);\r\n  width: var(--handle-width);\r\n  height: var(--handle-height);\r\n  opacity: var(--handle-opacity);\r\n  background: linear-gradient(var(--gradient-dir), #fff 1px, transparent 1px);\r\n  background-size: 2px;\r\n  background-position: var(--handle-inset);\r\n}\r\n@media (pointer: coarse) {\r\n  .b-sch-event-resizable-true::before, .b-sch-event-resizable-true::after, .b-sch-event-resizable-start::before, .b-sch-event-resizable-start::after, .b-sch-event-resizable-end::before, .b-sch-event-resizable-end::after {\r\n    --handle-width: 1.7em;\r\n    --handle-inset: 0.7em;\r\n  }\r\n}\r\n.b-sch-event-resizable-true::after, .b-sch-event-resizable-start::after, .b-sch-event-resizable-end::after {\r\n  --clip-path: inset(0 var(--handle-inset) 0 0);\r\n  left: auto;\r\n  right: 0;\r\n}\r\n.b-sch-vertical .b-sch-event-resizable-true::before, .b-sch-vertical .b-sch-event-resizable-true::after, .b-sch-vertical .b-sch-event-resizable-start::before, .b-sch-vertical .b-sch-event-resizable-start::after, .b-sch-vertical .b-sch-event-resizable-end::before, .b-sch-vertical .b-sch-event-resizable-end::after {\r\n  --handle-width: 50%;\r\n  --handle-height: 0.7em;\r\n  --gradient-dir: to bottom;\r\n  background-size: 100% 2px;\r\n  --clip-path: inset(var(--handle-inset) 0 0 0);\r\n  top: 0;\r\n  left: var(--handle-align-inset);\r\n}\r\n@media (pointer: coarse) {\r\n  .b-sch-vertical .b-sch-event-resizable-true::before, .b-sch-vertical .b-sch-event-resizable-true::after, .b-sch-vertical .b-sch-event-resizable-start::before, .b-sch-vertical .b-sch-event-resizable-start::after, .b-sch-vertical .b-sch-event-resizable-end::before, .b-sch-vertical .b-sch-event-resizable-end::after {\r\n    --handle-height: 1.7em;\r\n  }\r\n}\r\n.b-sch-vertical .b-sch-event-resizable-true::after, .b-sch-vertical .b-sch-event-resizable-start::after, .b-sch-vertical .b-sch-event-resizable-end::after {\r\n  --clip-path: inset(0 0 var(--handle-inset) 0);\r\n  top: auto;\r\n  bottom: 0;\r\n}\r\n\r\n.b-eventresize:not(.b-readonly):not(.b-creating-dependency) {\r\n  --handle-cursor: ew-resize;\r\n}\r\n.b-eventresize:not(.b-readonly):not(.b-creating-dependency).b-sch-vertical {\r\n  --handle-cursor: ns-resize;\r\n}\r\n.b-eventresize:not(.b-readonly):not(.b-creating-dependency) .b-sch-event-wrap.b-sch-event-hover:not(.b-sch-style-line) .b-sch-event:not(.b-segmented).b-sch-event-resizable-start:before, .b-eventresize:not(.b-readonly):not(.b-creating-dependency) .b-sch-event-wrap.b-sch-event-hover:not(.b-sch-style-line) .b-sch-event:not(.b-segmented).b-sch-event-resizable-end:after, .b-eventresize:not(.b-readonly):not(.b-creating-dependency) .b-sch-event-wrap.b-sch-event-hover:not(.b-sch-style-line) .b-sch-event:not(.b-segmented).b-sch-event-resizable-true:before, .b-eventresize:not(.b-readonly):not(.b-creating-dependency) .b-sch-event-wrap.b-sch-event-hover:not(.b-sch-style-line) .b-sch-event:not(.b-segmented).b-sch-event-resizable-true:after,\r\n.b-eventresize:not(.b-readonly):not(.b-creating-dependency) .b-sch-event-wrap:not(.b-sch-style-line) .b-sch-event-resizing.b-sch-event-resizable-start:before,\r\n.b-eventresize:not(.b-readonly):not(.b-creating-dependency) .b-sch-event-wrap:not(.b-sch-style-line) .b-sch-event-resizing.b-sch-event-resizable-end:after,\r\n.b-eventresize:not(.b-readonly):not(.b-creating-dependency) .b-sch-event-wrap:not(.b-sch-style-line) .b-sch-event-resizing.b-sch-event-resizable-true:before,\r\n.b-eventresize:not(.b-readonly):not(.b-creating-dependency) .b-sch-event-wrap:not(.b-sch-style-line) .b-sch-event-resizing.b-sch-event-resizable-true:after {\r\n  content: "";\r\n}\r\n.b-eventresize:not(.b-readonly):not(.b-creating-dependency) .b-sch-event.b-resize-handle {\r\n  cursor: var(--handle-cursor);\r\n}\r\n.b-eventresize:not(.b-readonly):not(.b-creating-dependency).b-resizing-event, .b-eventresize:not(.b-readonly):not(.b-creating-dependency) .b-sch-event-resizing {\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  cursor: var(--handle-cursor) !important;\r\n}\r\n\r\n.b-sch-event-wrap.b-sch-event-wrap-resizing {\r\n  z-index: 7;\r\n}\r\n\r\n.b-schedulerbase.b-resizing-event .b-sch-timeaxis-cell,\r\n.b-schedulerbase.b-resizing-event .b-sch-event-wrap {\r\n  /* prevent drag create */\r\n  pointer-events: none;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-popup.b-sch-event-tooltip {\r\n  max-width: 30em;\r\n}\r\n.b-popup.b-sch-event-tooltip .b-sch-clockwrap {\r\n  margin-top: 0.5em;\r\n}\r\n.b-popup.b-sch-event-tooltip .b-sch-clockwrap:first-child {\r\n  margin-top: 0;\r\n}\r\n.b-popup.b-sch-event-tooltip .b-sch-event-title {\r\n  font-weight: 600;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-timeaxis-group-summary {\r\n  display: flex;\r\n  flex-direction: row;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.b-timeaxis-group-summary .b-timeaxis-tick {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: stretch;\r\n  justify-content: center;\r\n}\r\n.b-timeaxis-group-summary .b-timeaxis-summary-value {\r\n  text-align: center;\r\n}\r\n\r\n.b-gridbase.b-schedulerbase .b-timeline-subgrid .b-grid-row.b-group-footer.b-hover .b-grid-cell,\r\n.b-gridbase.b-schedulerbase .b-timeline-subgrid .b-grid-row.b-group-footer.b-hover .b-grid-cell:hover {\r\n  background-color: #fffbf5;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-headerzoom-rect {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  height: 100%;\r\n  transform-origin: 0 0;\r\n  pointer-events: none;\r\n  z-index: 100;\r\n  background: rgba(152, 193, 255, 0.3);\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-sch-event-wrap .b-sch-label, .b-gantt-task-wrap .b-sch-label {\r\n  font-size: 12px;\r\n  text-align: center;\r\n  white-space: nowrap;\r\n  margin: 0.2em 0;\r\n  color: #888;\r\n  font-weight: 500;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  pointer-events: all;\r\n}\r\n.b-sch-event-wrap .b-sch-label-before, .b-gantt-task-wrap .b-sch-label-before {\r\n  position: absolute;\r\n  margin: 0;\r\n}\r\n.b-sch-event-wrap .b-sch-label-after, .b-gantt-task-wrap .b-sch-label-after {\r\n  position: absolute;\r\n  margin: 0;\r\n}\r\n.b-baselines .b-sch-event-wrap.b-has-baselines .b-sch-label-before, .b-baselines .b-sch-event-wrap.b-has-baselines .b-sch-label-after, .b-baselines .b-gantt-task-wrap.b-has-baselines .b-sch-label-before, .b-baselines .b-gantt-task-wrap.b-has-baselines .b-sch-label-after {\r\n  top: 0;\r\n  line-height: 85%;\r\n}\r\n\r\n.b-sch-event-wrap .b-sch-label-top {\r\n  grid-column: 3;\r\n  grid-row: 1;\r\n}\r\n.b-sch-event-wrap .b-sch-label-before, .b-sch-event-wrap .b-sch-label-after {\r\n  grid-row: 1;\r\n  margin-top: 6px;\r\n}\r\n.b-sch-event-wrap .b-sch-label-before {\r\n  grid-column: 1;\r\n  transform: translate3d(calc(-100% * var(--rtl-negate)), 0, 0);\r\n  margin-inline-start: -1.5em;\r\n}\r\n.b-sch-event-wrap .b-sch-label-after {\r\n  grid-column: 5;\r\n  margin-inline-start: 1.5em;\r\n}\r\n.b-sch-event-wrap .b-sch-label-bottom {\r\n  grid-column: 3;\r\n  grid-row: 3;\r\n}\r\n.b-sch-event-wrap.b-milestone-wrap .b-sch-label-before, .b-sch-event-wrap.b-milestone-wrap .b-sch-label-after {\r\n  margin-inline: 0;\r\n}\r\n.b-labels-topbottom .b-sch-event-wrap.b-milestone-wrap .b-milestone {\r\n  width: 100%;\r\n}\r\n\r\n.b-measure-label {\r\n  height: 1em;\r\n  position: fixed;\r\n  top: -10000px;\r\n  left: -10000px;\r\n  visibility: hidden;\r\n}\r\n.b-measure-label label {\r\n  padding-inline-start: 1.5em;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-pan .b-timeline-subgrid {\r\n  cursor: move;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-sch-resourcetimerange {\r\n  display: flex;\r\n  position: absolute;\r\n  left: 0;\r\n  background-color: rgba(255, 235, 59, 0.1);\r\n  color: #ecd300;\r\n  z-index: 2;\r\n  justify-content: center;\r\n  align-items: flex-end;\r\n}\r\n.b-sch-resourcetimerange [data-task-feature] {\r\n  display: flex;\r\n  font-size: 12px;\r\n}\r\n.b-animating .b-sch-resourcetimerange {\r\n  transition: background-color 0.2s, color 0.2s, opacity 0.2s, font-weight 0.2s, border 0.2s, transform 0.2s, left 0.2s, right 0.2s, width 0.2s, height 0.2s, font-size 0.2s;\r\n}\r\n.b-sch-resourcetimerange .b-sch-event-withicon .b-fa {\r\n  margin-inline-end: 0.4em;\r\n  line-height: inherit;\r\n}\r\n.b-sch-resourcetimerange .b-sch-event-content {\r\n  margin: 3px;\r\n}\r\n.b-interactive-resourcetimeranges .b-sch-resourcetimerange {\r\n  pointer-events: auto;\r\n}\r\n\r\n.b-sch-vertical .b-sch-resourcetimerange {\r\n  justify-content: center;\r\n  align-items: flex-start;\r\n}\r\n\r\n.b-sch-color-red.b-sch-resourcetimerange {\r\n  background-color: rgba(229, 63, 44, 0.1);\r\n  color: #b72615;\r\n}\r\n\r\n.b-sch-color-pink.b-sch-resourcetimerange {\r\n  background-color: rgba(254, 49, 131, 0.1);\r\n  color: #e2015b;\r\n}\r\n\r\n.b-sch-color-purple.b-sch-resourcetimerange {\r\n  background-color: rgba(254, 49, 234, 0.1);\r\n  color: #e201cc;\r\n}\r\n\r\n.b-sch-color-violet.b-sch-resourcetimerange {\r\n  background-color: rgba(172, 49, 254, 0.1);\r\n  color: #8801e2;\r\n}\r\n\r\n.b-sch-color-indigo.b-sch-resourcetimerange {\r\n  background-color: rgba(69, 49, 254, 0.1);\r\n  color: #1701e2;\r\n}\r\n\r\n.b-sch-color-blue.b-sch-resourcetimerange {\r\n  background-color: rgba(49, 131, 254, 0.1);\r\n  color: #015be2;\r\n}\r\n\r\n.b-sch-color-cyan.b-sch-resourcetimerange {\r\n  background-color: rgba(49, 233, 254, 0.1);\r\n  color: #01cbe2;\r\n}\r\n\r\n.b-sch-color-teal.b-sch-resourcetimerange {\r\n  background-color: rgba(49, 254, 172, 0.1);\r\n  color: #01e288;\r\n}\r\n\r\n.b-sch-color-green.b-sch-resourcetimerange {\r\n  background-color: rgba(39, 202, 55, 0.1);\r\n  color: #1c9928;\r\n}\r\n\r\n.b-sch-color-lime.b-sch-resourcetimerange {\r\n  background-color: rgba(118, 230, 44, 0.1);\r\n  color: #56b915;\r\n}\r\n\r\n.b-sch-color-yellow.b-sch-resourcetimerange {\r\n  background-color: rgba(255, 235, 59, 0.1);\r\n  color: #ecd300;\r\n}\r\n\r\n.b-sch-color-orange.b-sch-resourcetimerange {\r\n  background-color: rgba(254, 172, 49, 0.1);\r\n  color: #e28801;\r\n}\r\n\r\n.b-sch-color-deep-orange.b-sch-resourcetimerange {\r\n  background-color: rgba(255, 112, 67, 0.1);\r\n  color: #f23a00;\r\n}\r\n\r\n.b-sch-color-gray.b-sch-resourcetimerange {\r\n  background-color: rgba(160, 160, 160, 0.1);\r\n  color: #7e7272;\r\n}\r\n\r\n.b-sch-color-gantt-green.b-sch-resourcetimerange {\r\n  background-color: rgba(142, 233, 151, 0.1);\r\n  color: #3edc4d;\r\n}\r\n\r\n.b-schedule-selected-tick {\r\n  position: absolute;\r\n  pointer-events: none;\r\n  z-index: -1;\r\n  background-color: rgba(254, 172, 49, 0.3);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.b-sch-scheduletip {\r\n  min-width: 10em;\r\n}\r\n.b-sch-scheduletip.b-nonworking-time {\r\n  opacity: 0;\r\n  pointer-events: none;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-simpleeventeditor {\r\n  z-index: 15;\r\n}\r\n.b-simpleeventeditor .b-field {\r\n  align-items: stretch;\r\n}\r\n.b-sch-horizontal .b-simpleeventeditor .b-field {\r\n  height: 100%;\r\n}\r\n\r\n.b-stickyevents.b-sch-horizontal .b-sch-event-wrap:not(.b-disable-sticky, .b-milestone-wrap),\r\n.b-stickyevents.b-sch-horizontal .b-sch-resourcetimerange {\r\n  overflow: visible;\r\n}\r\n.b-stickyevents.b-sch-horizontal .b-sch-event-wrap:not(.b-disable-sticky, .b-milestone-wrap) .b-sch-event-content,\r\n.b-stickyevents.b-sch-horizontal .b-sch-resourcetimerange .b-sch-event-content {\r\n  position: sticky;\r\n  left: 0.75em;\r\n}\r\n.b-stickyevents.b-sch-horizontal .b-sch-event-wrap:not(.b-disable-sticky, .b-milestone-wrap) .b-sch-event,\r\n.b-stickyevents.b-sch-horizontal .b-sch-resourcetimerange .b-sch-event {\r\n  overflow: visible;\r\n}\r\n.b-stickyevents.b-sch-horizontal .b-sch-resourcetimerange {\r\n  justify-content: flex-start;\r\n  overflow: visible;\r\n}\r\n.b-stickyevents.b-sch-horizontal .b-sch-resourcetimerange > div {\r\n  overflow: visible;\r\n  width: 100%;\r\n}\r\n\r\n.b-rtl.b-stickyevents.b-sch-horizontal .b-sch-event-wrap:not(.b-disable-sticky, .b-milestone-wrap) .b-sch-event-content,\r\n.b-rtl.b-stickyevents.b-sch-horizontal .b-sch-resourcetimerange .b-sch-event-content {\r\n  right: 0.75em;\r\n}\r\n\r\n.b-firefox.b-stickyevents.b-sch-horizontal .b-sch-foreground-canvas {\r\n  contain: none;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-sch-summarybar {\r\n  padding: 0;\r\n  flex-direction: row;\r\n  justify-content: flex-start;\r\n  flex-grow: unset !important;\r\n}\r\n.b-sch-summarybar .b-timeaxis-tick {\r\n  display: flex;\r\n  flex-direction: column;\r\n  text-align: center;\r\n  overflow: hidden;\r\n  justify-content: center;\r\n  align-items: stretch;\r\n}\r\n\r\n.b-sch-summarybar:not(.b-sch-vertical) .b-timeaxis-tick {\r\n  padding: 0.5em 0;\r\n}\r\n.b-sch-summarybar:not(.b-sch-vertical) .b-timeaxis-tick:not(:last-child) {\r\n  border-inline-end: 1px solid #d8d9da;\r\n}\r\n\r\n.b-sch-vertical .b-sch-summarybar {\r\n  flex-direction: column;\r\n  align-items: stretch;\r\n  background: #f3f4f5 !important;\r\n  color: #667280;\r\n}\r\n.b-sch-vertical .b-sch-summarybar .b-timeaxis-tick {\r\n  padding: 0 0.5em;\r\n}\r\n.b-sch-vertical .b-sch-summarybar .b-timeaxis-tick:not(:last-child) {\r\n  border-bottom: 1px solid #d8d9da;\r\n}\r\n\r\n.b-timeaxis-summary-tip {\r\n  display: flex;\r\n  flex-direction: row;\r\n  flex-wrap: wrap;\r\n}\r\n.b-timeaxis-summary-tip header {\r\n  width: 100%;\r\n  text-align: center;\r\n  font-weight: 700;\r\n  margin-bottom: 1em;\r\n}\r\n.b-timeaxis-summary-tip label {\r\n  flex: 1 1 50%;\r\n}\r\n.b-timeaxis-summary-tip .b-timeaxis-summary-value {\r\n  flex: 0 0 auto;\r\n}\r\n\r\n.b-sch-timeaxis-menu-daterange-popup {\r\n  width: 21em;\r\n}\r\n.b-sch-timeaxis-menu-daterange-popup .b-left-nav-btn,\r\n.b-sch-timeaxis-menu-daterange-popup .b-right-nav-btn {\r\n  max-width: 1em;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-float-root > .b-floating.b-interaction-tooltip {\r\n  pointer-events: none;\r\n}\r\n\r\n.b-timeranges-canvas {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: hidden;\r\n}\r\n\r\n.b-sch-timerange {\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  position: absolute;\r\n  left: 0;\r\n  overflow: hidden;\r\n  justify-content: center;\r\n  color: #aaa;\r\n  z-index: 1;\r\n  cursor: pointer;\r\n}\r\n.b-sch-timerange.b-over-resize-handle {\r\n  cursor: ew-resize;\r\n}\r\n.b-timelinebase:not(.b-dragging-timerange) .b-sch-timerange:hover {\r\n  z-index: 3;\r\n}\r\n.b-sch-timerange label {\r\n  font-size: 0.8em;\r\n  color: inherit;\r\n  white-space: nowrap;\r\n  cursor: inherit;\r\n  text-overflow: ellipsis;\r\n  overflow: hidden;\r\n  padding: 0.3em;\r\n}\r\n.b-sch-timerange label i {\r\n  margin-inline-end: 0.5em;\r\n}\r\n.b-sch-foreground-canvas .b-sch-timerange.b-narrow-range label {\r\n  writing-mode: tb;\r\n  padding-inline-start: 1em;\r\n}\r\n\r\n.b-sch-current-time {\r\n  pointer-events: none;\r\n}\r\n\r\n.b-animating .b-sch-timerange {\r\n  transition: transform 0.3s, width 0.3s, height 0.3s;\r\n}\r\n\r\n.b-timeline-subgrid .b-sch-timerange {\r\n  height: 100%;\r\n  align-items: flex-start;\r\n  min-width: 1px;\r\n  color: #aaa;\r\n  font-size: 14px;\r\n}\r\n.b-timeline-subgrid .b-sch-timerange:not(.b-sch-line) label {\r\n  overflow: visible;\r\n}\r\n.b-timeline-subgrid .b-sch-timerange:not(.b-sch-line) label.b-vertical {\r\n  -webkit-writing-mode: vertical-lr;\r\n  writing-mode: vertical-lr;\r\n  -ms-writing-mode: tb-lr;\r\n}\r\n.b-timeline-subgrid .b-sch-timerange.b-sch-line {\r\n  width: 1px;\r\n  overflow: visible;\r\n}\r\n.b-timeline-subgrid .b-sch-timerange.b-sch-line:before {\r\n  display: none;\r\n}\r\n.b-timeline-subgrid .b-sch-range {\r\n  background-color: rgba(240, 240, 240, 0.5);\r\n  pointer-events: none;\r\n}\r\n.b-timeline-subgrid .b-sch-line {\r\n  border-left: 2px dotted #fab005;\r\n  color: #fff;\r\n  padding: 0;\r\n  z-index: 2;\r\n}\r\n.b-timeline-subgrid .b-sch-line label {\r\n  background-color: #fab005;\r\n  padding: 0.3em;\r\n  white-space: nowrap;\r\n}\r\n.b-timeline-subgrid .b-sch-current-time {\r\n  border-left-color: #fa5252;\r\n}\r\n.b-timeline-subgrid .b-sch-current-time label {\r\n  background-color: #fa5252;\r\n}\r\n\r\n.b-timelinebase:not(.b-sch-vertical) .b-timeline-subgrid .b-sch-line {\r\n  flex-direction: column;\r\n  justify-content: flex-start;\r\n  z-index: 6;\r\n}\r\n.b-timelinebase:not(.b-sch-vertical) .b-timeline-subgrid .b-sch-line label {\r\n  margin-top: 0.5em;\r\n}\r\n\r\n.b-sch-vertical .b-sch-timerange {\r\n  left: auto;\r\n  top: 0;\r\n  justify-content: flex-start;\r\n}\r\n.b-sch-vertical .b-sch-timerange label {\r\n  -webkit-writing-mode: vertical-lr;\r\n  writing-mode: vertical-lr;\r\n  -ms-writing-mode: tb-lr;\r\n  transform: rotate(180deg);\r\n}\r\n.b-sch-vertical .b-sch-timerange.b-over-resize-handle {\r\n  cursor: ns-resize;\r\n}\r\n.b-sch-vertical .b-timeline-subgrid .b-sch-timerange {\r\n  height: auto;\r\n  width: 100%;\r\n}\r\n.b-sch-vertical .b-timeline-subgrid .b-sch-line {\r\n  border-top: 2px dotted #fab005;\r\n  color: #fff;\r\n  padding: 0;\r\n  height: 1px;\r\n}\r\n.b-sch-vertical .b-timeline-subgrid .b-sch-line label {\r\n  background-color: #fab005;\r\n  padding: 0.3em;\r\n  white-space: nowrap;\r\n}\r\n\r\n.b-grid-header .b-sch-timerange {\r\n  flex-direction: row;\r\n  justify-content: center;\r\n  bottom: 0;\r\n  background-color: #98c1ff;\r\n  color: #fff;\r\n  line-height: 1;\r\n  padding: 0.5em 0;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n}\r\n.b-grid-header .b-sch-timerange.b-sch-line {\r\n  padding: 0.5em;\r\n  background-color: #fab005;\r\n  z-index: 2;\r\n}\r\n.b-grid-header .b-sch-timerange.b-sch-current-time {\r\n  background-color: #fa5252;\r\n}\r\n.b-grid-header .b-sch-timerange:before {\r\n  margin-inline-end: 0.5em;\r\n}\r\n.b-grid-header .b-sch-timerange label {\r\n  padding: 0;\r\n}\r\n.b-grid-header.b-sch-timeaxiscolumn-levels-1 .b-sch-timerange {\r\n  height: 100%;\r\n}\r\n.b-grid-header.b-sch-timeaxiscolumn-levels-2 .b-sch-timerange {\r\n  height: 50%;\r\n}\r\n.b-grid-header.b-sch-timeaxiscolumn-levels-3 .b-sch-timerange {\r\n  height: 33.3333333333%;\r\n}\r\n.b-grid-header .b-sch-line {\r\n  border-bottom-right-radius: 5px;\r\n  border-top-right-radius: 5px;\r\n}\r\n.b-grid-header .b-sch-line.b-rtl {\r\n  border-bottom-right-radius: 0;\r\n  border-top-right-radius: 0;\r\n  border-bottom-left-radius: 5px;\r\n  border-top-left-radius: 5px;\r\n}\r\n.b-grid-header .b-sch-line.b-sch-timerange-with-headerlabel label {\r\n  left: -2px;\r\n}\r\n\r\n.b-verticaltimeaxiscolumn .b-sch-timerange {\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  right: 0;\r\n  background-color: #98c1ff;\r\n  color: #fff;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n}\r\n.b-verticaltimeaxiscolumn .b-sch-timerange:before {\r\n  margin-bottom: 0.5em;\r\n}\r\n.b-verticaltimeaxiscolumn .b-sch-line {\r\n  border-bottom-left-radius: 5px;\r\n  border-bottom-right-radius: 5px;\r\n}\r\n.b-verticaltimeaxiscolumn .b-sch-line.b-sch-timerange-with-headerlabel label {\r\n  top: -2px;\r\n}\r\n\r\n.b-sch-timeranges-with-headerelements .b-timeline-subgrid .b-sch-range:before {\r\n  display: none;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-sch-timeaxiscolumn .b-selected-time-span,\r\n.b-verticaltimeaxiscolumn .b-selected-time-span {\r\n  background: #3183fe;\r\n  color: #fff;\r\n  justify-content: space-between;\r\n  padding: 0.4em;\r\n  opacity: 1;\r\n}\r\n.b-sch-timeaxiscolumn .b-selected-time-span span,\r\n.b-verticaltimeaxiscolumn .b-selected-time-span span {\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n}\r\n.b-sch-timeaxiscolumn .b-selected-time-span .b-selection-start,\r\n.b-sch-timeaxiscolumn .b-selected-time-span .b-selection-end,\r\n.b-verticaltimeaxiscolumn .b-selected-time-span .b-selection-start,\r\n.b-verticaltimeaxiscolumn .b-selected-time-span .b-selection-end {\r\n  align-self: flex-end;\r\n}\r\n.b-sch-timeaxiscolumn .b-selected-time-span .b-icon-close, .b-sch-timeaxiscolumn .b-selected-time-span .b-popup-close:before,\r\n.b-verticaltimeaxiscolumn .b-selected-time-span .b-icon-close,\r\n.b-verticaltimeaxiscolumn .b-selected-time-span .b-popup-close:before {\r\n  position: absolute;\r\n  top: 0.2em;\r\n  right: 0.4em;\r\n  cursor: pointer;\r\n}\r\n\r\n.b-timelinebase.b-rtl .b-sch-timeaxiscolumn .b-selected-time-span .b-icon-close, .b-timelinebase.b-rtl .b-sch-timeaxiscolumn .b-selected-time-span .b-popup-close:before,\r\n.b-timelinebase.b-rtl .b-verticaltimeaxiscolumn .b-selected-time-span .b-icon-close,\r\n.b-timelinebase.b-rtl .b-verticaltimeaxiscolumn .b-selected-time-span .b-popup-close:before {\r\n  left: 0.4em;\r\n  right: auto;\r\n}\r\n\r\n.b-sch-timeaxiscolumn .b-selected-time-span {\r\n  font-size: 0.7em;\r\n}\r\n\r\n.b-verticaltimeaxiscolumn .b-selected-time-span {\r\n  width: calc(100% - 2em);\r\n}\r\n.b-verticaltimeaxiscolumn .b-selected-time-span span {\r\n  font-size: 0.7em;\r\n}\r\n.b-verticaltimeaxiscolumn .b-selected-time-span .b-icon-close, .b-verticaltimeaxiscolumn .b-selected-time-span .b-popup-close:before {\r\n  left: 0.4em;\r\n}\r\n\r\n.b-grid-header .b-selected-time-span,\r\n.b-timeline-subgrid .b-selected-time-span,\r\n.b-verticaltimeaxiscolumn .b-selected-time-span {\r\n  transition: none;\r\n  z-index: 10;\r\n}\r\n\r\n.b-timeline-subgrid .b-selected-time-span {\r\n  background: rgba(152, 193, 255, 0.2);\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-grid-headers .b-sch-nonworkingtime {\r\n  background-color: rgba(240, 213, 213, 0.3);\r\n  z-index: 0;\r\n  pointer-events: none;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-sch-clockwrap {\r\n  display: flex;\r\n}\r\n.b-sch-clockwrap:not(:first-child) {\r\n  margin-top: 0.3em;\r\n}\r\n\r\n.b-sch-clock {\r\n  position: relative;\r\n  height: 21px;\r\n  width: 21px;\r\n  min-width: 21px;\r\n  white-space: nowrap;\r\n}\r\n.b-sch-clock .b-sch-hour-indicator {\r\n  border-top: 2px solid transparent;\r\n  border-bottom: 6px solid #777;\r\n}\r\n.b-sch-clock .b-sch-minute-indicator {\r\n  border-top: 8px solid #777;\r\n}\r\n.b-sch-clock .b-sch-minute-indicator,\r\n.b-sch-clock .b-sch-hour-indicator {\r\n  position: absolute;\r\n  left: 50%;\r\n  top: 1px;\r\n  width: 2px;\r\n  height: 8px;\r\n  overflow: hidden;\r\n  margin-left: -1px;\r\n  transform-origin: 50% 100%;\r\n}\r\n\r\n.b-sch-clock-hour .b-sch-clock {\r\n  border: 2px solid #feac31;\r\n  background-color: #f8f8f8;\r\n  border-radius: 100%;\r\n}\r\n.b-sch-clock-hour .b-sch-clock-dot {\r\n  position: absolute;\r\n  left: 50%;\r\n  top: 50%;\r\n  width: 4px;\r\n  height: 4px;\r\n  margin-left: -2px;\r\n  margin-top: -2px;\r\n  background: #777;\r\n  border-radius: 3px;\r\n  z-index: 2;\r\n}\r\n\r\n.b-sch-clock-day .b-sch-clock {\r\n  background-color: #f8f8f8;\r\n  border: none;\r\n  border-radius: 2px;\r\n}\r\n.b-sch-clock-day .b-sch-clock .b-sch-hour-indicator {\r\n  width: inherit;\r\n  position: static !important;\r\n  background-color: #feac31;\r\n  border-top-left-radius: 2px;\r\n  border-top-right-radius: 2px;\r\n  font-size: 7px;\r\n  line-height: 8px;\r\n  text-align: center;\r\n  color: #fff;\r\n  height: 9px;\r\n  text-indent: 0;\r\n  margin-top: -1px;\r\n  margin-left: 0;\r\n  border: 0 none;\r\n  transform: none !important;\r\n}\r\n.b-sch-clock-day .b-sch-clock .b-sch-minute-indicator {\r\n  width: inherit;\r\n  color: #555;\r\n  position: static !important;\r\n  height: 16px;\r\n  background-color: transparent;\r\n  font-size: 10px;\r\n  text-align: center;\r\n  text-indent: 0;\r\n  line-height: 12px;\r\n  border: none;\r\n  margin-left: 0;\r\n  transform: none !important;\r\n}\r\n.b-sch-clock-day .b-sch-clock-dot {\r\n  display: none;\r\n}\r\n\r\n.b-sch-clock-text {\r\n  margin-inline-start: 8px;\r\n  padding-top: 1px;\r\n  white-space: nowrap;\r\n  width: 100%;\r\n}\r\n\r\n/*.b-rtl .b-sch-clock-text {\r\n    margin-left  : auto;\r\n    margin-right : 25px;\r\n}*/\r\n.b-sticky-headers .b-grid-header, .b-sticky-headers .b-timeaxis, .b-sticky-headers .b-sticky-header, .b-sticky-headers .b-sch-header-timeaxis-cell {\r\n  overflow: visible;\r\n}\r\n.b-sticky-headers .b-sch-header-text.b-sticky-header {\r\n  position: sticky;\r\n}\r\n.b-sticky-headers .b-horizontaltimeaxis .b-sch-header-text.b-sticky-header {\r\n  left: 0;\r\n  padding-inline-start: 0.75em;\r\n  padding-inline-end: 0.5em;\r\n}\r\n.b-sticky-headers .b-verticaltimeaxis .b-sch-header-text.b-sticky-header {\r\n  top: 0.15em;\r\n}\r\n.b-sticky-headers .b-verticaltimeaxis .b-sch-header-row-0 .b-sch-header-text.b-sticky-header {\r\n  padding-top: 0.5em;\r\n}\r\n.b-sticky-headers .b-verticaltimeaxis .b-sch-header-row.b-lowest .b-sch-header-text.b-sticky-header {\r\n  padding-bottom: 0.5em;\r\n}\r\n\r\nbody:not(.b-using-keyboard) .b-sch-timeaxis-cell:focus, body:not(.b-using-keyboard) .b-sch-timeaxis-cell:focus-within {\r\n  outline: none !important;\r\n}\r\n\r\n.b-sch-header-timeaxis-cell {\r\n  align-items: center;\r\n}\r\n\r\n.b-gridbase:not(.b-column-resizing):not(.b-row-reordering) .b-grid-header-container:not(.b-dragging-header) .b-depth-0:hover, .b-gridbase:not(.b-column-resizing):not(.b-row-reordering) .b-grid-header-container:not(.b-dragging-header) .b-depth-0:focus {\r\n  background: transparent;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-sch-column.b-grid-header {\r\n  padding: 0;\r\n}\r\n\r\n.b-grid-header-container .b-sch-timeaxiscolumn {\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  padding: 0;\r\n  flex-grow: unset !important;\r\n  background-color: #f3f4f5;\r\n  border-inline-end: 0 none;\r\n}\r\n.b-grid-header-container .b-sch-timeaxiscolumn.b-depth-0:hover {\r\n  background-color: #f3f4f5 !important;\r\n}\r\n.b-grid-header-container .b-sch-timeaxiscolumn .b-sch-header-timeaxis-cell:hover {\r\n  background-color: white;\r\n}\r\n\r\n.b-horizontaltimeaxis {\r\n  flex-direction: column;\r\n  flex: 1 0 100%;\r\n}\r\n.b-horizontaltimeaxis .b-sch-header-row {\r\n  flex: 1 0 2em;\r\n}\r\n.b-horizontaltimeaxis .b-sch-header-row.b-sch-header-row-0.b-lowest {\r\n  flex: 1;\r\n}\r\n.b-horizontaltimeaxis .b-sch-header-timeaxis-cell {\r\n  height: 100%;\r\n  border-inline-start: 1px solid #d8d9da;\r\n}\r\n.b-horizontaltimeaxis .b-sch-header-timeaxis-cell:hover {\r\n  cursor: pointer;\r\n  background-color: white;\r\n}\r\n.b-horizontaltimeaxis .b-sch-header-timeaxis-cell.b-last .b-sch-header-text {\r\n  overflow: hidden;\r\n}\r\n\r\n.b-sch-timeaxiscolumn-levels-1 {\r\n  min-height: 1.5em;\r\n}\r\n\r\n.b-sch-timeaxiscolumn-levels-2 {\r\n  min-height: 3em;\r\n}\r\n\r\n.b-sch-timeaxiscolumn-levels-3 {\r\n  min-height: 4.5em;\r\n}\r\n\r\n.b-sch-header-row {\r\n  position: relative;\r\n  contain: strict;\r\n}\r\n.b-sch-header-row:last-child .b-sch-header-timeaxis-cell {\r\n  border-bottom: none;\r\n}\r\n\r\n.b-sch-header-timeaxis-cell {\r\n  display: flex;\r\n  justify-content: center;\r\n  position: absolute;\r\n  color: #667280;\r\n  border-bottom: 1px solid #d8d9da;\r\n  overflow: hidden;\r\n  transition: background-color 0.2s;\r\n  font-size: 0.9em;\r\n  font-weight: 500;\r\n  padding: 0.5em 0 0.5em 0;\r\n  white-space: nowrap;\r\n  contain: strict;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n}\r\n.b-sch-header-timeaxis-cell.b-align-start .b-sch-header-text, .b-sch-header-timeaxis-cell.b-align-end .b-sch-header-text {\r\n  padding-inline-start: 0.75em;\r\n  padding-inline-end: 0.5em;\r\n}\r\n.b-sch-header-timeaxis-cell.b-align-start {\r\n  justify-content: flex-start;\r\n}\r\n.b-sch-header-timeaxis-cell.b-align-end {\r\n  justify-content: flex-end;\r\n}\r\n\r\n.b-schedulerbase.b-fill-last-column .b-sch-timeaxiscolumn:last-child {\r\n  border-inline-end-color: #d8d9da;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-verticaltimeaxiscolumn {\r\n  flex-flow: column nowrap;\r\n  align-items: stretch;\r\n  padding: 0;\r\n  border-inline-end: none;\r\n  background-color: #fbfcfc !important;\r\n}\r\n.b-verticaltimeaxiscolumn.b-grid-cell.b-focused:after {\r\n  display: none;\r\n}\r\n\r\n.b-verticaltimeaxis {\r\n  flex: 1 0 100%;\r\n  contain: strict;\r\n}\r\n.b-verticaltimeaxis .b-sch-header-row {\r\n  flex-direction: column;\r\n  flex: 1;\r\n}\r\n.b-verticaltimeaxis .b-sch-header-timeaxis-cell {\r\n  width: 100%;\r\n  text-transform: uppercase;\r\n  padding: 0;\r\n  border-inline-start: 0 none;\r\n}\r\n.b-verticaltimeaxis .b-sch-header-row.b-lowest .b-sch-header-timeaxis-cell {\r\n  border-inline-end: none;\r\n  border-bottom: none;\r\n  justify-content: flex-end;\r\n  align-items: flex-start;\r\n  contain: unset;\r\n}\r\n.b-verticaltimeaxis .b-sch-header-row.b-lowest .b-sch-header-timeaxis-cell .b-sch-header-text {\r\n  padding-inline-end: 0.5em;\r\n  margin-top: -0.75em;\r\n}\r\n.b-verticaltimeaxis .b-sch-header-row.b-lowest .b-sch-header-timeaxis-cell:hover {\r\n  background-color: #f3f4f5;\r\n}\r\n.b-verticaltimeaxis .b-sch-header-row:not(.b-lowest) {\r\n  flex: 0 0 2em;\r\n}\r\n.b-verticaltimeaxis .b-sch-header-row:not(.b-lowest) .b-sch-header-timeaxis-cell {\r\n  align-items: flex-start;\r\n  border-inline-end: 1px solid #d8d9da;\r\n}\r\n.b-verticaltimeaxis .b-sch-header-row:not(.b-lowest) .b-sch-header-text {\r\n  padding-bottom: 0.75em;\r\n  writing-mode: vertical-lr;\r\n  -ms-writing-mode: tb-lr;\r\n  transform: rotate(180deg);\r\n}\r\n\r\n.b-sch-vertical .b-sticky-headers .b-content-element,\r\n.b-sch-vertical .b-sticky-headers .b-grid-subgrid-locked,\r\n.b-sch-vertical .b-sticky-headers .b-verticaltimeaxis-row,\r\n.b-sch-vertical .b-sticky-headers .b-verticaltimeaxiscolumn,\r\n.b-sch-vertical .b-sticky-headers .b-verticaltimeaxis,\r\n.b-sch-vertical .b-sticky-headers .b-sch-header-row,\r\n.b-sch-vertical .b-sticky-headers .b-sch-header-timeaxis-cell {\r\n  overflow: visible;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-sch-vertical .b-sch-timeaxiscolumn {\r\n  flex-direction: row;\r\n  min-height: 3em;\r\n}\r\n\r\n.b-resourceheader {\r\n  flex: 1;\r\n  position: relative;\r\n  contain: strict;\r\n}\r\n.b-resourceheader.b-has-images {\r\n  min-height: 3em;\r\n}\r\n.b-resourceheader.b-grouped {\r\n  height: 6em;\r\n}\r\n\r\n.b-resourceheader-group-cell {\r\n  position: absolute;\r\n  display: flex;\r\n  align-items: stretch;\r\n  flex-direction: column;\r\n  height: 100%;\r\n}\r\n.b-resourceheader-group-cell > span {\r\n  padding: 0.5em 0;\r\n  display: flex;\r\n  width: 100%;\r\n  justify-content: center;\r\n  align-items: center;\r\n  border-bottom: 1px solid #d8d9da;\r\n  border-inline-end: 1px solid #d8d9da;\r\n}\r\n.b-resourceheader-group-cell .b-resourceheader-group-children {\r\n  position: relative;\r\n  height: 100%;\r\n}\r\n\r\n.b-resourceheader-cell {\r\n  position: absolute;\r\n  height: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  color: #667280;\r\n  border-inline-end: 1px solid #d8d9da;\r\n  overflow: hidden;\r\n  transition: background-color 0.2s;\r\n  font-size: 0.9em;\r\n  font-weight: 500;\r\n  padding: 0.5em;\r\n  white-space: nowrap;\r\n  contain: strict;\r\n  height: 100%;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n}\r\n.b-animating .b-resourceheader-cell {\r\n  transition: width 0.2s, left 0.2s, right 0.2s;\r\n}\r\n.b-resourceheader-cell:hover {\r\n  cursor: pointer;\r\n  background-color: white;\r\n}\r\n.b-resourceheader-cell.b-align-start, .b-resourceheader-cell.b-align-end {\r\n  padding-inline: 0.3em;\r\n}\r\n.b-resourceheader-cell.b-align-start {\r\n  justify-content: flex-start;\r\n}\r\n.b-resourceheader-cell.b-align-end {\r\n  justify-content: flex-end;\r\n}\r\n.b-resourceheader-cell i {\r\n  margin-inline-end: 0.5em;\r\n}\r\n.b-resourceheader-cell .b-resource-name {\r\n  overflow: hidden;\r\n}\r\n.b-resourceheader-cell .b-resource-avatar {\r\n  margin-inline-end: 1em;\r\n}\r\n\r\n.b-recurrenceconfirmationpopup.b-popup {\r\n  width: 29em;\r\n  max-width: none;\r\n}\r\n.b-recurrenceconfirmationpopup.b-popup .b-recurrenceconfirmationpopup-header,\r\n.b-recurrenceconfirmationpopup.b-popup .b-recurrenceconfirmationpopup-content {\r\n  padding: 0.65em;\r\n}\r\n.b-recurrenceconfirmationpopup.b-popup .b-bottom-toolbar > button {\r\n  margin-inline-end: 0.5em;\r\n}\r\n.b-recurrenceconfirmationpopup.b-popup .b-bottom-toolbar > button:last-child {\r\n  margin-inline-end: 0;\r\n}\r\n\r\nbutton.b-button.b-recurrencelegendbutton {\r\n  /* allow lines wrapping for the button since recurrence legend might be a long string */\r\n  white-space: normal;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-recurrenceeditor.b-panel .b-recurrenceeditorpanel-content.b-panel-content {\r\n  padding: 0;\r\n}\r\n.b-recurrenceeditor.b-panel .b-recurrenceeditorpanel-content.b-panel-content .b-field label.b-align-start {\r\n  flex: 1 0 10.4em;\r\n}\r\n.b-recurrenceeditor.b-panel .b-recurrenceeditorpanel-content.b-panel-content .b-recurrencepositionscombo {\r\n  flex: none;\r\n  width: 9.6em;\r\n}\r\n.b-recurrenceeditor.b-panel .b-recurrenceeditorpanel-content.b-panel-content .b-recurrencedayscombo {\r\n  margin-inline-end: 0.5em;\r\n}\r\n.b-recurrenceeditor.b-panel .b-bottom-toolbar .b-label-filler {\r\n  width: 10.8em;\r\n}\r\n.b-recurrenceeditor.b-panel .b-bottom-toolbar > button {\r\n  flex: 1;\r\n  margin-inline-end: 0.5em;\r\n}\r\n.b-recurrenceeditor.b-panel .b-bottom-toolbar > button:last-child {\r\n  margin-inline-end: 0;\r\n}\r\n\r\n.b-schedulerpro-taskeditor .b-recurrenceeditor .b-buttongroup {\r\n  font-size: 0.8em;\r\n}\r\n\r\n.b-datepicker .b-icon-circle {\r\n  font-size: 50%;\r\n  color: #3183fe;\r\n  margin-top: 1px;\r\n}\r\n.b-datepicker .b-selected-date .b-icon-circle {\r\n  color: #fff;\r\n}\r\n.b-datepicker .b-cell-events-badge {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 50%;\r\n  font-size: 80%;\r\n  background-color: #e53f2c;\r\n  color: #fff;\r\n  width: 1.3em;\r\n  height: 1.3em;\r\n}\r\n\r\n.b-datepicker-with-events .b-calendar-weekdays {\r\n  padding-bottom: 4px;\r\n}\r\n.b-datepicker-with-events .b-calendar-week .b-calendar-cell {\r\n  margin: 1px 1px;\r\n  justify-content: flex-start;\r\n}\r\n.b-datepicker-with-events .b-calendar-week .b-calendar-cell .b-datepicker-cell-inner {\r\n  margin-bottom: 0.55em;\r\n}\r\n\r\n.b-resourcecombo .b-resource-icon {\r\n  display: none;\r\n  margin-inline: 0.5em 0;\r\n}\r\n.b-resourcecombo.b-show-event-color:not(.b-uses-chipview) .b-resource-icon {\r\n  display: block;\r\n}\r\n\r\n.b-resourcecombo-picker .b-icon, .b-resourcecombo-picker .b-icon-version {\r\n  display: none;\r\n  margin-inline-end: 0.5em;\r\n}\r\n.b-resourcecombo-picker.b-show-event-color .b-icon, .b-resourcecombo-picker.b-show-event-color .b-icon-version {\r\n  display: block;\r\n}\r\n.b-resourcecombo-picker.b-show-event-color .b-selected .b-icon-square:before {\r\n  content: "\\f14a";\r\n}\r\n\r\n.b-theme-material .b-resourcecombo .b-resource-icon {\r\n  margin-inline: 0 0.5em;\r\n}\r\n\r\n.b-resourcefilter .b-list-item {\r\n  border: 0 none;\r\n  border-radius: 0;\r\n}\r\n.b-resourcefilter .b-icon, .b-resourcefilter .b-icon-version {\r\n  visibility: visible !important;\r\n}\r\n.b-resourcefilter .b-icon:before, .b-resourcefilter .b-icon-version:before {\r\n  content: "\\f0c8";\r\n  opacity: 0.6;\r\n}\r\n.b-resourcefilter .b-selected .b-icon:before, .b-resourcefilter .b-selected .b-icon-version:before {\r\n  content: "\\f14a";\r\n  opacity: 1;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-sch-red {\r\n  background-color: #e53f2c;\r\n}\r\n\r\n.b-sch-foreground-red {\r\n  color: #e53f2c;\r\n}\r\n\r\n.b-sch-pink {\r\n  background-color: #fe3183;\r\n}\r\n\r\n.b-sch-foreground-pink {\r\n  color: #fe3183;\r\n}\r\n\r\n.b-sch-purple {\r\n  background-color: #fe31ea;\r\n}\r\n\r\n.b-sch-foreground-purple {\r\n  color: #fe31ea;\r\n}\r\n\r\n.b-sch-violet {\r\n  background-color: #ac31fe;\r\n}\r\n\r\n.b-sch-foreground-violet {\r\n  color: #ac31fe;\r\n}\r\n\r\n.b-sch-indigo {\r\n  background-color: #4531fe;\r\n}\r\n\r\n.b-sch-foreground-indigo {\r\n  color: #4531fe;\r\n}\r\n\r\n.b-sch-blue {\r\n  background-color: #3183fe;\r\n}\r\n\r\n.b-sch-foreground-blue {\r\n  color: #3183fe;\r\n}\r\n\r\n.b-sch-cyan {\r\n  background-color: #31e9fe;\r\n}\r\n\r\n.b-sch-foreground-cyan {\r\n  color: #31e9fe;\r\n}\r\n\r\n.b-sch-magenta {\r\n  background-color: #ff00ff;\r\n}\r\n\r\n.b-sch-foreground-magenta {\r\n  color: #ff00ff;\r\n}\r\n\r\n.b-sch-teal {\r\n  background-color: #31feac;\r\n}\r\n\r\n.b-sch-foreground-teal {\r\n  color: #31feac;\r\n}\r\n\r\n.b-sch-green {\r\n  background-color: #27ca37;\r\n}\r\n\r\n.b-sch-foreground-green {\r\n  color: #27ca37;\r\n}\r\n\r\n.b-sch-lime {\r\n  background-color: #76e62c;\r\n}\r\n\r\n.b-sch-foreground-lime {\r\n  color: #76e62c;\r\n}\r\n\r\n.b-sch-yellow {\r\n  background-color: #FFEB3B;\r\n}\r\n\r\n.b-sch-foreground-yellow {\r\n  color: #FFEB3B;\r\n}\r\n\r\n.b-sch-orange {\r\n  background-color: #feac31;\r\n}\r\n\r\n.b-sch-foreground-orange {\r\n  color: #feac31;\r\n}\r\n\r\n.b-sch-deep-orange {\r\n  background-color: #ff7043;\r\n}\r\n\r\n.b-sch-foreground-deep-orange {\r\n  color: #ff7043;\r\n}\r\n\r\n.b-sch-gray {\r\n  background-color: #a0a0a0;\r\n}\r\n\r\n.b-sch-foreground-gray {\r\n  color: #a0a0a0;\r\n}\r\n\r\n.b-sch-gantt-green {\r\n  background-color: #8ee997;\r\n}\r\n\r\n.b-sch-foreground-gantt-green {\r\n  color: #8ee997;\r\n}\r\n\r\n.b-sch-color-red {\r\n  --event-primary-color-h: 6.1621621622deg;\r\n  --event-primary-color-s: 78.05907173%;\r\n  --event-primary-color-l: 53.5294117647%;\r\n}\r\n\r\n.b-sch-color-pink {\r\n  --event-primary-color-h: 336deg;\r\n  --event-primary-color-s: 99.0338164251%;\r\n  --event-primary-color-l: 59.4117647059%;\r\n}\r\n\r\n.b-sch-color-purple {\r\n  --event-primary-color-h: 305.8536585366deg;\r\n  --event-primary-color-s: 99.0338164251%;\r\n  --event-primary-color-l: 59.4117647059%;\r\n}\r\n\r\n.b-sch-color-violet {\r\n  --event-primary-color-h: 276deg;\r\n  --event-primary-color-s: 99.0338164251%;\r\n  --event-primary-color-l: 59.4117647059%;\r\n}\r\n\r\n.b-sch-color-indigo {\r\n  --event-primary-color-h: 245.8536585366deg;\r\n  --event-primary-color-s: 99.0338164251%;\r\n  --event-primary-color-l: 59.4117647059%;\r\n}\r\n\r\n.b-sch-color-blue {\r\n  --event-primary-color-h: 216deg;\r\n  --event-primary-color-s: 99.0338164251%;\r\n  --event-primary-color-l: 59.4117647059%;\r\n}\r\n\r\n.b-sch-color-cyan {\r\n  --event-primary-color-h: 186.1463414634deg;\r\n  --event-primary-color-s: 99.0338164251%;\r\n  --event-primary-color-l: 59.4117647059%;\r\n}\r\n\r\n.b-sch-color-teal {\r\n  --event-primary-color-h: 156deg;\r\n  --event-primary-color-s: 99.0338164251%;\r\n  --event-primary-color-l: 59.4117647059%;\r\n}\r\n\r\n.b-sch-color-green {\r\n  --event-primary-color-h: 125.8895705521deg;\r\n  --event-primary-color-s: 67.6348547718%;\r\n  --event-primary-color-l: 47.2549019608%;\r\n}\r\n\r\n.b-sch-color-lime {\r\n  --event-primary-color-h: 96.1290322581deg;\r\n  --event-primary-color-s: 78.813559322%;\r\n  --event-primary-color-l: 53.7254901961%;\r\n}\r\n\r\n.b-sch-color-yellow {\r\n  --event-primary-color-h: 53.8775510204deg;\r\n  --event-primary-color-s: 100%;\r\n  --event-primary-color-l: 61.568627451%;\r\n}\r\n\r\n.b-sch-color-orange {\r\n  --event-primary-color-h: 36deg;\r\n  --event-primary-color-s: 99.0338164251%;\r\n  --event-primary-color-l: 59.4117647059%;\r\n}\r\n\r\n.b-sch-color-deep-orange {\r\n  --event-primary-color-h: 14.3617021277deg;\r\n  --event-primary-color-s: 100%;\r\n  --event-primary-color-l: 63.137254902%;\r\n}\r\n\r\n.b-sch-color-gray {\r\n  --event-primary-color-h: 0deg;\r\n  --event-primary-color-s: 0%;\r\n  --event-primary-color-l: 62.7450980392%;\r\n}\r\n\r\n.b-sch-color-gantt-green {\r\n  --event-primary-color-h: 125.9340659341deg;\r\n  --event-primary-color-s: 67.4074074074%;\r\n  --event-primary-color-l: 73.5294117647%;\r\n}\r\n\r\n.b-sch-style-interday > .b-sch-event,\r\n.b-sch-style-interday > .b-sch-event > .b-sch-event-segments > .b-sch-event,\r\n.b-sch-style-plain > .b-sch-event,\r\n.b-sch-style-plain > .b-sch-event > .b-sch-event-segments > .b-sch-event {\r\n  --event-s-factor: 1;\r\n  --event-l-factor: 1;\r\n  --event-hover-s-factor: 1.3;\r\n  --event-hover-l-factor: 0.6;\r\n  --event-selected-hover-s-factor: 1.4;\r\n  --event-selected-hover-l-factor: 0.55;\r\n}\r\n\r\n.b-sch-style-interday .b-sch-event {\r\n  opacity: 0.8;\r\n  border-radius: 3px;\r\n}\r\n.b-sch-style-interday .b-sch-event-content {\r\n  font-weight: 400;\r\n}\r\n\r\n.b-sch-style-plain.b-sch-custom-color > .b-sch-event:not(.b-milestone) {\r\n  background-color: currentColor;\r\n}\r\n.b-sch-style-plain.b-sch-custom-color > .b-sch-event:not(.b-milestone):hover, .b-sch-style-plain.b-sch-custom-color > .b-sch-event:not(.b-milestone).b-sch-event-selected, .b-sch-style-plain.b-sch-custom-color > .b-sch-event:not(.b-milestone).b-sch-event-selected:hover {\r\n  background-color: currentColor;\r\n  background-image: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1));\r\n}\r\n.b-sch-style-plain.b-sch-custom-color > .b-sch-event:not(.b-milestone) > .b-sch-event-content {\r\n  color: #fff;\r\n}\r\n.b-sch-style-plain.b-sch-custom-color > .b-sch-event.b-milestone .b-sch-event-content::before {\r\n  background-color: currentColor;\r\n}\r\n.b-sch-style-plain.b-sch-custom-color > .b-sch-event.b-milestone:hover .b-sch-event-content::before, .b-sch-style-plain.b-sch-custom-color > .b-sch-event.b-milestone.b-sch-event-selected .b-sch-event-content::before, .b-sch-style-plain.b-sch-custom-color > .b-sch-event.b-milestone.b-sch-event-selected:hover .b-sch-event-content::before {\r\n  background-image: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1));\r\n}\r\n\r\n.b-sch-layout-milestone-text-position-inside .b-sch-event-wrap.b-milestone-wrap {\r\n  display: flex;\r\n}\r\n.b-sch-layout-milestone-text-position-inside .b-sch-event-wrap.b-milestone-wrap .b-milestone {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n.b-sch-layout-milestone-text-position-inside .b-sch-event-wrap.b-milestone-wrap .b-milestone label {\r\n  position: absolute;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  color: inherit;\r\n}\r\n\r\n.b-sch-style-border > .b-sch-event,\r\n.b-sch-style-border > .b-sch-event > .b-sch-event-segments > .b-sch-event {\r\n  --event-border-color: hsl(\r\n          var(--event-background-h),\r\n          var(--event-background-s),\r\n          calc(var(--event-background-l) * 0.7)\r\n  );\r\n  --event-hover-color: #fff;\r\n  --event-hover-l-factor: 0.7;\r\n  --event-selected-hover-l-factor: 0.6;\r\n  --event-border-style: solid;\r\n  --event-border-radius: 3px;\r\n  --event-border-width: 1px;\r\n  --event-opacity: .8;\r\n  --event-hover-opacity: 1;\r\n}\r\n\r\n.b-schedulerbase.b-sch-layout-milestones .b-sch-event-wrap.b-sch-style-border > .b-sch-event.b-milestone > .b-sch-event-content {\r\n  font-size: 11px;\r\n}\r\n\r\n.b-sch-style-border.b-sch-custom-color > .b-sch-event:not(.b-milestone) {\r\n  background-color: currentColor;\r\n  background-image: linear-gradient(rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.2));\r\n  border-color: currentColor;\r\n}\r\n.b-sch-style-border.b-sch-custom-color > .b-sch-event:not(.b-milestone) .b-sch-event-content {\r\n  color: #fff;\r\n}\r\n.b-sch-style-border.b-sch-custom-color > .b-sch-event:not(.b-milestone):hover, .b-sch-style-border.b-sch-custom-color > .b-sch-event:not(.b-milestone).b-sch-event-resizing, .b-sch-style-border.b-sch-custom-color > .b-sch-event:not(.b-milestone).b-sch-event-selected, .b-sch-style-border.b-sch-custom-color > .b-sch-event:not(.b-milestone).b-sch-event-selected:hover {\r\n  background-color: currentColor;\r\n  background-image: none;\r\n  border-color: currentColor;\r\n}\r\n.b-sch-style-border.b-sch-custom-color > .b-sch-event.b-milestone .b-sch-event-content::before {\r\n  background-color: currentColor;\r\n  background-image: linear-gradient(rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.2));\r\n  border-color: currentColor;\r\n}\r\n\r\n.b-sch-style-hollow > .b-sch-event,\r\n.b-sch-style-hollow > .b-sch-event > .b-sch-event-segments > .b-sch-event {\r\n  --event-s-factor: 0;\r\n  --event-l-factor: 2;\r\n  --event-a: 0.2;\r\n  --event-hover-s-factor: 1;\r\n  --event-hover-l-factor: 1;\r\n  --event-hover-a: 1;\r\n  --event-selected-hover-l-factor: 0.8;\r\n  --event-color: var(--event-primary-color);\r\n  --event-hover-color: #fff;\r\n  --event-border-width: 2px;\r\n  --event-border-radius: 3px;\r\n  --event-opacity: .8;\r\n}\r\n\r\n.b-schedulerbase.b-sch-layout-milestones .b-sch-event-wrap.b-sch-style-hollow > .b-sch-event.b-milestone > .b-sch-event-content {\r\n  font-size: 11px;\r\n  font-weight: 600;\r\n}\r\n\r\n.b-sch-style-hollow.b-sch-custom-color > .b-sch-event {\r\n  border-color: currentColor;\r\n}\r\n.b-sch-style-hollow.b-sch-custom-color > .b-sch-event:not(.b-milestone):hover, .b-sch-style-hollow.b-sch-custom-color > .b-sch-event:not(.b-milestone).b-sch-event-selected, .b-sch-style-hollow.b-sch-custom-color > .b-sch-event:not(.b-milestone).b-sch-event-resizing, .b-sch-style-hollow.b-sch-custom-color > .b-sch-event:not(.b-milestone).b-sch-event-selected:hover {\r\n  background-color: currentColor;\r\n}\r\n.b-sch-style-hollow.b-sch-custom-color > .b-sch-event:not(.b-milestone):hover .b-sch-event-content, .b-sch-style-hollow.b-sch-custom-color > .b-sch-event:not(.b-milestone).b-sch-event-selected .b-sch-event-content, .b-sch-style-hollow.b-sch-custom-color > .b-sch-event:not(.b-milestone).b-sch-event-resizing .b-sch-event-content, .b-sch-style-hollow.b-sch-custom-color > .b-sch-event:not(.b-milestone).b-sch-event-selected:hover .b-sch-event-content {\r\n  color: #fff;\r\n}\r\n.b-sch-style-hollow.b-sch-custom-color > .b-sch-event.b-milestone .b-sch-event-content::before {\r\n  background-color: rgba(255, 255, 255, 0.5);\r\n}\r\n.b-sch-style-hollow.b-sch-custom-color > .b-sch-event.b-milestone:hover .b-sch-event-content::before, .b-sch-style-hollow.b-sch-custom-color > .b-sch-event.b-milestone.b-sch-event-selected .b-sch-event-content::before, .b-sch-style-hollow.b-sch-custom-color > .b-sch-event.b-milestone.b-sch-event-resizing .b-sch-event-content::before, .b-sch-style-hollow.b-sch-custom-color > .b-sch-event.b-milestone.b-sch-event-selected:hover .b-sch-event-content::before {\r\n  background-color: currentColor;\r\n}\r\n\r\n.b-sch-style-calendar.b-sch-event-wrap > .b-sch-event,\r\n.b-sch-style-calendar.b-sch-event-wrap > .b-sch-event > .b-sch-event-segments > .b-sch-event,\r\n.b-sch-style-colored.b-sch-event-wrap > .b-sch-event,\r\n.b-sch-style-colored.b-sch-event-wrap > .b-sch-event > .b-sch-event-segments > .b-sch-event {\r\n  --event-background-l: 90%;\r\n  --event-border-width: 3px;\r\n  --event-color: hsl(var(--event-primary-color-h), var(--event-primary-color-s), calc(var(--event-primary-color-l) * 0.8));\r\n  --event-border-color: hsl(var(--event-primary-color-h), var(--event-primary-color-s), calc(var(--event-primary-color-l) * 0.9));\r\n  --event-opacity: 0.8;\r\n  --event-selected-hover-l-factor: 0.8;\r\n}\r\n.b-sch-style-calendar.b-sch-event-wrap > .b-sch-event:hover,\r\n.b-sch-style-calendar.b-sch-event-wrap > .b-sch-event > .b-sch-event-segments > .b-sch-event:hover,\r\n.b-sch-style-colored.b-sch-event-wrap > .b-sch-event:hover,\r\n.b-sch-style-colored.b-sch-event-wrap > .b-sch-event > .b-sch-event-segments > .b-sch-event:hover {\r\n  --event-background-l: 85%;\r\n}\r\n.b-sch-style-calendar.b-sch-event-wrap > .b-sch-event.b-sch-event-selected,\r\n.b-sch-style-calendar.b-sch-event-wrap > .b-sch-event > .b-sch-event-segments > .b-sch-event.b-sch-event-selected,\r\n.b-sch-style-colored.b-sch-event-wrap > .b-sch-event.b-sch-event-selected,\r\n.b-sch-style-colored.b-sch-event-wrap > .b-sch-event > .b-sch-event-segments > .b-sch-event.b-sch-event-selected {\r\n  --event-background-l: var(--event-primary-color-l);\r\n  --event-color: #fff;\r\n}\r\n.b-sch-style-calendar.b-sch-event-wrap > .b-sch-event:not(.b-milestone),\r\n.b-sch-style-calendar.b-sch-event-wrap > .b-sch-event > .b-sch-event-segments > .b-sch-event:not(.b-milestone),\r\n.b-sch-style-colored.b-sch-event-wrap > .b-sch-event:not(.b-milestone),\r\n.b-sch-style-colored.b-sch-event-wrap > .b-sch-event > .b-sch-event-segments > .b-sch-event:not(.b-milestone) {\r\n  border-block-width: 0;\r\n  border-inline-end-width: 0;\r\n}\r\n.b-schedulerbase.b-sch-layout-milestones .b-sch-style-calendar.b-sch-event-wrap > .b-sch-event.b-milestone,\r\n.b-schedulerbase.b-sch-layout-milestones .b-sch-style-calendar.b-sch-event-wrap > .b-sch-event > .b-sch-event-segments > .b-sch-event.b-milestone,\r\n.b-schedulerbase.b-sch-layout-milestones .b-sch-style-colored.b-sch-event-wrap > .b-sch-event.b-milestone,\r\n.b-schedulerbase.b-sch-layout-milestones .b-sch-style-colored.b-sch-event-wrap > .b-sch-event > .b-sch-event-segments > .b-sch-event.b-milestone {\r\n  --event-border-width: 0px;\r\n}\r\n.b-schedulerbase.b-sch-layout-milestones .b-sch-style-calendar.b-sch-event-wrap > .b-sch-event.b-milestone::before,\r\n.b-schedulerbase.b-sch-layout-milestones .b-sch-style-calendar.b-sch-event-wrap > .b-sch-event > .b-sch-event-segments > .b-sch-event.b-milestone::before,\r\n.b-schedulerbase.b-sch-layout-milestones .b-sch-style-colored.b-sch-event-wrap > .b-sch-event.b-milestone::before,\r\n.b-schedulerbase.b-sch-layout-milestones .b-sch-style-colored.b-sch-event-wrap > .b-sch-event > .b-sch-event-segments > .b-sch-event.b-milestone::before {\r\n  --event-border-width: 3px;\r\n}\r\n.b-sch-vertical .b-sch-style-calendar.b-sch-event-wrap > .b-sch-event:not(.b-milestone),\r\n.b-sch-vertical .b-sch-style-calendar.b-sch-event-wrap > .b-sch-event > .b-sch-event-segments > .b-sch-event:not(.b-milestone),\r\n.b-sch-vertical .b-sch-style-colored.b-sch-event-wrap > .b-sch-event:not(.b-milestone),\r\n.b-sch-vertical .b-sch-style-colored.b-sch-event-wrap > .b-sch-event > .b-sch-event-segments > .b-sch-event:not(.b-milestone) {\r\n  border-top-width: 3px;\r\n  border-inline-width: 0;\r\n}\r\n\r\n.b-sch-style-colored.b-sch-custom-color > .b-sch-event {\r\n  border-color: currentColor;\r\n}\r\n.b-sch-style-colored.b-sch-custom-color > .b-sch-event:not(.b-milestone) {\r\n  background-color: currentColor;\r\n  background-image: linear-gradient(rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0.8));\r\n}\r\n.b-sch-style-colored.b-sch-custom-color > .b-sch-event:not(.b-milestone):hover, .b-sch-style-colored.b-sch-custom-color > .b-sch-event:not(.b-milestone).b-sch-event-resizing, .b-sch-style-colored.b-sch-custom-color > .b-sch-event:not(.b-milestone).b-sch-event-selected {\r\n  background-color: currentColor;\r\n  background-image: linear-gradient(rgba(255, 255, 255, 0.4), rgba(255, 255, 255, 0.4));\r\n}\r\n.b-sch-style-colored.b-sch-custom-color > .b-sch-event:not(.b-milestone):hover .b-sch-event-content, .b-sch-style-colored.b-sch-custom-color > .b-sch-event:not(.b-milestone).b-sch-event-resizing .b-sch-event-content, .b-sch-style-colored.b-sch-custom-color > .b-sch-event:not(.b-milestone).b-sch-event-selected .b-sch-event-content {\r\n  color: #fff;\r\n}\r\n.b-sch-style-colored.b-sch-custom-color > .b-sch-event:not(.b-milestone).b-sch-event-selected, .b-sch-style-colored.b-sch-custom-color > .b-sch-event:not(.b-milestone).b-sch-event-selected:hover {\r\n  background-color: currentColor;\r\n  background-image: none;\r\n}\r\n.b-sch-style-colored.b-sch-custom-color > .b-sch-event.b-milestone .b-sch-event-content::before {\r\n  background-color: currentColor;\r\n  background-image: linear-gradient(rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0.8));\r\n}\r\n.b-sch-style-colored.b-sch-custom-color > .b-sch-event.b-milestone:hover .b-sch-event-content::before, .b-sch-style-colored.b-sch-custom-color > .b-sch-event.b-milestone.b-sch-event-resizing .b-sch-event-content::before, .b-sch-style-colored.b-sch-custom-color > .b-sch-event.b-milestone.b-sch-event-selected .b-sch-event-content::before {\r\n  background-image: linear-gradient(rgba(255, 255, 255, 0.4), rgba(255, 255, 255, 0.4));\r\n}\r\n.b-sch-style-colored.b-sch-custom-color > .b-sch-event.b-milestone.b-sch-event-selected .b-sch-event-content::before, .b-sch-style-colored.b-sch-custom-color > .b-sch-event.b-milestone.b-sch-event-selected:hover .b-sch-event-content::before {\r\n  background-image: none;\r\n}\r\n\r\n.b-sch-style-calendar.b-sch-event-wrap > .b-sch-event, .b-sch-style-calendar.b-sch-event-wrap > .b-sch-event > .b-sch-event-segments > .b-sch-event {\r\n  --event-background-l: 97%;\r\n  --event-selected-hover-l-factor: 1;\r\n  opacity: 1;\r\n}\r\n.b-sch-style-calendar.b-sch-event-wrap > .b-sch-event:hover, .b-sch-style-calendar.b-sch-event-wrap > .b-sch-event > .b-sch-event-segments > .b-sch-event:hover {\r\n  --event-background-l: 89%;\r\n}\r\n.b-sch-style-calendar.b-sch-event-wrap > .b-sch-event.b-sch-event-selected, .b-sch-style-calendar.b-sch-event-wrap > .b-sch-event > .b-sch-event-segments > .b-sch-event.b-sch-event-selected {\r\n  --event-background-l: 84%;\r\n}\r\n.b-sch-style-calendar.b-sch-event-wrap > .b-sch-event.b-sch-event-selected .b-sch-event-content *, .b-sch-style-calendar.b-sch-event-wrap > .b-sch-event > .b-sch-event-segments > .b-sch-event.b-sch-event-selected .b-sch-event-content * {\r\n  font-weight: 400;\r\n}\r\n.b-sch-style-calendar.b-sch-event-wrap > .b-sch-event .b-sch-event-content *, .b-sch-style-calendar.b-sch-event-wrap > .b-sch-event > .b-sch-event-segments > .b-sch-event .b-sch-event-content * {\r\n  font-weight: 400;\r\n  color: #606060;\r\n}\r\n.b-sch-style-calendar.b-sch-event-wrap > .b-sch-event.b-sch-event-selected .b-sch-event-content *, .b-sch-style-calendar.b-sch-event-wrap > .b-sch-event > .b-sch-event-segments > .b-sch-event.b-sch-event-selected .b-sch-event-content * {\r\n  color: #606060;\r\n}\r\n.b-sch-style-calendar.b-sch-event-wrap > .b-sch-event:not(.b-milestone) .b-sch-event-content, .b-sch-style-calendar.b-sch-event-wrap > .b-sch-event > .b-sch-event-segments > .b-sch-event:not(.b-milestone) .b-sch-event-content {\r\n  margin: 0;\r\n  padding: 0.3em;\r\n}\r\n\r\n.b-sch-event-wrap.b-sch-style-line > .b-sch-event,\r\n.b-sch-event-wrap.b-sch-style-line > .b-sch-event > .b-sch-event-segments > .b-sch-event {\r\n  --event-background-color: transparent;\r\n  --event-border-color: hsl(var(--event-primary-color-h), var(--event-primary-color-s), calc(var(--event-primary-color-l) * var(--event-l-factor)));\r\n  --event-color: #777;\r\n  --event-hover-color: #777;\r\n  --event-border-width: 5px;\r\n  --event-hover-l-factor: 0.8;\r\n  --event-selected-hover-l-factor: 0.7;\r\n  justify-content: center;\r\n  overflow: visible;\r\n  height: auto !important;\r\n}\r\n.b-sch-event-wrap.b-sch-style-line > .b-sch-event .b-sch-event-content,\r\n.b-sch-event-wrap.b-sch-style-line > .b-sch-event > .b-sch-event-segments > .b-sch-event .b-sch-event-content {\r\n  padding: 0;\r\n}\r\n.b-sch-event-wrap.b-sch-style-line > .b-sch-event.b-active,\r\n.b-sch-event-wrap.b-sch-style-line > .b-sch-event > .b-sch-event-segments > .b-sch-event.b-active {\r\n  outline-offset: 5px;\r\n}\r\n.b-sch-event-wrap.b-sch-style-line > .b-sch-event:not(.b-milestone),\r\n.b-sch-event-wrap.b-sch-style-line > .b-sch-event > .b-sch-event-segments > .b-sch-event:not(.b-milestone) {\r\n  align-self: center;\r\n}\r\n.b-sch-event-wrap.b-sch-style-line > .b-sch-event:not(.b-milestone)::before, .b-sch-event-wrap.b-sch-style-line > .b-sch-event:not(.b-milestone)::after,\r\n.b-sch-event-wrap.b-sch-style-line > .b-sch-event > .b-sch-event-segments > .b-sch-event:not(.b-milestone)::before,\r\n.b-sch-event-wrap.b-sch-style-line > .b-sch-event > .b-sch-event-segments > .b-sch-event:not(.b-milestone)::after {\r\n  content: "";\r\n  border-color: inherit;\r\n  border-style: solid;\r\n  border-width: 0;\r\n  position: absolute;\r\n  border-radius: 2px;\r\n  --handle-width: unset;\r\n  --handle-height: unset;\r\n  --handle-inset: unset;\r\n  --handle-opacity: unset;\r\n  --clip-path: unset;\r\n}\r\n.b-sch-horizontal .b-sch-event-wrap.b-sch-style-line > .b-sch-event:not(.b-milestone)::before, .b-sch-horizontal .b-sch-event-wrap.b-sch-style-line > .b-sch-event:not(.b-milestone)::after,\r\n.b-sch-horizontal .b-sch-event-wrap.b-sch-style-line > .b-sch-event > .b-sch-event-segments > .b-sch-event:not(.b-milestone)::before,\r\n.b-sch-horizontal .b-sch-event-wrap.b-sch-style-line > .b-sch-event > .b-sch-event-segments > .b-sch-event:not(.b-milestone)::after {\r\n  top: -9px;\r\n  height: 13px;\r\n  border-inline-start-width: 5px;\r\n}\r\n.b-sch-vertical .b-sch-event-wrap.b-sch-style-line > .b-sch-event:not(.b-milestone)::before, .b-sch-vertical .b-sch-event-wrap.b-sch-style-line > .b-sch-event:not(.b-milestone)::after,\r\n.b-sch-vertical .b-sch-event-wrap.b-sch-style-line > .b-sch-event > .b-sch-event-segments > .b-sch-event:not(.b-milestone)::before,\r\n.b-sch-vertical .b-sch-event-wrap.b-sch-style-line > .b-sch-event > .b-sch-event-segments > .b-sch-event:not(.b-milestone)::after {\r\n  left: -9px;\r\n  width: 13px;\r\n  border-top-width: 5px;\r\n}\r\n.b-sch-horizontal .b-sch-event-wrap.b-sch-style-line > .b-sch-event:not(.b-milestone)::before,\r\n.b-sch-horizontal .b-sch-event-wrap.b-sch-style-line > .b-sch-event > .b-sch-event-segments > .b-sch-event:not(.b-milestone)::before {\r\n  left: 0;\r\n}\r\n.b-sch-vertical .b-sch-event-wrap.b-sch-style-line > .b-sch-event:not(.b-milestone)::before,\r\n.b-sch-vertical .b-sch-event-wrap.b-sch-style-line > .b-sch-event > .b-sch-event-segments > .b-sch-event:not(.b-milestone)::before {\r\n  border-inline-start-width: 5px;\r\n  top: 0;\r\n}\r\n.b-sch-horizontal .b-sch-event-wrap.b-sch-style-line > .b-sch-event:not(.b-milestone)::after,\r\n.b-sch-horizontal .b-sch-event-wrap.b-sch-style-line > .b-sch-event > .b-sch-event-segments > .b-sch-event:not(.b-milestone)::after {\r\n  top: -9px;\r\n  right: 0;\r\n  height: 13px;\r\n}\r\n.b-sch-vertical .b-sch-event-wrap.b-sch-style-line > .b-sch-event:not(.b-milestone)::after,\r\n.b-sch-vertical .b-sch-event-wrap.b-sch-style-line > .b-sch-event > .b-sch-event-segments > .b-sch-event:not(.b-milestone)::after {\r\n  bottom: 0;\r\n}\r\n.b-sch-event-wrap.b-sch-style-line > .b-sch-event.b-milestone,\r\n.b-sch-event-wrap.b-sch-style-line > .b-sch-event > .b-sch-event-segments > .b-sch-event.b-milestone {\r\n  top: initial;\r\n}\r\n\r\n.b-sch-style-line.b-sch-custom-color > .b-sch-event {\r\n  border-color: currentColor;\r\n  opacity: 0.8;\r\n}\r\n.b-sch-style-line.b-sch-custom-color > .b-sch-event:hover, .b-sch-style-line.b-sch-custom-color > .b-sch-event.b-sch-event-selected, .b-sch-style-line.b-sch-custom-color > .b-sch-event.b-sch-event-resizing, .b-sch-style-line.b-sch-custom-color > .b-sch-event.b-sch-event-selected:hover {\r\n  border-color: currentColor;\r\n  opacity: 1;\r\n}\r\n\r\n.b-sch-event-wrap.b-sch-style-dashed > .b-sch-event,\r\n.b-sch-event-wrap.b-sch-style-dashed > .b-sch-event > .b-sch-event-segments > .b-sch-event {\r\n  --event-background-color: transparent;\r\n  --event-border-color: hsl(var(--event-primary-color-h), var(--event-primary-color-s), calc(var(--event-primary-color-l) * var(--event-l-factor)));\r\n  --event-color: #777;\r\n  --event-hover-color: #777;\r\n  --event-border-width: 5px;\r\n  --event-border-style: dashed;\r\n  --event-hover-l-factor: 0.8;\r\n  --event-selected-hover-l-factor: 0.7;\r\n  justify-content: center;\r\n  overflow: visible;\r\n}\r\n.b-sch-horizontal .b-sch-event-wrap.b-sch-style-dashed > .b-sch-event,\r\n.b-sch-horizontal .b-sch-event-wrap.b-sch-style-dashed > .b-sch-event > .b-sch-event-segments > .b-sch-event {\r\n  padding: 5px 0 3px 0;\r\n}\r\n.b-sch-event-wrap.b-sch-style-dashed > .b-sch-event .b-sch-event-content,\r\n.b-sch-event-wrap.b-sch-style-dashed > .b-sch-event > .b-sch-event-segments > .b-sch-event .b-sch-event-content {\r\n  padding: 0;\r\n}\r\n.b-sch-event-wrap.b-sch-style-dashed > .b-sch-event:not(.b-milestone),\r\n.b-sch-event-wrap.b-sch-style-dashed > .b-sch-event > .b-sch-event-segments > .b-sch-event:not(.b-milestone) {\r\n  align-self: center;\r\n}\r\n.b-sch-event-wrap.b-sch-style-dashed > .b-sch-event.b-milestone,\r\n.b-sch-event-wrap.b-sch-style-dashed > .b-sch-event > .b-sch-event-segments > .b-sch-event.b-milestone {\r\n  top: initial;\r\n}\r\n\r\n.b-sch-style-dashed.b-sch-custom-color > .b-sch-event {\r\n  border-color: currentColor;\r\n  opacity: 0.8;\r\n}\r\n.b-sch-style-dashed.b-sch-custom-color > .b-sch-event:hover, .b-sch-style-dashed.b-sch-custom-color > .b-sch-event.b-sch-event-selected, .b-sch-style-dashed.b-sch-custom-color > .b-sch-event.b-sch-event-resizing, .b-sch-style-dashed.b-sch-custom-color > .b-sch-event.b-sch-event-selected:hover {\r\n  border-color: currentColor;\r\n  opacity: 1;\r\n}\r\n\r\n.b-sch-event-wrap.b-sch-style-minimal > .b-sch-event, .b-sch-event-wrap.b-sch-style-minimal > .b-sch-event > .b-sch-event-segments > .b-sch-event {\r\n  --event-background-color: transparent;\r\n  --event-border-color: hsl(var(--event-primary-color-h), var(--event-primary-color-s), calc(var(--event-primary-color-l) * var(--event-l-factor)));\r\n  --event-color: #777;\r\n  --event-hover-color: #777;\r\n  --event-border-width: 1px;\r\n  --event-hover-l-factor: 0.8;\r\n  --event-selected-hover-l-factor: 0.7;\r\n  overflow: visible;\r\n  padding: 0;\r\n}\r\n.b-sch-event-wrap.b-sch-style-minimal > .b-sch-event:not(.b-milestone), .b-sch-event-wrap.b-sch-style-minimal > .b-sch-event > .b-sch-event-segments > .b-sch-event:not(.b-milestone) {\r\n  font-size: 10px;\r\n}\r\n.b-sch-horizontal .b-sch-event-wrap.b-sch-style-minimal > .b-sch-event:not(.b-milestone), .b-sch-horizontal .b-sch-event-wrap.b-sch-style-minimal > .b-sch-event > .b-sch-event-segments > .b-sch-event:not(.b-milestone) {\r\n  border-width: 0 0 var(--event-border-width) 0;\r\n  align-items: flex-end;\r\n}\r\n.b-sch-vertical .b-sch-event-wrap.b-sch-style-minimal > .b-sch-event:not(.b-milestone), .b-sch-vertical .b-sch-event-wrap.b-sch-style-minimal > .b-sch-event > .b-sch-event-segments > .b-sch-event:not(.b-milestone) {\r\n  border-width: 0;\r\n  border-inline-start-width: var(--event-border-width);\r\n  align-items: flex-start;\r\n  padding-inline-start: 0.75em;\r\n}\r\n.b-sch-event-wrap.b-sch-style-minimal > .b-sch-event.b-milestone .b-sch-event-content, .b-sch-event-wrap.b-sch-style-minimal > .b-sch-event > .b-sch-event-segments > .b-sch-event.b-milestone .b-sch-event-content {\r\n  font-size: 20px;\r\n  left: 10px;\r\n  position: relative;\r\n}\r\n.b-sch-event-wrap.b-sch-style-minimal > .b-sch-event.b-milestone .b-sch-event-content label, .b-sch-event-wrap.b-sch-style-minimal > .b-sch-event > .b-sch-event-segments > .b-sch-event.b-milestone .b-sch-event-content label {\r\n  font-size: 10px;\r\n  left: 70%;\r\n}\r\n\r\n.b-schedulerbase.b-sch-layout-milestones .b-sch-event-wrap.b-sch-style-minimal > .b-sch-event.b-milestone {\r\n  height: 20px;\r\n  font-size: 20px;\r\n}\r\n.b-schedulerbase.b-sch-layout-milestones .b-sch-event-wrap.b-sch-style-minimal > .b-sch-event.b-milestone .b-sch-event-content {\r\n  font-size: 10px;\r\n  left: 0;\r\n}\r\n\r\n.b-sch-style-minimal.b-sch-custom-color > .b-sch-event {\r\n  border-color: currentColor;\r\n  opacity: 0.8;\r\n}\r\n.b-sch-style-minimal.b-sch-custom-color > .b-sch-event .b-sch-event-content {\r\n  color: #777;\r\n}\r\n.b-sch-style-minimal.b-sch-custom-color > .b-sch-event:hover, .b-sch-style-minimal.b-sch-custom-color > .b-sch-event.b-sch-event-selected, .b-sch-style-minimal.b-sch-custom-color > .b-sch-event.b-sch-event-resizing, .b-sch-style-minimal.b-sch-custom-color > .b-sch-event.b-sch-event-selected:hover {\r\n  border-color: currentColor;\r\n  opacity: 1;\r\n}\r\n\r\n.b-sch-horizontal .b-sch-style-line > .b-sch-event,\r\n.b-sch-horizontal .b-sch-style-line > .b-sch-event > .b-sch-event-segments > .b-sch-event,\r\n.b-sch-horizontal .b-sch-style-dashed > .b-sch-event,\r\n.b-sch-horizontal .b-sch-style-dashed > .b-sch-event > .b-sch-event-segments > .b-sch-event {\r\n  top: 5px;\r\n  height: auto !important;\r\n  border-width: 5px 0 0 0;\r\n}\r\n.b-sch-vertical .b-sch-style-line > .b-sch-event,\r\n.b-sch-vertical .b-sch-style-line > .b-sch-event > .b-sch-event-segments > .b-sch-event,\r\n.b-sch-vertical .b-sch-style-dashed > .b-sch-event,\r\n.b-sch-vertical .b-sch-style-dashed > .b-sch-event > .b-sch-event-segments > .b-sch-event {\r\n  left: 0;\r\n  border-width: 0 0 0 5px;\r\n  flex-direction: column;\r\n}\r\n.b-sch-vertical .b-sch-style-line > .b-sch-event .b-sch-event-content,\r\n.b-sch-vertical .b-sch-style-line > .b-sch-event > .b-sch-event-segments > .b-sch-event .b-sch-event-content,\r\n.b-sch-vertical .b-sch-style-dashed > .b-sch-event .b-sch-event-content,\r\n.b-sch-vertical .b-sch-style-dashed > .b-sch-event > .b-sch-event-segments > .b-sch-event .b-sch-event-content {\r\n  margin: 0;\r\n}\r\n\r\n.b-sch-event-wrap.b-sch-style-rounded > .b-sch-event, .b-sch-event-wrap.b-sch-style-rounded > .b-sch-event > .b-sch-event-segments > .b-sch-event {\r\n  --event-background-l: 80%;\r\n  --event-a: 0.6;\r\n  --event-hover-a: 1;\r\n  --event-hover-l-factor: 0.8;\r\n  --event-selected-hover-l-factor: 0.9;\r\n  --event-color: hsl(var(--event-primary-color-h), var(--event-primary-color-s), calc(var(--event-primary-color-l) * 0.7));\r\n  --event-border-color: var(--event-primary-color);\r\n  --event-border-radius: 2em;\r\n}\r\n.b-sch-event-wrap.b-sch-style-rounded > .b-sch-event.b-sch-event-selected, .b-sch-event-wrap.b-sch-style-rounded > .b-sch-event > .b-sch-event-segments > .b-sch-event.b-sch-event-selected {\r\n  --event-background-l: var(--event-primary-color-l);\r\n  --event-a: 1;\r\n  --event-color: #fff;\r\n}\r\n.b-sch-event-wrap.b-sch-style-rounded > .b-sch-event:not(.b-milestone) .b-sch-event-content {\r\n  margin: 0 1em;\r\n}\r\n.b-sch-event-wrap.b-sch-style-rounded > .b-sch-event.b-milestone {\r\n  --event-border-radius: 1em;\r\n}\r\n.b-schedulerbase.b-sch-layout-milestones .b-sch-event-wrap.b-sch-style-rounded .b-sch-event.b-milestone {\r\n  --event-border-radius: 3px;\r\n  --event-a: 1;\r\n  --event-background-l: 85%;\r\n}\r\n.b-schedulerbase.b-sch-layout-milestones .b-sch-event-wrap.b-sch-style-rounded .b-sch-event.b-milestone > .b-sch-event-content {\r\n  font-size: 11px;\r\n}\r\n\r\n.b-sch-event-wrap.b-sch-style-rounded.b-sch-custom-color > .b-sch-event:not(.b-milestone) {\r\n  background-color: currentColor;\r\n  background-image: linear-gradient(rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0.8));\r\n}\r\n.b-sch-event-wrap.b-sch-style-rounded.b-sch-custom-color > .b-sch-event:not(.b-milestone):hover {\r\n  background-color: currentColor;\r\n  background-image: linear-gradient(rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.6));\r\n}\r\n.b-sch-event-wrap.b-sch-style-rounded.b-sch-custom-color > .b-sch-event:not(.b-milestone).b-sch-event-selected {\r\n  background-image: none;\r\n}\r\n.b-sch-event-wrap.b-sch-style-rounded.b-sch-custom-color > .b-sch-event:not(.b-milestone).b-sch-event-selected .b-sch-event-content {\r\n  color: #fff;\r\n}\r\n.b-sch-event-wrap.b-sch-style-rounded.b-sch-custom-color > .b-sch-event.b-milestone .b-sch-event-content {\r\n  background-color: currentColor;\r\n  background-image: linear-gradient(rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0.8));\r\n}\r\n.b-sch-event-wrap.b-sch-style-rounded.b-sch-custom-color > .b-sch-event.b-milestone:hover .b-sch-event-content {\r\n  background-image: linear-gradient(rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.6));\r\n}\r\n.b-sch-event-wrap.b-sch-style-rounded.b-sch-custom-color > .b-sch-event.b-milestone.b-sch-event-selected .b-sch-event-content {\r\n  background-image: none;\r\n}\r\n\r\n.b-sch-style-plain {\r\n  border-radius: 2px;\r\n}\r\n\r\n.b-gridbase.b-no-column-lines .b-sch-header-timeaxis-cell {\r\n  border-right-color: transparent;\r\n}\r\n\r\n.b-recurrenceeditor.b-popup .b-recurrenceeditor-content.b-popup-content .b-field.b-recurrencepositionscombo {\r\n  width: 10.1em;\r\n}\r\n\r\n/*!\r\n * Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com\r\n * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)\r\n * Copyright 2022 Fonticons, Inc.\r\n */\r\n:root, :host {\r\n  --b-fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";\r\n}\r\n\r\n@font-face {\r\n  font-family: "Font Awesome 6 Free";\r\n  font-style: normal;\r\n  font-weight: 900;\r\n  font-display: block;\r\n  src: url('+d+') format("woff2"), url('+u+') format("truetype");\r\n}\r\n.fas,\r\n.b-fa-solid {\r\n  font-family: "Font Awesome 6 Free";\r\n  font-weight: 900;\r\n}\r\n\r\n.b-content-icon, .b-gridbase.b-columnresize.b-touch.b-column-resizing .b-grid-header.b-resizing::before, .b-group-state-icon {\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  display: inline-block;\r\n  font-style: normal;\r\n  font-variant: normal;\r\n  font-weight: normal;\r\n  line-height: 1;\r\n  font-family: "Font Awesome 6 Free", FontAwesome6Free;\r\n  font-weight: 900;\r\n  vertical-align: 0;\r\n}\r\n\r\n.b-theme-info:before {\r\n  content: \'{"name":"Stockholm"}\';\r\n}\r\n\r\n.b-slidetoggle .b-slidetoggle-label,\r\n:not(.b-fieldset-has-label) > .b-checkbox .b-checkbox-label {\r\n  text-transform: uppercase;\r\n  font-size: 0.9em;\r\n}\r\n.b-slidetoggle .b-slidetoggle-label::before,\r\n:not(.b-fieldset-has-label) > .b-checkbox .b-checkbox-label::before {\r\n  font-size: 1.1111111111em;\r\n}\r\n\r\n.b-popup > .b-panel-body-wrap > .b-bottom-toolbar {\r\n  background: #f8f9fa;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-scale-cell {\r\n  padding-right: 0 !important;\r\n  padding-left: 0 !important;\r\n}\r\n.b-scale-cell .b-scale {\r\n  background-color: transparent;\r\n  font-weight: 400;\r\n}\r\n.b-scale-cell .b-scale-tick-label {\r\n  font-size: 70%;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-sch-highlighted-calendar-range {\r\n  position: absolute;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: rgba(49, 131, 254, 0.5333333333);\r\n  background: rgba(49, 131, 254, 0.0705882353);\r\n  border: 2px dashed rgba(49, 131, 254, 0.2);\r\n  animation-name: fadeInOpacity;\r\n  animation-duration: 0.2s;\r\n  overflow: hidden;\r\n}\r\n.b-sch-highlighted-calendar-range .b-sch-event-content {\r\n  font-size: 13px;\r\n  padding: 0.5em;\r\n  text-align: center;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-sch-foreground-canvas > svg .b-sch-dependency.b-inactive {\r\n  stroke-dasharray: 9 3;\r\n}\r\n\r\n.b-eventbuffer .b-sch-event {\r\n  width: 100%;\r\n}\r\n.b-eventbuffer.b-sch-vertical .b-sch-event-wrap {\r\n  contain: size layout;\r\n}\r\n.b-eventbuffer.b-sch-horizontal .b-sch-event-wrap .b-sch-event-buffer {\r\n  height: 5px;\r\n  grid-row: 2;\r\n  background: repeating-linear-gradient(180deg, transparent, transparent 30%, #ccc 30%, #ccc 70%, transparent 70%, transparent 100%);\r\n}\r\n.b-eventbuffer.b-sch-horizontal .b-sch-event-wrap .b-sch-event-buffer-before {\r\n  grid-column: 2;\r\n  flex-direction: row;\r\n  justify-content: flex-end;\r\n}\r\n.b-eventbuffer.b-sch-horizontal .b-sch-event-wrap .b-sch-event-buffer-before .b-buffer-label {\r\n  transform: translate(0.1em, -1.2em);\r\n  margin-inline-end: 0.5em;\r\n  flex: 1;\r\n}\r\n.b-eventbuffer.b-sch-horizontal .b-sch-event-wrap .b-sch-event-buffer-after {\r\n  grid-column: 4;\r\n  flex-direction: row-reverse;\r\n  justify-content: flex-end;\r\n}\r\n.b-eventbuffer.b-sch-horizontal .b-sch-event-wrap .b-sch-event-buffer-after .b-buffer-label {\r\n  transform: translate(-0.1em, -1.2em);\r\n  margin-inline-start: 0.5em;\r\n  flex: 1;\r\n  text-align: right;\r\n}\r\n.b-eventbuffer.b-sch-vertical .b-sch-event-wrap .b-sch-event-buffer {\r\n  width: 5px;\r\n  grid-column: 1;\r\n  justify-self: center;\r\n  background: repeating-linear-gradient(90deg, transparent, transparent 30%, #ccc 30%, #ccc 70%, transparent 70%, transparent 100%);\r\n}\r\n.b-eventbuffer.b-sch-vertical .b-sch-event-wrap .b-sch-event-buffer-before {\r\n  grid-row: 1;\r\n  flex-direction: column;\r\n  justify-content: flex-end;\r\n}\r\n.b-eventbuffer.b-sch-vertical .b-sch-event-wrap .b-sch-event-buffer-before .b-buffer-label {\r\n  margin-inline-end: 0.5em;\r\n}\r\n.b-eventbuffer.b-sch-vertical .b-sch-event-wrap .b-buffer-label {\r\n  margin-right: -1.3em;\r\n  writing-mode: vertical-rl;\r\n}\r\n.b-eventbuffer.b-sch-vertical .b-sch-event-wrap .b-sch-event-buffer-after {\r\n  grid-row: 3;\r\n  flex-direction: column-reverse;\r\n  justify-content: flex-end;\r\n}\r\n.b-eventbuffer.b-sch-vertical .b-sch-event-wrap .b-sch-event-buffer-after .b-buffer-label {\r\n  margin-inline-start: 0.5em;\r\n}\r\n.b-eventbuffer .b-sch-event-buffer {\r\n  display: flex;\r\n  color: #aaa;\r\n  white-space: nowrap;\r\n  font-size: 10px;\r\n}\r\n\r\n.b-animating .b-sch-event-buffer {\r\n  transition: width 0.2s;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-schedulerprobase {\r\n  --schedulerpro-nested-event-header-height: 20px;\r\n}\r\n\r\n.b-sch-event-wrap.b-nested-events-parent > .b-sch-event:not(.b-milestone) {\r\n  flex-direction: column;\r\n  width: 100%;\r\n}\r\n.b-sch-event-wrap.b-nested-events-parent > .b-sch-event:not(.b-milestone) > .b-sch-event-content {\r\n  padding-block: 0.1em;\r\n  flex: 0 0 var(--schedulerpro-nested-event-header-height);\r\n}\r\n.b-sch-event-wrap.b-nested-events-parent > .b-sch-event:not(.b-milestone)::before, .b-sch-event-wrap.b-nested-events-parent > .b-sch-event:not(.b-milestone)::after {\r\n  display: none;\r\n}\r\n.b-sch-event-wrap.b-nested-events-parent.b-sch-style-plain > .b-sch-event:not(.b-milestone), .b-sch-event-wrap.b-nested-events-parent.b-sch-style-colored > .b-sch-event:not(.b-milestone), .b-sch-event-wrap.b-nested-events-parent.b-sch-style-rounded > .b-sch-event:not(.b-milestone) {\r\n  color: #666;\r\n  background-color: transparent;\r\n  border-left: none;\r\n  border-radius: 0;\r\n}\r\n.b-sch-event-wrap.b-nested-events-parent.b-sch-style-plain > .b-sch-event:not(.b-milestone).b-sch-event-selected > .b-sch-event-content, .b-sch-event-wrap.b-nested-events-parent.b-sch-style-plain > .b-sch-event:not(.b-milestone).b-sch-event-selected > .b-sch-event-content > *, .b-sch-event-wrap.b-nested-events-parent.b-sch-style-colored > .b-sch-event:not(.b-milestone).b-sch-event-selected > .b-sch-event-content, .b-sch-event-wrap.b-nested-events-parent.b-sch-style-colored > .b-sch-event:not(.b-milestone).b-sch-event-selected > .b-sch-event-content > *, .b-sch-event-wrap.b-nested-events-parent.b-sch-style-rounded > .b-sch-event:not(.b-milestone).b-sch-event-selected > .b-sch-event-content, .b-sch-event-wrap.b-nested-events-parent.b-sch-style-rounded > .b-sch-event:not(.b-milestone).b-sch-event-selected > .b-sch-event-content > * {\r\n  color: #555;\r\n}\r\n.b-sch-event-wrap.b-nested-events-parent.b-sch-style-plain > .b-sch-event:not(.b-milestone).b-sch-event-selected:hover, .b-sch-event-wrap.b-nested-events-parent.b-sch-style-colored > .b-sch-event:not(.b-milestone).b-sch-event-selected:hover, .b-sch-event-wrap.b-nested-events-parent.b-sch-style-rounded > .b-sch-event:not(.b-milestone).b-sch-event-selected:hover {\r\n  background-color: rgba(221, 221, 221, 0.5647058824);\r\n}\r\n.b-sch-event-wrap.b-nested-events-parent.b-sch-style-plain.b-sch-event-hover > .b-sch-event:not(.b-milestone), .b-sch-event-wrap.b-nested-events-parent.b-sch-style-colored.b-sch-event-hover > .b-sch-event:not(.b-milestone), .b-sch-event-wrap.b-nested-events-parent.b-sch-style-rounded.b-sch-event-hover > .b-sch-event:not(.b-milestone) {\r\n  background-color: rgba(221, 221, 221, 0.5647058824);\r\n}\r\n.b-sch-event-wrap.b-nested-events-parent.b-sch-style-plain .b-nested-events-container, .b-sch-event-wrap.b-nested-events-parent.b-sch-style-colored .b-nested-events-container, .b-sch-event-wrap.b-nested-events-parent.b-sch-style-rounded .b-nested-events-container {\r\n  background-color: rgba(221, 221, 221, 0.5647058824);\r\n}\r\n.b-sch-event-wrap.b-nested-events-parent.b-sch-style-border > .b-sch-event:not(.b-milestone) {\r\n  background-image: linear-gradient(rgba(221, 221, 221, 0.5647058824), rgba(221, 221, 221, 0.5647058824));\r\n}\r\n.b-sch-event-wrap.b-nested-events-parent.b-sch-style-hollow:hover > .b-sch-event {\r\n  background-image: linear-gradient(rgba(255, 255, 255, 0.3137254902), rgba(255, 255, 255, 0.3137254902));\r\n}\r\n\r\n.b-nested-events-container {\r\n  position: relative;\r\n  align-self: flex-start;\r\n  flex: 1;\r\n  width: 100%;\r\n  overflow: visible;\r\n  transition: background 0.2s;\r\n}\r\n.b-nested-events-container .b-sch-event:not(.b-milestone) {\r\n  width: 100%;\r\n}\r\n.b-nested-events-container .b-sch-style-border {\r\n  transform: translateX(-1px);\r\n}\r\n.b-nested-events-container .b-sch-style-hollow {\r\n  transform: translateX(-2px);\r\n}\r\n.b-nested-events-container.b-nested-events-layout-stack {\r\n  overflow-y: auto;\r\n  overflow-x: hidden;\r\n}\r\n\r\n.b-sch-event-wrap.b-nested-events-parent.b-sch-vertical > .b-sch-event:not(.b-milestone) {\r\n  flex-direction: row;\r\n  padding: 0;\r\n}\r\n.b-sch-event-wrap.b-nested-events-parent.b-sch-vertical > .b-sch-event:not(.b-milestone) > .b-sch-event-content {\r\n  writing-mode: vertical-rl;\r\n  transform: rotate(180deg);\r\n}\r\n.b-sch-event-wrap.b-nested-events-parent.b-sch-vertical .b-nested-events-container {\r\n  height: 100%;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-percentbar .b-sch-event {\r\n  overflow: visible !important;\r\n}\r\n\r\n.b-task-percent-bar-outer {\r\n  position: absolute;\r\n  left: 0;\r\n  height: 100%;\r\n  width: 100%;\r\n  overflow: hidden;\r\n  transition: background-color 0.2s;\r\n}\r\n.b-sch-style-rounded .b-task-percent-bar-outer {\r\n  border-radius: 2em;\r\n}\r\n.b-sch-style-rounded .b-sch-event.b-sch-event-selected:hover .b-task-percent-bar-outer, .b-sch-style-rounded .b-sch-event-selected .b-task-percent-bar-outer {\r\n  background-color: rgba(255, 255, 255, 0.4);\r\n}\r\n\r\n.b-task-percent-bar {\r\n  background-color: rgba(0, 0, 0, 0.15);\r\n  z-index: 0;\r\n  box-sizing: content-box;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  align-items: flex-end;\r\n  transition: color 0.2s, background-color 0.2s, opacity 0.2s;\r\n  line-height: initial;\r\n}\r\n.b-sch-horizontal .b-task-percent-bar, .b-gantt .b-task-percent-bar {\r\n  height: 100%;\r\n  max-width: 100%;\r\n  text-align: right;\r\n}\r\n.b-sch-vertical .b-task-percent-bar {\r\n  width: 100%;\r\n  max-height: 100%;\r\n}\r\n.b-animating .b-task-percent-bar {\r\n  transition: color 0.2s, width 0.2s, height 0.2s;\r\n}\r\n.b-task-percent-bar-resizing-task .b-task-percent-bar {\r\n  transition: background-color 0.2s;\r\n}\r\n.b-sch-event-selected .b-task-percent-bar {\r\n  background-color: rgba(0, 0, 0, 0.2);\r\n}\r\n.b-sch-style-rounded .b-task-percent-bar {\r\n  background-color: currentColor;\r\n  mix-blend-mode: overlay;\r\n  opacity: 0.5;\r\n}\r\n.b-sch-style-rounded .b-sch-event:hover .b-task-percent-bar {\r\n  mix-blend-mode: darken;\r\n  opacity: 0.4;\r\n}\r\n.b-sch-style-rounded .b-sch-event.b-sch-event-selected:hover .b-task-percent-bar, .b-sch-style-rounded .b-sch-event-selected .b-task-percent-bar {\r\n  background-color: rgba(0, 0, 0, 0.4);\r\n  mix-blend-mode: darken;\r\n  opacity: 0.4;\r\n}\r\n\r\n.b-task-percent-bar-handle {\r\n  position: absolute;\r\n  width: 0;\r\n  height: 0;\r\n  display: flex;\r\n  justify-content: center;\r\n  z-index: 1000;\r\n  border-color: #fff;\r\n  border-right-color: transparent;\r\n  border-left-color: transparent;\r\n  border-width: 0 5px 6px 5px;\r\n  border-style: solid;\r\n  opacity: 1;\r\n}\r\n.b-sch-horizontal .b-task-percent-bar-handle, .b-gantt .b-task-percent-bar-handle {\r\n  cursor: ew-resize !important;\r\n  bottom: 0;\r\n  margin-inline-start: -5px;\r\n}\r\n.b-sch-vertical .b-task-percent-bar-handle {\r\n  cursor: ns-resize !important;\r\n  left: 0;\r\n  margin-top: -4px;\r\n  transform: rotate(90deg);\r\n}\r\n.b-sch-horizontal .b-sch-event .b-task-percent-bar-handle {\r\n  margin-inline-start: -8px;\r\n  border-width: 0 6px 7px 7px;\r\n}\r\n.b-sch-vertical .b-sch-event .b-task-percent-bar-handle {\r\n  margin-inline-start: -3px;\r\n  border-width: 0 6px 7px 7px;\r\n}\r\n.b-sch-event.b-sch-event-selected .b-task-percent-bar-handle {\r\n  z-index: 1000;\r\n}\r\n.b-sch-style-rounded .b-task-percent-bar-handle {\r\n  border-block-color: #333;\r\n}\r\n\r\n.b-task-percent-bar-handle::after {\r\n  margin-top: 10px;\r\n  font-size: 0.8em;\r\n  color: #606263;\r\n}\r\n\r\n.b-task-percent-bar-show-percentage:not(.b-resizing-event):not(.b-dragging-event).b-task-percent-bar-resizing-task .b-task-percent-bar-handle::after,\r\n.b-task-percent-bar-show-percentage:not(.b-resizing-event):not(.b-dragging-event) .b-sch-event-hover .b-task-percent-bar-handle::after {\r\n  position: absolute;\r\n  content: attr(data-percent) "%";\r\n}\r\n\r\n.b-sch-vertical .b-task-percent-bar-handle::after {\r\n  margin-top: -2em;\r\n  transform: rotate(-90deg);\r\n}\r\n\r\n.b-task-percent-bar-resizing .b-sch-event,\r\n.b-task-percent-bar-resizing .b-gantt-task {\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  cursor: ew-resize !important;\r\n}\r\n\r\n.b-task-percent-bar-drag-disabled .b-task-percent-bar-handle,\r\n.b-readonly .b-task-percent-bar-handle {\r\n  display: none !important;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-sch-resourcenonworkingtime {\r\n  background-color: rgba(240, 240, 240, 0.5);\r\n  z-index: 1;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-popup.b-taskeditor .b-bottom-toolbar > button, .b-popup.b-schedulerpro-taskeditor .b-bottom-toolbar > button {\r\n  flex: none;\r\n  width: 10em;\r\n  margin-right: 0.5em;\r\n  min-height: 2.5em;\r\n}\r\n.b-popup.b-taskeditor .b-bottom-toolbar > button:last-child, .b-popup.b-schedulerpro-taskeditor .b-bottom-toolbar > button:last-child {\r\n  margin-right: 0;\r\n}\r\n.b-popup.b-taskeditor .b-chip, .b-popup.b-schedulerpro-taskeditor .b-chip {\r\n  font-size: 0.9em;\r\n}\r\n\r\n.b-schedulerpro-taskeditor .b-watermark {\r\n  display: none;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-sch-highlight-container {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  pointer-events: none;\r\n}\r\n.b-sch-highlight-container .b-unavailable {\r\n  background: rgba(200, 200, 200, 0.1882352941);\r\n}\r\n\r\n.b-sch-highlighted-range {\r\n  position: absolute;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: rgba(49, 131, 254, 0.5333333333);\r\n  font-size: 13px;\r\n}\r\n\r\n.b-sch-highlighted-range-name {\r\n  text-overflow: ellipsis;\r\n  overflow: hidden;\r\n}\r\n\r\n.b-sch-highlighted-range-default {\r\n  background: rgba(49, 131, 254, 0.0705882353);\r\n  border: 2px dashed rgba(49, 131, 254, 0.2);\r\n  animation-name: fadeInOpacity;\r\n  animation-duration: 0.2s;\r\n}\r\n\r\n.b-timelinebase.b-transition-highlight .b-sch-highlighted-range {\r\n  transition-property: opacity;\r\n  transition-duration: 0.3s;\r\n}\r\n.b-timelinebase.b-transition-highlight .b-sch-highlighted-range[data-sync-id] {\r\n  transition-property: width, height, left, top, opacity;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-sch-style-plain.b-sch-event-wrap > .b-sch-event.b-segmented:not(.b-milestone), .b-sch-style-plain.b-sch-event-wrap > .b-sch-event.b-segmented:not(.b-milestone).b-sch-event-selected,\r\n.b-sch-style-border.b-sch-event-wrap > .b-sch-event.b-segmented:not(.b-milestone),\r\n.b-sch-style-border.b-sch-event-wrap > .b-sch-event.b-segmented:not(.b-milestone).b-sch-event-selected,\r\n.b-sch-style-colored.b-sch-event-wrap > .b-sch-event.b-segmented:not(.b-milestone),\r\n.b-sch-style-colored.b-sch-event-wrap > .b-sch-event.b-segmented:not(.b-milestone).b-sch-event-selected,\r\n.b-sch-style-calendar.b-sch-event-wrap > .b-sch-event.b-segmented:not(.b-milestone),\r\n.b-sch-style-calendar.b-sch-event-wrap > .b-sch-event.b-segmented:not(.b-milestone).b-sch-event-selected,\r\n.b-sch-style-hollow.b-sch-event-wrap > .b-sch-event.b-segmented:not(.b-milestone),\r\n.b-sch-style-hollow.b-sch-event-wrap > .b-sch-event.b-segmented:not(.b-milestone).b-sch-event-selected,\r\n.b-sch-style-line.b-sch-event-wrap > .b-sch-event.b-segmented:not(.b-milestone),\r\n.b-sch-style-line.b-sch-event-wrap > .b-sch-event.b-segmented:not(.b-milestone).b-sch-event-selected,\r\n.b-sch-style-dashed.b-sch-event-wrap > .b-sch-event.b-segmented:not(.b-milestone),\r\n.b-sch-style-dashed.b-sch-event-wrap > .b-sch-event.b-segmented:not(.b-milestone).b-sch-event-selected,\r\n.b-sch-style-minimal.b-sch-event-wrap > .b-sch-event.b-segmented:not(.b-milestone),\r\n.b-sch-style-minimal.b-sch-event-wrap > .b-sch-event.b-segmented:not(.b-milestone).b-sch-event-selected,\r\n.b-sch-style-rounded.b-sch-event-wrap > .b-sch-event.b-segmented:not(.b-milestone),\r\n.b-sch-style-rounded.b-sch-event-wrap > .b-sch-event.b-segmented:not(.b-milestone).b-sch-event-selected {\r\n  border-width: 0;\r\n  background-color: transparent;\r\n}\r\n\r\n.b-sch-event-wrap.b-sch-style-line > .b-sch-event.b-segmented::before, .b-sch-event-wrap.b-sch-style-line > .b-sch-event.b-segmented::after,\r\n.b-sch-event-wrap.b-sch-style-dashed > .b-sch-event.b-segmented::before,\r\n.b-sch-event-wrap.b-sch-style-dashed > .b-sch-event.b-segmented::after {\r\n  content: unset;\r\n}\r\n.b-sch-event-wrap.b-sch-style-line > .b-sch-event.b-segmented .b-sch-event,\r\n.b-sch-event-wrap.b-sch-style-dashed > .b-sch-event.b-segmented .b-sch-event {\r\n  top: 0;\r\n}\r\n\r\n.b-sch-style-minimal .b-sch-event .b-sch-event-segments {\r\n  height: 100%;\r\n}\r\n\r\n.b-event-segment-renamer {\r\n  z-index: 15;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-versiongrid-property-update-desc {\r\n  display: flex;\r\n  gap: 0.4em;\r\n  align-items: baseline;\r\n  font-size: 90%;\r\n}\r\n\r\n.b-versiongrid-property-name::after {\r\n  content: ":";\r\n}\r\n\r\n.b-versiongrid-property-before,\r\n.b-versiongrid-property-after {\r\n  padding: 0.2em 0.4em;\r\n  border-radius: 0.1em;\r\n  background: #f0f0f0;\r\n}\r\n\r\n.b-versiongrid-empty-value {\r\n  opacity: 0.5;\r\n}\r\n\r\n.b-versiongrid .b-tree-cell.b-tree-parent-cell {\r\n  font-weight: 400;\r\n}\r\n\r\n.b-icon-version::before {\r\n  content: "\\e493";\r\n}\r\n\r\n.b-versiongrid-highlighted-entity {\r\n  font-weight: 700;\r\n}\r\n\r\n.b-versiongrid-comparing {\r\n  background: #3183fe;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-schedulerpro-taskeditor .b-taskeditorbase-content {\r\n  padding: 1em;\r\n}\r\n.b-schedulerpro-taskeditor:not(.b-readonly) .b-taskeditorbase-content {\r\n  padding-bottom: 0;\r\n}\r\n.b-schedulerpro-taskeditor .b-tabpanel-tab-title.b-invalid {\r\n  white-space: nowrap;\r\n}\r\n.b-schedulerpro-taskeditor .b-tabpanel-tab-title.b-invalid .b-icon, .b-schedulerpro-taskeditor .b-tabpanel-tab-title.b-invalid .b-icon-version {\r\n  color: #e53f2c;\r\n  display: inline-block;\r\n  margin-right: 0.5em;\r\n}\r\n.b-schedulerpro-taskeditor .b-tabpanel-item {\r\n  align-content: flex-start;\r\n}\r\n.b-schedulerpro-taskeditor > .b-panel-body-wrap > .b-bottom-toolbar button {\r\n  flex: none;\r\n  min-width: 9em;\r\n  margin-right: 0.5em;\r\n}\r\n.b-schedulerpro-taskeditor > .b-panel-body-wrap > .b-bottom-toolbar button:last-child {\r\n  margin-right: 0;\r\n}\r\n\r\n.b-schedulerpro-taskeditor .b-toolbar.b-compact-bbar {\r\n  font-size: 0.8em;\r\n  min-height: 2.5em;\r\n}\r\n.b-schedulerpro-taskeditor .b-toolbar.b-compact-bbar > .b-toolbar-content {\r\n  padding: 0;\r\n}\r\n.b-schedulerpro-taskeditor .b-toolbar.b-compact-bbar .b-button {\r\n  border: none;\r\n}\r\n\r\n.b-toolbar.occurrence-info-toolbar {\r\n  font-size: 0.9em;\r\n  min-height: 0;\r\n  background-color: #ffeeee;\r\n  border-color: #ffcccf;\r\n}\r\n.b-toolbar.occurrence-info-toolbar .b-toolbar-content {\r\n  padding-inline: 1.1111111111em;\r\n}\r\n.b-toolbar.occurrence-info-toolbar .b-button {\r\n  min-height: 0;\r\n  padding-block: 0.5em;\r\n}\r\n\r\n.b-advanced-tab {\r\n  justify-content: space-between;\r\n}\r\n.b-advanced-tab .b-checkbox > label {\r\n  white-space: normal;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-dependencytab .b-grid .b-grid-row.b-invalid {\r\n  border-bottom: 1px dotted #e53f2c;\r\n}\r\n.b-dependencytab .b-grid .b-grid-row.b-invalid .b-icon-warning {\r\n  color: #e53f2c;\r\n}\r\n.b-dependencytab .b-grid .b-grid-row .b-grid-cell.b-inactive {\r\n  text-decoration: line-through;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-notestab .b-taskeditor-notes-field {\r\n  height: 100%;\r\n}\r\n.b-notestab .b-taskeditor-notes-field .b-field-inner {\r\n  align-self: stretch;\r\n}\r\n.b-notestab .b-taskeditor-notes-field .b-field-inner textarea {\r\n  resize: none;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-timeline {\r\n  background: #f8f9fa;\r\n  overflow: visible;\r\n}\r\n.b-timeline .b-grid-panel-body {\r\n  padding: 2em 10em 4em 10em;\r\n}\r\n.b-timeline .b-virtual-scrollers, .b-timeline .b-yscroll-pad {\r\n  display: none !important;\r\n}\r\n.b-timeline .b-sch-header-row:not(:first-child) {\r\n  display: none;\r\n}\r\n.b-timeline .b-grid-row {\r\n  background: transparent;\r\n  border-bottom: 1px solid transparent;\r\n}\r\n.b-timeline .b-grid-cell {\r\n  border: 1px solid #d8d9da;\r\n}\r\n.b-timeline .b-sch-event-wrap .b-sch-event {\r\n  opacity: 1;\r\n  border-color: #0e4a14;\r\n  font-weight: 400;\r\n  font-size: 12px;\r\n}\r\n.b-timeline .b-milestone-wrap.b-sch-event-wrap {\r\n  position: relative;\r\n  z-index: 10;\r\n}\r\n.b-timeline .b-milestone-wrap.b-sch-event-wrap .b-sch-event:not(.b-sch-event-withicon) .b-sch-event-content:before {\r\n  opacity: 1;\r\n  z-index: 2;\r\n  background-color: #83b5fe;\r\n  border: 2px solid #f8f9fa;\r\n  left: 50%;\r\n  transform: translateX(-50%) rotate(45deg);\r\n}\r\n.b-timeline .b-milestone-wrap.b-sch-event-wrap .b-sch-event.b-milestone {\r\n  font-size: 1em;\r\n  top: 0.5em;\r\n}\r\n.b-timeline .b-milestone-wrap.b-sch-event-wrap .b-sch-event.b-milestone .b-sch-event-content {\r\n  height: 2.8em;\r\n  position: relative;\r\n  background-color: transparent;\r\n  font-size: max(0.5em, 20px);\r\n}\r\n.b-timeline .b-milestone-wrap.b-sch-event-wrap .b-sch-event.b-milestone label {\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  bottom: 0;\r\n  color: #bec0c1;\r\n}\r\n.b-timeline .b-milestone-wrap.b-sch-event-wrap .b-sch-event.b-milestone label:before {\r\n  content: " ";\r\n  position: absolute;\r\n  top: -2em;\r\n  left: 50%;\r\n  height: 2em;\r\n  border-left: 1px solid #d8d9da;\r\n  transform: translateX(-50%);\r\n}\r\n.b-timeline .b-sch-header-timeaxis-cell {\r\n  justify-content: flex-start;\r\n  color: #bec0c1;\r\n  padding: 0 0 0.5em 0.5em;\r\n}\r\n.b-timeline .b-sch-header-timeaxis-cell:before {\r\n  content: " ";\r\n  position: absolute;\r\n  left: 0;\r\n  bottom: 0;\r\n  height: 0.7em;\r\n  border-left: 1px solid #d8d9da;\r\n}\r\n.b-timeline .b-schedulerbase,\r\n.b-timeline .b-grid-body-container,\r\n.b-timeline .b-grid-vertical-scroller,\r\n.b-timeline .b-grid-subgrid,\r\n.b-timeline .b-sch-foreground-canvas {\r\n  overflow: visible !important;\r\n  contain: none !important;\r\n}\r\n.b-timeline.b-gridbase.b-firefox .b-grid-subgrid.b-grid-horizontal-scroller {\r\n  overflow: visible !important;\r\n}\r\n.b-timeline .b-grid-header-container,\r\n.b-timeline .b-grid-header-container.b-grid-vertical-overflow,\r\n.b-timeline .b-sch-header-timeaxis-cell,\r\n.b-timeline .b-grid-header-container .b-sch-timeaxiscolumn,\r\n.b-timeline .b-grid-header-container .b-sch-timeaxiscolumn:hover {\r\n  background: transparent !important;\r\n  box-shadow: none;\r\n  border: none;\r\n}\r\n.b-timeline .b-grid-header {\r\n  min-height: 1.5em;\r\n}\r\n.b-timeline .b-grid-vertical-overflow .b-grid-header-scroller:last-child {\r\n  border-right: none;\r\n}\r\n.b-timeline .b-timeline-startdate {\r\n  left: -1em;\r\n  transform: translateX(-100%);\r\n}\r\n.b-timeline .b-timeline-enddate {\r\n  right: -1em;\r\n  transform: translateX(100%);\r\n}\r\n.b-timeline .b-timeline-startdate,\r\n.b-timeline .b-timeline-enddate {\r\n  position: absolute;\r\n  top: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: #bec0c1;\r\n  min-width: 6em;\r\n  font-size: 0.9em;\r\n}\r\n\r\n.b-schedulerpro-issueresolutionpopup {\r\n  width: clamp(400px, 45%, 100%);\r\n  max-width: 80%;\r\n}\r\n.b-schedulerpro-issueresolutionpopup .b-error-description,\r\n.b-schedulerpro-issueresolutionpopup .b-invalid-dependencies-description {\r\n  display: block;\r\n  margin-bottom: 1em;\r\n  line-height: 1.5em;\r\n}\r\n.b-schedulerpro-issueresolutionpopup .b-radio {\r\n  margin-bottom: 1em;\r\n}\r\n.b-schedulerpro-issueresolutionpopup .b-radio .b-field-inner .b-checkbox-label {\r\n  text-transform: none;\r\n  font-size: 1em;\r\n}\r\n.b-schedulerpro-issueresolutionpopup .b-dependency-field {\r\n  width: 33em;\r\n}\r\n.b-schedulerpro-issueresolutionpopup .b-radiogroup-body-wrap {\r\n  background: transparent;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-resourcehistogram .b-grid-row {\r\n  z-index: 3;\r\n}\r\n.b-resourcehistogram .b-resourcehistogram-cell {\r\n  padding: 0;\r\n  border-right-width: 0;\r\n}\r\n.b-resourcehistogram .b-timeline-subgrid .b-grid-cell.b-focused::after {\r\n  display: none;\r\n}\r\n\r\n.b-histogram-bar-tooltip span.b-underallocated {\r\n  color: #78e582;\r\n}\r\n.b-histogram-bar-tooltip span.b-overallocated {\r\n  color: #ef8c80;\r\n}\r\n\r\n.b-resourcehistogram-histogram {\r\n  padding: 0;\r\n  background-color: transparent;\r\n}\r\n.b-resourcehistogram-histogram .b-bar-legend {\r\n  font-size: 75%;\r\n  pointer-events: none;\r\n}\r\n.b-resourcehistogram-histogram rect {\r\n  fill: #bbf2c1;\r\n}\r\n.b-resourcehistogram-histogram rect.b-underallocated {\r\n  fill: #78e582;\r\n}\r\n.b-resourcehistogram-histogram rect.b-underallocated:hover {\r\n  fill: #61e16e;\r\n}\r\n.b-resourcehistogram-histogram rect.b-overallocated {\r\n  fill: #ef8c80;\r\n}\r\n.b-resourcehistogram-histogram rect.b-overallocated:hover {\r\n  fill: #ed796b;\r\n}\r\n.b-resourcehistogram-histogram rect:hover {\r\n  fill: #a5eeac;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-resourceutilization .b-resourceutilization-cell {\r\n  padding: 0;\r\n  border-inline-end-width: 0;\r\n}\r\n\r\n.b-resourceutilization-histogram {\r\n  padding: 0;\r\n  background-color: transparent;\r\n}\r\n.b-resourceutilization-histogram svg g text.b-bar-legend {\r\n  font-size: 90%;\r\n  fill: #606263;\r\n  writing-mode: lr;\r\n  alignment-baseline: middle;\r\n  text-anchor: middle;\r\n  pointer-events: none;\r\n}\r\n.b-resourceutilization-histogram rect {\r\n  fill: #bbf2c1;\r\n}\r\n.b-resourceutilization-histogram rect.b-underallocated {\r\n  fill: #78e582;\r\n}\r\n.b-resourceutilization-histogram rect.b-underallocated:hover {\r\n  fill: #61e16e;\r\n}\r\n.b-resourceutilization-histogram rect.b-overallocated {\r\n  fill: #ef8c80;\r\n}\r\n.b-resourceutilization-histogram rect.b-overallocated:hover {\r\n  fill: #ed796b;\r\n}\r\n.b-resourceutilization-histogram rect:hover {\r\n  fill: #a5eeac;\r\n}\r\n\r\n.b-resource-row .b-resourceutilization-histogram svg g text.b-bar-legend {\r\n  font-size: 90%;\r\n  fill: #606263;\r\n}\r\n.b-resource-row .b-resourceutilization-histogram rect {\r\n  fill: #bbf2c1;\r\n}\r\n.b-resource-row .b-resourceutilization-histogram rect.b-underallocated {\r\n  fill: #78e582;\r\n}\r\n.b-resource-row .b-resourceutilization-histogram rect.b-underallocated:hover {\r\n  fill: #61e16e;\r\n}\r\n.b-resource-row .b-resourceutilization-histogram rect.b-overallocated {\r\n  fill: #ef8c80;\r\n}\r\n.b-resource-row .b-resourceutilization-histogram rect.b-overallocated:hover {\r\n  fill: #ed796b;\r\n}\r\n.b-resource-row .b-resourceutilization-histogram rect:hover {\r\n  fill: #a5eeac;\r\n}\r\n\r\n.b-assignment-row .b-resourceutilization-histogram svg g text.b-bar-legend {\r\n  font-size: 90%;\r\n  fill: #606263;\r\n}\r\n.b-assignment-row .b-resourceutilization-histogram rect {\r\n  fill: transparent;\r\n}\r\n.b-assignment-row .b-resourceutilization-histogram rect.b-underallocated {\r\n  fill: transparent;\r\n}\r\n.b-assignment-row .b-resourceutilization-histogram rect.b-underallocated:hover {\r\n  fill: transparent;\r\n}\r\n.b-assignment-row .b-resourceutilization-histogram rect.b-overallocated {\r\n  fill: transparent;\r\n}\r\n.b-assignment-row .b-resourceutilization-histogram rect.b-overallocated:hover {\r\n  fill: transparent;\r\n}\r\n.b-assignment-row .b-resourceutilization-histogram rect:hover {\r\n  fill: transparent;\r\n}\r\n\r\n@keyframes fadeInOpacity {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n.b-sch-style-plain.b-sch-event-wrap > .b-sch-event.b-segmented:not(.b-milestone), .b-sch-style-plain.b-sch-event-wrap > .b-sch-event.b-segmented:not(.b-milestone).b-sch-event-selected,\r\n.b-sch-style-border.b-sch-event-wrap > .b-sch-event.b-segmented:not(.b-milestone),\r\n.b-sch-style-border.b-sch-event-wrap > .b-sch-event.b-segmented:not(.b-milestone).b-sch-event-selected,\r\n.b-sch-style-colored.b-sch-event-wrap > .b-sch-event.b-segmented:not(.b-milestone),\r\n.b-sch-style-colored.b-sch-event-wrap > .b-sch-event.b-segmented:not(.b-milestone).b-sch-event-selected,\r\n.b-sch-style-calendar.b-sch-event-wrap > .b-sch-event.b-segmented:not(.b-milestone),\r\n.b-sch-style-calendar.b-sch-event-wrap > .b-sch-event.b-segmented:not(.b-milestone).b-sch-event-selected,\r\n.b-sch-style-hollow.b-sch-event-wrap > .b-sch-event.b-segmented:not(.b-milestone),\r\n.b-sch-style-hollow.b-sch-event-wrap > .b-sch-event.b-segmented:not(.b-milestone).b-sch-event-selected,\r\n.b-sch-style-line.b-sch-event-wrap > .b-sch-event.b-segmented:not(.b-milestone),\r\n.b-sch-style-line.b-sch-event-wrap > .b-sch-event.b-segmented:not(.b-milestone).b-sch-event-selected,\r\n.b-sch-style-dashed.b-sch-event-wrap > .b-sch-event.b-segmented:not(.b-milestone),\r\n.b-sch-style-dashed.b-sch-event-wrap > .b-sch-event.b-segmented:not(.b-milestone).b-sch-event-selected,\r\n.b-sch-style-minimal.b-sch-event-wrap > .b-sch-event.b-segmented:not(.b-milestone),\r\n.b-sch-style-minimal.b-sch-event-wrap > .b-sch-event.b-segmented:not(.b-milestone).b-sch-event-selected,\r\n.b-sch-style-rounded.b-sch-event-wrap > .b-sch-event.b-segmented:not(.b-milestone),\r\n.b-sch-style-rounded.b-sch-event-wrap > .b-sch-event.b-segmented:not(.b-milestone).b-sch-event-selected {\r\n  border-width: 0;\r\n  background-color: transparent;\r\n}\r\n\r\n.b-sch-event-wrap.b-sch-style-line > .b-sch-event.b-segmented::before, .b-sch-event-wrap.b-sch-style-line > .b-sch-event.b-segmented::after,\r\n.b-sch-event-wrap.b-sch-style-dashed > .b-sch-event.b-segmented::before,\r\n.b-sch-event-wrap.b-sch-style-dashed > .b-sch-event.b-segmented::after {\r\n  content: unset;\r\n}\r\n.b-sch-event-wrap.b-sch-style-line > .b-sch-event.b-segmented .b-sch-event,\r\n.b-sch-event-wrap.b-sch-style-dashed > .b-sch-event.b-segmented .b-sch-event {\r\n  top: 0;\r\n}\r\n\r\n.b-sch-style-minimal .b-sch-event .b-sch-event-segments {\r\n  height: 100%;\r\n}\r\n\r\n.b-event-segment-renamer {\r\n  z-index: 15;\r\n}\r\n\r\n.b-calculation-progress-wrap {\r\n  position: absolute;\r\n  bottom: 0;\r\n  display: flex;\r\n  width: 100%;\r\n  height: 2px;\r\n  z-index: 100;\r\n}\r\n\r\n.b-calculation-progress {\r\n  background: #27ca37;\r\n  opacity: 0.3;\r\n}\r\n\r\n.b-sch-event.b-segmented, .b-sch-event.b-segmented:hover {\r\n  overflow: visible;\r\n  background-image: none;\r\n  border-width: 0;\r\n  background-color: transparent;\r\n  box-shadow: none;\r\n}\r\n.b-sch-event .b-sch-event-segments {\r\n  position: absolute;\r\n  top: 0;\r\n  width: 100%;\r\n  height: calc(50% + 0.5px);\r\n  border-bottom: 1px dashed;\r\n  border-color: #999;\r\n  pointer-events: none;\r\n}\r\n.b-sch-event .b-sch-event-segments .b-sch-event-segment {\r\n  pointer-events: all;\r\n  position: absolute;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.b-sch-event-wrap:not(.b-milestone-wrap) .b-sch-event.b-sch-event-selected.b-segmented, .b-sch-event-wrap:not(.b-milestone-wrap) .b-sch-event.b-sch-event-selected.b-segmented:hover, .b-sch-event-wrap:not(.b-milestone-wrap) .b-sch-event:hover.b-segmented, .b-sch-event-wrap:not(.b-milestone-wrap) .b-sch-event:hover.b-segmented:hover, .b-sch-event-wrap:not(.b-milestone-wrap) .b-sch-event.b-sch-event-selected:hover.b-segmented, .b-sch-event-wrap:not(.b-milestone-wrap) .b-sch-event.b-sch-event-selected:hover.b-segmented:hover {\r\n  background-image: none;\r\n  border-width: 0;\r\n  background-color: transparent;\r\n  box-shadow: none;\r\n}\r\n.b-using-keyboard .b-sch-event-wrap:not(.b-milestone-wrap).b-active .b-sch-event-segment {\r\n  outline: none;\r\n}\r\n\r\n.b-popup.b-schedulerpro-taskeditor .b-tabpanel-body {\r\n  padding-bottom: 0;\r\n}\r\n',""]),e.exports=c},"./fonts/acumatica-font-v1.eot?q9otuf":(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>i});const i=r.p+"f59e2f9cf6a699681ed2c27cddafb11d.eot"},"./fonts/acumatica-font-v1.svg?q9otuf":(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>i});const i=r.p+"b246d48344db53b53ffe24bc8fb4d112.svg"},"./fonts/acumatica-font-v1.ttf?q9otuf":(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>i});const i=r.p+"3553837ccdb7c48c04a1844420019c32.ttf"},"./src/screens/FS/FS300300/styles/fonts/fa-solid-900.ttf":(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>i});const i=r.p+"e615bbcb258550973c165dfc0d871c96.ttf"},"app.html":(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>i});const i='<template>\r\n\t<require from="./app.css"></require>\r\n\r\n\t<div class="splash ${!initialized ? \'initialization\' : \'loading\'}" if.bind="!initialized || loading">\r\n\t\t<div class="message" if.bind="!initialized">Screen is loading...</div>\r\n\t</div>\r\n\t<qp-wait-cursor></qp-wait-cursor>\r\n\t<qp-informer-rack></qp-informer-rack>\r\n\r\n\t<qp-splitter class="page-container modern-ui" id="splitterVM"\r\n\t\tdisabled.bind="sidebarDisabled"\r\n\t\tunmargin.bind="!sidebarDisabled"\r\n\t\tsplitter-state.bind="sidebarDisabled ? \'collapsed-second\' : \'normal\'"\r\n\t\treversed.bind="true"\r\n\t\tcollapse-mode="shrink"\r\n\t\tdisable-collapse.bind="true"\r\n\t\tinvisible.bind="true"\r\n\t>\r\n\t\t<split-pane id="mainWorkspace" class="page-content qp-collapsible-scope">\r\n\t\t\t<div id="page-caption" class="page-caption">\r\n\t\t\t\t<qp-screen-configuration-menu if.bind="editMode && isMainFrame"></qp-screen-configuration-menu>\r\n\r\n\t\t\t\t<div id="pageHeader" class="pageHeader" if.bind="screenService">\r\n\t\t\t\t\t<qp-data-component name="TitleData" screen.bind="viewModel" hidden.bind="!isMainFrame"></qp-data-component>\r\n\t\t\t\t\t<qp-data-component name="SysMenu" screen.bind="viewModel" if.bind="isMainFrame"></qp-data-component>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<qp-translation-validation component.bind="translationValidationComponent"></qp-translation-validation>\r\n\t\t\t\t<div id="InfoBannerContainer" if.bind="isMainFrame"></div>\r\n\t\t\t\t<qp-data-component if.bind="screenService" name="ScreenToolbar" screen.bind="viewModel"></qp-data-component>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class="page-host" ref="contentElement">\r\n\t\t\t\t<qp-data-components if.bind="screenService" category="page-host" screen.bind="viewModel"></qp-data-components>\r\n\r\n\t\t\t\t<template if.bind="useStaticRendering">\r\n\t\t\t\t\t<compose class="v-stack page-workspace" view-model.bind="screenName" model.bind="$this" ></compose>\r\n\t\t\t\t</template>\r\n\t\t\t\t<template else>\r\n\t\t\t\t\t<customizable screen-name.bind="screenName"></customizable>\r\n\t\t\t\t</template>\r\n\t\t\t</div>\r\n\t\t</split-pane>\r\n\t\t<split-pane class="page-container-side-panel">\r\n\t\t\t<qp-data-component if.bind="isMainFrame && screenService" name="SidePanelNavigationData"\r\n\t\t\t\tscreen.bind="viewModel" view-model.ref="sidePanelComponent"></qp-data-component>\r\n\t\t</split-pane>\r\n\t</qp-splitter>\r\n\t<div if.bind="screenService">\r\n\t\t<qp-data-component name="LongRunData" screen.bind="viewModel"></qp-data-component>\r\n\t\t<qp-data-component name="QuickProcessingData" screen.bind="viewModel"></qp-data-component>\r\n\t\t<qp-data-component name="ProcessingResultData" screen.bind="viewModel"></qp-data-component>\r\n\t</div>\r\n</template>\r\n'},"screens/FS/FS300300/FS300300.html":(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>i});const i='<template>\n\t<require from="./styles/schedulerpro.stockholm.css"></require>\n\t<require from="./styles/qp-scheduler.css"></require>\n\t<require from="./styles/qp-scheduler-splitters.css"></require>\n\t<require from="./styles/qp-scheduler-popup.css"></require>\n\t<require from="./styles/FS300300.css"></require>\n\t<require from="./styles/FS300300-boxes.css"></require>\n\t<require from="./bing-map"></require>\n\n\t<div ref="serviceOrderPopupInnerHolder" class="qp-sch-popup-holder">\n\t\t<div class="qp-sch-popup-data qp-sch-popup-view-data transparent" ref="serviceOrderPopupInner">\n\t\t\t<ux-dialog class="dialog qp-dialog qp-collapsible-scope" id="serviceOrderPopupDialogID">\n\t\t\t\t<div class="qp-dialog-header qp-collapsible-anchor">\n\t\t\t\t\t<div class="qp-dialog-title">${Labels.ServiceOrder}</div>\n\t\t\t\t</div>\n\t\t\t\t<ux-dialog-body qp-collapsible="" class="v-stack gray-pane" id="serviceOrderPopupForm">\n\t\t\t\t\t<qp-fieldset view.bind="SelectedSO" id="groupSOPopupMainID" caption="">\n\t\t\t\t\t\t<field name="RefNbr" pinned="" config-allow-edit.bind="true"></field>\n\t\t\t\t\t\t<field name="Status" pinned=""></field>\n\t\t\t\t\t\t<field name="SLAETA"></field>\n\t\t\t\t\t\t<field name="DocDesc" pinned=""></field>\n\t\t\t\t\t\t<field name="BranchLocationCD" pinned="" config-allow-edit.bind="true"></field>\n\t\t\t\t\t\t<field name="ServiceContractRefNbr" pinned="false" config-allow-edit.bind="true"></field>\n\t\t\t\t\t\t<field name="CustPORefNbr" config-allow-edit.bind="true"></field>\n\t\t\t\t\t\t<field name="ProjectID" config-allow-edit.bind="true"></field>\n\t\t\t\t\t\t<field name="WaitingForParts"></field>\n\t\t\t\t\t\t<field name="Priority"></field>\n\t\t\t\t\t</qp-fieldset>\n\t\t\t\t\t<qp-fieldset view.bind="SelectedSO" id="groupSOPopupCustomerID" caption.bind="localizationService.localize(&quot;FS300300.groupSOPopupCustomerID.caption&quot;, &quot;Customer&quot;)" caption.original-value="Customer">\n\t\t\t\t\t\t<field name="CustomerID" pinned="" config-allow-edit.bind="true"></field>\n\t\t\t\t\t\t<field name="FullAddress"></field>\n\t\t\t\t\t\t<field name="ContactID" config-allow-edit.bind="true"></field>\n\t\t\t\t\t\t<field name="Phone1" pinned=""></field>\n\t\t\t\t\t\t<field name="Email"></field>\n\t\t\t\t\t</qp-fieldset>\n\t\t\t\t\t\x3c!-- TODO: Replace it when [AC-292107] is implemented --\x3e\n\t\t\t\t\t<div class="qp-fieldset qp-sch-grid-fieldset" id="groupSOPopupEmployeesID">\n\t\t\t\t\t\t<div class="qp-fieldset-caption"><legend class="qp-caption">${Captions.DefaultStaff}</legend></div>\n\t\t\t\t\t\t<div id="serviceOrderEmployeesFormID" wg-container="" class="v-stack">\n\t\t\t\t\t\t\t<qp-grid config.bind="popupSOEmployeesConfig" view.bind="SelectedSOEmployees">\n\t\t\t\t\t\t\t</qp-grid>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</ux-dialog-body>\n\t\t\t</ux-dialog>\n\t\t</div>\n\t</div>\n\n\n\t<div ref="appointmentPopupInnerHolder" class="qp-sch-popup-holder">\n\t\t<div class="qp-sch-popup-data qp-sch-popup-view-data transparent" ref="appointmentPopupInner">\n\t\t\t<ux-dialog class="dialog qp-dialog qp-collapsible-scope" id="appointmentPopupDialogID">\n\t\t\t\t<div class="qp-dialog-header qp-collapsible-anchor">\n\t\t\t\t\t<div class="qp-dialog-title">${Labels.Appointment}</div>\n\t\t\t\t</div>\n\t\t\t\t<qp-tool-bar view-model.ref="appointmentToolBar" config.bind="topBarAppointmentConfig"></qp-tool-bar>\n\t\t\t\t<ux-dialog-body qp-collapsible="" class="v-stack gray-pane" id="appointmentPopupForm">\n\t\t\t\t\t<qp-fieldset view.bind="SelectedAppointment" id="groupAppointmentPopupMainID" caption="">\n\t\t\t\t\t\t<field name="RefNbr" pinned="" config-allow-edit.bind="true"></field>\n\t\t\t\t\t\t<field name="Status" pinned=""></field>\n\t\t\t\t\t\t<field name="DocDesc" pinned=""></field>\n\t\t\t\t\t\t<field name="ScheduledDateTimeBegin"></field>\n\t\t\t\t\t\t<field name="ScheduledDateTimeEnd"></field>\n\t\t\t\t\t</qp-fieldset>\n\t\t\t\t\t<qp-fieldset view.bind="SelectedSO" id="groupAppointmentPopupSOID" caption.bind="localizationService.localize(&quot;FS300300.groupAppointmentPopupSOID.caption&quot;, &quot;Service Order&quot;)" caption.original-value="Service Order">\n\t\t\t\t\t\t<field name="RefNbr" pinned="" config-allow-edit.bind="true"></field>\n\t\t\t\t\t\t<field name="Status"></field>\n\t\t\t\t\t\t<field name="SLAETA"></field>\n\t\t\t\t\t\t<field name="BranchLocationCD" pinned="" config-allow-edit.bind="true"></field>\n\t\t\t\t\t\t<field name="ServiceContractRefNbr" pinned="false" config-allow-edit.bind="true"></field>\n\t\t\t\t\t\t<field name="CustPORefNbr" config-allow-edit.bind="true"></field>\n\t\t\t\t\t\t<field name="ProjectID" config-allow-edit.bind="true"></field>\n\t\t\t\t\t\t<field name="WaitingForParts"></field>\n\t\t\t\t\t\t<field name="Priority"></field>\n\t\t\t\t\t</qp-fieldset>\n\t\t\t\t\t<qp-fieldset view.bind="SelectedSO" id="groupAppointmentPopupCustomerID" caption.bind="localizationService.localize(&quot;FS300300.groupAppointmentPopupCustomerID.caption&quot;, &quot;Customer&quot;)" caption.original-value="Customer">\n\t\t\t\t\t\t<field name="CustomerID" pinned="" config-allow-edit.bind="true"></field>\n\t\t\t\t\t\t<field name="SelectedSO.FullAddress"></field>\n\t\t\t\t\t\t<field name="SelectedSO.ContactID" config-allow-edit.bind="true"></field>\n\t\t\t\t\t\t<field name="SelectedSO.Phone1" pinned=""></field>\n\t\t\t\t\t\t<field name="SelectedSO.Email"></field>\n\t\t\t\t\t</qp-fieldset>\n\t\t\t\t\t\x3c!-- TODO: Replace it when [AC-292107] is implemented --\x3e\n\t\t\t\t\t<div class="qp-fieldset qp-sch-grid-fieldset" id="groupAppointmentPopupEmployeesID">\n\t\t\t\t\t\t<div class="qp-fieldset-caption"><legend class="qp-caption">${Captions.Staff}</legend></div>\n\t\t\t\t\t\t<div id="appointmentPopupEmployeesFormID" wg-container="" class="v-stack">\n\t\t\t\t\t\t\t<qp-grid config.bind="popupAppointmentEmployeesConfig" view.bind="SelectedAppointmentEmployees">\n\t\t\t\t\t\t\t</qp-grid>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</ux-dialog-body>\n\t\t\t</ux-dialog>\n\t\t</div>\n\t</div>\n\n\t<div ref="editPopupInnerHolder" class="qp-sch-popup-holder">\n\t\t<div class="qp-sch-popup-data qp-sch-popup-edit-data transparent" ref="editPopupInner">\n\t\t\t<ux-dialog class="dialog qp-dialog qp-collapsible-scope" id="editPopupDialogID">\n\t\t\t\t<ux-dialog-header show-close-button.bind="false">\n\t\t\t\t\t<div class="qp-dialog-header">\n\t\t\t\t\t\t<div class="qp-dialog-title">${Labels.NewAppointment}</div>\n\t\t\t\t\t\t<div class="qp-collapsible-anchor"></div>\n\t\t\t\t\t\t<qp-icon class="qp-dialog-close" imagesrc="svg:main@close" click.delegate="closePopup()">\n\t\t\t\t\t\t</qp-icon>\n\t\t\t\t\t</div>\n\t\t\t\t</ux-dialog-header>\n\t\t\t\t<qp-tool-bar view-model.ref="newAppointmentToolBar" config.bind="topBarNewAppointmentConfig"></qp-tool-bar>\n\t\t\t\t<ux-dialog-body qp-collapsible="" class="v-stack gray-pane" id="editPopupForm">\n\t\t\t\t\t<qp-fieldset id="groupEditedAppointmentSOID" view.bind="MainAppointmentFilter" caption.bind="localizationService.localize(&quot;FS300300.groupEditedAppointmentSOID.caption&quot;, &quot;Service Order&quot;)" caption.original-value="Service Order">\n\t\t\t\t\t\t<field name="SrvOrdType"></field>\n\t\t\t\t\t\t<field name="SORefNbr" config.bind="{allowEdit: true}"></field>\n\t\t\t\t\t\t<field name="Status"></field>\n\t\t\t\t\t\t<field name="CustomerID" config.bind="{allowEdit: true}"></field>\n\t\t\t\t\t\t<field name="LocationID" config.bind="{allowEdit: true}"></field>\n\t\t\t\t\t\t<field name="ContactID" config.bind="{allowEdit: true}"></field>\n\t\t\t\t\t\t<field name="BranchLocationID" config.bind="{allowEdit: true}"></field>\n\t\t\t\t\t</qp-fieldset>\n\t\t\t\t\t<qp-fieldset id="groupEditedAppointmentMainID" view.bind="MainAppointmentFilter" caption.bind="localizationService.localize(&quot;FS300300.groupEditedAppointmentMainID.caption&quot;, &quot;Appointment&quot;)" caption.original-value="Appointment">\n\t\t\t\t\t\t<field name="Description"></field>\n\t\t\t\t\t\t<field name="ScheduledDateTimeBegin_Date">\n\t\t\t\t\t\t\t<qp-field control-state.bind="MainAppointmentFilter.ScheduledDateTimeBegin_Time" config-time-mode.bind="true"></qp-field>\n\t\t\t\t\t\t</field>\n\t\t\t\t\t\t<field name="Duration"></field>\n\t\t\t\t\t\t<field name="LongDescr" config-type.bind="1" config-rows.bind="3"></field>\n\t\t\t\t\t\t\x3c!-- <field name="AddressLine1"></field>\n\t\t\t\t\t\t<field name="EditedContact.Phone1"></field>\n\t\t\t\t\t\t<field name="EditedContact.Email"></field> --\x3e\n\t\t\t\t\t</qp-fieldset>\n\t\t\t\t\t\x3c!-- TODO: Replace it when [AC-292107] is implemented --\x3e\n\t\t\t\t\t<div class="qp-fieldset qp-sch-grid-fieldset" id="groupEditedAppointmentPopupEmployeesID">\n\t\t\t\t\t\t<div class="qp-fieldset-caption"><legend class="qp-caption">${Captions.Staff}</legend></div>\n\t\t\t\t\t\t<div id="editedAppointmentPopupEmployeesFormID" wg-container="" class="v-stack">\n\t\t\t\t\t\t\t<qp-grid config.bind="popupNewAppointmentEmployeesConfig" view.bind="EditedAppointmentEmployees">\n\t\t\t\t\t\t\t</qp-grid>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</ux-dialog-body>\n\t\t\t</ux-dialog>\n\t\t</div>\n\t</div>\n\n\t<div pointerdown.delegate="closePopup($event)" class="stretch">\n\t\t<qp-splitter id="mainSplitterId" class="horizontal-splitter" config.bind="mainSplitterConfig">\n\t\t\t<split-pane slot="A">\n\t\t\t\t<div class="main-tab-bar" id="mainTabBarHolderID">\n\t\t\t\t\t<qp-tabbar view-model.ref="mainTabBar" id="mainTabBar">\n\t\t\t\t\t\t<qp-tab id="tabServiceOrders" visible.from-view="tabServiceOrdersVisible" caption.bind="localizationService.localize(&quot;FS300300.tabServiceOrders.caption&quot;, &quot;Unscheduled&quot;)" caption.original-value="Unscheduled">\n\t\t\t\t\t\t\t<div class="qp-sch-grid-container">\n\t\t\t\t\t\t\t\t<div class="qp-sch-hide-grid" wg-container="">\n\t\t\t\t\t\t\t\t\t<qp-grid id="serviceOrderGridID" view.bind="ServiceOrders" view-model.ref="serviceOrdersGrid" on-data-ready.call="serviceOrdersDataReadyHandler(grid, args)">\n\t\t\t\t\t\t\t\t</qp-grid></div>\n\t\t\t\t\t\t\t\t<div class="qp-sch-left-container qp-sch-so-container" id="schedulerSOContainer">\n\t\t\t\t\t\t\t\t\t<div class="qp-sch-config-form">\n\t\t\t\t\t\t\t\t\t\t<div class="v-stack">\n\t\t\t\t\t\t\t\t\t\t\t<qp-fieldset class="qp-sch-config-left" id="serviceOrdersBrickLeftID" view.bind="SelectedSO" view-model.ref="serviceOrdersBrickLeft" caption.bind="localizationService.localize(&quot;FS300300.serviceOrdersBrickLeftID.caption&quot;, &quot;Service Order - Left&quot;)" caption.original-value="Service Order - Left">\n\t\t\t\t\t\t\t\t\t\t\t\t<field name="RefNbr"></field>\n\t\t\t\t\t\t\t\t\t\t\t\t<field name="SelectedSO.CustomerAcctName"></field>\n\t\t\t\t\t\t\t\t\t\t\t\t<field name="SelectedSO.FullAddress"></field>\n\t\t\t\t\t\t\t\t\t\t\t\t<field name="DocDesc"></field>\n\t\t\t\t\t\t\t\t\t\t\t</qp-fieldset>\n\t\t\t\t\t\t\t\t\t\t\t<qp-fieldset class="qp-sch-config-right" id="serviceOrdersBrickRightID" view.bind="SelectedSO" view-model.ref="serviceOrdersBrickRight" caption.bind="localizationService.localize(&quot;FS300300.serviceOrdersBrickRightID.caption&quot;, &quot;Service Order - Right&quot;)" caption.original-value="Service Order - Right">\n\t\t\t\t\t\t\t\t\t\t\t\t<field name="Severity"></field>\n\t\t\t\t\t\t\t\t\t\t\t\t<field name="Priority"></field>\n\t\t\t\t\t\t\t\t\t\t\t</qp-fieldset>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</qp-tab>\n\t\t\t\t\t\t<qp-tab id="tabAppointments" visible.from-view="tabSearchAppointmentsVisible" caption.bind="localizationService.localize(&quot;FS300300.tabAppointments.caption&quot;, &quot;Scheduled&quot;)" caption.original-value="Scheduled">\n\t\t\t\t\t\t\t<div class="qp-sch-grid-container">\n\t\t\t\t\t\t\t\t<div class="qp-sch-hide-grid" wg-container="">\n\t\t\t\t\t\t\t\t\t<qp-grid id="searchAppointmentsGridID" view.bind="SearchAppointments" view-model.ref="searchAppointmentsGrid" on-data-ready.call="searchAppointmentsDataReadyHandler(grid, args)">\n\t\t\t\t\t\t\t\t</qp-grid></div>\n\t\t\t\t\t\t\t\t<div class="qp-sch-left-container qp-sch-search-container" id="searchAppointmentContainer">\n\t\t\t\t\t\t\t\t\t<div class="qp-sch-config-form">\n\t\t\t\t\t\t\t\t\t\t<div class="v-stack">\n\t\t\t\t\t\t\t\t\t\t\t<qp-fieldset class="qp-sch-config-left" id="searchAppointmentBrickLeftID" view.bind="SelectedAppointment" view-model.ref="searchAppointmentBrickLeft" caption.bind="localizationService.localize(&quot;FS300300.searchAppointmentBrickLeftID.caption&quot;, &quot;Appointment - Left&quot;)" caption.original-value="Appointment - Left">\n\t\t\t\t\t\t\t\t\t\t\t\t<field name="Status"></field>\n\t\t\t\t\t\t\t\t\t\t\t\t<field name="RefNbr" config-allow-edit.bind="true"></field>\n\t\t\t\t\t\t\t\t\t\t\t\t<field name="SelectedSO.CustomerAcctName"></field>\n\t\t\t\t\t\t\t\t\t\t\t\t<field name="SelectedSO.FullAddress"></field>\n\t\t\t\t\t\t\t\t\t\t\t\t<field name="SelectedSO.DocDesc"></field>\n\t\t\t\t\t\t\t\t\t\t\t\t<field name="ScheduledDateTimeBegin"></field>\n\t\t\t\t\t\t\t\t\t\t\t</qp-fieldset>\n\t\t\t\t\t\t\t\t\t\t\t<qp-fieldset class="qp-sch-config-right" id="searchAppointmentBrickRightID" view.bind="SelectedAppointment" view-model.ref="searchAppointmentBrickRight" caption.bind="localizationService.localize(&quot;FS300300.searchAppointmentBrickRightID.caption&quot;, &quot;Appointment - Right&quot;)" caption.original-value="Appointment - Right">\n\t\t\t\t\t\t\t\t\t\t\t\t<field name="StaffCntr"></field>\n\t\t\t\t\t\t\t\t\t\t\t\t<field name="SelectedSO.Severity"></field>\n\t\t\t\t\t\t\t\t\t\t\t\t<field name="SelectedSO.Priority"></field>\n\t\t\t\t\t\t\t\t\t\t\t</qp-fieldset>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</qp-tab>\n\t\t\t\t\t</qp-tabbar>\n\t\t\t\t\t\x3c!-- TODO: This needs to be refactored -- we should manage loading of views from TS only --\x3e\n\t\t\t\t\t<div class="hidden" wg-container="">\n\t\t\t\t\t\t<qp-fieldset class="hidden" id="groupLastUpdatedAppointmentFilterID" view-model.ref="groupLastUpdatedAppointmentFilter" view.bind="LastUpdatedAppointmentFilter">\n\t\t\t\t\t\t\t<field name="AppointmentID" config-allow-edit.bind="true"></field>\n\t\t\t\t\t\t</qp-fieldset>\n\t\t\t\t\t\t<qp-grid view-model.ref="lastUpdatedGrid" view.bind="LastUpdatedAppointment" id="lastUpdatedGridID" on-data-ready.call="appointmentsDataReadyHandler(grid, args)">\n\t\t\t\t\t</qp-grid></div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<qp-fieldset class="hidden" id="groupDatesFilterID" view.bind="DatesFilter">\n\t\t\t\t\t\t\t<field name="DateSelected"></field>\n\t\t\t\t\t\t</qp-fieldset>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<qp-fieldset class="hidden" id="groupInitDataID" view.bind="InitData">\n\t\t\t\t\t\t</qp-fieldset>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<qp-fieldset class="hidden" id="groupSetupID" view.bind="Setup">\n\t\t\t\t\t\t</qp-fieldset>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<qp-fieldset class="hidden" id="groupUpdatedAppointmentID" view.bind="UpdatedAppointment">\n\t\t\t\t\t\t\t<field name="AppointmentID"></field>\n\t\t\t\t\t\t</qp-fieldset>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</split-pane>\n\t\t\t<split-pane slot="B">\n\t\t\t\t<qp-splitter id="mapSplitterId" class="horizontal-splitter" config.bind="mapSplitterConfig" view-model.ref="mapSplitter" on-condition-changed.call="mapSplitterStateChanged()">\n\t\t\t\t\t<split-pane slot="A">\n\t\t\t\t\t\t<div class="qp-sch-grid-container qp-sch-calendar-container">\n\t\t\t\t\t\t\t<qp-tabbar view-model.ref="schedulerTabBar" id="schedulerTabBarId">\n\t\t\t\t\t\t\t\t<qp-tab repeat.for="tab of SchedulerGridFilters" id.to-view="tab.filterID" caption="${tab.filterName}" wg-exclude="">\n\t\t\t\t\t\t\t</qp-tab></qp-tabbar>\n\t\t\t\t\t\t\t<div class="qp-sch-grid-container-inner">\n\t\t\t\t\t\t\t\t<div class="qp-sch-hide-grid" wg-container="">\n\t\t\t\t\t\t\t\t\t<qp-grid view-model.ref="schedulerGrid" view.bind="AppointmentsAllStaff" id="appointmentsAllStaffGridID" on-data-ready.call="appointmentsDataReadyHandler(grid, args)" on-active-filter-changed.call="onActiveFilterChanged(args)" on-filters-changed.call="onFiltersChanged(args)">\n\t\t\t\t\t\t\t\t</qp-grid></div>\n\t\t\t\t\t\t\t\t<div class="qp-sch-main-container" id="schedulerMainContainer">\n\t\t\t\t\t\t\t\t\t<div class="qp-sch-config-form">\n\t\t\t\t\t\t\t\t\t\t<div class="v-stack">\n\t\t\t\t\t\t\t\t\t\t\t<qp-fieldset class="qp-sch-config-left" id="appointmentsBrickLeftID" view.bind="SelectedAppointment" view-model.ref="appointmentsBrickLeft" caption.bind="localizationService.localize(&quot;FS300300.appointmentsBrickLeftID.caption&quot;, &quot;Appointment - Left&quot;)" caption.original-value="Appointment - Left">\n\t\t\t\t\t\t\t\t\t\t\t\t<field name="RefNbr" config-allow-edit.bind="true"></field>\n\t\t\t\t\t\t\t\t\t\t\t\t<field name="SelectedSO.CustomerAcctName"></field>\n\t\t\t\t\t\t\t\t\t\t\t</qp-fieldset>\n\t\t\t\t\t\t\t\t\t\t\t<qp-fieldset class="qp-sch-config-right" id="appointmentsBrickRightID" view.bind="SelectedAppointment" view-model.ref="appointmentsBrickRight" caption.bind="localizationService.localize(&quot;FS300300.appointmentsBrickRightID.caption&quot;, &quot;Appointment - Right&quot;)" caption.original-value="Appointment - Right">\n\t\t\t\t\t\t\t\t\t\t\t\t<field name="StaffCntr"></field>\n\t\t\t\t\t\t\t\t\t\t\t\t<field name="SelectedSO.Severity"></field>\n\t\t\t\t\t\t\t\t\t\t\t\t<field name="SelectedSO.Priority"></field>\n\t\t\t\t\t\t\t\t\t\t\t</qp-fieldset>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</split-pane>\n\t\t\t\t\t<split-pane slot="B">\n\t\t\t\t\t\t<bing-map view-model.ref="mainMap" width="100%" height="100%" class="main-map"></bing-map>\n\t\t\t\t\t</split-pane>\n\t\t\t\t</qp-splitter>\n\t\t\t</split-pane>\n\t\t</qp-splitter>\n\t\t<qp-tool-bar view-model.ref="rightToolBar" config.bind="rightToolBarConfig" portal="target.bind: schedulerFilter; position: afterbegin">\n\t\t</qp-tool-bar>\n\t\t<li class="date-picker qp-tool-bar-item" portal="target.bind: prevPeriodButton; position: afterend">\n\t\t\t<qp-datetime-edit value.two-way="pickerDate | dateUTC:false" config.bind="startDatePickerConfig" containerless="">\n\t\t\t</qp-datetime-edit>\n\t\t</li>\n\t</div>\n\t<div class="hidden">\n\t\t<qp-hyper-icon view-model.ref="iconPriorityHigh" images.bind="{ normal: \'svg:fs@priorityHigh\' }"></qp-hyper-icon>\n\t\t<qp-hyper-icon view-model.ref="iconPriorityMedium" images.bind="{ normal: \'svg:fs@priorityMedium\' }"></qp-hyper-icon>\n\t\t<qp-hyper-icon view-model.ref="iconPriorityLow" images.bind="{ normal: \'svg:fs@priorityLow\' }"></qp-hyper-icon>\n\t\t<qp-hyper-icon view-model.ref="iconSeverityHigh" images.bind="{ normal: \'svg:fs@severityHigh\' }"></qp-hyper-icon>\n\t\t<qp-hyper-icon view-model.ref="iconSeverityMedium" images.bind="{ normal: \'svg:fs@severityMedium\' }"></qp-hyper-icon>\n\t\t<qp-hyper-icon view-model.ref="iconSeverityLow" images.bind="{ normal: \'svg:fs@severityLow\' }"></qp-hyper-icon>\n\t\t<qp-hyper-icon view-model.ref="iconPriorityDarkHigh" images.bind="{ normal: \'svg:fs@priorityDarkHigh\' }"></qp-hyper-icon>\n\t\t<qp-hyper-icon view-model.ref="iconPriorityDarkMedium" images.bind="{ normal: \'svg:fs@priorityDarkMedium\' }"></qp-hyper-icon>\n\t\t<qp-hyper-icon view-model.ref="iconPriorityDarkLow" images.bind="{ normal: \'svg:fs@priorityDarkLow\' }"></qp-hyper-icon>\n\t\t<qp-hyper-icon view-model.ref="iconSeverityDarkHigh" images.bind="{ normal: \'svg:fs@severityDarkHigh\' }"></qp-hyper-icon>\n\t\t<qp-hyper-icon view-model.ref="iconSeverityDarkMedium" images.bind="{ normal: \'svg:fs@severityDarkMedium\' }"></qp-hyper-icon>\n\t\t<qp-hyper-icon view-model.ref="iconSeverityDarkLow" images.bind="{ normal: \'svg:fs@severityDarkLow\' }"></qp-hyper-icon>\n\t\t<qp-hyper-icon view-model.ref="iconMultiEmployee" images.bind="{ normal: \'svg:fs@multiEmployee\' }"></qp-hyper-icon>\n\t\t<qp-hyper-icon view-model.ref="iconMultiEmployeeDark" images.bind="{ normal: \'svg:fs@multiEmployeeDark\' }"></qp-hyper-icon>\n\t\t<qp-hyper-icon view-model.ref="iconDatePicker" images.bind="{ normal: \'svg:main@datePicker\' }"></qp-hyper-icon>\n\t</div>\n</template>'},"./static/basic-layout.css":(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>c});var i=r("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),o=r.n(i),s=r("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].use[1]!./static/basic-layout.css"),a=r.n(s),l={insert:"head",singleton:!1};o()(a(),l);const c=a().locals||{}},"./static/custom.css":(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>c});var i=r("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),o=r.n(i),s=r("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].use[1]!./static/custom.css"),a=r.n(s),l={insert:"head",singleton:!1};o()(a(),l);const c=a().locals||{}},"./static/font-awesome.css":(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>c});var i=r("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),o=r.n(i),s=r("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].use[1]!./static/font-awesome.css"),a=r.n(s),l={insert:"head",singleton:!1};o()(a(),l);const c=a().locals||{}},"./static/styles.css":(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>c});var i=r("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),o=r.n(i),s=r("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].use[1]!./static/styles.css"),a=r.n(s),l={insert:"head",singleton:!1};o()(a(),l);const c=a().locals||{}},app:(e,n,r)=>{"use strict";r.r(n),r.d(n,{App:()=>y});var i=r("aurelia-framework"),o=r("./node_modules/aurelia-logging/dist/native-modules/aurelia-logging.js"),s=r("aurelia-event-aggregator"),a=r("./node_modules/aurelia-binding/dist/native-modules/aurelia-binding.js"),l=r("./node_modules/aurelia-dependency-injection/dist/native-modules/aurelia-dependency-injection.js"),c=r("./node_modules/client-controls/client-controls.js"),d=r("./node_modules/client-controls/services/preferences/index.js"),u=r("./src/screen-utils.ts"),h=r("./node_modules/client-controls/services/localization.js"),g=r("./node_modules/client-controls/services/alert-service.js"),p=r("./node_modules/client-controls/services/screen-service.js"),m=r("./node_modules/client-controls/services/keyboard-service.js"),f=r("./node_modules/client-controls/controls/dialog/base-dialog/dialog-helper.js"),b=r("./node_modules/client-controls/utils/index.js"),__decorate=function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);return s>3&&a&&Object.defineProperty(n,r,a),a},__metadata=function(e,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,n)},__awaiter=function(e,n,r,i){return new(r||(r=Promise))((function(o,s){function fulfilled(e){try{step(i.next(e))}catch(e){s(e)}}function rejected(e){try{step(i.throw(e))}catch(e){s(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(n){n(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,n||[])).next())}))};(0,o.getLogger)("qp-app");let v=class Messages{};v.ScreenID="Screen ID",v.Note="Note",v=__decorate([h.localizable],v);let y=class App{constructor(e,n,r,i,o,s,a,l,d){this.container=e,this.eventAggregator=n,this.dialogHelper=r,this.translator=i,this.alertServce=o,this.preferencesService=s,this.eventManager=a,this.redirectHelper=l,this.bindingEngine=d,this.useStaticRendering=!0,this.initialized=!1,this.loading=!1,this.isMainFrame=!0,this.eventSubscriptions=[],this.bindingSubscriptions=[],this.baseHref="",this.editMode=!1,this.Msg=v,this.giScreenID="GenericInquiry",this.translationValidationComponent=new c.TranslationValidationDataComponent,this.openDialogs=[],this.screenEventManager=e.get(c.QpEventManager),this.keyboardService=e.invoke(m.KeyboardService),e.registerInstance(m.KeyboardService,this.keyboardService),this.busyService=e.get(b.BusyCounter),this.busyService.increment()}get sidebarDisabled(){const{sidePanelComponent:e}=this;return!e||!e.component||!e.component.sidePanelVM||e.component.collapsed||e.component.maximized}viewModelActivated(){this.screenService=this.viewModel.getScreenService(),window.frameElement&&this.siteMapScreenID!==this.giScreenID&&this.isMainFrame&&this.screenService&&(this.screenService.siteMapScreenID=this.siteMapScreenID),this.container.registerInstance(p.ScreenService,this.screenService),this.screenService.registerDataComponentOneTime("DefaultScreenPreferences",(()=>new c.DefaultPreferencesDataComponent(this.preferencesService))),this.screenService.registerDataComponentOneTime("UserScreenPreferences",new c.UserPreferencesDataComponent(this.preferencesService)),this.screenService.registerDataComponentOneTime("TranslationValidation",this.translationValidationComponent)}screenIsDirty(){return!!this.viewModel&&this.viewModel.isDirty}applyScreenPreferences(e,n){for(const r in e)this.preferencesService.setPreferences(r,e[r],n)}getQueryParams(){return{}}openDialog(e){var n,r;const i={context:this.viewModel,rootElement:this.contentElement,command:e.commandName,autoRepaint:e.autoRepaint,caption:e.dialogMessage},o=Object.assign(Object.assign(Object.assign({},i),null===(n=e.detail)||void 0===n?void 0:n.content),{id:e.dialogId,data:null===(r=e.detail)||void 0===r?void 0:r.data});this.dialogHelper.openDialog(o,{overlayDismiss:!1},(e=>{this.openDialogs.push(e.controller)})).whenClosed((()=>this.openDialogs.length=this.openDialogs.length-1))}serializeParameters(e){let n="";for(const r in e)n+=`&${r}=${e[r]}`;return n}attached(){var e,n,r;return __awaiter(this,void 0,void 0,(function*(){const i=window.location.search.split("&");"?"===i[0][0]&&(i[0]=i[0].substr(1));const o={};let s=null,l=null;for(const e of i){const n=e.indexOf("=");if(n<0)continue;const r=e.substr(0,n),i=e.substr(n+1);switch(r){case"ScreenId":case"unum":case"HideScript":case"timeStamp":case"id":break;case"PopupPanel":i&&(l=!0),"Layer"===i&&(this.isMainFrame=!1);break;case"InLayer":"On"===i&&(this.isMainFrame=!1);break;case"isRedirect":l=Boolean(i);break;case"ui":case"UI":s=i;break;default:o[r]=decodeURIComponent(i)}}this.siteMapScreenID=(0,u.getScreenIdFromUrl)(),this.siteMapScreenID?this.screenName=(0,u.getScreenPath)(this.siteMapScreenID):this.screenName="not-found";const d=(0,c.getCompanyFromUrl)();if(s||window.isRedirect||(null===(e=window.parent)||void 0===e?void 0:e.isRedirect)||l){this.forceUI=s;const e=this.container.get(c.ScreenApiClientSettings);e.forceUI=s,e.companyId=d,e.dueToRedirect=window.isRedirect||(null===(n=window.parent)||void 0===n?void 0:n.isRedirect)||l,delete window.isRedirect,null===(r=window.parent)||void 0===r||delete r.isRedirect}let h=window.top.location.href;const g=h.indexOf("?");g>=0&&(h=h.substr(0,g)),this.baseHref=`${h}?`,d&&(this.baseHref+=`&CompanyID=${d}&`),s&&(this.baseHref+=`ui=${s}&`),window.frameElement&&this.siteMapScreenID!==this.giScreenID&&this.isMainFrame&&(h=`${this.baseHref}ScreenId=${this.siteMapScreenID}${this.serializeParameters(o)}`,window.top.history.replaceState({},"Title",h));let m=!1;this.screenEventManager.subscribe("OpenPopup",(e=>{e.stop(),this.openDialog(e)})),this.screenEventManager.subscribe(c.ClosePopupEvent.EventName,(()=>{this.openDialogs.length&&this.openDialogs[this.openDialogs.length-1].close(!1)})),this.screenEventManager.subscribe("ExecuteCommand",(e=>{e.Command&&(this.screenService.executeCommand(e.Command,e.Params),e.stop())})),this.eventSubscriptions.push(this.screenEventManager.subscribe("RefreshScreen",(e=>{this.screenService.update()}))),this.eventSubscriptions.push(this.screenEventManager.subscribe("ReloadPage",(e=>{this.redirectHelper.reload()})));const f=this.eventAggregator;this.eventSubscriptions.push(f.subscribe("screen-initialize-data-ready",(()=>{this.viewModel.setupParameters(o)}))),this.eventSubscriptions.push(f.subscribe("screen-initialized",(e=>{var n;(null===(n=this.viewModel)||void 0===n?void 0:n.screenID)===(null==e?void 0:e.screenID)&&(m=!0),(null==e?void 0:e.failure)&&(this.initialized=!0),!this.screenService.isDraft||e.screenID!==this.viewModel.siteMapScreenID||window.DisableWhitelistWarning||window.top.DisableWhitelistWarning||(0,c.showInformer)("The Modern UI is turned on for the screen. This preview version of the UI is not for production use","warning")}))),this.eventSubscriptions.push(f.subscribe("screen-updated",(e=>{var n;if(m&&(null===(n=this.viewModel)||void 0===n?void 0:n.screenID)===(null==e?void 0:e.screenID)){this.initialized=!0;const e=this.viewModel.siteMapScreenID;if(this.isMainFrame){let n=`${this.baseHref}ScreenId=${e}`;if(!this.viewModel.isNewEntry()){const e=this.viewModel.getKeys();n+=this.serializeParameters(e)}window.top.history.replaceState({},"Title",n)}}}))),this.eventSubscriptions.push(this.screenEventManager.subscribe("LoadingStarted",(()=>{this.loading=!0}))),this.eventSubscriptions.push(this.screenEventManager.subscribe("LoadingFinished",(()=>{this.loading=!1}))),this.eventSubscriptions.push(f.subscribe(p.PopupMessageOpenEvent,(e=>{const n={title:this.Msg.Note,message:e.popupMessage};this.alertServce.openAlert(n).then((e=>{}))}))),this.eventSubscriptions.push(this.eventManager.addEventListener(document.body,"startScreenConfiguration",(()=>{this.editMode=!0}),a.delegationStrategy.none,!0)),this.eventSubscriptions.push(this.eventManager.addEventListener(document.body,"endScreenConfiguration",(()=>{this.editMode=!1}),a.delegationStrategy.none,!0)),this.keyboardService.setActiveArea(this.contentElement),this.busyService.decrement()}))}detached(){this.eventSubscriptions.forEach((e=>e.dispose())),this.eventSubscriptions=[],this.bindingSubscriptions.forEach((e=>e.dispose())),this.bindingSubscriptions=[]}};__decorate([i.bindable,__metadata("design:type",String)],y.prototype,"screenName",void 0),__decorate([i.bindable,__metadata("design:type",Boolean)],y.prototype,"useStaticRendering",void 0),__decorate([i.observable,__metadata("design:type",c.QpDataComponent)],y.prototype,"sidePanelComponent",void 0),__decorate([i.observable,__metadata("design:type",c.QpSplitterCustomElement)],y.prototype,"splitterVM",void 0),__decorate([(0,a.computedFrom)("sidePanelComponent","sidePanelComponent.component","sidePanelComponent.component.sidePanelVM","sidePanelComponent.component.collapsed","sidePanelComponent.component.maximized"),__metadata("design:type",Boolean),__metadata("design:paramtypes",[])],y.prototype,"sidebarDisabled",null),y=__decorate([i.autoinject,__metadata("design:paramtypes",[l.Container,s.EventAggregator,f.DialogHelper,h.QpTranslator,g.AlertService,d.PreferencesService,a.EventManager,c.RedirectHelper,i.BindingEngine])],y)},main:(e,n,r)=>{"use strict";var i;r.r(n),r.d(n,{configure:()=>configure});r("./static/font-awesome.css"),r("./static/styles.css"),r("./static/basic-layout.css"),r("./static/custom.css");var o=r("./node_modules/aurelia-bootstrapper/dist/native-modules/aurelia-bootstrapper.js"),s=r("aurelia-framework"),a=r("./config/environment.json"),l=r("./node_modules/aurelia-binding/dist/native-modules/aurelia-binding.js"),c=r("./node_modules/aurelia-fetch-client/dist/native-modules/aurelia-fetch-client.js"),d=r("./node_modules/client-controls/client-controls.js"),__awaiter=function(e,n,r,i){return new(r||(r=Promise))((function(o,s){function fulfilled(e){try{step(i.next(e))}catch(e){s(e)}}function rejected(e){try{step(i.throw(e))}catch(e){s(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(n){n(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,n||[])).next())}))};const u=i||(i=r.t(a,2)),h=window.alert;window.alert=function(e){h(e)};const g=window.confirm;window.confirm=function(e){return g(e)},(0,l.disableConnectQueue)();const focusPoucus=function(e){const n=e instanceof Element&&e.getAttribute("id")||void 0;return{element:e,id:n}};let p=focusPoucus(document.activeElement);p.element&&"BODY"===p.element.tagName&&document.addEventListener("focus",(e=>{p=focusPoucus(e.target)}),{capture:!0,once:!0});const configureEnhance=function(e){return __awaiter(this,void 0,void 0,(function*(){s.PLATFORM.global.globalControlsModules;e.use.basicConfiguration().defaultResources().plugin("aurelia-ui-virtualization").plugin("aurelia-dialog",(e=>{e.useDefaults(),e.settings.showCloseButton=!0,e.settings.startingZIndex=1e4,e.settings.mouseEvent="mousedown"})).plugin("aurelia-portal-attribute").feature("client-controls/plugins/dependency-property-injection/index").feature("client-controls/plugins/glue/index").feature("resources/index").feature("client-controls/plugins/enhance-n-watch/index").feature("client-controls/plugins/happeded-on-body/index").feature("client-controls/services/hover-activator-service/index"),e.use.developmentLogging(u.debug?"debug":"warn"),yield e.start();const n=s.PLATFORM.global.location.pathname,r=`${n.substring(0,n.indexOf("/(W("))}/`;e.container.registerInstance(d.BASE_PATH,r);const defaultConfiguration=e=>e.withBaseUrl(r).withDefaults({headers:{Accept:"application/json","X-Requested-With":"Fetch"},credentials:"same-origin"});e.container.registerInstance(d.DEFAULT_HTTP_CONFIGURATION,defaultConfiguration);e.container.get(c.HttpClient).configure(defaultConfiguration);const i={elements:{},values:{}};if(u.debug&&(s.PLATFORM.global.fauxScreen=i),yield e.enhanceAndWatch(i),s.PLATFORM.global.getViewModelById=function(e){if(i.elements[e]){let n=document.getElementById(e);if(n){do{if(n.au)return n.au.controller.viewModel;n=n.parentNode}while(n);return}}},p.id){const e=s.DOM.getElementById(p.id);e&&e.focus()}else p.element instanceof HTMLElement&&null!=p.element.parentNode&&p.element!==document.activeElement&&p.element.focus();if(s.PLATFORM.global.px_cm){px_cm.handleLoad(),px_cm.auEnhanceCompleted&&px_cm.auEnhanceCompleted(),px_cm.requiredReloadPage(!1)&&px_cm.reloadPage(!0),px_cm.au_flush=function(){const n=e.container.get(s.TaskQueue);n.flushing||n.flushMicroTaskQueue()},px_cm.au_enhance=function(n){const r=e.container.get(s.TemplatingEngine).enhance({element:n,container:e.container,resources:e.resources,bindingContext:i});return px_cm.au_flush(),r};const n=px_cm.AureliaEnhanceAwaitQueue;if(n){for(const e of n)e();n.splice(0,n.length)}}}))},m=document.querySelector("body");if(!(null==m?void 0:m.hasAttribute("aurelia-app"))){setTimeout((()=>{(0,o.bootstrap)(configureEnhance)}),2500)}function configure(e){e.use.standardConfiguration().plugin("aurelia-ui-virtualization").plugin("aurelia-dialog",(e=>{e.useDefaults(),e.settings.showCloseButton=!0,e.settings.startingZIndex=1e4,e.settings.mouseEvent="mousedown"})).plugin("aurelia-portal-attribute").plugin("aurelia-animator-css",(e=>e.useAnimationDoneClasses=!0)).feature("client-controls/plugins/dependency-property-injection/index").feature("client-controls/plugins/glue/index").feature("resources/index").feature("client-controls/controls/compound/rich-text-editor/index").feature("client-controls/plugins/happeded-on-body/index");const n=e.container.get(c.HttpClient),r=s.PLATFORM.global.location.pathname,i=r.substring(0,r.toLowerCase().indexOf("scripts/"));e.container.registerInstance(d.BASE_PATH,i);const defaultConfiguration=e=>e.withBaseUrl(i).withDefaults({headers:{Accept:"application/json,text/html","X-Requested-With":"Fetch"},credentials:"same-origin"});e.container.registerInstance(d.DEFAULT_HTTP_CONFIGURATION,defaultConfiguration),n.configure(defaultConfiguration),e.use.developmentLogging(u.debug?"debug":"warn"),e.start().then((()=>e.setRoot("app")))}},"resources/index":(e,n,r)=>{"use strict";r.r(n),r.d(n,{configure:()=>configure});r("aurelia-framework");function configure(e){e.globalResources(["client-controls/controls/simple/calendar/qp-calendar","client-controls/controls/simple/button/qp-button","client-controls/controls/simple/longrun-indicator/qp-longrun-indicator","client-controls/controls/dialog/long-run/qp-long-run","client-controls/controls/dialog/quick-processing/qp-quick-processing","client-controls/controls/simple/text-editor/qp-text-editor","client-controls/controls/simple/mask-editor/qp-mask-editor","client-controls/controls/simple/text-editor/converter","client-controls/controls/compound/grid/qp-grid","client-controls/controls/container/fieldset/qp-fieldset","client-controls/controls/container/field/qp-field","client-controls/controls/container/fieldset/qp-fieldset-layout","client-controls/controls/container/inline-field/qp-inline-field","client-controls/controls/abstract/enhanced-compose/enhanced-compose","client-controls/controls/abstract/screen-base-view-model/screen-base-view-model","client-controls/controls/container/field/own-binding-behavior","client-controls/controls/simple/check-box/qp-check-box","client-controls/controls/simple/radio/qp-radio","client-controls/controls/dialog/informer/qp-informer-rack","client-controls/controls/simple/date-editor/qp-datetime-edit","client-controls/controls/simple/drop-down/qp-drop-down","client-controls/controls/utility/tooltip/qp-tooltip","client-controls/controls/utility/wait-cursor/qp-wait-cursor","client-controls/controls/simple/number-editor/qp-number-editor","client-controls/controls/simple/mail-editor/qp-mail-editor","client-controls/controls/simple/link-editor/qp-link-editor","client-controls/controls/simple/barcode-input/qp-barcode-input","client-controls/controls/simple/selector/qp-selector","client-controls/controls/utility/suggester/qp-editor-wrapper","client-controls/controls/utility/tooltip/qp-extention-cord","client-controls/controls/container/splitter/qp-splitter","client-controls/controls/container/resizer/qp-resizer","client-controls/controls/compound/menu/qp-menu","client-controls/controls/compound/system-menu/qp-sys-menu","client-controls/controls/compound/system-menu/qp-tools-menu/qp-tools-menu","client-controls/controls/compound/system-menu/qp-note-dialog/qp-note-dialog","client-controls/controls/compound/system-menu/qp-customization-menu/qp-customization-menu","client-controls/controls/compound/system-menu/qp-note-dialog/note-menu-data-component","client-controls/controls/compound/system-menu/qp-tools-menu/tools-menu-data-component","client-controls/controls/compound/system-menu/qp-customization-menu/customization-menu-data-component","client-controls/controls/compound/system-menu/settings-menu-data-component","client-controls/controls/compound/screen-toolbar/screen-toolbar-data-component","client-controls/controls/dialog/base-dialog/qp-dialog","client-controls/controls/container/panel/qp-panel","client-controls/controls/simple/icon/qp-icon","client-controls/controls/simple/icon/qp-hyper-icon","client-controls/controls/container/tabbar/qp-tabbar","client-controls/controls/container/tabbar/qp-tab","client-controls/controls/container/wizard/qp-wizard","client-controls/controls/container/data-components/qp-data-component","client-controls/controls/container/data-components/qp-data-components","client-controls/controls/compound/tool-bar/qp-tool-bar","client-controls/controls/compound/screen-title/qp-screen-title","client-controls/controls/abstract/customization/customizable","client-controls/controls/simple/branch-selector/qp-branch-selector-3d","client-controls/controls/simple/segmented-selector/qp-segmented-selector","client-controls/controls/container/collapser/qp-collapsible","client-controls/controls/container/template/qp-template","client-controls/controls/compound/address-lookup/qp-address-lookup","client-controls/controls/compound/currency/qp-currency","client-controls/controls/simple/simple-selector/qp-simple-selector","client-controls/controls/simple/caption/qp-caption","client-controls/controls/simple/label/qp-label","client-controls/controls/simple/label/qp-label-light","client-controls/controls/simple/uploader/qp-uploader","client-controls/controls/simple/uploader/qp-multi-upload","client-controls/controls/compound/tree/qp-tree","client-controls/controls/compound/tree/qp-tree-node","client-controls/controls/simple/external-viewer/qp-external-viewer","client-controls/controls/compound/formula-editor/qp-formula-editor","client-controls/controls/compound/formula-editor/qp-formula-dialog","client-controls/controls/compound/grid/elements/qp-filter-box","client-controls/controls/compound/grid/qp-filter-editor","client-controls/controls/simple/screen-configuration-menu/qp-screen-configuration-menu","client-controls/controls/dialog/processing-dialog/qp-processing-dialog","client-controls/controls/dialog/workflow-dialog/qp-workflow-dialog","client-controls/controls/simple/color-picker/qp-color-palette","client-controls/controls/simple/color-picker/qp-color-picker","client-controls/controls/simple/color-picker/qp-menu-color-picker","client-controls/controls/utility/drop-down-frame/qp-drop-down-frame","client-controls/controls/utility/layout/qp-layout","client-controls/controls/compound/inline-screen/qp-inline-screen","client-controls/controls/compound/inline-screen-dialog/qp-inline-screen-dialog-component","client-controls/controls/compound/side-panel/qp-side-panel","client-controls/controls/compound/tree-selector/qp-tree-selector","client-controls/controls/compound/tree-selector/qp-tree-selector-dialog","client-controls/controls/simple/image/view/qp-image-view","client-controls/controls/simple/image/upload/qp-image-uploader","client-controls/controls/dialog/upload-dialog/qp-upload-dialog","client-controls/controls/compound/translation-validation/qp-translation-validation"])}},"./src/screen-utils.ts":(e,n,r)=>{"use strict";r.r(n),r.d(n,{getScreenIdFromUrl:()=>getScreenIdFromUrl,getScreenPath:()=>getScreenPath,getScreenPathFromUrl:()=>getScreenPathFromUrl});const getScreenIdFromUrl=()=>{const e=window.location.pathname,n=e.lastIndexOf("/"),r=e.lastIndexOf("."),i=n>-1&&r>n?e.substring(n+1,r):"";return i.length>8?i:i.toUpperCase()},getScreenPath=e=>e.length>8?`systemScreens/${e}`:`screens/${e.substr(0,2).toUpperCase()}/${e}/${e}`,getScreenPathFromUrl=()=>{const e=getScreenIdFromUrl();return!e||e.length<3?"":getScreenPath(e)}},"screens/FS/FS300300/FS300300":(e,n,r)=>{"use strict";r.r(n),r.d(n,{Captions:()=>E,DragHelperEventInfo:()=>DragHelperEventInfo,FS300300:()=>M,Formats:()=>T});var i=r("aurelia-framework"),o=r("../dist/packages/schedulerpro/schedulerpro.module.js"),s=r("./node_modules/client-controls/client-controls.js"),a=r("client-controls/controls/compound/tool-bar/qp-tool-bar"),l=r("./node_modules/client-controls/utils/index.js"),c=r("./node_modules/client-controls/utils/platform-dependable-utils.js"),d=r("client-controls/controls/container/splitter/qp-splitter"),u=r("./node_modules/client-controls/services/preferences/index.js"),h=r("./src/screens/FS/FS300300/drag-helpers/external-event-drag-helper.ts"),g=r("./src/screens/FS/FS300300/drag-helpers/resource-drag-helper.ts"),p=r("screens/FS/FS300300/bing-map"),m=r("./src/screens/FS/FS300300/map-controller.ts"),f=r("./src/screens/FS/FS300300/data-handlers/so-data-handler.ts"),b=r("./src/screens/FS/FS300300/data-handlers/appointments-data-handler.ts"),v=r("./src/screens/FS/FS300300/data-handlers/search-appointments-data-handler.ts"),y=r("./src/screens/FS/FS300300/scheduler-types.ts"),w=r("./src/screens/FS/FS300300/scheduler-api-client.ts"),C=r("./src/screens/FS/FS300300/view-models.ts"),S=r("./src/screens/FS/FS300300/data-handlers/time-converter.ts"),x=r("./src/screens/FS/FS300300/test-helpers.ts"),D=(r("./node_modules/client-controls/descriptors/customization.js"),function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);return s>3&&a&&Object.defineProperty(n,r,a),a}),__metadata=function(e,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,n)},__awaiter=function(e,n,r,i){return new(r||(r=Promise))((function(o,s){function fulfilled(e){try{step(i.next(e))}catch(e){s(e)}}function rejected(e){try{step(i.throw(e))}catch(e){s(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(n){n(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,n||[])).next())}))};let E=class Captions{};E.ServiceOrdersDetails="Details",E.Employees="Employees",E.Staff="Staff",E.DefaultStaff="Default Staff",E.Unassigned="Unassigned",E=D([s.localizable],E);let R=class Labels{};R.NonBusinessHours="Nonworking Hours",R.Appointment="Appointment",R.ServiceOrder="Service Order",R.AddAppointment="Add Appointment",R.NewAppointment="New Appointment",R.Schedule="Schedule",R.PutOnHold="Put on Hold",R.DeleteAppointment="Delete",R.CloneAppointment="Clone...",R.CreateAppointment="Create Appointment...",R.Unassign="Unassign",R.ViewAppointment="View...",R.EditAppointment="Edit...",R.Confirm="Confirm",R.Unconfirm="Unconfirm",R.ValidateByDispatcher="Validate by Dispatcher",R.ClearValidation="Clear Validation",R.PrevPeriod="Previous",R.NextPeriod="Next",R.Reset="Discard Changes",R=D([s.localizable],R);let k=class Messages{};k.ErrorLoadingData="An error occurred while loading data from the server.",k.NoWorkingCalendarSet="No working calendar has been defined for the displayed employees.",k=D([s.localizable],k);let T=class Formats{};T.TimeAxisDay="ddd, MMMM D, YYYY",T.TimeAxisHour="H:mm",T.DayMonth="MMMM d",T.OnlyMonth="MMMM",T.DateRangeSameMonthP1="MMMM d",T.DateRangeSameMonthP2="d ",T.DateRangeDiffMonthP1="MMMM d",T.DateRangeDiffMonthP2="MMMM d",T.ShortDate=(0,c.dateFormatInfo)().shortDate,T=D([s.localizable],T);let M=class FS300300 extends s.PXScreen{constructor(e,n,r,i,o,l){super(),this.element=e,this.preferencesService=r,this.bindingEngine=i,this.templatingEngine=o,this.au=l,this.horizontalSnapDistance=15,this.verticalSnapDistance=30,this.prefid="main_prefs",this.serviceOrdersBrickLeftID="serviceOrdersBrickLeftID",this.serviceOrdersBrickRightID="serviceOrdersBrickRightID",this.searchAppointmentBrickLeftID="searchAppointmentBrickLeftID",this.searchAppointmentBrickRightID="searchAppointmentBrickRightID",this.appointmentsBrickLeftID="appointmentsBrickLeftID",this.appointmentsBrickRightID="appointmentsBrickRightID",this.allRecordsFilter="00000000-0000-0000-0000-000000000000",this.orientation="horizontal",this.topBarConfig={add:{index:0,config:Object.assign(Object.assign({},(0,a.NewMenuButton)("add")),{commandName:"add",images:{normal:"svg:main@plus"},toolTip:R.AddAppointment,isSystem:!1,toggleMode:!1,showInToolbar:!0,target:this.element,pushed:!1})},hours:{index:1,config:Object.assign(Object.assign({},(0,a.NewMenuButton)("hours")),{commandName:"hours",images:{normal:"svg:main@aroundTheClock"},toolTip:R.NonBusinessHours,isSystem:!1,toggleMode:!1,showInToolbar:!0,target:this.element,pushed:!1})}},this.rightToolBarConfig={id:"rightToolBarConfigID",items:{prevPeriod:{config:{commandName:"prevPeriod",images:{normal:"main@PagePrev"},toolTip:R.PrevPeriod}},nextPeriod:{config:{commandName:"nextPeriod",images:{normal:"main@PageNext"},toolTip:R.NextPeriod}},periodDay:{config:{text:"Day",commandName:"periodDay",cssClass:"qp-sch-time-period qp-sch-period-day"}},periodWeek:{config:{text:"Week",commandName:"periodWeek",cssClass:"qp-sch-time-period qp-sch-period-week"}},periodMonth:{config:{text:"Month",commandName:"periodMonth",cssClass:"qp-sch-time-period qp-sch-period-month"}}}},this.topBarAppointmentConfig={id:"topBarAppointmentConfigID",items:{confirm:{config:{id:"confirm",text:"Confirm",showInToolbar:!0,commandName:"confirm",connotation:"Success",target:this.element,hidden:!1}},unconfirm:{config:{id:"unconfirm",text:"Unconfirm",showInToolbar:!0,commandName:"unconfirm",target:this.element,hidden:!1}},validate:{config:{id:"validate",text:"Validate by Dispatcher",showInToolbar:!0,commandName:"validate",target:this.element,hidden:!1}},invalidate:{config:{id:"invalidate",text:"Clear Validation",showInToolbar:!0,commandName:"invalidate",target:this.element,hidden:!1}},unassign:{config:{id:"unassign",text:"Unassign",showInToolbar:!0,commandName:"unassign",target:this.element,hidden:!1}},clone:{config:{id:"clone",text:"Clone",showInToolbar:!0,commandName:"clone",target:this.element,hidden:!1}},delete:{config:Object.assign(Object.assign({},(0,a.NewMenuButton)("delete")),{id:"delete",text:"Delete",showInToolbar:!0,commandName:"delete",target:this.element,hidden:!1,visibleOnToolbar:!1})}}},this.topBarNewAppointmentConfig={id:"topBarNewAppointmentConfigID",items:{reset:{config:Object.assign(Object.assign({},(0,a.NewMenuButton)("reset")),{commandName:"reset",images:{normal:"main@Cancel"},toolTip:R.Reset,isSystem:!1,toggleMode:!1,showInToolbar:!0,target:this.element,pushed:!1})},create:{config:{text:R.CreateAppointment,commandName:"create",connotation:"Success",showInToolbar:!0,target:this.element}}}},this.popupAppointmentEmployeesConfig={suppressNoteFiles:!0},this.popupNewAppointmentEmployeesConfig={suppressNoteFiles:!0},this.popupSOEmployeesConfig={suppressNoteFiles:!0},this.Captions=E,this.Labels=R,this.ServiceOrders=(0,s.createCollection)(C.ServiceOrderModel,{pageSize:50,adjustPageSize:!1,pagerMode:s.GridPagerMode.InfiniteScroll,syncPosition:!1,allowDelete:!1,allowInsert:!1,showFastFilter:s.GridFastFilterVisibility.ToolBar,fastFilterByAllFields:!1,suppressNoteFiles:!0}),this.SchedulerGridFilters=Array(),this.SearchAppointments=(0,s.createCollection)(C.SearchAppointmentModel,{pageSize:50,adjustPageSize:!1,pagerMode:s.GridPagerMode.InfiniteScroll,syncPosition:!1,allowDelete:!1,allowInsert:!1,showFastFilter:s.GridFastFilterVisibility.ToolBar,fastFilterByAllFields:!1,suppressNoteFiles:!0}),this.AppointmentsAllStaff=(0,s.createCollection)(C.AppointmentEmployeeModel,{pageSize:2e3,adjustPageSize:!1,syncPosition:!1,allowDelete:!1,allowInsert:!0,showFastFilter:s.GridFastFilterVisibility.ToolBar,fastFilterByAllFields:!1,suppressNoteFiles:!0,topBarItems:this.topBarConfig}),this.LastUpdatedAppointment=(0,s.createCollection)(C.AppointmentEmployeeModel,{pageSize:100,adjustPageSize:!1,syncPosition:!1,allowDelete:!1,allowInsert:!1,suppressNoteFiles:!0}),this.AppointmentFilter=(0,s.createSingle)(C.AppointmentFilterModel),this.SOFilter=(0,s.createSingle)(C.SOFilterModel),this.LastUpdatedAppointmentFilter=(0,s.createSingle)(C.LastUpdatedAppointmentFilterModel),this.InitData=(0,s.createSingle)(C.InitDataModel),this.Setup=(0,s.createSingle)(C.SetupModel),this.SelectedAppointment=(0,s.createSingle)(C.SelectedAppointmentModel),this.SelectedSO=(0,s.createSingle)(C.SelectedSOModel),this.SelectedAppointmentEmployees=(0,s.createCollection)(C.EmployeeModel,{pageSize:100,adjustPageSize:!1,syncPosition:!0,allowDelete:!1,allowInsert:!1,showFilterBar:s.GridFilterBarVisibility.False,suppressNoteFiles:!0,pagerMode:s.GridPagerMode.InfiniteScroll}),this.SelectedSOEmployees=(0,s.createCollection)(C.EmployeeModel,{pageSize:100,adjustPageSize:!1,syncPosition:!0,allowDelete:!1,allowInsert:!1,showFilterBar:s.GridFilterBarVisibility.False,suppressNoteFiles:!0,pagerMode:s.GridPagerMode.InfiniteScroll}),this.EditedAppointmentEmployees=(0,s.createCollection)(C.EmployeeModel,{pageSize:100,adjustPageSize:!1,syncPosition:!0,allowDelete:!1,allowInsert:!1,showFilterBar:s.GridFilterBarVisibility.False,pagerMode:s.GridPagerMode.InfiniteScroll,suppressNoteFiles:!0}),this.AllRooms=(0,s.createCollection)(C.RoomModel,{pageSize:1,adjustPageSize:!1,syncPosition:!0,allowDelete:!1,allowInsert:!1,showFilterBar:s.GridFilterBarVisibility.False,pagerMode:s.GridPagerMode.InfiniteScroll,suppressNoteFiles:!0}),this.DatesFilter=(0,s.createSingle)(C.DatesFilterModel),this.MainAppointmentFilter=(0,s.createSingle)(C.MainAppointmentFilterModel),this.UpdatedAppointment=(0,s.createSingle)(C.UpdatedAppointmentModel),this.datePickerReentryPrevention=!1,this.preferencesBase=new FS300300_Preferences,this.actualizingPreferences=!1,this.updatingObservedItem=!1,this.backlogEventResizing=!1,this.initializationDataProcessed=!1,this.calendarRedrawSuppressed=!1,this.eventPopup=null,this.createdEventRecord=null,this.defaultSrvOrdType=null,this.tabObservers=new Map,this.aureliaEnhancedElements=new Set,this.appointments=new b.AppointmentsDataHandler,this.serviceOrders=new f.SODataHandler,this.searchAppointments=new v.SearchAppointmentsDataHandler,this.currentSearchAppointment=null,this.ignoreNextSchedulerGridUpdate=!1,this.subscribedToAppointmentsBrickPreferences=!1,this.subscribedToSearchAppointmentsBrickPreferences=!1,this.subscribedToSOBrickPreferences=!1,this.alreadyDisplayedWorkingCalendarWarning=!1,this.startDatePickerConfig={id:"scheduler_date",class:"dropDown auto-size",editMask:"04/08/03",displayMask:"04/08/03",allowCustomItems:!1},this.mainSplitterConfig={split:"width",initialSplit:"300px",initialState:"normal",style:"height: 100%",fading:!0},this.mapSplitterConfig={split:"width",initialSplit:"60%",initialState:"collapsed-second",disableCollapseFirst:!0,style:"height: 100%",fading:!0},this.apiClient=n;const c=(new Date).clearHoursUTC();this.pickerDate=c}get isPeriodDay(){var e;return(null===(e=this.DatesFilter)||void 0===e?void 0:e.periodKindValue)===y.PeriodKind.Day}get isPeriodWeek(){var e;return(null===(e=this.DatesFilter)||void 0===e?void 0:e.periodKindValue)===y.PeriodKind.Week}get isPeriodMonth(){var e;return(null===(e=this.DatesFilter)||void 0===e?void 0:e.periodKindValue)===y.PeriodKind.Month}get preferences(){var e;return null===(e=this.preferencesBase)||void 0===e?void 0:e.preferences}get splitterPreferences(){var e,n;return"horizontal"===this.orientation?null===(e=this.preferences)||void 0===e?void 0:e.horizontalModeSplitter:null===(n=this.preferences)||void 0===n?void 0:n.verticalModeSplitter}get graphName(){var e;return null===(e=this.screenService.getGraphInfo())||void 0===e?void 0:e.graphType}attached(){const e=Object.create(null,{attached:{get:()=>super.attached}});return __awaiter(this,void 0,void 0,(function*(){this.preferencesService.subscribe(this.prefid,this),yield e.attached.call(this);document.querySelector(".qp-sch-grid-container-inner qp-filter-box input").placeholder=E.Staff,this.calendarContainer=document.querySelector(".qp-sch-calendar-container"),this.attachSOPane(),this.attachCalendar(),this.attachDragHelpers(),this.attachToolbarHandling(),yield this.ReleaseUIControl(),this.onDatesFilterUpdated(),this.attachMap(),this.mainTabBarHolder=document.getElementById("mainTabBarHolderID"),this.lastUpdatedGridElement=document.getElementById("lastUpdatedGridID"),this.appointmentsAllStaffGridElement=document.getElementById("appointmentsAllStaffGridID"),this.datePickerMain=document.getElementById("scheduler_date"),this.appointmentPopupEmployeesForm=document.getElementById("appointmentPopupEmployeesFormID"),this.editedAppointmentPopupEmployeesForm=document.getElementById("editedAppointmentPopupEmployeesFormID"),this.serviceOrderEmployeesForm=document.getElementById("serviceOrderEmployeesFormID"),this.serviceOrdersFastFilter=document.getElementById("serviceOrderGridID_fb_text"),this.searchAppointmentsFastFilter=document.getElementById("searchAppointmentsGridID_fb_text");const n=this.calendarContainer;n.scrollToXPercent=x.testHelperScrollToXPercent,n.simulateDragAndDrop=x.testHelperSimulateDragAndDrop,n.schedulerControl=this.schedulerControl,this.setupPopups()}))}onAfterInitialize(){return __awaiter(this,void 0,void 0,(function*(){yield this.setupTabs(),this.setupObservers()}))}detached(){super.detached(),this.detachCalendar(),this.detachTabObservers()}applyPreferences(e){var n;this.preferencesBase=new FS300300_Preferences(null===(n=e.user)||void 0===n?void 0:n.preferences),this.actualizePreferences()}applySOBrickLeftPreferences(e){this.serviceOrdersBrickLeft.applyPreferences(e),this.updateSOPane(!1)}applySOBrickRightPreferences(e){this.serviceOrdersBrickRight.applyPreferences(e),this.updateSOPane(!1)}applySearchAppointmentsBrickLeftPreferences(e){this.searchAppointmentBrickLeft.applyPreferences(e),this.updateSearchAppointmentsPane(!1)}applySearchAppointmentsBrickRightPreferences(e){this.searchAppointmentBrickRight.applyPreferences(e),this.updateSearchAppointmentsPane(!1)}applyAppointmentsBrickLeftPreferences(e){this.appointmentsBrickLeft.applyPreferences(e),this.schedulerControl&&this.updateCalendar()}applyAppointmentsBrickRightPreferences(e){this.appointmentsBrickRight.applyPreferences(e),this.schedulerControl&&this.updateCalendar()}actualizePreferences(){var e,n,r,i,o,s;if(this.lockedSubGrid){this.actualizingPreferences=!0;try{const a="horizontal"===this.orientation?null===(e=this.preferences)||void 0===e?void 0:e.horizontalModeSplitter:null===(n=this.preferences)||void 0===n?void 0:n.verticalModeSplitter;this.lockedSubGridBacklog.collapsed="collapsed-first"===(null==a?void 0:a.state),this.normalSubGridBacklog.collapsed="collapsed-second"===(null==a?void 0:a.state),this.lockedSubGridBacklog.width=null!==(r=null==a?void 0:a.position)&&void 0!==r?r:this.lockedSubGrid.width,this.lockedSubGrid.collapsed="collapsed-first"===(null==a?void 0:a.state),this.normalSubGrid.collapsed="collapsed-second"===(null==a?void 0:a.state),this.lockedSubGrid.width=null!==(i=null==a?void 0:a.position)&&void 0!==i?i:this.lockedSubGrid.width,"collapsed-first"===(null==a?void 0:a.state)&&(this.lockedSubGridBacklog.width=void 0,this.lockedSubGridBacklog.flex=void 0,this.lockedSubGrid.width=void 0,this.lockedSubGrid.flex=void 0),"collapsed-second"===(null==a?void 0:a.state)&&(this.lockedSubGrid.width=void 0,this.lockedSubGrid.flex="1 1 0%"),(null===(o=this.preferences)||void 0===o?void 0:o.periodKind)===y.PeriodKind.Week&&this.setWeekPeriod(),(null===(s=this.preferences)||void 0===s?void 0:s.periodKind)===y.PeriodKind.Month&&this.setMonthPeriod()}finally{this.actualizingPreferences=!1}}}savePreferences(){return __awaiter(this,void 0,void 0,(function*(){this.actualizingPreferences||(console.log(`savePreferences: ${this.preferences.toString()}`),yield this.preferencesService.saveUserPreferences((0,l.getScreenID)(),this.prefid,this.preferencesBase))}))}setupTabs(){return __awaiter(this,void 0,void 0,(function*(){yield this.setSchedulerTabs()}))}attachToolbarHandling(){this.domEvents=new i.ElementEvents(this.element),this.domEvents.subscribe("buttonpressed",(e=>this.processToolBarClick(e))),this.schedulerFilter=document.querySelector(".qp-sch-grid-container-inner .grid-right-toolbar-cont"),this.prevPeriodButton=document.querySelector("#rightToolBarConfigIDprevPeriod")}attachSOPane(){return __awaiter(this,void 0,void 0,(function*(){const e=document.getElementById("schedulerSOContainer"),n=this.serviceOrders.createData(),r=this.serviceOrdersControl;this.serviceOrdersControl=new o.Grid({appendTo:e,features:{cellEdit:!1,cellMenu:!1},columns:[{editable:!1,text:"serviceOrder",field:"serviceOrder",flex:1,cellCls:"",autoHeight:!0,htmlEncode:!1,renderer:this.serviceOrderRenderer.bind(this)}],data:n,onBeforeSelectionChange:()=>!1,onCellClick:this.onSOGridCellClick.bind(this),onScroll:this.onServiceOrdersScroll.bind(this),onCellMouseOver:this.onSOGridCellMouseOver.bind(this)}),null==r||r.destroy()}))}detachSOPane(){this.serviceOrdersControl&&(this.serviceOrdersControl.destroy(),this.serviceOrdersControl=null)}updateSOPane(e=!1){var n,r;return __awaiter(this,void 0,void 0,(function*(){if(!this.serviceOrdersControl||e)this.detachSOPane(),this.attachSOPane();else{const e=null===(n=this.serviceOrdersControl)||void 0===n?void 0:n.storeScroll();this.serviceOrdersControl.data=this.serviceOrders.createData(),null===(r=this.serviceOrdersControl)||void 0===r||r.restoreScroll(e)}}))}getCaptionText(){return""}serviceOrderRenderer({record:e,expanderElement:n,rowElement:r,region:i}){var s;const a=this.serviceOrders.getEntry(e.id),l=this.serviceOrders.getChildren(a.orderId),c=1===(null==l?void 0:l.filter((e=>!e.isScheduled)).length),d=(null==l?void 0:l.length)>1,u=d?null===(s=this.serviceOrders.getChildren(a.orderId))||void 0===s?void 0:s.map((e=>{var n;return`\n\t\t\t\t<div \n\t\t\tonPointerEnter = "this.classList.toggle('qp-sch-hover', true);"\n\t\t\tonPointerLeave = "this.classList.toggle('qp-sch-hover', false);"\n\t\t class="qp-sch-event-info qp-sch-service-info\n\t\t\t\t\t${c?"only-child":""}\n\t\t\t\t\t${e.isScheduled?"scheduled":""}"\n\t\t\t\t\t${c?"":`entryId="${e.serviceId}"`}><div><ul><li>\n\t\t\t\t\t<span>${this.applyMarks(o.StringHelper.xss`${e.FSSODet__TranDesc.cellText}`,null===(n=this.serviceOrdersFastFilter)||void 0===n?void 0:n.value)}</span>\n\t\t\t\t\t</li></ul></div>\n\t\t\t\t</div>\n\t\t\t\t`})):[],h=u?`<div><div></div>${u.join("")}</div>`:"";return`\n\t\t\t<div class="qp-sch-not-assigned qp-sch-so" entryId="${a.orderId}">\n\t\t\t\t${this.getServiceOrderHtml(a)}\n\t\t\t\t${h}\n\t\t\t</div>\n\t\t\t`}tabServiceOrdersVisibleChanged(){return __awaiter(this,void 0,void 0,(function*(){this.tabServiceOrdersVisible&&(yield this.ReleaseUIControl(),this.updateSOPane(!1))}))}attachSearchAppointmentsPane(){return __awaiter(this,void 0,void 0,(function*(){const e=document.getElementById("searchAppointmentContainer"),n=this.searchAppointments.createData(),r=this.searchAppointmentsControl;this.searchAppointmentsControl=new o.Grid({appendTo:e,features:{cellEdit:!1,cellMenu:{items:this.getMenuItems(),processItems:this.processMenuItems.bind(this)}},columns:[{editable:!1,text:"searchAppointment",field:"searchAppointment",flex:1,cellCls:"",autoHeight:!0,htmlEncode:!1,renderer:this.searchAppointmentRenderer.bind(this)}],data:n,onBeforeSelectionChange:()=>!1,onCellClick:this.onSearchAppointmentGridCellClick.bind(this),onScroll:this.onSearchAppointmentsScroll.bind(this),onCellMouseOver:this.onSearchAppointmentsMouseOver.bind(this)}),null==r||r.destroy()}))}detachSearchAppointmentsPane(){this.searchAppointmentsControl&&(this.searchAppointmentsControl.destroy(),this.searchAppointmentsControl=null)}updateSearchAppointmentsPane(e=!1){var n,r;return __awaiter(this,void 0,void 0,(function*(){if(!this.searchAppointmentsControl||e)this.detachSearchAppointmentsPane(),this.attachSearchAppointmentsPane();else{const e=null===(n=this.searchAppointmentsControl)||void 0===n?void 0:n.storeScroll();this.searchAppointmentsControl.data=this.searchAppointments.createData(),null===(r=this.searchAppointmentsControl)||void 0===r||r.restoreScroll(e)}}))}searchAppointmentRenderer({record:e,row:n,expanderElement:r,rowElement:i,region:o}){var s;const a=this.searchAppointments.getEntry(e.id);let l=`b-sch-event ${function getAppointmentClass(e){var n,r;if(e.isLocked)return"qp-sch-locked";const i=(null===(n=a.Confirmed)||void 0===n?void 0:n.value)||(null===(r=a.ValidatedByDispatcher)||void 0===r?void 0:r.value),o=i?"":"qp-sch-not-confirmed",s=a.StaffCntr.value?"":"qp-sch-not-assigned";return`${o} ${s}`}(a)}`;return(null===(s=this.currentSearchAppointment)||void 0===s?void 0:s.appointmentID)===a.appointmentID&&(l=`${l} qp-sch-search-highlight`),`\n\t\t\t<div class="${l}">\n\t\t\t\t<div class="b-sch-event-content">\n\t\t\t\t\t${this.renderAppointmentWithStatusBar(a,null,!0)}\n\t\t\t\t</div>\n\t\t\t</div>`}tabSearchAppointmentsVisibleChanged(){return __awaiter(this,void 0,void 0,(function*(){this.tabSearchAppointmentsVisible&&(yield this.ReleaseUIControl(),this.updateSearchAppointmentsPane(!1))}))}attachCalendar(){var e;return __awaiter(this,void 0,void 0,(function*(){if(this.schedulerControl)return;const n=document.getElementById("schedulerMainContainer"),[r,i]=b.AppointmentsDataHandler.getPeriodStartEndDates(this.DatesFilter);if(!r)return;const[s,a]=this.appointments.createProjects(this.DatesFilter,this.currentSearchAppointment);if(!(null===(e=a.resources)||void 0===e?void 0:e.length))return;this.workingHoursSignature=this.appointments.getWorkingHoursSignature(),this.handleNoWorkingCalendarWarning();const l=this.backlogControl;this.backlogControl=new o.SchedulerPro({appendTo:n,startDate:r,endDate:i,snap:!0,createEventOnDblClick:!1,cls:"qp-sch-backlog",autoHeight:!0,rowHeight:this.getAppointmentBrickHeight(),barMargin:5,resourceMargin:2,columns:[{field:"name",text:E.Staff,flex:1}],viewPreset:this.getViewPreset(),timeAxis:{continuous:!1},onEventClick:this.onEventClick.bind(this),onBeforeEventResize:()=>{this.backlogEventResizing=!0},onEventResizeEnd:()=>{this.backlogEventResizing=!1},onBeforeEventResizeFinalize:this.onBeforeEventResizeFinalize.bind(this),onBeforeSelectionChange:()=>!1,onTimeAxisHeaderClick:this.onTimeAxisHeaderClick.bind(this),onDragCreateEnd:this.onDragCreateEnd.bind(this),onDragCreateStart:this.onDragCreateStart.bind(this),project:s,features:{cellMenu:!1,cellTooltip:!1,cellCopyPaste:!1,columnRename:!1,eventMenu:{items:this.getMenuItems(),processItems:this.processMenuItems.bind(this)},headerMenu:!1,resourceMenu:!1,scheduleMenu:!1,timeAxisHeaderMenu:!1,resourceTimeRanges:!0,dependencies:!1,eventTooltip:!1,eventDrag:!1,eventDragCreate:{allowResizeToZero:!1,showExactResizePosition:!0,showTooltip:!0},timeRanges:{showCurrentTimeLine:!1,showHeaderElements:!1,enableResizing:!1},scheduleTooltip:!1},eventRenderer:this.unassignedRenderer.bind(this)});const c=this.schedulerControl;this.schedulerControl=new o.SchedulerPro({appendTo:n,partner:this.backlogControl,hideHeaders:!0,mode:this.orientation,enableEventAnimations:!1,createEventOnDblClick:!1,snap:!0,cls:"qp-sch-calendar",project:a,startDate:r,endDate:i,maxTimeAxisUnit:"hour",columns:this.backlogControl.columns,viewPreset:this.getViewPreset(),onBeforeEventResizeFinalize:this.onBeforeEventResizeFinalize.bind(this),onBeforeEventDropFinalize:this.onBeforeEventDropFinalize.bind(this),onEventClick:this.onEventClick.bind(this),onEventMouseEnter:this.onEventMouseEnter.bind(this),onSelectionChange:this.onSelectionChange.bind(this),onSubGridCollapse:this.onSubGridCollapse.bind(this),onSubGridExpand:this.onSubGridExpand.bind(this),onBeforeCellEditStart:()=>!1,onGridRowBeforeDragStart:()=>!1,onVisibleDateRangeChange:this.onVisibleDateRangeChange.bind(this),onDragCreateEnd:this.onDragCreateEnd.bind(this),onDragCreateStart:this.onDragCreateStart.bind(this),onBeforeEventDrag:this.onBeforeEventDrag.bind(this),onEventDragReset:this.onEventDragReset.bind(this),eventRenderer:this.assignmentRenderer.bind(this),selectionMode:{deselectFilteredOutRecords:!0},features:{cellMenu:!1,cellTooltip:!1,cellCopyPaste:!1,columnRename:!1,eventMenu:{items:this.getMenuItems(),processItems:this.processMenuItems.bind(this)},headerMenu:!1,resourceMenu:!1,scheduleMenu:!1,timeAxisHeaderMenu:!1,resourceTimeRanges:!0,dependencies:!1,eventTooltip:!1,eventDrag:{snapToPosition:this.snapToPosition.bind(this)},eventDragCreate:{allowResizeToZero:!1,showExactResizePosition:!0,showTooltip:!0},scheduleTooltip:!1,timeRanges:{showCurrentTimeLine:!1,showHeaderElements:!1,enableResizing:!1}},rowHeight:this.getAppointmentBrickHeight(),barMargin:5,resourceMargin:2,useInitialAnimation:!1}),null==c||c.destroy(),null==l||l.destroy(),a.resources.filter((e=>e.id===C.AppointmentEmployeeModel.unassignedId)).length,this.lockedSubGridBacklog=this.backlogControl.getSubGrid("locked"),this.normalSubGridBacklog=this.backlogControl.getSubGrid("normal"),this.lockedSubGrid=this.schedulerControl.getSubGrid("locked"),this.normalSubGrid=this.schedulerControl.getSubGrid("normal"),this.lockedSubGrid.onResize=this.onLockedSubGridResize.bind(this),this.attachMouseEventHandlers(),this.setDatePickerText(),this.restoreSelection(),this.applyHoursFilter(),this.actualizePreferences()}))}getViewPreset(){return{tickWidth:40,displayDateFormat:"ll HH:mm",shiftIncrement:1,shiftUnit:"day",defaultSpan:24,timeResolution:{unit:"minute",increment:Number(this.Setup.AppResizePrecision.value)},headers:[{unit:"day",dateFormat:T.TimeAxisDay},{unit:"hour",dateFormat:T.TimeAxisHour}]}}restoreSelection(){var e;if((null===(e=this.preservedSelectedRows)||void 0===e?void 0:e.length)>0){const e=this.preservedSelectedRows.filter((e=>this.appointments.resources.has(e.id.toString())));this.schedulerControl.selectRows(e,null)}0===this.schedulerControl.selectedRows.length&&this.appointments.resources.size>0&&this.schedulerControl.selectRow(this.appointments.resources.values().next().value)}handleNoWorkingCalendarWarning(){const e=this.appointments.resources.size>0&&!this.appointments.hasWorkingCalendarSet();!this.alreadyDisplayedWorkingCalendarWarning&&e&&((0,s.showInformer)(k.NoWorkingCalendarSet,"warning"),this.alreadyDisplayedWorkingCalendarWarning=!0),e||(this.alreadyDisplayedWorkingCalendarWarning=!1)}attachMap(){this.mainMap.initialize(this.InitData.MapAPIKey.value)}detachCalendar(){this.schedulerControl&&(this.schedulerControl.destroy(),this.schedulerControl=null),this.backlogControl&&(this.backlogControl.destroy(),this.backlogControl=null)}updateCalendar(){return __awaiter(this,void 0,void 0,(function*(){if(this.schedulerControl){const[e,n]=b.AppointmentsDataHandler.getPeriodStartEndDates(this.DatesFilter),[r,i]=this.appointments.createProjects(this.DatesFilter,this.currentSearchAppointment,this.calendarRedrawSuppressed),o=this.appointments.getWorkingHoursSignature(),s=this.backlogControl.startDate!==e||this.backlogControl.endDate!==n,a=this.workingHoursSignature!==o;if(this.workingHoursSignature=o,this.calendarRedrawSuppressed)return;this.schedulerControl.suspendEvents(),this.backlogControl.suspendEvents(),this.schedulerControl.project=i,this.schedulerControl.rowHeight=this.getAppointmentBrickHeight(),this.backlogControl.project=r,this.backlogControl.rowHeight=this.getAppointmentBrickHeight(),(s||a)&&this.backlogControl.setTimeSpan(e,n),this.schedulerControl.renderContents(),this.backlogControl.resumeEvents(),this.schedulerControl.resumeEvents(),yield this.ReleaseUIControl()}else this.attachCalendar();this.appointments.hasData()&&(yield this.processInitializationData())}))}processInitializationData(){var e,n;return __awaiter(this,void 0,void 0,(function*(){if(!this.initializationDataProcessed){if((null===(e=this.MainAppointmentFilter.InitialRefNbr.value)||void 0===e?void 0:e.length)>0){this.initializationDataProcessed=!0,this.mainTabBar.showTab("tabAppointments");const e=this.MainAppointmentFilter.InitialRefNbr.value;yield this.searchAppointmentsGrid.onFastFilter(e);const n=this.searchAppointments.getFirstEntry();yield this.selectSearchAppointment(n)}(null===(n=this.MainAppointmentFilter.InitialSORefNbr.value)||void 0===n?void 0:n.length)>0&&(this.initializationDataProcessed=!0,this.mainTabBar.showTab("tabServiceOrders"),yield this.serviceOrdersGrid.onFastFilter(this.MainAppointmentFilter.InitialSORefNbr.value))}}))}getServiceEntryIdFromElement(e){for(;e.parentElement&&null===e.getAttribute("entryId");)e=e.parentElement;return e.getAttribute("entryId")}getEventIdFromElement(e){for(;e.parentElement&&!e.parentElement.elementData;)e=e.parentElement;return e.parentElement.elementData.assignment.eventId}attachDragHelpers(){this.serviceOrderDragHelper=new h.ExternalEventDragHelper({owner:this,getSnapToResourcePosition:this.getSnapToResourcePosition,getScheduler:()=>this.schedulerControl,getEntity:e=>{const n=this.getServiceEntryIdFromElement(e);return this.serviceOrders.getEntry(n.toString())},getProxyInner:e=>this.renderDraggedServiceOrder(e),getEventInfo:e=>this.getEventInfoFromSO(e,!1),getAppointmentStart:(e,n)=>this.getSuggestedTimePeriod(e,this.getSODurationMS(n,!0)),getDurationMS:e=>this.getSODurationMS(e,!0),scheduleEntity:this.createAppointmentFromSO},{targetSelector:".qp-sch-left-container .qp-sch-not-assigned:not(:has(.qp-sch-service-info:not(.only-child).qp-sch-hover))",hideOriginalElement:!0}),this.sODetailsDragHelper=new h.ExternalEventDragHelper({owner:this,getSnapToResourcePosition:this.getSnapToResourcePosition,getScheduler:()=>this.schedulerControl,getEntity:e=>{const n=this.getServiceEntryIdFromElement(e);return this.serviceOrders.getEntry(n.toString())},getProxyInner:e=>this.renderDraggedServiceOrder(e,!0),getEventInfo:e=>this.getEventInfoFromSO(e,!0),getAppointmentStart:(e,n)=>this.getSuggestedTimePeriod(e,this.getSODurationMS(n,!1)),getDurationMS:e=>this.getSODurationMS(e,!1),scheduleEntity:this.createAppointmentFromSODetail},{targetSelector:".qp-sch-left-container .qp-sch-service-info:not(.only-child):not(.scheduled)",hideOriginalElement:!0}),this.appointmentsWithNoEmployeeDragHelper=new h.ExternalEventDragHelper({owner:this,getSnapToResourcePosition:this.getSnapToResourcePosition,getScheduler:()=>this.schedulerControl,getEntity:e=>{const n=this.getEventIdFromElement(e);return this.appointments.getUnassignedAppointment(n.toString())},getProxyInner:e=>this.renderAppointmentWithStatusBar(e),getEventInfo:e=>this.getEventInfoFromAppointment(e),getAppointmentStart:(e,n)=>new Date(null==n?void 0:n.dateTimeBegin),getNewEventId:e=>e.appointmentID,getDurationMS:e=>this.getAppointmentDurationMS(e),toggleTimeProjection:(e,n)=>this.toggleTimeProjection(e,n),allowDragging:()=>!this.backlogEventResizing,scheduleEvent:this.assignUnassignedAppointment},{targetSelector:".qp-sch-main-container > .b-container:nth-child(2) .b-sch-event",hideOriginalElement:!0}),this.resourceDragHelper=new g.ResourceDragHelper({owner:this,getScheduler:()=>this.schedulerControl,getEventInfo:e=>this.getEventInfoFromAssignment(e),addResource:this.addResourceToAppointment},{targetSelector:"vertical"===this.orientation?".b-resourceheader-cell":".b-grid-subgrid-locked .b-grid-row"})}getSODurationMS(e,n){const r=60*(n?this.serviceOrders.getEstimatedDuration(e.orderId):S.TimeConverter.hMMtoMinutes(e.FSSODet__EstimatedDuration.value))*1e3;return r>0?r:36e5}getAppointmentDurationMS(e){const n=e.dateTimeEnd.getTime()-e.dateTimeBegin.getTime();return n>0?n:36e5}setDayPeriod(){var e,n;return __awaiter(this,void 0,void 0,(function*(){(null===(e=this.DatesFilter)||void 0===e?void 0:e.PeriodKind.value)!==y.PeriodKind.Day&&(null===(n=this.DatesFilter)||void 0===n||n.PeriodKind.updateValue(y.PeriodKind.Day),yield this.reloadForDate(this.pickerDate,!0))}))}setWeekPeriod(){var e,n;return __awaiter(this,void 0,void 0,(function*(){(null===(e=this.DatesFilter)||void 0===e?void 0:e.PeriodKind.value)!==y.PeriodKind.Week&&(null===(n=this.DatesFilter)||void 0===n||n.PeriodKind.updateValue(y.PeriodKind.Week),yield this.reloadForDate(this.pickerDate,!0))}))}setMonthPeriod(){var e,n;return __awaiter(this,void 0,void 0,(function*(){(null===(e=this.DatesFilter)||void 0===e?void 0:e.PeriodKind.value)!==y.PeriodKind.Month&&(null===(n=this.DatesFilter)||void 0===n||n.PeriodKind.updateValue(y.PeriodKind.Month),yield this.reloadForDate(this.pickerDate,!0))}))}getSOName(e){return null==e?"":o.StringHelper.xss`${e.cells.SrvOrdType.cellText} ${e.cells.RefNbr.text}`}getEventInfoFromSO(e,n){var r,i,o;return{name:n?e.serviceId:e.orderId,entity:e,date:e.OrderDate?new Date(null===(r=e.OrderDate)||void 0===r?void 0:r.value):null,customerName:null!==(o=null===(i=e.CustomerAcctName)||void 0===i?void 0:i.cellText)&&void 0!==o?o:""}}getEventInfoFromAppointment(e){var n,r;return{name:e.caption,entity:e,date:null,customerName:null!==(r=null===(n=e.SchedulerServiceOrder__CustomerAcctName)||void 0===n?void 0:n.cellText)&&void 0!==r?r:""}}getEventInfoFromAssignment(e){var n,r;const i=this.appointments.getAssignment(e);return i?{name:"",entity:i,date:null,customerName:null!==(r=null===(n=i.SchedulerServiceOrder__CustomerAcctName)||void 0===n?void 0:n.cellText)&&void 0!==r?r:""}:null}getSuggestedTimePeriod(e,n){if(null==e)return null;const r=this.schedulerControl.visibleDateRange;return null==(null==r?void 0:r.startDate)||null==(null==r?void 0:r.startDate)?null:this.appointments.findEmptyTimePeriod(e,n,r.startDate,r.endDate)}onActiveFilterChanged(e){return __awaiter(this,void 0,void 0,(function*(){yield this.setSchedulerTabs();const e=this.schedulerGrid.getActiveFilter();this.schedulerTabBar.showTab(e.filterID)}))}onFiltersChanged(e){return __awaiter(this,void 0,void 0,(function*(){yield this.setSchedulerTabs()}))}detachTabObservers(){this.tabObservers.forEach(((e,n)=>{null==e||e.disconnect()})),this.tabObservers.clear()}setSchedulerTabs(){var e;return __awaiter(this,void 0,void 0,(function*(){function attachObserver(e,n){const r=document.getElementById(e);if(null==r)return null;const i=new MutationObserver((e=>{e.forEach((e=>{if("class"===e.attributeName){const i=e.oldValue,o=r.getAttribute("class");i.indexOf("qp-tabbar-active")<0&&o.indexOf("qp-tabbar-active")>=0&&n.bind(this)()}}))}));return i.observe(r,{attributes:!0,attributeOldValue:!0,attributeFilter:["class"]}),i}this.SchedulerGridFilters=this.schedulerGrid.getFilters(),yield this.ReleaseUIControl(),this.detachTabObservers(),null===(e=this.SchedulerGridFilters)||void 0===e||e.forEach((e=>{const n=attachObserver.bind(this)(`schedulerTabBarId_${e.filterID}_tabbar`,(()=>{var n;(null===(n=this.schedulerGrid.getActiveFilter())||void 0===n?void 0:n.filterID)!==e.filterID&&this.schedulerGrid.setActiveFilter(e.filterID)}));null!=n&&this.tabObservers.set(e.filterID,n)}))}))}serviceOrdersDataReadyHandler(e,n){var r;if(!e.view)return;const i=[...Array(e.rows.length).keys()].filter((n=>e.rows[n])).map((n=>e.view.getRowModel(n)));!this.initializationDataProcessed&&(null===(r=this.MainAppointmentFilter.InitialSORefNbr.value)||void 0===r?void 0:r.length)>0||this.serviceOrders.initializeWith(Array.from(i))&&(this.updateSOPane(),this.subscribedToSOBrickPreferences||(this.subscribedToSOBrickPreferences=!0,this.preferencesService.subscribe(this.serviceOrdersBrickLeftID,{applyPreferences:e=>this.applySOBrickLeftPreferences(e)}),this.preferencesService.subscribe(this.serviceOrdersBrickRightID,{applyPreferences:e=>this.applySOBrickRightPreferences(e)})))}searchAppointmentsDataReadyHandler(e,n){var r;if(!e.view)return;const i=[...Array(e.rows.length).keys()].filter((n=>e.rows[n])).map((n=>e.view.getRowModel(n)));!this.initializationDataProcessed&&(null===(r=this.MainAppointmentFilter.InitialRefNbr.value)||void 0===r?void 0:r.length)>0||this.searchAppointments.initializeWith(Array.from(i))&&(this.updateSearchAppointmentsPane(),this.subscribedToSearchAppointmentsBrickPreferences||(this.subscribedToSearchAppointmentsBrickPreferences=!0,this.preferencesService.subscribe(this.searchAppointmentBrickLeftID,{applyPreferences:e=>this.applySearchAppointmentsBrickLeftPreferences(e)}),this.preferencesService.subscribe(this.searchAppointmentBrickRightID,{applyPreferences:e=>this.applySearchAppointmentsBrickRightPreferences(e)})))}createInstance(e,n){const r=new n;return Object.assign(r,e),r}appointmentsDataReadyHandler(e,n){var r;return __awaiter(this,void 0,void 0,(function*(){if(e===this.schedulerGrid&&this.ignoreNextSchedulerGridUpdate)return void(this.ignoreNextSchedulerGridUpdate=!1);if(!e.view)return;const n=[...Array(e.rows.length).keys()].map((n=>this.createInstance(e.rows[n].cells,C.AppointmentEmployeeModel)));if(e===this.schedulerGrid){if(!this.appointments.initializeWith(Array.from(n)))return;null===(r=this.calendarContainer)||void 0===r||r.classList.toggle("qp-disable-filters",!1),yield this.updateCalendar(),this.subscribedToAppointmentsBrickPreferences||(this.subscribedToAppointmentsBrickPreferences=!0,this.preferencesService.subscribe(this.appointmentsBrickLeftID,{applyPreferences:e=>this.applyAppointmentsBrickLeftPreferences(e)}),this.preferencesService.subscribe(this.appointmentsBrickRightID,{applyPreferences:e=>this.applyAppointmentsBrickRightPreferences(e)}))}else e===this.lastUpdatedGrid&&n.length>0&&(this.appointments.mergeDataFrom(Array.from(n)),yield this.updateCalendar());yield this.scrollSearchResultIntoView(!1,!1)}))}processToolBarClick(e){var n;return __awaiter(this,void 0,void 0,(function*(){const r=null===(n=e.detail)||void 0===n?void 0:n.config,i=null==r?void 0:r.commandName;let o=null;if("refresh"===i&&e.target!==this.appointmentsAllStaffGridElement)return;let s=!0;switch(i){case"add":o=this.addAppointment();break;case"hours":o=this.switchHoursFilter();break;case"refresh":o=this.refreshCalendar();break;case"prevPeriod":o=this.processPrevPeriod();break;case"nextPeriod":o=this.processNextPeriod();break;case"periodDay":o=this.setDayPeriod();break;case"periodWeek":o=this.setWeekPeriod();break;case"periodMonth":o=this.setMonthPeriod();break;case"reset":o=this.resetCreateAppointmentForm();break;case"create":o=this.createApointmentFromPopup(!1,!0);break;case"confirm":o=this.confirmAppointment(this.popupEntityId.toString(),!0).then((e=>{e&&this.closePopup()}));break;case"unconfirm":o=this.confirmAppointment(this.popupEntityId.toString(),!1).then((e=>{e&&this.closePopup()}));break;case"validate":o=this.validateAppointment(this.popupEntityId.toString(),!0).then((e=>{e&&this.closePopup()}));break;case"invalidate":o=this.validateAppointment(this.popupEntityId.toString(),!1).then((e=>{e&&this.closePopup()}));break;case"unassign":o=this.unassignResource(this.popupAssignmentId.toString()).then((e=>{e&&this.closePopup()}));break;case"clone":o=this.cloneAppointment(this.popupEntityId.toString()).then((()=>{this.closePopup()}));break;case"delete":o=this.deleteAppointment(this.popupEntityId.toString()).then((e=>{e&&this.closePopup()}));break;default:s=!1}s&&(e.stopPropagation(),e.propagationStopped=!0),yield o}))}processPrevPeriod(){return __awaiter(this,void 0,void 0,(function*(){let e=new Date(this.DatesFilter.DateSelected.value.valueOf());switch(this.DatesFilter.PeriodKind.value){case y.PeriodKind.Day:e.setDate(e.getDate()-1);break;case y.PeriodKind.Week:e.setDate(e.getDate()-7);break;case y.PeriodKind.Month:e=new Date(e.getFullYear(),e.getMonth()-1,e.getDate())}yield this.reloadForDate(e)}))}processNextPeriod(){return __awaiter(this,void 0,void 0,(function*(){let e=new Date(this.DatesFilter.DateSelected.value.valueOf());switch(this.DatesFilter.PeriodKind.value){case y.PeriodKind.Day:e.setDate(e.getDate()+1);break;case y.PeriodKind.Week:e.setDate(e.getDate()+7);break;case y.PeriodKind.Month:e=new Date(e.getFullYear(),e.getMonth()+1,e.getDate())}yield this.reloadForDate(e)}))}datePicked(){var e,n,r;return __awaiter(this,void 0,void 0,(function*(){if(this.DatesFilter.DateSelected&&!this.datePickerReentryPrevention)try{if(this.datePickerReentryPrevention=!0,null==this.pickerDate||this.pickerDate.withoutTimeInMsec()===(null===(r=null===(n=null===(e=this.DatesFilter)||void 0===e?void 0:e.DateSelected)||void 0===n?void 0:n.value)||void 0===r?void 0:r.withoutTimeInMsec()))return;yield this.reloadForDate(this.pickerDate)}finally{this.datePickerReentryPrevention=!1}}))}reloadForDate(e,n=!1){var r,i;return __awaiter(this,void 0,void 0,(function*(){this.setDateFilterToDate(e,n);const o=null===(r=this.schedulerControl)||void 0===r?void 0:r.storeScroll();yield this.screenService.update(void 0,new s.ScreenUpdateParams({blockPage:!1,views:[nameof("AppointmentsAllStaff"),nameof("DatesFilter")]})),null===(i=this.schedulerControl)||void 0===i||i.scrollVerticallyTo(o.scrollTop,!1)}))}setDateFilterToDate(e,n=!1){var r,i;let o=e.clearHoursUTC();if(o=o.fromView(),n||o.withoutTimeInMsec()!==(null===(i=null===(r=this.DatesFilter.DateSelected)||void 0===r?void 0:r.value)||void 0===i?void 0:i.withoutTimeInMsec())){this.DatesFilter.DateSelected.updateValue(o);const[e,n]=b.AppointmentsDataHandler.getPeriodStartEndDates(this.DatesFilter);this.DatesFilter.DateBegin.updateValue(e.fromView()),this.DatesFilter.DateEnd.updateValue(n.fromView()),this.onDatesFilterUpdated()}}onDatesFilterUpdated(){var e,n,r,i,o,s,a;null===(e=document.querySelector(".qp-sch-period-day"))||void 0===e||e.classList.toggle("qp-sch-selected-time-period",this.isPeriodDay),null===(n=document.querySelector(".qp-sch-period-week"))||void 0===n||n.classList.toggle("qp-sch-selected-time-period",this.isPeriodWeek),null===(r=document.querySelector(".qp-sch-period-month"))||void 0===r||r.classList.toggle("qp-sch-selected-time-period",this.isPeriodMonth),this.pickerDate=new Date(null!==(a=null===(s=null===(o=null===(i=this.DatesFilter)||void 0===i?void 0:i.DateSelected)||void 0===o?void 0:o.value)||void 0===s?void 0:s.clearHoursUTC())&&void 0!==a?a:new Date),this.setDatePickerText()}setDatePickerText(){const e=document.querySelector(".qp-sch-calendar-container .qp-datetime__editor input"),n=document.querySelector(".qp-sch-calendar-container .qp-datetime__editor .buttonsCont span");if(!n||!e)return;const r=this.DatesFilter.DateSelected.value.clearHoursUTC();let i="";switch(this.DatesFilter.PeriodKind.value){case y.PeriodKind.Day:i=(0,l.formatDate)(r,T.DayMonth,(0,c.dateFormatInfo)());break;case y.PeriodKind.Week:const e=new Date(r),n=r.getDay(),o=e.getDate()-n+(0===n?-6:1),s=new Date(e.setDate(o)),a=new Date(e.setDate(o+6)),d=s.getMonth()===a.getMonth();i=`${(0,l.formatDate)(s,d?T.DateRangeSameMonthP1:T.DateRangeDiffMonthP1,(0,c.dateFormatInfo)())} - ${(0,l.formatDate)(a,d?T.DateRangeSameMonthP2:T.DateRangeDiffMonthP2,(0,c.dateFormatInfo)())}`;break;case y.PeriodKind.Month:i=(0,l.formatDate)(r,T.OnlyMonth,(0,c.dateFormatInfo)())}n.innerText=i,e.style.width=`${n.offsetWidth+20}px`}switchHoursFilter(){return __awaiter(this,void 0,void 0,(function*(){this.DatesFilter.FilterBusinessHours.updateValue(!this.DatesFilter.FilterBusinessHours.value),this.topBarConfig.hours.config.pushed=!this.DatesFilter.FilterBusinessHours.value,this.schedulerGrid.setTopBarButtonsState(),this.applyHoursFilter()}))}applyHoursFilter(){var e,n,r;null===(r=null===(n=null===(e=this.DatesFilter)||void 0===e?void 0:e.FilterBusinessHours)||void 0===n?void 0:n.value)||void 0===r||r?this.schedulerControl.timeAxis.filter((e=>!this.appointments.hasWorkingCalendarSet()||this.appointments.isWorkingTime(e.startDate,e.endDate))):this.schedulerControl.timeAxis.clearFilters()}refreshCalendar(){return __awaiter(this,void 0,void 0,(function*(){yield this.screenService.update(void 0,new s.ScreenUpdateParams({blockPage:!1,views:[nameof("AppointmentsAllStaff"),nameof("AppointmentFilter")]}))}))}toggleTimeProjection(e,n){this.backlogControl.timeRanges[0].startDate=e,this.backlogControl.timeRanges[0].endDate=n,this.schedulerControl.timeRanges[0].startDate=e,this.schedulerControl.timeRanges[0].endDate=n}getCssClassForOrientation(){return"horizontal"===this.orientation?"":"reversed"}getCssClassForPeriodInfo(){var e,n,r;return null===(r=null===(n=null===(e=this.DatesFilter)||void 0===e?void 0:e.FilterBusinessHours)||void 0===n?void 0:n.value)||void 0===r||r?"business-hours":"around-the-clock"}snapToPosition({resourceRecord:e,eventRecord:n,snapTo:r}){[r.x,r.y]=this.getSnapToResourcePosition(e,r.x,r.y,!0)}getSnapToResourcePosition(e,n,r,i=!1){const o=this.schedulerControl,s=o.getResourceRegion(e,null,null);return s?"horizontal"===this.orientation?function snapToGridHorizontal(e){const a=(i?0:o.y+o.headerHeight-o.scrollTop)+s.top,l=s.height-1,c=a+l/2+o.resourceMargin/2,d=Math.abs(r+l/2-c);return[n,d>=e?r:c-l/2]}(this.horizontalSnapDistance):function snapToGridVertical(e){const a=o.resourceColumnWidth,l=i?0:o.x+o.timeAxisSubGridElement.offsetLeft-o.scrollX,c=l+s.left+a/2+o.resourceMargin,d=Math.abs(n+a/2-c);return[d>=e?n:c-a/2,r]}(this.verticalSnapDistance):[n,r]}onEventClick({eventRecord:e,eventElement:n,assignmentRecord:r}){return __awaiter(this,void 0,void 0,(function*(){yield this.openPopup(e.id,r.id,n)}))}onEventMouseEnter({eventRecord:e,event:n}){this.aureliaEnhance(n.target)}aureliaEnhance(e){if(this.aureliaEnhancedElements.has(e))return;this.aureliaEnhancedElements.add(e);const n=this.templatingEngine.enhance({element:e,container:this.au.container,resources:this.au.resources});n.bind({}),n.attached()}onSOGridCellClick({record:e,cellElement:n,target:r}){return __awaiter(this,void 0,void 0,(function*(){console.log(r);const i=this.serviceOrders.getEntry(e.id);yield this.openPopup(i.SOID.value,null,n,"view","serviceOrder")}))}onServiceOrdersScroll({source:e,scrollTop:n}){return __awaiter(this,void 0,void 0,(function*(){const e=this.serviceOrdersControl.data;this.serviceOrdersControl.lastVisibleRow.dataIndex<e.length-1||this.serviceOrdersGrid.getMoreRows(0,!0,!1)}))}onSOGridCellMouseOver({record:e,cellElement:n,target:r}){this.aureliaEnhance(n)}onSearchAppointmentsScroll({source:e,scrollTop:n}){return __awaiter(this,void 0,void 0,(function*(){const e=this.searchAppointmentsControl.data;this.searchAppointmentsControl.lastVisibleRow.dataIndex<e.length-1||this.searchAppointmentsGrid.getMoreRows(0,!0,!1)}))}onSearchAppointmentsMouseOver({record:e,cellElement:n,target:r}){this.aureliaEnhance(n)}onSearchAppointmentGridCellClick({record:e,cellElement:n,target:r}){return __awaiter(this,void 0,void 0,(function*(){const i=r,o=this.searchAppointments.getEntry(e.id);let s=i.getAttribute("sch-field");s||(s=i.parentElement.getAttribute("sch-field")),"SelectedAppointment.RefNbr"!==s?yield this.selectSearchAppointment(o):yield this.openPopup(o.appointmentID,o.assignmentID,n)}))}selectSearchAppointment(e){var n;return __awaiter(this,void 0,void 0,(function*(){if((null===(n=this.currentSearchAppointment)||void 0===n?void 0:n.appointmentID)===e.appointmentID)return this.currentSearchAppointment=null,this.updateSearchAppointmentsPane(),void(yield this.updateCalendar());if(this.currentSearchAppointment=e,this.updateSearchAppointmentsPane(),yield this.scrollSearchResultIntoView())return;let r;this.setDateFilterToDate(e.ScheduledDateTimeBegin.value,!0),this.AppointmentFilter.SearchAppointmentID.updateValue(Number(e.appointmentID)),this.MainAppointmentFilter.ResetFilters.updateValue(!1);try{r=yield this.screenService.update(void 0,new s.ScreenUpdateParams({blockPage:!1,views:[nameof("AppointmentsAllStaff"),nameof("AppointmentFilter")]}))}finally{}if(!(null==r?void 0:r.succeeded))return;if(yield this.scrollSearchResultIntoView(!1,!1),this.schedulerGrid.getActiveFilter().filterID===this.allRecordsFilter)return;yield this.screenService.update(void 0,new s.ScreenUpdateParams({blockPage:!1,views:[nameof("MainAppointmentFilter")]}));if(this.MainAppointmentFilter.ResetFilters.value){this.schedulerGrid.onFilterApplied("",this.allRecordsFilter);document.querySelector(".qp-sch-calendar-container .qp-datetime__editor input");this.calendarContainer.classList.toggle("qp-disable-filters",!0),this.ignoreNextSchedulerGridUpdate=!0}}))}scrollSearchResultIntoView(e=!0,n=!0){var r;return __awaiter(this,void 0,void 0,(function*(){const i=this.currentSearchAppointment;if(!i)return!1;if(0===i.StaffCntr.value){const r=this.appointments.getUnassignedAppointment(i.appointmentID);if(r&&!r.isFilteredOut){e&&(yield this.updateCalendar());const r=this.backlogControl.eventStore.getById(i.appointmentID);return yield this.backlogControl.scrollEventIntoView(r,{animate:n,block:"start",edgeOffset:20}),!0}}else{const o=this.appointments.getAssignmentsByAppointmentId(i.appointmentID);if(o.length===i.StaffCntr.value&&!o.some((e=>e.isFilteredOut))){e&&(yield this.updateCalendar());const i=this.appointments.getFullId(o[0].assignmentID),s=this.schedulerControl.assignmentStore.getById(i);yield this.schedulerControl.scrollAssignmentIntoView(s,{animate:n,block:"start",edgeOffset:20}),yield this.schedulerControl.scrollResourceEventIntoView(s.resource,s.event,{animate:n,block:"start",edgeOffset:20});const a=this.schedulerControl.getElementFromAssignmentRecord(s);if((null===(r=null==a?void 0:a.parentElement)||void 0===r?void 0:r.getAttribute("data-assignment-id"))!==i){console.log("assignment not found, going to try another method"),yield this.updateCalendar();const e=this.schedulerControl.assignmentStore.getById(i);yield this.schedulerControl.scrollResourceEventIntoView(e.resource,e.event,{animate:n,block:"start",edgeOffset:20})}return!0}}return!1}))}openPopup(e,n,r,i="view",a="appointment"){var l,c,d,u,h,g,p;return __awaiter(this,void 0,void 0,(function*(){if(this.popupEntityId===e)return this.eventPopup.close(),void(this.popupEntityId=void 0);this.popupEntityId=e,this.popupAssignmentId=n;const m="edit"===i?this.editPopupInner:"appointment"===a?this.appointmentPopupInner:this.serviceOrderPopupInner,f="edit"===i?this.editPopupInnerHolder:"appointment"===a?this.appointmentPopupInnerHolder:this.serviceOrderPopupInnerHolder;let b;m===this.appointmentPopupInner?b=[nameof("AppointmentFilter"),nameof("SelectedAppointment"),nameof("SelectedSO"),nameof("SelectedAppointmentEmployees")]:m===this.serviceOrderPopupInner?b=[nameof("SOFilter"),nameof("SelectedSO"),nameof("SelectedSOEmployees")]:m===this.editPopupInner&&(b=[nameof("MainAppointmentFilter"),nameof("EditedAppointmentEmployees")]),this.SelectedAppointment.ScheduledDateTimeBegin.displayMask="g";const v=m.getBoundingClientRect();if(this.eventPopup=new o.Popup({forElement:r,align:"l-r",cls:"qp-sch-popup "+("view"===i?"qp-sch-view-popup":"qp-sch-edit-popup"),autoShow:!0,autoClose:!1,monitorResize:!0,scrollAction:"realign",onBeforeHide:()=>{f.appendChild(m),this.popupEntityId=0,null!=this.createdEventRecord&&(this.schedulerControl.eventStore.remove(this.createdEventRecord),this.backlogControl.eventStore.remove(this.createdEventRecord))},hideWhenEmpty:!1,floating:!0,anchor:!0,html:`\n\t\t\t\t<div class="event-info" style="width:${v.width}px; height:${v.height}px">\n\t\t\t\t\t<div class="splash loading"></div>\n\t\t\t\t</div>`}),document.getElementById("page-caption").onpointerdown=e=>{this.closePopup(e)},document.getElementById("customizationMenu_menu").onpointerdown=e=>{e.stopPropagation()},"edit"===i)this.initCreateAppointmentForm();else if("appointment"===a){const n=this.appointments.getPartialId(e),r=this.appointments.getAppointment(e);let i=null==r?void 0:r.SchedulerServiceOrder__SOID.value;if(!r){const e=this.searchAppointments.getEntry(n);i=null==e?void 0:e.SchedulerServiceOrder__SOID.value}this.AppointmentFilter.AppointmentID.updateValue(Number(n)),this.SOFilter.SOID.updateValue(Number(i))}else"serviceOrder"===a&&this.SOFilter.SOID.updateValue(Number(e));let y;try{y=yield this.screenService.update(void 0,new s.ScreenUpdateParams({blockPage:!1,views:b}))}finally{this.AppointmentFilter.AppointmentID.updateValue(0),this.SOFilter.SOID.updateValue(0)}null!==(l=this.defaultSrvOrdType)&&void 0!==l||(this.defaultSrvOrdType=null===(d=null===(c=this.MainAppointmentFilter.SrvOrdType)||void 0===c?void 0:c.value)||void 0===d?void 0:d.id);const w=this.eventPopup.element.getElementsByClassName("event-info")[0];if(null==y?void 0:y.succeeded){if(w.innerHTML="",w.appendChild(m),null!=this.popupSizeObserver&&this.popupSizeObserver.disconnect(),this.popupSizeObserver=new ResizeObserver(((e,n)=>{const r=m.getBoundingClientRect();w.style.width=`${r.width}px`,w.style.height=`${r.height}px`,this.eventPopup.element.style.height="",console.log(`new height: ${r.height}`)})),this.popupSizeObserver.observe(m),m===this.appointmentPopupInner){const e=void 0===this.SelectedAppointmentEmployees.getRowModel(0);this.topBarAppointmentConfig.items.unassign.config.hidden=e||this.SelectedAppointment.isLocked,this.topBarAppointmentConfig.items.confirm.config.hidden=!this.SelectedAppointment.canConfirm,this.topBarAppointmentConfig.items.unconfirm.config.hidden=!this.SelectedAppointment.canUnconfirm,this.topBarAppointmentConfig.items.validate.config.hidden=!this.SelectedAppointment.canValidate,this.topBarAppointmentConfig.items.invalidate.config.hidden=!this.SelectedAppointment.canInvalidate,this.topBarAppointmentConfig.items.delete.config.hidden=this.SelectedAppointment.isLocked,this.appointmentToolBar.setupViewModel();const n=document.querySelector("#groupAppointmentPopupEmployeesID");null===(u=this.appointmentPopupEmployeesForm)||void 0===u||u.classList.toggle("hidden",e),null==n||n.classList.toggle("hidden",e)}if(m===this.editPopupInner){const e=document.querySelector("#groupEditedAppointmentPopupEmployeesID"),n=0===(null!==(g=null===(h=this.dragCreateResourceIDsSet)||void 0===h?void 0:h.size)&&void 0!==g?g:0);null===(p=this.editedAppointmentPopupEmployeesForm)||void 0===p||p.classList.toggle("hidden",n),null==e||e.classList.toggle("hidden",n)}if(m===this.serviceOrderPopupInner){document.querySelector("#groupSOPopupEmployeesID")}}else w.innerHTML=k.ErrorLoadingData}))}resetCreateAppointmentForm(){return __awaiter(this,void 0,void 0,(function*(){Object.keys(this.MainAppointmentFilter).filter((e=>!!this.MainAppointmentFilter[e])).forEach((e=>this.screenService.setScreenParameter(nameof("MainAppointmentFilter"),e,null))),this.MainAppointmentFilter.SrvOrdType.updateValue(this.defaultSrvOrdType||null),this.initCreateAppointmentForm();yield this.screenService.update(void 0,new s.ScreenUpdateParams({blockPage:!1},this.editPopupInner))}))}initCreateAppointmentForm(){var e;if(this.createdEventRecord){const n=null===(e=this.createdEventRecord.startDate)||void 0===e?void 0:e.fromView();this.MainAppointmentFilter.ScheduledDateTimeBegin_Date.updateValue(n),this.MainAppointmentFilter.ScheduledDateTimeBegin_Time.updateValue(n),this.MainAppointmentFilter.Duration.updateValue(S.TimeConverter.minutesTohMM(this.createdEventRecord.durationMS/1e3/60)),this.MainAppointmentFilter.Resources.updateValue([...this.dragCreateResourceIDsSet].join(","))}this.MainAppointmentFilter.SODetID.updateValue(0),console.log(`initCreateAppointmentForm: ${this.MainAppointmentFilter.Resources.value}`)}setupObservers(){[this.MainAppointmentFilter.SrvOrdType,this.MainAppointmentFilter.SORefNbr,this.MainAppointmentFilter.CustomerID,this.MainAppointmentFilter.LocationID,this.MainAppointmentFilter.ContactID].forEach((e=>{this.observeEditPanelChange(e)}))}setupPopups(){function setupAppViewPopup(e,n){document.querySelector(`#${n}PopupForm_toggle`);const r=e.querySelector(".qp-dialog-header-buttons");null==r||r.querySelector("qp-icon:first-child")}setupAppViewPopup(this.appointmentPopupInner,"appointment"),setupAppViewPopup(this.editPopupInner,"edit"),setupAppViewPopup(this.serviceOrderPopupInner,"serviceOrder")}observeEditPanelChange(e){this.bindingEngine.propertyObserver(e,"value").subscribe(((e,n)=>{e&&(null==e?void 0:e.id)!==(null==n?void 0:n.id)&&(this.updatingObservedItem||this.popupEntityId&&(this.updatingObservedItem=!0,this.screenService.update(void 0,new s.ScreenUpdateParams({blockPage:!1},this.editPopupInner)).finally((()=>{this.updatingObservedItem=!1}))))}))}closePopup(e=null){var n;if(!this.popupEntityId)return!0;const r=null===(n=null==e?void 0:e.target)||void 0===n?void 0:n.classList;return(null==r?void 0:r.contains("qp-menu-spacer"))||(null==r?void 0:r.contains("qp-menu-item"))?(e.stopPropagation(),!0):(this.eventPopup.close(),this.popupEntityId=void 0,!0)}onSelectionChange(){return __awaiter(this,void 0,void 0,(function*(){"collapsed-second"!==this.mapSplitter.getSplitterState()&&this.updateMapController()}))}mapSplitterStateChanged(){"collapsed-second"!==this.mapSplitter.getSplitterState()&&this.updateMapController()}updateMapController(){return __awaiter(this,void 0,void 0,(function*(){const e=new m.MapController(this.mainMap,this.schedulerControl,this.appointments,this.openPopup.bind(this));yield e.updateMap()}))}onSubGridCollapse({source:e,subGrid:n}){return __awaiter(this,void 0,void 0,(function*(){n===this.lockedSubGrid||n===this.lockedSubGridBacklog?this.splitterPreferences.state="collapsed-first":n!==this.normalSubGrid&&n!==this.normalSubGridBacklog||(this.splitterPreferences.state="collapsed-second"),yield this.savePreferences()}))}onSubGridExpand({source:e,subGrid:n}){return __awaiter(this,void 0,void 0,(function*(){this.splitterPreferences.state="normal",yield this.savePreferences()}))}onLockedSubGridResize({width:e}){var n;return __awaiter(this,void 0,void 0,(function*(){(null===(n=document.getElementsByClassName("b-moving"))||void 0===n?void 0:n[0])&&(this.saveSplitterPositionTimer&&clearTimeout(this.saveSplitterPositionTimer),this.saveSplitterPositionTimer=setTimeout((()=>{this.splitterPreferences.position=e,this.savePreferences()}),300))}))}onVisibleDateRangeChange(){"collapsed-second"!==this.mapSplitter.getSplitterState()&&(this.updateMapTimer&&clearTimeout(this.updateMapTimer),this.updateMapTimer=setTimeout((()=>{new m.MapController(this.mainMap,this.schedulerControl,this.appointments,this.openPopup.bind(this)).updateMap()}),300))}onDragCreateStart({source:e,eventRecord:n,resourceRecord:r,eventElement:i}){var o;const s=n.resourceId.toString();s!==C.AppointmentEmployeeModel.unassignedId?(this.dragCreateResourceIDsSet=new Set(null===(o=this.schedulerControl.selectedRows)||void 0===o?void 0:o.map((e=>e.id.toString()))),this.dragCreateResourceIDsSet.add(s),this.dragCreateResourceIDsSet.forEach((e=>{e!==s&&this.schedulerControl.eventStore.assignEventToResource(n,e)}))):this.dragCreateResourceIDsSet=new Set}onDragCreateEnd({source:e,eventRecord:n,resourceRecord:r,eventElement:i}){return this.createdEventRecord=n,this.openPopup("new",null,i,"edit"),!1}onBeforeEventDrag({source:e,eventRecord:n,resourceRecord:r}){this.toggleTimeProjection(n.startDate,n.endDate)}onEventDragReset({source:e,eventRecord:n,resourceRecord:r}){this.toggleTimeProjection(null,null)}onTimeAxisHeaderClick({startDate:e,endDate:n}){return __awaiter(this,void 0,void 0,(function*(){yield this.schedulerControl.scrollToDate(e,{animate:!0,block:"start",edgeOffset:0})}))}attachMouseEventHandlers(){this.schedulerControl.element.addEventListener("mousemove",(e=>{const n=document.elementFromPoint(e.pageX,e.pageY),r=this.schedulerControl.resolveResourceRecord(n);this.hightlightResource(r)}),!1),this.schedulerControl.element.addEventListener("mouseout",(e=>{this.clearResourceHightlight(this.prevHoveredResource)}),!1)}hightlightResource(e){var n;if((null===(n=this.prevHoveredResource)||void 0===n?void 0:n.id)!==(null==e?void 0:e.id)&&this.clearResourceHightlight(this.prevHoveredResource),!(null==e?void 0:e.id))return;const r=this.getResourceElement(e);null==r||r.setAttribute("qp-sch-dragged-over","true"),this.prevHoveredResource=e}clearResourceHightlight(e){if(!(null==e?void 0:e.id))return;const n=this.getResourceElement(e);null==n||n.removeAttribute("qp-sch-dragged-over"),this.prevHoveredResource=null}getResourceElement(e){return document.querySelector(`.b-grid-row[data-id="${e.id}"]`)}unassignedRenderer({eventRecord:e,resourceRecord:n,renderData:r}){const i=this.appointments.getUnassignedAppointment(e.id);return this.renderAppointmentWithStatusBar(i,r)}assignmentRenderer({eventRecord:e,resourceRecord:n,renderData:r}){const i=this.appointments.getAssignment(r.assignment.id),o=e.get("eventInfo"),s=null!=i?i:null==o?void 0:o.entity;return this.renderAppointmentWithStatusBar(s,r)}renderDraggedServiceOrder(e,n=!1){return`<div class="qp-sch-event-empty-status-bar"></div>${this.getAppointmentHtml(e,n)}`}renderAppointmentWithStatusBar(e,n=null,r=!1){var i,o;const s=e instanceof C.AppointmentEmployeeModel||e instanceof C.SearchAppointmentModel?e:null,a=null!==(i=null==s?void 0:s.bandColor)&&void 0!==i?i:"#000000",l="#FFFFFFB0",c=null==e?void 0:e.isFilteredOut,d="#000000"===a||c?'<div class="qp-sch-event-empty-status-bar"></div>':`\n\t\t\t<div class="qp-sch-event-status-bar" style=\n\t\t\t\t"background: repeating-linear-gradient(90deg, ${a}, ${a} 9px, ${l} 9px, ${l} 10px, transparent 10px, transparent);">\n\t\t\t</div>\n\t\t\t`,u=e?this.getAppointmentHtml(e,!1,r,c):this.getNewAppointmentHtml(),h=null===(o=this.currentSearchAppointment)||void 0===o?void 0:o.appointmentID;return h&&s&&(null==n||n.cls.add(h===s.appointmentID?"qp-sch-search-highlight-event":"qp-sch-search-dimmed-event")),`${d}${u}`}getAppointmentBrickHeight(){const e=getRegularFields(this.appointmentsBrickLeft),n=getRegularFields(this.appointmentsBrickRight);return 16*Math.max(e.length,n.length)+22;function getRegularFields(e){var n,r,i;return null!==(i=null===(r=null===(n=e.Fields)||void 0===n?void 0:n.filter((n=>e.getFieldVisibility(!0,n))))||void 0===r?void 0:r.filter((e=>!["Priority","Severity","StaffCntr"].includes(e.name))))&&void 0!==i?i:[]}}getServiceOrderHtml(e,n=!1){const r=this.serviceOrdersBrickLeft,i=this.serviceOrdersBrickRight;return`<div class="qp-sch-event-info">${this.getEntityHtmlPart(r,i,(r=>this.getServiceOrderFieldHtml(r,e,n)))}</div>`}getEntityHtmlPart(e,n,r){var i,o;const s=null===(i=e.Fields)||void 0===i?void 0:i.filter((n=>e.getFieldVisibility(!0,n))),a=null===(o=n.Fields)||void 0===o?void 0:o.filter((e=>n.getFieldVisibility(!0,e)));if(!(null==s?void 0:s.length))return"";const l=s.map((e=>r(e))),c=a.map((e=>r(e)));let d="",u=0,h=0;for(;u<s.length||h<a.length;){let[e,n]=["",""];e=u<s.length?l[u]:null,u++;let r="",i="",o=0;do{r=h<a.length?c[h]:null,i=h+1<a.length?c[h+1]:null,n+=null!=r?r:"",h++,o+=(null==r?void 0:r.startsWith("<span><svg"))?1:0}while(null!=i&&(""===n||(null==n?void 0:n.startsWith("<span><svg"))&&((null==i?void 0:i.startsWith("<span><svg"))||""===i)));d+=`<div>${e}${n?(null==n?void 0:n.startsWith("<span><svg"))?`\t<div class="qp-sch-tile-icon" style="max-width: max(0px, calc((100% - ${16*o+6*Math.max(o-1,0)+10}px)*999));">\n\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t\t<span>${n}</span>\n\t\t\t\t\t\t</div>`:`<span>${n}</span>`:""}</div>`}return d}getServiceOrderFieldHtml(e,n,r){var i,s,a;let l="",c=null,d=!1;"RefNbr"===e.name?l=r?n.serviceId:n.orderId:e.viewName===nameof("SelectedSO")&&(c=n[e.name],d=["Priority","Severity"].includes(e.name));const u=`sch-field="${`${e.viewName}.${e.name}`}" sch-value="${null!==(i=null==c?void 0:c.value)&&void 0!==i?i:l}"`;if(d){const n=this.getIconUrl(e.name,null==c?void 0:c.cellText);if(!n)return"";return`<span><svg class="qp-sch-tile-icon" ${u}> <use href="${n}"></use></svg>${["Priority","Severity"].includes(e.name)?`<qp-tooltip>${e.name}: ${null==c?void 0:c.cellText}</qp-tooltip>`:""}</span>`}l=l||(null!==(s=null==c?void 0:c.cellText)&&void 0!==s?s:"");const h=o.StringHelper.xss`${l}`;return`<span ${u}>${this.applyMarks(h,null===(a=this.serviceOrdersFastFilter)||void 0===a?void 0:a.value)}</span>`}getAppointmentHtml(e,n=!1,r=!1,i=!1){const o=e instanceof C.SearchAppointmentModel?this.searchAppointmentBrickLeft:this.appointmentsBrickLeft,s=e instanceof C.SearchAppointmentModel?this.searchAppointmentBrickRight:this.appointmentsBrickRight;return`<div class="qp-sch-event-info">${this.getEntityHtmlPart(o,s,(o=>this.getAppointmentFieldHtml(o,e,r,n,i)))}</div>`}getAppointmentFieldHtml(e,n,r,i,s=!1){var a,l,c,d,u,h,g;const p=n instanceof C.AppointmentEmployeeModel||n instanceof C.SearchAppointmentModel,m=p&&!(n.isConfirmed||n.isValidatedByDispatcher);let f="",b=null,v=!1,y="";if("RefNbr"===e.name)f=i?n.serviceId:n.caption;else switch(e.viewName){case nameof("SelectedAppointment"):b=null!==(l=null!==(a=n[`SchedulerAppointment__${e.name}`])&&void 0!==a?a:n[`FSSODet__${e.name}`])&&void 0!==l?l:n[e.name],"Status"===e.name&&p&&"#000000"!==n.bandColor&&(y=null!==(c=n.bandColor)&&void 0!==c?c:"",y=""!==y?`style="color: ${y};"`:""),v="StaffCntr"===e.name;break;case nameof("SelectedSO"):b=null!==(d=n[`SchedulerServiceOrder__${e.name}`])&&void 0!==d?d:n[e.name],v=["Priority","Severity"].includes(e.name)}const w=`${e.viewName}.${e.name}`,S=`sch-field="${w}" sch-value="${null!==(u=null==b?void 0:b.value)&&void 0!==u?u:f}"`;if(v){const n=this.getIconUrl(e.name,null==b?void 0:b.cellText,m);if(!n)return"";return`<span><svg class="qp-sch-tile-icon" ${S}> <use href="${n}"></use></svg>${["Priority","Severity"].includes(e.name)?`<qp-tooltip>${e.name}: ${null==b?void 0:b.cellText}</qp-tooltip>`:""}</span>`}f=f||(null!==(h=null==b?void 0:b.cellText)&&void 0!==h?h:"");const x=o.StringHelper.xss`${f}`,D=r?this.applyMarks(x,null===(g=this.searchAppointmentsFastFilter)||void 0===g?void 0:g.value):x;return`<span ${y} ${"SelectedAppointment.RefNbr"===w?"class='qp-sch-popup-link'":""} ${S}"><span>${s?"":D}</span></span>`}getIconUrl(e,n,r=!1){switch(e){case"Priority":switch(n){case"High":return r?this.iconPriorityDarkHigh.SvgUrl:this.iconPriorityHigh.SvgUrl;case"Medium":return r?this.iconPriorityDarkMedium.SvgUrl:this.iconPriorityMedium.SvgUrl;case"Low":return r?this.iconPriorityDarkLow.SvgUrl:this.iconPriorityLow.SvgUrl}case"Severity":switch(n){case"High":return r?this.iconSeverityDarkHigh.SvgUrl:this.iconSeverityHigh.SvgUrl;case"Medium":return r?this.iconSeverityDarkMedium.SvgUrl:this.iconSeverityMedium.SvgUrl;case"Low":return r?this.iconSeverityDarkLow.SvgUrl:this.iconSeverityLow.SvgUrl}case"StaffCntr":if(Number(n)>1)return r?this.iconMultiEmployeeDark.SvgUrl:this.iconMultiEmployee.SvgUrl}return""}getNewAppointmentHtml(){return o.StringHelper.xss`
			<div class="qp-sch-event-info"><div>
			<b>${R.NewAppointment}</b><br>
			</div></div>
			`}applyMarks(e,n){if(!n)return e;const r=n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),i=new RegExp(r,"gi");return e.replace(i,(e=>`<mark>${e}</mark>`))}getDataItemFromMenuCommand(e,n,r,i){return e?this.searchAppointments.getEntry(e.id):r.id!==C.AppointmentEmployeeModel.unassignedId?this.appointments.getAssignment(i.id):this.appointments.getUnassignedAppointment(n.id)}getMenuItems(){return{copyEvent:!1,cutEvent:!1,splitEvent:!1,removeRow:!1,editEvent:{text:R.EditAppointment,onItem:this.onEditAppointment.bind(this),cls:"qp-sch-menu",icon:""},deleteEvent:{text:R.DeleteAppointment,onItem:this.onDeleteAppointment.bind(this),cls:"qp-sch-menu",icon:""},cloneEvent:{text:R.CloneAppointment,onItem:this.onCloneAppointment.bind(this),cls:"qp-sch-menu",icon:""},unassignEvent:{text:R.Unassign,onItem:this.onUnassignResource.bind(this),cls:"qp-sch-menu",icon:""}}}processMenuItems({record:e,eventRecord:n,resourceRecord:r,assignmentRecord:i,items:o}){const s=this.getDataItemFromMenuCommand(e,n,r,i);o.editEvent.text=s.isLocked?R.ViewAppointment:R.EditAppointment,o.validate=!s.isLocked&&{text:s.isValidatedByDispatcher?R.ClearValidation:R.ValidateByDispatcher,onItem:this.onValidateAppointment.bind(this),cls:"qp-sch-menu"},o.confirm=!s.isLocked&&{text:s.isConfirmed?R.Unconfirm:R.Confirm,onItem:this.onConfirmAppointment.bind(this),cls:"qp-sch-menu"},o.unassignEvent.hidden=s instanceof C.SearchAppointmentModel||s.isLocked||s.resourceId===C.AppointmentEmployeeModel.unassignedId,o.deleteEvent.hidden=s.isLocked}addAppointment(){return __awaiter(this,void 0,void 0,(function*(){this.dragCreateResourceIDsSet=new Set,this.openPopup("new",null,null,"edit")}))}onEditAppointment({record:e,eventRecord:n,resourceRecord:r,assignmentRecord:i}){return __awaiter(this,void 0,void 0,(function*(){const o=this.getDataItemFromMenuCommand(e,n,r,i);let a;this.AppointmentFilter.AppointmentID.updateValue(Number(o.appointmentID));try{a=yield this.screenService.update(void 0,new s.ScreenUpdateParams({blockPage:!1,views:[nameof("SelectedAppointment")]}))}finally{this.AppointmentFilter.AppointmentID.updateValue(0)}this.apiClient.openAppointmentEditor(this.screenID,this.SelectedAppointment.RefNbr.viewName,o.refNbr)}))}onCloneAppointment({record:e,eventRecord:n,resourceRecord:r,assignmentRecord:i}){return __awaiter(this,void 0,void 0,(function*(){const o=this.getDataItemFromMenuCommand(e,n,r,i);yield this.cloneAppointment(o.appointmentID)}))}cloneAppointment(e){return __awaiter(this,void 0,void 0,(function*(){const n=this.getAppointment(e);this.MainAppointmentFilter.RefNbr.updateValue(n.refNbr),this.MainAppointmentFilter.SrvOrdType.updateValue(n.srvOrdType);try{return(yield this.screenService.update("CloneAppointment",new s.ScreenUpdateParams({blockPage:!1},this.mainTabBarHolder))).succeeded}catch(e){return!1}}))}onDeleteAppointment({record:e,eventRecord:n,resourceRecord:r,assignmentRecord:i}){return __awaiter(this,void 0,void 0,(function*(){const o=this.getDataItemFromMenuCommand(e,n,r,i);return yield this.deleteAppointment(o.appointmentID)}))}deleteAppointment(e){return __awaiter(this,void 0,void 0,(function*(){this.UpdatedAppointment.AppointmentID.updateValue(Number(e));try{const n=yield this.screenService.update("DeleteAppointment",new s.ScreenUpdateParams({blockPage:!1},this.mainTabBarHolder));return n.succeeded&&(this.appointments.removeAppointment(e),yield this.updateCalendar()),n.succeeded}catch(e){return!1}}))}onUnassignResource({eventRecord:e,resourceRecord:n,assignmentRecord:r}){return __awaiter(this,void 0,void 0,(function*(){return yield this.unassignResource(r.id)}))}unassignResource(e){return __awaiter(this,void 0,void 0,(function*(){const n=this.appointments.getAssignment(e);return!!(yield this.sendUpdatedAppointment({appointmentID:n.appointmentID,oldResourceID:n.resourceId,newResourceID:null}))&&(this.appointments.removeAssignment(n.assignmentID),yield this.updateCalendar(),!0)}))}onConfirmAppointment({record:e,eventRecord:n,resourceRecord:r,assignmentRecord:i}){return __awaiter(this,void 0,void 0,(function*(){const o=this.getDataItemFromMenuCommand(e,n,r,i);return yield this.confirmAppointment(o.appointmentID,!o.isConfirmed)}))}confirmAppointment(e,n){return __awaiter(this,void 0,void 0,(function*(){return yield this.sendUpdatedAppointment({appointmentID:e,confirmed:n})}))}onValidateAppointment({record:e,eventRecord:n,resourceRecord:r,assignmentRecord:i}){return __awaiter(this,void 0,void 0,(function*(){const o=this.getDataItemFromMenuCommand(e,n,r,i);return yield this.validateAppointment(o.appointmentID,!o.isValidatedByDispatcher)}))}validateAppointment(e,n){return __awaiter(this,void 0,void 0,(function*(){return yield this.sendUpdatedAppointment({appointmentID:e,validatedByDispatcher:n})}))}onBeforeEventResizeFinalize({source:e,context:n}){return __awaiter(this,void 0,void 0,(function*(){n.async=!0;let e=!1;this.calendarRedrawSuppressed=!0;try{e=yield this.sendUpdatedAppointment({appointmentID:n.eventRecord.id,newBegin:n.startDate,newEnd:n.endDate})}finally{this.calendarRedrawSuppressed=!1}n.finalize(e)}))}onBeforeEventDropFinalize({source:e,context:n}){return __awaiter(this,void 0,void 0,(function*(){if(!function isAppointmentChanged(e,n){return n.resourceRecord.id!==n.newResource.id||(e.startDate.toISOString()!==n.startDate.toISOString()||e.endDate.toISOString()!==n.endDate.toISOString())}(n.eventRecord,n))return;n.async=!0;const e=n.resourceRecord.id,r=n.newResource.id;this.calendarRedrawSuppressed=!0;let i=!1;try{if(i=yield this.sendUpdatedAppointment({appointmentID:n.eventRecord.id,newBegin:n.startDate,newEnd:n.endDate,newResourceID:r,oldResourceID:e}),r!==e){const r=this.appointments.getAssignmentByAppointmentAndResource(n.eventRecord.id,e);this.appointments.removeAssignment(r.assignmentID),this.calendarRedrawSuppressed=!1,this.updateCalendar()}}finally{this.calendarRedrawSuppressed=!1}n.finalize(i)}))}assignUnassignedAppointment(e,n,r,i){return __awaiter(this,void 0,void 0,(function*(){return!!(yield this.sendUpdatedAppointment({appointmentID:e,newBegin:r,newEnd:i,newResourceID:n}))&&(this.appointments.removeFromUnassigned(e.toString()),this.updateCalendar(),!0)}))}addResourceToAppointment(e,n){return __awaiter(this,void 0,void 0,(function*(){return yield this.sendUpdatedAppointment({appointmentID:n,newResourceID:e})}))}sendUpdatedAppointment(e){var n,r,i,o;return __awaiter(this,void 0,void 0,(function*(){const a=this.getAppointment(e.appointmentID.toString());this.UpdatedAppointment.AppointmentID.updateValue(Number(a.appointmentID)),this.UpdatedAppointment.NewResourceID.updateValue(Number(null!==(n=e.newResourceID)&&void 0!==n?n:0)),this.UpdatedAppointment.OldResourceID.updateValue(Number(null!==(r=e.oldResourceID)&&void 0!==r?r:0)),this.UpdatedAppointment.NewBegin.updateValue(null===(i=e.newBegin)||void 0===i?void 0:i.fromView()),this.UpdatedAppointment.NewEnd.updateValue(null===(o=e.newEnd)||void 0===o?void 0:o.fromView()),this.UpdatedAppointment.Confirmed.updateValue(e.confirmed),this.UpdatedAppointment.ValidatedByDispatcher.updateValue(e.validatedByDispatcher);const l=this.searchAppointments.getEntry(a.appointmentID)?[nameof("LastUpdatedAppointment"),nameof("LastUpdatedAppointmentFilter"),nameof("SearchAppointments")]:[nameof("LastUpdatedAppointment"),nameof("LastUpdatedAppointmentFilter")];try{return(yield this.screenService.update("UpdateAppointment",new s.ScreenUpdateParams({blockPage:!1,views:l}))).succeeded}catch(e){return!1}}))}getAppointment(e){const n=this.appointments.getAppointment(e);return n||this.searchAppointments.getEntry(e)}createAppointmentFromSODetail(e,n,r,i){return __awaiter(this,void 0,void 0,(function*(){return yield this.createAppointmentFromSO(e,n,r,i,!0)}))}createAppointmentFromSO(e,n,r,i,o=!1){var a,l,c,d,u,h,g,p;return __awaiter(this,void 0,void 0,(function*(){Object.keys(this.MainAppointmentFilter).filter((e=>!!this.MainAppointmentFilter[e])).forEach((e=>this.screenService.setScreenParameter(nameof("MainAppointmentFilter"),e,null))),this.MainAppointmentFilter.OnHold.updateValue(!1),this.MainAppointmentFilter.OpenEditor.updateValue(!1),this.MainAppointmentFilter.SrvOrdType.updateValue(null===(a=e.SrvOrdType)||void 0===a?void 0:a.cellText),this.MainAppointmentFilter.SOID.updateValue(Number(null!==(c=null===(l=e.SOID)||void 0===l?void 0:l.cellText)&&void 0!==c?c:0)),this.MainAppointmentFilter.Resources.updateValue(n.toString()),this.MainAppointmentFilter.ScheduledDateTimeBegin_Date.updateValue(r.fromView()),this.MainAppointmentFilter.ScheduledDateTimeBegin_Time.updateValue(r.fromView()),this.MainAppointmentFilter.Duration.updateValue(S.TimeConverter.minutesTohMM(i.fromView().getTime()-r.fromView().getTime())/1e3/60),this.MainAppointmentFilter.Description.updateValue(o?null===(d=e.FSSODet__TranDesc)||void 0===d?void 0:d.cellText:null===(u=e.DocDesc)||void 0===u?void 0:u.cellText),o&&this.MainAppointmentFilter.SODetID.updateValue(Number(null===(h=e.FSSODet__SODetID)||void 0===h?void 0:h.cellText));try{this.LastUpdatedAppointmentFilter.AppointmentID.updateValue(0);yield this.screenService.update("ScheduleAppointment",new s.ScreenUpdateParams({blockPage:!1,views:[nameof("MainAppointmentFilter"),nameof("EditedAppointmentEmployees"),nameof("LastUpdatedAppointment"),nameof("LastUpdatedAppointmentFilter")]}));const n=null===(p=null===(g=this.LastUpdatedAppointmentFilter)||void 0===g?void 0:g.AppointmentID)||void 0===p?void 0:p.value;return n?(this.serviceOrders.scheduleEntry(o?e.serviceId:e.orderId),this.updateSOPane(!1),n):(this.reportErrorsFromEditedAppointment(),0)}catch(e){return this.reportErrorsFromEditedAppointment(),0}}))}reportErrorsFromEditedAppointment(){return __awaiter(this,void 0,void 0,(function*(){Object.values(this.MainAppointmentFilter).forEach((e=>{var n;(null===(n=e.error)||void 0===n?void 0:n.length)>0&&(0,s.showInformer)(e.error,"error")}))}))}createApointmentFromPopup(e=!1,n=!1){var r,i;return __awaiter(this,void 0,void 0,(function*(){yield this.ReleaseUIControl(),this.LastUpdatedAppointmentFilter.AppointmentID.updateValue(0),this.MainAppointmentFilter.OnHold.updateValue(e),this.MainAppointmentFilter.OpenEditor.updateValue(n);yield this.screenService.update("ScheduleAppointment",new s.ScreenUpdateParams({blockPage:!1,views:[nameof("MainAppointmentFilter"),nameof("LastUpdatedAppointment"),nameof("LastUpdatedAppointmentFilter")]}));if(n)return this.closePopup(),this.resetCreateAppointmentForm(),0;const o=null===(i=null===(r=this.LastUpdatedAppointmentFilter)||void 0===r?void 0:r.AppointmentID)||void 0===i?void 0:i.value;return o?(this.closePopup(),o):0}))}onBranchChanged(){return __awaiter(this,void 0,void 0,(function*(){}))}ReleaseUIControl(){return __awaiter(this,void 0,void 0,(function*(){yield new Promise((e=>setTimeout(e,1)))}))}};M.fileName="C:/build/code_repo/WebSites/Pure/Site/FrontendSources/screen/src/screens/FS/FS300300/FS300300.ts",M.rootName="C:/build/code_repo/WebSites/Pure/Site/FrontendSources/screen/src",D([i.bindable,__metadata("design:type",s.QpGridCustomElement)],M.prototype,"schedulerGrid",void 0),D([i.bindable,__metadata("design:type",s.QpGridCustomElement)],M.prototype,"lastUpdatedGrid",void 0),D([i.bindable,__metadata("design:type",s.QpGridCustomElement)],M.prototype,"serviceOrdersGrid",void 0),D([i.bindable,__metadata("design:type",s.QpGridCustomElement)],M.prototype,"searchAppointmentsGrid",void 0),D([i.bindable,__metadata("design:type",s.QpFieldsetCustomElement)],M.prototype,"groupAppointmentFilter",void 0),D([i.bindable,__metadata("design:type",s.QpFieldsetCustomElement)],M.prototype,"groupLastUpdatedAppointmentFilter",void 0),D([i.bindable,__metadata("design:type",s.QpFieldsetCustomElement)],M.prototype,"serviceOrdersBrickLeft",void 0),D([i.bindable,__metadata("design:type",s.QpFieldsetCustomElement)],M.prototype,"serviceOrdersBrickRight",void 0),D([i.bindable,__metadata("design:type",s.QpFieldsetCustomElement)],M.prototype,"appointmentsBrickLeft",void 0),D([i.bindable,__metadata("design:type",s.QpFieldsetCustomElement)],M.prototype,"appointmentsBrickRight",void 0),D([i.bindable,__metadata("design:type",s.QpFieldsetCustomElement)],M.prototype,"searchAppointmentBrickLeft",void 0),D([i.bindable,__metadata("design:type",s.QpFieldsetCustomElement)],M.prototype,"searchAppointmentBrickRight",void 0),D([i.bindable,__metadata("design:type",s.QpTabbarCustomElement)],M.prototype,"schedulerTabBar",void 0),D([i.bindable,__metadata("design:type",s.QpTabbarCustomElement)],M.prototype,"mainTabBar",void 0),D([i.bindable,__metadata("design:type",p.BingMapCustomElement)],M.prototype,"mainMap",void 0),D([i.bindable,__metadata("design:type",d.QpSplitterCustomElement)],M.prototype,"mapSplitter",void 0),D([i.bindable,__metadata("design:type",a.QpToolBarCustomElement)],M.prototype,"appointmentToolBar",void 0),D([i.bindable,__metadata("design:type",a.QpToolBarCustomElement)],M.prototype,"newAppointmentToolBar",void 0),D([i.bindable,__metadata("design:type",a.QpToolBarCustomElement)],M.prototype,"rightToolBar",void 0),D([i.bindable,__metadata("design:type",s.QpHyperIconCustomElement)],M.prototype,"iconPriorityHigh",void 0),D([i.bindable,__metadata("design:type",s.QpHyperIconCustomElement)],M.prototype,"iconPriorityMedium",void 0),D([i.bindable,__metadata("design:type",s.QpHyperIconCustomElement)],M.prototype,"iconPriorityLow",void 0),D([i.bindable,__metadata("design:type",s.QpHyperIconCustomElement)],M.prototype,"iconSeverityHigh",void 0),D([i.bindable,__metadata("design:type",s.QpHyperIconCustomElement)],M.prototype,"iconSeverityMedium",void 0),D([i.bindable,__metadata("design:type",s.QpHyperIconCustomElement)],M.prototype,"iconSeverityLow",void 0),D([i.bindable,__metadata("design:type",s.QpHyperIconCustomElement)],M.prototype,"iconPriorityDarkHigh",void 0),D([i.bindable,__metadata("design:type",s.QpHyperIconCustomElement)],M.prototype,"iconPriorityDarkMedium",void 0),D([i.bindable,__metadata("design:type",s.QpHyperIconCustomElement)],M.prototype,"iconPriorityDarkLow",void 0),D([i.bindable,__metadata("design:type",s.QpHyperIconCustomElement)],M.prototype,"iconSeverityDarkHigh",void 0),D([i.bindable,__metadata("design:type",s.QpHyperIconCustomElement)],M.prototype,"iconSeverityDarkMedium",void 0),D([i.bindable,__metadata("design:type",s.QpHyperIconCustomElement)],M.prototype,"iconSeverityDarkLow",void 0),D([i.bindable,__metadata("design:type",s.QpHyperIconCustomElement)],M.prototype,"iconMultiEmployee",void 0),D([i.bindable,__metadata("design:type",s.QpHyperIconCustomElement)],M.prototype,"iconMultiEmployeeDark",void 0),D([i.bindable,__metadata("design:type",s.QpHyperIconCustomElement)],M.prototype,"iconDatePicker",void 0),D([(0,i.observable)({changeHandler:"datePicked"}),__metadata("design:type",Object)],M.prototype,"pickerDate",void 0),D([(0,i.observable)({changeHandler:"tabServiceOrdersVisibleChanged"}),__metadata("design:type",Object)],M.prototype,"tabServiceOrdersVisible",void 0),D([(0,i.observable)({changeHandler:"tabSearchAppointmentsVisibleChanged"}),__metadata("design:type",Object)],M.prototype,"tabSearchAppointmentsVisible",void 0),M=D([(0,s.graphInfo)({graphType:"PX.Objects.FS.SchedulerMaint",primaryView:"MainAppointmentFilter",hideFilesIndicator:!0,hideNotesIndicator:!0}),i.autoinject,__metadata("design:paramtypes",[Element,w.SchedulerApiClient,u.PreferencesService,i.BindingEngine,i.TemplatingEngine,i.Aurelia])],M);const nameof=e=>e;class DragHelperEventInfo{}class SplitterPreferences{constructor(e=null){null!==e&&(this.state=e.state,this.position=e.position)}toString(){return`s: ${this.state} p: ${this.position}`}}class PreferenceData{constructor(e=null){this.horizontalModeSplitter=new SplitterPreferences,this.verticalModeSplitter=new SplitterPreferences,this.periodKind=y.PeriodKind.Day,null!==e&&(this.horizontalModeSplitter=new SplitterPreferences(e.horizontalModeSplitter),this.verticalModeSplitter=new SplitterPreferences(e.verticalModeSplitter),this.periodKind=e.periodKind)}toString(){return`h: (${this.horizontalModeSplitter.toString()}) v: (${this.verticalModeSplitter.toString()})`}}class FS300300_Preferences extends u.PreferenceBase{constructor(e=null){super(),this.preferences=new PreferenceData,this.type="FS300300",null!==e&&(this.preferences=new PreferenceData(e))}}Date.prototype.withoutTimeInMsec=function(){return this.clearHoursUTC().getTime()},Date.prototype.toView=function(){return new Date(this.getTime()+6e4*this.getTimezoneOffset())},Date.prototype.fromView=function(){return new Date(this.getTime()-6e4*this.getTimezoneOffset())},Date.prototype.clearHoursUTC=function(){const e=this.getTimezoneOffset()>0?new Date(new Date(this.toUTCString().substring(0,25))):new Date(this);return e.setHours(0,0,0,0),e}},"screens/FS/FS300300/bing-map":(e,n,r)=>{"use strict";r.r(n),r.d(n,{BingMapCustomElement:()=>c});var i,o=r("aurelia-framework"),s=r("./node_modules/client-controls/controls/compound/rich-text-editor/common/tools.js"),__decorate=function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);return s>3&&a&&Object.defineProperty(n,r,a),a},__metadata=function(e,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,n)},__awaiter=function(e,n,r,i){return new(r||(r=Promise))((function(o,s){function fulfilled(e){try{step(i.next(e))}catch(e){s(e)}}function rejected(e){try{step(i.throw(e))}catch(e){s(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(n){n(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,n||[])).next())}))};const a=new Promise((e=>window.bingMapsLoaded=e)),l=document.createElement("script");l.async=!0,l.defer=!0,l.src="//www.bing.com/api/maps/mapcontrol?callback=bingMapsLoaded",document.head.appendChild(l);let c=i=class BingMapCustomElement{constructor(){this.height="600px",this.width="400px",this.hotspotWidth=20,this.apiKey="",this.pins=new Map,this.lastLineColorIndex=-1,this.locationCache=new Map,this.routesCache=new Map}initialize(e){return __awaiter(this,void 0,void 0,(function*(){return this.apiKey=e,a.then((()=>{this.map=new Microsoft.Maps.Map(this.container,{credentials:e,mapTypeId:Microsoft.Maps.MapTypeId.road,navigationBarMode:Microsoft.Maps.NavigationBarMode.compact,customMapStyle:{elements:{tollRoad:{fillColor:"#50a964f4",strokeColor:"#50a964f4"},arterialRoad:{fillColor:"#ffffff",strokeColor:"#ffffff"},road:{fillColor:"#50fed89d",strokeColor:"#50eab671"},street:{fillColor:"#ffffff",strokeColor:"#ffffff"}},settings:{},version:""}}),this.location=this.map.getCenter(),this.viewChangeHandler=Microsoft.Maps.Events.addHandler(this.map,"viewchange",(e=>{this.location=this.map.getCenter()}))}))}))}detached(){this.viewChangeHandler&&Microsoft.Maps.Events.removeHandler(this.viewChangeHandler),this.map&&(this.map.dispose(),this.map=null)}addPin(e,n,r,o,s){if(this.pins.has(n))return;this.pins.set(n,e);const a=new Microsoft.Maps.Pushpin(e,{title:r,text:o,color:i.baseColor});this.map.entities.push(a),Microsoft.Maps.Events.addHandler(a,"click",(()=>{const r=this.map.tryLocationToPixel(e,Microsoft.Maps.PixelReference.control);null!=r&&(this.popupTargetElement.style.top=r.y-this.hotspotWidth/2+"px",this.popupTargetElement.style.left=r.x-this.hotspotWidth/2+"px",setTimeout((()=>{null==s||s(n,this.popupTargetElement)}),1))}))}addRouteSegment(e,n){var r,o;const s=null===(o=null===(r=null==e?void 0:e.routePath)||void 0===r?void 0:r.line)||void 0===o?void 0:o.coordinates;if(!s)return;n&&(this.lastLineColorIndex=(this.lastLineColorIndex+1)%i.lineColors.length);const a=i.lineColors[this.lastLineColorIndex],l=s.map((e=>new Microsoft.Maps.Location(e[0],e[1]))),c=new Microsoft.Maps.Polyline(l,{strokeColor:a,strokeThickness:3});this.map.entities.push(c)}clearAllPins(){this.map&&(this.map.entities.clear(),this.pins.clear(),this.lastLineColorIndex=-1)}updateView(){0!==this.pins.size&&this.map.setView({bounds:Microsoft.Maps.LocationRect.fromLocations([...this.pins.values()]),padding:20})}getLocationByAddress(e){var n;return __awaiter(this,void 0,void 0,(function*(){if(this.locationCache.has(e))return this.locationCache.get(e);const r=`Locations/${encodeURIComponent(e)}?`,i=yield this.fetchBingData(r),o=null===(n=null==i?void 0:i.point)||void 0===n?void 0:n.coordinates;if(!o)return null;const s=new Microsoft.Maps.Location(o[0],o[1]);return this.locationCache.set(e,s),s}))}getRouteBetweenLocations(e,n){return __awaiter(this,void 0,void 0,(function*(){const r=`${e.toString()} ${n.toString()}`;if(this.routesCache.has(r))return this.routesCache.get(r);const i=`Routes/Driving?ra=routePath${`&wp.0=${e.latitude},${e.longitude}`}${`&wp.1=${n.latitude},${n.longitude}`}&du=mi&`,o=yield this.fetchBingData(i);return o?(this.routesCache.set(r,o),o):null}))}fetchBingData(e){return __awaiter(this,void 0,void 0,(function*(){const n=`bingmaps_callback_${s.Tools.newGuid().replace(/\-/gi,"_")}`,r=`https://dev.virtualearth.net/REST/v1/${e}key=${this.apiKey}&jsonp=${n}`,i=new Promise((e=>window[n]=e)),o=document.createElement("script");o.setAttribute("type","text/javascript"),o.setAttribute("src",r),document.body.appendChild(o);const a=yield i.then((e=>{var n,r,i;return null===(i=null===(r=null===(n=null==e?void 0:e.resourceSets)||void 0===n?void 0:n[0])||void 0===r?void 0:r.resources)||void 0===i?void 0:i[0]}));return document.body.removeChild(o),a}))}};c.baseColor="#007ACC",c.lineColors=[i.baseColor,"#c4121a","#f58220","#002d66","#006991","#ed3896","#7857a1","#810000","#6aa84f","#e60000","#000000","#247b61","#83f090","#ffae93","#6600CC","#0000cc"],__decorate([o.bindable,__metadata("design:type",Object)],c.prototype,"height",void 0),__decorate([o.bindable,__metadata("design:type",Object)],c.prototype,"width",void 0),__decorate([(0,o.bindable)({defaultBindingMode:o.bindingMode.twoWay}),__metadata("design:type",Object)],c.prototype,"location",void 0),c=i=__decorate([(0,o.inlineView)('<template><div ref="container" css="width: ${width}; height: ${height};"></div><div style="width: ${hotspotWidth}px; height: ${hotspotWidth}px; position: absolute; top: 0px; left: 0px; margin-top: 38px; opacity: 0%" ref="popupTargetElement"></div></template>')],c)},"./src/screens/FS/FS300300/data-handlers/appointments-data-handler.ts":(e,n,r)=>{"use strict";r.r(n),r.d(n,{AppointmentsDataHandler:()=>AppointmentsDataHandler});var i=r("../dist/packages/schedulerpro/schedulerpro.module.js"),o=r("./src/screens/FS/FS300300/view-models.ts"),s=r("./src/screens/FS/FS300300/scheduler-types.ts"),a=r("screens/FS/FS300300/FS300300");class AppointmentsDataHandler{constructor(){this.source=[],this.sourceBacklog=[],this._resources=new Map,this.offWorkTimeRanges=[],this.workingHours=new Set,this.resourcesToEmptyPeriods=new Map,this.generation=0,this.lastTimeSpanId=1}get resources(){return this._resources}initializeWith(e){return this.source=e.filter((e=>e.resourceId!==o.AppointmentEmployeeModel.unassignedId)),this.sourceBacklog=e.filter((e=>e.resourceId===o.AppointmentEmployeeModel.unassignedId)),!0}mergeDataFrom(e){if(e.some((e=>e.resourceId!==o.AppointmentEmployeeModel.unassignedId))){const n=e.filter((e=>this.assignmentsById.has(e.assignmentID))),r=new Map(n.map((e=>[e.assignmentID,e])));this.source=this.source.filter((e=>!r.has(e.assignmentID))),this.source=this.source.concat(e)}else this.sourceBacklog=this.sourceBacklog.filter((n=>n.appointmentID!==e[0].appointmentID)),this.sourceBacklog=this.sourceBacklog.concat(e[0])}removeAppointment(e){this.source=this.source.filter((n=>n.appointmentID!==e)),this.removeFromUnassigned(e)}removeAssignment(e){this.source=this.source.filter((n=>n.assignmentID!==e))}removeFromUnassigned(e){this.sourceBacklog=this.sourceBacklog.filter((n=>n.appointmentID!==e)),this.unassignedAppointmentById.delete(e)}createProjects(e,n,r=!1){r||this.generation++,this.assignments=[...this.source];const s=this.assignments.filter((e=>e.appointmentID.length>0));this.assignmentsById=new Map(s.map((e=>[e.assignmentID,e]))),this.unassignedAppointmentById=new Map(this.sourceBacklog.map((e=>[e.appointmentID,e]))),this.datesFilter=e,this.timeSlots=this.assignments.filter((e=>{var n,r;return null!=(null===(n=e.FSTimeSlot__TimeStart)||void 0===n?void 0:n.value)&&null!=(null===(r=e.FSTimeSlot__TimeEnd)||void 0===r?void 0:r.value)})).map((e=>({start:new Date(e.FSTimeSlot__TimeStart.value),end:new Date(e.FSTimeSlot__TimeEnd.value),resourceId:e.resourceId}))).filter((e=>e.start<e.end)),this._resources=this.getResources(n),this.offWorkTimeRanges=this.getOffWorkTimeRanges(e),this.resourcesToEmptyPeriods=this.getResourcesToEmptyPeriods(),this.workingHours=this.getWorkingHours();const l=new i.ProjectModel({resources:[...this._resources.values()],events:this.getEvents(),assignments:this.getAssignments(),resourceTimeRanges:this.getOffWorkTimeRanges(e),timeRanges:this.getTimeProjectionRange()}),[c,d]=AppointmentsDataHandler.getPeriodStartEndDates(e);function getUnassignedAppointmentClass(e){if(e.isLocked)return"qp-sch-locked";return"qp-sch-not-assigned "+(e.isValidatedByDispatcher||e.isConfirmed?"":"qp-sch-not-confirmed")}return[new i.ProjectModel({resources:[new i.ResourceModel({id:o.AppointmentEmployeeModel.unassignedId,name:a.Captions.Unassigned})],events:[...this.sourceBacklog.values()].map((e=>new i.EventModel({id:e.appointmentID,startDate:e.dateTimeBegin,endDate:this.getAdjustedEventEndTime(e),name:i.StringHelper.xss`${e.caption}`,cls:getUnassignedAppointmentClass(e)}))),assignments:[...this.sourceBacklog.values()].map((e=>new i.AssignmentModel({id:e.assignmentID,eventId:e.appointmentID,resourceId:o.AppointmentEmployeeModel.unassignedId}))),resourceTimeRanges:[new i.ResourceTimeRangeModel({id:0,resourceId:o.AppointmentEmployeeModel.unassignedId,timeRangeColor:"blue",startDate:c,endDate:d})],timeRanges:this.getTimeProjectionRange()}),l]}isWorkingTime(e,n){const r=new Date(e);r.setMinutes(0,0,0);for(let e=r;e<n;e.setHours(e.getHours()+1))if(this.workingHours.has(e.toISOString()))return!0;return!1}getWorkingHoursSignature(){const[e,n]=AppointmentsDataHandler.getPeriodStartEndDates(this.datesFilter),r=new Date(e);let i="";r.setMinutes(0,0,0);for(let e=r;e<n;e.setHours(e.getHours()+1))this.workingHours.has(e.toISOString())?(null!=i||(i=e.toISOString()),i+="1"):i&&(i+="0");return i}getAssignment(e){const n=this.getPartialId(e);return this.assignmentsById.get(n)}getAssignmentsByAppointmentId(e){const n=this.getPartialId(e);return this.assignments.filter((e=>e.appointmentID===n))}getAssignmentByAppointmentAndResource(e,n){const r=o.AppointmentEmployeeModel.getAssignmentId(this.getPartialId(e),n);return this.assignmentsById.get(r)}getUnassignedAppointment(e){var n;return null===(n=this.unassignedAppointmentById)||void 0===n?void 0:n.get(e)}getAppointment(e){const n=this.getUnassignedAppointment(e);return n||this.getAssignmentsByAppointmentId(e)[0]}getFullId(e){return`${e}=${this.generation}`}getPartialId(e){return e.indexOf("=")>0?e.substring(0,e.indexOf("=")):e}findEmptyTimePeriod(e,n,r,i){if(null==e)return null;const o=this.resourcesToEmptyPeriods.get(e).map((e=>({start:normalizeTime(e.start>r?e.start:r),end:e.end<=i?e.end:i}))),s=null==o?void 0:o.find((e=>e.end.getTime()-e.start.getTime()>=n));return null==s?void 0:s.start;function normalizeTime(e){const n=new Date(e);return n.setMinutes(Math.ceil(e.getMinutes()/AppointmentsDataHandler.minimumIntervalMin)*AppointmentsDataHandler.minimumIntervalMin,0,0),n}}static getPeriodStartEndDates(e){const n=new Date(e.DateSelected.value);let r,i;switch(e.PeriodKind.value){case s.PeriodKind.Day:r=n,i=new Date(r),i.setDate(i.getDate()+1);break;case s.PeriodKind.Week:r=function getStartOfWeek(e,n){const r=e.clearHoursUTC().getDay(),i=(r<n?7:0)+r-n,o=new Date(e);return o.setDate(e.getDate()-i),o}(n,1),i=new Date(r),i.setDate(i.getDate()+7);break;case s.PeriodKind.Month:r=new Date(n.getFullYear(),n.getMonth(),1),i=new Date(n.getFullYear(),n.getMonth()+1,1)}return r=null==r?void 0:r.clearHoursUTC(),i=null==i?void 0:i.clearHoursUTC(),[r,i]}hasWorkingCalendarSet(){return this.timeSlots.length>0}hasData(){return this.source.length>0||this.sourceBacklog.length>0}getResources(e){const n=new Map(this.assignments.map((e=>[e.resourceId,new i.ResourceModel({id:e.resourceId,name:i.StringHelper.xss`${e.AcctName.cellText}`})])));if(!e)return n;const r=this.getAssignmentsByAppointmentId(e.appointmentID),o=new Set(r.map((e=>e.resourceId)));return new Map([...n.entries()].sort(((e,n)=>{const r=o.has(e[0]),i=o.has(n[0]);return r&&!i?-1:!r&&i?1:0})))}getAdjustedEventEndTime(e){const n=new Date(e.dateTimeBegin.getTime()+60*AppointmentsDataHandler.minimumExistingIntervalMin*1e3);return e.dateTimeEnd>=n?e.dateTimeEnd:n}getEvents(){const e=[...new Map([...this.assignmentsById.values()].map((e=>[e.appointmentID,e]))).values()].map((e=>new i.EventModel({id:`${this.getFullId(e.appointmentID)}`,startDate:e.dateTimeBegin,endDate:this.getAdjustedEventEndTime(e),name:i.StringHelper.xss`${e.caption}`,cls:`${getAppointmentClass(e)}`,resizable:!(null==e?void 0:e.SchedulerAppointment__Locked.value),draggable:!(null==e?void 0:e.SchedulerAppointment__Locked.value)}))),n=new i.EventModel({id:AppointmentsDataHandler.dndEventId,startDate:new Date,endDate:new Date,name:"DND"});return e.push(n),e;function getAppointmentClass(e){var n;return(null===(n=e.SchedulerAppointmentEmployee__IsFilteredOut)||void 0===n?void 0:n.value)?"qp-sch-filtered-out":e.isLocked?"qp-sch-locked":e.isValidatedByDispatcher||e.isConfirmed?"b-sch-event":"qp-sch-not-confirmed"}}getAssignments(){return[...this.assignmentsById.values()].map((e=>new i.AssignmentModel({id:`${this.getFullId(e.assignmentID)}`,eventId:`${this.getFullId(e.appointmentID)}`,resourceId:e.resourceId})))}getOffWorkTimeRanges(e){const[n,r]=AppointmentsDataHandler.getPeriodStartEndDates(e),o=new Map;this.resources.forEach((e=>{o.has(e.id.toString())||o.set(e.id.toString(),[])}));const s=[],a=this.timeSlots;return function prepareWorkTimeRanges(e){a.forEach((e=>{if(e.end.getTime()<n.getTime())return;if(e.start.getTime()>r.getTime())return;o.get(e.resourceId).push({start:e.start,end:e.end})}))}(this.assignments),function computeInversedTimeRanges(e){function addTimeSpan(n,r,o){r>=o||(s.push(new i.ResourceTimeRangeModel({id:e.lastTimeSpanId,resourceId:n,timeRangeColor:"blue",startDate:r,endDate:o})),e.lastTimeSpanId++)}o.forEach(((e,i)=>{let o=n;e.sort(((e,n)=>e.start.getTime()-n.start.getTime())),e.forEach((e=>{addTimeSpan(i,o,e.start),o=e.end})),addTimeSpan(i,o,r)}))}(this),s}getTimeProjectionRange(){return[new i.TimeSpan({id:1,cls:"qp-sch-time-projection"})]}getResourcesToEmptyPeriods(){const e=new Map,n=getResourceToTimeRanges([...this.assignmentsById.values()],(e=>({resourceId:e.resourceId,start:e.dateTimeBegin,end:e.dateTimeEnd}))),r=getResourceToTimeRanges(this.offWorkTimeRanges,(e=>({resourceId:e.resourceId,start:e.startDate,end:e.endDate})));return[...r.keys()].forEach((i=>{var o,s;const a=null!==(o=n.get(i))&&void 0!==o?o:[],l=function findFreeSlots(e,n){let r;!function(e){e[e.OffWorkStart=0]="OffWorkStart",e[e.OffWorkEnd=1]="OffWorkEnd",e[e.AppointmentStart=2]="AppointmentStart",e[e.AppointmentEnd=3]="AppointmentEnd"}(r||(r={}));const i=[];e.forEach((e=>{i.push({time:e.start,type:r.OffWorkStart}),i.push({time:e.end,type:r.OffWorkEnd})})),n.forEach((e=>{i.push({time:e.start,type:r.AppointmentStart}),i.push({time:e.end,type:r.AppointmentEnd})})),i.sort(((e,n)=>e.time.getTime()-n.time.getTime()||e.type-n.type));let o=!1,s=!1,a=null;const l=[];return i.forEach((e=>{switch(e.type){case r.OffWorkEnd:s||(a=e.time),o=!0;break;case r.OffWorkStart:o&&!s&&null!=a&&a.getTime()!==e.time.getTime()&&l.push({start:new Date(a),end:new Date(e.time)}),o=!1;break;case r.AppointmentStart:o&&null!=a&&a.getTime()!==e.time.getTime()&&l.push({start:new Date(a),end:new Date(e.time)}),a=null,s=!0;break;case r.AppointmentEnd:o&&(a=e.time),s=!1}})),l}(null!==(s=r.get(i))&&void 0!==s?s:[],a);e.set(i,l)})),e;function getResourceToTimeRanges(e,n){const r=new Map;e.forEach((e=>{const i=n(e);r.has(i.resourceId)||r.set(i.resourceId,new Array),r.get(i.resourceId).push({start:i.start,end:i.end})}));return[...r.keys()].forEach((e=>{const n=r.get(e).sort(((e,n)=>e.start.getTime()-n.start.getTime())),i=[];n.forEach((e=>{const n=i.length>0?i[i.length-1]:null;0===i.length||n.end<e.start?i.push(e):n.end<e.end&&(n.end=e.end)})),r.set(e,i)})),r}}getWorkingHours(){const[e,n]=AppointmentsDataHandler.getPeriodStartEndDates(this.datesFilter),r=new Set;return addTimeSlotsToWorkingHours(r,this.timeSlots),addTimeSlotsToWorkingHours(r,[...this.assignmentsById.values()].map((e=>({start:e.dateTimeBegin,end:e.dateTimeEnd})))),addTimeSlotsToWorkingHours(r,[...this.sourceBacklog.values()].map((e=>({start:e.dateTimeBegin,end:e.dateTimeEnd})))),r;function addTimeSlotsToWorkingHours(r,i){i.sort(((e,n)=>e.start.getTime()-n.start.getTime()));let o=null;for(const s of i){const i=s.start>e?s.start:e,a=s.end<n?s.end:n;for((null==o||i>o)&&(o=new Date(i),o.setHours(o.getHours(),0,0,0));o<a;){const e=o.toISOString();r.has(e)||r.add(e),o.setHours(o.getHours()+1)}}}}}AppointmentsDataHandler.minimumIntervalMin=30,AppointmentsDataHandler.minimumExistingIntervalMin=15,AppointmentsDataHandler.dndEventId="dnd_event"},"./src/screens/FS/FS300300/data-handlers/search-appointments-data-handler.ts":(e,n,r)=>{"use strict";r.r(n),r.d(n,{SearchAppointmentsDataHandler:()=>SearchAppointmentsDataHandler});var i=r("../dist/packages/schedulerpro/schedulerpro.module.js");class SearchAppointmentsDataHandler{constructor(){this.source=[]}initializeWith(e){return(0!==this.source.length||0!==e.length)&&(this.source=e.map((e=>e)),this.searchAppointmentsById=new Map(e.map((e=>[e.appointmentID,e]))),!0)}createData(){return this.source.map((e=>new i.EventModel({id:e.appointmentID,name:i.StringHelper.xss`${e.caption}`,cls:""})))}getEntry(e){return this.searchAppointmentsById.get(e.toString())}getFirstEntry(){return this.searchAppointmentsById.values().next().value}}},"./src/screens/FS/FS300300/data-handlers/so-data-handler.ts":(e,n,r)=>{"use strict";r.r(n),r.d(n,{SODataHandler:()=>SODataHandler});var i=r("../dist/packages/schedulerpro/schedulerpro.module.js"),o=r("./src/screens/FS/FS300300/data-handlers/time-converter.ts");class SODataHandler{constructor(){this.source=[]}initializeWith(e){return(0!==this.source.length||0!==e.length)&&(this.source=e.map((e=>e)),!0)}createData(){this.serviceOrdersById=new Map(this.source.map((e=>[e.orderId,e]))),this.servicesById=new Map(this.source.map((e=>[e.serviceId,e]))),this.servicesByServiceOrderId=new Map,this.source.forEach((e=>{this.servicesByServiceOrderId.has(e.orderId)||this.servicesByServiceOrderId.set(e.orderId,new Map);const n=this.servicesByServiceOrderId.get(e.orderId);n.has(e.FSSODet__LineNbr.cellText)||n.set(e.FSSODet__LineNbr.cellText,e)}));return[...new Map([...this.serviceOrdersById.values()].map((e=>[e.orderId,e]))).values()].map((e=>new i.EventModel({id:e.orderId,name:i.StringHelper.xss`${e.orderId}`,cls:`${this.getEntryCls(e)}`})))}getEntry(e){var n;return null!==(n=this.serviceOrdersById.get(e))&&void 0!==n?n:this.servicesById.get(e)}scheduleEntry(e){const n=this.servicesById.get(e);n?n.isScheduled=!0:this.source=this.source.filter((n=>n.orderId!==e))}getChildren(e){return[...this.servicesByServiceOrderId.get(e).values()].sort(((e,n)=>e.FSSODet__LineNbr.value-n.FSSODet__LineNbr.value))}getEstimatedDuration(e){return this.getChildren(e).filter((e=>!e.isScheduled)).reduce(((e,n)=>e+o.TimeConverter.hMMtoMinutes(n.FSSODet__EstimatedDuration.value)),0)}getEntryCls(e){return""}}},"./src/screens/FS/FS300300/data-handlers/time-converter.ts":(e,n,r)=>{"use strict";r.r(n),r.d(n,{TimeConverter:()=>TimeConverter});class TimeConverter{static hMMtoMinutes(e){return 60*Math.floor(Number(e)/100)+Number(e)%100}static minutesTohMM(e){return 100*Math.floor(e/60)+e%60}}},"./src/screens/FS/FS300300/drag-helpers/external-event-drag-helper.ts":(e,n,r)=>{"use strict";r.r(n),r.d(n,{ExternalEventDragHelper:()=>ExternalEventDragHelper,ExternalEventDragHelperConfig:()=>ExternalEventDragHelperConfig});var i=r("../dist/packages/schedulerpro/schedulerpro.module.js"),o=r("./node_modules/client-controls/utils/platform-dependable-utils.js"),s=r("./node_modules/client-controls/utils/index.js"),a=r("./src/screens/FS/FS300300/data-handlers/appointments-data-handler.ts"),__awaiter=function(e,n,r,i){return new(r||(r=Promise))((function(o,s){function fulfilled(e){try{step(i.next(e))}catch(e){s(e)}}function rejected(e){try{step(i.throw(e))}catch(e){s(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(n){n(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,n||[])).next())}))};class ExternalEventDragHelperConfig{}class ExternalEventDragHelper extends i.DragHelper{constructor(e,n){super(n),this.env=e,this.isDraggingReentryProtectionOn=!1;const r=this;this.on({beforeDragStart:r.onBeforeDragStartFunc,dragStart:r.onDragStartFunc,drag:r.onDragFunc,drop:r.onDropFunc,abort:r.onAbortFunc})}get scheduler(){return this.env.getScheduler()}static get defaultConfig(){return{cloneTarget:!0,autoSizeClonedTarget:!1,unifiedProxy:!0,mode:"translateXY",dropTargetSelector:".b-grid-row, .b-timeline-subgrid, .b-resourceheader"}}createProxy(e){const n=this.env.getEntity(e);if(null==n)return null;const r=this.scheduler.timeAxisViewModel.getDistanceForDuration(this.env.getDurationMS(n)),i=2*this.scheduler.resourceMargin;this.draggedWidth=this.isHorizontalMode()?r:this.scheduler.resourceColumnWidth-i,this.draggedHeight=this.isHorizontalMode()?this.scheduler.rowHeight-i:r;const o=document.createElement("div");return o.style.cssText="display: block",o.style.width=`${this.draggedWidth}px`,o.style.height=`${this.draggedHeight}px`,o.innerHTML=`\n            <div class="qp-sch-dragged-wrapper ${this.isHorizontalMode()?"":"qp-sch-vertical"}">\n\t\t\t\t<div class="qp-sch-dragged">\n\t\t\t\t\t${this.env.getProxyInner(n)}\n\t\t\t\t</div>\n            </div>\n        `,o}onBeforeDragStartFunc({event:e,context:n}){return!this.env.allowDragging||this.env.allowDragging()}onDragStartFunc({event:e,context:n}){var r;this.draggedEntity=this.env.getEntity(e.target),null!=this.tooltip&&this.tooltip.destroy(),this.tooltip=new i.Tooltip({forSelector:"*",getHtml:()=>this.getTooltipHtml(),bodyCls:"qp-sch-new-event-tooltip b-sch-event-tooltip b-widget b-popup b-panel b-floating b-vbox b-text-popup b-outer b-windows b-anchored b-aligned-above",autoShow:!0,anchor:!0,mouseOffsetX:-90,mouseOffsetY:-this.draggedHeight/2-100-15,hoverDelay:0,trackMouse:!0}),this.projectedEvent=this.scheduler.eventStore.getById("dnd_event");const o=document.elementFromPoint(e.pageX,e.pageY),s=this.scheduler.resolveResourceRecord(o,[n.newX,n.new]),a=this.env.getAppointmentStart(null==s?void 0:s.id.toString(),this.draggedEntity),l=this.env.getDurationMS(this.draggedEntity),c=a?new Date(a):null;null==c||c.setMilliseconds(a.getMilliseconds()+l),null===(r=this.env.toggleTimeProjection)||void 0===r||r.bind(this.env.owner)(a,c)}getTooltipHtml(){const e='\n\t\t\t<div class="b-anchor b-anchor-bottom">\n\t\t\t\t<svg class="b-pointer-el" version="1.1" height="8" width="16">\n\t\t\t\t\t<path d="M0,8L8,0.5L16,8"></path>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t\t',n=this.env.getEventInfo(this.draggedEntity),[r,i]=this.getSelectedTimes();if(null==r||null==i){const r=null==n.date?"":`\n\t\t\t\t<div class="b-sch-clockwrap b-sch-clock-hour b-sch-tooltip-startdate">\n\t\t\t\t\t<svg><use href="${this.env.owner.iconDatePicker.SvgUrl}"></use></svg>\n\t\t\t\t\t<span class="b-sch-clock-text">${formatPopupDate(n.date,!1)}</span>\n\t\t\t\t</div>\n\t\t\t\t`;return`\n\t\t\t\t<div class="b-sch-event-title" style="white-space: nowrap;">${n.name}</div>\n\t\t\t\t${r}\n\t\t\t\t${e}\n\t\t\t\t`}return`\n\t\t\t<div class="b-sch-event-title" style="white-space: nowrap;">${n.name}</div>\n\t\t\t<div class="b-sch-clockwrap b-sch-clock-hour b-sch-tooltip-startdate">\n\t\t\t\t<div class="b-sch-clock">\n\t\t\t\t\t${getHoursDiv(r.getHours())}\n\t\t\t\t\t${getMinutesDiv(r.getMinutes())}\n\t\t\t\t\t<div class="b-sch-clock-dot"></div>\n\t\t\t\t</div>\n\t\t\t\t<span class="b-sch-clock-text">${formatPopupDate(r)}</span>\n\t\t\t</div>\n\t\t\t<div class="b-sch-clockwrap b-sch-clock-hour b-sch-tooltip-enddate">\n\t\t\t\t<div class="b-sch-clock">\n\t\t\t\t\t${getHoursDiv(i.getHours())}\n\t\t\t\t\t${getMinutesDiv(i.getMinutes())}\n\t\t\t\t\t<div class="b-sch-clock-dot"></div>\n\t\t\t\t</div>\n\t\t\t\t<span class="b-sch-clock-text">${formatPopupDate(i)}</span>\n\t\t\t</div>\n\t\t\t${e}\n\t\t`;function getHoursDiv(e){return`<div class="b-sch-hour-indicator" style="transform: rotate(${e%12*30}deg);"></div>`}function getMinutesDiv(e){return`<div class="b-sch-minute-indicator" style="transform: rotate(${6*e}deg);"></div>`}function formatPopupDate(e,n=!0){return n?(0,s.formatDate)(e,"MMM d, yyyy HH:mm",(0,o.dateFormatInfo)()):(0,s.formatDate)(e,"MMM d, yyyy",(0,o.dateFormatInfo)())}}getSelectedTimes(e=null){var n;let r=this.env.getAppointmentStart(null===(n=null!=e?e:this.projectedAssignmentResource)||void 0===n?void 0:n.id.toString(),this.draggedEntity);const i=this.env.getDurationMS(this.draggedEntity);if(null!=this.targetBeginDate&&(r=this.targetBeginDate),null==r||isNaN(r.getTime()))return[null,null];const o=new Date(r);return o.setMilliseconds(r.getMilliseconds()+i),[r,o]}isHorizontalMode(){return"horizontal"===this.scheduler.mode}onDragFunc({context:e,event:n}){return __awaiter(this,void 0,void 0,(function*(){const r=this.env,i=this.isHorizontalMode(),o=this.scheduler;if(!this.isDraggingReentryProtectionOn)try{this.isDraggingReentryProtectionOn=!0;let[s,a]=this.updateTargetTypeAndDate(e,n);if(e.valid="time"===s||"resource"===s,"resource"===s){yield this.showProjectionInGrid(a);const[n,r]=this.getSelectedTimes(a);null==this.projectedAssignment&&null==n&&(e.valid=!1,s="n/a")}else yield this.hideProjectedAssignment();this.prevTarget=e.target,e.element.classList.toggle("qp-sch-dragged-valid","time"===s),e.element.classList.toggle("qp-sch-dragged-overheader","resource"===s),this.tooltip.html=this.getTooltipHtml(),"time"===s&&function showProxyEventInGrid(n){const s=o.getCoordinateFromDate(this.targetBeginDate,!1);if(s<0)return;const a=i?s:e.newX,l=i?e.newY:s,[c,d]=r.getSnapToResourcePosition.bind(r.owner)(n,a,l);e.element.style.transform=`matrix(1, 0, 0, 1, ${c}, ${d})`}.bind(this)(a)}finally{this.isDraggingReentryProtectionOn=!1}}))}showProjectionInGrid(e){return __awaiter(this,void 0,void 0,(function*(){const n=this.scheduler;null==this.projectedEvent||this.projectedEvent.resources.length;const r=this.projectedEvent.getResource();this.scheduler.suspendRefresh();try{const[n,i]=this.getSelectedTimes(e);if(null==n||null==i||n.getTime()>=this.scheduler.endDate.getTime()||i.getTime()<=this.scheduler.startDate.getTime())return void(yield this.hideProjectedAssignment());const o=this.env.getEventInfo(this.draggedEntity);if(this.projectedEvent.startDate=n,this.projectedEvent.endDate=i,this.projectedEvent.name=`${o.name}`,this.projectedEvent.set("eventInfo",o),(null==r?void 0:r.id)===(null==e?void 0:e.id))return void updateProjectedAssignment.bind(this)();yield this.scheduler.scheduleEvent({startDate:n,eventRecord:this.projectedEvent,resourceRecord:e}),updateProjectedAssignment.bind(this)(),null!=this.projectedAssignment&&null!=r&&this.scheduler.eventStore.unassignEventFromResource(this.projectedEvent,r)}catch(e){}finally{yield this.scheduler.resumeRefresh(!0)}function updateProjectedAssignment(){var n,r;null!=e&&(this.projectedAssignment=null!==(r=null===(n=this.scheduler.eventStore.getAssignmentsForEvent(this.projectedEvent))||void 0===n?void 0:n.find((n=>n.resourceId===e.id)))&&void 0!==r?r:null,null!=this.projectedAssignment&&(this.projectedAssignmentResource=e))}(function showProjectedAssignmentElement(e){const r=n.getElementFromAssignmentRecord(e);return null!=r&&(r.classList.add("qp-sch-projected-assignment"),!0)})(this.projectedAssignment)||(yield this.hideProjectedAssignment())}))}updateTargetTypeAndDate(e,n){const r=document.elementFromPoint(n.pageX,n.pageY);let i=this.scheduler.resolveResourceRecord(r,[e.pageX,e.pageY]);if(e.pageY<this.scheduler.y||e.pageX<this.scheduler.x)return["n/a",null];let o=this.scheduler.getDateFromCoordinate(this.isHorizontalMode()?e.newX:e.newY,"round",!1);o<this.scheduler.visibleDateRange.startDate&&(o=null);const s=null!=i&&null==o;let a=!1;return null!=i||this.isHorizontalMode()||(i=this.scheduler.resources.find((n=>n.id===e.target.dataset.resourceId)),a=null!=i),a||s?(this.targetBeginDate=null,["resource",i]):null==i?["n/a",null]:(this.targetBeginDate=o,null!=this.targetBeginDate?["time",i]:["n/a",null])}onAbortFunc(){this.hideProjectedAssignment(),this.finalize()}hideProjectedAssignment(){var e;return __awaiter(this,void 0,void 0,(function*(){const n=new Date(1970,1,1),r=this.scheduler.eventStore.getById(a.AppointmentsDataHandler.dndEventId);null!=(null==r?void 0:r.resource)&&(null===(e=r.endDate)||void 0===e?void 0:e.toISOString())!==n.toISOString()&&(this.scheduler.suspendRefresh(),r.startDate=n,r.endDate=n,this.projectedAssignment=null,this.projectedAssignmentResource=null,yield this.scheduler.resumeRefresh(!0))}))}finalize(){var e;null===(e=this.env.toggleTimeProjection)||void 0===e||e.bind(this.env.owner)(null,null),this.destroyTooltip()}destroyTooltip(){var e;null===(e=this.tooltip)||void 0===e||e.destroy(),this.tooltip=null}onDropFunc({context:e,event:n}){return __awaiter(this,void 0,void 0,(function*(){try{if(!e.valid||null==this.scheduler)return;const[r,i]=this.updateTargetTypeAndDate(e,n);if("n/a"===r)return;const[o,s]=this.getSelectedTimes(),a=this.env.getNewEventId?this.env.getNewEventId(this.draggedEntity):-1;let l=!1;l=null!=this.env.scheduleEvent?yield this.env.scheduleEvent.bind(this.env.owner)(a,Number(i.id),o,s):yield this.env.scheduleEntity.bind(this.env.owner)(this.draggedEntity,Number(i.id),o,s)}catch(e){throw e}finally{this.finalize()}}))}}},"./src/screens/FS/FS300300/drag-helpers/resource-drag-helper.ts":(e,n,r)=>{"use strict";r.r(n),r.d(n,{ResourceDragHelper:()=>ResourceDragHelper,ResourceDragHelperConfig:()=>ResourceDragHelperConfig});var i=r("../dist/packages/schedulerpro/schedulerpro.module.js"),__awaiter=function(e,n,r,i){return new(r||(r=Promise))((function(o,s){function fulfilled(e){try{step(i.next(e))}catch(e){s(e)}}function rejected(e){try{step(i.throw(e))}catch(e){s(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(n){n(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,n||[])).next())}))};class ResourceDragHelperConfig{}class ResourceDragHelper extends i.DragHelper{constructor(e,n){super(n),this.env=e;const r=this;this.on({dragStart:r.onDragStartFunc,drag:r.onDragFunc,drop:r.onDropFunc,abort:r.onAbortFunc})}get hoverAssignment(){return null!=this.hoverAssignmentElement?this.scheduler.resolveAssignmentRecord(this.hoverAssignmentElement):null}get scheduler(){return this.env.getScheduler()}static get defaultConfig(){return{cloneTarget:!0,autoSizeClonedTarget:!1,unifiedProxy:!0,dragThreshold:0,mode:"translateXY",dropTargetSelector:".b-sch-event-wrap"}}createProxy(e){const n=this.getDraggedResource(e),r=this.scheduler.resourceColumnWidth-2*this.scheduler.resourceMargin,i=this.scheduler.rowHeight-2*this.scheduler.resourceMargin,o=document.createElement("div");return o.style.cssText="display: block",o.style.width=`${r}px`,o.style.height=`${i}px`,o.classList.add(),o.innerHTML=`\n            <div class="qp-sch-dragged qp-sch-dragged-resource">\n\t\t\t\t<div>${n.name}</div>\n            </div>\n        `,o}getDraggedResource(e){return"span"===e.localName&&(e=e.parentElement),this.isHorizontalMode()?this.scheduler.resolveResourceRecord(e):this.scheduler.resources.find((n=>n.id===e.dataset.resourceId))}onDragStartFunc({event:e,context:n}){this.draggedResource=this.getDraggedResource(e.target),console.log(`dragging ${this.draggedResource.id}`),this.scheduler.snap=!1}isHorizontalMode(){return"horizontal"===this.scheduler.mode}onDragFunc({context:e,event:n}){var r,i,o,s;return __awaiter(this,void 0,void 0,(function*(){if((null!==(i=(new Date).getTime()-(null===(r=this.verticalScrollTime)||void 0===r?void 0:r.getTime()))&&void 0!==i?i:0)<200)return;const n=this.scheduler,a=e.target,l=null!=a&&n.resolveAssignmentRecord(a);if(this.hoverAssignment===l)return;if(this.hoverAssignmentElement=a,e.valid=this.isValidContext(l),!e.valid)return void(yield this.unassignProjectedAssignment());n.suspendRefresh(),yield this.unassignProjectedAssignment(!1);const c=this.env.getEventInfo(l.id.toString()),d=l.event;d.set("eventInfo",c),this.projectedAssignment=null!==(s=null===(o=n.eventStore.assignEventToResource(d,this.draggedResource))||void 0===o?void 0:o[0])&&void 0!==s?s:null;const u=a.getBoundingClientRect();yield n.resumeRefresh(!0);const h=a.getBoundingClientRect();h.y!==u.y&&(this.initialScrollPosition=n.storeScroll(),yield n.scrollVerticallyTo(this.initialScrollPosition.scrollTop+h.y-u.y,!1),this.verticalScrollTime=new Date),function showProjectedAssignmentElement(e){const r=n.getElementFromAssignmentRecord(e);return null!=r&&(r.classList.add("qp-sch-projected-assignment"),!0)}(this.projectedAssignment)||(yield this.unassignProjectedAssignment())}))}isValidContext(e){if(null==e)return!1;return!this.scheduler.eventStore.getResourcesForEvent(e.event).some((e=>e.id===this.draggedResource.id))}setClassIf(e,n,r){n?e.classList.add(r):e.classList.remove(r)}onAbortFunc(){this.unassignProjectedAssignment(),this.finalize()}finalize(){this.scheduler.snap=!0}unassignProjectedAssignment(e=!0){return __awaiter(this,void 0,void 0,(function*(){null!=this.projectedAssignment&&(this.scheduler.eventStore.unassignEventFromResource(this.projectedAssignment.event,this.draggedResource),this.projectedAssignment=null,e&&(yield this.scheduler.resumeRefresh(!0)),null!=this.initialScrollPosition&&(this.scheduler.restoreScroll(this.initialScrollPosition),this.initialScrollPosition=null))}))}onDropFunc({context:e,event:n}){return __awaiter(this,void 0,void 0,(function*(){let n=!1;try{if(!e.valid||null==this.scheduler)return;const r=e.target&&this.scheduler.resolveAssignmentRecord(e.target);if(null==r||r.resourceId===this.draggedResource.id)return;console.log(`dropping ${this.draggedResource.id} on ${null==r?void 0:r.id}`),n=yield this.env.addResource.bind(this.env.owner)(this.draggedResource.id,r.eventId)}catch(e){throw e}finally{n||this.unassignProjectedAssignment(),this.finalize()}}))}}},"./src/screens/FS/FS300300/map-controller.ts":(e,n,r)=>{"use strict";r.r(n),r.d(n,{MapController:()=>MapController});var i=r("screens/FS/FS300300/FS300300"),o=r("./node_modules/client-controls/utils/platform-dependable-utils.js"),s=r("./node_modules/client-controls/utils/index.js"),__awaiter=function(e,n,r,i){return new(r||(r=Promise))((function(o,s){function fulfilled(e){try{step(i.next(e))}catch(e){s(e)}}function rejected(e){try{step(i.throw(e))}catch(e){s(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(n){n(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,n||[])).next())}))};class MapController{constructor(e,n,r,i){this.map=e,this.scheduler=n,this.data=r,this.popupFunc=i,this.assignmentsForPins=[],this.assignmentsForRouteSegments=[],this.assignmentsLocations=new Map,this.routeSegmentsTo=new Map,this.selectedResources=[]}updateMap(){var e;return __awaiter(this,void 0,void 0,(function*(){this.scheduler&&(this.selectedResources=this.scheduler.selectedRows,this.map.clearAllPins(),(null===(e=this.selectedResources)||void 0===e?void 0:e.length)&&(this.selectAssignmentsForPinsAndRoutes(),yield this.fetchAssignmentsLocations(),yield this.fetchRouteSegments(),this.placePinsAndRoutesOnMap(),this.map.updateView()))}))}selectAssignmentsForPinsAndRoutes(){this.selectedResources.forEach((e=>{var n;const r=null!==(n=this.getSortedAssignmentsForResource(e))&&void 0!==n?n:[];let i=null;r.forEach((e=>{const n=this.data.getAssignment(e.id.toString());n&&(this.assignmentsForPins.push(n),null!=i&&this.assignmentsForRouteSegments.push({from:i,to:n}),i=n)}))}))}fetchAssignmentsLocations(){return __awaiter(this,void 0,void 0,(function*(){yield Promise.all(this.assignmentsForPins.map((e=>__awaiter(this,void 0,void 0,(function*(){const n=yield this.getAssignmentLocation(e);this.assignmentsLocations.set(e,n)})))))}))}getAssignmentLocation(e){var n,r;return __awaiter(this,void 0,void 0,(function*(){const i=null===(n=e.SchedulerAppointment__MapLatitude)||void 0===n?void 0:n.value,o=null===(r=e.SchedulerAppointment__MapLongitude)||void 0===r?void 0:r.value;return null!=i&&null!=o?new Microsoft.Maps.Location(i,o):yield this.map.getLocationByAddress(e.fullAddress)}))}fetchRouteSegments(){return __awaiter(this,void 0,void 0,(function*(){yield Promise.all(this.assignmentsForRouteSegments.map((e=>__awaiter(this,void 0,void 0,(function*(){const n=this.assignmentsLocations.get(e.from),r=this.assignmentsLocations.get(e.to);if(null==n||null==r)return;const i=yield this.map.getRouteBetweenLocations(n,r);this.routeSegmentsTo.set(e.to,i)})))))}))}placePinsAndRoutesOnMap(){this.selectedResources.forEach((e=>{var n;const r=(null!==(n=this.getSortedAssignmentsForResource(e))&&void 0!==n?n:[]).map((e=>this.data.getAssignment(e.id.toString())));let a=1;r.forEach((e=>{if(null==e)return;const n=this.assignmentsLocations.get(e);if(!n)return;const r=this.routeSegmentsTo.get(e),l=`${(0,s.formatDate)(e.dateTimeBegin,i.Formats.TimeAxisHour,(0,o.dateFormatInfo)())} - ${(0,s.formatDate)(e.dateTimeEnd,i.Formats.TimeAxisHour,(0,o.dateFormatInfo)())}`;this.map.addPin(n,e.appointmentID,l,a.toString(),this.popupFunc),null!=r&&this.map.addRouteSegment(r,2===a),a++}))}))}getSortedAssignmentsForResource(e){var n,r;const i=this.scheduler,o=this.data,[s,a]=function getViewPortDates(){if(!i.visibleDateRange)return[null,null];const{startDate:e,endDate:n}=i.visibleDateRange;let r=e.getDate()===n.getDate()&&e.getMonth()===n.getMonth();if(!r){const n=new Date(e);n.setMinutes(n.getMinutes()-1),r=!o.isWorkingTime(n,e)}const s=new Date(e);s.setDate(e.getDate()+(r?0:1)),s.setHours(0,0,0,0);const a=new Date(s);return a.setDate(a.getDate()+1),[s,a]}();return null==s?null:null===(r=null===(n=this.scheduler.assignmentStore.getAssignmentsForResource(e))||void 0===n?void 0:n.filter((e=>s<=getDate(e)&&getDate(e)<=a)))||void 0===r?void 0:r.sort(((e,n)=>getDate(e).getTime()-getDate(n).getTime()));function getDate(e){return e.event.startDate}}}},"./src/screens/FS/FS300300/scheduler-api-client.ts":(e,n,r)=>{"use strict";r.r(n),r.d(n,{SchedulerApiClient:()=>s});var i=r("./node_modules/client-controls/services/base-api-client.js"),o=r("aurelia-framework"),__decorate=function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);return s>3&&a&&Object.defineProperty(n,r,a),a},__metadata=function(e,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,n)},__awaiter=function(e,n,r,i){return new(r||(r=Promise))((function(o,s){function fulfilled(e){try{step(i.next(e))}catch(e){s(e)}}function rejected(e){try{step(i.throw(e))}catch(e){s(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(n){n(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,n||[])).next())}))};let s=class SchedulerApiClient{constructor(e){this.client=e}openAppointmentEditor(e,n,r){return __awaiter(this,void 0,void 0,(function*(){yield this.client.fetchExt(`ui/screen/${e}/selector/edit-screen`,{DataMember:n,Value:r})}))}};s=__decorate([o.autoinject,__metadata("design:paramtypes",[i.BaseApiClient])],s)},"./src/screens/FS/FS300300/scheduler-types.ts":(e,n,r)=>{"use strict";var i;r.r(n),r.d(n,{PeriodKind:()=>i}),function(e){e[e.Day=1]="Day",e[e.Week=2]="Week",e[e.Month=3]="Month"}(i||(i={}))},"./src/screens/FS/FS300300/test-helpers.ts":(e,n,r)=>{"use strict";r.r(n),r.d(n,{testHelperScrollToXPercent:()=>testHelperScrollToXPercent,testHelperSimulateDragAndDrop:()=>testHelperSimulateDragAndDrop});var __awaiter=function(e,n,r,i){return new(r||(r=Promise))((function(o,s){function fulfilled(e){try{step(i.next(e))}catch(e){s(e)}}function rejected(e){try{step(i.throw(e))}catch(e){s(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(n){n(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,n||[])).next())}))};function testHelperSimulateDragAndDrop(e,n,r,i){(function simulateDragAndDrop(e,n,r,i){return __awaiter(this,void 0,void 0,(function*(){const o=document.querySelector(e),s=document.querySelector(n),a=(document.querySelector("body"),o.getBoundingClientRect()),l=s.getBoundingClientRect(),c={left:a.left+10,top:a.top+5},d={left:l.left+l.width/2+r,top:l.top+l.height/2+i};dispatchEvent("over",o,c),dispatchEvent("enter",o,c),dispatchEvent("down",o,c),yield emulateUserPause();const u=10;for(let e=0;e<u;e++){const n=e/u;dispatchEvent("move",o,{left:a.left*(1-n)+d.left*n,top:a.top*(1-n)+d.top*n}),yield new Promise((e=>setTimeout(e,250/u)))}dispatchEvent("move",o,d),yield emulateUserPause(),dispatchEvent("up",o,d)}))})(e,n,r,i).finally((()=>{}))}function emulateUserPause(){return __awaiter(this,void 0,void 0,(function*(){yield new Promise((e=>setTimeout(e,100)))}))}function testHelperScrollToXPercent(e){(function scrollToXPercent(e){return __awaiter(this,void 0,void 0,(function*(){const n=document.querySelector(".qp-sch-calendar .b-virtual-scroller:not(:first-child)").clientWidth,r=(document.querySelector(".qp-sch-calendar .b-virtual-scroller:not(:first-child) > div").clientWidth-n)*e/100,i=window.document.querySelector(".qp-sch-calendar-container");yield i.schedulerControl.scrollHorizontallyTo(r)}))})(e).finally((()=>{}))}function dispatchEvent(e,n,r){const i=new PointerEvent(`pointer${e}`,{bubbles:!0,cancelable:!0,pointerType:"mouse",clientX:r.left,clientY:r.top,view:window});n.dispatchEvent(i)}},"./src/screens/FS/FS300300/view-models.ts":(e,n,r)=>{"use strict";r.r(n),r.d(n,{AppointmentEmployeeModel:()=>c,AppointmentFilterModel:()=>AppointmentFilterModel,DatesFilterModel:()=>DatesFilterModel,EmployeeModel:()=>d,InitDataModel:()=>InitDataModel,LastUpdatedAppointmentFilterModel:()=>LastUpdatedAppointmentFilterModel,MainAppointmentFilterModel:()=>MainAppointmentFilterModel,RoomModel:()=>RoomModel,SOFilterModel:()=>SOFilterModel,SearchAppointmentModel:()=>l,SelectedAppointmentModel:()=>SelectedAppointmentModel,SelectedSOModel:()=>SelectedSOModel,ServiceOrderModel:()=>a,SetupModel:()=>SetupModel,UpdatedAppointmentModel:()=>UpdatedAppointmentModel,getVariableName:()=>getVariableName});var i,o=r("./node_modules/client-controls/client-controls.js"),s=r("./src/screens/FS/FS300300/scheduler-types.ts"),__decorate=function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);return s>3&&a&&Object.defineProperty(n,r,a),a},__metadata=function(e,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,n)};let a=class ServiceOrderModel extends o.PXView{constructor(){super(...arguments),this._scheduled=!1}get caption(){return this.orderId}get orderId(){return this.RefNbr.cellText.match(/^\d/)?`${this.SrvOrdType.cellText} ${this.RefNbr.cellText}`:this.RefNbr.cellText}get srvOrdType(){return this.SrvOrdType.cellText}get refNbr(){return this.RefNbr.cellText}get serviceId(){return`${this.orderId}-${this.FSSODet__LineNbr.cellText}`}get isScheduled(){var e;return"SC"===(null===(e=this.FSSODet__Status)||void 0===e?void 0:e.value)||this._scheduled}set isScheduled(e){this._scheduled=e}};__decorate([(0,o.columnConfig)({allowFastFilter:!0}),__metadata("design:type",o.GridCell)],a.prototype,"RefNbr",void 0),__decorate([o.readOnly,__metadata("design:type",o.GridCell)],a.prototype,"Priority",void 0),__decorate([o.readOnly,__metadata("design:type",o.GridCell)],a.prototype,"Severity",void 0),__decorate([(0,o.columnConfig)({allowFastFilter:!0}),__metadata("design:type",o.GridCell)],a.prototype,"DocDesc",void 0),__decorate([o.readOnly,__metadata("design:type",o.GridCell)],a.prototype,"Status",void 0),__decorate([(0,o.columnConfig)({allowFastFilter:!0}),__metadata("design:type",o.GridCell)],a.prototype,"CustomerAcctCD",void 0),__decorate([(0,o.columnConfig)({allowFastFilter:!0}),__metadata("design:type",o.GridCell)],a.prototype,"CustomerAcctName",void 0),__decorate([(0,o.columnConfig)({allowFastFilter:!0}),__metadata("design:type",o.GridCell)],a.prototype,"FullAddress",void 0),__decorate([(0,o.columnConfig)({allowFastFilter:!0}),__metadata("design:type",o.GridCell)],a.prototype,"ContactDisplayName",void 0),__decorate([(0,o.columnConfig)({allowFastFilter:!0}),__metadata("design:type",o.GridCell)],a.prototype,"Phone1",void 0),__decorate([(0,o.columnConfig)({allowFastFilter:!0}),__metadata("design:type",o.GridCell)],a.prototype,"Email",void 0),__decorate([(0,o.columnConfig)({allowFastFilter:!0}),__metadata("design:type",o.GridCell)],a.prototype,"FSSODet__TranDesc",void 0),__decorate([o.readOnly,__metadata("design:type",o.GridCell)],a.prototype,"FSSODet__Status",void 0),__decorate([(0,o.columnConfig)({allowFastFilter:!0}),__metadata("design:type",o.GridCell)],a.prototype,"ProblemDescr",void 0),a=__decorate([(0,o.gridConfig)({preset:o.GridPreset.Details})],a);let l=class SearchAppointmentModel extends o.PXView{get isLocked(){var e;return!0===(null===(e=this.Locked)||void 0===e?void 0:e.value)}get dateTimeBegin(){var e;return new Date(null===(e=this.ScheduledDateTimeBegin)||void 0===e?void 0:e.value)}get dateTimeEnd(){var e;return new Date(null===(e=this.ScheduledDateTimeEnd)||void 0===e?void 0:e.value)}get assignmentID(){var e;return`${null===(e=this.AppointmentID)||void 0===e?void 0:e.cellText}_unassigned`}get appointmentID(){var e;return null===(e=this.AppointmentID)||void 0===e?void 0:e.cellText}get isConfirmed(){var e;return null===(e=this.Confirmed)||void 0===e?void 0:e.value}get isValidatedByDispatcher(){var e;return null===(e=this.ValidatedByDispatcher)||void 0===e?void 0:e.value}get caption(){return this.RefNbr.cellText.match(/^\d/)?`${this.SrvOrdType.cellText} ${this.RefNbr.cellText}`:this.RefNbr.cellText}get srvOrdType(){return this.SrvOrdType.cellText}get refNbr(){return this.RefNbr.cellText}get bandColor(){var e;return null===(e=this.BandColor)||void 0===e?void 0:e.value}};__decorate([(0,o.columnConfig)({allowFastFilter:!0}),__metadata("design:type",o.GridCell)],l.prototype,"RefNbr",void 0),__decorate([o.readOnly,__metadata("design:type",o.GridCell)],l.prototype,"Status",void 0),__decorate([(0,o.columnConfig)({allowFastFilter:!0}),__metadata("design:type",o.GridCell)],l.prototype,"DocDesc",void 0),__decorate([o.readOnly,__metadata("design:type",o.GridCell)],l.prototype,"Locked",void 0),__decorate([(0,o.columnConfig)({allowFilter:!1}),__metadata("design:type",o.GridCell)],l.prototype,"BandColor",void 0),__decorate([o.readOnly,__metadata("design:type",o.GridCell)],l.prototype,"SchedulerServiceOrder__Status",void 0),__decorate([o.readOnly,__metadata("design:type",o.GridCell)],l.prototype,"SchedulerServiceOrder__Priority",void 0),__decorate([o.readOnly,__metadata("design:type",o.GridCell)],l.prototype,"SchedulerServiceOrder__Severity",void 0),__decorate([(0,o.columnConfig)({allowFastFilter:!0}),__metadata("design:type",o.GridCell)],l.prototype,"SchedulerServiceOrder__DocDesc",void 0),__decorate([(0,o.columnConfig)({allowFastFilter:!0}),__metadata("design:type",o.GridCell)],l.prototype,"SchedulerServiceOrder__CustomerAcctCD",void 0),__decorate([(0,o.columnConfig)({allowFastFilter:!0}),__metadata("design:type",o.GridCell)],l.prototype,"SchedulerServiceOrder__CustomerAcctName",void 0),__decorate([(0,o.columnConfig)({allowFastFilter:!0}),__metadata("design:type",o.GridCell)],l.prototype,"SchedulerServiceOrder__AddressLine1",void 0),__decorate([(0,o.columnConfig)({allowFastFilter:!0}),__metadata("design:type",o.GridCell)],l.prototype,"SchedulerServiceOrder__ContactDisplayName",void 0),__decorate([(0,o.columnConfig)({allowFastFilter:!0}),__metadata("design:type",o.GridCell)],l.prototype,"SchedulerServiceOrder__Phone1",void 0),__decorate([(0,o.columnConfig)({allowFastFilter:!0}),__metadata("design:type",o.GridCell)],l.prototype,"SchedulerServiceOrder__Email",void 0),__decorate([(0,o.columnConfig)({allowFastFilter:!0}),__metadata("design:type",o.GridCell)],l.prototype,"SchedulerServiceOrder__ProblemDescr",void 0),l=__decorate([(0,o.gridConfig)({preset:o.GridPreset.Details})],l);let c=i=class AppointmentEmployeeModel extends o.PXView{static getAssignmentId(e,n){return`${e}_${n}`}get isLocked(){var e;return!0===(null===(e=this.SchedulerAppointment__Locked)||void 0===e?void 0:e.value)}get dateTimeBegin(){var e;return new Date(null===(e=this.SchedulerAppointment__ScheduledDateTimeBegin)||void 0===e?void 0:e.value)}get dateTimeEnd(){var e;return new Date(null===(e=this.SchedulerAppointment__ScheduledDateTimeEnd)||void 0===e?void 0:e.value)}get assignmentID(){var e;return`${null===(e=this.SchedulerAppointment__AppointmentID)||void 0===e?void 0:e.cellText}_${this.resourceId}`}get appointmentID(){var e;return null===(e=this.SchedulerAppointment__AppointmentID)||void 0===e?void 0:e.cellText}get resourceId(){var e,n,r;return(null===(n=null===(e=this.BAccountID)||void 0===e?void 0:e.cellText)||void 0===n?void 0:n.length)>0?null===(r=this.BAccountID)||void 0===r?void 0:r.cellText:i.unassignedId}get isConfirmed(){var e;return null===(e=this.SchedulerAppointment__Confirmed)||void 0===e?void 0:e.value}get isValidatedByDispatcher(){var e;return null===(e=this.SchedulerAppointment__ValidatedByDispatcher)||void 0===e?void 0:e.value}get srvOrdType(){return this.SchedulerAppointment__SrvOrdType.cellText}get refNbr(){return this.SchedulerAppointment__RefNbr.cellText}get caption(){return this.SchedulerAppointment__RefNbr.cellText.match(/^\d/)?`${this.SchedulerAppointment__SrvOrdType.cellText} ${this.SchedulerAppointment__RefNbr.cellText}`:this.SchedulerAppointment__RefNbr.cellText}get isFilteredOut(){return!!this.SchedulerAppointmentEmployee__IsFilteredOut.value}get fullAddress(){var e,n,r,i,o;let s=null!==(r=null===(n=null===(e=this.SchedulerServiceOrder__AddressLine1)||void 0===e?void 0:e.cellText)||void 0===n?void 0:n.trim())&&void 0!==r?r:"";const a=null===(o=null===(i=this.SchedulerServiceOrder__AddressLine2)||void 0===i?void 0:i.cellText)||void 0===o?void 0:o.trim();(null==a?void 0:a.length)>0&&(s+=` ${a}`.trim());return s+=`, ${this.SchedulerServiceOrder__State?`${this.SchedulerServiceOrder__State}, `:""} ${this.SchedulerServiceOrder__City.cellText} ${this.SchedulerServiceOrder__PostalCode.cellText}, ${this.SchedulerServiceOrder__CountryID.cellText}`,s}get bandColor(){var e;return null===(e=this.SchedulerAppointment__BandColor)||void 0===e?void 0:e.value}};c.unassignedId="unassigned",__decorate([(0,o.columnConfig)({allowFastFilter:!0}),__metadata("design:type",o.GridCell)],c.prototype,"BAccountID",void 0),__decorate([(0,o.columnConfig)({allowFastFilter:!0}),__metadata("design:type",o.GridCell)],c.prototype,"AcctCD",void 0),__decorate([(0,o.columnConfig)({allowFastFilter:!0}),__metadata("design:type",o.GridCell)],c.prototype,"AcctName",void 0),__decorate([(0,o.columnConfig)({allowFilter:!1}),__metadata("design:type",o.GridCell)],c.prototype,"FSTimeSlot__EmployeeID",void 0),__decorate([(0,o.columnConfig)({allowFilter:!1}),__metadata("design:type",o.GridCell)],c.prototype,"FSTimeSlot__TimeStart",void 0),__decorate([(0,o.columnConfig)({allowFilter:!1}),__metadata("design:type",o.GridCell)],c.prototype,"FSTimeSlot__TimeEnd",void 0),__decorate([o.readOnly,__metadata("design:type",o.GridCell)],c.prototype,"SchedulerAppointment__Status",void 0),__decorate([(0,o.columnConfig)({allowFilter:!1}),__metadata("design:type",o.GridCell)],c.prototype,"SchedulerAppointment__BandColor",void 0),__decorate([o.readOnly,__metadata("design:type",o.GridCell)],c.prototype,"SchedulerServiceOrder__Status",void 0),__decorate([o.readOnly,__metadata("design:type",o.GridCell)],c.prototype,"SchedulerServiceOrder__Priority",void 0),__decorate([o.readOnly,__metadata("design:type",o.GridCell)],c.prototype,"SchedulerServiceOrder__Severity",void 0),__decorate([(0,o.columnConfig)({visible:!1}),__metadata("design:type",o.GridCell)],c.prototype,"SchedulerServiceOrder__FullAddress",void 0),c=i=__decorate([(0,o.gridConfig)({preset:o.GridPreset.Details})],c);class DatesFilterModel extends o.PXView{get filterBusinessHoursValue(){var e,n;return null===(n=null===(e=this.FilterBusinessHours)||void 0===e?void 0:e.value)||void 0===n||n}get periodKindValue(){var e,n;return null!==(n=null===(e=this.PeriodKind)||void 0===e?void 0:e.value)&&void 0!==n?n:s.PeriodKind.Day}}class SelectedAppointmentModel extends o.PXView{get isLocked(){var e;return!0===(null===(e=this.Locked)||void 0===e?void 0:e.value)}get canConfirm(){var e;return!this.isLocked&&!1===(null===(e=this.Confirmed)||void 0===e?void 0:e.value)}get canUnconfirm(){var e;return!this.isLocked&&!0===(null===(e=this.Confirmed)||void 0===e?void 0:e.value)}get canValidate(){var e;return!this.isLocked&&!1===(null===(e=this.ValidatedByDispatcher)||void 0===e?void 0:e.value)}get canInvalidate(){var e;return!this.isLocked&&!0===(null===(e=this.ValidatedByDispatcher)||void 0===e?void 0:e.value)}}__decorate([o.readOnly,__metadata("design:type",o.PXFieldState)],SelectedAppointmentModel.prototype,"Confirmed",void 0),__decorate([o.readOnly,__metadata("design:type",o.PXFieldState)],SelectedAppointmentModel.prototype,"ValidatedByDispatcher",void 0),__decorate([o.readOnly,__metadata("design:type",o.PXFieldState)],SelectedAppointmentModel.prototype,"SrvOrdType",void 0),__decorate([o.readOnly,__metadata("design:type",o.PXFieldState)],SelectedAppointmentModel.prototype,"RefNbr",void 0),__decorate([o.readOnly,__metadata("design:type",o.PXFieldState)],SelectedAppointmentModel.prototype,"AppointmentID",void 0),__decorate([o.readOnly,__metadata("design:type",o.PXFieldState)],SelectedAppointmentModel.prototype,"Status",void 0),__decorate([o.readOnly,__metadata("design:type",o.PXFieldState)],SelectedAppointmentModel.prototype,"BranchCD",void 0),__decorate([o.readOnly,__metadata("design:type",o.PXFieldState)],SelectedAppointmentModel.prototype,"ScheduledDateTimeBegin",void 0),__decorate([o.readOnly,__metadata("design:type",o.PXFieldState)],SelectedAppointmentModel.prototype,"ScheduledDateTimeEnd",void 0),__decorate([o.readOnly,__metadata("design:type",o.PXFieldState)],SelectedAppointmentModel.prototype,"EstimatedDurationTotal",void 0),__decorate([o.readOnly,__metadata("design:type",o.PXFieldState)],SelectedAppointmentModel.prototype,"DocDesc",void 0),__decorate([o.readOnly,__metadata("design:type",o.PXFieldState)],SelectedAppointmentModel.prototype,"LongDescr",void 0),__decorate([o.readOnly,__metadata("design:type",o.PXFieldState)],SelectedAppointmentModel.prototype,"StaffCntr",void 0),__decorate([o.readOnly,__metadata("design:type",o.PXFieldState)],SelectedAppointmentModel.prototype,"Locked",void 0);class SelectedSOModel extends o.PXView{}__decorate([o.readOnly,__metadata("design:type",o.PXFieldState)],SelectedSOModel.prototype,"RefNbr",void 0),__decorate([o.readOnly,__metadata("design:type",o.PXFieldState)],SelectedSOModel.prototype,"Status",void 0),__decorate([o.readOnly,__metadata("design:type",o.PXFieldState)],SelectedSOModel.prototype,"DocDesc",void 0),__decorate([o.readOnly,__metadata("design:type",o.PXFieldState)],SelectedSOModel.prototype,"Priority",void 0),__decorate([o.readOnly,__metadata("design:type",o.PXFieldState)],SelectedSOModel.prototype,"Severity",void 0),__decorate([o.readOnly,__metadata("design:type",o.PXFieldState)],SelectedSOModel.prototype,"SLAETA",void 0),__decorate([o.readOnly,__metadata("design:type",o.PXFieldState)],SelectedSOModel.prototype,"OrderDate",void 0),__decorate([o.readOnly,__metadata("design:type",o.PXFieldState)],SelectedSOModel.prototype,"SourceType",void 0),__decorate([o.readOnly,__metadata("design:type",o.PXFieldState)],SelectedSOModel.prototype,"WaitingForParts",void 0),__decorate([o.readOnly,o.headerDescription,__metadata("design:type",o.PXFieldState)],SelectedSOModel.prototype,"ProjectID",void 0),__decorate([o.readOnly,o.headerDescription,__metadata("design:type",o.PXFieldState)],SelectedSOModel.prototype,"ServiceContractRefNbr",void 0),__decorate([o.readOnly,o.headerDescription,__metadata("design:type",o.PXFieldState)],SelectedSOModel.prototype,"CustomerID",void 0),__decorate([o.readOnly,o.headerDescription,__metadata("design:type",o.PXFieldState)],SelectedSOModel.prototype,"ContactID",void 0),__decorate([o.readOnly,o.headerDescription,__metadata("design:type",o.PXFieldState)],SelectedSOModel.prototype,"CustPORefNbr",void 0),__decorate([o.readOnly,o.headerDescription,__metadata("design:type",o.PXFieldState)],SelectedSOModel.prototype,"LocationID",void 0),__decorate([o.readOnly,__metadata("design:type",o.PXFieldState)],SelectedSOModel.prototype,"CustomerAcctCD",void 0),__decorate([o.readOnly,__metadata("design:type",o.PXFieldState)],SelectedSOModel.prototype,"CustomerAcctName",void 0),__decorate([o.readOnly,__metadata("design:type",o.PXFieldState)],SelectedSOModel.prototype,"CustomerClassID",void 0),__decorate([o.readOnly,__metadata("design:type",o.PXFieldState)],SelectedSOModel.prototype,"ContactDisplayName",void 0),__decorate([o.readOnly,__metadata("design:type",o.PXFieldState)],SelectedSOModel.prototype,"Phone1",void 0),__decorate([o.readOnly,__metadata("design:type",o.PXFieldState)],SelectedSOModel.prototype,"Email",void 0),__decorate([o.readOnly,__metadata("design:type",o.PXFieldState)],SelectedSOModel.prototype,"AddressLine1",void 0),__decorate([o.readOnly,__metadata("design:type",o.PXFieldState)],SelectedSOModel.prototype,"AddressLine2",void 0),__decorate([o.readOnly,__metadata("design:type",o.PXFieldState)],SelectedSOModel.prototype,"City",void 0),__decorate([o.readOnly,__metadata("design:type",o.PXFieldState)],SelectedSOModel.prototype,"State",void 0),__decorate([o.readOnly,__metadata("design:type",o.PXFieldState)],SelectedSOModel.prototype,"PostalCode",void 0),__decorate([o.readOnly,__metadata("design:type",o.PXFieldState)],SelectedSOModel.prototype,"CountryID",void 0),__decorate([o.readOnly,__metadata("design:type",o.PXFieldState)],SelectedSOModel.prototype,"FullAddress",void 0),__decorate([o.readOnly,o.headerDescription,__metadata("design:type",o.PXFieldState)],SelectedSOModel.prototype,"BranchCD",void 0),__decorate([o.readOnly,o.headerDescription,__metadata("design:type",o.PXFieldState)],SelectedSOModel.prototype,"BranchName",void 0),__decorate([o.readOnly,o.headerDescription,__metadata("design:type",o.PXFieldState)],SelectedSOModel.prototype,"BranchLocationCD",void 0),__decorate([o.readOnly,o.headerDescription,__metadata("design:type",o.PXFieldState)],SelectedSOModel.prototype,"BranchLocationDescr",void 0);let d=class EmployeeModel extends o.PXView{};__decorate([o.readOnly,__metadata("design:type",o.GridCell)],d.prototype,"AcctCD",void 0),__decorate([o.readOnly,__metadata("design:type",o.GridCell)],d.prototype,"AcctName",void 0),__decorate([o.readOnly,__metadata("design:type",o.GridCell)],d.prototype,"Contact__Phone1",void 0),__decorate([o.readOnly,__metadata("design:type",o.GridCell)],d.prototype,"DepartmentID",void 0),d=__decorate([(0,o.gridConfig)({preset:o.GridPreset.Details})],d);class AppointmentFilterModel extends o.PXView{}class SOFilterModel extends o.PXView{}class LastUpdatedAppointmentFilterModel extends o.PXView{}class SetupModel extends o.PXView{}class InitDataModel extends o.PXView{}class MainAppointmentFilterModel extends o.PXView{}__decorate([o.readOnly,__metadata("design:type",o.PXFieldState)],MainAppointmentFilterModel.prototype,"Status",void 0);class UpdatedAppointmentModel extends o.PXView{}class RoomModel extends o.PXView{}const u=new RegExp("return (.*);");function getVariableName(e){return u.exec(`${e}`)[1]}},"./fonts/acumatica-font-v1.woff?q9otuf":(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>i});const i=r.p+"fd1f4f4f3e763eb9df2256fcf687091d.woff"},"./fonts/acumatica-font-v1.woff2?q9otuf":(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>i});const i=r.p+"4778a44f36a673c123ba4f25fa918ed9.woff2"},"./src/screens/FS/FS300300/styles/fonts/fa-solid-900.woff2":(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>i});const i=r.p+"59edf72a325ac2048d6077f64773674f.woff2"},"../dist/packages/schedulerpro/schedulerpro.module.js":(e,n,r)=>{"use strict";r.r(n),r.d(n,{AbstractAssignmentStoreMixin:()=>qg,AbstractCalendarManagerStoreMixin:()=>Wg,AbstractCalendarMixin:()=>Hg,AbstractCrudManager:()=>Mp,AbstractCrudManagerMixin:()=>AbstractCrudManagerMixin_default,AbstractCrudManagerValidation:()=>AbstractCrudManagerValidation_default,AbstractDependencyStoreMixin:()=>Ug,AbstractEventStoreMixin:()=>Yg,AbstractHasAssignmentsMixin:()=>Vg,AbstractPartOfProjectGenericMixin:()=>Og,AbstractPartOfProjectModelMixin:()=>_g,AbstractPartOfProjectStoreMixin:()=>Lg,AbstractRecurrenceIterator:()=>Jp,AbstractResourceStoreMixin:()=>Xg,AbstractTimeRanges:()=>qm,ActionBase:()=>xi,ActionColumn:()=>Wd,AdvancedTab:()=>Hx,AggregateColumn:()=>Gd,AjaxHelper:()=>Fe,AjaxStore:()=>Ci,AjaxTransport:()=>AjaxTransport_default,Animator:()=>Fs,ArrayDataField:()=>Tr,ArrayHelper:()=>oe,AssignmentAllocationInterval:()=>OS,AssignmentModel:()=>US,AssignmentModelMixin:()=>AssignmentModelMixin_default,AssignmentStore:()=>GS,AssignmentStoreMixin:()=>AssignmentStoreMixin_default,AsyncHelper:()=>Me,AttachToProjectMixin:()=>AttachToProjectMixin_default,AvatarRendering:()=>zd,Badge:()=>Badge_default,Bag:()=>li,Bar:()=>ph,Base:()=>re,BaseAllocationInfo:()=>_S,BaseAllocationInterval:()=>PS,BaseAssignmentMixin:()=>Ww,BaseCalendarMixin:()=>Aw,BaseDependencyMixin:()=>bC,BaseDependencyResolution:()=>MC,BaseEmptyCalendarEffectResolution:()=>Pw,BaseEventMixin:()=>lC,BaseHasAssignmentsMixin:()=>cC,BaseResourceMixin:()=>pC,BooleanCombo:()=>Fc,BooleanDataField:()=>Mr,BreakCurrentStackExecution:()=>vv,BrowserHelper:()=>c,Button:()=>Ca,ButtonGroup:()=>Oc,CI:()=>CI,CIFromSetOrArrayOrValue:()=>CIFromSetOrArrayOrValue,CSSHelper:()=>qa,CalculateProposed:()=>dv,CalculatedValueGen:()=>fy,CalculatedValueGenC:()=>CalculatedValueGenC,CalculatedValueSync:()=>my,CalculatedValueSyncC:()=>CalculatedValueSyncC,CalculationGen:()=>ty,CalculationSync:()=>iy,CalendarCache:()=>Rg,CalendarCacheInterval:()=>kg,CalendarCacheIntervalMultiple:()=>Tg,CalendarCacheMultiple:()=>Ig,CalendarCacheSingle:()=>Pg,CalendarField:()=>NS,CalendarHighlight:()=>px,CalendarIntervalMixin:()=>$g,CalendarIntervalModel:()=>YS,CalendarIntervalStore:()=>jg,CalendarIteratorResult:()=>wg,CalendarManagerStore:()=>XS,CalendarModel:()=>KS,CalendarPanel:()=>Lc,CanCombineCalendarsMixin:()=>aC,CellCopyPaste:()=>uu,CellEdit:()=>gu,CellMenu:()=>pu,CellTooltip:()=>mu,ChangeLogAction:()=>rD,ChangeLogAssignmentEntity:()=>tD,ChangeLogDependencyEntity:()=>eD,ChangeLogEntity:()=>Jx,ChangeLogPropertyUpdate:()=>aD,ChangeLogStore:()=>cx,ChangeLogTransactionModel:()=>lx,CheckColumn:()=>Kd,Checkbox:()=>_c,ChipView:()=>Rc,ChronoAbstractProjectMixin:()=>vC,ChronoAssignmentStoreMixin:()=>Uw,ChronoCalendarManagerStoreMixin:()=>Gw,ChronoDependencyStoreMixin:()=>Yw,ChronoEventStoreMixin:()=>hC,ChronoEventTreeStoreMixin:()=>gC,ChronoField:()=>Hy,ChronoGraph:()=>Ay,ChronoMixinBase:()=>bg,ChronoModelFieldIdentifier:()=>iw,ChronoModelMixin:()=>gw,ChronoModelReferenceBucketFieldIdentifier:()=>aw,ChronoModelReferenceFieldIdentifier:()=>sw,ChronoModelReferenceFieldQuark:()=>ow,ChronoPartOfProjectGenericMixin:()=>Dw,ChronoPartOfProjectModelMixin:()=>kw,ChronoPartOfProjectStoreMixin:()=>Rw,ChronoResourceStoreMixin:()=>mC,ChronoStoreMixin:()=>Ew,ChronoTransaction:()=>ky,ClickRepeater:()=>Ps,ClockTemplate:()=>Pm,CollapseTool:()=>js,Collection:()=>si,CollectionFilter:()=>Zr,CollectionSorter:()=>ei,Column:()=>Hd,ColumnAutoWidth:()=>bu,ColumnDragToolbar:()=>vu,ColumnLines:()=>Um,ColumnPicker:()=>yu,ColumnRename:()=>wu,ColumnReorder:()=>Cu,ColumnResize:()=>Su,ColumnStore:()=>qd,Combo:()=>Mc,CommitZero:()=>Ty,ComputationCycle:()=>Sy,Config:()=>H,ConflictEffect:()=>ww,ConflictEffectDescription:()=>yw,ConflictResolution:()=>Cw,ConflictSymbol:()=>vw,ConstrainedEarlyEventMixin:()=>xC,ConstraintInterval:()=>xw,ConstraintIntervalDescription:()=>Sw,ConstraintIntervalSide:()=>gg,ConstraintType:()=>Jh,ConstraintTypePicker:()=>zx,Container:()=>Rs,ContextGen:()=>ey,ContextMenuBase:()=>Na,ContextSync:()=>Jv,CoreAssignmentMixin:()=>Jg,CoreAssignmentStoreMixin:()=>np,CoreCalendarManagerStoreMixin:()=>ip,CoreCalendarMixin:()=>rp,CoreDependencyMixin:()=>op,CoreDependencyStoreMixin:()=>ap,CoreEventMixin:()=>Zg,CoreEventStoreMixin:()=>up,CoreHasAssignmentsMixin:()=>lp,CoreHasDependenciesMixin:()=>cp,CorePartOfProjectGenericMixin:()=>Bg,CorePartOfProjectModelMixin:()=>Ng,CorePartOfProjectStoreMixin:()=>ep,CoreResourceMixin:()=>Qg,CoreResourceStoreMixin:()=>hp,CoreStateTrackingManager:()=>Do,CrudManager:()=>Sm,CrudManagerView:()=>CrudManagerView_default,CycleDescription:()=>pv,CycleEffect:()=>Vw,CycleEffectDescription:()=>Hw,CycleResolution:()=>mv,CycleResolutionInput:()=>fv,CycleResolutionInputChrono:()=>Qv,CycleResolutionPopup:()=>dD,CycleSymbol:()=>_w,DailyRecurrenceIterator:()=>em,DataField:()=>kr,DataGenerator:()=>pl,DateColumn:()=>Xd,DateConstraintInterval:()=>kC,DateConstraintIntervalDescription:()=>RC,DateDataField:()=>Ar,DateField:()=>Vc,DateHelper:()=>Ct,DateInterval:()=>pw,DatePicker:()=>Bc,DateTimeField:()=>Gc,DayTime:()=>Xl,DeactivateDependencyCycleEffectResolution:()=>BS,DeactivateDependencyResolution:()=>IC,Delayable:()=>Delayable_default,DelayableWrapper:()=>fp,DemoBot:()=>fl,Dependencies:()=>Jm,DependenciesCalendar:()=>ag,DependencyBaseModel:()=>hm,DependencyConstraintInterval:()=>PC,DependencyConstraintIntervalDescription:()=>FC,DependencyCreation:()=>DependencyCreation_default,DependencyEdit:()=>mx,DependencyModel:()=>ZS,DependencyStore:()=>QS,DependencyStoreMixin:()=>DependencyStoreMixin_default,DependencyTab:()=>Lx,DependencyTooltip:()=>DependencyTooltip_default,DependencyType:()=>og,DependencyTypePicker:()=>Ox,DependencyValidationResult:()=>rg,Describable:()=>Describable_default,Direction:()=>ug,DisplayField:()=>jc,DomClassList:()=>Xt,DomDataStore:()=>Si,DomHelper:()=>Gn,DomSync:()=>$o,DragBase:()=>Om,DragContext:()=>Il,DragCreateBase:()=>$m,DragHelper:()=>Qa,DragProxy:()=>Fl,DragTipProxy:()=>bc,Draggable:()=>Draggable_default,Droppable:()=>Droppable_default,Duration:()=>Gr,DurationColumn:()=>vp,DurationConverterMixin:()=>fC,DurationField:()=>Yc,DurationVar:()=>Zw,DynamicObject:()=>ia,EMPTY_INTERVAL:()=>mw,EarlyLateLazyness:()=>SC,EdgeInclusion:()=>vg,EdgeType:()=>Ov,EdgeTypeNormal:()=>Ey,EdgeTypePast:()=>Ry,EditBase:()=>Bm,Editor:()=>Xc,EditorTab:()=>Rx,Effect:()=>yv,EffectResolutionResult:()=>lw,EffortField:()=>Fx,EffortVar:()=>gS,EmptyCalendarEffect:()=>Fw,EmptyCalendarEffectDescription:()=>Iw,EmptyCalendarSymbol:()=>Mw,EndDateField:()=>Ix,EndDateVar:()=>Xw,EngineReplica:()=>zw,EngineRevision:()=>$w,EngineTransaction:()=>jw,Entity:()=>Ny,EntityIdentifier:()=>zy,EntityMeta:()=>Iy,EventBuffer:()=>fx,EventCopyPaste:()=>rf,EventDayIndex:()=>Vp,EventDrag:()=>of,EventDragCreate:()=>sf,EventDragSelect:()=>af,EventEdit:()=>xf,EventEditor:()=>lf,EventFilter:()=>Df,EventHelper:()=>cn,EventLoader:()=>EventLoader_default,EventMenu:()=>Ef,EventModel:()=>ex,EventModelMixin:()=>EventModelMixin_default,EventNavigation:()=>EventNavigation_default,EventNonWorkingTime:()=>Rf,EventResize:()=>bx,EventSegmentDrag:()=>vx,EventSegmentModel:()=>JS,EventSegmentResize:()=>yx,EventSegments:()=>wx,EventSelection:()=>EventSelection_default,EventStore:()=>tx,EventStoreMixin:()=>EventStoreMixin_default,EventTooltip:()=>Mf,EventUpdateAction:()=>nx,Events:()=>Events_default,ExcelExporter:()=>Vb,ExportDialog:()=>rh,ExportOrientationCombo:()=>nh,ExportRowsCombo:()=>th,Exporter:()=>sh,Factoryable:()=>Factoryable_default,Featureable:()=>Featureable_default,Fencible:()=>Fencible_default,Field:()=>Cc,FieldContainer:()=>vc,FieldFilterPicker:()=>Jc,FieldFilterPickerGroup:()=>nd,FieldIdentifier:()=>Ly,FieldSet:()=>rd,FileField:()=>id,FileFormat:()=>Ju,FilePicker:()=>od,FillHandle:()=>xu,Filter:()=>Tu,FilterBar:()=>Au,FilterField:()=>sd,Finalizable:()=>Finalizable_default,FixedDurationMixin:()=>TS,Footer:()=>mh,FormTab:()=>kx,Formatter:()=>yl,Formula:()=>uv,FormulasCache:()=>gv,Fullscreen:()=>jo,FunctionHelper:()=>he,GanttTaskEditor:()=>Nx,GeneralTab:()=>Px,GetEventsMixin:()=>GetEventsMixin_default,GetTransaction:()=>Ev,GlobalEvents:()=>or,Grid:()=>$h,GridBase:()=>_h,GridElementEvents:()=>GridElementEvents_default,GridExcelExporter:()=>gh,GridFeatureManager:()=>du,GridFeatures:()=>GridFeatures_default,GridFieldFilterPicker:()=>Eu,GridFieldFilterPickerGroup:()=>Ru,GridGroupSummary:()=>Fu,GridMultiPageExporter:()=>ah,GridMultiPageVerticalExporter:()=>lh,GridPdfExport:()=>dh,GridResponsive:()=>GridResponsive_default,GridRowModel:()=>iu,GridSelection:()=>GridSelection_default,GridSinglePageExporter:()=>ch,GridState:()=>GridState_default,GridSubGrids:()=>GridSubGrids_default,GridSummary:()=>Uu,Group:()=>Iu,GroupSummary:()=>Ff,HasCalendarMixin:()=>sC,HasChildrenMixin:()=>wC,HasDateConstraintMixin:()=>DC,HasDependenciesMixin:()=>dC,HasEffortMixin:()=>hS,HasPercentDoneMixin:()=>_C,HasProposedNotPreviousValue:()=>HasProposedNotPreviousValue,HasProposedNotPreviousValueEffect:()=>Nv,HasProposedNotPreviousValueSymbol:()=>Vv,HasProposedValue:()=>HasProposedValue,HasProposedValueEffect:()=>Hv,HasProposedValueSymbol:()=>Bv,HasSchedulingModeMixin:()=>CS,HasSubEventsMixin:()=>yC,Header:()=>yh,HeaderMenu:()=>Pu,HeaderZoom:()=>Pf,Histogram:()=>_d,HorizontalLayoutPack:()=>Im,HorizontalLayoutStack:()=>Fm,HorizontalRendering:()=>Fb,HorizontalTimeAxis:()=>Sp,Hoverable:()=>Hoverable_default,IdHelper:()=>Jr,Identifiable:()=>Identifiable_default,Identifier:()=>uy,IdentifierC:()=>IdentifierC,IndexPosition:()=>Dg,InstancePlugin:()=>sr,Instruction:()=>Nw,IntegerDataField:()=>Pr,IntervalCache:()=>Ag,IsChronoModelSymbol:()=>rw,JsonEncoder:()=>JsonEncoder_default,KeyMap:()=>KeyMap_default,Label:()=>ed,Labelable:()=>Labelable_default,Labels:()=>jf,Layout:()=>ys,Levels:()=>oy,List:()=>Ec,Listener:()=>My,LoadMaskable:()=>LoadMaskable_default,LocaleHelper:()=>Oe,LocaleManager:()=>Le,Localizable:()=>Localizable_default,Location:()=>Bd,MAX_DATE:()=>xg,MI:()=>MI,MIN_DATE:()=>Sg,Mask:()=>ts,Menu:()=>Va,MenuItem:()=>za,MergeCells:()=>Lu,MessageDialog:()=>dd,Meta:()=>dy,Minifiable:()=>Minifiable_default,MinimalChronoModelFieldIdentifierGen:()=>uw,MinimalChronoModelFieldIdentifierSync:()=>dw,MinimalChronoModelFieldVariable:()=>hw,MinimalEntityIdentifier:()=>By,MinimalFieldIdentifierGen:()=>$y,MinimalFieldIdentifierSync:()=>_y,MinimalFieldVariable:()=>jy,MinimalReferenceBucketIdentifier:()=>Qy,MinimalReferenceBucketQuark:()=>Xy,MinimalReferenceIdentifier:()=>Gy,Model:()=>Ur,ModelBucketField:()=>nw,ModelCombo:()=>VS,ModelDataField:()=>Or,ModelField:()=>ew,ModelLink:()=>ModelLink_default,ModelReferenceField:()=>tw,ModelStm:()=>ModelStm_default,Month:()=>Ql,MonthlyRecurrenceIterator:()=>nm,MultiPageExporter:()=>nb,MultiPageVerticalExporter:()=>rb,NOT_VISITED:()=>iv,Navigator:()=>wl,NestedEvents:()=>Sx,NonWorkingTime:()=>zf,NonWorkingTimeMixin:()=>NonWorkingTimeMixin_default,NotesTab:()=>Vx,NumberColumn:()=>Ud,NumberDataField:()=>Lr,NumberField:()=>Nc,NumberFormat:()=>Dl,ObjectDataField:()=>_r,ObjectHelper:()=>Et,Objects:()=>M,OnCycleAction:()=>Kb,Orientation:()=>Qu,Override:()=>Hl,OwnIdentifier:()=>Mv,OwnIdentifierSymbol:()=>Tv,OwnQuark:()=>kv,OwnQuarkSymbol:()=>Rv,PackMixin:()=>PackMixin_default,PagingToolbar:()=>ud,Pan:()=>Bf,Panel:()=>La,PanelCollapser:()=>na,PanelCollapserOverlay:()=>md,PaperFormat:()=>Zu,Parser:()=>dc,PartOfBaseProject:()=>PartOfBaseProject_default,PartOfProject:()=>PartOfProject_default2,PasswordField:()=>fd,PdfExport:()=>ab,PercentBar:()=>xx,PercentColumn:()=>Zd,PercentDoneMixin:()=>PercentDoneMixin_default,PickerField:()=>xc,Pluggable:()=>Pluggable_default,Point:()=>Zt,Popup:()=>_a,PredecessorsTab:()=>$x,PresetManager:()=>Em,PresetStore:()=>Dm,PreviousValueOf:()=>PreviousValueOf,PreviousValueOfEffect:()=>$v,PreviousValueOfSymbol:()=>_v,ProHorizontalLayout:()=>ProHorizontalLayout_default,ProHorizontalLayoutPack:()=>ux,ProHorizontalLayoutStack:()=>dx,ProjectChangeHandlerMixin:()=>ProjectChangeHandlerMixin_default,ProjectCombo:()=>qb,ProjectConsumer:()=>ProjectConsumer_default,ProjectCrudManager:()=>ProjectCrudManager_default2,ProjectModel:()=>lD,ProjectModelCommon:()=>ProjectModelCommon_default,ProjectModelMixin:()=>ProjectModelMixin_default,ProjectModelTimeZoneMixin:()=>ProjectModelTimeZoneMixin_default,ProjectProgressMixin:()=>ProjectProgressMixin_default,ProjectType:()=>cg,ProjectWebSocketHandlerMixin:()=>ProjectWebSocketHandlerMixin_default,Promissory:()=>Zo,ProposedArgumentsOf:()=>ProposedArgumentsOf,ProposedArgumentsOfEffect:()=>Gv,ProposedArgumentsOfSymbol:()=>Uv,ProposedOrPrevious:()=>Cv,ProposedOrPreviousSymbol:()=>wv,ProposedOrPreviousValueOf:()=>ProposedOrPreviousValueOf,ProposedOrPreviousValueOfEffect:()=>Wv,ProposedOrPreviousValueOfSymbol:()=>qv,ProposedValueOf:()=>ProposedValueOf,ProposedValueOfEffect:()=>zv,ProposedValueOfSymbol:()=>jv,Quark:()=>ly,QuarkGen:()=>gy,QuarkSync:()=>hy,QuickFind:()=>_u,RTL:()=>RTL_default,Radio:()=>bd,RadioGroup:()=>vd,RandomGenerator:()=>hl,RatingColumn:()=>Qd,ReadMode:()=>by,ReadyStatePropagator:()=>ReadyStatePropagator_default,Rectangle:()=>Gt,RectangularPathFinder:()=>Km,RecurrenceCombo:()=>uf,RecurrenceConfirmationPopup:()=>cf,RecurrenceDayRuleEncoder:()=>Xp,RecurrenceDaysButtonGroup:()=>pf,RecurrenceDaysCombo:()=>gf,RecurrenceEditor:()=>wf,RecurrenceEditorPanel:()=>yf,RecurrenceFrequencyCombo:()=>df,RecurrenceLegend:()=>Tm,RecurrenceLegendButton:()=>hf,RecurrenceModel:()=>om,RecurrenceMonthDaysButtonGroup:()=>mf,RecurrenceMonthsButtonGroup:()=>ff,RecurrencePositionsCombo:()=>vf,RecurrenceStopConditionCombo:()=>bf,RecurrenceTab:()=>Wx,RecurringEventEdit:()=>RecurringEventEdit_default,RecurringEvents:()=>RecurringEvents_default,RecurringEventsMixin:()=>RecurringEventsMixin_default,RecurringTimeSpan:()=>RecurringTimeSpan_default,RecurringTimeSpansMixin:()=>RecurringTimeSpansMixin_default,ReferenceBucketField:()=>Yy,ReferenceBucketIdentifier:()=>Zy,ReferenceBucketQuark:()=>Ky,ReferenceField:()=>Wy,ReferenceIdentifier:()=>Uy,RegionResize:()=>$u,Reject:()=>Reject,RejectEffect:()=>xv,RejectSymbol:()=>Sv,RemoveDateConstraintConflictResolution:()=>EC,RemoveDependencyCycleEffectResolution:()=>Bw,RemoveDependencyResolution:()=>AC,Renderable:()=>Jo,Replica:()=>Oy,ResizeHelper:()=>el,ResizeMonitor:()=>Ho,ResourceAllocationEventRangeCalendar:()=>FS,ResourceAllocationEventRangeCalendarIntervalMixin:()=>AS,ResourceAllocationEventRangeCalendarIntervalStore:()=>IS,ResourceAllocationInfo:()=>$S,ResourceAllocationInterval:()=>LS,ResourceCalendarColumn:()=>qS,ResourceCollapseColumn:()=>yp,ResourceCombo:()=>Cf,ResourceFilter:()=>Wb,ResourceHeader:()=>xp,ResourceHistogram:()=>pD,ResourceInfoColumn:()=>wp,ResourceMenu:()=>Hf,ResourceModel:()=>rx,ResourceModelMixin:()=>ResourceModelMixin_default,ResourceNonWorkingTime:()=>Dx,ResourceStore:()=>ix,ResourceStoreMixin:()=>ResourceStoreMixin_default,ResourceTimeRangeModel:()=>bm,ResourceTimeRangeStore:()=>vm,ResourceTimeRanges:()=>Vf,ResourceTimeRangesBase:()=>Hm,ResourceUtilization:()=>vD,ResourcesTab:()=>jx,Responsive:()=>Responsive_default,Revision:()=>wy,Ripple:()=>Cs,Rotatable:()=>Rotatable_default,Row:()=>oh,RowCopyPaste:()=>ju,RowExpander:()=>Bu,RowManager:()=>fh,RowNumberColumn:()=>Jd,RowReorder:()=>Hu,RowsRange:()=>Xu,SEDBackwardCycleResolutionContext:()=>rC,SEDDispatcher:()=>iC,SEDDispatcherIdentifier:()=>oC,SEDForwardCycleResolutionContext:()=>nC,SEDGraphDescription:()=>tC,SEDWUDispatcher:()=>yS,SEDWUDispatcherIdentifier:()=>wS,Scale:()=>jd,ScaleColumn:()=>WS,ScheduleContext:()=>nf,ScheduleMenu:()=>Nf,ScheduleRange:()=>eb,ScheduleRangeCombo:()=>ib,ScheduleTableExporter:()=>Hb,ScheduleTooltip:()=>qf,ScheduledByDependenciesEarlyEventMixin:()=>TC,Scheduler:()=>Nb,SchedulerAdvancedTab:()=>Ux,SchedulerAssignmentModel:()=>Ip,SchedulerAssignmentStore:()=>Pp,SchedulerBase:()=>Bb,SchedulerBasicEvent:()=>uC,SchedulerBasicProjectMixin:()=>CC,SchedulerCoreEvent:()=>dp,SchedulerCoreProjectMixin:()=>bp,SchedulerDatePicker:()=>Ub,SchedulerDependencyEdit:()=>tf,SchedulerDependencyModel:()=>pm,SchedulerDependencyStore:()=>fm,SchedulerDom:()=>SchedulerDom_default,SchedulerDomEvents:()=>SchedulerDomEvents_default,SchedulerEventModel:()=>lm,SchedulerEventRendering:()=>SchedulerEventRendering_default,SchedulerEventResize:()=>_m,SchedulerEventStore:()=>dm,SchedulerExportDialog:()=>ob,SchedulerGeneralTab:()=>qx,SchedulerPartOfProject:()=>PartOfProject_default,SchedulerPro:()=>yD,SchedulerProAssignmentMixin:()=>OC,SchedulerProBase:()=>gD,SchedulerProCycleEffect:()=>HS,SchedulerProDependencyMixin:()=>LC,SchedulerProEvent:()=>MS,SchedulerProEventRendering:()=>SchedulerProEventRendering_default,SchedulerProHasAssignmentsMixin:()=>$C,SchedulerProProjectMixin:()=>zS,SchedulerProResourceMixin:()=>jS,SchedulerProjectCrudManager:()=>ProjectCrudManager_default,SchedulerProjectModel:()=>Cm,SchedulerRegions:()=>SchedulerRegions_default,SchedulerResourceModel:()=>Lp,SchedulerResourceStore:()=>$p,SchedulerScroll:()=>SchedulerScroll_default,SchedulerState:()=>SchedulerState_default,SchedulerStores:()=>SchedulerStores_default,SchedulerTaskEditor:()=>Yx,SchedulingIssueEffectResolution:()=>fw,SchedulingIssueResolution:()=>SchedulingIssueResolution_default,SchedulingIssueResolutionPopup:()=>cD,SchedulingMode:()=>tg,SchedulingModePicker:()=>Bx,Schema:()=>Jy,ScrollManager:()=>uc,Scroller:()=>Xo,Search:()=>Vu,SharedEventStoreMixin:()=>SharedEventStoreMixin_default,SimpleEventEdit:()=>Wf,SinglePageExporter:()=>sb,SlideToggle:()=>Cd,Slider:()=>wd,Sort:()=>Nu,SortedMap:()=>Mg,Splitter:()=>Dd,StartDateField:()=>Mx,StartDateVar:()=>Kw,State:()=>State_default,StateBase:()=>Di,StateProvider:()=>gr,StateStorage:()=>dr,StateTrackingManager:()=>ox,StickyCells:()=>qu,StickyEvents:()=>Gf,Store:()=>yi,StoreCRUD:()=>StoreCRUD_default,StoreChained:()=>StoreChained_default,StoreChanges:()=>StoreChanges_default,StoreDataField:()=>$r,StoreFilter:()=>StoreFilter_default,StoreGroup:()=>StoreGroup_default,StoreProxy:()=>StoreProxy_default,StoreRelation:()=>StoreRelation_default,StoreSearch:()=>StoreSearch_default,StoreSort:()=>StoreSort_default,StoreState:()=>StoreState_default,StoreStm:()=>StoreStm_default,StoreSum:()=>StoreSum_default,StoreSync:()=>StoreSync_default,StoreTree:()=>StoreTree_default,StringDataField:()=>Ir,StringHelper:()=>w,Stripe:()=>Wu,Styleable:()=>Styleable_default,SubGrid:()=>Ah,SuccessorsTab:()=>_x,Summary:()=>Kf,SynchronousCalculationStarted:()=>ny,Tab:()=>Ed,TabBar:()=>Rd,TabPanel:()=>Md,TableExporter:()=>uh,TaskEdit:()=>Kx,TaskEditStm:()=>TaskEditStm_default,TaskEditorBase:()=>Ex,TemplateColumn:()=>eu,TemplateHelper:()=>rl,TextAreaField:()=>Ad,TextAreaPickerField:()=>Id,TextField:()=>Sc,TimeAxis:()=>km,TimeAxisColumn:()=>Dp,TimeAxisHeaderMenu:()=>Zf,TimeAxisSubGrid:()=>fb,TimeAxisViewModel:()=>lb,TimeColumn:()=>tu,TimeField:()=>Wc,TimePicker:()=>qc,TimeRanges:()=>Qf,TimeSelection:()=>Jf,TimeSpan:()=>Gp,TimeSpanHighlight:()=>Zx,TimeSpanMenuBase:()=>Vm,TimeUnit:()=>Zh,TimeZoneHelper:()=>ll,TimeZonedDatesMixin:()=>TimeZonedDatesMixin_default,Timeline:()=>wD,TimelineBase:()=>yb,TimelineDateMapper:()=>TimelineDateMapper_default,TimelineDomEvents:()=>TimelineDomEvents_default,TimelineEventRendering:()=>TimelineEventRendering_default,TimelineScroll:()=>TimelineScroll_default,TimelineState:()=>TimelineState_default,TimelineSummary:()=>Yf,TimelineViewPresets:()=>TimelineViewPresets_default,TimelineZoomable:()=>TimelineZoomable_default,Toast:()=>cl,TombStone:()=>cy,Tool:()=>_s,Toolable:()=>Toolable_default,Toolbar:()=>Ta,Tooltip:()=>fc,TooltipBase:()=>Nm,Transaction:()=>_i,TransactionCycleDetectionWalkContext:()=>xy,TransactionSymbol:()=>Dv,TransactionWalkDepth:()=>Dy,Tree:()=>Yu,TreeColumn:()=>ru,TreeCombo:()=>zh,TreeGrid:()=>jh,TreeGroup:()=>Ku,TreeNode:()=>TreeNode_default,UndoRedo:()=>Gb,UndoRedoBase:()=>Ic,UnitsVar:()=>pS,UnsafePreviousValueOf:()=>UnsafePreviousValueOf,UnsafePreviousValueOfEffect:()=>Zv,UnsafePreviousValueOfSymbol:()=>Xv,UnsafeProposedOrPreviousValueOf:()=>UnsafeProposedOrPreviousValueOf,UnsafeProposedOrPreviousValueOfEffect:()=>Kv,UnsafeProposedOrPreviousValueOfSymbol:()=>Yv,UnspecifiedTimeIntervalModel:()=>zg,UpdateAction:()=>Qi,Use24hrsEmptyCalendarEffectResolution:()=>Ow,Use8hrsEmptyCalendarEffectResolution:()=>Lw,VISITED_TOPOLOGICALLY:()=>ov,Variable:()=>py,VariableC:()=>VariableC,VariableInputState:()=>av,VariableWalkContext:()=>hv,VersionGrid:()=>kD,VersionHelper:()=>A,VersionModel:()=>sx,VersionStore:()=>ax,Versions:()=>sD,VerticalRendering:()=>jb,VerticalTimeAxisColumn:()=>Rp,ViewPreset:()=>xm,ViewPresetCombo:()=>Yb,WalkContext:()=>sv,WalkHelper:()=>mi,WalkSource:()=>rv,WalkState:()=>bv,Wbs:()=>gi,WebSocketManager:()=>El,WeeklyRecurrenceIterator:()=>tm,Widget:()=>bs,WidgetColumn:()=>Yd,WidgetHelper:()=>dl,Write:()=>Write,WriteEffect:()=>Iv,WriteSeveral:()=>WriteSeveral,WriteSeveralEffect:()=>Pv,WriteSeveralSymbol:()=>Fv,WriteSymbol:()=>Av,XMLHelper:()=>ul,YearPicker:()=>$c,YearlyRecurrenceIterator:()=>rm,binarySearch:()=>binarySearch,bucket:()=>bucket,build_proposed:()=>build_proposed,calculate:()=>calculate,calculateEffectiveEndDateConstraintInterval:()=>calculateEffectiveEndDateConstraintInterval,calculateEffectiveStartDateConstraintInterval:()=>calculateEffectiveStartDateConstraintInterval,combineCalendars:()=>combineCalendars,createEntityOnPrototype:()=>createEntityOnPrototype,cycleInfo:()=>cycleInfo,dateConverter:()=>dateConverter,delay:()=>delay,durationFormula:()=>eC,effortFormula:()=>mS,endDateByEffortFormula:()=>bS,endDateFormula:()=>Jw,ensureEntityOnPrototype:()=>ensureEntityOnPrototype,entity:()=>entity,entityDecoratorBody:()=>entityDecoratorBody,field:()=>qy,fixedDurationAndEffortSEDWUGraphDescription:()=>xS,fixedDurationSEDWUBackwardEffortDriven:()=>kS,fixedDurationSEDWUBackwardNonEffortDriven:()=>RS,fixedDurationSEDWUForwardEffortDriven:()=>ES,fixedDurationSEDWUForwardNonEffortDriven:()=>DS,fixedDurationSEDWUGraphDescription:()=>SS,format:()=>format,generic_field:()=>generic_field,getDecoratedModelFields:()=>getDecoratedModelFields,injectStaticFieldsProperty:()=>injectStaticFieldsProperty,intersectIntervals:()=>intersectIntervals,isAtomicValue:()=>isAtomicValue,isDateFinite:()=>isDateFinite,isNotNumber:()=>isNotNumber,isSerializableEqual:()=>isSerializableEqual,later:()=>Hh,model_field:()=>model_field,prototypeValue:()=>prototypeValue,reference:()=>reference,required:()=>tv,runGeneratorAsyncWithEffect:()=>runGeneratorAsyncWithEffect,runGeneratorSyncWithEffect:()=>runGeneratorSyncWithEffect,startDateByEffortFormula:()=>vS,startDateFormula:()=>Qw,stripDuplicates:()=>stripDuplicates,throwUnknownIdentifier:()=>throwUnknownIdentifier,unitMagnitudes:()=>bt,unitsFormula:()=>fS,validateRequiredProperties:()=>nv,write:()=>write});var i,o,s,a,l=Object.defineProperty,__publicField=(e,n,r)=>(((e,n,r)=>{n in e?l(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r})(e,"symbol"!=typeof n?n+"":n,r),r),__accessCheck=(e,n,r)=>{if(!n.has(e))throw TypeError("Cannot "+r)},__privateSet=(e,n,r,i)=>(__accessCheck(e,n,"write to private field"),i?i.call(e,r):n.set(e,r),r),c=class{static cacheFlags(e=navigator.platform,n=navigator.userAgent){const r=this;r._isLinux=Boolean(e.match(/Linux/)),r._isMac=Boolean(e.match(/Mac/)),r._isWindows=Boolean(e.match(/Win32/)),r._isWebkit=Boolean(n.match(/WebKit/)&&!n.match(/Edg/)),r._firefoxVersion=r.getVersion(n,/Firefox\/(\d+)\./),r._isFirefox=r._firefoxVersion>0,r._chromeVersion=r.getVersion(n,/Chrom(?:e|ium)\/(\d+)\./),r._isChrome=r._chromeVersion>0,r._isSafari=Boolean(n.match(/Safari/))&&!r._isChrome,r._isMobileSafari=Boolean(n.match(/Mobile.*Safari/)),r._safariVersion=r.getVersion(n,/Version\/(.*).Safari/),r._isAndroid=Boolean(n.match(/Android/g))}static get supportsOverflowClip(){if(null==this._supportsOverflowClip){const e=document.createElement("div");e.style.overflow="clip",e.style.display="none",document.documentElement.appendChild(e),this._supportsOverflowClip="clip"===e.ownerDocument.defaultView.getComputedStyle(e).getPropertyValue("overflow"),e.remove()}return this._supportsOverflowClip}static get supportsSticky(){return!0}static getVersion(e,n){const r=e.match(n);return r?parseFloat(r[1]):0}static get isTouchDevice(){return void 0===this._isTouchDevice&&(this._isTouchDevice=globalThis.matchMedia("(pointer:coarse)").matches),this._isTouchDevice}static get isHoverableDevice(){return void 0===this._isHoverableDevice&&(this._isHoverableDevice=globalThis.matchMedia("(any-hover: hover)").matches),this._isHoverableDevice}static get isBrowserEnv(){return"undefined"!=typeof window}static get isMac(){return this._isMac}static get isWindows(){return this._isWindows}static get isLinux(){return this._isLinux}static get isAndroid(){return this._isAndroid}static get isWebkit(){return this._isWebkit}static get isChrome(){return this._isChrome}static get chromeVersion(){return this._chromeVersion}static get isFirefox(){return this._isFirefox}static get firefoxVersion(){return this._firefoxVersion}static get isSafari(){return this._isSafari}static get safariVersion(){return this._safariVersion}static get isMobileSafari(){return this._isMobileSafari}static get platform(){const e=this;return e._isLinux?"linux":e._isMac?"mac":e._isWindows?"windows":e._isAndroid?"android":e._isMobileSafari?"ios":null}static get supportsPassive(){return!0}static get supportsRandomUUID(){if(void 0===this._supportsRandomUUID)try{this._supportsRandomUUID=Boolean(globalThis.crypto.randomUUID().length>0)}catch(e){this._supportsRandomUUID=!1}return this._supportsRandomUUID}static get storageAvailable(){let e,n;try{return e=localStorage,n="__storage_test__",e.setItem(n,n),e.removeItem(n),!0}catch(n){return n instanceof DOMException&&(22===n.code||1014===n.code||"QuotaExceededError"===n.name||"NS_ERROR_DOM_QUOTA_REACHED"===n.name)&&0!==e.length}}static setLocalStorageItem(e,n){this.storageAvailable&&localStorage.setItem(e,n)}static getLocalStorageItem(e){return this.storageAvailable&&localStorage.getItem(e)}static removeLocalStorageItem(e){this.storageAvailable&&localStorage.removeItem(e)}static searchParam(e,n=null,r=document.location.search){const i=new RegExp(`[?&]${e}=?([^&]*)`),o=r.match(i);return o&&o[1]||n}static getCookie(e){const n=encodeURIComponent(e)+"=",r=document.cookie.split(";");for(let e=0;e<r.length;e++){let i=r[e];for(;" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(n))return decodeURIComponent(i.substring(n.length,i.length))}return""}static download(e,n){const r=document.createElement("a");r.download=e,r.href=n||e,r.style.cssText="display:none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}static downloadBlob(e,n){const r=globalThis.URL.createObjectURL(e);this.download(n,r),globalThis.URL.revokeObjectURL(r)}static get queryString(){var e;const n=new URL(globalThis.location.href).searchParams;return null==(e=Object.fromEntries)?void 0:e.call(Object,n.entries())}static copyToClipboard(e){let n=!0;const r=document.createElement("textarea");r.value=e,r.style.height=r.style.width=0,document.body.appendChild(r),r.select();try{document.execCommand("copy")}catch(e){n=!1}return r.remove(),n}static isBryntumOnline(e){return e=Array.isArray(e)?e:[e],Boolean(/^(www\.)?bryntum\.com/.test(globalThis.location.host)||(null==e?void 0:e.some((e=>null!=this.queryString[e]))))}static get isCSP(){const{bryntum:e,document:n}=globalThis;return null==e.CSP&&(e.CSP=Boolean(n.querySelector('meta[http-equiv="Content-Security-Policy"]'))),e.CSP}static async setupClipboard(){return globalThis.bryntum.clipboard||(globalThis.bryntum.clipboard={hasNativeAccess:!0,async writeText(e,n){if(n&&this.hasNativeAccess)try{await navigator.clipboard.writeText(e)}catch(e){this.hasNativeAccess=!1}this._content=e},async readText(e){if(e&&this.hasNativeAccess)try{return await navigator.clipboard.readText()}catch(e){this.hasNativeAccess=!1}return this._content}}),globalThis.bryntum.clipboard}static async writeToClipboard(e,n=!0){const r=await this.setupClipboard();return await r.writeText(e,n)}static async readFromClipboard(e=!0){const n=await this.setupClipboard();return await n.readText(e)}};__publicField(c,"supportsPointerEvents",Boolean(globalThis.PointerEvent||globalThis.MSPointerEvent)),__publicField(c,"supportsPointerEventConstructor","undefined"!=typeof PointerEvent),__publicField(c,"PointerEventConstructor",globalThis.PointerEvent||globalThis.CustomEvent),c.isBrowserEnv&&c.cacheFlags(),c._$name="BrowserHelper";var d=/([a-z])([A-Z])/g,u=/[\n\r]/g,h=/[.*+?^${}()|[\]\\]/g,g=/[&<]/,p=/(^[^a-z]+[^\w]+)/gi,m=/\s+/,f=/^[^a-z]+|[^\w:.-]+/gi,htmlDecoder=(e,n)=>o[n.toLowerCase()]||String.fromCharCode(parseInt(n.substr(2),10)),htmlEncoder=(e,n)=>i[n],hyphenateCamelLetters=(e,n,r)=>`${n}-${r.toLowerCase()}`,separateCamelLetters=(e,n,r)=>`${n} ${r.toLowerCase()}`,replaceNonIdChar=e=>e?`_x${[...e].map((e=>e.charCodeAt(0).toString(16))).join("")}`:"__blank__",b={},v={},y=class{static capitalize(e){return e&&e[0].toUpperCase()+e.substr(1)}static uncapitalize(e){return e&&e[0].toLowerCase()+e.substr(1)}static hyphenate(e){const n=b[e];return n||(b[e]=e.replace(d,hyphenateCamelLetters))}static separate(e){const n=v[e];return n||(v[e]=this.capitalize(e.replace(d,separateCamelLetters)))}static createId(e){return String(e).replace(p,replaceNonIdChar)}static makeValidDomId(e,n=""){return null==e?null:String(e).replace(f,n)}static escapeRegExp(e,n){let r=e.replace(h,"\\$&");return void 0!==n&&(r=new RegExp(r,n)),r}static decodeHtml(e){return e&&String(e).replace(a,htmlDecoder)}static encodeHtml(e=""){return e&&String(e).replace(s,htmlEncoder)}static encodeHtmlBR(e){var n;return null==(n=y.encodeHtml(e))?void 0:n.replace(u,"<br>")}static isHtml(e){return"string"==typeof e&&g.test(e||"")}static initHtmlEntities(e){e=e||{"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"};const n=Object.keys(e);i=e,o=n.reduce(((n,r)=>(n[e[r]]=r,n)),{}),s=new RegExp(`([${n.map((e=>"[-]".includes(e)?"\\"+e:e)).join("")}])`,"g"),a=new RegExp(`(${Object.values(e).join("|")}|&#[0-9]+;)`,"ig")}static safeJsonParse(e){let n=null;try{n=JSON.parse(e)}catch(e){}return n}static safeJsonStringify(e,n=null,r=null){let i=null;try{i=JSON.stringify(e,n,r)}catch(e){}return i}static joinPaths(e,n="/"){return e.join(n).replace(new RegExp("\\"+n+"+","g"),n)}static split(e,n=m){let r=e;return"string"==typeof r&&(r=e.trim(),r=r?r.split(n):[]),r}static xss(e,...n){const r=[];let i=n.length;for(r[i]=e[i];i-- >0;)r[i]=e[i]+y.encodeHtml(n[i]);return r.join("")}static xssBR(e,...n){const r=[];let i=n.length;for(r[i]=e[i];i-- >0;)r[i]=e[i]+y.encodeHtmlBR(n[i]);return r.join("")}static toJavaScriptValue(e,n){const r=M.typeOf(e);if("boolean"===r||"string"===r||"number"===r||null===e)return y.safeJsonStringify(e);if(e===globalThis)return"window";if("date"===r)return`new Date(${e.getFullYear()}, ${e.getMonth()}, ${e.getDate()}, ${e.getHours()}, ${e.getMinutes()}, ${e.getSeconds()}, ${e.getMilliseconds()})`;if("array"===r)return`[${e.map((e=>y.toJavaScriptValue(e,n)))}]`;if("object"===r||"instance"===r)return this.toJavaScriptString(e,n);if("function"===r){let n=e.toString();return n.match(/^async (\w+?)\(/)?n=n.replace(/^async (\w+?)\(/,"async function("):!n.startsWith("async(")&&n.match(/^(\w+?)\(/)&&(n=n.replace(/^(\w+?)\(/,"function(")),n}return"class"===r?e.toJavaScriptValue?e.toJavaScriptValue(n):Object.prototype.hasOwnProperty.call(e,"$name")?e.$name:e.name:void 0}static toJavaScriptString(e,n={}){var r;const i=null!=(r=n.level)?r:0;return"{\n"+Object.keys(e).map((r=>" ".repeat(2*(i+1))+(r.match(/[- *]/)?`"${r}"`:r)+`: ${y.toJavaScriptValue(e[r],{...n,level:i+1})}`)).join(",\n")+"\n"+" ".repeat(2*i)+"}"}static encodeAttributeSelector(e,n){return`[${e}="${String(n).replace(/["\\]/g,"\\$&")}"]`}static generateUUID(){var e;return c.supportsRandomUUID?globalThis.crypto.randomUUID():(null==(e=globalThis.crypto)?void 0:e.getRandomValues)?([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^globalThis.crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))):`${Date.now()}-${++y.fakeNodeUUIDIndex}`}},w=y;__publicField(w,"fakeNodeUUIDIndex",0),w.initHtmlEntities(),w._$name="StringHelper";var{hasOwnProperty:C,toString:S}=Object.prototype,{isFrozen:x}=Object,D=/\s*<\s*/,E=/\s*>\s*/,R={},k={},T=Object.freeze({}),M=class{static assign(e,...n){for(let r,i,o=0;o<n.length;o++)if(r=n[o],r)for(i in r)e[i]=r[i];return e}static assignIf(e,...n){for(let r,i,o=0;o<n.length;o++)if(r=n[o],r)for(i in r)i in e&&void 0!==e[i]||(e[i]=r[i]);return e}static blend(e,n,r){r=r||R,e=e||{};const{clone:i=M.clone,merge:o=M.blend}=r;if(Array.isArray(n)){if(n.length>1)return n.forEach((n=>{e=M.blend(e,n,r)})),e;n=n[0]}if(n){let s,a,l;for(a in n)l=n[a],l&&M.isObject(l)&&(s=e[a],r.key=a,s&&M.isObject(s)?(x(s)&&(e[a]=s=i(s,r)),l=o(s,l,r)):l=x(l)?l:i(l,r)),e[a]=l}return e}static clone(e,n){let r,i=e;if(e&&"object"==typeof e){if(n&&"object"==typeof n&&n&&(n=null),M.isObject(e))if(e.skipClone)i=e;else for(r in i={},e)i[r]=M.clone(e[r]);else if(Array.isArray(e))for(i=[],r=e.length;r-- >0;)i[r]=M.clone(e[r]);else M.isDate(e)?i=new Date(e.getTime()):n&&(i=n(e))}return i}static createTruthyKeys(e){const n=w.split(e),r=n&&{};if(n)for(const e of n)e&&(r[e]=!0);return r}static getPath(e,n){return n.split(".").reduce(((e,n)=>(e||T)[n]),e)}static getPathDefault(e,n,r){const i=Array.isArray(n)?n:"string"==typeof n?n.split("."):[n],o=i.length-1;return i.reduce(((e,n,i)=>(r&&!(n in e)&&(e[n]=i===o?r:{}),(e||T)[n])),e)}static hasPath(e,n){return n.split(".").every((n=>n in e&&(e=e[n],!0)))}static getTruthyKeys(e){const n=[];for(const r in e)e[r]&&n.push(r);return n}static getTruthyValues(e){const n=[];for(const r in e)e[r]&&n.push(e[r]);return n}static isClass(e){var n;return"function"==typeof e&&(null==(n=e.prototype)?void 0:n.constructor)===e}static isDate(e){return Boolean(null==e?void 0:e.getUTCDate)&&"date"===M.typeOf(e)}static isPromise(e){if(Promise&&Promise.resolve)return Promise.resolve(e)===e||"function"==typeof(null==e?void 0:e.then);throw new Error("Promise not supported in your environment")}static isEmpty(e){if(e&&"object"==typeof e)for(const n in e)return!1;return!0}static isObject(e){const n=null==e?void 0:e.constructor;return Boolean(n?n===Object||n.getPrototypeOf&&n.prototype&&!Object.getPrototypeOf(n.prototype):e&&"object"==typeof e)}static isInstantiated(e){return!!e&&("object"==typeof e&&!M.isObject(e))}static merge(e,...n){return M.blend(e,n)}static mergeItems(e,n,r){let i,o,s,a,l,c,d;r=r||R;const{merge:u=M.blend}=r;if(e=e||{},Array.isArray(n))n.forEach((n=>{e=M.mergeItems(e,n,r)}));else if(n)for(l in n)if(d=n[l],i=null,l.includes(">")?([l,i]=l.split(E),o=0):l.includes("<")&&([i,l]=l.split(D),o=1),l in e)d&&e[l]&&u&&(r.key=l,d=u(e[l],d,r)),e[l]=d;else if(i){if(!a){a=new Map,s=0;for(const n in e)a.set(n,s++)}if(s=a.get(i),e[l]=d,null==s&&o)s=a.size;else{c=c||[],s=(s||0)+o;for(const e of a){const[n,r]=e;s<=r&&(c&&(c[a.size-r-1]=n),a.set(n,r+1))}if(c)for(;c.length;){const n=c.pop(),r=e[n];delete e[n],e[n]=r}}a.set(l,s)}else e[l]=d,null==a||a.set(l,a.size);return e}static setPath(e,n,r){return n.split(".").reduce(((e,n,i,o)=>i===o.length-1?e[n]=r:(e[n]instanceof Object||(e[n]={}),e[n])),e),e}static typeOf(e){let n,r;return null===e?r="null":e!=e?r="nan":(r=typeof e,"object"===r?e.isBase?r="instance":Array.isArray(e)?r="array":(r=k[n=S.call(e)])||(k[n]=r=n.slice(8,-1).toLowerCase()):"function"===r&&e.isBase&&(r="class")),r}};Object.defineProperty(M,"hasOwn",{value:Object.hasOwn||((e,n)=>C.call(e,n))}),M._$name="Objects";var A=class{static setVersion(e,n){e=e.toLowerCase(),I[e]={version:n,isNewerThan:e=>A.semanticCompareVersion(e,n,"<"),isOlderThan:e=>A.semanticCompareVersion(e,n,">")};let r="";"undefined"!=typeof productName&&(r=productName);const i=`${r}.${e}${n.replace(/\./g,"-")}`;if(c.isBrowserEnv&&!globalThis.bryntum.silenceBundleException)if(!0===globalThis.bryntum[i]){if(!this.isTestEnv){let n=r||e;"core"===n&&(n="grid");let i=w.capitalize(n);throw"schedulerpro"===n&&(i="SchedulerPro"),new Error(`The Bryntum ${i} bundle was loaded multiple times by the application.\n\nCommon reasons you are getting this error includes:\n\n* Imports point to different types of the bundle (e.g. *.module.js and *.umd.js)\n* Imports point to both sources and bundle\n* Imports do not use the shortest relative path, JS treats them as different files\n* Cache busters differ between imports, JS treats ${n}.module.js?1 and ${n}.module.js?2 as different files\n* Imports missing file type, verify they all end in .js\n\nSee https://bryntum.com/products/${n}/docs/guide/${i}/gettingstarted/es6bundle#troubleshooting for more information\n\n`)}globalThis.BUNDLE_EXCEPTION=!0}else globalThis.bryntum[i]=!0}static getVersion(e){if(e=e.toLowerCase(),!I[e])throw new Error("No version specified! Please check that you import VersionHelper correctly into the class from where you call `deprecate` function.");return I[e].version}static semanticCompareVersion(e,n,r="="){n=n||"";const i=(e=e||"").split(/[-.]/),o=n.split(/[-.]/),s=r.includes("<"),normalizeArr=(e,n)=>{const r=["rc","beta","alpha"],i=e.map((e=>{if(r.includes(e))return-r.indexOf(e)-2;const n=Number.parseInt(e);return Number.isNaN(n)?-r.length:n}));for(;i.length<n;)i.push(-1);return i},compareArr=()=>{const e=Math.max(i.length,o.length),n=normalizeArr(i,e),r=normalizeArr(o,e);for(let i=0;i<e;i++)if(n[i]!==r[i])return s?n[i]<r[i]:n[i]>r[i];return!0};switch(r){case"=":return e===n;case"<=":case">=":return e===n||compareArr();case"<":case">":return e!==n&&compareArr()}return!1}static checkVersion(e,n,r){return A.semanticCompareVersion(I.getVersion(e),n,r)}static deprecate(e,n,r){if(!I.checkVersion(e,n,"<"))throw new Error(`Deprecated API use. ${r}`);console.warn(`Deprecation warning: You are using a deprecated API which will change in v${n}. ${r}`)}static get isTestEnv(){var e,n,r;const i=Boolean(null==(e=globalThis.bryntum)?void 0:e.isTestEnv);try{return i||Boolean(null==(r=null==(n=globalThis.parent)?void 0:n.bryntum)?void 0:r.isTestEnv)}catch(e){return i}}static get isDebug(){return!1}},I=A;c.isBrowserEnv&&(I.isTestEnv&&(c._isHoverableDevice=!0),globalThis.bryntum=Object.assign(globalThis.bryntum||{},{getVersion:I.getVersion.bind(I),checkVersion:I.checkVersion.bind(I),deprecate:I.deprecate.bind(I),license:"182a63af-4479-11eb-b269-d094663d5c88"})),A._$name="VersionHelper";var{defineProperty:F,getOwnPropertyDescriptor:P}=Reflect,{hasOwnProperty:O,toString:L}=Object.prototype,_=Symbol("instanceProperties"),$=Symbol("configuring"),j=Symbol("lazyConfigValues"),z=L.call(new Date),B=/\s+/,createClsProps=(e,n)=>(e[n]=1,e),H=class{static get(e,n){const{cache:r}=this,i=r[e]||(r[e]=new H(e));let o,s=i;return n&&(o=H.makeCacheKey(e,n),(s=o&&r[o])||(s=i.extend(n),o&&(r[o]=s))),s}constructor(e){const n=this,r=e[0].toUpperCase()+e.substr(1);n.base=n,n.name=e,n.field="_"+e,n.capName=r,n.changer="change"+r,n.initializing="initializing"+r,n.updater="update"+r}get descriptor(){let e=this._descriptor;return e&&O.call(this,"_descriptor")||(this._descriptor=e=this.makeDescriptor()),e}get initDescriptor(){let e=this._initDescriptor;return e&&O.call(this,"_initDescriptor")||(this._initDescriptor=e=this.makeInitter()),e}equal(e,n){return e===n}extend(e){const n=Object.assign(Object.create(this),e),{equal:r,merge:i}=e,{equalityMethods:o}=H;return"string"==typeof r&&(r.endsWith("[]")?n.equal=H.makeArrayEquals(o[r.substr(0,r.length-2)]):n.equal=o[r]),"string"==typeof i&&(n.merge=H.mergeMethods[i]),n}define(e){const n=P(e,this.name);let r=this.descriptor;n&&n.get&&(r=Object.assign({},r),r.get=n.get),F(e,this.name,r)}defineInitter(e,n){const{name:r}=this,i=e[_];let o,s;i[r]||!(s=P(e,r))||"value"in s||(i[r]=s),F(e,r,this.initDescriptor),this.lazy&&(o=e[j]||(e[j]=new Map),o.set(r,n))}static makeArrayEquals(e){return(n,r)=>{let i,o=n&&r&&n.length===(i=r.length);if(o&&Array.isArray(n)&&Array.isArray(r))if(e)for(;o&&i-- >0;)o=e(n[i],r[i]);else for(;o&&i-- >0;)o=n[i]===r[i];else o=e?e(n,r):n===r;return o}}static makeCacheKey(e,n){const r=Object.keys(n).sort();for(let e,i,o,s=r.length;s-- >0;)if(o=n[e=r[s]],null==o&&!1===o)r.splice(s,1);else{if(i=typeof o,"function"===i)return null;"string"===i?r[s]=`${e}:"${o}"`:"number"===i&&(r[s]=`${e}:${o}`)}return r.length?`${e}>${r.join("|")}`:e}makeDescriptor(){const e=this,{base:n,field:r,changer:i,updater:o,name:s}=e;return n!==e&&n.equal===e.equal?n.descriptor:{get(){var e;return null==(e=this.configObserver)||e.get(s,this),this[r]},set(n){var a,l;const c=this;let d,u,h=c[r];if("string"==typeof n){let e=n;n.startsWith("up.")?e=null==(a=c.owner)?void 0:a.resolveProperty(n.substr(3)):n.startsWith("this.")&&(e=c.resolveProperty(n.substr(5))),void 0!==e&&"function"!=typeof e&&(n=e)}c[i]&&(d=void 0===(u=c[i](n,h)),d||(n=u,h=c[r])),d||(e.equal===N?h===n:e.equal(h,n))||(c[r]=n,d=!0,null==(l=c[o])||l.call(c,n,h)),!d||c.isDestroyed||c.onConfigChange.$nullFn||c.onConfigChange({name:s,value:n,was:h,config:e})}}}makeInitter(){const e=this;return e!==e.base?e.lazy?e.makeLazyInitter():e.base.initDescriptor:e.makeBasicInitter()}makeBasicInitter(){const e=this,{initializing:n,name:r}=e;return{configurable:!0,get(){const i=this;return e.removeInitter(i),i[n]=!0,i[r]=i[$][r],i[n]=!1,i.configDone[r]=!0,i[r]},set(n){e.removeInitter(this),this.configDone[r]=!0,this[r]=n}}}makeLazyInitter(){const e=this,{initializing:n,name:r}=e;return{configurable:!0,get(){const i=this,o=i[j].get(r);return e.removeInitter(i),i.isDestroying||(i[n]=!0,i[r]=o,i[n]=!1),i[r]},set(n){e.removeInitter(this),this[r]=n}}}removeInitter(e){const{name:n}=this,r=e[_][n],i=e[j];r?F(e,n,r):delete e[n],(null==i?void 0:i.delete(n))&&!i.size&&delete e[j]}setDefault(e,n){F(e.prototype,this.field,{configurable:!0,writable:!0,value:n})}merge(e,n){if(n&&e&&M.isObject(e)){if(n.isBase)return n.setConfig(e);M.isObject(n)&&(e=M.merge(M.clone(n),e))}return e}},{prototype:V}=H,{equal:N}=V;H.symbols={configuring:$,instanceProperties:_,lazyConfigs:j},H.cache=Object.create(null),H.equalityMethods={array:H.makeArrayEquals(),date:(e,n)=>e===n||!(!e||!n||L.call(e)!==z||L.call(n)!==z)&&e.getTime()===n.getTime(),strict:H.equal=N},H.mergeMethods={distinct(e,n){let r=n?n.slice():[];if(null!=e)if(M.isObject(e))if(void 0===n)r=e;else{let n,i;for(n in e)i=r.indexOf(n),e[n]?i<0&&r.push(n):i>-1&&r.splice(i,1)}else Array.isArray(e)?e.forEach((e=>!r.includes(e)&&r.push(e))):r.includes(e)||r.push(e);return r},merge:H.merge=V.merge,classList(e,n){if("string"==typeof e){if(!e.length)return n;e=e.split(B)}return Array.isArray(e)&&(e=e.reduce(createClsProps,{})),H.merge(e,n)},objects:(e,n)=>!0===e?n||{}:H.merge(e,n),replace:e=>e,items:(e,n,r,i)=>i?M.mergeItems(n,e,{merge:(e,n)=>V.merge(n,e)}):V.merge(e,n)},Object.assign(V,{_descriptor:null,_initDescriptor:null,lazy:!1,nullify:!1,render:!1}),H._$name="Config";var{getPrototypeOf:q}=Object,{hasOwn:W}=M,{defineProperty:U}=Reflect,G=Symbol("classMetaData"),Y=Symbol("mixinTag"),K=Symbol("originalConfig"),X=(Symbol("createdAt"),H.symbols.configuring),Z=H.symbols.instanceProperties,Q=H.symbols.lazyConfigs,J={merge:"replace",simple:!0},emptyFn=()=>{},newMeta=e=>new class{constructor(e){e&&Object.assign(this,e)}getInherited(e,n=!0){var r;let i=this[e];return e in this||(i=null==(r=this.super)?void 0:r.getInherited(e,n),(i||n)&&(this[e]=i=Object.create(i||null))),i}}(e),ee={},te=Object.freeze({}),ne=Object.freeze([]),re=class{static get isBase(){return!0}get isBase(){return!0}static get declarable(){return["declarable","configurable","defaultConfig","properties","prototypeProperties"]}constructor(...e){const n=this,r=n.constructor;n.$meta.class!==r&&r.$meta,n.construct(...e),n.afterConstruct(),n.isConstructing=!1}static new(...e){return new this((e=e.filter((e=>e))).length>1?this.mergeConfigs(...e):e[0])}construct(...e){null!==e[0]&&this.configure(...e),this.afterConfigure()}static destroy(...e){const shredder=e=>{(null==e?void 0:e.destroy)?e.destroy():Array.isArray(e)&&e.forEach(shredder)};shredder(e)}destroy(){const e=this,{id:n}=e;e.isDestroying=!0,e.destroy=emptyFn,e.doDestroy(),Object.setPrototypeOf(e,null);for(const n in e)"destroy"!==n&&"isDestroying"!==n&&delete e[n];delete e[K],e.isDestroyed=!0,e.id=n}_thisIsAUsedExpression(e){}static get $$name(){return W(this,"$name")&&this.$name||W(this,"_$name")&&this._$name||this.name}get $$name(){return this.constructor.$$name}startConfigure(e){}finishConfigure(e){}afterConfigure(){}afterConstruct(){}callback(e,n,r=ne){const{handler:i,thisObj:o}=this.resolveCallback(e,"this"===n?this:n)||te;return null==i?void 0:i.apply(o,r)}resolveProperty(e){let n=this;for(;n;){if(M.hasPath(n,e))return M.getPath(n,e);n=n.owner}}resolveCallback(e,n=this,r=!0){if(null==e?void 0:e.substring){if(e.endsWith("?")&&(r=!1,e=e.substring(0,e.length-1)),e.startsWith("up.")){for(e=e.substring(3),n=this.owner;n&&!n[e];n=n.owner);if(!n)return}else e.startsWith("this.")&&(e=e.substring(5),n=this);if(!(n&&n instanceof Object))return;e=n[e]}if("function"==typeof e)return{handler:e,thisObj:n};if(r)throw new Error(`No method named ${e} on ${n.$$name||"thisObj object"}`)}bindCallback(e,n=this){if(e){const{handler:r,thisObj:i}=this.resolveCallback(e,n);if(r)return r.bind(i)}}delay(e,n,r=e.name||e){e=this.setTimeout?e:e.bind(this);return(this.setTimeout?this:globalThis)["number"==typeof n?"setTimeout":"requestAnimationFrame"](e,n,r)}doDestroy(){const e=this,{nullify:n}=e.$meta;if(n)for(let r=0;r<n.length;++r)null!=e[n[r].field]&&(e[n[r].name]=null)}destroyProperties(...e){var n,r;const i=this;let o;for(o of e)!(o in i)||i[X]&&i[X][o]||(null==(r=null==(n=i[o])?void 0:n.destroy)||r.call(n),delete i[o])}configure(e={}){const n=this,r=n.$meta,{beforeConfigure:i}=e,o=r.configs,s=n.getDefaultConfiguration();let a,l,c;for(l in n.initialConfig=e,n.isConfiguring=!0,Object.assign(n,n.getProperties()),e)c=e[l],a=o[l],s[l]=a?a.merge(c,s[l],null,r):c;i&&(delete s.beforeConfigure,i(n,s)),n.setConfig(n[K]=s,!0),n.isConfiguring=!1}getConfig(e){return this[e]}setConfig(e,n){var r;const i=this,o=i[X],s=o?i.configDone:i.configDone={},a=i.$meta.configs;let l,c;for(c in i[Z]={},i[X]=o?Object.setPrototypeOf(Object.assign({},e),o):e,e)null!=e[c]||W(e,c)?(l=a[c]||H.get(c),l.defineInitter(i,e[c]),n||(s[c]=!1)):s[c]=!0;for(c in n&&i.startConfigure(e),e)s[c]||(null==(r=a[c])?void 0:r.lazy)||(i[c]=e[c]);return o?i[X]=o:delete i[X],n&&i.finishConfigure(e),i}hasConfig(e){var n;const r=this,i=r[X];return Boolean(null!=r["_"+e]||null!=(null==(n=r[Q])?void 0:n.get(e))||!r.configDone[e]&&i&&(null!=i[e]||W(i,e)))}peekConfig(e){const n=this,r=n[Q],i=n[X];if(null==r?void 0:r.has(e))return r.get(e);if(i&&e in i){if(n.configDone[e])return n[e];if(null!=i[e]||W(i,e))return i[e]}}triggerConfig(e){const n=this,{configDone:r}=n,i=n[Q],o=n[X],s=(null==i?void 0:i.has(e))||o&&(null!=o[e]||W(o,e))?!r[e]:null;return s&&n.getConfig(e),s}triggerConfigs(e){const n=this,r=n.$meta.configs,i=n[Q],o=i?[...i.keys()].filter((n=>r[n].lazy===e)):ne;for(const e of o)n.triggerConfig(e);return o.length?o:null}onConfigChange(){}get config(){const e={},n=this[K];for(const r in n)e[r]=n[r];return e}static processConfigValue(e,n){if(e===globalThis)return globalThis;if(Array.isArray(e))return e.map((e=>re.processConfigValue(e,n)));if(e instanceof re){if(n.visited.has(e))return;return e.getCurrentConfig(n)}if(e instanceof HTMLElement||e instanceof DocumentFragment)return null;if(M.isObject(e)){const r={};for(const i in e)"owner"!==i&&(r[i]=re.processConfigValue(e[i],n));return r}return e}getConfigValue(e,n){var r;const i=this,o=i[Q];return(null==(r=i.$meta.configs[e])?void 0:r.lazy)?(null==o?void 0:o.has(e))?re.processConfigValue(o.get(e),n):void 0:re.processConfigValue(i[e],n)}preProcessCurrentConfigs(){}getCurrentConfig(e={}){const n=this,r="all"===e.configs?n.config:M.clone(n.initialConfig),i=e.visited||(e.visited=new Set),o=e.depth||(e.depth=0),s={};if(!i.has(n)){i.add(n),this.preProcessCurrentConfigs(r);for(const i in r){const r=n.getConfigValue(i,{...e,depth:o+1});void 0!==r&&(s[i]=r)}return s}}getConfigString(e={}){return w.toJavaScriptString(this.getCurrentConfig(e))}getTestCase(e={}){const n=this.isGantt?"Gantt":this.isSchedulerPro?"SchedulerPro":this.isCalendar?"Calendar":this.isScheduler?"Scheduler":this.isGrid?"Grid":this.isTaskBoard?"TaskBoard":null;if(n){const r=n.toLowerCase(),i=`../../build/${r}.module.js`;let o,s;"static"===e.import?(o=`import * as module from "${i}";Object.assign(window, module);`,s=""):(o=`import("${i}").then(module => { Object.assign(window, module);\n`,s="});");const a=A.getVersion(r);return a&&(o+=`\nconsole.log('${n} ${a}');\n`),`${o}      \nconst ${r} = new ${n}(${this.getConfigString(e)});\n${s}`}}downloadTestCase(e={}){e.output="return";const n=this.getTestCase(e);c.download("app.js","data:application/javascript;charset=utf-8,"+escape(n))}static initClass(){return this.$meta.class}static get $meta(){const e=this;let n=e[G];return W(e,G)||(e[G]=n=newMeta(),n.class=e,e.setupClass(n)),n}static onClassMixedIn(){}static mergeConfigs(e,...n){const r=this.$meta.configs,i=M.clone(e)||{};let o,s,a,l;for(s=0;s<n.length;++s)if(o=n[s],o)for(a in o)l=o[a],r[a]?l=r[a].merge(l,i[a]):i[a]&&l&&(l=H.merge(l,i[a])),i[a]=l;return i}static mixin(...e){let n,r=this;for(n=0;n<e.length;++n){const i=e[n],o=i[Y]||(i[Y]=Symbol("mixinTag"));r[o]||(r=i(r),r[o]=!0,W(r,"onClassMixedIn")&&r.onClassMixedIn())}return r}static setupClass(e){var n;const r=e.class,i=q(r).$meta,o=r.$$name,s=i.names,a=r.prototype;if(U(a,"$meta",{value:e}),Object.assign(e,{super:i,config:Object.create(i.config),configs:Object.create(i.configs),declarables:i.declarables,forkConfigs:i.forkConfigs,hierarchy:Object.freeze([...i.hierarchy,r]),names:s.includes(o)?s:Object.freeze([...s,o]),properties:i.properties,nullify:null==(n=i.nullify)?void 0:n.slice()}),s!==e.names){const e=`is${o}`,defineIsProperty=n=>{W(n,e)||U(n,e,{get:()=>(W("object"==typeof n?n.constructor:n,"$name")||console.warn(`$name static property or getter required for class ${o} to provide class name for minified sources.`+(A.isTestEnv?"":"\nhttps://bryntum.com/products/grid/docs/api/Core/widget/Widget#property-$name-static")),!0)})};defineIsProperty(a),defineIsProperty(r)}for(let n,i,o=0;o<e.declarables.length;++o)n=e.declarables[o],W(r,n)&&(i=ee[n]||(ee[n]=`setup${w.capitalize(n)}`),r[i](r,e))}static setupConfigs(e,n,r){const i=e.config,o=e.configs,s=e.class,a=e.super;let l,c,d,u,h,g,{nullify:p}=e;for(const m in n)h=n[m],r?(l=o[m])?h=l.merge(h,i[m],e,a):l=H.get(m,J):(c=d=u=void 0,h&&"object"==typeof h&&"$config"in h&&(d=h.$config,d&&!M.isObject(d)&&(d=M.createTruthyKeys(d)),u="default"in h,c=u?h.default:c,h=h.value),(l=o[m])?(g=l.nullify,d&&(l=l.extend(d)),h=l.merge(h,i[m],e,a)):(l=H.get(m,d),l.define(s.prototype),u=!(l.field in s.prototype),g=!1),u&&l.setDefault(s,c),l.nullify&&!g&&(p||(p=e.nullify||(e.nullify=[]))).push(l)),h&&(M.isObject(h)||Array.isArray(h))&&!Object.isFrozen(h)&&(e.forkConfigs=!0),o[m]=l,i[m]=h}static setupConfigurable(e,n){e.setupConfigs(n,e.configurable,!1)}static setupDefaultConfig(e,n){e.setupConfigs(n,e.defaultConfig,!0)}static setupDeclarable(e,n){const r=e.declarable;let i,o,s=n.declarables;for(o=0;o<r.length;++o)s.includes(r[o])||(i||(n.declarables=i=s=s.slice()),s.push(r[o]))}static setupProperties(e,n){n.properties=n.super.properties.slice(),n.properties.push(e),Object.freeze(n.properties)}static setupPrototypeProperties(e){Object.assign(e.prototype,e.prototypeProperties)}getDefaultConfiguration(){return this.constructor.getDefaultConfiguration()}static getDefaultConfiguration(){const e=this.$meta,n=e.forkConfigs?re.fork(e.config):Object.create(e.config);if(A.isTestEnv&&c.isBrowserEnv&&n.testConfig&&globalThis.__applyTestConfigs)for(const e in n.testConfig)n[e]=n.testConfig[e];return n}static fork(e){let n,r,i=e;if(e&&M.isObject(e)&&!Object.isFrozen(e))for(n in i=Object.create(e),e)r=e[n],r&&(M.isObject(r)?i[n]=re.fork(r):Array.isArray(r)&&(i[n]=r.slice()));return i}getProperties(){const e=this.$meta.properties,n={};for(let r=0;r<e.length;r++)Object.assign(n,e[r].properties);return n}static get superclass(){return q(this)}classHierarchy(e){const n=this.$meta.hierarchy,r=e?n.indexOf(e):0;return r>0?n.slice(r):n}static isOfTypeName(e){return this.$meta.names.includes(e)}detachListeners(e){let n=this.$detachers;if(n=null==n?void 0:n[e],n)for(;n.length;)n.pop()()}trackDetacher(e,n){const r=this.$detachers||(this.$detachers={});(r[e]||(r[e]=[])).push(n)}untrackDetachers(e){const n=this.$detachers;if(n)for(const r in n){const i=n[r];for(let n=i.length;n-- >0;)i[n].eventer===e&&i.splice(n,1)}}},ie=re.prototype;ie.onConfigChange.$nullFn=emptyFn.$nullFn=!0,re[G]=ie.$meta=newMeta({class:re,config:Object.freeze({}),configs:Object.create(null),declarables:re.declarable,forkConfigs:!1,hierarchy:Object.freeze([re]),names:Object.freeze(["Base"]),nullify:null,properties:Object.freeze([]),super:null}),Object.assign(ie,{$detachers:null,configObserver:null,isConstructing:!0,isDestroyed:!1,isDestroying:!1}),re.emptyFn=emptyFn,A.setVersion("core","5.3.7"),re._$name="Base";var oe=class{static clean(e){return e.reduce(((e,n)=>(null==n||Array.isArray(n)&&0===n.length||""===n||e.push(n),e)),[])}static from(e,n,r){const i=[];if(e)for(const o of e)n&&!n(o)||i.push(r?r(o):o);return i}static remove(e,...n){let r,i,o=!1;n=n[0]instanceof Set?[...n[0]]:n;for(let s=0;s<n.length;s++)i=n[s],-1!==(r=e.indexOf(i))&&(e.splice(r,1),o=!0);return o}static findInsertionIndex(e,n,r=this.lexicalCompare,i){const o=n.length;let s,a;return i<o&&(s=i>0?r(n[i-1],e):0,a=i<o-1?r(e,n[i]):0,s<1&&a<1)?i:this.binarySearch(n,e,r)}static findLast(e,n,r){for(let{length:i}=e,o=i-1;o>=0;o--)if(n.call(r,e[o],o,e))return e[o]}static binarySearch(e,n,r=0,i=e.length,o=this.lexicalCompare){const s=e.length;let a,l;for(r instanceof Function?(o=r,r=0):i instanceof Function&&(o=i,i=s),--i;r<=i;)a=r+i>>1,l=o(n,e[a]),l>=0?r=a+1:l<0&&(i=a-1);return r}magnitudeCompare(e,n){return e<n?-1:e>n?1:0}lexicalCompare(e,n){return(e=String(e))<(n=String(n))?-1:e>n?1:0}static fill(e,n={},r=null){const i=[],o=Array.isArray(n)?n:[n];for(let n=0;n<e;n++)for(const e of o){const o=Object.assign({},e);r&&r(o,n),i.push(o)}return i}static populate(e,n,r=!1){const i=[];for(let o=0;o<e;o++)i.push(n(o+(r?1:0)));return i}static include(e,...n){for(const r of n)e.includes(r)||e.push(r)}static unique(e){return[...new Set(e)]}static allowNegative(e){return new Proxy(e,{get(e,n,r){if("string"!=typeof n)return Reflect.get(e,n,r);const i=Number(n);return Number.isNaN(i)?Reflect.get(e,n,r):e[i<0?e.length+i:i]},set(e,n,r,i){if("string"!=typeof n)return Reflect.set(e,n,r,i);const o=Number(n);return Number.isNaN(o)?Reflect.set(e,n,r,i):(e[o<0?e.length+o:o]=r,!0)}})}static delta(e,n,r=!1){if(!n)return r?{toAdd:e,toRemove:[],toKeep:[]}:{onlyInA:e,onlyInB:[],inBoth:[]};const i=[],o=[],s=new Set,a=new Set(n);for(let n=0;n<e.length;n++){const r=e[n];a.has(r)?s.add(r):i.push(r)}for(let e=0;e<n.length;e++){const r=n[e];s.has(r)||o.push(r)}return r?{toAdd:i,toRemove:o,toKeep:s}:{onlyInA:i,onlyInB:o,inBoth:[...s]}}static asArray(e){return null==e?e:e instanceof Set?Array.from(e):Array.isArray(e)?e:[e]}static identity(e){return e}static keyBy(e,n,r=oe.identity){const i="string"==typeof n?e=>null==e?void 0:e[n]:n,o="string"==typeof r?e=>null==e?void 0:e[r]:r;return e.reduce(((e,n)=>(e[i(n)]=o(n),e)),{})}static groupBy(e,n){const r="string"==typeof n?e=>null==e?void 0:e[n]:n;return e.reduce(((e,n)=>{const i=r(n);return(e[i]=e[i]||[]).push(n),e}),{})}};oe._$name="ArrayHelper";var se=/,\s*/,ae=Symbol("decompiled"),le=/^\s*(async\s+)?([a-z_]\w*)\s*=>([\s\S]+)$/i,ce=/^\s*(async\s*)?\s*\(((?:[a-z_]\w*(?:, [a-z_]\w*)*)?)\)\s+=>([\s\S]+)$/i,de=/^(\s*async)?(?:\s*function)?(?:\s*([a-z_]\w*))?\s*\(((?:[a-z_]\w*(?:, [a-z_]\w*)*)?)\)([\s\S]+)$/i,{hasOwnProperty:ue}=Object.prototype,he=class{static after(e,n,r,i,o){const s="string"==typeof r,a=!1!==(null==o?void 0:o.return),hook=(...n)=>{const o=hook.$nextHook.call(e,...n),l=(null==i?void 0:i.isDestroyed)?void 0:a?s?i[r](o,...n):r.call(i,o,...n):s?i[r](...n):r.call(i,...n);return void 0===l?o:l};return he.hookMethod(e,n,hook)}static before(e,n,r,i){const o="string"==typeof r,hook=(...n)=>{const s=(null==i?void 0:i.isDestroyed)?0:o?i[r](...n):r.call(i,...n);return!1===s?s:hook.$nextHook.call(e,...n)};return he.hookMethod(e,n,hook)}static curry(e){return function curried(...n){return n.length>=e.length?e.apply(this,n):function(...e){return curried.apply(this,n.concat(e))}}}static bindAll(e){for(const n in e)"function"==typeof e[n]&&(e[n]=e[n].bind(e))}static createInterceptor(e,n,r){return function(...i){const o=r||this;return!1!==n.call(o,...i)&&e.call(o,...i)}}static createSequence(e,n,r){return(...i)=>{const o=e.call(r,...i),s=n.call(r,...i);return void 0===s?o:s}}static createThrottled(e,n,r,i,o){let s,a,l=-Number.MAX_VALUE;const invoke=()=>{a=0,l=performance.now(),s.push.apply(s,i),e.apply(r,s)},result=function(...e){const c=performance.now()-l;s=e,c>=n?(clearTimeout(a),invoke()):(a||(a=setTimeout(invoke,n-c)),o&&(s.push.apply(s,i),o.apply(r,s)))};return result.cancel=()=>clearTimeout(a),result}static createBuffered(e,n,r,i){let o,s;const invoke=()=>{s=0,result.isPending=!1,o.push.apply(o,i),e.apply(r,o)},result=function(...e){o=e,s&&clearTimeout(s),result.isPending=!0,s=setTimeout(invoke,n)};return result.cancel=()=>{result.isPending=!1,clearTimeout(s)},result}static decompile(e){if(!(ae in e)){const n=e.toString();let r,i,o,s,a,l=le.exec(n);l?(r=[l[2]],i=l[3]):(l=ce.exec(n))?(a=l[2].trim(),r=a?a.split(se):[],i=l[3]):(l=de.exec(n))&&(o=l[2],a=l[3].trim(),r=a?a.split(se):[],i=l[4]),i=null==i?void 0:i.trim(),e[ae]=s=l&&{args:r,async:Boolean(l[1]),body:(null==i?void 0:i.startsWith("{"))?i.substring(1,i.length-1).trim():i},o&&(s.name=o)}return e[ae]}static hookMethod(e,n,r){return r.$nextHook=e[n],e[n]=r,()=>{var i;if(ue.call(e,n)){let o,s=e[n];if(s===r)(null==(i=Object.getPrototypeOf(e))?void 0:i[n])===r.$nextHook?delete e[n]:e[n]=r.$nextHook;else for(;o=null==s?void 0:s.$nextHook;s=o)if(o===r){s.$nextHook=r.$nextHook;break}}}}static noThrow(e,n,r){const i=e[n];e[n]=(...n)=>{try{return i.apply(e,n)}catch(e){return null==r?void 0:r(e)}}}static returnTrue(){return!0}static animate(e,n,r,i="linear"){let o=!1;const s=new Promise((s=>{const a=performance.now(),iterate=()=>{const l=Math.min((performance.now()-a)/e,1),c=r&&r.setTimeout?r:globalThis;o||!1===n.call(r,this.easingFunctions[i](l))&&s(),o||1===l?c.requestAnimationFrame((()=>s())):c.requestAnimationFrame(iterate)};iterate()}));return s.cancel=()=>(o=!0,!1),s}},ge=.5,pe=1.70158,me=7.5625,fe=1.525,be=2/2.75,ve=2.25/2.75,ye=1/2.75,we=1.5/2.75,Ce=2.5/2.75,Se=2.625/2.75,xe=.75,De=.9375,Ee=.984375;he.easingFunctions={linear:e=>e,easeInQuad:e=>Math.pow(e,2),easeOutQuad:e=>-(Math.pow(e-1,2)-1),easeInOutQuad:e=>(e/=ge)<1?ge*Math.pow(e,2):-.5*((e-=2)*e-2),easeInCubic:e=>Math.pow(e,3),easeOutCubic:e=>Math.pow(e-1,3)+1,easeInOutCubic:e=>(e/=ge)<1?ge*Math.pow(e,3):ge*(Math.pow(e-2,3)+2),easeInQuart:e=>Math.pow(e,4),easeOutQuart:e=>-(Math.pow(e-1,4)-1),easeInOutQuart:e=>(e/=ge)<1?ge*Math.pow(e,4):-.5*((e-=2)*Math.pow(e,3)-2),easeInQuint:e=>Math.pow(e,5),easeOutQuint:e=>Math.pow(e-1,5)+1,easeInOutQuint:e=>(e/=ge)<1?ge*Math.pow(e,5):ge*(Math.pow(e-2,5)+2),easeInSine:e=>1-Math.cos(e*(Math.PI/2)),easeOutSine:e=>Math.sin(e*(Math.PI/2)),easeInOutSine:e=>-.5*(Math.cos(Math.PI*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>0===e?0:1===e?1:(e/=ge)<1?ge*Math.pow(2,10*(e-1)):ge*(2-Math.pow(2,-10*--e)),easeInCirc:e=>-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-Math.pow(e-1,2)),easeInOutCirc:e=>(e/=ge)<1?-.5*(Math.sqrt(1-e*e)-1):ge*(Math.sqrt(1-(e-=2)*e)+1),easeOutBounce:e=>e<ye?me*e*e:e<be?me*(e-=we)*e+xe:e<Ce?me*(e-=ve)*e+De:me*(e-=Se)*e+Ee,easeInBack:e=>e*e*((pe+1)*e-pe),easeOutBack:e=>(e-=1)*e*((pe+1)*e+pe)+1,easeInOutBack:e=>{let n=1.70158;return(e/=ge)<1?ge*(e*e*((1+(n*=fe))*e-n)):ge*((e-=2)*e*((1+(n*=fe))*e+n)+2)},elastic:e=>-1*Math.pow(4,-8*e)*Math.sin((6*e-1)*(2*Math.PI)/2)+1,swingFromTo:e=>{let n=1.70158;return(e/=ge)<1?ge*(e*e*((1+(n*=fe))*e-n)):ge*((e-=2)*e*((1+(n*=fe))*e+n)+2)},swingFrom:e=>e*e*((pe+1)*e-pe),swingTo:e=>(e-=1)*e*((pe+1)*e+pe)+1,bounce:e=>e<ye?me*e*e:e<be?me*(e-=we)*e+xe:e<Ce?me*(e-=ve)*e+De:me*(e-=Se)*e+Ee,bouncePast:e=>e<ye?me*e*e:e<be?2-(me*(e-=we)*e+xe):e<Ce?2-(me*(e-=ve)*e+De):2-(me*(e-=Se)*e+Ee),easeFromTo:e=>(e/=ge)<1?ge*Math.pow(e,4):-.5*((e-=2)*Math.pow(e,3)-2),easeFrom:e=>Math.pow(e,4),easeTo:e=>Math.pow(e,.25)},he._$name="FunctionHelper";var{isArray:Re}=Array,{hasOwnProperty:ke}=Object.prototype,Te={thisObj:1,detachable:1,once:1,detacher:1,prio:1,args:1,expires:1,buffer:1,throttle:1,name:1,$internal:1},priorityComparator=(e,n)=>n.prio-e.prio,Events_default=e=>class Events extends(e||re){constructor(){super(...arguments),__publicField(this,"eventsSuspended",null)}static get $name(){return"Events"}static get declarable(){return["deprecatedEvents"]}static setupDeprecatedEvents(e,n){const r=n.getInherited("deprecatedEvents"),i=e.deprecatedEvents;for(const e in i)r[e.toLowerCase()]=r[e]=i[e]}static get configurable(){return{listeners:{value:null,$config:{merge(e,n){if(null!==e){if(!e)return n;n&&(e=e?[e]:[]).push[Re(n)?"apply":"call"](e,n)}return e}}},internalListeners:null,bubbleEvents:null}}destroy(){this.trigger("beforeDestroy"),super.destroy()}construct(e,...n){(this.configuredListeners=null==e?void 0:e.listeners)&&delete(e=M.assign({},e)).listeners,super.construct(e,...n),this.processConfiguredListeners()}processConfiguredListeners(){if(this.configuredListeners){const e=this,{isConfiguring:n}=e;e.isConfiguring=!1,e.listeners=e.configuredListeners,e.configuredListeners=null,e.isConfiguring=n}}doDestroy(){this.trigger("destroy"),this.removeAllListeners(!1),super.doDestroy()}static setupClass(e){super.setupClass(e),Events.prototype.onListen.$nullFn=!0,Events.prototype.onUnlisten.$nullFn=!0}addListener(e,n,r){if(Re(e)){for(let r=0,{length:i}=e;r<i;r++)this.addListener(e[r],n);return}const i=this,o=i.$meta.getInherited("deprecatedEvents");if("string"==typeof e)return i.addListener({[e]:n,detachable:!1!==n.detachable,thisObj:r});{n=e.thisObj=void 0!==e.thisObj?e.thisObj:n;for(const r in e)if(!Te[r]&&null!=e[r]){const s=r.toLowerCase(),a=null==o?void 0:o[s],l=i.eventListeners||(i.eventListeners={}),c=e[r],d=c.expires||e.expires,u={fn:"object"==typeof c?c.fn:c,thisObj:void 0!==c.thisObj?c.thisObj:n,args:c.args||e.args,prio:void 0!==c.prio?c.prio:void 0!==e.prio?e.prio:0,once:void 0!==c.once?c.once:void 0!==e.once&&e.once,buffer:c.buffer||e.buffer,throttle:c.throttle||e.throttle,$internal:e.$internal,catchAll:"catchAll"===r};if(a){const{product:e,invalidAsOfVersion:n,message:r}=a;A.deprecate(e,n,r)}if(d){const{alt:o}=d,a=o?d.delay:d,l=e.name||r,fn2=()=>{i.un(s,u),o&&!u.called&&i.callback(o,n)};i.isDelayable?i.setTimeout({fn:fn2,name:l,cancelOutstanding:!0,delay:a}):globalThis.setTimeout(fn2,a)}let h=l[s]||(l[s]=[]);h.$firing&&(l[s]=h=h.slice()),h.splice(oe.findInsertionIndex(u,h,priorityComparator,h.length),0,u),!i.onListen.$nullFn&&h.length<2&&i.onListen(s)}e.relayAll&&i.relayAll(e.relayAll),n&&n!==i&&i.attachAutoDetacher(e,n);const r=!1!==e.detachable,s=e.name,a=e.expires||r||s?()=>{i.isDestroyed||i.removeListener(e,n)}:null;if(a&&(a.eventer=i,a.listenerName=s,s&&(null==n?void 0:n.trackDetacher)&&n.trackDetacher(s,a),e.expires&&i.delay(a,isNaN(e.expires)?e.expires.delay:e.expires,s),r))return a}}on(e,n,r){return this.addListener(e,n,r)}ion(e){return e.$internal=!0,this.on(e)}un(...e){this.removeListener(...e)}updateInternalListeners(e,n){null==n||n.detach(),e&&(e.detach=this.ion(e))}get listeners(){return this.eventListeners}changeListeners(e){if(!this.isConfiguring){if(Array.isArray(e))for(let n=0,r=e[0],{length:i}=e;n<i;r=e[++n])"thisObj"in r||(e[n]=M.assign({thisObj:this},r));else e&&!("thisObj"in e)&&(e=M.assign({thisObj:this},e));return e}this.getConfig("internalListeners"),e&&this.on(e,this)}updateListeners(e,n){n&&this.un(n),e&&this.on(e)}removeListener(e,n=e.thisObj,r){const i=this;if("string"==typeof e)return i.removeListener({[e]:n},r);Object.entries(e).forEach((([e,r])=>{if(!Te[e]&&null!=r){e=e.toLowerCase();const o=i.eventListeners,s=i.findListener(e,r,n);if(s>=0){let n=o[e];n.length>1?(n.$firing&&(o[e]=n=n.slice()),n.splice(s,1)):(delete o[e],i.onUnlisten.$nullFn||i.onUnlisten(e))}}})),e.thisObj&&!e.thisObj.isDestroyed&&i.detachAutoDetacher(e)}findListener(e,n,r){var i;const o=null==(i=this.eventListeners)?void 0:i[e],s=n.fn||n,a=n.thisObj||r;if(o)for(let e,n=0,{length:r}=o;n<r;n++)if(e=o[n],e.fn===s&&e.thisObj===a)return n;return-1}hasListener(e){var n;return Boolean(null==(n=this.eventListeners)?void 0:n[null==e?void 0:e.toLowerCase()])}relayAll(e,n,r=!0){this.relayAllTargets||(this.relayAllTargets=[]);const i=this.relayAllTargets;e.on({beforeDestroy:({source:n})=>{if(n===e){i.filter((n=>n.through===e)).forEach((e=>oe.remove(i,e)))}}}),i.push({through:e,prefix:n,transformCase:r})}removeAllListeners(e=!0){var n;const r=this.eventListeners;let i,o;for(const s in r){const a=r[s];for(i=a.length;i-- >0;){const r=a[i];r.$internal&&e||(this.removeListener(s,r),o=r.thisObj,null==(n=null==o?void 0:o.untrackDetachers)||n.call(o,this))}}}relayEvents(e,n,r=""){const i={detachable:!0,thisObj:this};return n.forEach((e=>{i[e]=(n,...i)=>this.trigger(r+e,n,...i)})),e.on(i)}onListen(){}onUnlisten(){}destructorInterceptor(){const{autoDetachers:e,target:n,oldDestructor:r}=this;for(let r=0;r<e.length;r++){const{dispatcher:i,config:o}=e[r];i.isDestroyed||i.removeListener(o,n)}r.call(n)}attachAutoDetacher(e,n){const r=e.thisObj||n,i="doDestroy"in r?"doDestroy":"destroy";if(i in r){let{$autoDetachers:n}=r;n||(r.$autoDetachers=n=[]),r.$oldDestructor||(r.$oldDestructor=r[i],r[i]=this.destructorInterceptor.bind({autoDetachers:n,oldDestructor:r.$oldDestructor,target:r})),n.push({config:e,dispatcher:this})}else r[i]=()=>{this.removeListener(e)}}detachAutoDetacher(e){const n=e.thisObj;n.$oldDestructor&&!n.isDestroying&&(oe.remove(n.$autoDetachers,n.$autoDetachers.find((n=>n.config===e&&n.dispatcher===this))),n.$autoDetachers.length||(n["doDestroy"in n?"doDestroy":"destroy"]=n.$oldDestructor,n.$oldDestructor=null))}await(e,n={checkLog:!0,resetLog:!0,args:null}){const r=this;!1===n&&(n={checkLog:!1});const{args:i}=n;return new Promise((o=>{var s;if(n.checkLog&&(null==(s=r._triggered)?void 0:s[e])&&(o(),n.resetLog&&r.clearLog(e)),i){const s=r.on({[e]:(...a)=>{Object.keys(i).every((e=>e in a[0]&&a[0][e]===i[e]))&&(o(...a),n.resetLog&&r.clearLog(e),s())},prio:-1e4})}else r.on({[e]:(...i)=>{o(...i),n.resetLog&&r.clearLog(e)},prio:-1e4,once:!0})}))}clearLog(e){this._triggered&&(e?delete this._triggered[e]:this._triggered={})}trigger(e,n){var r,i,o,s;const a=this,l=e.toLowerCase(),{eventsSuspended:c,relayAllTargets:d,callOnFunctions:u}=a;let h,g,p=null==(r=a.eventListeners)?void 0:r[l];if(a._triggered||(a._triggered={}),a._triggered[e]=!0,c)return c.shouldQueue&&c.queue.push(arguments),!0;if((null==(i=a.eventListeners)?void 0:i.catchall)&&((p=p?p.slice():[]).push(...a.eventListeners.catchall),p.sort(priorityComparator)),!p&&!d&&!u)return!0;if(n?"source"in n||(Object.isExtensible(n)?n.source=a:n=Object.setPrototypeOf({source:a},n)):n={source:a},n.type!==l&&(n.constructor!==Object?Reflect.defineProperty(n,"type",{get:()=>l}):n.type=l),n.eventName=e,!("bubbles"in n)&&(null==(o=a.bubbleEvents)?void 0:o[e])&&(n.bubbles=a.bubbleEvents[e]),u){const r="on"+w.capitalize(e);if(r in a){const e=!a[r]||a.callback(a[r],a,[n]);let i;if(M.isPromise(e)?(h||(h=[])).push(e):i=!1===e||i,!a.isDestroyed&&ke.call(a,r)&&!(null==(s=a.pluginFunctionChain)?void 0:s[r])){const e=Object.getPrototypeOf(a);if(r in e){const o=e[r].call(a,n);if(M.isPromise(o)?(h||(h=[])).push(o):i=!1===o||i,a.isDestroyed)return}}if(i)return!1}}if(p){let e=0,r=!1;for(p.$firing=!0;e<p.length&&!a.isDestroyed&&!r;e++){const i=p[e];if(!1===g&&!i.$internal)continue;let o,s=i.thisObj;if(!s||!s.isDestroyed){if(i.called=!0,i.once&&a.removeListener(l,i),"string"==typeof i.fn){if(s&&(o=s[i.fn]),!o){const e=a.resolveCallback(i.fn);o=e.handler,s=e.thisObj}}else o=i.fn;if(i.buffer){if(!i.bufferFn){const e=Number(i.buffer);if("number"!=typeof e||isNaN(e))throw new Error(`Incorrect type for buffer, got "${e}" (expected a Number)`);i.bufferFn=he.createBuffered(o,e,s,i.args)}o=i.bufferFn}if(i.throttle){const e=Number(i.throttle);if("number"!=typeof e||isNaN(e))throw new Error(`Incorrect type for throttle, got "${e}" (expected a Number)`);i.throttledFn||(i.throttledFn=he.createThrottled(o,e,s,i.args)),o=i.throttledFn}const e=o.call(s||a,...i.args||[],n);!1!==g&&(g=e),i.$internal&&!1===e&&(r=!0),M.isPromise(e)&&(e.$internal=i.$internal,(h||(h=[])).push(e))}}if(p.$firing=!1,r)return!1}return null==d||d.forEach((r=>{let i=e;if(r.transformCase&&(i=w.capitalize(i)),r.prefix&&(i=r.prefix+i),!1===r.through.trigger(i,n))return!1})),n.bubbles&&a.owner&&!a.owner.isDestroyed?a.owner.trigger(e,n):(h=null==h?void 0:h.filter((e=>!1!==g||e.$internal)),(null==h?void 0:h.length)?new Promise((e=>{Promise.all(h).then((n=>{const r=!n.some((e=>!1===e));e(r)}))})):!1!==g)}suspendEvents(e=!1){(this.eventsSuspended||(this.eventsSuspended={shouldQueue:e,queue:[],count:0})).count++}resumeEvents(){const e=this.eventsSuspended;if(e&&0==--e.count&&(this.eventsSuspended=null,e.shouldQueue))for(const n of e.queue)this.trigger(...n);return!Boolean(this.eventsSuspended)}},Me=class{static animationFrame(){return new Promise((e=>{requestAnimationFrame(e)}))}static sleep(e){return new Promise((n=>{setTimeout((()=>{n()}),e)}))}static yield(){return Promise.resolve()}};Me._$name="AsyncHelper";var Ae=/^(\w+)=(.*)$/,Ie=class{static get(e,n){return this.fetch(e,n)}static post(e,n,r={}){return n instanceof FormData||"string"==typeof n||(n=JSON.stringify(n),r.headers=r.headers||{},r.headers["Content-Type"]=r.headers["Content-Type"]||"application/json"),this.fetch(e,Object.assign({method:"POST",body:n},r))}static fetch(e,n){let r;if(n=M.merge({},Ie.DEFAULT_FETCH_OPTIONS,n),"undefined"!=typeof AbortController&&(r=n.abortController=new AbortController,n.signal=r.signal),"credentials"in n||(n.credentials="include"),n.queryParams){const r=Object.entries(n.queryParams);if(r.length){let i=!1;if(n.headers&&!0===n.addQueryParamsToBody){let e;switch(new Headers(n.headers).get("Content-Type")){case"application/x-www-form-urlencoded":e=URLSearchParams;break;case"multipart/form-data":e=FormData}if(e){const o=n.body||(n.body=new e);o instanceof e&&(r.forEach((([e,n])=>o.set(e,n))),i=!0)}}i||(e+=(e.includes("?")?"&":"?")+r.map((([e,n])=>`${e}=${encodeURIComponent(n)}`)).join("&"))}}const i=new Promise(((r,o)=>{fetch(e,n).then((e=>{n.parseJson?e.json().then((n=>{e.parsedJson=n,r(e)})).catch((n=>{e.parsedJson=null,e.error=n,o(e)})):r(e)})).catch((e=>{e.stack=i.stack,o(e)}))}));return i.stack=(new Error).stack,i.abort=function(){null==r||r.abort()},i}static mockUrl(e,n){const r=this;(r.mockAjaxMap||(r.mockAjaxMap={}))[e]=n,Ie.originalFetch||(Ie.originalFetch=Ie.fetch,Ie.fetch=r.mockAjaxFetch.bind(r))}static async mockAjaxFetch(e,n){const r=e.split("?");let i=this.mockAjaxMap[r[0]],o=null;if(i){"function"==typeof i&&(i=await i(r[0],r[1]&&function(e){const n={},r=e.split("&");for(const e of r){const[r,i,o]=Ae.exec(e),s=decodeURIComponent(i),a=decodeURIComponent(o);if(r){let e=n[s];e?(Array.isArray(e)||(e=n[s]=[e]),e.push(a)):n[s]=a}}return n}(r[1]),n));try{o=(null==n?void 0:n.parseJson)&&JSON.parse(i.responseText)}catch(e){o=null,i.error=e}return i=Object.assign({status:200,ok:!0,headers:new Headers,statusText:"OK",url:e,parsedJson:o,text:()=>new Promise((e=>{e(i.responseText)})),json:()=>new Promise((e=>{e(o)}))},i),new Promise((function(e,n){i.synchronous?e(i):setTimeout((function(){e(i)}),"delay"in i?i.delay:100)}))}return Ie.originalFetch(e,n)}},Fe=Ie;__publicField(Fe,"DEFAULT_FETCH_OPTIONS",{}),Fe._$name="AjaxHelper";var Pe=class{static mergeLocales(...e){const n={};return e.forEach((e=>{Object.keys(e).forEach((r=>{"object"==typeof e[r]?n[r]={...n[r],...e[r]}:n[r]=e[r]}))})),n}static trimLocale(e,n){const remove=(n,r)=>{e[n]&&(r?e[n][r]&&delete e[n][r]:delete e[n])};Object.keys(n).forEach((e=>{Object.keys(n[e]).length>0?Object.keys(n[e]).forEach((n=>remove(e,n))):remove(e)}))}static normalizeLocale(e,n){if(!e)throw new Error('"nameOrConfig" parameter can not be empty');if("string"==typeof e){if(!n)throw new Error('"config" parameter can not be empty');n.locale?n.name=e||n.name:n.localeName=e}else n=e;let r={};if(n.name||n.locale)r=Object.assign({localeName:n.name},n.locale),n.desc&&(r.localeDesc=n.desc),n.code&&(r.localeCode=n.code),n.path&&(r.localePath=n.path);else{if(!n.localeName)throw new Error('"config" parameter doesn\'t have "localeName" property');r=Object.assign({},n)}for(const e of["name","desc","code","path"])r[e]&&delete r[e];if(!r.localeName)throw new Error("Locale name can not be empty");return r}static get locales(){return globalThis.bryntum.locales||{}}static set locales(e){globalThis.bryntum.locales=e}static get localeName(){return globalThis.bryntum.locale||"En"}static set localeName(e){globalThis.bryntum.locale=e||Pe.localeName}static get locale(){return Pe.localeName&&this.locales[Pe.localeName]||this.locales.En||Object.values(this.locales)[0]||{localeName:"",localeDesc:"",localeCoode:""}}static publishLocale(e,n){const{locales:r}=globalThis.bryntum,i=Pe.normalizeLocale(e,n),{localeName:o}=i;return r[o]&&!0!==n?r[o]=this.mergeLocales(r[o]||{},i||{}):r[o]=i,r[o]}},Oe=Pe;__publicField(Oe,"skipLocaleIntegrityCheck",!1),globalThis.bryntum=globalThis.bryntum||{},globalThis.bryntum.locales=globalThis.bryntum.locales||{},Oe._$name="LocaleHelper";var Le=new class extends(Events_default(re)){static get defaultConfig(){return{throwOnMissingLocale:A.isTestEnv}}construct(...e){var n;const r=this;if(super.construct(...e),c.isBrowserEnv){const e=document.querySelector("script[data-default-locale]");e?r.applyLocale(e.dataset.defaultLocale):(null==(n=r.locale)?void 0:n.localeName)&&r.applyLocale(r.locale.localeName)}}get locales(){return Oe.locales}set locales(e){Oe.locales=e}set locale(e){this.applyLocale(e)}get locale(){return Oe.locale}registerLocale(e,n){A.deprecate("Core","6.0.0","LocaleManager.registerLocale deprecated, use LocaleHelper.publishLocale instead"),Oe.publishLocale(e,n)}extendLocale(e,n){A.deprecate("Core","6.0.0","LocaleManager.extendLocale deprecated, use LocaleManager.applyLocale instead");const r=Oe.publishLocale(e,n);return this.applyLocale(r,!0)}applyLocale(e,n,r=!1){const i=this;let o;if("string"==typeof e)if("object"!=typeof n){if(o=i.locales[e],!o){if(r)return!0;throw new Error(`Locale "${e}" is not published. Publish with LocaleHelper.publishLocale() before applying.`)}}else o=Oe.publishLocale(e,n);else o=Oe.publishLocale(e);if(i.locale.localeName&&i.locale.localeName===o.localeName&&!0!==n)return i.locale;Oe.localeName=o.localeName;const triggerLocaleEvent=()=>{i.trigger("locale",o)};return o.localePath?new Promise(((e,n)=>{i.loadLocale(o.localePath).then((n=>{n.text().then((n=>{new Function(n)(),c.isBrowserEnv&&(o=i.locales[o.localeName],o&&delete o.localePath),triggerLocaleEvent(),e(o)}))})).catch((e=>n(e)))})):(triggerLocaleEvent(),o)}loadLocale(e){return Fe.get(e)}set throwOnMissingLocale(e){this._throwOnMissingLocale=e}get throwOnMissingLocale(){return this._throwOnMissingLocale}},_e=Object.getPrototypeOf(Object),$e=/L{.*?}/g,je=/L{(.*?)}/g,ze=/((.*?)\.)?(.+)/g,unescape=e=>e.replace(/\[\[(\d+)]]/gm,"{$1}"),Be=Object.freeze(Object.create(null)),Localizable_default=e=>class Localizable extends(e||re){static get $name(){return"Localizable"}static get configurable(){return{localeClass:null,localizable:null,localizableProperties:{value:[],$config:{merge:"distinct"}}}}static clsName(e){var n,r;return"string"==typeof e?e:e===_e?"Object":e.$$name||e.name||(null==(n=e.prototype)?void 0:n.$$name)||(null==(r=e.prototype)?void 0:r.name)}static parseLocaleString(e){const n=[];let r;if(null==e?void 0:e.includes("L{"))for(e=e.replace(/{(\d+)}/gm,"[[$1]]"),je.lastIndex=0;null!=(r=je.exec(e));){ze.lastIndex=0;const e=ze.exec(r[1]);n.push({match:unescape(r[0]),localeKey:unescape(e[3]),localeClass:e[2]})}return n.length>0?n:[{match:e,localeKey:e,localeClass:void 0}]}construct(e={},...n){super.construct(e,...n),Le.ion({locale:"updateLocalization",thisObj:this}),this.updateLocalization()}get localeClass(){return this._localeClass||null}localizeProperty(e){var n,r,i;const o=this,s=M.getPath(o,e),a=(null==(n=o.$meta.configs[e])?void 0:n.localeKey)||(null==(i=null==(r=o.fieldMap)?void 0:r[e])?void 0:i.defaultValue);let l;return a?(l=Localizable.localize(a,o,o.localeClass||o),l&&!(e in(o.initialConfig||Be))&&M.setPath(o.isColumn?o.data:o,e,l)):"string"==typeof s&&(o.originalLocales=o.originalLocales||{},l=M.getPath(o.originalLocales,e),void 0===l&&(M.setPath(o.originalLocales,e,s),l=s),l&&M.setPath(o,e,l=o.optionalL(l,o))),l||s}updateLocalization(){var e,n;!1!==this.localizable&&(null==(e=this.localizableProperties)||e.forEach(this.localizeProperty,this),null==(n=this.trigger)||n.call(this,"localized"))}static getTranslation(e,n,r){const i=Le.locale;let o,s,a=null;if(i)for(const{match:l,localeKey:c,localeClass:d}of this.parseLocaleString(e)){const translate=o=>{var s;const d=null==(s=i[o])?void 0:s[c];return d&&(a="function"==typeof d?null!=n?d(n):d:"object"==typeof d||e===l?d:(a||e).replace(l,d),"string"==typeof d&&d.includes("L{")&&(a=this.getTranslation(d,n,r))),d};let u=!1;for(s=r;s&&(o=Localizable.clsName(s))&&!(u=translate(o))&&"string"!=typeof s;s=Object.getPrototypeOf(s));!u&&d&&translate(d)}return a}static localize(e,n=void 0,...r){0===(null==r?void 0:r.length)&&(r=[this]);let i=null;return r.some((r=>(i=Localizable.getTranslation(e,n,r),null!=i))),i}static L(e,n=void 0,...r){0===(null==r?void 0:r.length)&&(r=[this]);const i=this.localize(e,n,...r);if(null==i&&Le.throwOnMissingLocale&&e.includes("L{"))throw new Error(`Localization is not found for '${e}' in '${r.map((e=>Localizable.clsName(e))).join(", ")}'. ${Le.locale.localeName?`Locale : ${Le.locale.localeName}`:""}`);return null!=i?i:e}L(e,n){const{localeClass:r,constructor:i}=this;return r&&Localizable.clsName(r)!==Localizable.clsName(i)?Localizable.L(e,n,r,i):Localizable.L(e,n,i)}static optionalL(e,n=void 0,...r){const i=Le.throwOnMissingLocale;Le.throwOnMissingLocale=i&&$e.test(e),0===(null==r?void 0:r.length)&&(r=[this]);const o=Localizable.L(e,n,...r);return Le.throwOnMissingLocale=i,o}optionalL(e,n=this,r=!1){const i=Le.throwOnMissingLocale;Le.throwOnMissingLocale=i&&$e.test(e)&&!r;const o=this.L(e,n);return Le.throwOnMissingLocale=i,o}get localeManager(){return Le}get localeHelper(){return Oe}},{toString:He}=(Oe.publishLocale({localeName:"En",localeDesc:"English (US)",localeCode:"en-US",Object:{Yes:"Yes",No:"No",Cancel:"Cancel",Ok:"OK",Week:"Week"},Combo:{noResults:"No results",recordNotCommitted:"Record could not be added",addNewValue:e=>`Add ${e}`},FilePicker:{file:"File"},Field:{badInput:"Invalid field value",patternMismatch:"Value should match a specific pattern",rangeOverflow:e=>`Value must be less than or equal to ${e.max}`,rangeUnderflow:e=>`Value must be greater than or equal to ${e.min}`,stepMismatch:"Value should fit the step",tooLong:"Value should be shorter",tooShort:"Value should be longer",typeMismatch:"Value is required to be in a special format",valueMissing:"This field is required",invalidValue:"Invalid field value",minimumValueViolation:"Minimum value violation",maximumValueViolation:"Maximum value violation",fieldRequired:"This field is required",validateFilter:"Value must be selected from the list"},DateField:{invalidDate:"Invalid date input"},DatePicker:{gotoPrevYear:"Go to previous year",gotoPrevMonth:"Go to previous month",gotoNextMonth:"Go to next month",gotoNextYear:"Go to next year"},NumberFormat:{locale:"en-US",currency:"USD"},DurationField:{invalidUnit:"Invalid unit"},TimeField:{invalidTime:"Invalid time input"},TimePicker:{hour:"Hour",minute:"Minute",second:"Second"},List:{loading:"Loading..."},GridBase:{loadMask:"Loading...",syncMask:"Saving changes, please wait..."},PagingToolbar:{firstPage:"Go to first page",prevPage:"Go to previous page",page:"Page",nextPage:"Go to next page",lastPage:"Go to last page",reload:"Reload current page",noRecords:"No records to display",pageCountTemplate:e=>`of ${e.lastPage}`,summaryTemplate:e=>`Displaying records ${e.start} - ${e.end} of ${e.allCount}`},PanelCollapser:{Collapse:"Collapse",Expand:"Expand"},Popup:{close:"Close"},UndoRedo:{Undo:"Undo",Redo:"Redo",UndoLastAction:"Undo last action",RedoLastAction:"Redo last undone action",NoActions:"No items in the undo queue"},FieldFilterPicker:{equals:"equals",doesNotEqual:"does not equal",isEmpty:"is empty",isNotEmpty:"is not empty",contains:"contains",doesNotContain:"does not contain",startsWith:"starts with",endsWith:"ends with",isOneOf:"is one of",isNotOneOf:"is not one of",isGreaterThan:"is greater than",isLessThan:"is less than",isGreaterThanOrEqualTo:"is greater than or equal to",isLessThanOrEqualTo:"is less than or equal to",isBetween:"is between",isNotBetween:"is not between",isBefore:"is before",isAfter:"is after",isToday:"is today",isTomorrow:"is tomorrow",isYesterday:"is yesterday",isThisWeek:"is this week",isNextWeek:"is next week",isLastWeek:"is last week",isThisMonth:"is this month",isNextMonth:"is next month",isLastMonth:"is last month",isThisYear:"is this year",isNextYear:"is next year",isLastYear:"is last year",isYearToDate:"is year to date",isTrue:"is true",isFalse:"is false",selectAProperty:"Select a property",selectAnOperator:"Select an operator",caseSensitive:"Case-sensitive",and:"and",dateFormat:"D/M/YY",selectOneOrMoreValues:"Select one or more values",enterAValue:"Enter a value",enterANumber:"Enter a number",selectADate:"Select a date"},FieldFilterPickerGroup:{addFilter:"Add filter"},DateHelper:{locale:"en-US",weekStartDay:0,nonWorkingDays:{0:!0,6:!0},weekends:{0:!0,6:!0},unitNames:[{single:"millisecond",plural:"ms",abbrev:"ms"},{single:"second",plural:"seconds",abbrev:"s"},{single:"minute",plural:"minutes",abbrev:"min"},{single:"hour",plural:"hours",abbrev:"h"},{single:"day",plural:"days",abbrev:"d"},{single:"week",plural:"weeks",abbrev:"w"},{single:"month",plural:"months",abbrev:"mon"},{single:"quarter",plural:"quarters",abbrev:"q"},{single:"year",plural:"years",abbrev:"yr"},{single:"decade",plural:"decades",abbrev:"dec"}],unitAbbreviations:[["mil"],["s","sec"],["m","min"],["h","hr"],["d"],["w","wk"],["mo","mon","mnt"],["q","quar","qrt"],["y","yr"],["dec"]],parsers:{L:"MM/DD/YYYY",LT:"HH:mm A",LTS:"HH:mm:ss A"},ordinalSuffix:e=>{let n="th";if(!["11","12","13"].find((n=>e.endsWith(n)))){n={1:"st",2:"nd",3:"rd"}[e[e.length-1]]||"th"}return e+n}}}),Object.prototype),Ve=He.call(new Date),Ne=new Date,qe=36e5,defaultValue=(e,n)=>isNaN(e)||null==e?n:e,We=/([ES]){([^}]+)}/g,enOrdinalSuffix=e=>{let n="th";if(!["11","12","13"].find((n=>e.endsWith(n)))){n={1:"st",2:"nd",3:"rd"}[e[e.length-1]]||"th"}return e+n},useIntlFormat=(e,n,r)=>(Qe[e]||(Qe[e]=new Intl.DateTimeFormat(Ye,n))).format(r),formatTime=(e,n,r,i=!1)=>{let o=useIntlFormat(e,n,r);return/am|pm/i.test(o)&&(o=o.replace(/^0/,""),i&&(o=o.replace(/:00/,""))),o},normalizeDay=e=>e>=0?e:e+7,Ue=/([^\w])(S+)/gm,msReplacer=(e,n)=>n+"SSS",Ge=/[:.\-/\s]/,Ye="en-US",Ke=enOrdinalSuffix,Xe={},Ze={},Qe={},Je={},redirectFormat=e=>{const n=et[e];if(!n)throw new Error("Only international formats should be used here");if(void 0!==Ze[e])return Ze[e];const r=new Intl.DateTimeFormat(Ye,n).formatToParts(new Date(2001,1,2,3,4,5,6)).map((e=>{const r=e.type,i=n[r];return"literal"===r?e.value.replace(/,/g,""):"day"===r?"numeric"===i?"D":"DD":"month"===r?"short"===i?"MMM":"long"===i?"MMMM":"numeric"===i?"M":"MM":"year"===r?"numeric"===i?"YYYY":"YY":void 0})).join("");return Ze[e]=r},et={l:{year:"numeric",month:"numeric",day:"numeric"},ll:{year:"numeric",month:"short",day:"numeric"}},tt={M:e=>e.getMonth()+1,Mo:e=>Ke(tt.M(e).toString()),MM:e=>(e.getMonth()+1).toString().padStart(2,"0"),MMM:e=>useIntlFormat("MMM",{month:"short"},e),MMMM:e=>useIntlFormat("MMMM",{month:"long"},e),Q:e=>Math.ceil((e.getMonth()+1)/3),Qo:e=>Ke(tt.Q(e).toString()),D:e=>e.getDate(),Do:e=>Ke(tt.D(e).toString()),DD:e=>e.getDate().toString().padStart(2,"0"),DDD:e=>Math.ceil((new Date(e.getFullYear(),e.getMonth(),e.getDate(),12,0,0)-new Date(e.getFullYear(),0,0,12,0,0))/at.day.millisecond),DDDo:e=>Ke(tt.DDD(e).toString()),DDDD:e=>tt.DDD(e).toString().padStart(3,"0"),d:e=>e.getDay(),do:e=>Ke(e.getDay().toString()),d1:e=>useIntlFormat("d1",{weekday:"narrow"},e).substr(0,1),dd:e=>tt.ddd(e).substring(0,2),ddd:e=>useIntlFormat("ddd",{weekday:"short"},e),dddd:e=>useIntlFormat("dddd",{weekday:"long"},e),u:e=>{const n=(Qe.u||(Qe.u=new Intl.DateTimeFormat("en-GB",{timeZone:"UTC",year:"numeric",month:"2-digit",day:"2-digit"}))).formatToParts(e);return`${n[4].value}${n[2].value}${n[0].value}Z`},uu:e=>{const n=(Qe.uu||(Qe.uu=new Intl.DateTimeFormat("en-GB",{timeZone:"UTC",hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}))).formatToParts(e);return`${n[4].value}${n[2].value}${n[0].value}T${n[6].value}${n[8].value}${n[10].value}Z`},e:e=>e.getDay(),E:e=>e.getDay()+1,W:e=>Ct.getWeekNumber(e)[1],Wo:e=>Ke(tt.W(e).toString()),WW:e=>tt.W(e).toString().padStart(2,"0"),Wp:e=>`${Ct.localize("L{Week}")} ${tt.W(e)}`,WWp:e=>`${Ct.localize("L{Week}")} ${tt.WW(e)}`,Wp0:e=>`${Ct.localize("L{Week}")[0]}${tt.W(e)}`,WWp0:e=>`${Ct.localize("L{Week}")[0]}${tt.WW(e)}`,Y:e=>e.getFullYear(),YY:e=>e.getFullYear()%100,YYYY:e=>e.getFullYear(),A:e=>e.getHours()<12?"AM":"PM",a:e=>e.getHours()<12?"am":"pm",H:e=>e.getHours(),HH:e=>e.getHours().toString().padStart(2,"0"),h:e=>e.getHours()%12||12,hh:e=>tt.h(e).toString().padStart(2,"0"),k:e=>e.getHours()||24,kk:e=>tt.k(e).toString().padStart(2,"0"),K:e=>formatTime("K",{hour:"numeric"},e),KK:e=>formatTime("KK",{hour:"2-digit"},e),m:e=>e.getMinutes(),mm:e=>tt.m(e).toString().padStart(2,"0"),s:e=>e.getSeconds(),ss:e=>tt.s(e).toString().padStart(2,"0"),S:e=>Math.floor(e.getMilliseconds()/100).toString(),SS:e=>Math.floor(e.getMilliseconds()/10).toString().padStart(2,"0"),SSS:e=>e.getMilliseconds().toString().padStart(3,"0"),z:e=>useIntlFormat("z",{timeZoneName:"short"},e),zz:e=>useIntlFormat("zz",{timeZoneName:"long"},e),Z:e=>St.getGMTOffset(e),LT:e=>formatTime("LT",{hour:"2-digit",minute:"2-digit"},e),LST:e=>formatTime("LST",{hour:"numeric",minute:"2-digit"},e,!0),LTS:e=>formatTime("LTS",{hour:"2-digit",minute:"2-digit",second:"2-digit"},e),L:e=>useIntlFormat("L",{year:"numeric",month:"2-digit",day:"2-digit"},e),l:e=>useIntlFormat("l",et.l,e),LL:e=>useIntlFormat("LL",{year:"numeric",month:"long",day:"numeric"},e),ll:e=>useIntlFormat("ll",et.ll,e),LLL:e=>useIntlFormat("LLL",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"},e),lll:e=>useIntlFormat("lll",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"},e),LLLL:e=>useIntlFormat("LLLL",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit",weekday:"long"},e),llll:e=>useIntlFormat("llll",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",weekday:"short"},e)},nt=`^(?:${Object.keys(tt).sort(((e,n)=>n.length-e.length)).join("|")})`,emptyFn2=()=>({}),parseMilliseconds=e=>(e=>mt.test(e))(e)&&{milliseconds:parseInt(e.padEnd(3,"0").substring(0,3))},rt={YYYY:e=>{const n=parseInt(e);return{year:n>=1e3&&n<=9999?n:NaN}},Y:e=>({year:parseInt(e)}),YY:e=>{const n=parseInt(e);return{year:n+(n>1968?1900:2e3)}},M:e=>({month:parseInt(e)-1}),MM:e=>({month:parseInt(e)-1}),Mo:e=>({month:parseInt(e)-1}),MMM:e=>{const n=(e||"").toLowerCase();for(const[e,r]of Object.entries(Ct._monthShortNamesIndex))if(n.startsWith(e))return{month:r.value}},MMMM:e=>{const n=(e||"").toLowerCase();for(const[e,r]of Object.entries(Ct._monthNamesIndex))if(n.startsWith(e))return{month:r.value}},DD:e=>({date:parseInt(e)}),D:e=>({date:parseInt(e)}),Do:e=>({date:parseInt(e)}),DDD:emptyFn2,DDDo:emptyFn2,DDDD:emptyFn2,d:emptyFn2,do:emptyFn2,d1:emptyFn2,dd:emptyFn2,ddd:emptyFn2,dddd:emptyFn2,Q:emptyFn2,Qo:emptyFn2,W:emptyFn2,Wo:emptyFn2,WW:emptyFn2,e:emptyFn2,E:emptyFn2,HH:e=>({hours:parseInt(e)}),hh:e=>({hours:parseInt(e)}),mm:e=>({minutes:parseInt(e)}),H:e=>({hours:parseInt(e)}),m:e=>({minutes:parseInt(e)}),ss:e=>({seconds:parseInt(e)}),s:e=>({seconds:parseInt(e)}),S:parseMilliseconds,SS:parseMilliseconds,SSS:parseMilliseconds,A:e=>({amPm:e.toLowerCase()}),a:e=>({amPm:e.toLowerCase()}),L:"MM/DD/YYYY",LT:"HH:mm A",LTS:"HH:mm:ss A",l:{type:"dynamic",parser:()=>redirectFormat("l")},ll:{type:"dynamic",parser:()=>redirectFormat("ll")},Z:e=>{if(!e||!ft.test(e)&&"Z"!==e)return null;let n=0;if("Z"!==e){const r=ft.exec(e);if(r){n=("+"===r[1]?1:-1)*(60*(parseInt(r[2])||0)+(parseInt(r[3])||0))}else n=-1*(new Date).getTimezoneOffset()}return{timeZone:n}}},it=Object.keys(rt).sort(((e,n)=>n.length-e.length)),ot=new RegExp(`(${it.join("|")})`),st=new RegExp("^(LL|LLL|lll|LLLL|llll)$"),at={decade:{decade:1,year:10,quarter:40,month:120,week:520,day:3652,hour:87648,minute:5258880,second:315532800,millisecond:3155328e5},year:{decade:.1,year:1,quarter:4,month:12,week:52,day:365,hour:8760,minute:525600,second:31536e3,millisecond:31536e6},quarter:{decade:1/40,year:1/4,quarter:1,month:3,week:4,day:91,hour:2184,minute:131040,second:7862400,millisecond:78624e5},month:{decade:1/120,year:1/12,quarter:1/3,month:1,week:4,day:-30,hour:-720,minute:-43200,second:-2592e3,millisecond:-2592e6},week:{decade:-1/520,year:-1/52,quarter:-1/13,month:-1/4,day:7,hour:168,minute:10080,second:604800,millisecond:6048e5},day:{decade:-1/3652,year:-1/365,quarter:-1/91,month:-1/30,week:1/7,hour:24,minute:1440,second:86400,millisecond:864e5},hour:{decade:-1/87648,year:-1/8760,quarter:-1/2184,month:-1/720,week:1/168,day:1/24,minute:60,second:3600,millisecond:36e5},minute:{decade:-1/5258880,year:-1/525600,quarter:-1/131040,month:-1/43200,week:1/10080,day:1/1440,hour:1/60,second:60,millisecond:6e4},second:{decade:-1/315532800,year:-1/31536e3,quarter:-1/7862400,month:-1/2592e3,week:1/604800,day:1/86400,hour:1/3600,minute:1/60,millisecond:1e3},millisecond:{decade:-1/3155328e5,year:-1/31536e6,quarter:-1/78624e5,month:-1/2592e6,week:1/6048e5,day:1/864e5,hour:1/36e5,minute:1/6e4,second:.001}},lt={ms:"millisecond",milliseconds:"millisecond",s:"second",seconds:"second",m:"minute",mi:"minute",min:"minute",minutes:"minute",h:"hour",hours:"hour",d:"day",days:"day",w:"week",weeks:"week",M:"month",mo:"month",mon:"month",months:"month",q:"quarter",quarters:"quarter",y:"year",years:"year",dec:"decade",decades:"decade"},ct=/^\s*([-+]?\d+(?:[.,]\d*)?|[-+]?(?:[.,]\d+))\s*([^\s]+)?/i,dt=/^\s*([-+]?\d+)(?![.,])\s*([^\s]+)?/i,ut=["millisecond","second","minute","hour","day","week","month","quarter","year","decade"],ht=[["mil"],["s","sec"],["m","min"],["h","hr"],["d"],["w","wk"],["mo","mon","mnt"],["q","quar","qrt"],["y","yr"],["dec"]],gt=["decade","year","month","week","day","hour","minute","second","millisecond"],pt=["milliseconds","seconds","minutes","hours","date","month","year"],mt=/^[0-9]+$/,ft=/([+-])(\d\d):*(\d\d)*$/,bt={millisecond:0,second:1,minute:2,hour:3,day:4,week:5,month:6,quarter:7,year:8,decade:9},vt={round:(e,n=1)=>Math.round(e/n)*n,floor:(e,n=1)=>Math.floor(e/n)*n,ceil:(e,n=1)=>Math.ceil(e/n)*n},yt={},wt=class extends(Localizable_default()){static get $name(){return"DateHelper"}static set defaultFormat(e){St._defaultFormat=e}static get defaultFormat(){return St._defaultFormat||"YYYY-MM-DDTHH:mm:ssZ"}static set defaultParseFormat(e){this._defaultParseFormat=e}static get defaultParseFormat(){return this._defaultParseFormat||this._defaultFormat||"YYYY-MM-DDTHH:mm:ss.SSSZ"}static buildParser(e){const n=e.split(ot),r=[];return 1===n.length||st.test(e)?[]:(n.reduce(((n,i,o,s)=>{if(0!==o||""!==i)if(ot.test(i)){const a=(this.localize("L{parsers}")||{})[i]||rt[i];if("Z"===i&&o<s.length-2)throw new Error(`Invalid format ${e} TimeZone (Z) must be last token`);const l="function"==typeof a||"string"==typeof a?a:a.parser();if("string"==typeof l){const e=St.buildParser(l),i=e.pop();delete i.last,r.push(...e),n=i}else n.pattern=i,n.fn=l}else n.splitter=i,r.push(n),n={};else Object.prototype.hasOwnProperty.call(n,"pattern")&&r.push(n);return n}),{}),r[r.length-1].last=!0,r)}static makeKey(e){if(10===e.length)return e;e.getTime&&(e=e.getTime());const n=yt[Math.trunc(e/qe)];if(n)return n;Ne.setTime(e);const r=Ne.getMonth()+1,i=Ne.getDate();return yt[Math.trunc(e/qe)]=`${Ne.getFullYear()}-${r<10?"0"+r:r}-${i<10?"0"+i:i}`}static parseKey(e){return St.parse(e,"YYYY-MM-DD")}static parse(e,n=St.defaultParseFormat,r=!1){if(e instanceof Date)return e;if("string"!=typeof e||!e)return null;const i={year:null,month:null,date:null,hours:null,minutes:null,seconds:null,milliseconds:null};n=n.replace(Ue,msReplacer);let o,s=Je[n];if(s||(s=Je[n]=St.buildParser(n)),e.includes(" ")&&(e=e.replace(/\s/g," ")),s.reduce(((e,n)=>{var o;if(!n.last){let s,a,l;if("T"===n.splitter&&-1===e.indexOf("T"))s=e.indexOf(" ");else{const i=e.indexOf("+");let{splitter:a}=n;!r&&Ge.test(a)&&(a=Ge),s=""!==n.splitter?e.search("string"==typeof a?w.escapeRegExp(a):a):(null==(o=n.pattern)?void 0:o.length)||-1,i>-1&&s>i&&(s=-1)}if(-1===s||"SSS"===n.pattern&&e.match(/^\d+Z$/)){const n=e.split(/([Z\-+])/);1===n.length?(a=e,l=""):(a=n[0],l=`${n[1]}${n[2]}`)}else a=e.substring(0,s)||e,l=e.substring(s+n.splitter.length);if(n.fn){const e=n.fn(a);e?Object.assign(i,e):l=a+l}return l}Object.assign(i,n.fn(e))}),e),i.year&&!i.date&&(i.date=1),i.date>31||i.month>12)return null;const a=St.create(i,r);return a?o=a:r||(o=new Date(e)),o}static create(e,n=!1){const r={...e};let i=isNaN(r.year)||n&&(isNaN(r.month)||isNaN(r.date)),o=!1;if(!i){let e=!0;pt.forEach((n=>{n in r&&!isNaN(r[n])||(r[n]=0),e=e&&null===r[n]})),i=e}if(i)return null;if("am"===r.amPm?r.hours=r.hours%12:"pm"===r.amPm&&(r.hours=r.hours%12+12),"timeZone"in r&&(o=!0,r.minutes-=r.timeZone),n&&(null==r.year||null==r.month||null==r.date))return null;const s=[defaultValue(r.year,2020),defaultValue(r.month,0),defaultValue(r.date,1),r.hours,r.minutes,r.seconds,r.milliseconds];return o?new Date(Date.UTC(...s)):new Date(...s)}static toUTC(e){return new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()))}static format(e,n=St.defaultFormat){if(!e||isNaN(e))return null;let r=Xe[n],i="";if(!r){r=Xe[n]=[];for(let e=0;e<n.length;e++){const i=n.slice(e).match(nt),o=null==i?void 0:i[0];if(o){const n=(this.localize("L{formats}")||{})[o]||tt[o];r.push(n),e+=o.length-1}else if("{"===n[e]){const i=n.indexOf("}",e+1);-1===i?(r.push(n.substr(e+1)),e=n.length):(r.push(n.substring(e+1,i)),e=i)}else r.push(n[e])}}return r.forEach((n=>{i+="string"==typeof n?n:n(e)})),i}static formatRange(e,n){return n.replace(We,((n,r,i)=>wt.format(e["S"===r?0:1],i)))}static asMilliseconds(e,n=null){return"string"==typeof e&&(n=e,e=1),St.as("millisecond",e,n)}static asMonths(e){const n=St.as("ms",St.daysInMonth(e),"day"),r=(e.valueOf()-St.startOf(e,"month").valueOf())/n;return 12*e.getYear()+e.getMonth()+r}static monthsToDate(e){const n=Math.floor(e),r=e-n,i=new Date(0,n),o=St.as("ms",St.daysInMonth(i),"days");return i.setTime(i.getTime()+r*o),i}static formatDelta(e,n){let r,i;"boolean"==typeof n?r=n:n&&(r=n.abbrev);const o=this.getDelta(e,n),s=[],a=(null==n?void 0:n.separator)||(r?"":" ");for(i in o)s.push(`${o[i]}${a}${i}`);return!1===(null==n?void 0:n.asString)?s:s.join(", ")}static getDelta(e,n){let r,i,o,s,a,l,c;"boolean"==typeof n?r=n:n&&(r=n.abbrev,s=St.normalizeUnit(n.precision),l=n.maxUnit,c=!r&&n.ignoreLocale);const d={},u=r?St.getShortNameOfUnit:St.getLocalizedNameOfUnit,h=l?gt.slice(gt.indexOf(l)):gt;for(a of h)if(i=St.as(a,e),o=s===a,i=Math[o?"round":"floor"](i),(i||o&&!d.length)&&(d[c?a:u.call(St,a,1!==i)]=i,e-=St.as("ms",i,a)),o||!e)break;return d}static as(e,n,r="ms"){return"string"==typeof n&&(n=St.parseDuration(n)),"object"==typeof n&&(r=n.unit,n=n.magnitude),e===r||(e=St.normalizeUnit(e))===(r=St.normalizeUnit(r))?n:bt[r]>bt[e]?n*Math.abs(at[r][e]):n/Math.abs(at[e][r])}static formatContainsHourInfo(e){return/([HhKkmSsAa]|LT|L{3,}|l{3,})/.test(e.replace(/(\\.)/g,""))}static is24HourFormat(e){return St.format(St.getTime(13,0,0),e).includes("13")}static add(e,n,r="ms",i=!0){let o;if(o="string"==typeof e?St.parse(e):i?new Date(e.getTime()):e,"string"==typeof n){const e=wt.parseDuration(n);n=e.magnitude,r=e.unit}else n&&"object"==typeof n&&(r=n.unit,n=n.magnitude);if(!r||0===n)return o;switch(r=St.normalizeUnit(r)){case"millisecond":o.setTime(o.getTime()+n);break;case"second":o.setTime(o.getTime()+1e3*n);break;case"minute":o.setTime(o.getTime()+6e4*n);break;case"hour":o.setTime(o.getTime()+36e5*n);break;case"day":n%1==0?(o.setDate(o.getDate()+n),23===o.getHours()&&0===e.getHours()&&o.setHours(o.getHours()+1)):o.setTime(o.getTime()+864e5*n);break;case"week":o.setDate(o.getDate()+7*n);break;case"month":{let e=o.getDate();e>28&&(e=Math.min(e,St.getLastDateOfMonth(St.add(St.getFirstDateOfMonth(o),n,"month")).getDate())),o.setDate(e),o.setMonth(o.getMonth()+n);break}case"quarter":St.add(o,3*n,"month",!1);break;case"year":o.setFullYear(o.getFullYear()+n);break;case"decade":o.setFullYear(o.getFullYear()+10*n)}return o}static diff(e,n,r="ms",i=!0){if(r=St.normalizeUnit(r),!e||!n)return 0;let o;switch(r){case"year":o=St.diff(e,n,"month")/12;break;case"quarter":o=St.diff(e,n,"month")/3;break;case"month":o=12*(n.getFullYear()-e.getFullYear())+(n.getMonth()-e.getMonth()),0===o&&i&&(o=St.diff(e,n,"day",i)/St.daysInMonth(e));break;case"week":o=St.diff(e,n,"day")/7;break;case"day":{const r=e.getTimezoneOffset()-n.getTimezoneOffset();o=(n-e+60*r*1e3)/864e5;break}case"hour":o=(n-e)/36e5;break;case"minute":o=(n-e)/6e4;break;case"second":o=(n-e)/1e3;break;case"millisecond":o=n-e}return i?o:Math.round(o)}static startOf(e,n="day",r=!0,i=St.weekStartDay){if(!e)return null;switch(n=St.normalizeUnit(n),r&&(e=St.clone(e)),n){case"year":return e.setMonth(0,1),e.setHours(0,0,0,0),e;case"quarter":return e.setMonth(3*(St.get(e,"quarter")-1),1),e.setHours(0,0,0,0),e;case"month":return e.setDate(1),e.setHours(0,0,0,0),e;case"week":{const n=e.getDay()-i;return e.setDate(e.getDate()-n),e.setHours(0,0,0,0),e}case"day":return e.setHours(0,0,0,0),e;case"hour":e.getMinutes()>0&&e.setMinutes(0);case"minute":e.getSeconds()>0&&e.setSeconds(0);case"second":e.getMilliseconds()>0&&e.setMilliseconds(0);case"millisecond":return e}}static endOf(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+1)}static clone(e){return new Date(e.getTime())}static clearTime(e,n=!0){return e?(n&&(e=new Date(e.getTime())),e.setHours(0,0,0,0),e):null}static midnight(e,n){let r=St.clearTime(e);return n&&r<e&&(r=St.add(r,1,"d")),r}static getTimeOfDay(e,n="ms"){const r=e.getHours()*at.hour.millisecond+e.getMinutes()*at.minute.millisecond+e.getSeconds()*at.second.millisecond+e.getMilliseconds();return"ms"===n?r:St.as(n,r,"ms")}static set(e,n,r){if(!n)return e;if("string"==typeof n)switch(St.normalizeUnit(n)){case"millisecond":(0!==r||e.getMilliseconds()>0)&&e.setMilliseconds(r);break;case"second":(0!==r||e.getSeconds()>0)&&e.setSeconds(r);break;case"minute":(0!==r||e.getMinutes()>0)&&e.setMinutes(r);break;case"hour":e.setHours(r);break;case"day":case"date":e.setDate(r);break;case"week":throw new Error("week not implemented");case"month":e.setMonth(r);break;case"quarter":e.setDate(1),e.setMonth(3*(r-1));break;case"year":e.setFullYear(r)}else Object.entries(n).sort(((e,n)=>bt[e[0]]-bt[n[0]])).forEach((([n,r])=>{St.set(e,n,r)}));return e}static setDateToMidday(e,n=!0){return St.set(St.clearTime(e,n),"hour",12)}static constrain(e,n,r){return null!=n&&(e=St.max(e,n)),null==r?e:St.min(e,r)}static getTime(e,n=0,r=0,i=0){return e instanceof Date&&(i=e.getMilliseconds(),r=e.getSeconds(),n=e.getMinutes(),e=e.getHours()),new Date(2020,0,1,e,n,r,i)}static copyTimeValues(e,n){return e.setHours(n.getHours()),e.setMinutes(n.getMinutes()),e.setSeconds(n.getSeconds()),e.setMilliseconds(n.getMilliseconds()),e}static get isDSTEnabled(){const e=(new Date).getFullYear(),n=new Date(e,0,1),r=new Date(e,6,1);return n.getTimezoneOffset()!==r.getTimezoneOffset()}static isDST(e){const n=e.getFullYear(),r=new Date(n,0,1),i=new Date(n,6,1);return e.getTimezoneOffset()<Math.max(r.getTimezoneOffset(),i.getTimezoneOffset())}static isBefore(e,n){return e<n}static isAfter(e,n){return e>n}static isEqual(e,n,r=null){return null===r?e&&n&&e.getTime()===n.getTime():St.startOf(e,r)-St.startOf(n,r)==0}static compare(e,n,r=null){return r&&(e=St.startOf(e,r),n=St.startOf(n,r)),e<n?-1:e>n?1:0}static clamp(e,n,r){if(!isNaN(e))return null!=n&&(e=Math.max(e,n)),null!=r&&(e=Math.min(e,r)),new Date(e)}static isSameDate(e,n){return 0===St.compare(e,n,"d")}static isSameTime(e,n){return e.getHours()===n.getHours()&&e.getMinutes()===n.getMinutes()&&e.getSeconds()===n.getSeconds()&&e.getMilliseconds()===n.getMilliseconds()}static isStartOf(e,n){return St.isEqual(e,St.startOf(e,n))}static betweenLesser(e,n,r){return n.getTime()<=e.getTime()&&e.getTime()<r.getTime()}static betweenLesserEqual(e,n,r){return n.getTime()<=e.getTime()&&e.getTime()<=r.getTime()}static intersectSpans(e,n,r,i){return St.betweenLesser(e,r,i)||St.betweenLesser(r,e,n)}static compareUnits(e,n){return Math.sign(bt[St.normalizeUnit(e)]-bt[St.normalizeUnit(n)])}static timeSpanContains(e,n,r,i){return r-e>=0&&n-i>=0}static get weekStartDay(){return null==St._weekStartDay&&(St._weekStartDay=this.localize("L{weekStartDay}")||0),St._weekStartDay}static get nonWorkingDays(){return{...this.localize("L{nonWorkingDays}")}}static get nonWorkingDaysAsArray(){return Object.keys(this.nonWorkingDays).map(Number)}static get weekends(){return{...this.localize("L{weekends}")}}static get(e,n){switch(St.normalizeUnit(n)){case"millisecond":return e.getMilliseconds();case"second":return e.getSeconds();case"minute":return e.getMinutes();case"hour":return e.getHours();case"date":case"day":return e.getDate();case"week":return tt.W(e);case"month":return e.getMonth();case"quarter":return Math.floor(e.getMonth()/3)+1;case"year":return e.getFullYear()}return null}static daysInYear(e){const n=e.getFullYear(),r=new Date(n+1,0,1)-new Date(n,0,1);return this.as("day",r)}static daysInMonth(e){return 32-new Date(e.getFullYear(),e.getMonth(),32).getDate()}static hoursInDay(e){const n=e.getFullYear(),r=e.getMonth(),i=e.getDate(),o=new Date(n,r,i+1)-new Date(n,r,i);return this.as("hour",o)}static getNormalizedUnitDuration(e,n){let r;switch(n){case"month":r=St.asMilliseconds(St.daysInMonth(e),"day");break;case"year":r=St.asMilliseconds(St.daysInYear(e),"day");break;case"day":r=St.asMilliseconds(St.hoursInDay(e),"hour");break;default:r=St.asMilliseconds(n)}return r}static getFirstDateOfMonth(e){return new Date(e.getFullYear(),e.getMonth(),1)}static getLastDateOfMonth(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}static min(e,n){return e.getTime()<n.getTime()?e:n}static max(e,n){return e.getTime()>n.getTime()?e:n}static getNext(e,n,r=1,i=St.weekStartDay){if("week"===n){const n=St.clone(e),o=n.getDay();return St.startOf(n,"day",!1),St.add(n,i-o+7*(r-(i<=o?0:1)),"day",!1),n.getDay()!==i&&St.add(n,1,"hour"),n}return St.startOf(St.add(e,r,n),n,!1)}static isValidDate(e){return St.isDate(e)&&!isNaN(e)}static isDate(e){return e&&He.call(e)===Ve}static getStartOfNextDay(e,n=!1,r=!1){let i=St.add(r?e:St.clearTime(e,n),1,"day");if(i.getDate()===e.getDate()){const r=St.add(St.clearTime(e,n),2,"day").getTimezoneOffset(),o=e.getTimezoneOffset();i=St.add(i,o-r,"minute")}return i}static getEndOfPreviousDay(e,n=!1){const r=n?e:St.clearTime(e,!0);return r-e?r:St.add(r,-1,"day")}static getWeekDescription(e,n=e){const r=e.getMonth()===n.getMonth()?wt.format(e,"MMMM"):`${wt.format(e,"MMM")} - ${wt.format(n,"MMM")}`,i=wt.getWeekNumber(e);return`${i[1]}, ${r} ${i[0]}`}static getWeekNumber(e,n=wt.weekStartDay){const r=new Date(e.getFullYear(),0,1),i=new Date(e.getFullYear(),11,31),o=normalizeDay(r.getDay()-n),s=normalizeDay(i.getDay()-n),a=(l=e,c=r,Math.floor((l.getTime()-c.getTime()-(l.getTimezoneOffset()-c.getTimezoneOffset())*at.minute.millisecond)/at.day.millisecond)+1);var l,c;let d;if(d=o<4?Math.floor((a+o-1)/7)+1:Math.floor((a+o-1)/7),d){let n=e.getFullYear();return 53===d&&s<3&&(n++,d=1),[n,d]}const u=wt.getWeekNumber(new Date(e.getFullYear()-1,11,31))[1];return[e.getFullYear()-1,u]}static formatCount(e,n){return n=St.normalizeUnit(n),1!==e&&(n+="s"),e+" "+n}static getUnitToBaseUnitRatio(e,n,r=!1){return(e=St.normalizeUnit(e))===(n=St.normalizeUnit(n))?1:at[e]&&at[e][n]&&(r||at[e][n]>0)?1/St.as(n,1,e):at[n]&&at[n][e]&&(r||at[n][e]>0)?St.as(e,1,n):-1}static getShortNameOfUnit(e){return e=St.parseTimeUnit(e),St.unitLookup[e].abbrev}static getLocalizedNameOfUnit(e,n=!1){const r=e.charAt(0)===e.charAt(0).toUpperCase();return e=St.normalizeUnit(e),e=St.parseTimeUnit(e),e=St.unitLookup[e][n?"plural":"single"],r&&(e=w.capitalize(e)),e}static normalizeUnit(e){if(!e)return null;const n=e.toLowerCase();return"date"===n||ut.includes(n)?n:lt[e]||lt[n]}static getUnitByName(e){return St.normalizeUnit(e)||St.normalizeUnit(St.parseTimeUnit(e))}static getDurationInUnit(e,n,r,i){return St.diff(e,n,r,i)}static doesUnitsAlign(e,n){return!(e!==n&&"week"===n)}static getSmallerUnit(e){return ut[bt[St.normalizeUnit(e)]-1]||null}static getLargerUnit(e){return ut[bt[St.normalizeUnit(e)]+1]||null}static round(e,n,r,i){return St.snap("round",e,n,r,i)}static floor(e,n,r,i){return St.snap("floor",e,n,r,i)}static ceil(e,n,r,i){return St.snap("ceil",e,n,r,i)}static snap(e,n,r,i,o=St.weekStartDay){const s=vt[e];if("string"==typeof r&&(r=St.parseDuration(r)),M.isObject(r)){const a=r.magnitude||r.increment;switch(r.unit){case"week":{const r=n.getDay();return i=St.add(St.clearTime(n),r>=o?o-r:-(r-o+7),"day"),St[e](n,7*a+" days",i)}case"month":{let e;return n=St.asMonths(n),e=i?n+s(n-(i=St.asMonths(i)),a):s(n,a),St.monthsToDate(e)}case"quarter":return St[e](n,3*a+" months",i);case"year":return St[e](n,12*a+" months",i);case"decade":return St[e](n,10*a+" years",i)}r=St.as("ms",a,r.unit)}if(i){const e=St.as("ms",i.getTimezoneOffset()-n.getTimezoneOffset(),"ms");return new Date(i.valueOf()+s(St.diff(i,n,"ms")+e,r))}{const e=60*n.getTimezoneOffset()*1e3;return new Date(s(n.valueOf()-e,r)+e)}}static parseDuration(e,n=!0,r){var i;const o=(n?ct:dt).exec(e);if(null==e||!o)return null;const s=(e=>{const n=parseFloat(e);return isNaN(n)?null:n})(null==(i=o[1])?void 0:i.replace(",",".")),a=St.parseTimeUnit(o[2])||r;return a?{magnitude:s,unit:a}:null}static parseTimeUnit(e){const n=null==e?null:St.durationRegEx.exec(e.toLowerCase());if(!n)return null;for(let e=0;e<ut.length;e++)if(n[e+1])return ut[e]}static getGMTOffset(e=new Date){if(!e)return;const n=e.getTimezoneOffset();return n?(n>0?"-":"+")+Math.abs(Math.trunc(n/60)).toString().padStart(2,"0")+":"+Math.abs(n%60).toString().padStart(2,"0"):"Z"}static fillDayNames(){const e=new Date("2000-01-01T12:00:00"),n=St._dayNames||[],r=St._dayShortNames||[];n.length=0,r.length=0;for(let i=2;i<9;i++)e.setDate(i),n.push(St.format(e,"dddd")),r.push(St.format(e,"ddd"));St._dayNames=n,St._dayShortNames=r}static getDayNames(){return St._dayNames}static getDayName(e){return St._dayNames[e]}static getDayShortNames(){return St._dayShortNames}static getDayShortName(e){return St._dayShortNames[e]}static fillMonthNames(){const e=new Date("2000-01-15T12:00:00"),n=St._monthNames||[],r=St._monthShortNames||[],i={},o={};n.length=0,r.length=0;for(let s=0;s<12;s++){e.setMonth(s);const a=St.format(e,"MMMM");n.push(a);const l=St.format(e,"MMM");r.push(l),i[a.toLowerCase()]={name:a,value:s},o[l.toLowerCase()]={name:l,value:s}}St._monthNames=n,St._monthShortNames=r,St._monthNamesIndex=i,St._monthShortNamesIndex=o}static getMonthShortNames(){return St._monthShortNames}static getMonthShortName(e){return St._monthShortNames[e]}static getMonthNames(){return St._monthNames}static getMonthName(e){return St._monthNames[e]}static set locale(e){Ye=e,Qe={},Xe={},Ze={}}static get locale(){return Ye}static setupDurationRegEx(e=[],n=[]){const r=this,i={};let o="";for(let s=0;s<n.length;s++){const a=n[s],l=e[s];l.canonicalUnitName=ut[s],i[l.single]=i[l.single.toUpperCase()]=i[l.canonicalUnitName]=i[l.canonicalUnitName.toUpperCase()]=l,o+=(s?"|":"")+"(";for(let e=0;e<a.length;e++)o+=`${a[e]}|`;if("en-US"!==(Ye=r.localize("L{locale}")||"en-US")){const e=ht[s];for(let n=0;n<e.length;n++)o+=`${e[n]}|`}o+=`${l.single}|${l.plural}|${l.canonicalUnitName}|${l.canonicalUnitName}s)`}r.unitLookup=i,r.durationRegEx=new RegExp(`^(?:${o})$`)}static applyLocale(){const e=this,n=e.localize("L{unitAbbreviations}")||[],r=e.unitNames=e.localize("L{unitNames}");"unitNames"!==r&&(Ye=e.localize("L{locale}")||"en-US",Ke="en-US"===Ye?enOrdinalSuffix:e.localize("L{ordinalSuffix}")||Ke,Xe={},Ze={},Je={},Qe={},St._weekStartDay=null,St.setupDurationRegEx(r,n),St.fillDayNames(),St.fillMonthNames())}},Ct=wt;__publicField(Ct,"MS_PER_DAY",864e5);var St=Ct;St.useIntlFormat=useIntlFormat,Le.ion({locale:"applyLocale",prio:1e3,thisObj:St}),Le.locale&&St.applyLocale(),Ct._$name="DateHelper";var{hasOwn:xt}=M,Dt="1.01"===1.005.toFixed(2)?null:function(e,n){const r=e.toString().split("."),i=+(r[1]?r.join(".")+"1":r[0]);return e.toFixed.call(i,n)},Et=class extends M{static transformArrayToNamedObject(e,n="ref"){const r={};return e.forEach(((e,i)=>{const o=null!=e[n]&&e[n].toString().length?e[n]:i;r[o]=e})),r}static transformNamedObjectToArray(e,n="ref"){return Object.keys(e).filter((n=>e[n])).map((r=>{const i=e[r];return i[n]=r,i}))}static isEqual(e,n,r=!1){if(null===e&&null!==n||void 0===e&&void 0!==n||null===n&&null!==e||void 0===n&&void 0!==e)return!1;if(null==e&&null==n)return!0;if(e===n)return!0;const i=typeof e;if(i===typeof n){switch(i){case"number":case"string":case"boolean":return e===n}switch(!0){case e instanceof Date&&n instanceof Date:return e.getTime()===n.getTime();case Array.isArray(e)&&Array.isArray(n):return e.length===n.length&&e.every(((e,i)=>Rt.isEqual(e,n[i],r)));case"object"===i&&e.constructor.prototype===n.constructor.prototype:return r?Rt.isDeeplyEqual(e,n,r):w.safeJsonStringify(e)===w.safeJsonStringify(n)}}return String(e)===String(n)}static isDeeplyEqual(e,n,r={}){if(e===n)return!0;if(!e||!n)return!1;const i=Rt.keys(e,r.ignore),o=Rt.keys(n,r.ignore);if(i.length!==o.length)return!1;for(let s=0;s<i.length;s++){const a=i[s],l=o[s];if(a!==l)return!1;const c=e[a],d=n[l];if(!r.shouldEvaluate||!1!==r.shouldEvaluate(a,{value:c,object:e},{value:d,object:n})){if(r.evaluate){const i=r.evaluate(a,{value:c,object:e},{value:d,object:n});if(!1===i)return!1;if(!0===i)continue}if(!Rt.isEqual(c,d,r))return!1}}return!0}static isPartial(e,n){return e=String(e).toLowerCase(),n=String(n).toLowerCase(),-1!==e.indexOf(n)}static isLessThan(e,n){return e instanceof Date&&n instanceof Date?Ct.isBefore(e,n):e<n}static isMoreThan(e,n){return e instanceof Date&&n instanceof Date?Ct.isAfter(e,n):e>n}static fork(e){let n,r,i;if(e&&e.constructor===Object)for(r in n=Object.setPrototypeOf({},e),e)i=e[r],i&&(i.constructor===Object?n[r]=Rt.fork(i):i instanceof Array&&(n[r]=i.slice()));else n=e;return n}static copyProperties(e,n,r){let i,o;for(o=0;o<r.length;o++)i=r[o],i in n&&(e[i]=n[i]);return e}static copyPropertiesIf(e,n,r){if(n)for(const i of r)i in e||(e[i]=n[i]);return e}static entries(e,n){const r=[],i="function"==typeof n;if(e)for(const o in e)(i?n(o,e[o]):null==n?void 0:n[o])||r.push([o,e[o]]);return r}static fromEntries(e,n){if(n=n||{},e)for(let r=0;r<e.length;++r)n[e[r][0]]=e[r][1];return n}static keys(e,n,r){const i=[],o="function"==typeof n;if(e){let s=0;for(const a in e)(o?n(a,e[a]):null==n?void 0:n[a])||(i.push(r?r(a,s):a),++s)}return i}static values(e,n,r){const i=[],o="function"==typeof n;if(e){let s=0;for(const a in e)(o?n(a,e[a]):null==n?void 0:n[a])||(i.push(r?r(e[a],s):e[a]),++s)}return i}static pathExists(e,n){return n.split(".").every((n=>!(!e||!(n in e))&&(e=e[n],!0)))}static pathifyKeys(e){const n={};for(const r in e)if(xt(e,r))if(Array.isArray(e[r]))n[r]=e[r].slice();else if(e[r]instanceof Object){const i=this.pathifyKeys(e[r]);for(const e in i)n[`${r}.${e}`]=i[e]}else n[r]=e[r];return n}static deletePath(e,n){n.split(".").reduce(((e,n,r,i)=>{if(null==e)return null;if(xt(e,n)){if(r!==i.length-1)return e[n];delete e[n]}}),e)}static coerce(e,n){const r=M.typeOf(e),i=M.typeOf(n),o="string"==typeof e;if(r!==i)switch(i){case"string":return String(e);case"number":return Number(e);case"boolean":return!(o&&(!e||"false"===e||"0"===e))&&Boolean(e);case"null":return!(!o||e&&"null"!==e)&&null;case"undefined":return!(!o||e&&"undefined"!==e)&&void 0;case"date":return o&&isNaN(e)?Ct.parse(e):Date(Number(e))}return e}static wrapProperty(e,n,r,i,o=!0){const s={};let a=Object.getPrototypeOf(e),l=Object.getOwnPropertyDescriptor(a,n);for(;!l&&a&&o;)a=Object.getPrototypeOf(a),a&&(l=Object.getOwnPropertyDescriptor(a,n));l?(l.set?s.set=n=>{l.set.call(e,n),i&&i.call(e,l.get.call(e))}:s.set=i,l.get?s.get=()=>{let n=l.get.call(e);return r&&(n=r.call(e,n)),n}:s.get=r):(s.set=r=>{e[`_${n}`]=r,i&&i.call(e,r)},s.get=()=>{let i=e[`_${n}`];return r&&(i=r.call(e,i)),i}),Object.defineProperty(e,n,s)}static hookProperty(e,n,r){const i=Et.getPropertyDescriptor(r.prototype,"value"),o=Et.getPropertyDescriptor(e,n),s=`_${n}`,a=class{get value(){return o?o.get.call(this):this[s]}set value(e){o?o.set.call(this,e):this[s]=e}},l=Et.getPropertyDescriptor(a.prototype,"value");return Object.setPrototypeOf(r.prototype,a.prototype),Object.defineProperty(e,n,{configurable:!0,get:i.get||l.get,set:i.set||l.set}),()=>delete e[n]}static getPropertyDescriptor(e,n){let r=null;for(let i=e;i&&!r&&!xt(i,"isBase");i=Object.getPrototypeOf(i))r=Object.getOwnPropertyDescriptor(i,n);return r}static cleanupProperties(e,n=!1){return Object.entries(e).forEach((([r,i])=>{n?void 0===i&&delete e[r]:null==i&&delete e[r]})),e}static removeAllProperties(e){return Object.keys(e).forEach((n=>delete e[n])),e}static assertType(e,n,r){const i=M.typeOf(e);if(null!=e&&i!==n)throw new Error(`Incorrect type "${i}" for ${r}, expected "${n}"`)}static assertObject(e,n){Rt.assertType(e,"object",n)}static assertInstance(e,n){Rt.assertType(e,"instance",n)}static assertClass(e,n){Rt.assertType(e,"class",n)}static assertFunction(e,n){if("function"!=typeof e||e.isBase||e.$$name)throw new Error(`Incorrect type for ${n}, got "${e}" (expected a function)`)}static assertNumber(e,n){const r=Number(e);if("number"!=typeof e||isNaN(r))throw new Error(`Incorrect type for ${n}, got "${e}" (expected a Number)`)}static assertBoolean(e,n){Rt.assertType(e,"boolean",n)}static assertString(e,n){Rt.assertType(e,"string",n)}static assertArray(e,n){Rt.assertType(e,"array",n)}static toFixed(e,n){return Dt?Dt(e,n):e.toFixed(n)}static roundTo(e,n=1){return Math.round(e/n)*n}static round(e,n){if(null==n)return e;const r=10**n;return Math.round(e*r)/r}static getMapPath(e,n,r){const i=Array.isArray(n)?n:"string"==typeof n?n.split("."):[n],o=1===i.length,s=i[0],a=e.has(s)?e.get(s):e.set(s,o?r:{}).get(s);return o?a:Rt.getPathDefault(a,i.slice(1),r)}},Rt=Et;Et._$name="ObjectHelper";var kt=["border-top-width","border-right-width","border-bottom-width","border-left-width"],Tt=["margin-top","margin-right","margin-bottom","margin-left"],Mt=["padding-top","padding-right","padding-bottom","padding-left"],At="border-top-width",It="border-right-width",Ft="border-bottom-width",Pt="border-left-width",Ot="padding-top",Lt="padding-right",_t="padding-bottom",$t="padding-left",jt=Object.freeze({x:0,y:0}),zt=/^([trblc])(\d*)-([trblc])(\d*)$/i,Bt=/^([trblc])(\d*)$/i,Ht=["top","right","bottom","left"],Vt={t:0,r:1,b:2,l:3},Nt=["b-t","l-r","t-b","r-l"],qt={bt:1,tb:1,lr:2,rl:2},Wt=Object.freeze([0,0]),Ut=["width","height"],parseEdges=(e,n=e,r=e,i=n)=>Array.isArray(e)?parseEdges.apply(null,e):[e,n,r,i];function parseAlign(e,n){const r=zt.exec(e),i=r[1],o=r[3],s=parseInt(r[2]||50),a=parseInt(r[4]||50),l=!n||1&Vt[i]?s:100-s,c=!n||1&Vt[o]?a:100-a;return{myAlignmentPoint:i+l,myEdge:i,myOffset:l,targetAlignmentPoint:o+c,targetEdge:o,targetOffset:c,startZone:Vt[o],edgeAligned:qt[i+o]}}function flipAlign(e){return`${Ht[(Vt[e.myEdge]+2)%4][0]}${e.myOffset}-${Ht[(Vt[e.targetEdge]+2)%4][0]}${e.targetOffset}`}var Gt=class{get isRectangle(){return!0}static from(e,n,r){if("string"==typeof e?e=document.querySelector(e):(null==e?void 0:e.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&(e=e.host||e.ownerDocument),"string"==typeof n&&(n=document.querySelector(n)),null==e||e.isRectangle)return e;if(e=e.element||e,void 0===r&&"boolean"==typeof n&&(r=n,n=null),!(null==n?void 0:n.isRectangle))if(n){let{scrollLeft:e,scrollTop:r}=n;c.isSafari&&n===document.body&&(e=r=0),n=Gt.from(n).translate(-e,-r)}else n=jt;const i=e===document||e===globalThis,o=e===document.body&&0===document.body.offsetHeight,s=o&&e.getBoundingClientRect(),a=o?new Gt(s.left,s.top,s.width,document.body.parentElement.scrollHeight):i?new Gt(0,0,globalThis.innerWidth,globalThis.innerHeight):e.getBoundingClientRect(),l=r||i?[0,0]:[globalThis.pageXOffset,globalThis.pageYOffset];return new Gt(a.left+l[0]-n.x,a.top+l[1]-n.y,a.width,a.height)}static fromScreen(e,n){return Gt.from(e,n,!0)}static inner(e,n,r=!1){const i=this.from(e,n,r);if(document.body.contains(e)){const n=Gn.getStyleValue(e,kt);i.x+=parseFloat(n[Pt]),i.y+=parseFloat(n[At]),i.right-=parseFloat(n[It]),i.bottom-=parseFloat(n[Ft])}return i}static content(e,n,r=!1){const i=this.from(e,n,r);if(document.body.contains(e)){const n=Gn.getStyleValue(e,kt),r=Gn.getStyleValue(e,Mt);i.x+=parseFloat(n[Pt])+parseFloat(r[$t]),i.y+=parseFloat(n[At])+parseFloat(r[Ot]),i.right-=parseFloat(n[It])+parseFloat(r[Lt]),i.bottom-=parseFloat(n[Ft])+parseFloat(r[_t])}return i}static client(e,n,r=!1){const i=this.content(e,n,r),o=Gn.scrollBarWidth;let s;return o&&(e.scrollHeight>e.clientHeight&&"hidden"!==Gn.getStyleValue(e,"overflow-y")&&(s=parseFloat(Gn.getStyleValue(e,"padding-right")),i.right+=s-Math.max(s,o)),e.scrollWidth>e.clientWidth&&"hidden"!==Gn.getStyleValue(e,"overflow-x")&&(s=parseFloat(Gn.getStyleValue(e,"padding-bottom")),i.bottom+=s-Math.max(s,o))),i}static outer(e,n,r=!1){const i=this.from(e,n,r);if(document.body.contains(e)){const n=Gn.getStyleValue(e,Tt);i.x-=parseFloat(n["margin-left"]),i.y-=parseFloat(n["margin-top"]),i.right+=parseFloat(n["margin-right"]),i.bottom+=parseFloat(n["margin-bottom"])}return i}static union(...e){let n,{x:r,y:i,right:o,bottom:s}=e[0];if(e.length>1)for(let a=1;a<e.length;a++)n=e[a],n.x<r&&(r=n.x),n.y<i&&(i=n.y),n.right>o&&(o=n.right),n.bottom>s&&(s=n.bottom);return new Gt(r,i,o-r,s-i)}roundPx(e=globalThis.devicePixelRatio||1){const n=this;return n._x=Gn.roundPx(n._x,e),n._y=Gn.roundPx(n._y,e),n._width=Gn.roundPx(n._width,e),n._height=Gn.roundPx(n._height,e),n}static get $$name(){return hasOwnProperty.call(this,"$name")&&this.$name||hasOwnProperty.call(this,"_$name")&&this._$name||this.name}get $$name(){return this.constructor.$$name}constructor(e,n,r,i){Et.assertNumber(e,"Rectangle.x"),Et.assertNumber(n,"Rectangle.y"),Et.assertNumber(r,"Rectangle.width"),Et.assertNumber(i,"Rectangle.height");const o=this;r<0&&(e+=r,r=-r),i<0&&(n+=i,i=-i),o._x=e,o._y=n,o._width=r,o._height=i}clone(){const e=this,n=new Gt(e.x,e.y,e.width,e.height);return n.isAlignRectangle=e.isAlignRectangle,n.minHeight=e.minHeight,n.minWidth=e.minWidth,n}contains(e){const n=this;return!!e.isRectangle&&(e._x>=n._x&&e._y>=n._y&&e.right<=n.right&&e.bottom<=n.bottom)}intersect(e,n=!1,r=!1){const i=this,o=Math.max(i.y,e.y),s=Math.min(i.right,e.right),a=Math.min(i.bottom,e.bottom),l=Math.max(i.x,e.x);return!!(r?a>=o&&s>=l:a>o&&s>l)&&(!!n||new Gt(l,o,s-l,a-o))}equals(e,n=!1){const r=n?e=>Math.round(e):e=>e;return e.isRectangle&&r(e.x)===r(this.x)&&r(e.y)===r(this.y)&&r(e.width)===r(this.width)&&r(e.height)===r(this.height)}translate(e,n){return this._x+=e||0,this._y+=n||0,this}moveTo(e,n){return null!=e&&(this._x=e),null!=n&&(this._y=n),this}getDelta(e){return[e.x-this.x,e.y-this.y]}get center(){return new Gt.Point(this.x+this.width/2,this.y+this.height/2)}set x(e){const n=e-this._x;this._x=e,this._width-=n}get x(){return this._x}get start(){return this.left}set left(e){this.x=e}get left(){return this.x}set top(e){this.y=e}get top(){return this.y}set y(e){const n=e-this._y;this._y=e,this._height-=n}get y(){return this._y}set width(e){this._width=e}get width(){return this._width}set height(e){this._height=e}get height(){return this._height}set right(e){this._width=e-this._x}get right(){return this._x+this._width}get end(){return this.right}set bottom(e){this._height=e-this._y}get bottom(){return this._y+this._height}getStart(e,n=!0){return n?e?this.right:this.left:this.top}getEnd(e,n=!0){return n?e?this.left:this.right:this.bottom}get area(){return this.width*this.height}set minWidth(e){const n=this;isNaN(e)?n._minWidth=null:(n._minWidth=Number(e),n.isAlignRectangle||(n.width=Math.max(n.width,n._minWidth)))}get minWidth(){return this._minWidth}set minHeight(e){const n=this;isNaN(e)?n._minHeight=null:(n._minHeight=Number(e),n.isAlignRectangle||(n.height=Math.max(n.height,n._minHeight)))}get minHeight(){return this._minHeight}adjust(e,n,r,i){const o=this;return o.x+=e,o.y+=n,o.width+=r,o.height+=i,o}inflate(e,n=e,r=e,i=n){return Array.isArray(e)&&([e,n,r,i]=parseEdges(e)),this.adjust(-i,-e,n,r)}deflate(e,n=e,r=e,i=n){return Array.isArray(e)&&([e,n,r,i]=parseEdges(e)),this.adjust(i,e,-n,-r)}constrainTo(e,n){const r=this,i=r.height,o=r.y,s=r.minWidth||r.width,a=r.minHeight||r.height;if(r.height>=e.height){if(n&&a>e.height)return!1;r._y=e.y,r.height=e.height}if(r.width>=e.width){if(n&&s>e.width)return r.y=o,r.height=i,!1;r._x=e.x,r.width=e.width}return r.translate.apply(r,r.constrainVector=[Math.min(e.right-r.right,0),Math.min(e.bottom-r.bottom,0)]),r.translate(Math.max(e.x-r.x,0),Math.max(e.y-r.y,0)),r}alignTo(e){let n,r,i,o,s=this.clone(),{target:a,constrainTo:l,constrainPadding:c}=e;if(a&&!a.isRectangle&&(a=Gt.from(a.element?a.element:a)),l){if(!l.isRectangle){o=l===globalThis||l===document;const n="ignorePageScroll"in e?e.ignorePageScroll:!o;l=Gt.from(l.element?l.element:l,null,n)}c&&(c=parseEdges(c),c[0]=Math.min(c[0],a.top),c[1]=Math.min(c[1],l.right-a.right),c[2]=Math.min(c[0],l.bottom-a.bottom),c[3]=Math.min(c[0],a.left),l=l.deflate.apply(l.clone(),c))}const d=this,u=function createOffsets(e){return null==e?Wt:"number"==typeof e?[e,e]:e}(e.offset),{align:h,axisLock:g,anchorSize:p,anchorPosition:m,matchSize:f,position:b,rtl:v}=e,y=parseAlign(h,v),w=l&&l.clone(),C=[],S=[{zone:r=y.startZone,align:h}],x=f&&Ut[1&y.startZone],D=d[x];if(x&&g?s[x]=a[x]:!y.edgeAligned&&f&&(s.width=a.width,s.height=a.height),l&&s.constrainTo(l),l&&null!=y.startZone)if(g)S.push({zone:r=(r+2)%4,align:flipAlign(y)}),"flexible"===g&&(S.push({zone:r=(y.startZone+1)%4,align:Nt[r]}),S.push({zone:r=(r+2)%4,align:Nt[r]}));else for(let e=1;e<4;e++)S.push({zone:r=(r+1)%4,align:Nt[r]});if(m){const e=1&y.startZone?"y":"x";n={[e]:m[e],edge:Ht[(y.startZone+2)%4]}}if(w&&a&&(w.adjust(-a.width,-a.height,a.width,a.height),a.constrainTo(w)),s.minWidth=d.minWidth,s.minHeight=d.minHeight,b)s.moveTo(b.x,b.y),l&&s.constrainTo(l);else{const e="c"===y.myEdge||"c"===y.targetEdge,r=p&&!e?[p[1]+u[0],p[1]+u[1]]:u,c=a.getAlignmentPoint(y.targetAlignmentPoint,r),h=s.getAlignmentPoint(y.myAlignmentPoint);s.translate(c[0]-h[0],c[1]-h[1]);let m=s.intersect(a,!0);if(m)l&&s.constrainTo(l),i=y.startZone,s.translate(...r);else if(l&&!l.contains(s)){const e=s.clone(),c=[];let u,h;n=null,C[0]=u=l.clone(),u.bottom=a.y-r[1],C[1]=u=l.clone(),u.x=a.right+r[0],C[2]=u=l.clone(),u.y=a.bottom+r[1],C[3]=u=l.clone(),u.right=a.x-r[0];for(let e=0;e<S.length;e++){if(x&&2==e&&(s[x]=D),u=C[i=S[e].zone],s=s.alignTo({target:a,offsets:r,align:S[e].align}),s.constrainTo(u,!0)&&(c.push({result:s,zone:i}),!h||s.width<d.width||s.height<d.height)){s.align=S[e].align;break}if(!h||u.area>h.area){const e=s.clone();switch(i){case 0:e.moveTo(null,u.bottom-e.height);break;case 1:e.moveTo(u.left);break;case 2:e.moveTo(null,u.top);break;case 3:e.moveTo(u.right-e.width)}h={area:u.area,result:e,zone:i}}}c.length?(c.length>1&&!g&&c.sort(((n,r)=>Math.sqrt((e.x-n.result.x)**2+(e.y-n.result.y)**2)-Math.sqrt((e.x-r.result.x)**2+(e.y-r.result.y)**2))),s=c[0].result,i=c[0].zone):(s=h.result,i=h.zone,o&&s.constrainTo(l))}else i=y.startZone;if(s.zone=i,s.overlap=m=s.intersect(a,!0),p&&!m){if(!n){const e=1&i,r=e?"y":"x",o=e?"bottom":"right",l=Math.max(a[r],s[r]);let c=l+(Math.min(a[o],s[o])-l)/2-p[0]/2;const d=c+p[0];d>s[o]&&(c-=d-s[o]),c<s[r]&&(c+=s[r]-c),n={[r]:c-s[r],edge:Ht[(i+2)%4]}}s.anchor=n}}return s}getAlignmentPoint(e,n=Wt){const r=this,i=Bt.exec(e),o=i[1].toLowerCase(),s=Math.min(Math.max(parseInt(i[2]||50),0),100)/100;switch(o){case"t":return[r.x+r.width*s,r.y-n[1]];case"r":return[r.right+n[0],r.y+r.height*s];case"b":return[r.x+r.width*s,r.bottom+n[1]];case"l":return[r.x-n[0],r.y+r.height*s];case"c":return[r.x+r.width/2,r.y+r.height/2]}}highlight(){const e=this,n=Gn.createElement({parent:document.body,style:`position:absolute;z-index:9999999;pointer-events:none;\n                            left:${e.x}px;top:${e.y}px;width:${e.width}px;height:${e.height}px`});return Gn.highlight(n).then((()=>n.remove()))}visualize(e,n){const r=this,i=Et.merge({style:{left:`${r.x}px`,top:`${r.y}px`,width:`${r.width}px`,height:`${r.height}px`,pointerEvents:"none",...e.class?{}:{position:"absolute","z-index":9999999}}},e);return n?i:Gn.createElement(i)}toString(e=","){return[`${this.top}px`,`${this.right}px`,`${this.bottom}px`,`${this.left}px`].join(e)}};Gt._$name="Rectangle";var Yt=Symbol("value"),Kt=Symbol("length"),Xt=class{static change(e,n,r,i="string"){r=Xt.normalize(r,"object");const o=Xt.normalize(e,"array").filter((e=>!r[e]));if(n){n=Xt.normalize(n,"array");for(let e=0;e<n.length;++e)o.includes(n[e])||o.push(n[e])}return Xt.normalize(o,i)}static from(e,n){return e&&(e.isDomClassList?n=null==n||n:(n=null!=n?n:M.isObject(e)&&!M.isEmpty(e),e=new Xt(e)),e.value||n||(e=null)),e||(n?new Xt:null)}static normalize(e,n="string"){const r=typeof(e=e||""),i="array"===n,o=!i&&!("object"===n);let s,a,l,c="string"===r;for("object"===r&&(e.nodeType===Element.ELEMENT_NODE&&"function"==typeof e.getAttribute?(e=e.getAttribute("class")||"",c=!0):(null==e?void 0:e.isDomClassList)?e=e.values:e instanceof DOMTokenList?e=Array.from(e):e instanceof Map?e=Array.from(e.keys()).filter((n=>e.get(n))):e instanceof Set?e=Array.from(e):Array.isArray(e)||(e=M.getTruthyKeys(e))),c&&(e=[...new Set(w.split(e))]),a=e.length;a-- >0;)s=e[a],s.length?s.includes(" ")&&e.splice(a,1,...w.split(s)):e.splice(a,1);if(i)l=e;else if(o)l=e.join(" ");else for(l=Object.create(null),a=0;a<e.length;++a)l[e[a]]=!0;return l}constructor(...e){this.process(1,e)}clear(){for(const e in this)this[e]=!1;return this}set(...e){return this.clear().process(1,e)}get isDomClassList(){return!0}clone(){return new Xt(this)}contains(e){return!("string"!=typeof e||!e)&&Boolean(this[e])}toString(){return this.length?`${this.value} `:""}toJSON(){return this.toString()}trim(){return this.value}isEqual(e){const n=Xt.normalize(e,"array"),r=n.length;if(this.length===r){for(let e=0;e<r;e++)if(!this[n[e]])return!1;return!0}return!1}get value(){let e,n=this[Yt];return null==n&&(e=M.getTruthyKeys(this),this[Kt]=e.length,this[Yt]=n=e.join(" ")),n}set value(e){const n=this,r=Object.keys(n),i=r.length;for(let e=0;e<i;e++)delete n[r[e]];e?n.process(1,[e]):delete n[Yt]}get values(){return M.getTruthyKeys(this)}get length(){return this.value?this[Kt]:0}process(e,n){for(let r,i,o=0;o<n.length;o++)if(n[o])if(r=n[o],r.isDomClassList||M.isObject(r))for(i in r)this[i]=e?r[i]:!r[i];else for(r=Xt.normalize(n[o],"array"),i=0;i<r.length;++i)this[r[i]]=e;return delete this[Yt],this}assign(e){for(const n in e)!this[n]!=!e[n]&&(this[n]=e[n],delete this[Yt]);return this}assignTo(e){const n=e.nodeType===Element.ELEMENT_NODE?e.classList:e,r=Xt.from(n);r.add(this),n.value=r.value}add(...e){return this.process(1,e)}remove(...e){return this.process(0,e)}toggle(e,n=Boolean(!this[e])){if(n=Boolean(n),Boolean(this[e])!==n)return this[e]=n,delete this[Yt],!0}split(){return M.getTruthyKeys(this)}forEach(e){return M.getTruthyKeys(this).forEach(e)}};Xt.prototype[Yt]=null,Xt._$name="DomClassList";var Zt=class extends Gt{static from(e){const n=e.changedTouches;return new Zt(n?n[0].screenX:e.screenX,n?n[0].screenY:e.pageY)}constructor(e,n){super(e,n,0,0)}constrain(e){return this.x=Math.min(Math.max(this.x,e.x),e.right-1),this.y=Math.min(Math.max(this.y,e.y),e.bottom-1),this}toArray(){return[this.x,this.y]}};Object.getPrototypeOf(Zt).Point=Zt,Zt._$name="Point";var Qt=["clientX","clientY","pageX","pageY","screenX","screenY"],Jt={element:1,thisObj:1,once:1,delegate:1,delay:1,capture:1,passive:1,throttled:1,autoDetach:1,expires:1,block:1},en=!0,tn={configurable:en,value:!0},nn={Spacebar:"Space",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown"},rn={Meta:1,Control:1,Alt:1},on={Control:"ctrl",Alt:"alt",Shift:"shift"},sn=/^(ctrl|shift|alt|meta)$/,an=["altKey","bubbles","button","buttons","cancelBubble","cancelable","clientX","clientY","ctrlKey","layerX","layerY","metaKey","pageX","pageY","returnValue","screenX","screenY","shiftKey"],ln=class{static normalizeEvent(e){return Et.copyPropertiesIf(e,e.changedTouches[0]||e.touches[0],Qt)}static copyEvent(e,n){return Et.copyProperties(e,n,an)}static getXY(e){return e.touches&&(e=e.touches[0]),[e.clientX,e.clientY]}static getDistanceBetween(e,n){const r=dn.getXY(e),i=dn.getXY(n);return Math.sqrt(Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2))}static getPagePoint(e){return new Gt.Point(e.pageX,e.pageY)}static getClientPoint(e){return new Gt.Point(e.clientX,e.clientY)}static addListener(e,n,r,i){return i=e.nodeType?"string"==typeof n?Object.assign({element:e,[n]:r},i):Object.assign({element:e},n):e,dn.on(i)}static on(e){const n=e.element,r=e.thisObj,i=[];for(const r in e)if(!Jt[r]){let o=e[r];"object"!=typeof o&&(o={handler:o});const s=o.element||n;i.push(dn.addElementListener(s,r,o,e))}const detacher2=()=>{for(let e,n=0;n<i.length;n++)e=i[n],dn.removeEventListener(e[0],e[1],e[2]);i.length=0};return r&&!1!==e.autoDetach&&(r.doDestroy=he.createInterceptor(r.doDestroy,detacher2,r)),detacher2}static addElementListener(e,n,r,i){const o=dn.createHandler(e,n,r,i),{spec:s}=o,a=r.expires||i.expires,l=null!=s.capture||null!=s.passive?{capture:s.capture,passive:s.passive}:void 0;if(e.addEventListener(n,o,l),a){const s=r.thisObj||i.thisObj,l=(null==s?void 0:s.isDelayable)?s:globalThis,{alt:c}=a,d=c?a.delay:a,{spec:u}=o;u.expires=a,u.timerId=l["number"==typeof d?"setTimeout":"requestAnimationFrame"]((()=>{u.timerId=null,dn.removeEventListener(e,n,o),c&&!o.called&&("string"==typeof c?s[c]:c).call(s)}),d,`listener-timer-${performance.now()}`)}return[e,n,o,l]}static getComposedPathTarget(e){return e.composedPath()[0]||e.path[0]}static fixEvent(e){var n,r,i;if(e.fixed)return e;const{type:o,target:s}=e;if(((null==s?void 0:s.shadowRoot)||(null==(r=null==(n=null==s?void 0:s.getRootNode)?void 0:n.call(s))?void 0:r.host))&&e.composedPath){const n=this.getComposedPathTarget(e),r=s;Object.defineProperty(e,"target",{value:n,configurable:en}),Object.defineProperty(e,"originalTarget",{value:r,configurable:en})}if(Object.defineProperty(e,"fixed",tn),o.startsWith("key")){const n=nn[e.key];n&&Object.defineProperty(e,"key",{value:n,configurable:en})," "!==e.key||e.code||Object.defineProperty(e,"code",{value:"Space",configurable:en})}if(e.metaKey&&!e.ctrlKey&&Object.defineProperty(e,"ctrlKey",tn),s&&"offsetX"in e&&(Object.getOwnPropertyDescriptor(e,"borderOffsetX")||Object.defineProperty(e,"borderOffsetX",{get:()=>e.offsetX+(c.isSafari?0:parseInt(s.ownerDocument.defaultView.getComputedStyle(s).getPropertyValue("border-left-width")))}),Object.getOwnPropertyDescriptor(e,"borderOffsetY")||Object.defineProperty(e,"borderOffsetY",{get:()=>e.offsetY+(c.isSafari?0:parseInt(s.ownerDocument.defaultView.getComputedStyle(s).getPropertyValue("border-top-width")))})),(null==s?void 0:s.nodeType)===Element.DOCUMENT_NODE&&"clientX"in e){const n=Gn.elementFromPoint(e.clientX,e.clientY);Object.defineProperty(e,"target",{value:n,configurable:en})}if((null==s?void 0:s.nodeType)===Element.TEXT_NODE){const n=e.target.parentElement;Object.defineProperty(e,"target",{value:n,configurable:en})}if((null==(i=e.relatedTarget)?void 0:i.nodeType)===Element.TEXT_NODE){const n=e.target.parentElement;Object.defineProperty(e,"relatedTarget",{value:n,configurable:en})}return o.startsWith("touch")&&e.touches.length&&this.normalizeEvent(e),e}static createHandler(e,n,r,i){const o=r.delay||i.delay,s=r.throttled||i.throttled,a=r.block||i.block,l="once"in r?r.once:i.once,c="capture"in r?r.capture:i.capture,d="passive"in r?r.passive:i.passive,u="delegate"in r?r.delegate:i.delegate,h=r.handler,g=r.expires,p=r.thisObj||i.thisObj,{rtlSource:m=p}=p||{};let handler=(e,...n)=>{dn.playingDemo&&e.isTrusted||(null==p?void 0:p.isDestroyed)||(e=dn.fixEvent(e,null==m?void 0:m.rtl),handler.called=!0,("string"==typeof h?p[h]:h).call(p,e,...n),delete e.target,delete e.relatedTarget,delete e.originalarget,delete e.key,delete e.code,delete e.ctrlKey,delete e.fixed)};if(a){const e=handler;let n,r;handler=(i,...o)=>{const s=performance.now();(!n||i.target!==r||s-n>a)&&(r=i.target,n=s,e(i,...o))}}if(null!=o){const e=handler,n=(null==p?void 0:p.setTimeout)?p:globalThis;handler=(...r)=>{n.setTimeout((()=>{e(...r)}),o)}}if(null!=s){let e,n=s;s.buffer&&(e=e=>s.alt.call(dn,dn.fixEvent(e,null==m?void 0:m.rtl)),n=s.buffer),handler=(null==p?void 0:p.isDelayable)?p.throttle(handler,{delay:n,throttled:e}):he.createThrottled(handler,n,p,null,e)}if(l){const r=handler;handler=(...i)=>{dn.removeEventListener(e,n,handler),r(...i)}}if(u){const e=handler;handler=(n,...r)=>{var i;const o=(null==(i=(n=dn.fixEvent(n,null==m?void 0:m.rtl)).target.closest)?void 0:i.call)&&n.target.closest(u);o&&(Object.defineProperty(n,"currentTarget",{get:()=>o,configurable:!0}),e(n,...r))}}return r.thisObj&&!1!==r.autoDetach&&(p.doDestroy=he.createInterceptor(p.doDestroy,(()=>dn.removeEventListener(e,n,handler)),p)),handler.spec={delay:o,throttled:s,block:a,once:l,thisObj:p,capture:c,expires:g,passive:d,delegate:u},handler}static removeEventListener(e,n,r){const{expires:i,timerId:o,thisObj:s,capture:a}=r.spec;if((null==i?void 0:i.alt)&&o){((null==s?void 0:s.isDelayable)?s:globalThis)["number"==typeof i.delay?"clearTimeout":"cancelAnimationFrame"](o)}e.removeEventListener(n,r,a)}static onTransitionEnd({element:e,animationName:n,property:r,handler:i,mode:o=(n?"animation":"transition"),duration:s=Gn[`get${"transition"===o?"Property":""}${w.capitalize(o)}Duration`](e,r),thisObj:a=globalThis,args:l=[],timerSource:c,runOnDestroy:d}){let u;c=c||(a.isDelayable?a:globalThis);const h=[e,r,...l],doCallback=()=>{g(),a.isDestroyed||(a.callback?a.callback(i,a,h):i.apply(a,h))},g=dn.on({element:e,[`${o}end`]({animationName:i,propertyName:o,target:s}){s===e&&(o===r||(null==i?void 0:i.match(n)))&&(u&&(c.clearTimeout(u),u=null),doCallback())}});return null!=s&&(u=c.setTimeout(doCallback,s+50,"onTransitionEnd",d)),g}static async waitForTransitionEnd(e){return new Promise((n=>{e.handler=n,ln.onTransitionEnd(e)}))}static createDblClickWrapper(e,n,r){let i,o,s;return()=>{o||(o=dn.on({element:e,touchstart:e=>{i=e.changedTouches[0].identifier,e.preventDefault()},touchend:e=>{if(e.changedTouches[0].identifier===i){e.preventDefault(),clearTimeout(s),i=o=null;const a=Gt.from(e.changedTouches[0].target,null,!0),l=e.changedTouches[0].pageX-a.x,c=e.changedTouches[0].pageY-a.y,d=Object.assign({browserEvent:e},e),u=new MouseEvent("dblclick",d);Object.defineProperties(u,{target:{value:e.target},offsetX:{value:l},offsetY:{value:c}}),"string"==typeof n&&(n=r[n]),n.call(r,u)}},once:!0}),s=setTimeout((()=>{o(),i=o=null}),dn.dblClickTime))}}static toSpecialKey(e,n=(c.isMac?"metaKey":"ctrlKey")){let r=!1;return!0===e?r=n:"string"==typeof e&&(e=e.toLowerCase()).match(sn)&&(r=`${e}Key`),r}static specialKeyFromEventKey(e){return on[e]||""}},cn=ln;__publicField(cn,"eventNameMap",{mousedown:"MouseDown",mouseup:"MouseUp",click:"Click",dblclick:"DblClick",contextmenu:"ContextMenu",mouseover:"MouseOver",mouseout:"MouseOut",keyup:"KeyUp",keydown:"KeyDown",keypress:"KeyPress"});var dn=cn;dn.longPressTime=700,dn.dblClickTime=300,dn.globalListenerDetacher=dn.on({element:document,capture:!0,passive:!0,pointerdown({target:e}){var n;const r=Gn.getRootElement(e);Gn.usingKeyboard=!1,null==(n=r.classList)||n.remove("b-using-keyboard"),Gn.removeClsGlobally(r,"b-using-keyboard")},keydown({target:e,key:n}){if(!rn[n]){Gn.usingKeyboard=!0;const n=Gn.getRootElement(e);n.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from(n.children).forEach((e=>{e.matches(".b-outer")&&e.classList.add("b-using-keyboard")})):n.classList.add("b-using-keyboard")}}}),c.isTouchDevice&&dn.on({element:document,touchmove:e=>{e.target.closest(".b-dragging")&&e.preventDefault()},passive:!1,capture:!0}),cn._$name="EventHelper";var un={align:"t0-t0"},hn=Node.ELEMENT_NODE,gn=Node.TEXT_NODE,{isObject:pn}=Et,mn=/[+-]?\d*\.?\d+[eE]?-?\d*/g,bn=mn.source,vn=new RegExp(`matrix\\((?:${bn}),\\s?(?:${bn}),\\s?(?:${bn}),\\s?(?:${bn}),\\s?(${bn}),\\s?(${bn})`),yn=new RegExp("matrix3d\\((?:-?\\d*),\\s?(?:-?\\d*),\\s?(?:-?\\d*),\\s?(?:-?\\d*),\\s?(?:-?\\d*),\\s?(?:-?\\d*),\\s?(?:-?\\d*),\\s?(?:-?\\d*),\\s?(?:-?\\d*),\\s?(?:-?\\d*),\\s?(?:-?\\d*),\\s?(?:-?\\d*),\\s?(-?\\d*),\\s?(-?\\d*)"),wn=new RegExp(`(?:${vn.source})|(?:${yn.source})`),Cn=new RegExp(`translate(3d|X)?\\((${bn})px(?:,\\s?(${bn})px)?`),Sn=new RegExp(`translate(3d|Y)?\\((${bn})px(?:,\\s?(${bn})px)?`),xn=/\s+/,Dn=/\s*;\s*/,En=/\s*:\s*/,Rn=/^-?((\d+(\.\d*)?)|(\.?\d+))$/,kn={elementData:"",for:"htmlFor",retainElement:""},Tn={tag:1,html:1,text:1,children:1,tooltip:1,style:1,dataset:1,parent:1,nextSibling:1,ns:1,reference:1,class:1,className:1,unmatched:1,onlyChildren:1,listeners:1,compareHtml:1,syncOptions:1,keepChildren:1},Mn={length:1,parentRule:1,style:1},An={INPUT:1,TEXTAREA:1},In={BUTTON:1,IFRAME:1,EMBED:1,INPUT:1,OBJECT:1,SELECT:1,TEXTAREA:1,BODY:1},Fn=globalThis,Pn=document,On=Object.freeze({}),Ln=Array.prototype.slice,_n=Promise.resolve(),$n=["font-size","font-size-adjust","font-style","font-weight","font-family","font-kerning","font-stretch","line-height","text-transform","text-decoration","letter-spacing","word-break"],isHiddenWidget=e=>e._hidden,mergeChildren=(e,n,r)=>"children"===r.key?Et.mergeItems(e,n,r):Et.blend(e,n,r),isVisible=e=>{const n=e.ownerDocument.defaultView.getComputedStyle(e);return"none"!==n.getPropertyValue("display")&&"hidden"!==n.getPropertyValue("visibility")},hasLayout=e=>e&&(e===Pn.body||Boolean(e.offsetParent)||(e.ownerDocument.defaultView&&"offsetParent"in e&&"fixed"!==Gn.getStyleValue(e,"position")?e.offsetParent:hasLayout(e.parentNode))),elementOrConfigToElement=e=>e instanceof Node?e:"string"==typeof e?Yn.createElementFromTemplate(e):Yn.createElement(e),jn=Object.create(null),canonicalizeStyle=(e,n)=>{const r=jn[e]||[w.hyphenate(e),n];return jn[e]||(jn[r[0]]=jn[e]=r),r},zn=/b-slide-in-from-\w+/;["top","right","bottom","left","width","height","maxWidth","maxHeight","minWidth","minHeight","borderSpacing","borderWidth","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","fontSize","letterSpacing","lineHeight","outlineWidth","textIndent","wordSpacing"].forEach((e=>canonicalizeStyle(e,!0)));var Bn,Hn,Vn,Nn,qn=null,Wn=0,Un=null,Gn=class{static async slideIn(e,n=1){const r="b-slide-in-"+(n>0?"next":"previous"),{classList:i}=e,{style:o}=e.parentNode,{overflow:s,overflowX:a,overflowY:l}=o;o.overflow="hidden",i.add(r),await cn.waitForTransitionEnd({element:e,animationName:zn}),o.overflow=s,o.overflowX=a,o.overflowY=l,i.remove(r)}static isFocusable(e,n=!1){if(!n&&(!Yn.isVisible(e)||Yn.Widget.fromElement(e,isHiddenWidget)))return!1;const r=e.nodeName;return In[r]||("A"===r||"LINK"===r)&&!!e.href||null!=e.getAttribute("tabIndex")||"true"===e.contentEditable}static isEditable(e){return e.isContentEditable||An[e.nodeName]}static isInView(e,n=!1,r){if(!hasLayout(e))return!1;const i=(null==r?void 0:r.positioned)&&"fixed"!==Gn.getStyleValue(r.element,"position"),o=Gt.from(globalThis),s=n?"contains":"intersect",a=i&&r.element.offsetParent,l=i&&Gt.from(a);if(o.height=Pn.scrollingElement.scrollHeight,e===Pn.body)return o;const c=this.getViewportIntersection(e,o,s);return c&&i&&c.translate(Pn.scrollingElement.scrollLeft,Pn.scrollingElement.scrollTop),i&&c?c.translate(-l.x+a.scrollLeft,-l.y+a.scrollTop):c}static getViewportIntersection(e,n,r){const{parentNode:i}=e,{parentElement:o}=i.nodeType===Node.DOCUMENT_FRAGMENT_NODE?e.getRootNode().host:e,s=o.ownerDocument.defaultView.getComputedStyle(o),a="visible"!==s.overflowX||"visible"!==s.overflowY,l=(c=e).ownerSVGElement?c.ownerSVGElement.parentNode:c.offsetParent;var c;let d=Gt.from(e,null,!0);for(let i=a?e.parentNode:l;d&&i!==Pn.documentElement;i=i.parentNode){i.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&i.host&&(i=i.host.parentNode);const e=i===Pn.body,o=i.ownerDocument.defaultView.getComputedStyle(i),s=e?n:Gt.inner(i,null,!0);(e||"visible"!==o.overflow)&&(d=s[r](d,!1,!0))}return d}static isVisible(e){const n=e.ownerDocument;for(;e;e=(r=e).parentNode||r.host){if(e===n)return!0;if(e.nodeType===e.ELEMENT_NODE&&!isVisible(e))return!1}var r;return!1}static isDOMEvent(e){return e instanceof Event}static merge(e,...n){return Et.blend(e,n,{merge:mergeChildren})}static normalizeChildren(e,n,r){var i;let o,s,a,l,c,d=null==e?void 0:e.children;if((null==(i=null==e?void 0:e.syncOptions)?void 0:i.ignoreRefs)&&(r=!0),d&&!(e instanceof Node))if(Array.isArray(d))for(s=0;s<d.length;++s)Yn.normalizeChildren(d[s],n,r);else for(a in l=d,e.children=d=[],l)o=l[a],(null==o?void 0:o.isWidget)&&(o=o.element),c=!a.startsWith("$")&&!Yn.isElement(o),c&&(null==n||n(a,!r)),o&&(o instanceof Node||(!1===o.reference?delete o.reference:c&&"string"!=typeof o&&(o.reference=a),Yn.normalizeChildren(o,n,r)),d.push(o));return e}static roundPx(e,n=globalThis.devicePixelRatio||1){const r=1/n;return Math.round(e/r)*r}static floorPx(e,n=globalThis.devicePixelRatio||1){const r=1/n;return Math.floor(e*r)/r}static isCustomElement(e){return Boolean(null==e?void 0:e.shadowRoot)}static elementFromPoint(e,n){let r=document.elementFromPoint(e,n);return Yn.isCustomElement(r)&&(r=r.shadowRoot.elementFromPoint(e,n)||r),r}static childFromPoint(e,n,r,i=e){const o=null==r?n:new Gt(n,r,0,0);let s=null;return Array.from(e.children).reverse().some((e=>{if(Gt.from(e,i).contains(o))return s=e.children.length&&Yn.childFromPoint(e,o,null,i)||e,!0})),s}static unitize(e,n,r="px"){const[i,o]=canonicalizeStyle(e);return null!=n&&(n=String(n),n=o&&Rn.test(n)?n+r:n),[i,n]}static get activeElement(){let e=document.activeElement;for(;e.shadowRoot;)e=e.shadowRoot.activeElement;return e}static getActiveElement(e){(null==e?void 0:e.isWidget)&&(e=e.element);let n=((null==e?void 0:e.getRootNode())||document).activeElement;for(;null==n?void 0:n.shadowRoot;)n=n.shadowRoot.activeElement;return n}static getRootElement(e){var n;const r=null==(n=e.getRootNode)?void 0:n.call(e),{nodeType:i}=r;return i===Node.DOCUMENT_NODE?r.body:i===Node.DOCUMENT_FRAGMENT_NODE?r:e.ownerDocument.contains(e)?e.ownerDocument.body:null}static getOutermostElement(e){var n;const r=null==(n=e.getRootNode)?void 0:n.call(e);if(null==r?void 0:r.body)return null==r?void 0:r.body;for(;e.parentNode!==r&&e.parentNode;)e=e.parentNode;return e}static isValidFloatRootParent(e){return e===document.body||"ShadowRoot"===e.constructor.name}static getId(e){return e.id||(e.id="b-element-"+ ++Wn)}static getCommonAncestor(e,n){var r;if(e===n)return e;for(;e&&!(null==(r=e[e.isWidget?"owns":"contains"])?void 0:r.call(e,n))&&e!==n;)e=e.owner||e.parentNode;return e}static getElement(e){return e instanceof Element?e:Pn.querySelector(e)}static setAttributes(e,n){const r=Yn.getElement(e);if(r&&n)for(const e in n)null==n[e]?r.removeAttribute(e):r.setAttribute(e,n[e])}static setLength(e,n,r){return r=1===arguments.length?"number"==typeof e?`${e}px`:null!=e?e:"":(e=Yn.getElement(e)).style[n]="number"==typeof r?`${r}px`:null!=r?r:""}static percentify(e,n=2){const r=Math.pow(10,n);return null==e||""===e||isNaN(e)?"":Math.round(e*r)/r+"%"}static getChild(e,n){return e.querySelector(":scope>"+n)}static hasChild(e,n){return null!=Yn.getChild(e,n)}static children(e,n){return(">"===n[0]||n.startsWith("# "))&&("#"===n[0]&&(n=n.substr(2)),n=":scope "+n),Array.from(e.querySelectorAll(n))}static getChildElementCount(e){return e.childElementCount}static down(e,n){return e?e.matches&&e.matches(n)?e:(n=":scope "+n,e.querySelector(n)):null}static isDescendant(e,n){const r=Yn.getRootElement(e),i=Yn.getRootElement(n);return i&&r!==i&&i.host?Yn.isDescendant(r,i.host):e.contains(n)}static getEventElement(e,n="target"){return!e||Yn.isElement(e)?e:e[n]}static isElement(e){return(null==e?void 0:e.nodeType)===document.ELEMENT_NODE&&Yn.isNode(e)}static isReactElement(e){return(null==e?void 0:e.$$typeof)===Symbol.for("react.element")}static isNode(e){return Boolean(e)&&"number"==typeof e.nodeType&&!pn(e)}static forEachSelector(e,n,r){if("string"==typeof e)throw new Error("DomHelper.forEachSelector must provide a root element context (for shadow root scenario)");Yn.children(e,n).forEach(r)}static forEachChild(e,n){Array.from(e.children).forEach(n)}static removeEachSelector(e,n){Yn.forEachSelector(e,n,(e=>e.remove()))}static removeClsGlobally(e,...n){n.forEach((n=>Yn.forEachSelector(e,"."+n,(e=>e.classList.remove(n)))))}static up(e,n){return A.deprecate("Core","6.0.0","DomHelper.up() deprecated, use native `element.closest()` instead"),e.closest(n)}static getAncestor(e,n,r=null){let i,o=!1,s=e;for(n=oe.asArray(n);s=s.parentElement;){if(n.includes(s)){o=!0;break}if(r&&s===r)break;i=s}return o?i||e:null}static getParents(e){const n=[];for(;e.parentElement;)n.push(e.parentElement),e=e.parentElement;return n}static makeValidId(e,n=""){return w.makeValidDomId(e,n)}static createElement(e={},n){var r,i;let o,s,a,l,c,d,u,h,g,p,m,f=n;if("boolean"==typeof f)throw new Error("Clean up");n&&(c=n.ignoreRefs,g=n.refOwner,p=n.refs,f=n.returnAll,m=n.syncIdField,c&&(a=!0,c="children"!==c)),"string"==typeof e.parent&&(e.parent=document.getElementById(e.parent));const b=e.parent||e.nextSibling&&e.nextSibling.parentNode,{dataset:v,html:y,reference:w,syncOptions:C,text:S}=e;if(C&&(m=C.syncIdField||m,l=C.ignoreRefs,l&&(a=!0,c="children"!==l,n={...n,ignoreRefs:!0})),c&&(g=null),o=e.ns?Pn.createElementNS(e.ns,e.tag||"svg"):Pn.createElement(e.tag||"div"),null!=S?Yn.setInnerText(o,S):null!=y&&(y instanceof DocumentFragment?o.appendChild(y):o.innerHTML=y),e.tooltip&&Yn.Widget.attachTooltip(o,e.tooltip),e.style&&Yn.applyStyle(o,e.style),v)for(u in v)h=v[u],null!=h&&(o.dataset[u]=h);b&&this.addChild(b,o,e.nextSibling),g&&(o.$refOwnerId=g.id),w&&!c&&(g?(o.$reference=w,g.attachRef(w,o,e)):(p||((n=Object.assign({},n)).refs=p={}),p[w]=o,o.setAttribute("data-reference",w)));const x=e.className||e.class,D=Object.keys(e);for(x&&o.setAttribute("class",Xt.normalize(x)),s=0;s<D.length;++s)u=D[s],h=e[u],null!=(d=kn[u])?o[d||u]=h:!Tn[u]&&u&&null!=h&&o.setAttribute(u,h);return e["aria-hidden"]||e.role||e.tabIndex||Gn.isFocusable(o,!0)||o.htmlFor||o.setAttribute("role","presentation"),null==(i=null==n?void 0:n.callback)||i.call(n,{action:"newElement",domConfig:e,targetElement:o,syncId:g?w:n.syncIdField&&(null==(r=e.dataset)?void 0:r[n.syncIdField])}),!0===f?n.returnAll=f=[o]:Array.isArray(f)&&f.push(o),e.children&&(m&&(o.syncIdMap={}),e.children.forEach((r=>{var i,s,l;if(r)if("string"==typeof r){const e=document.createTextNode(r);g&&(e.$refOwnerId=g.id),o.appendChild(e)}else if(isNaN(r.nodeType)){r.parent=o,!r.ns&&e.ns&&(r.ns=e.ns);const c=Yn.createElement(r,{...n,ignoreRefs:null!=(s=null==(i=e.syncOptions)?void 0:i.ignoreRef)?s:a}),d=null==(l=r.dataset)?void 0:l[m];null!=d&&(o.syncIdMap[d]=c),delete r.parent}else o.appendChild(r)}))),o.lastDomConfig=e,p||f||o}static createElementFromTemplate(e,n=On){const{array:r,raw:i,fragment:o}=n;let s;if(Yn.supportsTemplate){if((Bn||(Bn=Pn.createElement("template"))).innerHTML=e,s=Bn.content,o)return s.cloneNode(!0)}else if(s=(Hn||(Hn=new DOMParser)).parseFromString(e,"text/html").body,o){const e=s.childNodes;for(s=document.createDocumentFragment();e.length;)s.appendChild(e[0]);return s}return s=i?s.childNodes:s.children,1!==s.length||r?Ln.call(s):s[0]}static triggerMouseEvent(e,n="contextmenu"){const r=(this.isInView(e)||Gt.from(e)).center,i=new MouseEvent(n,{clientX:r.x,clientY:r.y,bubbles:!0});e.dispatchEvent(i)}static insertFirst(e,n){return n&&n.nodeType!==hn&&n.tag&&(n=Yn.createElement(n)),e.insertBefore(n,e.firstElementChild)}static insertBefore(e,n,r){return n&&n.nodeType!==hn&&n.tag&&(n=Yn.createElement(n)),r?e.insertBefore(n,r):Yn.insertFirst(e,n)}static insertAt(e,n,r){const i=Array.from(e.children);if(r>=i.length)return Yn.append(e,n);const o=i[r];return Yn.insertBefore(e,n,o)}static append(e,n){if(n.forEach){if(Array.isArray(n)&&(n=n.map((e=>elementOrConfigToElement(e)))),e.append)e.append(...n);else{const r=document.createDocumentFragment();n.forEach((function(e){r.appendChild(e)})),e.appendChild(r)}return n}return e.appendChild(elementOrConfigToElement(n))}static getTranslateX(e){const n=e.style.transform;let r=Cn.exec(n);return r?parseFloat(r[2]):(r=wn.exec(n)||wn.exec(Yn.getStyleValue(e,"transform")),r?parseFloat(r[1]||r[3]):0)}static getTranslateY(e){const n=e.style.transform;let r=Sn.exec(n);if(r){const e=parseFloat(r["Y"===r[1]?2:3]);return isNaN(e)?0:e}return r=wn.exec(n)||wn.exec(Yn.getStyleValue(e,"transform")),r?parseFloat(r[2]||r[4]):0}static getTranslateXY(e){return[Yn.getTranslateX(e),Yn.getTranslateY(e)]}static getOffsetX(e,n=null){return n?e.getBoundingClientRect().left-n.getBoundingClientRect().left:e.offsetLeft}static getOffsetY(e,n=null){return n?e.getBoundingClientRect().top-n.getBoundingClientRect().top:e.offsetTop}static getOffsetXY(e,n=null){return[Yn.getOffsetX(e,n),Yn.getOffsetY(e,n)]}static focusWithoutScrolling(e){if(!c.isSafari)e.focus({preventScroll:!0});else{const n=Yn.getParents(e).map((e=>({element:e,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop})));e.focus(),setTimeout((()=>function resetScroll(e){e.forEach((({element:e,scrollLeft:n,scrollTop:r})=>{e.scrollLeft!==n&&(e.scrollLeft=n),e.scrollTop!==r&&(e.scrollTop=r)}))}(n)),0)}}static getPageX(e){return e.getBoundingClientRect().left+Fn.pageXOffset}static getPageY(e){return e.getBoundingClientRect().top+Fn.pageYOffset}static getExtremalSizePX(e,n){const r=w.hyphenate(n),i=r.split("-")[1];let o=Yn.getStyleValue(e,r);return o=/%/.test(o)?e.parentElement?parseInt(Yn.getStyleValue(e.parentElement,i),10):NaN:parseInt(o,10),o}static setScale(e,n,r=n){const i=Yn.getStyleValue(e,"transform").split(/,\s*/);i.length>1?(i[0].startsWith("matrix3d")?(i[0]=`matrix3d(${n}`,i[5]=r):(i[0]=`matrix(${n}`,i[3]=r),e.style.transform=i.join(",")):e.style.transform=`scale(${n}, ${r})`}static setTranslateX(e,n){const r=Yn.getStyleValue(e,"transform").split(/,\s*/);n=Yn.roundPx(n),r.length>1?(r[r[0].startsWith("matrix3d")?12:4]=n,e.style.transform=r.join(",")):e.style.transform=`translateX(${n}px)`}static setTranslateY(e,n){const r=Yn.getStyleValue(e,"transform").split(/,\s*/);n=Yn.roundPx(n),r.length>1?(r[r[0].startsWith("matrix3d")?13:5]=n,e.style.transform=r.join(",")+")"):e.style.transform=`translateY(${n}px)`}static setTop(e,n){Yn.setLength(e,"top",n)}static setLeft(e,n){Yn.setLength(e,"left",n)}static setTopLeft(e,n,r){Yn.setLength(e,"top",n),Yn.setLength(e,"left",r)}static setRect(e,{x:n,y:r,width:i,height:o}){Yn.setTopLeft(e,r,n),Yn.setLength(e,"width",i),Yn.setLength(e,"height",o)}static setTranslateXY(e,n,r){if(null==n)return Yn.setTranslateY(e,r);if(null==r)return Yn.setTranslateX(e,n);n=Yn.roundPx(n),r=Yn.roundPx(r);const i=Yn.getStyleValue(e,"transform").split(/,\s*/),o=i[0].startsWith("matrix3d");i.length>1?(i[o?12:4]=n,i[o?13:5]=r,e.style.transform=i.join(",")+")"):e.style.transform=`translate(${n}px, ${r}px)`}static addTranslateX(e,n){Yn.setTranslateX(e,Yn.getTranslateX(e)+n)}static addTranslateY(e,n){Yn.setTranslateY(e,Yn.getTranslateY(e)+n)}static addLeft(e,n){Yn.setLeft(e,Yn.getOffsetX(e)+n)}static addTop(e,n){Yn.setTop(e,Yn.getOffsetY(e)+n)}static alignTo(e,n,r=un,i){n=n instanceof Gt?n:Gt.from(n,!0);const o=Yn.getTranslateXY(e),s=Gt.from(e,!0);i&&(s.roundPx(),n.roundPx());const a=s.alignTo(Object.assign(r,{target:n}));Yn.setTranslateXY(e,o[0]+a.x-s.x,o[1]+a.y-s.y)}static getStyleValue(e,n,r,i){const o=r?e.style:e.ownerDocument.defaultView.getComputedStyle(e,i);if(Array.isArray(n)){const e={};for(const r of n)e[r]=o.getPropertyValue(w.hyphenate(r));return e}return o.getPropertyValue(w.hyphenate(n))}static getEdgeSize(e,n,r){const i="border"===n?"-width":"",o={raw:{}};for(const s of["top","right","bottom","left"])r&&!r.includes(s[0])||(o[s]=parseFloat(o.raw[s]=Yn.getStyleValue(e,`${n}-${s}${i}`)));return o.width=(o.left||0)+(o.right||0),o.height=(o.top||0)+(o.bottom||0),o}static parseStyle(e){if("string"==typeof e){const n=e.split(Dn);e={};for(let r=0,{length:i}=n;r<i;r++){const i=n[r].split(En);e[i[0]]=i[1]}}return e||{}}static applyStyle(e,n,r=!1){if("string"==typeof n)r?(n.length||e.style.cssText.length)&&(e.style.cssText=n):e.style.cssText+=n;else if(n){let i,o;for(i in r&&(e.style.cssText=""),n.style&&"string"!=typeof n.style&&(n=Et.assign({},n,n.style)),n)Mn[i]||([i,o]=Yn.unitize(i,n[i]),null==o?e.style.removeProperty(i):e.style.setProperty(i,o));"string"==typeof n.style&&(e.style.cssText+=n.style)}}static getCSSText(e){if("string"==typeof e)return e;let n="";for(const r in e)Mn[r]||(n+=`${w.hyphenate(r)}:${e[r]};`);return n}static addClasses(e,n){A.deprecate("Core","6.0.0","DomHelper.addClasses should be replaced by native classList.add"),e.classList.add(...n)}static removeClasses(e,n){A.deprecate("Core","6.0.0","DomHelper.removeClasses should be replaced by native classList.remove"),e.classList.remove(...n)}static toggleClasses(e,n,r=null){n=oe.asArray(n),!0===r?e.classList.add(...n):!1===r?e.classList.remove(...n):n.forEach((n=>e.classList.toggle(n)))}static addTemporaryClass(e,n,r,i=globalThis){r>0&&(e.classList.add(n),i.setTimeout({fn:n=>e.classList.remove(n),delay:r,name:n,args:[n],cancelOutstanding:!0}))}static getPropertyTransitionDuration(e,n){const r=globalThis.getComputedStyle(e),i=r.transitionProperty.split(", "),o=r.transitionDuration.split(", "),s=i.indexOf(w.hyphenate(n));let a;return-1!==s&&(a=1e3*parseFloat(o[s])),a}static getAnimationDuration(e){return 1e3*parseFloat(Yn.getStyleValue(e,"animation-duration"))}static highlight(e,n=globalThis){return e instanceof Gt?e.highlight():new Promise((r=>{n.setTimeout((()=>{e.classList.add("b-fx-highlight"),n.setTimeout((()=>{e.classList.remove("b-fx-highlight"),r()}),1e3)}),0)}))}static get scrollBarWidth(){if(null===qn){const e=Vn||(Vn=Yn.createElement({parent:Pn.documentElement,style:"position:absolute;top:-9999em;height:100px;overflow-y:scroll"}));e.parentNode!==Pn.documentElement&&Pn.documentElement.appendChild(e),qn=e.offsetWidth}return qn}static get scrollBarPadElement(){return{className:"b-yscroll-pad",children:[{className:"b-yscroll-pad-sizer"}]}}static resetScrollBarWidth(){qn=null}static measureText(e,n,r=!1,i=void 0){const o=Yn.getMeasureElement(n,i);o[r?"innerHTML":"innerText"]=e;const s=o.clientWidth;return o.className="",s}static measureSize(e,n,r=!0){if(!e)return 0;if("number"==typeof e)return e;if(!e.length)return 0;if(/^\d+(px)?$/.test(e))return parseInt(e);if(n){const i=Yn.getMeasureElement(n);i.innerHTML="",i.style.width=Yn.setLength(e);const o=r?i.offsetWidth:i.getBoundingClientRect().width;return i.style.width=i.className="",o}return/^\d+em$/.test(e)?14*parseInt(e):isNaN(e)?0:parseInt(e)}static getMeasureElement(e,n=Pn.body){const r=Fn.getComputedStyle(e),i=n.offScreenDiv=n.offScreenDiv||Yn.createElement({parent:n,style:"position:fixed;top:-10000px;left:-10000px;visibility:hidden;contain:strict",className:"b-measure-element",children:[{style:"white-space:nowrap;display:inline-block;will-change:contents;width:auto;contain:none"}]},{returnAll:!0})[1];return $n.forEach((e=>{i.style[e]!==r[e]&&(i.style[e]=r[e])})),i.className=e.className,i.parentElement.parentElement!==n&&n.appendChild(i.parentElement),i}static stripTags(e){return(Yn.$domParser||(Yn.$domParser=new DOMParser)).parseFromString(e,"text/html").body.textContent}static sync(e,n){if("string"==typeof e){if(""===e)return void(n.innerHTML="");e=Yn.createElementFromTemplate(e)}return Yn.performSync(e,n),n}static performSync(e,n){return e.outerHTML!==n.outerHTML&&(Yn.syncAttributes(e,n),Yn.syncContent(e,n),Yn.syncChildren(e,n),!0)}static getSyncAttributes(e){const n={},r=[];for(let i=0;i<e.attributes.length;i++){const o=e.attributes[i];if(o.specified){const e=o.name.toLowerCase();n[e]=o.value,r.push(e)}}return{attributes:n,names:r}}static syncAttributes(e,n){const{attributes:r,names:i}=Yn.getSyncAttributes(e),{attributes:o,names:s}=Yn.getSyncAttributes(n),a=i.includes("dataset"),l=i.filter((e=>!s.includes(e))),c=s.filter((e=>!(i.includes(e)||a&&e.startsWith("data-")))),d=i.filter((e=>s.includes(e)));if(l.length>0)for(let e=0;e<l.length;e++){const i=l[e];"style"===i?Yn.applyStyle(n,r.style,!0):"dataset"===i?Object.assign(n.dataset,r.dataset):n.setAttribute(i,r[i])}if(c.length>0)for(let e=0;e<c.length;e++)n.removeAttribute(c[e]);if(d.length>0)for(let e=0;e<d.length;e++){const i=d[e];if("style"===i)Yn.applyStyle(n,r.style,!0);else if("dataset"===i)Object.assign(n.dataset,r.dataset);else if("class"!==i||!r.class.isDomClassList&&"object"!=typeof r.class)o[i]!==r[i]&&n.setAttribute(i,r[i]);else{let e;e=r.class.isDomClassList?r.class:new Xt(r.class),e.isEqual(o.class)||n.setAttribute("class",e)}}}static syncContent(e,n){0===Yn.getChildElementCount(e)&&(n.innerText=e.innerText)}static setInnerText(e,n){const{firstChild:r}=e;(null==r?void 0:r.nodeType)===Element.TEXT_NODE?r.data=n:e.textContent=n}static syncChildren(e,n){const r=this,i=Ln.call(e.childNodes),o=Ln.call(n.childNodes);for(;i.length;){const e=i.shift(),s=o.shift();if(e&&e.nodeType!==gn&&e.nodeType!==hn)throw new Error(`Source node type ${e.nodeType} not supported by DomHelper.sync()`);if(s&&s.nodeType!==gn&&s.nodeType!==hn)throw new Error(`Target node type ${s.nodeType} not supported by DomHelper.sync()`);if(s)if(e.nodeType===s.nodeType)e.nodeType===gn?s.data=e.data:e.tagName===s.tagName?r.performSync(e,s):(n.insertBefore(e,s),s.remove());else{if(e.nodeType!==gn||s.nodeType!==hn){const n=e.parentElement||e;throw new Error(`Currently no support for transforming nodeType.\n${n.outerHTML}`)}n.innerText=e.data.trim()}else n.appendChild(e)}o.forEach((e=>{e.remove()}))}static syncClassList(e,n){const{classList:r}=e,i="string"==typeof n,o=i?n.split(xn):Xt.normalize(n,"array"),s=o.length;let a,l=r.length!==s;for(a=0;!l&&a<s;a++)l=!r.contains(o[a]);return l&&(e.className=i?n:o.join(" ")),l}static updateClassList(e,n){const{classList:r}=e;let i,o,s=!1;for(i in n)o=Boolean(n[i]),r.contains(i)!==o&&(r[o?"add":"remove"](i),s=!0);return s}static setTheme(e,n){e=e.toLowerCase();const{head:r}=document,i=Yn.getThemeInfo(n).name.toLowerCase();let o=r.querySelectorAll("[data-bryntum-theme]:not([data-loading])"),s=0;if(i===e)return _n;Yn.removeEachSelector(r,"#bryntum-theme[data-loading],link[data-bryntum-theme][data-loading]");const a={theme:e,prev:i};function replaceTheme(n,r,l){const c=Gn.createElement({tag:"link",rel:"stylesheet",dataset:{loading:!0,bryntumTheme:!0},href:n.href.replace(i,e),nextSibling:n});c.addEventListener("load",(()=>{delete c.dataset.loading,Un=null,++s===o.length&&(o.forEach((e=>e.remove())),or.trigger("theme",a),r(a))})),c.addEventListener("error",(e=>{delete c.dataset.loading,l(e)}))}if(o.length)return new Promise(((e,n)=>{o.forEach(((r,i)=>{replaceTheme(r,e,n,o.length)}))}));{const e=r.querySelector("#bryntum-theme:not([data-loading])")||r.querySelector(`[href*="${i}.css"]:not([data-loading])`);if(!(null==e?void 0:e.href.includes(`${i}.css`)))throw new Error(`Theme link for ${i} not found`);return o=[e],new Promise(((n,r)=>replaceTheme(e,n,r)))}}static get themeInfo(){return Gn.getThemeInfo()}static getThemeInfo(e){if(!Un){const n=Yn.createElement({parent:document.body,className:"b-theme-info"}),r=Yn.getStyleValue(n,"content",!1,":before");if(r)try{Un=JSON.parse(r.replace(/^["']|["']$|\\/g,""))}catch(e){Un=null}Un=Un||(e?{name:e}:null),n.remove()}return Un}static async transition({element:e,selector:n="[data-dom-transition]",duration:r,action:i,thisObj:o=this,addTransition:s={},removeTransition:a={}}){const l=new Set,c=Array.from(e.querySelectorAll(n)),d=new Map(c.map((n=>{let r=0,i=n.parentElement;for(;i&&i!==e;)r++,i=i.parentElement;n.$depth=r,n.scrollHeight>n.offsetHeight&&"auto"===getComputedStyle(n).overflow&&(n.$scrollTop=n.scrollTop,l.add(n));const{parentElement:o}=n,s=Gt.from(n,e),a=Gt.from(n,o),c=getComputedStyle(o),d=parseFloat(c.borderLeftWidth);return d&&(s.left-=d,a.left-=d),[n.id,{element:n,globalBounds:s,localBounds:a,depth:r,parentElement:o}]})));i.call(o);const u=Array.from(e.querySelectorAll(n)),h=new Map(u.map((n=>{const r=Gt.from(n,e),i=Gt.from(n,n.parentElement),o=globalThis.getComputedStyle(n.parentElement),s=parseFloat(o.borderLeftWidth);return s&&(r.left-=s,i.left-=s),[n.id,{element:n,globalBounds:r,localBounds:i}]}))),g=["position","top","left","width","height","padding","margin","zIndex","minWidth","minHeight","opacity","overflow"];for(const[n,r]of d){const i=h.get(n);if(i){const{element:n}=i,{style:o,parentElement:s}=n,a=parseInt(Yn.getStyleValue(n,"zIndex")),{globalBounds:c,localBounds:d,depth:u,parentElement:h}=r,p=h!==s;let m;Et.copyProperties(n.$initial={parentElement:s},o,g),p?(i.bounds=i.globalBounds,m=c,e.appendChild(n)):(i.bounds=i.localBounds,m=d,h.appendChild(n));let f="hidden";l.has(n)&&(n.$scrollPlaceholder=Yn.createElement({parent:n,style:{height:n.scrollHeight}}),f="auto");const b={position:"absolute",top:`${m.top}px`,left:`${m.left}px`,width:`${m.width}px`,height:`${m.height}px`,minWidth:0,minHeight:0,margin:0,zIndex:u+(a||0),overflow:f};"preserve-padding"!==n.dataset.domTransition&&(b.padding=0),Object.assign(o,b),i.processed=!0}else{const{element:e,localBounds:i,depth:o,parentElement:s}=r;e.$initial={removed:!0},Object.assign(e.style,{position:"absolute",top:`${i.top}px`,left:`${i.left}px`,width:`${i.width}px`,height:`${i.height}px`,minWidth:0,minHeight:0,padding:0,margin:0,zIndex:o,overflow:"hidden"}),s.appendChild(e),h.set(n,{element:e,bounds:i,removed:!0,processed:!0}),u.push(e)}}for(const[,e]of h)if(!e.processed){const{element:n}=e,{style:r,parentElement:i}=n,o=e.bounds=e.localBounds;n.classList.add("b-dom-transition-adding"),Et.copyProperties(n.$initial={parentElement:i},r,g),Object.assign(r,{position:"absolute",top:s.top?0:`${o.top}px`,left:s.left?0:`${o.left}px`,width:s.width?0:`${o.width}px`,height:s.height?0:`${o.height}px`,opacity:s.opacity?0:null,zIndex:i.$depth+1,overflow:"hidden"})}for(const e of l)e.scrollTop=e.$scrollTop;e.classList.add("b-dom-transition"),e.firstElementChild.offsetWidth;for(const[,{element:e,bounds:n,removed:r}]of h)r?Object.assign(e.style,{top:a.top?0:`${n.top}px`,left:a.left?0:`${n.left}px`,width:a.width?0:`${n.width}px`,height:a.height?0:`${n.height}px`,opacity:a.opacity?0:e.$initial.opacity}):Object.assign(e.style,{top:`${n.top}px`,left:`${n.left}px`,width:`${n.width}px`,height:`${n.height}px`,opacity:e.$initial.opacity});await Me.sleep(r),e.classList.remove("b-dom-transition");for(const e of u)e.$initial&&(e.$initial.removed?e.remove():(Et.copyProperties(e.style,e.$initial,g),e.$scrollPlaceholder&&(e.$scrollPlaceholder.remove(),delete e.$scrollPlaceholder),e.classList.remove("b-dom-transition-adding"),e.$initial.parentElement.appendChild(e)));for(const e of l)e.scrollTop=e.$scrollTop,delete e.$scrollTop}static async loadScript(e){return new Promise(((n,r)=>{const i=document.createElement("script");i.src=e,i.onload=n,i.onerror=r,document.head.appendChild(i)}))}static isNamedColor(e){return e&&!/^(#|hsl|rgb|hwb)/.test(e)}static get NodeFilter(){return NodeFilter}static addChild(e,n,r){e.insertBefore(n,r)}},Yn=Gn,clearTouchEvent=()=>Yn.isTouchEvent=!1,setTouchEvent=()=>{Yn.isTouchEvent=!0,clearTimeout(Nn),Nn=setTimeout(clearTouchEvent,400)};if(Pn.addEventListener("touchstart",setTouchEvent,!0),Pn.addEventListener("touchend",setTouchEvent,!0),Yn.canonicalStyles=jn,Yn.supportsTemplate="content"in Pn.createElement("template"),Yn.elementPropKey="$bryntum",Yn.numberRe=mn,!("children"in Node.prototype)){const elementFilter=e=>e.nodeType===e.ELEMENT_NODE;Object.defineProperty(Node.prototype,"children",{get:function(){return Array.prototype.filter.call(this.childNodes,elementFilter)}})}Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){const n=(this.document||this.ownerDocument).querySelectorAll(e);let r=n.length;for(;--r>=0&&n.item(r)!==this;);return r>-1}),Fn.Element&&!Element.prototype.closest?Node.prototype.closest=Element.prototype.closest=function(e){let n=this;if(!Pn.documentElement.contains(n))return null;do{if(n.matches(e))return n;n=n.parentElement||n.parentNode}while(null!==n&&n.nodeType===n.ELEMENT_NODE);return null}:Node.prototype.closest=function(e){var n;return null==(n=this.parentNode)?void 0:n.closest(e)},[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach((function(e){Object.prototype.hasOwnProperty.call(e,"remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function remove(){this.parentNode&&this.parentNode.removeChild(this)}})})),globalThis.addEventListener("resize",(()=>qn=null)),Gn._$name="DomHelper";var Kn,Xn,isFloatingWidget=e=>e.floating,Zn={touchend:1,pointerup:1},Qn=new class GlobalEventsHandler extends(re.mixin(Events_default)){suspendFocusEvents(){ir=!0}resumeFocusEvents(){ir=!1}setupFocusListenersOnce(e,n){e&&!Qn.observedElements.has(e)&&(Qn.setupFocusListeners(e,n),Qn.observedElements.add(e))}setupFocusListeners(e=document,n,r=!1){const i={element:e,touchstart(e){if(Kn||1!==e.changedTouches.length)Kn=null;else if(Kn=e.changedTouches[0],!c.isAndroid){const onMoveOrPointerUp=({clientX:e,clientY:n,type:o})=>{(Zn[o]||Math.max(Math.abs(e-Kn.clientX),Math.abs(n-Kn.clientY))>5)&&(Xn=null,r(),clearTimeout(i))},r=n.on({element:document,touchmove:onMoveOrPointerUp,touchend:onMoveOrPointerUp,pointermove:onMoveOrPointerUp,pointerup:onMoveOrPointerUp,capture:!0}),i=setTimeout((()=>{Xn=Kn.identifier,r(),e.target.dispatchEvent(new MouseEvent("contextmenu",n.copyEvent({},e)))}),n.longPressTime)}},touchend:{handler:e=>{Kn&&(e.changedTouches[0].identifier===Xn?(e.stopImmediatePropagation(),e.preventDefault()):1===e.changedTouches.length&&e.changedTouches[0].identifier===Kn.identifier&&Qn.trigger("globaltap",{event:e}),Kn=null)},passive:!1},mousedown:{handler:e=>{Jn="mouse",Kn||Qn.trigger("globaltap",{event:e}),tr=e;const n=e.ctrlKey||e.altKey||e.shiftKey||e.metaKey;!er&&n?er=new KeyboardEvent("keydown",{key:e.ctrlKey?"Control":e.shiftKey?"Shift":e.altKey?"Alt":"Meta",ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey}):er&&!n&&(er=null)},passive:!1},mouseup(){tr=null},pointerdown:{passive:!1,handler:e=>{nr=e}},pointerup:{passive:!1,handler:e=>{(null==nr?void 0:nr.pointerId)===e.pointerId&&(nr=null)}},keydown(e){Jn="key",er=e},keypress(){Jn="key"},keyup(){er=null},focusin(e){var n;const{Widget:r}=Qn;if(r.resetFloatRootScroll(),ir)return;const i=e.relatedTarget?e.relatedTarget instanceof HTMLElement?e.relatedTarget:document.body:null,o=e.target||document.body,s=r.fromElement(i),a=r.fromElement(o),l=Gn.getCommonAncestor(s,a),c=!!(i&&4&o.compareDocumentPosition(i)),d=r.query(isTopVisibleModal);let u=null;if(u=o&&o!==document.body?Gn.getActiveElement(o):Gn.getActiveElement(document),d&&!d._isRevertingFocus&&(!a||!d.owns(a)&&!(4&d.element.compareDocumentPosition(a.element)&&a.up(isFloatingWidget))))return d.focus();let h=createWidgetEvent("focusout",i,e.target,s,a,c);for(let n,r=s;r&&r!==l;r=n)if(n=r.owner,!r.isDestroying&&r.onFocusOut&&(r.onFocusOut(h),e.target&&u!==Gn.getActiveElement(e.target)))return;if(l&&e.target===l.element)!l.isDestroying&&Gn.getActiveElement(l)===o&&l.focusElement&&l.focusElement!==l.element&&(l.element.contains(u)&&!l.focusDescendant||l.setTimeout((()=>{var e;return null==(e=l.focus)?void 0:e.call(l)}),0));else{h=createWidgetEvent("focusin",o,i,s,a,c);for(let e=a;e&&e!==l;e=e.owner)e.isDestroying||null==(n=e.onFocusIn)||n.call(e,h)}const g=Gn.getCommonAncestor((null==i?void 0:i.nodeType)===Element.ELEMENT_NODE?i:null,o)||o.parentNode;g&&(h=createWidgetEvent("focusmove",o,i,s,a,c,{bubbles:!0}),g.dispatchEvent(h))},focusout(e){if(!(ir||e.relatedTarget&&Qn.Widget.fromElement(e.relatedTarget))){const n=e.relatedTarget&&e.relatedTarget instanceof HTMLElement?e.relatedTarget:null;i.focusin({target:n,relatedTarget:e.target}),er=tr=null}},blur:{element:globalThis,handler(e){e.target===globalThis&&(er=null,tr=null)}},capture:!0,passive:!0};r&&(null==rr||rr()),rr=this.detachEvents=n.on(i)}get lastInteractionType(){return Jn}get shiftKeyDown(){return null==er?void 0:er.shiftKey}get ctrlKeyDown(){return(null==er?void 0:er.ctrlKey)||(null==er?void 0:er.metaKey)}get altKeyDown(){return null==er?void 0:er.altKey}isKeyDown(e){return e?(null==er?void 0:er.key)===e||!0===er[(null==e?void 0:e.toLowerCase())+"Key"]:Boolean(er)}isMouseDown(e=0){return(null==tr?void 0:tr.button)===e}get currentMouseDown(){return tr}get currentPointerDown(){return nr}get currentTouch(){return Kn}get currentKeyDown(){return er}},isTopVisibleModal=e=>e.isVisible&&e.isTopModal;Qn.observedElements=new Set;var Jn,er,tr,nr,rr,ir=!1;function createWidgetEvent(e,n,r,i,o,s,a){const l=new CustomEvent(e,a);return Object.defineProperty(l,"_target",{get:()=>n}),Object.defineProperty(l,"relatedTarget",{get:()=>r}),l.fromWidget=i,l.toWidget=o,l.backwards=s,l}var or=Qn;var sr=class extends(re.mixin(Events_default,Localizable_default)){static get configurable(){return{clientListeners:null,disabled:!1,client:null,keyMap:null}}updateClient(e){this.owner||(this.owner=e)}updateKeyMap(e){const{client:n}=this;n.keyMap=n.mergeKeyMaps(n.keyMap,e,w.uncapitalize(this.constructor.$name))}static initPlugins(e,...n){const r=e.plugins||(e.plugins={});for(const i of n)r[i.$$name]=new i(e)}get enabled(){return!this.disabled}getFocusRevertTarget(){var e;return null==(e=this.client)?void 0:e.getFocusRevertTarget()}construct(...e){const n=this;let r,[i,o]=e;1===e.length?Et.isObject(i)&&(o=i,i=o.client):(o=Et.assign({},o),delete o.client),n.client=i,super.construct(o),n.applyPluginConfig(i),r=n.clientListeners,r&&(r=Et.assign({},r),r.thisObj=n,i.ion(r))}applyPluginConfig(e){const n=this,r=n.pluginConfig||n.constructor.pluginConfig;if(r){const{assign:i,chain:o,after:s,before:a,override:l}=r;i&&n.applyAssign(e,i),(o||s)&&n.applyChain(e,o||s),a&&n.applyChain(e,a,!1),l&&n.applyOverride(e,l)}}applyAssign(e,n){n.forEach((n=>this.assign(e,n)))}applyChain(e,n,r=!0){if(Array.isArray(n))for(const i of n)this.chain(e,i,i,r);else for(const i in n)this.chain(e,i,n[i],r)}applyOverride(e,n){const r=this;r.overridden||(r.overridden={}),n.forEach((n=>{if(!r[n])throw new Error(`Trying to chain fn ${e.$$name}#${n}, but plugin fn ${r.$$name}#${n} does not exist`);"function"==typeof e[n]&&(r.overridden[n]=e[n].bind(e)),e[n]=r[n].bind(r)}))}assign(e,n){const r=this,i=function getDescriptor(e,n){const r=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(e),n);return r&&(r.get||r.set)?r:null}(r,n);i?Object.defineProperty(e,n,{configurable:!0,enumerable:!0,get:i.get&&i.get.bind(r),set:i.set&&i.set.bind(r)}):e[n]=r[n].bind(r)}chain(e,n,r,i=!0){let o=0;"object"==typeof n&&(n=n.fn),"object"==typeof r&&(o=r.prio||0,r=r.fn);const s=this,a=e.pluginFunctionChain||(e.pluginFunctionChain={}),l=s[r]&&s[r].bind(s),c=s.functionChainRunner;if(!l)throw new Error(`Trying to chain fn ${e.$$name}#${r}, but plugin fn ${s.$$name}#${r} does not exist`);if(!a[n]){let r=e[n];r&&(r=r.bind(e),r.$this=e,r.$prio=0),a[n]=r?[r]:[],e[n]=(...e)=>c(a[n],e)}l.$this=s,l.$prio=o,a[n][i?"push":"unshift"](l),a[n].$sorted=!1}functionChainRunner(e,n){let r,i,o;for(e.$sorted||(e.sort(((e,n)=>n.$prio-e.$prio)),e.$sorted=!0),i=0;i<e.length&&(r=e[i],r.$this.isDestroyed||(o=r(...n),!1!==o));i++);return o}doDisable(e){var n,r;const i=this,{constructor:o}=i,s="featureClass"in o?o.featureClass:`b-${o.$$name.toLowerCase()}`;s&&(null==(r=null==(n=i.client)?void 0:n._element)||r.classList[e?"remove":"add"](s)),i.isConfiguring||(e?i.trigger("disable"):i.trigger("enable"))}updateDisabled(e){this.doDisable(e)}throwOverrideIsMissing(e){throw new Error(`Trying to override fn ${e.plugIntoName}#${e.fnName}, but plugin fn ${e.pluginName}#${e.fnName} does not exist`)}get rootElement(){return this.client.rootElement}};__publicField(sr,"$name","InstancePlugin"),sr._$name="InstancePlugin";var ar,Pluggable_default=e=>class Pluggable extends(e||re){static get $name(){return"Pluggable"}get plugins(){return this._plugins||(this._plugins={}),this._plugins}set plugins(e){e&&(Array.isArray(e)||(e=[e]),sr.initPlugins(this,...e)),this.initPlugins()}initPlugins(){}addPlugins(...e){sr.initPlugins(this,...e)}hasPlugin(e){return null!=this.getPlugin(e)}getPlugin(e){var n;return"function"==typeof e&&(e=e.$$name),null==(n=this.plugins)?void 0:n[e]}get widgetClass(){}},{defineProperty:lr}=Reflect;ar=c.isBrowserEnv?globalThis.performance:{now:()=>(new Date).getTime()};var cr=null;if(A.isTestEnv){const e=globalThis.bryntum||(globalThis.bryntum={});cr=e.globalDelays={timeouts:new Map,intervals:new Map,animationFrames:new Map,idleCallbacks:new Map,isEmpty:(e=!1)=>cr.timeouts.size+cr.animationFrames.size+cr.idleCallbacks.size+(e?cr.intervals.size:0)===0,getFiltered({ignoreTimeouts:e=[],maxDelay:n=5e3,includeIntervals:r=!1}){const i=[],o=["timeouts","animationFrames","idleCallbacks"];r&&o.push("intervals");for(const r of o){const o=cr[r];for(const[,r]of o.entries())e.includes(r.name)||Number.isInteger(r.delay)&&!(r.delay<n)||i.push(r)}return i}}}var makeInvoker=(e,n,r,i)=>{const o="string"==typeof n,s=(null==i?void 0:i.appendArgs)||[],invoker=()=>{r.timerId=null,r.lastCallTime=ar.now();const i=r.args;r.args=null,o?e[n](...i,...s):n.call(e,...i,...s),r.called=!0,++r.calls};return i&&(e=i.thisObj||e),r.lastCallTime=-9e9,r.calls=0,r.invoker=invoker,invoker.wrapFn=r,invoker},decorateWrapFn=(e,n,r="clearTimeout")=>(n.cancel=()=>{n.isPending&&(e[r](n.timerId),n.args=n.timerId=null)},n.flush=()=>{n.isPending&&(e[r](n.timerId),n.timerId=null,n.invoker())},n.now=(...e)=>{n.cancel(),n.args=e,n.invoker()},n.resume=e=>{const r=n.suspended;n.suspended=e||r<1?0:r-1},n.suspend=()=>{++n.suspended},n.immediate=!1,n.suspended=0,n.timerId=null,lr(n,"isPending",{get:()=>null!==n.timerId}),n),Delayable_default=e=>class Delayable extends(e||re){static get $name(){return"Delayable"}static get declarable(){return["delayable"]}doDestroy(){const e=this;super.doDestroy(),e.timeoutIds&&(e.timeoutIds.forEach(((e,n)=>{"function"==typeof e&&e(),clearTimeout(n),null==cr||cr.timeouts.delete(n)})),e.timeoutIds=null),e.timeoutMap&&(e.timeoutMap.forEach(((e,n)=>clearTimeout(n))),e.timeoutMap=null),e.intervalIds&&(e.intervalIds.forEach((e=>{clearInterval(e),null==cr||cr.intervals.delete(e)})),e.intervalIds=null),e.animationFrameIds&&(e.animationFrameIds.forEach((e=>{cancelAnimationFrame(e),null==cr||cr.animationFrames.delete(e)})),e.animationFrameIds=null),e.idleCallbackIds&&(e.idleCallbackIds.forEach((e=>{cancelIdleCallback(e),null==cr||cr.idleCallbacks.delete(e)})),e.idleCallbackIds=null)}hasTimeout(e){var n;return Boolean(null==(n=this.timeoutMap)?void 0:n.has(e))}setTimeout({fn:e,delay:n,name:r,runOnDestroy:i,cancelOutstanding:o,args:s}){(arguments.length>1||"function"==typeof arguments[0])&&([e,n,r,i]=arguments),"string"==typeof e?r=e:r||(r=e.name||e),o&&this.clearTimeout(r);const a=this,l=a.timeoutIds||(a.timeoutIds=new Map),c=a.timeoutMap||(a.timeoutMap=new Map),d=setTimeout((()=>{"string"==typeof e&&(e=a[r]),null==l||l.delete(d),null==c||c.delete(r),null==cr||cr.timeouts.delete(d),e.apply(a,s)}),n);return l.set(d,!i||e),null==cr||cr.timeouts.set(d,{fn:e,delay:n,name:r}),r&&c.set(r,d),d}clearTimeout(e){var n;let r=e;if("string"==typeof r){if(!this.timeoutMap)return;r=this.timeoutMap.get(e),this.timeoutMap.delete(e)}clearTimeout(r),null==(n=this.timeoutIds)||n.delete(r),null==cr||cr.timeouts.delete(r)}clearInterval(e){var n;clearInterval(e),null==(n=this.intervalIds)||n.delete(e),null==cr||cr.intervals.delete(e)}setInterval(e,n,r){const i=setInterval(e,n);return(this.intervalIds||(this.intervalIds=new Set)).add(i),null==cr||cr.intervals.set(i,{fn:e,delay:n,name:r}),i}requestAnimationFrame(e,n=[],r=this){const i=this.animationFrameIds||(this.animationFrameIds=new Set),o=requestAnimationFrame((()=>{null==cr||cr.animationFrames.delete(o),i.delete(o)&&e.apply(r,n)}));return i.add(o),null==cr||cr.animationFrames.set(o,{fn:e,extraArgs:n,thisObj:r}),o}requestIdleCallback(e,n=[],r=this){const i=this.idleCallbackIds||(this.idleCallbackIds=new Set),o=requestIdleCallback((()=>{null==cr||cr.idleCallbacks.delete(o),i.delete(o)&&e.apply(r,n)}));return i.add(o),null==cr||cr.idleCallbacks.set(o,{fn:e,extraArgs:n,thisObj:r}),o}createOnFrame(e,n=[],r=this,i){let o;const result=(...s)=>{null!=o&&i&&(this.cancelAnimationFrame(o),o=null),null==o&&(o=this.requestAnimationFrame((()=>{"string"==typeof e&&(e=r[e]),o=null,s.push(...n),e.apply(r,s)})))};return result.cancel=()=>this.cancelAnimationFrame(o),result}cancelAnimationFrame(e){var n;cancelAnimationFrame(e),null==(n=this.animationFrameIds)||n.delete(e),null==cr||cr.animationFrames.delete(e)}cancelIdleCallback(e){var n;cancelIdleCallback(e),null==(n=this.idleCallbackIds)||n.delete(e),null==cr||cr.idleCallbacks.delete(e)}async nextAnimationFrame(){return new Promise((e=>this.requestAnimationFrame(e)))}buffer(e,n){let r=n;n&&"number"!=typeof n?r=n.delay:n=null;const bufferWrapFn=(...e)=>{if(bufferWrapFn.suspended)return;const{delay:n}=bufferWrapFn;bufferWrapFn.cancel(),bufferWrapFn.called=!1,bufferWrapFn.args=e,bufferWrapFn.immediate||!n?i():bufferWrapFn.timerId=this.setTimeout(i,n)},i=makeInvoker(this,e,bufferWrapFn,n);return bufferWrapFn.delay=r,decorateWrapFn(this,bufferWrapFn)}raf(e,n){let r=n;n&&"boolean"!=typeof n?r=n.cancelOutstanding:n=null;const rafWrapFn=(...e)=>{rafWrapFn.suspended||(rafWrapFn.cancelOutstanding&&rafWrapFn.cancel(),rafWrapFn.called=!1,rafWrapFn.args=e,rafWrapFn.immediate?i():rafWrapFn.isPending||(rafWrapFn.timerId=this.requestAnimationFrame(i)))},i=makeInvoker(this,e,rafWrapFn,n);return rafWrapFn.cancelOutstanding=r,decorateWrapFn(this,rafWrapFn,"cancelAnimationFrame")}idle(e,n){let r=n;n&&"boolean"!=typeof n?r=n.cancelOutstanding:n=null;const idleWrapFn=(...e)=>{idleWrapFn.suspended||(idleWrapFn.cancelOutstanding&&idleWrapFn.cancel(),idleWrapFn.called=!1,idleWrapFn.args=e,idleWrapFn.immediate?i():idleWrapFn.isPending||(idleWrapFn.timerId=this.requestIdleCallback(i)))},i=makeInvoker(this,e,idleWrapFn,n);return idleWrapFn.cancelOutstanding=r,this.setTimeout((()=>this.idleCallbackIds.delete(idleWrapFn.timerId)&&idleWrapFn.now()),100),decorateWrapFn(this,idleWrapFn,"cancelIdleCallback")}throttle(e,n){let r,i=n;n&&"number"!=typeof n?(i=n.delay,r=n.throttled):n=null;const o=this,throttleWrapFn=(...e)=>{if(throttleWrapFn.suspended)return;const{delay:n}=throttleWrapFn,i=ar.now()-throttleWrapFn.lastCallTime;throttleWrapFn.args=e,throttleWrapFn.immediate||i>=n?(o.clearTimeout(throttleWrapFn.timerId),s()):(throttleWrapFn.isPending||(throttleWrapFn.timerId=o.setTimeout(s,n-i),throttleWrapFn.called=!1),r&&(r.wrapFn.args=e,r()))},s=makeInvoker(o,e,throttleWrapFn,n);return throttleWrapFn.delay=i,r&&(r=makeInvoker(o,r,(()=>{}),n)),decorateWrapFn(o,throttleWrapFn)}static setupDelayable(e){e.setupDelayableMethods(e.delayable)}static setupDelayableMethods(e,n=null){const r=e.static,i=n||this.prototype;r&&delete e.static;for(const n in e){let r=e[n];const o=n+"Now",s=typeof r;i[o]||(i[o]=i[n]),"number"===s?r={type:"buffer",delay:r}:"string"===s&&(r={type:r}),lr(i,n,{get(){const e=this[r.type](((...e)=>{this[o](...e)}),r);return lr(this,n,{value:e}),e}})}}get widgetClass(){}},dr=class{get data(){return Object.create(null)}get keys(){return[]}clear(){}getItem(e){return null}removeItem(e){}setItem(e,n){}};dr._$name="StateStorage";var empty=()=>Object.create(null),getKeys=(e,n=0)=>{const r=[],i=localStorage.length;for(let o,s=0;s<i;++s)o=localStorage.key(s),o.startsWith(e)&&r.push(o.slice(n));return r},ur=new dr,hr={local:class extends dr{constructor(e){super(),this.prefix=e.prefix||""}get isLocal(){return!0}get data(){const e=empty(),n=this.keys;for(const r of n)e[r]=this.getItem(r);return e}get keys(){return getKeys(this.prefix,this.prefix.length)}clear(){const e=getKeys(this.prefix);for(const n of e)localStorage.removeItem(n)}getItem(e){const n=localStorage.getItem(this.prefix+e);return null===n?n:JSON.parse(n)}removeItem(e){return localStorage.removeItem(this.prefix+e)}setItem(e,n){return localStorage.setItem(this.prefix+e,JSON.stringify(n))}},memory:class extends dr{constructor(){super(),this.clear()}get isMemory(){return!0}get data(){return Et.clone(this._data)}get keys(){return Object.keys(this._data)}clear(){this._data=empty()}getItem(e){return e in this._data?this._data[e]:null}removeItem(e){delete this._data[e]}setItem(e,n){this._data[e]=n}}},gr=class extends(re.mixin(Delayable_default,Events_default)){static get $name(){return"StateProvider"}static get configurable(){return{prefix:"bryntum-state:",storage:"local"}}static get delayable(){return{writeStatefuls:50}}static get instance(){return this._instance}static set instance(e){null==e?e=pr:(("string"==typeof e||Et.isClass(e)||e instanceof dr)&&(e={storage:e}),Et.isObject(e)&&(e=new gr(e))),this._instance=e}static setup(e){return this.instance=e,this.instance}doDestroy(){self.writeStatefuls.flush(),super.doDestroy()}get data(){return this.storage.data}set data(e){if(e)for(const n in e)this.setValue(n,e[n]);else this.clear()}clear(){return this.storage.clear(),this}changeStorage(e){if(null==e)e=ur;else{if("string"==typeof e){if(!hr[e])throw new Error(`Invalid storage type "${e}" (expected one of: "${Object.keys(hr).join('", "')}")`);e=hr[e]}Et.isClass(e)&&(e=new e(this))}return e}saveStateful(e,n){(this.pendingSaves||(this.pendingSaves=[])).push([e,n]),this.writeStatefuls()}writeStatefuls(){const e=this,{pendingSaves:n}=e,r=null==n?void 0:n.length,i=[],o=[];if(e.pendingSaves=null,r){for(let e,s,a,l=0;l<r;++l)[s,e]=n[l],!s.isDestroying&&s.isSaveStatePending&&(a=s.saveState({...e,immediate:!0}),a&&(i.push(a),o.push(s)));i.length&&e.trigger("save",{stateIds:i,saved:o})}}getValue(e){return this.writeStatefuls.flush(),this.storage.getItem(e)}setValue(e,n){const r=this,{storage:i}=r,o=r.getValue(e);return null!=n?(i.setItem(e,n),r.trigger("set",{key:e,value:n,was:o})):null!==o&&(i.removeItem(e),r.trigger("remove",{key:e,was:o})),r}},pr=new gr({storage:ur});gr._instance=pr,gr._$name="StateProvider";var mr=/boolean|number|string/,State_default=e=>{var n;return __publicField(n=class extends(e||re){afterConstruct(){super.afterConstruct(),this.loadState()}finalizeInit(){this.loadState(),super.finalizeInit()}get isStateful(){return!0}get isStatefulActive(){return!this.statefulSuspended&&!this.isResponsivePending&&!this.isResponsiveUpdating}get state(){return this._state=this.getState()}set state(e){this._state=e,e&&this.applyState(e)}updateStatefulEvents(e){var n;const r=this,i={name:"statefulEvents",thisObj:r};if(r.detachListeners(i.name),e&&("string"==typeof e?e=w.split(e):Array.isArray(e)||(e=Et.getTruthyKeys(e)),e.length)){for(const n of e)i[n]="onStatefulEvent";null==(n=r.ion)||n.call(r,i)}}get statefulId(){const e=this,{responsiveState:n}=e;let r=e.stateId;return null==r&&!1===e.hasGeneratedId&&!1!==e.stateful&&(r=e.id),r&&n&&(r=`${r}[${n}]`),r}get statefulness(){const{stateful:e}=this;return Array.isArray(e)?Et.createTruthyKeys(e):e}get stateProvider(){return this._stateProvider||gr.instance}applyState(e){(e=this.pruneState(e))&&this.setConfig(e)}getState(){const e=this,{initialConfig:n,statefulness:r,isConstructing:i}=e,{configs:o}=e.$meta,s=i?Object.setPrototypeOf(n,e.$meta.config):e;let a,l,c=null;if(r)for(a in c={},r)if(r[a]){if(l=s[a],null==l?void 0:l.isStateful)l=l.state;else if(!i&&(Et.isDate(l)&&(l=Ct.format(l,"YYYY-MM-DDTHH:mm:ssZ")),o[a].equal(l,null==n?void 0:n[a])||!mr.test(typeof l)))continue;c[a]=l}return c}loadState(e,n){"boolean"==typeof e&&(n=e,e=null);const r=this,{statefulLoaded:i}=r;if(r.isStatefulActive&&(n||!i)){const n=r.loadStatefulData(e||(e=r.statefulId));!i&&e&&(r.defaultState=r.state,r.statefulLoaded=!0),n&&(r.state=n)}}loadStatefulData(e){var n;return(e=this.isStatefulActive?e||this.statefulId:null)&&(null==(n=this.stateProvider)?void 0:n.getValue(e))}resetDefaultState(){this.defaultState&&(this.state=this.defaultState)}resumeStateful(e=!1){this.statefulSuspended=e?0:Math.max(this.statefulSuspended-1,0)}saveState(e){e="string"==typeof e?{id:e}:e||{};const n=this,{stateProvider:r}=n,i=e.id||n.isStatefulActive&&n.statefulId;if(i&&r)return e.immediate?(n.isSaveStatePending=!1,r.setValue(i,n.state)):n.isSaveStatePending||(n.isSaveStatePending=!0,r.saveStateful(n,e)),i}suspendStateful(){++this.statefulSuspended}onConfigChange({name:e,value:n,was:r,config:i}){if(super.onConfigChange({name:e,value:n,was:r,config:i}),!this.isConstructing&&this.isStatefulActive&&this.statefulId){const{stateful:n}=this;(Array.isArray(n)?n.includes(e):null==n?void 0:n[e])&&this.saveState()}}onStatefulEvent(){this.isConstructing||this.saveState()}pruneState(e){const{statefulness:n}=this;if(n){const r={};for(const i in e)n[i]&&(r[i]=e[i]);e=r}return e}get widgetClass(){}},"$name","State"),__publicField(n,"configurable",{stateful:{value:null,$config:{merge:"classList"}},statefulEvents:{$config:{merge:"classList"},value:["stateChange"]},stateId:null,stateProvider:null}),__publicField(n,"prototypeProperties",{statefulLoaded:!1,statefulSuspended:0}),n},fr=Et.getPathDefault(globalThis,"bryntum.idCounts",Object.create(null)),br={string:1,number:1},Identifiable_default=e=>class Identifiable extends(e||re){static get $name(){return"Identifiable"}static get declarable(){return["identifiable"]}static get configurable(){return{id:""}}static setupIdentifiable(e,n){const{identifiable:r}=e;r.idMap=Object.create(null),Reflect.defineProperty(e,"identifiable",{get:()=>r})}doDestroy(){this.constructor.unregisterInstance(this),super.doDestroy()}changeId(e){return(this.hasGeneratedId=!e)?this.generateAutoId():e}updateId(e,n){const r=this,i=r.constructor;n&&i.unregisterInstance(r,n),r.hasGeneratedId&&!1===i.identifiable.registerGeneratedId||i.registerInstance(r,e)}generateAutoId(){return this.constructor.generateId(`b-${this.$$name.toLowerCase()}-`)}static get all(){return Object.values(this.identifiable.idMap)}static generateId(e="generatedId"){return e+(fr[e]=(fr[e]||0)+1)}static registerInstance(e,n=e.id){const{idMap:r}=this.identifiable;if(n in r&&!this.disableThrow)throw new Error("Id "+n+" already in use");r[n]=e}static unregisterInstance(e,n=e.id){const{idMap:r}=this.identifiable;br[typeof e]?delete r[e]:r[n]===e&&delete r[n]}static getById(e){const n=this.identifiable.idMap;if(n)return n[e]}static get registeredInstances(){const e=this.identifiable.idMap;return e?Object.values(e):[]}},vr=Symbol("STM_PROP"),yr={parentIndex:1},ModelStm_default=e=>class ModelStm extends(e||re){static get $name(){return"ModelStm"}static get defaultConfig(){return{stm:null}}joinStore(e){this.stm||(this.stm=e.stm)}unjoinStore(e){var n;this.stm===e.stm&&(this.stm=null),null==(n=super.unjoinStore)||n.call(this,e)}get stm(){return this[vr]}set stm(e){this[vr]=e}beforeChronoFieldSet(e,n){var r;const i=this;return i.inSetting||!(null==(r=i.stm)?void 0:r.enabled)||yr[e]||i.constructor.nonPersistableFields[e]||!i.getFieldDefinition(e)?null:{[e]:{value:n,oldValue:i[e]}}}afterChronoFieldSet(e,n,r){r&&this.afterSet(e,n,!1,!1,r,!0)}shouldRecordFieldChange(e,n,r){const i=this.firstStore;return!(this.constructor.nonPersistableFields[e]||null==n&&null==r||n===r||n instanceof Date&&r instanceof Date&&n.getTime()===r.getTime()||"id"===e||"$PhantomId"===e||"parentId"===e&&i&&i.oldIdMap[n]===i.getById(r))}afterSet(e,n,r,i,o,s){const{stm:a}=this,l=this.constructor.nonPersistableFields;if((null==a?void 0:a.isBase)&&a.enabled&&!yr[e]&&!l[e]&&o){let e;const[n,r]=Object.keys(o).reduce(((n,r)=>{const{value:i,oldValue:s}=o[r];return this.shouldRecordFieldChange(r,s,i)&&(e=!0,n[0][r]=i,n[1][r]=s),n}),[{},{}]);e&&a.onModelUpdate(this,n,r,s)}}beforeInsertChild(e){var n;const r=(null==(n=super.beforeInsertChild)?void 0:n.call(this,e))||[],{stm:i}=this;return(null==i?void 0:i.enabled)&&r.push(e.reduce(((e,n)=>(n.root===this.root&&e.set(n,{parent:n.parent,index:n.parent?n.parentIndex:void 0}),e)),new Map)),r}afterInsertChild(e,n,r,i){var o;const{stm:s}=this;if(null==s?void 0:s.enabled){const n=r.pop();i&&s.onModelInsertChild(this,e,i,n)}null==(o=super.afterInsertChild)||o.call(this,e,n,r,i)}beforeRemoveChild(e,n){const r=super.beforeRemoveChild?super.beforeRemoveChild(e,n):[],{stm:i}=this;return(null==i?void 0:i.enabled)&&!n&&r.push(e.reduce(((e,n)=>(e.set(n,n.parentIndex),e)),new Map)),r}afterRemoveChild(e,n,r){var i;const{stm:o}=this;if((null==o?void 0:o.enabled)&&!r){const r=n.pop();e&&e.length&&o.onModelRemoveChild(this,e,r)}null==(i=super.afterRemoveChild)||i.call(this,e,n,r)}},wr={includeFilteredOutRecords:!1},fixTraverseOptions=e=>("boolean"==typeof(e=e||!1)&&(e={includeFilteredOutRecords:e}),e||wr),TreeNode_default=e=>class TreeNode extends(e||re){static get $name(){return"TreeNode"}static set convertEmptyParentToLeaf(e){!0===e?e={onLoad:!0,onRemove:!0}:!1===e&&(e={onLoad:!1,onRemove:!1}),this._convertEmptyParentToLeaf=e}constructor(...e){super(...e),this.children&&(this.orderedChildren=this.orderedChildren||[])}static get convertEmptyParentToLeaf(){return this._convertEmptyParentToLeaf||{onLoad:!1,onRemove:!1}}ingestChildren(e,n=this.stores){const{inProcessChildren:r,constructor:i}=this,o=n[0];if(!0===e)return!!r||[];if(e){const n=(e=oe.asArray(e)).length,r=[];for(let s,a=0;a<n;a++)s=e[a],s=s.isModel?s:o?o.createRecord(s,!1,!0):new i(s,null,null,!0),s=o?o.processRecord(s):s,r.push(s);if(!0===this.children&&o){const e=o.createSorterFn(o.sorters);r.sort(e)}return r}}processChildren(e=this.stores){const n=this,{meta:r}=n;n.inProcessChildren=!0;const i=n.ingestChildren(n.data[n.constructor.childrenField],e);if(i){const{convertEmptyParentToLeaf:e}=n.constructor;if(!0===e||e.onLoad?i.length:Array.isArray(i)){if(r.isLeaf=!1,!0===n.children)n.children=[];else if(0===i.length)return void(n.children=i);n.insertChild(i)}else!0===i?(r.isLeaf=!1,n.children=!0):n.isRoot||(r.isLeaf=n.constructor.convertEmptyParentToLeaf.onLoad)}n.inProcessChildren=!1}ancestorsExpanded(e=this.firstStore){const{parent:n}=this;return!n||n.isExpanded(e)&&n.ancestorsExpanded(e)}isExpanded(e=this.firstStore){const n=this.instanceMeta(e.id);return Object.prototype.hasOwnProperty.call(n,"collapsed")||(n.collapsed=!this.expanded),!n.collapsed}get expanded(){return this.data.expanded}get childLevel(){let e=this,n=-1;for(;e&&!e.isRoot;)++n,e=e.parent;return n}get isLeaf(){return!1!==this.meta.isLeaf&&!this.isRoot}get isParent(){return!this.isLeaf}get isLoaded(){return this.isParent&&Array.isArray(this.children)}get descendantCount(){return this.getDescendantCount()}get visibleDescendantCount(){return this.getDescendantCount(!0)}getDescendantCount(e=!1,n=this.firstStore){const{children:r}=this;return!r||!Array.isArray(r)||e&&!this.isExpanded(n)?0:r.reduce(((n,r)=>n+r.getDescendantCount(e)),r.length)}get allChildren(){const{children:e}=this;return e&&!0!==e?e.reduce(((e,n)=>(e.push(n),e.push.apply(e,n.allChildren),e)),[]):[]}get firstChild(){const{children:e}=this;return(null==e?void 0:e.length)&&e[0]||null}get lastChild(){const{children:e}=this;return(null==e?void 0:e.length)&&e[e.length-1]||null}get previousSiblingsTotalCount(){let e=this.previousSibling,n=this.parentIndex;for(;e;)n+=e.descendantCount,e=e.previousSibling;return n}get previousOrderedSibling(){var e;return null==(e=this.parent)?void 0:e.orderedChildren[this.orderedParentIndex-1]}get nextOrderedSibling(){var e;return null==(e=this.parent)?void 0:e.orderedChildren[this.orderedParentIndex+1]}get root(){var e;return(null==(e=this.parent)?void 0:e.root)||this}get parentId(){return this.parent&&!this.parent.isAutoRoot?this.parent.id:null}set parentId(e){const n=this,{parent:r}=n,i=null===e?n.firstStore.rootNode:n.firstStore.getById(e);i!==r&&(r||i)&&(n.isBatchUpdating?n.meta.batchChanges.parentId=e:i?i.appendChild(n):n.parent.removeChild(n))}static set parentIdField(e){this._parentIdField=e,Object.defineProperty(this.prototype,e,{set:function(e){this.parentId=e},get:function(){return this.parentId}})}static get parentIdField(){return this._parentIdField||"parentId"}getChildren(e){let n;return n=e.includeFilteredOutRecords?this.unfilteredChildren||this.children:e.useOrderedTree?this.orderedChildren:this.children,n}traverse(e,n,r){r=fixTraverseOptions(r);const i=this,o=i.getChildren(r);n||e.call(i,i);for(let n=0,i=null==o?void 0:o.length;n<i;n++)o[n].traverse(e,!1,r)}traverseBefore(e,n,r){r=fixTraverseOptions(r);const i=this,o=i.getChildren(r);for(let n=0,i=null==o?void 0:o.length;n<i;n++)o[n].traverse(e,!1,r);n||e.call(i,i)}traverseWhile(e,n,r){r=fixTraverseOptions(r);const i=this;let o=n||!1!==e.call(i,i);if(o){const n=i.getChildren(r);(null==n?void 0:n.length)&&(o=n.every((n=>n.traverseWhile(e,!1,r))))}return o}bubble(e,n=!1){let r=this;for(n||e.call(r,r);r.parent;)r=r.parent,e.call(r,r)}bubbleWhile(e,n=!1){let r=this,i=!0;for(n||(i=e.call(r,r));i&&r.parent;)r=r.parent,i=e.call(r,r);return i}contains(e,n=!1){return e&&"object"==typeof e&&(e=e.id),!this.traverseWhile((n=>n.id!=e),n)}getTopParent(e){let n;return e?(n=[],this.bubbleWhile((e=>(n.push(e),e.parent&&!e.parent.isRoot)))):(n=null,this.bubbleWhile((e=>(e.parent||(n=e),e.parent&&!e.parent.isRoot)))),n}appendChild(e,n=!1){return this.insertChild(e,null,n)}insertChild(e,n=null,r=!1,i={}){var o,s,a,l,c,d,u;const h=this,g=Array.isArray(e);if(e=oe.asArray(e),"number"==typeof n&&(n=null!=(s=null==(o=h.children)?void 0:o[n])?s:null),!r&&!h.stores.every((n=>!1!==n.trigger("beforeAdd",{records:e,parent:h}))))return null;e=h.ingestChildren(e);const p=null!=(c=null!=(l=null==n?void 0:n.parentIndex)?l:null==(a=h.children)?void 0:a.length)?c:0,m=null==(d=h.beforeInsertChild)?void 0:d.call(h,e),f=h.internalAppendInsert(e,n,r,i);return f.length&&h.convertToParent(r),null==(u=h.afterInsertChild)||u.call(h,p,e,m,f),g||!f?f:f[0]}convertToParent(e=!1){const n=this,r=n.isLeaf;n.meta.isLeaf=!1,n.children||(n.children=[]),!r||n.root.isLoading||e||n.signalNodeChanged({isLeaf:{value:!1,oldValue:!0}})}signalNodeChanged(e,n=this.stores){n.forEach((n=>{n.trigger("update",{record:this,records:[this],changes:e}),n.trigger("change",{action:"update",record:this,records:[this],changes:e})}))}tryInsertChild(){return this.insertChild(...arguments)}internalAppendInsert(e,n,r,i){const o=this,{stores:s,root:a,children:l}=o,{firstStore:c}=a,{parentIdField:d}=o.constructor,u=o.isAutoRoot?null:o.id;let h,g,p,m,f,b;if(!a.isLoading&&c)for(b={},f=[],p=0;p<e.length;p++){const n=e[p];b[n.id]=n.root===a,f[p]=n.parentIndex}if(n&&n.parent!==o&&(n=null),l){const r=n?n.parentIndex:l.length;if(l[g=r]===e[0]||l[g=r-1]===e[0])for(h=!0,p=0;h&&p<e.length;p++)e[p]!==l[g+p]&&(h=!1)}if(h)return e;for(p=0;p<e.length;p++){const n=e[p],s=n.parent;c&&!a.isLoading&&n.traverse((e=>{e.root===a&&(b[e.id]=!0)})),!1===(null==s?void 0:s.removeChild(n,null==b?void 0:b[n.id],r,{isInserting:!0,...i}))?(m||(e=e.slice(),m=!0),e.splice(p--,1)):(n.parent=o,n.data[d]=u,s&&(n.meta.oldParentId=s.id))}if(e.length){Array.isArray(l)||(o.children=[]),Array.isArray(o.orderedChildren)||(o.orderedChildren=[]);const a=o.addToChildren(n,e,i);s.forEach((n=>{n.isChained||(e.forEach((e=>{e.joinStore(n)})),n.onNodeAddChild(o,e,a,b,r),e.forEach(((e,i)=>{if(null!=e.meta.oldParentId&&!o.inProcessChildren&&!o.isLoading){const s={[d]:u,[o.getDataSource("parentIndex")]:e.parentIndex},a={},{modified:l,oldParentId:c}=e.meta,h=f[i];if(delete e.meta.oldParentId,o.id!==c&&(a[d]={value:u,oldValue:c}),e.parentIndex!==h&&(a.parentIndex={value:e.parentIndex,oldValue:h}),l[d]===o.id?Reflect.deleteProperty(l,d):d in l||(l[d]=c),b[e.id]){const e=n.getById(c);e.isLeaf&&!r&&e.signalNodeChanged({isLeaf:{value:!0,oldValue:!1}},[n])}e.afterChange(s,a)}})))}))}return e}removeChild(e,n=!1,r=!1,i={}){var o,s;const a=this,l=[],c=a.isLeaf,{children:d,stores:u}=a;if(e=(e=oe.asArray(e)).filter((e=>e.parent===a)),!r)for(const r of u)if(!r.isChained&&!1===r.trigger("beforeRemove",{parent:a,records:e,isMove:n}))return!1;const h=null==(o=a.beforeRemoveChild)?void 0:o.call(a,e,n);for(const o of e){const{parentIdField:e}=o.constructor,{modified:s}=o.meta,c=o.parent?o.parent.id:null;e in s||o.isLinked||(s[e]=c);const d=a.removeFromChildren(o,i);u.forEach((e=>{if(!e.isChained){const{isRemoving:i}=e;e.isRemoving=!0,l.push(...e.onNodeRemoveChild(a,[o],d,{isMove:n,silent:r})),e.isRemoving=i}})),n||(o.parent=o.parentIndex=o.unfilteredIndex=o.nextSibling=o.previousSibling=null,o.data[e]=null)}return 0===(a.unfilteredChildren||d).length&&a.constructor.convertEmptyParentToLeaf.onRemove&&!a.isRoot&&(a.meta.isLeaf=!0),a.isLeaf===c||r||n||a.signalNodeChanged({isLeaf:{value:!0,oldValue:!1}}),null==(s=a.afterRemoveChild)||s.call(a,e,h,n),l}clearParentId(){const e=this;Reflect.deleteProperty(e.data,e.parentIdField),Reflect.deleteProperty(e.originalData,e.parentIdField),e.meta.modified&&Reflect.deleteProperty(e.meta.modified,e.parentIdField)}replaceChildren(e){return this.clearChildren(),this.data[this.constructor.childrenField]=e,this.processChildren(),this.children}clearChildren(e=!1){const n=this,{stores:r}=n,i=n.unfilteredChildren||n.children;n.children=[],n.orderedChildren=[],i&&!0!==i&&(r.forEach((r=>{r.isChained||r.onNodeRemoveChild(n,i,0,{unfiltered:!0,silent:e})})),n.unfilteredChildren&&(n.unfilteredChildren=[]))}clear(){var e;const n=this,{stores:r}=n,i=null==(e=n.children)?void 0:e.slice();if(n.isRoot&&i){for(const e of r)if(!e.isChained&&!1===e.trigger("beforeRemove",{parent:n,records:i,isMove:!1,removingAll:!0}))return!1;n.children.length=0,n.unfilteredChildren&&(n.unfilteredChildren.length=0),r.forEach((e=>{i.forEach((n=>{n.stores.includes(e)&&n.unjoinStore(e),n.parent=n.parentIndex=n.nextSibling=n.previousSibling=null})),e.storage.suspendEvents(),e.storage.clear(),e.storage.resumeEvents(),e.added.clear(),e.modified.clear(),e.trigger("removeAll"),e.trigger("change",{action:"removeall"})}))}}updateChildrenIndices(e,n,r=!1){let i=null;for(let o=0;o<e.length;o++){const s=e[o],a=s[n];"parentIndex"===n||"orderedParentIndex"===n?void 0===a||r?s.setData(n,o):a!==o&&s.set(n,o,!0):s[n]=o,"parentIndex"===n&&(s.previousSibling=i,i&&(i.nextSibling=s),o===e.length-1&&(s.nextSibling=null),i=s)}}addToChildren(e,n,r={}){var i,o;const s=this,a=[[s.children,"parentIndex",e],[s.unfilteredChildren,"unfilteredIndex",e],[s.orderedChildren,"orderedParentIndex",null!=(i=null==r?void 0:r.orderedBeforeNode)?i:e]];for(const e of a){const[i,a,l]=e;if(i){const c=l?l[a]:i.length;e.push(c),i.splice(c,0,...n),(null==(o=null==r?void 0:r[a])?void 0:o.skip)||s.updateChildrenIndices(i,a)}}return a[0][3]}removeFromChildren(e,n){var r;const i=[[this.children,"parentIndex"],[this.unfilteredChildren,"unfilteredIndex"],[this.orderedChildren,"orderedParentIndex"]];for(const o of i){const[i,s]=o;if(i){const a=i.indexOf(e);o.push(a),a>-1&&(i.splice(a,1),(null==(r=null==n?void 0:n[s])?void 0:r.skip)||this.updateChildrenIndices(i,s))}}return i[0][2]}sortOrderedChildren(e=!0,n=!1){const r=[];return this.isLeaf||(this.orderedChildren.sort(((e,i)=>{var o,s;if(n){const n=(null!=(o=e.meta.modified.orderedParentIndex)?o:e.orderedParentIndex)-(null!=(s=i.meta.modified.orderedParentIndex)?s:i.orderedParentIndex);return 0!==n&&(r.push(e),r.push(i)),n}return e.orderedParentIndex-i.orderedParentIndex})),e&&this.orderedChildren.forEach((i=>{r.push(...i.sortOrderedChildren(e,n))})),this.updateChildrenIndices(this.orderedChildren,"orderedParentIndex",!0)),new Set(r)}},Cr={id:1,stores:1,parentIndex:1,parent:1,previousSibling:1,nextSibling:1,unfilteredIndex:1},Sr={get(e,n){return"proxyMeta"===n?this.proxyMeta:"constructor"===n?e.constructor:"setData"===n?this.setDataOverride:"set"===n?this.setOverride:Cr[n]?this.proxyMeta.data[n]:Reflect.get(e,n,this.proxyRecord)},set(e,n,r){return Cr[n]?this.proxyMeta.data[n]=r:e[n]=r,!0},setDataOverride(e,n){"parentIndex"===e?this.proxyMeta.data.parentIndex=n:this.proxyMeta.originalRecord.setData(e,n)},setOverride(e,n,...r){"parentIndex"===e?this.proxyMeta.data.parentIndex=n:this.proxyMeta.originalRecord.set(e,n,...r)}},ModelLink_default=e=>{var n;return __publicField(n=class extends(e||re){link(){if(this.isLinked)return this.$original.link();const e=this,n={...Sr,proxyMeta:{originalRecord:e,data:{id:`${e.id}_link_${w.generateUUID()}`,stores:[]}}},r=new Proxy(e,n);return n.proxyRecord=r,(e.meta.linkedRecords||(e.meta.linkedRecords=[])).push(r),r}get isLinked(){var e;return Boolean(null==(e=this.proxyMeta)?void 0:e.originalRecord)}get hasLinks(){return Boolean(!this.proxyMeta&&this.$links.length)}removeLink(e,n=null,r=!1){if(e.hasLinks)for(const i of e.$links.slice())n?oe.include(n,i):i.remove(r);else e.isLinked&&oe.remove(e.$original.$links,e)}beforeRemove(e){this.removeLink(this,e)}removeChild(e,n,r,i){if(!(null==i?void 0:i.isInserting)){e=oe.asArray(e);for(const n of e)this.removeLink(n,null,r)}return super.removeChild(e,n,r,i)}get $originalId(){return this.$original.id}get $links(){var e;return null!=(e=this.meta.linkedRecords)?e:[]}},"$name","ModelLink"),n},{defineProperty:xr}=Reflect,Dr=Symbol("owner"),Er=/[\s,]+/,Factoryable_default=e=>class Factoryable extends(e||re){static get $name(){return"Factoryable"}static get declarable(){return["factoryable","alias","type"]}static register(e,n,r=globalThis.__BRYNTUM_EXAMPLE){const{factoryable:i}=this.initClass(),{caseless:o,registry:s}=i,a=w.split(e,Er);for(let e,l,c=0;c<a.length;++c){if(l=a[c],e=o?l.toLowerCase():l,!r&&e in s)throw new Error(`Type "${l}" already registered with ${i.class.name} factory`);s[l]=s[e]=n.initClass()}}static isA(e,n){return this.isType(e,n,!0)}static isType(e,n,r){const{factoryable:i}=this,{caseless:o,registry:s}=i,a=s[o?n.toLowerCase():n];return!!a&&(r?e instanceof a:e.constructor===a)}static setupAlias(e){e.register(e.alias,e)}static setupFactoryable(e,n){const r=n.super.class;let{factoryable:i}=e;i={caseless:!0,defaultType:null,extends:r.factoryable?[r]:null,typeKey:"type",...i},i.class=e,i.registry=Object.create(null),i.extends&&!Array.isArray(i.extends)&&(i.extends=[i.extends]),xr(e,"factoryable",{get:()=>i})}static setupType(e,n){const{type:r}=e;e.register(r,e,n.replaceType),xr(e.prototype,"type",{value:r})}static create(e,n){return this.reconfigure(null,e,n)}static reconfigure(e,n,r){const i=this,{factoryable:o}=i,{typeKey:s}=o;let a,l,c,d,u,h,g,p,m,f=r;if(r&&!Et.isClass(r)&&(f=null,g=typeof r,"function"===g?h=r:"string"===g?f=r:Et.isObject(r)?(a=r.cleanup,l=r.defaults,d=r.owner,h=r.setup,f=r.type,p=r.transform):d=r),p&&(n="string"==typeof p?d[p](n):p(n)),m=n,"string"==typeof m)n={};else if(n){if(!0===n&&(n={}),!Et.isObject(n))return d&&n!==e&&(null==e?void 0:e[Dr])===d&&("string"==typeof a?d[a](e):null==a||a(e),e.destroy()),n;m=n[s]}if(m=m&&i.resolveType(m),e){if(n&&(!m||e.constructor===m))return s in n&&delete(n=Et.assign({},n))[s],e.setConfig(n),e;d&&e[Dr]===d&&("string"==typeof a?d[a](e):null==a||a(e),e.destroy())}if(n){if(l){if(!(c=m)){if(!(c=l[s]||f||o.defaultType))throw new Error(`No default mergeType defined for ${o.class.name} factory`);c=i.resolveType(c)}c&&(n=c.mergeConfigs(l,n))}if(h){if(u="string"==typeof h?d[h](n,m,l):h(n,m,l),null===u)return u;n=u||n}if(!m){if(!(m=n[s]||f||o.defaultType))throw new Error(`No default type defined for ${o.class.name} factory`);m=i.resolveType(m)}l&&!c&&(n=m.mergeConfigs(l,n)),s in n&&delete(n=Et.assign({},n))[s],n=new m(n),d&&(n[Dr]=d)}return n||null}static resolveType(e,n){if("string"!=typeof e)return e;const{factoryable:r}=this,i=r.extends;let o,s=r.registry[r.caseless?e.toLowerCase():e];for(o=0;!s&&i&&o<i.length;++o)s=i[o].resolveType(e,!0);if(!s&&!n)throw new Error(`Invalid type name "${e}" passed to ${r.class.name} factory`);return s}},{getOwnPropertyDescriptor:Rr}=Reflect,kr=class extends(re.mixin(Factoryable_default)){static get $name(){return"DataField"}static get type(){return"auto"}static get factoryable(){return{defaultType:"auto"}}static get prototypeProperties(){return{compare:null,compareItems:null,dataSource:null,alwaysWrite:!1,nullable:!0,nullText:null,nullValue:void 0,persist:!0,readOnly:!1,internal:!1}}construct(e){const n=this;e&&(n.name=e.name,Object.assign(n,e)),n.compare&&(n.compareItems=(e,r)=>n.compare(null==e?void 0:e[n.name],null==r?void 0:r[n.name]))}defineAccessor(e,n){const{name:r,dataSource:i}=this;!n&&r in e&&e.$meta.hierarchy.some((e=>{var n;return!1===(null==(n=Rr(e.prototype,r))?void 0:n.enumerable)}))||Reflect.defineProperty(e,r,{configurable:!0,enumerable:!0,get:this.complexMapping?function(){return this.complexGet(r,i)}:function(){return this.batching&&r in this.meta.batchChanges?this.meta.batchChanges[r]:i in this.data?this.data[i]:this.data[r]},set(e){const n=this.$meta.fields.map[r];n&&n.readOnly||this.set(r,e)}})}isEqual(e,n){return Et.isEqual(e,n)}print(e){return null==e?this.nullText:this.printValue(e)}printValue(e){return String(e)}};kr._$name="DataField";var Tr=class extends kr{static get $name(){return"ArrayDataField"}static get type(){return"array"}isEqual(e,n){return e===n}};Tr.initClass(),Tr._$name="ArrayDataField";var Mr=class extends kr{static get $name(){return"BooleanDataField"}static get type(){return"boolean"}static get alias(){return"bool"}static get prototypeProperties(){return{nullValue:!1}}isEqual(e,n){return null==e&&null==n||super.isEqual(e,n)}convert(e){var n;return null==e?this.nullable?e:this.nullValue:"false"!==(null==(n=e.toLowerCase)?void 0:n.call(e))&&Boolean(e)}};Mr.initClass(),Mr._$name="BooleanDataField";var Ar=class extends kr{static get $name(){return"DateDataField"}static get type(){return"date"}static get prototypeProperties(){return{format:null}}convert(e){return null==e?this.nullable||(e=this.nullValue):"now"===e?e=new Date:e instanceof Date||(e=Ct.parse(e,this.format||Ct.defaultParseFormat))&&!isNaN(e)||(e=void 0),e}serialize(e){return e instanceof Date&&(e=Ct.format(e,this.format||Ct.defaultFormat)),e}printValue(e){return Ct.format(e,this.format||Ct.defaultFormat)}};Ar.initClass(),Ar._$name="DateDataField";var Ir=class extends kr{static get $name(){return"StringDataField"}static get type(){return"string"}static get prototypeProperties(){return{nullValue:""}}convert(e){return null==e?this.nullable?e:this.nullValue:String(e)}};Ir.initClass(),Ir._$name="StringDataField";var Fr=class extends Ir{static get $name(){return"DurationUnitDataField"}static get type(){return"durationunit"}isEqual(e,n){return 0===Ct.compareUnits(e,n)}};Fr.initClass(),Fr._$name="DurationUnitDataField";var Pr=class extends kr{static get $name(){return"IntegerDataField"}static get type(){return"integer"}static get alias(){return"int"}static get prototypeProperties(){return{nullValue:0,rounding:"round"}}convert(e){return null==e?this.nullable?e:this.nullValue:Math[this.rounding](Number(e))}};Pr.initClass(),Pr._$name="IntegerDataField";var Or=class extends kr{static get $name(){return"ModelDataField"}static get type(){return"model"}static get prototypeProperties(){return{complexMapping:!0}}isEqual(e,n){return e&&n&&n instanceof e.constructor&&n.id==e.id}};Or.initClass(),Or._$name="ModelDataField";var Lr=class extends kr{static get $name(){return"NumberDataField"}static get type(){return"number"}static get alias(){return"float"}static get prototypeProperties(){return{nullValue:0,precision:null}}isEqual(e,n){return isNaN(Number(e))&&isNaN(Number(n))||super.isEqual(e,n)}convert(e){if(null==e)return this.nullable?e:this.nullValue;if(e=Number(e),isNaN(e))return;let n=this.precision;return n?(n=10**n,e=Math.round(e*n)/n):0===n&&(e=Math.round(e)),e}};Lr.initClass(),Lr._$name="NumberDataField";var _r=class extends kr{static get $name(){return"ObjectDataField"}static get type(){return"object"}static get prototypeProperties(){return{complexMapping:!0}}};_r.initClass(),_r._$name="ObjectDataField";var $r=class extends kr{init(e,n){var r;const i=this,o=`${i.name}Store`,s={skipStack:!0};if(i.modelClass&&(s.modelClass=i.modelClass),null==(r=n[`init${w.capitalize(o)}`])||r.call(n,s),!s.storeClass&&!i.storeClass)throw new Error(`Field '${i.name}' with type 'store' must have a storeClass configured`);const a=n.meta[o]=new(s.storeClass||i.storeClass)(s);i.complexMapping?Et.setPath(e,i.dataSource,a):e[i.dataSource]=a,a.verifyNoGeneratedIds=!1,a.usesId=!a.count||!a.every((e=>e.hasGeneratedId)),a.$currentValue=i.getValue(a),a.ion({change:({action:e})=>{const r=i.getValue(a);if(!a.$isSettingStoreFieldData){const o=a.$preserveCurrentDataset;a.$preserveCurrentDataset=i.subStore&&("update"===e||"remove"===e||"add"===e),n.set(i.name,r),a.$preserveCurrentDataset=o}a.$currentValue=r}})}set(e,n,r){var i,o;const s=this,a=`${s.name}Store`,{[a]:l}=r.meta;if(!l)return r.meta.initableValues.set(s,e),!1;l.$isSettingStoreFieldData||(l.$isSettingStoreFieldData=!0,e=null!=(o=null==(i=r[`process${w.capitalize(a)}Data`])?void 0:i.call(r,e,r))?o:e,l.$preserveCurrentDataset||(l.data=e),l.$isSettingStoreFieldData=!1,l.usesId=!l.count||!l.every((e=>e.hasGeneratedId)))}serialize(e,n){return n.meta[`${this.name}Store`].$currentValue}getValue(e){return e.allRecords.map((n=>{const r=n.persistableData;return e.usesId||delete r.id,r}))}isEqual(e,n){return(null==e?void 0:e.isStore)&&(e=e.$currentValue),(null==n?void 0:n.isStore)&&(n=n.$currentValue),Et.isDeeplyEqual(e,n)}getOldValue(e){const n=e.meta[`${this.name}Store`];return n?Et.clone(n.$currentValue):null}};__publicField($r,"$name","StoreDataField"),__publicField($r,"type","store"),$r.initClass(),$r._$name="StoreDataField";var{defineProperty:jr}=Reflect,{hasOwn:zr}=Et,Br=void 0,Hr={children:1,data:1,meta:1},Vr=["name","title","text","label","description"],Nr={boolean:1,number:1,date:1,object:1},qr={parentId:1,$PhantomId:2,id:3},Wr=class extends(re.mixin(ModelStm_default,TreeNode_default,ModelLink_default)){static get $name(){return"Model"}static get declarable(){return["fields"]}static get fields(){return[{name:"parentIndex",type:"number",persist:!1,internal:!0},{name:"orderedParentIndex",type:"number",persist:!1,internal:!0},{name:"readOnly",type:"boolean"},{name:"expanded",internal:!0}]}static set idField(e){this._assignedIdField=!0,this._idField=e}static get idField(){return this._idField}static set childrenField(e){this._childrenField=e}static get childrenField(){if(!this._childrenField){const e=this.fieldMap.children;this._childrenField=(null==e?void 0:e.dataSource)||"children"}return this._childrenField}get indexPath(){const e=[];let n=this,r=n.childLevel;for(n=this;n&&!n.isRoot;n=n.parent)e[r--]=n.parentIndex+1;return e}construct(e={},n=null,r=null,i=!1,o=!1,s=!1){var a,l;const c=this,d=null!=(a=oe.asArray(n))?a:[],{constructor:u,fieldMap:h}=c;let g=null;if(n=d[0],c.meta={modified:{},...u.metaConfig,...r},u.applyConfigs)for(const n in c.getDefaultConfiguration())g||(g={},c.useRawData&&c.useRawData.enabled||(e={...e})),n in e&&(void 0!==e[n]&&(g[n]=e[n]),delete e[n]);if(super.construct(g),i||u.exposeProperties(e,s),!zr(u,"idFieldProcessed")){let e=c.meta.idField;e||(u._assignedIdField?e=u.idField:n&&(e=n.idField)),e&&e!==h.id.dataSource&&u.addField({name:"id",dataSource:e,internal:!0}),u._idField=h.id.dataSource,u.idFieldProcessed=!0}c._internalId=Wr._internalIdCounter++,c.stores=[],c.unjoinedStores=[],c.originalData||(c.originalData=e),c.data=u.processData(e,!1,n,c,o),(null==(l=c.meta.initableValues)?void 0:l.size)&&c.assignInitables(),null==c.id&&c.setData("id",c.generateId(n)),c.data[u.childrenField]&&c.processChildren(d),c.generation=0}set isCreating(e){const n=this;Boolean(n.meta.isCreating)!==e&&(n.meta.isCreating=e,n.stores.forEach((r=>{r.onIsCreatingToggle(n,e)})))}get isCreating(){return Boolean(this.meta.isCreating)}equals(e){if(e instanceof this.constructor){for(let n=this.$meta.fields.defs,r=0,{length:i}=n;r<i;r++){const i=n[r],{name:o}=i;if("id"!==o&&!i.isEqual(this[o],e[o]))return!1}return!0}return!1}get subclass(){return new this.constructor(Object.setPrototypeOf({id:Br},this.data),this.stores[0],null,!0)}static processData(e,n=!1,r,i,o){const{fieldMap:s,defaultValues:a}=this,{useRawData:l={enabled:!1}}=r||{},c=o||l.enabled?e:Et.clone(e);let d;if(!(n=n||l.disableDefaultValue||o))for(d in a)if(c[d]===Br){let e=a[d];Array.isArray(e)&&(e=e.slice()),c[d]=e}if(!l.disableTypeConversion&&!o)for(d in s){const r=s[d],{name:o,dataSource:a}=r,u=a!==o,h=r.complexMapping,g=u&&(h?Et.pathExists(e,a):a in e),p=o in e&&(!u||!g),m=!l.disableTypeConversion&&r.convert;if((p||m)&&(!n||p||g)){const n=p?c[o]:h?Et.getPath(c,a):c[a],s=m?r.convert(n,e,i):n;h?Et.setPath(c,a,s):c[a]=s,u&&delete c[o]}}return this.$meta.fields.initable.length&&this.initInitables(i,c),c}static setupClass(e){super.setupClass(e),e.fields||this.setupFields(this,e)}static setupFields(e,n){var r,i,o,s,a;const l=zr(e,"fields")&&e.fields,c=n.super.fields,d=n.fields={defs:null!=(r=null==c?void 0:c.defs.slice())?r:[],exposedData:!1,defaults:c?{...c.defaults}:{},exposed:Object.create(null!=(i=null==c?void 0:c.exposed)?i:null),ordinals:Object.create(null!=(o=null==c?void 0:c.ordinals)?o:null),map:Object.create(null!=(s=null==c?void 0:c.map)?s:null),sources:Object.create(null!=(a=null==c?void 0:c.sources)?a:null)};zr(e,"defaults")&&Object.assign(d.defaults,e.defaults),zr(e,"idField")&&(e.addField({name:"id",dataSource:e.idField,internal:!0}),d.exposed[e.idField]=!0),(null==l?void 0:l.length)&&l.map(e.addField,e),d.initable=d.defs.filter((e=>e.init)),e.exposeRelations()}static get defaultValues(){return this.$meta.fields.defaults}static get allFields(){return this.$meta.fields.defs}get allFields(){return this.$meta.fields.defs}static get fieldMap(){return this.$meta.fields.map}get fieldMap(){return this.$meta.fields.map}static get fieldDataSourceMap(){return this.$meta.fields.sources}static exposeProperties(e,n=!0){const r=this,i=r.$meta.fields,o=n?"exposed":"map";if(e&&r.autoExposeFields&&!i.exposedData){let n,s,a;for(n in e)i[o][n]||n===r.childrenField||(a=Et.typeOf(e[n]),s={name:n,dataSource:n,fromData:!0},Nr[a]&&(s.type=a),r.addField(s));i.exposedData=!0}r.exposeRelations()}static addField(e){if(null==e)return;"string"==typeof e&&(e={name:e});const n=this.initClass(),r=n.$meta.fields,{ordinals:i}=r,o=r.exposed,{name:s}=e,a=r.map[s],l=e.dataSource||(e.dataSource=s);let c,d;if(!a||e.type&&e.type!==a.type)c=kr.create(e),c.definedBy=a?a.definedBy:n,c.ordinal=a?a.ordinal:i[s]=r.defs.length;else for(d in c=Object.create(a),e)"type"!==d&&(c[d]=e[d]);return c.owner=n,r.defs[c.ordinal]=c,r.map[s]=c,r.sources[l]||(r.sources[l]=c),l.includes(".")&&(c.complexMapping=!0),c.complexMapping?o[l.split(".")[0]]=!0:o[l]=!0,"defaultValue"in c&&(r.defaults[l]=c.defaultValue),Hr[s]||c.defineAccessor(n.prototype),n._nonPersistableFields=null,n._alwaysWriteFields=null,c}static removeField(e){const n=this.initClass(),r=n.$meta.fields,i=r.map[e],{ordinals:o}=r,s=o[e];if(i){r.defs.splice(s,1),delete o[e],delete r.defaults[e],delete r.exposed[e],delete r.map[e],delete r.sources[i.dataSource];for(const e in o)o[e]>s&&--o[e];delete n.prototype[e]}}static exposeRelations(){const e=this;if(!zr(e,"exposedRelations")&&e.relations){e.exposedRelations=[];for(const n in e.relations){const r=e.relations[n];r.relationName=n,e.exposedRelations.push(r),Reflect.ownKeys(e.prototype).includes(n)||jr(e.prototype,n,{enumerable:!0,get:function(){return this.getForeign(n)},set:function(e){this.setForeign(n,e,r)}})}}}static initInitables(e,n){const r=e.meta.initableValues=new Map;for(const i of this.$meta.fields.initable){const o=Et.getPath(n,i.dataSource);void 0!==o&&r.set(i,o),!i.lazy&&i.init(n,e)}}assignInitables(){const{initableValues:e}=this.meta;for(const[n,r]of e)!1!==n.set(r,this.data,this)&&e.delete(n)}static get autoExposeFields(){return!0}static fieldSorter(e,n){return(qr[e]||100)-(qr[n]||100)}get fields(){return this.$meta.fields.defs}getFieldDefinition(e){return this.$meta.fields.map[e]}getFieldDefinitionFromDataSource(e){return this.$meta.fields.sources[e]}get fieldNames(){return Object.keys(this.data)}static getFieldDefinition(e){return this.$meta.fields.map[e]}static getFieldDataSource(e){return this.getFieldDefinition(e).dataSource}getDataSource(e){const n=this.constructor.getFieldDefinition(e);return(null==n?void 0:n.dataSource)||(null==n?void 0:n.name)}static processField(e,n,r){const i=this.fieldMap[e];return(null==i?void 0:i.convert)?i.convert(n,this.data,r):n}initRelations(){const e=this;e.constructor.exposedRelations&&e.stores.forEach((n=>{var r;n.modelRelations||n.initRelations();const i=[];null==(r=n.modelRelations)||r.forEach((n=>{i.push({related:e.initRelation(n),config:n})})),n.updateRecordRelationCache(e,i)}))}initRelation(e){const n=this,r=n.get(e.foreignKey),i=r!==Br&&"string"!=typeof e.foreignStore&&e.foreignStore.getById(r);return(n.meta.relationCache||(n.meta.relationCache={}))[e.relationName]=i||(null!=r?{id:r,placeHolder:!0}:null),i}removeRelation(e){const{relationName:n,foreignKey:r,nullFieldOnRemove:i}=e;this.meta.relationCache[n]&&(delete this.meta.relationCache[n],i&&this.setData(r,null))}getForeign(e){var n;return null==(n=this.meta.relationCache)?void 0:n[e]}setForeign(e,n,r){const i=Wr.asId(n);return this.set(r.foreignKey,i)}getRelationConfig(e){var n,r;return null==(r=null==(n=this.firstStore)?void 0:n.modelRelations)?void 0:r.find((n=>n.foreignKey===e))}flatGet(e,n){return this.batching&&e in this.meta.batchChanges?this.meta.batchChanges[e]:n in this.data?this.data[n]:this.data[e]}complexGet(e,n){return this.batching&&e in this.meta.batchChanges?this.meta.batchChanges[e]:Et.getPath(this.data,n)}get(e){if(!e)return;const n=this.fieldMap[e];return!n&&e.includes(".")?this.complexGet(e,e):(null==n?void 0:n.complexMapping)?this.complexGet(e,n.dataSource):this.flatGet(e,(null==n?void 0:n.dataSource)||e)}setData(e,n){var r,i;const{data:o,fieldMap:s}=this;if("string"==typeof e){const i=s[e],a=null!=(r=null==i?void 0:i.dataSource)?r:e;(null==i?void 0:i.set)?i.set(n,this.data,this):(null==i?void 0:i.complexMapping)?Et.setPath(o,a,n):o[a]=n}else{const r=Object.keys(e);for(let a=0;a<r.length;a++){const l=r[a],c=s[l],d=null!=(i=null==c?void 0:c.dataSource)?i:l;(null==c?void 0:c.set)?c.set(n,this.data,this):d&&((null==c?void 0:c.complexMapping)?Et.setPath(o,d,e[l]):o[d]=e[l])}}}getData(e){var n;const r=this.fieldMap[e],i=null!=(n=null==r?void 0:r.dataSource)?n:e;if(i)return(null==r?void 0:r.complexMapping)?Et.getPath(this.data,i):this.data[i]}syncId(e){const n=this.id;if(n!==e){this.setData("id",e);const r={id:{value:e,oldValue:n}};this.afterChange(r,r)}}set(e,n,r=!1,i=!1,o=!1,s=!1,a=!0){var l;const c=this;if(c.isBatchUpdating)return c.inBatchSet(e,n,r||c.$silenceBatch),null;{const d=c.inSet(e,n,r,i,o,s,a);return null==(l=c.afterSet)||l.call(c,e,n,r,i,d),d}}fieldToKeys(e,n){return"string"!=typeof e?Et.assign({},e):{[e]:n}}inBatchSet(e,n,r){const i=this,{meta:o,constructor:s,fieldMap:a}=i,l={};let c,d=!1;if("string"!=typeof e?Object.keys(i.fieldToKeys(e,n)).forEach((r=>{c=a[r]||Et,n=s.processField(r,e[r],i),c.isEqual(o.batchChanges[r],n)||(l[r]={value:n,oldValue:i.get(r)},o.batchChanges[r]=n,d=!0)})):(c=a[e]||Et,c.isEqual(o.batchChanges[e],n)||(l[e]={value:n,oldValue:i.get(e)},o.batchChanges[e]=n,d=!0)),d&&(i.generation++,!r)){const e={action:"update",record:i,records:[i],changes:l};i.stores.forEach((n=>{n.trigger("batchedUpdate",{...e})})),i.forEachLinked(((n,r)=>n.trigger("batchedUpdate",{...e,record:r,records:[r]})))}}inSet(e,n,r,i,o=!1,s=!1,a=!0){var l,c,d;const u=this,{data:h,meta:g,fieldMap:p,constructor:m}=u,{prototype:f,childrenField:b}=m,v={},y=u.fieldToKeys(e,n),w=Object.keys(y).sort(this.constructor.fieldSorter);let C=!1;if(!r&&!u.triggerBeforeUpdate(y))return null;u.inSetting=!0;for(let e=0;e<w.length;e++){const n=w[e];if(n===b)continue;const r=p[n],a=r||Et,S=null==r?void 0:r.readOnly,x=null!=(l=null==r?void 0:r.dataSource)?l:n,D=!o&&!r&&n in f,E=D?u[x]:(null==r?void 0:r.complexMapping)?Et.getPath(h,x):h[x],R=m.processField(n,y[n],u),k=y[n]={value:R},T=u.getRelationConfig(n);S||a.isEqual(E,R)||s&&void 0===R||(u.generation++,k.oldValue=null!=(d=null==(c=null==r?void 0:r.getOldValue)?void 0:c.call(r,u))?d:E,C=!0,n in g.modified&&a.isEqual(g.modified[n],R)?(Reflect.deleteProperty(g.modified,n),u.isReverting&&(u.data[x]=R)):u.ignoreBag||(n in g.modified||u.storeFieldChange(n,E),k.oldValue===Br&&Reflect.deleteProperty(k,"oldValue")),v[n]=k,u.applyValue(D,x,R,o,r),T&&!i&&(u.initRelation(T),u.stores.forEach((e=>e.cacheRelatedRecord(u,R,T.relationName,k.oldValue)))))}return C&&u.afterChange(y,v,r,i,o),u.inSetting=!1,C?v:null}applyValue(e,n,r,i,o){const s=this;let a=null==o?void 0:o.complexMapping;if(((null==o?void 0:o.name)||n)!==s.constructor.parentIdField)if(e)s[(null==o?void 0:o.name)||n]=r;else if(null==o?void 0:o.set)o.set(r,s.data,s);else{if(!o&&n.includes(".")){const e=n.split(".")[0];a=(null==(o=s.constructor.fieldMap[e])?void 0:o.complexMapping)||"object"===(null==o?void 0:o.type)}a?Et.setPath(s.data,n,r):s.data[n]=r}else(s.firstStore.getById(r)||s.firstStore.rootNode).insertChild(s,null,!1,{orderedParentIndex:{skip:!0}})}afterChange(e,n,r,i,o){for(const s of this.stores)s.onModelChange(this,e,n,r,i,o);this.forEachLinked(((s,a)=>s.onModelChange(a,e,n,r,i,o)))}forEachLinked(e){for(const n of this.$links)for(const r of n.stores)e(r,n)}get isPersistable(){return!this.isBatchUpdating&&!this.isCreating}get isModified(){return Boolean(this.meta.modified&&Object.keys(this.meta.modified).length>0)}get hasPersistableChanges(){return this.isPersistable&&!Et.isEmpty(this.rawModificationData)}isFieldModified(e){return this.isModified&&e in this.meta.modified}getFieldPersistentValue(e){const n="string"==typeof e?this.getFieldDefinition(e):e,r=(null==n?void 0:n.name)||e;let i;return n&&!n.persist||(i=this[r],(null==n?void 0:n.serialize)&&(i=n.serialize(i,this))),i}get modifications(){const e=this.rawModifications;return e&&Object.keys(e).length&&(e[this.constructor.idField]=this.id),e}get rawModifications(){const e=this,n={};if(!e.isModified)return null;let r=!1;return Object.keys(e.meta.modified).forEach((i=>{const o=e.getFieldPersistentValue(i);o!==Br&&(n[i]=o,r=!0)})),r?n:null}get modificationData(){const e=this.rawModificationData;return e&&Object.keys(e).length&&Et.setPath(e,this.constructor.idField,this.id),e}get rawModificationData(){const e=this,{fieldMap:n}=e.constructor,r={};if(!e.isModified)return null;let i=!1;return Object.keys(e.meta.modified).forEach((o=>{const s=n[o];if(null==s?void 0:s.persist){const n=e.getFieldPersistentValue(o);n!==Br&&(Et.setPath(r,s.dataSource,n),i=!0)}})),i?r:null}get modificationDataToWrite(){const e=this.constructor.alwaysWriteFields,n=this.modificationData;return e.forEach((e=>{n[this.getFieldDefinition(e).dataSource]=this.getFieldPersistentValue(e)})),n}get persistableData(){const e=this,n={};return e.fields.forEach((r=>{const i=e.getFieldPersistentValue(r);i!==Br&&((null==r?void 0:r.complexMapping)?Et.setPath(n,r.dataSource,i):n[r.dataSource]=i)})),n}get dataByFieldName(){const{data:e}=this;return this.fields.reduce(((n,r)=>(Et.hasPath(e,r.dataSource)&&(n[r.name]=e[r.dataSource]),n)),{})}get isCommitting(){return Boolean(this.meta.committing)}clearChanges(e=!0,n=!0,r=null){const i=this,{meta:o}=i;if(r)for(const e in r)delete o.modified[e];else o.modified={};const s=Et.isEmpty(o.modified);o.committing=!1,n&&i.stores.forEach((n=>{if(s&&n.modified.remove(i),n.added.remove(i),e){const e=n.collectDescendants(i).all;n.added.remove(e),s&&n.modified.remove(e)}}))}storeFieldChange(e,n){this.meta.modified[e]=n}revertChanges(e=!1){this.isReverting=!0,this.set(this.meta.modified,Br,e),this.isReverting=!1}applyChangeset(e,n="$PhantomId",r=!0){var i;const o=this,s=o.constructor,{idField:a,fieldDataSourceMap:l}=s,c=Et.pathifyKeys(e),d=Et.pathifyKeys(o.modificationData),u={},h=n in e;for(const e in c){const n=l[e],o=null!=(i=null==n?void 0:n.name)?i:e;(r||((null==n?void 0:n.name)===a?h:c[e]===d[e]))&&(u[o]=c[e])}const g=o.set(u);return o.clearChanges(!1,!0,r?null:u),g?Object.entries(g).reduce(((e,[n,r])=>(e[n]=r.value,e)),{}):{}}get internalId(){return this._internalId}get isPhantom(){return""===this.id||null==this.id||this.hasGeneratedId}get isModel(){return!0}get hasGeneratedId(){return"string"==typeof this.id&&this.id.startsWith("_generated")}static generateId(e=this.$$name){return`_generated${e}_${w.generateUUID()}`}generateId(){return this.constructor.generateId()}static asId(e){return(null==e?void 0:e.isModel)?e.id:Et.isObject(e)?e[this.fieldMap.id.dataSource]:e}get json(){return w.safeJsonStringify(this)}toJSON(){const{children:e,unfilteredChildren:n}=this,r=this.persistableData;return(n||e)&&(r[this.constructor.childrenField]=(n||e).map((e=>e.toJSON()))),r}toString(){const e=this,n=Vr.find((n=>n in e.constructor.fieldMap)),r=n?{[e.constructor.idField]:e.id,[n]:e[n]}:e.data;return w.safeJsonStringify(r)}get isBatchUpdating(){return Boolean(this.batching)}hasBatchedChange(e){var n,r;return null==(r=null==(n=this.meta)?void 0:n.batchChanges)?void 0:r[e]}beginBatch(e=!1){const n=this;n.batching||(n.batching=0,n.meta.batchChanges={}),e&&(n.$silenceBatch=(n.$silenceBatch||0)+1),n.batching++}endBatch(e=!1,n=!1,r=!0){const i=this,{parentIdField:o}=i.constructor;if(i.batching&&(i.batching--,i.$silenceBatch&&i.$silenceBatch--,!(i.batching>0||Et.isEmpty(i.meta.batchChanges)))){let{batchChanges:s}=i.meta;i.meta.batchChanges=null,s[o]&&(s={...s},i.parentId=s[o],delete s[o]),i.set(s,Br,e,!1,n,void 0,r)}}cancelBatch(){if(this.batching){const e=this,{batchChanges:n}=e.meta,r={};if(e.batching=null,e.meta.batchChanges=null,e.generation++,!e.$silenceBatch){Object.entries(n).forEach((([n,i])=>{r[n]={oldValue:i,value:e[n]}}));const i={action:"update",record:e,records:[e],changes:r};e.stores.forEach((e=>{e.trigger("batchedUpdate",{...i})})),e.forEachLinked(((e,n)=>{e.trigger("batchedUpdate",{...i,record:n,records:[n]})}))}e.$silenceBatch&&e.$silenceBatch--}}triggerBeforeUpdate(e){var n;return!(null==(n=this.stores)?void 0:n.some((n=>!1===n.trigger("beforeUpdate",{record:this,changes:e}))))}copy(e=null,n){const r=this,i=Et.clone(r.data),o=r.constructor.idField,s=Et.isObject(n)?n.deep:n;let a;if(e&&"object"==typeof e?(a=e[o],Object.assign(i,e)):a=e,s&&r.children?i.children=r.children.map((e=>e.copy(void 0,n))):(delete i.children,delete i.expanded),r.$meta.fields.initable.length>0){const e=r.toJSON();for(const n of r.$meta.fields.initable)i[n.name]=e[n.name]}!1!==e&&(i[o]=a||r.generateId(r.firstStore));const l=new r.constructor(i,null,null,!1,!0);return l.originalInternalId=r.internalId,l}copyData(e,n,r){const i={};e.allFields.forEach((({name:r})=>{r!==e.constructor.idField&&(i[r]=n?e.get(r):e[r])})),this.set(i,null,r)}remove(e=!1){const n=this,{parent:r}=this;r?r.removeChild(n):n.stores.length&&!n.isSpecialRow&&n.stores.forEach((r=>r.remove(n,e,!1,!0)))}beforeRemove(e,n){return super.beforeRemove(e,n)}get isValid(){return!0}get firstStore(){return this.stores.length>0&&this.stores[0]}joinStore(e){var n;const r=this,{stores:i}=r;if(!i.includes(e)){const{unjoinedStores:o}=r;super.joinStore(e),e.register(r),i.push(e),o.includes(e)&&o.splice(o.indexOf(e),1),r.isLoaded&&r.children.forEach((n=>n.joinStore(e))),r.initRelations(),!e.tree||r.isRoot||(null==(n=e.stm)?void 0:n.isRestoring)||(r.instanceMeta(e.id).collapsed=!r.expanded)}}unjoinStore(e,n=!1){var r,i,o;const s=this,{stores:a,unjoinedStores:l}=s;a.includes(e)&&(e.isDestroying||(e.unregister(s),l.push(e)),null==(i=null==(r=s.unfilteredChildren||s.children)?void 0:r.forEach)||i.call(r,(r=>r.unjoinStore(e,n))),a.splice(a.indexOf(e),1),null==(o=super.unjoinStore)||o.call(this,e,n),e.uncacheRelatedRecord(s))}isPartOfStore(e){return e?e.includes(this):this.stores.length>0}get isRemoved(){return!this.isPartOfStore()}instanceMeta(e){const{meta:n}=this,r=e.id||e;return n.map||(n.map={}),n.map[r]||(n.map[r]={})}get isGroupHeader(){return"groupRowFor"in this.meta}get isGroupFooter(){return"groupFooterFor"in this.meta}get isSpecialRow(){var e;return Boolean(null==(e=this.meta)?void 0:e.specialRow)}get $original(){return this.isLinked?this.proxyMeta.originalRecord:this}static get nonPersistableFields(){const e=this;return e._nonPersistableFields||(e._nonPersistableFields={},e.allFields.forEach((n=>{n.persist&&!n.calculated||(e._nonPersistableFields[n.name]=1)}))),e._nonPersistableFields}static get alwaysWriteFields(){const e=this;return e._alwaysWriteFields||(e._alwaysWriteFields=[],e.allFields.forEach((n=>{n.alwaysWrite&&e._alwaysWriteFields.push(n.name)}))),e._alwaysWriteFields}get domId(){return"string"==typeof this.id?this.id.replace(/[ .]/g,"-"):this.id}static toJavaScriptValue(e){const{names:n}=this.$meta;return`class ${n[n.length-2]} extends ${n[n.length-3]} { static fields = ${w.toJavaScriptValue(this.fields,e)}; }`}getCurrentConfig(e){const{data:n,children:r}=this,{defaultValues:i,applyConfigs:o}=this.constructor,s=o?super.getCurrentConfig(e):{};if(s){for(const r of this.fields)if(r.persist){const o=Et.getPath(n,r.dataSource);r.isEqual(o,i[r.name])||Et.setPath(s,r.dataSource,re.processConfigValue(o,e))}if(r)if(Array.isArray(r)){s.children=[];for(const n of r)s.children.push(n.getCurrentConfig(e))}else s.children=r;this.hasGeneratedId&&delete s.id,delete s.parentId,delete s.parentIndex}return s}},Ur=Wr;__publicField(Ur,"relations",null),Ur._idField="id",Ur._internalIdCounter=1,Ur._assignedIdField=!1,Ur.exposeProperties(),Ur._$name="Model";var Gr=class{constructor(e,n){"number"==typeof e||null===e?(this._magnitude=e,this._unit=n):("string"==typeof e&&Object.assign(this,Ct.parseDuration(e)),"object"==typeof e&&Object.assign(this,e))}get magnitude(){return this._magnitude}set magnitude(e){this._magnitude="number"==typeof e&&e}get unit(){return this._unit}set unit(e){this._unit=Ct.parseTimeUnit(e)}get isValid(){return null!=this._magnitude&&Boolean(Ct.normalizeUnit(this._unit))}get milliseconds(){return this.isValid?Math.round(Ct.asMilliseconds(this._magnitude,this._unit)):0}isEqual(e){return Boolean(e)&&null!=this._magnitude&&null!=e._magnitude&&this.milliseconds===e.milliseconds}toString(e){const n=this,r=e?"getShortNameOfUnit":"getLocalizedNameOfUnit";return n.isValid?`${n._magnitude} ${Ct[r](n._unit,1!==n._magnitude)}`:""}toJSON(){return this.toString()}valueOf(){return this.milliseconds}};Gr._$name="Duration";var nestedValueReducer=(e,n)=>null==e?void 0:e[n],Yr=/^is(this|next|last)(week|month|year)$/i,Kr=["isToday","isTomorrow","isYesterday","isThisWeek","isNextWeek","isLastWeek","isThisMonth","isNextMonth","isLastMonth","isThisYear","isNextYear","isLastYear","isYearToDate"],Xr=class extends(re.mixin(Identifiable_default)){static get defaultConfig(){return{value:null,operator:null,filterBy:null,convert:null,caseSensitive:!0,id:null,type:null,internal:null,disabled:!1}}static get configurable(){return{property:null}}construct(e){"function"==typeof e&&(e={filterBy:e}),e.type?"date"!==e.type||null==e.value||Array.isArray(e.value)?"duration"!==e.type||null==e.value||Array.isArray(e.value)||(e.value=new Gr(e.value)):e.value=new Date(e.value):Ct.isDate(e.value)||Array.isArray(e.value)&&e.value.every(Ct.isDate)?e.type="date":e.value instanceof Gr&&(e.type="duration"),super.construct(e)}get id(){return this._id||(this.internal?this._id=Xr.generateId(`b-internal-${this.property}-filter-`):this._id=this.property||Xr.generateId("b-filter-")),this._id}set id(e){this._id=e}onChange(e){var n;const r=this;r.isConfiguring||!(null==(n=r.owner)?void 0:n.onFilterChanged)||r.owner.isConfiguring||r.owner.onFilterChanged(r,e)}get filterBy(){return this._filterBy||this.defaultFilterBy}set filterBy(e){this._filterBy=e}defaultFilterBy(e){const n=this;let r;return r=n._propertyItems.length>1?n._propertyItems.reduce(nestedValueReducer,e):e[n.property],n[n.operator](n.convert(r))}updateProperty(e){this._propertyItems=e.split("."),this.onChange("property")}set value(e){const n=this;n._value=e,Array.isArray(e)&&({date:1,duration:1}[n.type]||e.length>0&&"string"==typeof e[0])?n._filterValue=e.map((e=>n.convert(e))):!n.caseSensitive&&Array.isArray(e)&&e.length>0&&"string"==typeof e[0]?n._filterValue=e.map((e=>null==e?void 0:e.toLowerCase())):n.caseSensitive||"string"!=typeof e?n._filterValue=n.convert(e):n._filterValue=e.toLowerCase(),n.onChange("value")}get value(){return this._value}get filterValue(){return this._filterValue}set operator(e){this._operator=e,this.onChange("operator")}get operator(){const e=this;return e._operator?e._operator:Array.isArray(e.filterValue)?"isIncludedIn":"string"==typeof e.filterValue?"*":"="}convert(e){var n;return"sameTime"===this.operator||"string"==typeof this.filterValue&&e instanceof Date||("sameDay"===this.operator&&(e=Ct.clearTime(e)),e=null!=(n=null==e?void 0:e.valueOf())?n:e),e=this.caseSensitive||"string"!=typeof e?e:e.toLowerCase()}filter(e){return this.filterBy(e)}startsWith(e){return String(e).startsWith(this.filterValue)}endsWith(e){return String(e).endsWith(this.filterValue)}isIncludedIn(e){return 0===this.filterValue.length||this.filterValue.includes(e)}isNotIncludedIn(e){return!this.isIncludedIn(e)}includes(e){return 0===this.filterValue.length||String(e).includes(this.filterValue)}doesNotInclude(e){return!this.includes(e)}sameTime(e){return Ct.isSameTime(e,this.filterValue)}sameDay(e){return e===this.filterValue}"="(e){return Et.isEqual(e,this.filterValue)}"!="(e){return!Et.isEqual(e,this.filterValue)}">"(e){return Et.isMoreThan(e,this.filterValue)}">="(e){return Et.isMoreThan(e,this.filterValue)||Et.isEqual(e,this.filterValue)}"<"(e){return Et.isLessThan(e,this.filterValue)}"<="(e){return Et.isLessThan(e,this.filterValue)||Et.isEqual(e,this.filterValue)}"*"(e){return Et.isPartial(e,this.filterValue)}between(e){const[n,r]=this._filterValue;return(Et.isMoreThan(e,n)||Et.isEqual(e,n))&&(Et.isLessThan(e,r)||Et.isEqual(e,r))}notBetween(e){return!this.between(e)}empty(e){return null==e||0===String(e).length}notEmpty(e){return!this.empty(e)}isToday(e){return this.between(e)}isTomorrow(e){return this.between(e)}isYesterday(e){return this.between(e)}isThisWeek(e){return this.between(e)}isNextWeek(e){return this.between(e)}isLastWeek(e){return this.between(e)}isThisMonth(e){return this.between(e)}isNextMonth(e){return this.between(e)}isLastMonth(e){return this.between(e)}isThisYear(e){return this.between(e)}isNextYear(e){return this.between(e)}isLastYear(e){return this.between(e)}isYearToDate(e){return this.between(e)}isTrue(e){return!0===e}isFalse(e){return!1===e}setRelativeDateValues(){this._filterValue=Xr.getRelativeDateRange(this._operator).map((e=>e.valueOf()))}static getRelativeDateRange(e,n=new Date){let r,i,o,s,a,l,c;switch(e){case"isYearToDate":return[Ct.floor(n,"1 year"),n];case"isToday":return r=Ct.floor(n,"1 day"),[r,Ct.add(r,1,"day")];case"isYesterday":return r=Ct.floor(n,"1 day"),[Ct.add(r,-1,"day"),r];case"isTomorrow":return i=Ct.getStartOfNextDay(n),[i,Ct.add(i,1,"day")];case"isThisWeek":case"isNextWeek":case"isLastWeek":case"isThisMonth":case"isNextMonth":case"isLastMonth":case"isThisYear":case"isNextYear":case"isLastYear":if(o=e.toLowerCase().match(Yr),!o)throw new Error(`Unrecognized relative date expression: ${e}`);return[,l,c]=o,s=`1 ${c}`,a=Ct.floor(n,s),"next"===l?a=Ct.add(a,1,c):"last"===l&&(a=Ct.add(a,-1,c)),[a,Ct.add(a,1,c)]}}static generateFiltersFunction(e){if(!e||!e.length&&!e.count)return he.returnTrue;for(const n of e)"date"===n.type&&Kr.includes(n._operator)&&n.setRelativeDateValues();return function(n){let r=!0;for(const i of e)if(i.disabled||(r=i.filter(n)),!r)break;return r}}},Zr=Xr;__publicField(Zr,"$name","CollectionFilter"),Zr._$name="CollectionFilter";var Qr=Et.getPathDefault(globalThis,"bryntum.idCounts",Object.create(null)),Jr=class{static generateId(e="generatedId"){return e+(Qr[e]=(Qr[e]||0)+1)}};Jr._$name="IdHelper";var ei=class extends re{static get defaultConfig(){return{property:null,direction:"ASC",sortFn:null,convert:null,id:null,useLocaleSort:null}}construct(e){"function"==typeof e&&(e={sortFn:e}),super.construct(e)}get id(){return this._id||(this._id=this.property||Jr.generateId("b-sorter"))}set id(e){this._id=e}set sortFn(e){this._sortFn=e}get sortFn(){return this._sortFn?this._sortFn:this.defaultSortFn}defaultSortFn(e,n){const{convert:r,property:i,useLocaleSort:o}=this,s="desc"===this.direction.toLowerCase()?-1:1;if(e=e[i],n=n[i],r&&(e=r(e),n=r(n)),o&&null!=e&&null!=n&&"string"==typeof e){if(!0===o)return String(e).localeCompare(n);if("string"==typeof o)return String(e).localeCompare(n,o);if("object"==typeof o)return String(e).localeCompare(n,o.locale,o)}return(e>n?1:e<n?-1:0)*s}static generateSortFunction(e,n){const r=e.isCollection?e.values:e,i=r.length;return(e,o)=>{let s,a;for(a=0;a<i;++a)if(s=r[a].sortFn(e,o),s)return s;return n?n(e,o):0}}};ei._$name="CollectionSorter";var return0=()=>0,reverseNumericSortFn=(e,n)=>n-e,ti=Symbol("filteredIndicesProperty"),ni=Object.freeze([]),ri=Object.freeze({action:"sort",added:ni,removed:ni,replaced:ni}),ii=Object.freeze({action:"filter",added:ni,removed:ni,replaced:ni}),oi={string:1,number:1};function addItemToIndex(e,n,r){if(!1!==n.unique)n.set(r,e);else{let i=n.get(r);i||(i=new Set,n.set(r,i)),i.add(e)}}function doRebuildIndices(e,n,r,i){for(let o=0;o<e.length;o++){const s=e[o];for(let e=0;e<i;e++){const i=r[e],o=s[i];addItemToIndex(s,n[i],o)}}}var si=class extends(re.mixin(Events_default)){constructor(){super(...arguments),__publicField(this,"_sortFunction",null),__publicField(this,"_addedValues",null)}static get configurable(){return{idProperty:"id",extraKeys:null,autoFilter:!0,autoSort:!0,sorters:{$config:["lazy"],value:[]}}}get isCollection(){return!0}construct(e){this.generation=0,this._values=[],super.construct(e)}doDestroy(){var e;super.doDestroy();const n=this;n._values.length=0,n.isFiltered&&(n._filteredValues.length=0,n.filters.destroy()),null==(e=n._sorters)||e.destroy()}clear(){const e=this,n=e._values.slice();e.totalCount&&(e._values.length=0,e._filteredValues&&(e._filteredValues.length=0),e._indicesInvalid=!0,e.generation++,e.trigger("change",{action:"clear",removed:n}))}equals(e,n){if(e.isCollection&&(e=e.values),e.length===this.count){let{values:r}=this;return n&&(e=e.map(n),r=r.map(n)),oe.delta(e,r).inBoth.length===this.count}return!1}replaceValues({values:e,filteredValues:n,silent:r=!1,isNewDataset:i=!1}){const o=this;let s,a;if(o.isFiltered&&!i){Boolean(n)?e&&(s=o._values,o._values=e.slice()):(n=e.slice(),e=null),a=o._filteredValues,o._filteredValues=n.slice()}else s=o._values,o._values=e.slice(),n=null,o.isFiltered&&i&&o.autoFilter?(o._filterFunction=null,o._filteredValues=o._values.filter(o.filterFunction)):o._filteredValues&&(o._filteredValues.length=0);o._indicesInvalid=!0,o._addedValues=void 0,o.generation++,r||o.trigger("change",{action:"replaceValues",replacedValues:s,replacedFilteredValues:a,values:e,filteredValues:n})}set values(e){this.invalidateIndices(),this.splice(0,this._values.length,e)}get values(){return this.isFiltered?this._filteredValues:this._values}get filteredValues(){return this._filteredValues}[Symbol.iterator](){return this.values[Symbol.iterator]()}forEach(e,n=!1){(this.isFiltered&&!n?this._filteredValues:this._values).forEach(e)}map(e,n=!1){return(this.isFiltered&&!n?this._filteredValues:this._values).map(e)}find(e,n=!1){return(this.isFiltered&&!n?this._filteredValues:this._values).find(e)}get first(){return this.values[0]}get last(){return this.values[this.count-1]}get allValues(){return this._values}get addedValues(){return this._addedValues}match(e,n=!0){const r=this,{_values:i}=r,o=[];return r.forEach((s=>{const a=e.get(s.id,!0);if(a){const e=r.indexOf(s,!0),n=i[e];i[e]=a,r.removeFromIndices(n),r.addToIndices(a)}else n&&o.push(s)})),o.length&&r.remove(o),r.isFiltered&&(r._filteredValues=r._values.filter(r.filterFunction)),o}add(...e){1===e.length?this.splice(this._values.length,null,...e):this.splice(this._values.length,null,e)}remove(...e){1===e.length?this.splice(0,...e):this.splice(0,e)}move(e,n){for(e=oe.asArray(e);e.length&&e[0]===n;)e.shift();if(!e.length)return;const r=this,{_values:i}=r,o=r.indexOf(e[0],!0);if(1===e.length&&i[o+1]===n)return;r.suspendEvents(),r.remove(e),r.resumeEvents();const s=n?r.indexOf(n,!0):i.length;if(-1===s)throw new Error("Collection move beforeItem parameter must be present in Collection");return i.splice(s,0,...e),r._indicesInvalid=1,r.trigger("change",{action:"move",items:e,from:o,to:s}),s}splice(e=0,n,...r){const i=this,o=i.idProperty,s=i._values,a={},l=[],c=[],d=i.totalCount;let u,h;if(!1!==i.trigger("beforeSplice",{index:e,toRemove:n,toAdd:r})){if(r)if(1===r.length&&Array.isArray(r[0])&&(r=r[0]),d&&r.length){const e=i.indices[o];u=[];for(let n=0;n<r.length;n++){const i=r[n],l=i[o],d=e.get(l),h=d?s.indexOf(d):-1;a[l]=!0,-1!==h?s[h]!==i&&(c.push([s[h],i]),s[h]=i):u.push(i)}}else u=r;if(n){if("number"==typeof n){n=Math.min(n,s.length-e);for(let r=e;n;--n){a[s[r][o]]?(e++,r++):(l.push(s[r]),s.splice(r,1),h=!0)}}else{let e,r=0===u.length;const c=(n=oe.asArray(n)).reduce(((n,o)=>{const s="number"==typeof o,a=s?o:i.indexOf(o,!0);return r&&(null!=e&&a!==e+1||s)&&(r=!1),a>=0&&a<d&&n.push(a),e=a,n}),[]).sort(reverseNumericSortFn);if(r)c.length&&(l.push.apply(l,n),s.splice(c[c.length-1],c.length),h=!0);else for(let e=0;e<c.length;e++){const n=c[e];if(-1!==n){a[s[n][o]]||(l.unshift(s[n]),s.splice(n,1),h=!0)}}}l.length&&!i._indicesInvalid&&l.forEach(i.removeFromIndices,i)}if(u.length){s.splice(Math.min(e,s.length),0,...u),h=!0,i._indicesInvalid||u.forEach(i.addToIndices,i),i._addedValues||(i._addedValues=new Set);for(const e of u)i._addedValues.add(e)}if(l.length&&i._addedValues)for(const e of l)i._addedValues.delete(e);c.length&&!i._indicesInvalid&&c.forEach((e=>{i.removeFromIndices(e[0]),i.addToIndices(e[1])})),h||c.length?(i.isSorted?i.onSortersChanged():i.isFiltered&&(i.autoFilter?i.onFiltersChanged({action:"splice",oldCount:1}):i._filteredValues.splice(Math.min(e,i._filteredValues.length),0,...u)),i.generation++,i.trigger("change",{action:"splice",removed:l,added:u,replaced:c,oldCount:d})):i.trigger("noChange",{index:e,toRemove:n,toAdd:r})}}changeId(e,n){const r=this,{idProperty:i}=r,o=oi[typeof e]?e:e[i],s=r.get(o);if(s){const a=r.get(n);if(a&&s!==a)throw new Error(`Attempt to set item ${o} to already existing member's id ${n}`);r.removeIndexEntry(e,i,o),r.addIndexEntry(e,i,n),s[i]=n}}get(e,n=!1){return this.getBy(this.idProperty,e,n)}getAt(e,n=!1){return this.isFiltered&&!n?this._filteredValues[e]:this._values[e]}getBy(e,n,r=!1){return this.findItem(e,n,this.isFiltered&&r)}get count(){return this.values.length}get totalCount(){return this._values.length}updateIdProperty(e){this.addIndex({property:e,unique:!0})}changeSorters(e){return new si({values:oe.asArray(e),internalListeners:{change:"onSortersChanged",thisObj:this}})}addSorter(e){const n=e instanceof ei?e:new ei(e);return this.sorters.add(n),n}get isSorted(){var e;return Boolean(null==(e=this._sorters)?void 0:e.count)}onSortersChanged(){const e=this;e._sortFunction=null,e._addedValues=null,e._values.sort(e.sortFunction),e.trigger("change",ri)}get sortFunction(){return this._sortFunction||(this.isSorted?this._sortFunction=ei.generateSortFunction(this.sorters.values):this._sortFunction=return0),this._sortFunction}get filters(){return this._filters||(this._filters=new si({internalListeners:{change:"onFiltersChanged",thisObj:this}})),this._filters}addFilter(e){const n=e instanceof Zr?e:new Zr(e);return this.filters.add(n),n}removeFilter(e){const{filters:n}=this;e.isCollectionFilter||(e=n.get(e)),n.remove(e)}clearFilters(){this.filters.clear()}get isFiltered(){return Boolean(this._filters&&this._filters.count)}onFiltersChanged({action:e,removed:n,oldCount:r}){const i=this,o=r||"clear"===e&&n.length?i._filteredValues:i._values;i._filterFunction=null,i._filteredValues=i._values.filter(i.filterFunction),i._indicesInvalid=!0;const{toAdd:s,toRemove:a}=oe.delta(i._filteredValues,o,!0);i.trigger("change",{...ii,added:s,removed:a})}get filterFunction(){return this._filterFunction||(this.isFiltered?this._filterFunction=Zr.generateFiltersFunction(this.filters.values):this._filterFunction=he.returnTrue),this._filterFunction}changeExtraKeys(e){return oe.asArray(e).map((e=>"string"==typeof e?{property:e,unique:!0}:e))}updateExtraKeys(e){for(let n=0;n<e.length;n++)this.addIndex(e[n])}addIndex(e){const n=this;e&&((n._indices||(n._indices={}))[e.property]=new Map,Object.assign(n._indices[e.property],e),n.invalidateIndices(),e.dependentOn&&(n.hasCompositeIndex=!0))}findIndex(e,n,r=!1){const i=this.findItem(e,n,r);if(!i)return-1;return(this.isFiltered&&!r?this._filteredValues:this._values).indexOf(i)}findItem(e,n,r=!1){var i;const o=this,{isFiltered:s}=o,a=s&&!r?o.indices[ti][e]:o.indices[e];if(a){const e=null!=(i=a.get(n))?i:"string"==typeof n&&n.length&&!isNaN(n)&&a.get(Number(n))||null;if(null!=e)return e}else{const i=s&&!r?o._filteredValues:o._values,a=i.length;for(let r=0;r<a;r++){const o=i[r];if(o[e]==n)return o}}return null}removeIndex(e){delete this._indices[e],this.hasCompositeIndex=Object.values(this.indices).some((e=>e.dependentOn))}indexOf(e,n=!1){return this.findIndex(this.idProperty,oi[typeof e]?e:e[this.idProperty],n)}includes(e,n=!1){return Array.isArray(e)?e.some((e=>this.includes(e))):Boolean(this.findItem(this.idProperty,oi[typeof e]?e:e[this.idProperty],n))}get indices(){return this._indicesInvalid&&this.rebuildIndices(),this._indices}invalidateIndices(){this._indicesInvalid=!0}rebuildIndices(){const e=this,n=e.isFiltered,r=e._indices||(e._indices={}),i=Object.keys(r),o=i.length,s=e._values;let a;n&&(a=r[ti]={});for(let e=0;e<o;e++){const o=r[i[e]];if(o.clear(),n){let n=a[i[e]];n?n.clear():(n=a[i[e]]=new Map,n.unique=o.unique)}}doRebuildIndices(s,r,i,o),n&&doRebuildIndices(e._filteredValues,a,i,o),e._indicesInvalid=!1}getIndices(e){const n=[this.indices[e]];return this.isFiltered&&n.push(this.indices[ti][e]),n}addToIndices(e){Object.keys(this.indices).forEach((n=>{this.addIndexEntry(e,n,e[n])}))}removeFromIndices(e){Object.keys(this.indices).forEach((n=>{this.removeIndexEntry(e,n,e[n])}))}removeIndexEntry(e,n,r){this.getIndices(n).forEach((n=>function removeItemFromIndex(e,n,r){!1!==n.unique?n.delete(r):n.has(r)&&(n.get(r).delete(e),n.get(r).size||n.delete(r))}(e,n,r)))}addIndexEntry(e,n,r){this.getIndices(n).forEach((n=>addItemToIndex(e,n,r)))}onItemMutation(e,n){const r=this;!r._indicesInvalid&&Object.keys(r.indices).length>1&&Object.keys(n).forEach((i=>{var o;if(r.indices[i]){const{value:o,oldValue:s}=n[i];r.removeIndexEntry(e,i,s),r.addIndexEntry(e,i,o)}else if(r.hasCompositeIndex){const s=Object.values(r.indices).find((e=>{var n;return null==(n=e.dependentOn)?void 0:n[i]}));if(s){const i={};for(const r in s.dependentOn)i[r]=(null==(o=n[r])?void 0:o.oldValue)||e[r];const a=e.buildIndexKey(i);r.removeIndexEntry(e,s.property,a),r.addIndexEntry(e,s.property,e[s.property])}}}))}};si._$name="Collection";var ai=new WeakMap,safeIndexKey=e=>{if(e&&"object"==typeof e){let n=ai.get(e);void 0===n&&(n=Symbol("bscik"),ai.set(e,n)),e=n}return e},li=class{constructor(e){const n=this;n.generation=0,n.items=new Set,n.idMap={},n.idProperty="id",e&&(e.idProperty&&(n.idProperty=e.idProperty),e.values&&(n.values=e.values))}get(e){return this.idMap[safeIndexKey(e)]}get count(){return this.items.size}add(...e){1===e.length&&Array.isArray(e[0])&&(e=e[0]);const n=this,{items:r,idMap:i,idProperty:o}=n,s=e.length;for(let a=0;a<s;a++){const s=e[a],l=oi[typeof s]?s:safeIndexKey(s[o]),c=i[l];null==c?(i[l]=s,r.add(s),n.generation++):c!==s&&(i[l]=s,r.delete(c),r.add(s))}}at(e){let n,r;for(n of(e<0&&(e+=this.count),this.items))if(!e--){r=n;break}return r}remove(e){e=oe.asArray(e);const{items:n,idMap:r,idProperty:i}=this,o=e.length;for(let s=0;s<o;s++){const o=e[s],a=oi[typeof o]?o:safeIndexKey(o[i]),l=r[a];null!=l&&(n.delete(l),delete r[a],this.generation++)}}clear(){this.items.clear(),this.idMap={},this.generation++}countOf(e){let n,r=0;for(n of this.items)e(n)&&++r;return r}changeId(e,n){const r=this,{idMap:i,idProperty:o}=r,s=oi[typeof e]?e:safeIndexKey(e[o]),a=r.get(s);if(a){const e=r.get(n);if(e&&a!==e)throw new Error(`Attempt to set item ${s} to already existing member's id ${n}`);a[o]=n,delete i[s],i[n]=a}}filter(e,n){const{items:r}=this,i=[];let o=0;return r.forEach((s=>{e.call(n,s,o++,r)&&i.push(s)})),i}includes(e){const n=oi[typeof e]?e:safeIndexKey(e[this.idProperty]);return Boolean(this.idMap[n])}map(e,n){const{items:r}=this,i=new Array(r.size);let o=0;return r.forEach((s=>{i[o]=e.call(n,s,o++,r)})),i}forEach(e,n){return this.items.forEach(e,n)}find(e,n=0){let r,i;for(r of(n<0&&(n+=this.countOf(e)),this.items))if(e(r)&&!n--){i=r;break}return i}[Symbol.iterator](){return this.items[Symbol.iterator]()}indexOf(e,n){let r,i=-1;for(r of this.items)if((!n||n(r))&&(++i,r===e))return i;return-1}get values(){return[...this.items]}set values(e){e=oe.asArray(e),this.clear(),this.add.apply(this,e),this.generation++}sort(e){this.values=this.values.sort(e)}some(e,n){return this.values.some(e,n)}};li._$name="Bag";var ci=class extends li{add(...e){return 1===e.length&&Array.isArray(e[0])&&(e=e[0]),super.add(...e.filter((e=>e.isPersistable)))}};ci._$name="StoreBag";var StoreCRUD_default=e=>class StoreCRUD extends(e||re){static get $name(){return"StoreCRUD"}static get defaultConfig(){return{autoCommit:!1}}static get properties(){return{isRemoving:!1,suspendCount:0}}remove(e,n=!1){const r=this,{storage:i}=r;if(0===(e=oe.asArray(e).reduce(((e,n)=>((n=r.getById(n))&&e.push(n),e)),[])).length)return e;if(!r.tree&&!n&&!1===r.trigger("beforeRemove",{records:e}))return[];if(r.isRemoving=!0,r.isGrouped){const n=i.count,o=[],s=new Set;for(const n of e){const{groupParent:e}=n.instanceMeta(r);e.meta.collapsed&&o.push(n),oe.remove(e.groupChildren,n),oe.remove(e.unfilteredGroupChildren,n),e.meta.childCount--,s.add(e)}for(const e of s)e.groupChildren.length>0&&r.onModelChange(e,{},{});o.length&&i.trigger("change",{action:"splice",removed:o,added:[],replaced:[],oldCount:n})}else if(r.tree){const o=[],s=e.length>1,a=e[0],l=s?void 0:i.indexOf(a),c=e.reduce(((e,n)=>{const{parent:r}=n;return r&&(e[r.id]||(e[r.id]=[r,[]]),e[r.id][1].push(n)),e}),{}),d=Array.from(Object.values(c));if(!n&&!1===r.trigger("beforeRemove",{records:e,isMove:!1,parent:s?void 0:a.parent}))return r.isRemoving=!1,[];d.sort(((e,n)=>n[0].childLevel-e[0].childLevel));for(const[e,n]of d)o.push(...e.removeChild(n,!1,!0));return n||(r.trigger("remove",{parent:s?void 0:a.parent,index:l,isChild:!0,allRecords:o,isMove:!1,records:e}),r.trigger("change",{action:"remove",records:e})),r.isRemoving=!1,e}if(0===e.length)return r.isRemoving=!1,e;for(const n of e)n.beforeRemove(e);return n&&r.suspendEvents(),i.remove(e),n&&r.resumeEvents(),r.autoCommit&&r.doAutoCommit(),r.isRemoving=!1,e}clear(e=!1){var n,r;const i=this,{storage:o}=i;if(i.storage.totalCount||(null==(r=null==(n=i.rootNode)?void 0:n.unfilteredChildren)?void 0:r.length)){if(!e&&!1===i.trigger("beforeRemove",{records:o.allValues,removingAll:!0}))return null;if(i.rootNode)i.isChained||i.rootNode.clearChildren(e);else if(e){const e=i.registeredRecords;for(let n,r=e.length-1;r>=0;r--)n=e[r],n&&!n.isDestroyed&&n.unjoinStore(i)}e&&(i.removed.clear(),o.suspendEvents()),o.clear(),e&&o.resumeEvents(),i.added.clear(),i.modified.clear()}}removeAll(e=!1){const n=this,r=n.storage;let i;if(n.isRemoving=!0,e){r.suspendEvents();const e=n.registeredRecords;for(let r,i=e.length-1;i>=0;i--)r=e[i],!r||r.isDestroyed||r.isRoot||r.unjoinStore(n)}return i=n.tree?!1!==n.rootNode.clear():null!==n.clear(),e&&r.resumeEvents(),n.isRemoving=!1,i}add(e,n=!1,r={}){const i=this,{storage:o}=i;if(!(null==(e=oe.asArray(e))?void 0:e.length))return;if(i.tree=i.tree||Boolean(i.autoTree&&e[0].children),i.tree){const o=new Map,s=i.modelClass.getFieldDataSource("parentIndex"),{parentIdField:a}=i.modelClass,l=[];return e.forEach((e=>{const n=e[a];o.has(n)||o.set(n,{append:[],insert:[]});const r=o.get(n);!e.isModel&&s in e?r.insert.push(e):r.append.push(e)})),o.forEach((({append:e,insert:o},a)=>{const c=null==a?i.rootNode:i.getById(a);if(!c)throw new Error(`Parent node with id ${a} not found, cannot add children.`);if(e.length&&l.push(...c.appendChild(e,n)),o.length)for(const e of o)l.push(c.insertChild(e,e[s],n,r))})),i.reapplySortersOnAdd&&!i.isSyncingDataOnLoad&&i.sort(),l}if(!n&&!1===i.trigger("beforeAdd",{records:e}))return null;if(i.tree=i.tree||Boolean(i.autoTree&&e[0].children),i.tree)return i.rootNode.appendChild(e);const s=i.processRecords(e);return n&&i.suspendEvents(),o.add(s),n&&i.resumeEvents(),i.autoCommit&&i.doAutoCommit(),s}processRecords(e,n){return e.map((e=>{const r=this.processRecord(e.isModel?e:this.createRecord(e));return null==n||n.call(this,r),r}))}insert(e,n,r=!1){var i;const o=this,s=o.storage,a=o.getAt(e),l=s.values,c=[];if(n=oe.asArray(n),o.tree){const s=o.rootNode;return s.insertChild(n,null==(i=s.children)?void 0:i[e],r)}if(!r&&!1===o.trigger("beforeAdd",{records:n}))return null;let d,u,h;if(l[u=e]===n[0]||l[u=e-1]===n[0])for(d=!0,h=0;d&&h<n.length;h++)n[h]!==l[u+h]&&(d=!1);if(d)return null;const g=o.processRecords(n,(n=>{const r=s.indexOf(n);n.children&&n.children.length&&o.autoTree&&(o.tree=!0),r>-1&&(r<e&&a&&e--,c.push(r)),n.meta.previousIndex=r}));return o.suspendEvents(),o.storage.remove(c),o.resumeEvents(),r&&o.suspendEvents(),s.splice(e,0,...g),r&&o.resumeEvents(),o.autoCommit&&o.doAutoCommit(),g}move(e,n){this.isTree?n.parent.insertChild(e,n):this.storage.move(e,n)}setMultiple(e,n,r){const i=this,o=[],s=[];i.forEach((i=>{e(i)&&(s.push(i.set(n,r,!0)),o.push(i))})),i.trigger("updateMultiple",{records:o,all:i.records.length===o.length}),i.trigger("change",{action:"updatemultiple",records:o,all:i.records.length===o.length}),i.reapplyFilterOnUpdate&&i.isFiltered&&i.filter()}setAll(e,n){const r=this,i=[];r.forEach((r=>{i.push(r.set(e,n,!0))})),r.trigger("updateMultiple",{records:r.records,all:!0}),r.trigger("change",{action:"updatemultiple",records:r.records,all:!0}),r.reapplyFilterOnUpdate&&r.isFiltered&&r.filter()}acceptChanges(){const e=this;e.added.forEach((e=>e.clearChanges(!0,!1))),e.modified.forEach((e=>e.clearChanges(!0,!1))),e.added.clear(),e.modified.clear(),e.removed.clear()}commit(e=!1){const{changes:n}=this;return!(!e&&!1===this.trigger("beforeCommit",{changes:n}))&&(this.acceptChanges(),e||this.trigger("commit",{changes:n}),n)}revertChanges(){const e=this,{changes:n}=e;if(n){const r={action:"clearchanges",changes:n};e.add(e.removed.values,!0),e.remove(e.added.values,!0),e.modified.forEach((e=>e.revertChanges(!0))),e.added.clear(),e.modified.clear(),e.removed.clear(),e.trigger("change",r),e.trigger("refresh",r)}}get changes(){const e=this,n=e.modified.values.filter((e=>e.rawModifications));return e.added.count||n.length||e.removed.count?{added:e.added.values.slice(),modified:n,removed:e.removed.values.slice()}:null}get autoCommit(){return this._autoCommit}set autoCommit(e){this._autoCommit=e,e&&this.changes&&this.commit()}suspendAutoCommit(){this.suspendCount++}resumeAutoCommit(e=!0){this.suspendCount--,this.autoCommit&&e&&this.doAutoCommit()}doAutoCommit(){this.suspendCount<=0&&this.commit()}},StoreChanges_default=e=>class StoreChanges extends(e||re){static get $name(){return"StoreChanges"}static get configurable(){return{applyChangesetFilterSortTarget:"changes"}}applyChangesFromStore(e){const n=this,{changes:r}=e;r&&(r.added&&n.add(r.added),r.removed&&n.remove(r.removed.map((e=>e.id))),r.modified&&r.modified.forEach((e=>{n.getById(e.id).set(e.modifications)})))}applyChangeset(e,n=null,r="$PhantomId",i=!0,o=!1){var s,a,l,c;const d=this,{added:u,updated:h,modified:g,removed:p}=null!=(s=null==n?void 0:n(e,d))?s:e,m=null!=(a=null!=h?h:g)?a:[],f=d.modelClass.getFieldDataSource("id"),b=o?new Map:null,v=[],y=[];let w=!1,C=[];if(d._groupVisibleRecordIds=[],d.isGrouped&&d.forEach((e=>{d._groupVisibleRecordIds.push(e.id)})),(null==u?void 0:u.length)>0){const e=[],n=[];for(const i of u)d.getById(null!=(l=i[r])?l:Et.getPath(i,f))?e.push(i):n.push(i);m.unshift.apply(m,e);const i=null!=(c=d.add(n,!1,{orderedParentIndex:{skip:!0}}))?c:[];if(v.push(...i),d.tree)for(const e of i){const{parent:n}=e;if(n.isRoot){w=!0,C=[n];break}!n.isRoot&&C.every((e=>!e.contains(n)))&&C.push(n)}for(const e of i)null==b||b.set(e.id,e.data),e.clearChanges()}if((null==m?void 0:m.length)>0)for(const e of m){const n=e[r],o=Et.getPath(e,f),s=d.getById(null!=n?n:o);if(s){const n=s.applyChangeset(e,r,i);d.tree&&!w&&C.every((e=>!e.contains(s)))&&(s.parent.isRoot?(w=!0,C=[s.parent]):C.push(s.parent)),null==b||b.set(o,n),y.push(s)}}if((null==p?void 0:p.length)>0&&d.applyRemovals(p),"changes"===d.applyChangesetFilterSortTarget){const e=d.filterChangeset(v,y);C.push(...e)}return d.afterChangesetApplied(C),d._groupVisibleRecordIds=null,b}afterChangesetApplied(e){e.forEach((e=>{e.traverse((e=>{e.sortOrderedChildren(!1,!1),e.children&&e.updateChildrenIndices(e.children,"parentIndex",!0),e.unfilteredChildren&&e.updateChildrenIndices(e.unfilteredChildren,"unfilteredIndex",!0)}))}))}applyRemovals(e){const n=this,{removed:r}=n,i=n.modelClass.idField,o=[];for(const n of e){const e=Et.getPath(n,i);r.includes(e)?r.remove(e):o.push(e)}n.remove(o);for(const e of o)r.remove(e)}filterChangeset(e,n){const r=this,{isFiltered:i,tree:o,isGrouped:s,filtersFunction:a}=r,l=r.isSorted?r.createSorterFn(r.sorters):void 0,{allValues:c,addedValues:d,isSorted:u}=r.storage,h=null!=l||u?null!=l?l:r.storage.sortFunction:null,g=new Set;if(!i)return[];let p,m=!1;if(s&&(p=r.groupers,r.clearGroupers(!0)),o){const i=new Set(n.filter(a));for(const n of e.filter(a))i.add(n);i.forEach((e=>e.bubble((e=>i.add(e))))),i.delete(r.rootNode);const o=oe.groupBy(Array.from(i),"parentId");for(const e of Object.values(o)){const{parent:n}=e[0];n.unfilteredChildren&&(n.children.push(...e.filter((e=>!n.children.includes(e)))),g.add(n))}}else if(h&&!s){const{filteredValues:e}=r.storage,i=d?e.findLastIndex((e=>!d.has(e)))+1:e.length,o=e.slice(0,i),s=new Set(n.filter(a));for(const n of e)s.has(n)&&s.delete(n);for(const e of s)o.push(e);o.sort(h),e.splice(0,i,...o),m=!0}else{const e=n.filter((e=>a(e)&&!r.storage.includes(e)));e.length>0&&(r.includeInSubset(c,r.storage.filteredValues,e),m=!0)}const f=new Set(e.filter((e=>!a(e))));if(f.size>0){if(o)for(const e of f)oe.remove(e.parent.children,e),g.add(e.parent);else oe.remove(r.storage.filteredValues,f);m=!0}return p&&(r.group(p[0],null,!1,!0,!0),m=!0),o&&g.size>0?r.storage.replaceValues({values:r.collectDescendants(r.rootNode).visible,silent:!0}):m&&(r._idMap=null,r.trigger("refresh")),[...g]}includeInSubset(e,n,r){const i=new Set(r);let o=0,s=0,a=0===i.size;for(;s<e.length&&!a;){const r=n[o];let l=e[s];for(;r!==l;)i.has(l)&&(n.splice(o,0,l),o++,i.delete(l),a=0===i.size),l=e[++s];i.has(r)&&i.delete(r),o<n.length&&o++}return n}},StoreFilter_default=e=>class StoreFilter extends(e||re){static get $name(){return"StoreFilter"}static get defaultConfig(){return{filters:null,reapplyFilterOnAdd:!1,reapplyFilterOnUpdate:!1}}set reapplyFilterOnAdd(e){this.storage.autoFilter=e}get reapplyFilterOnAdd(){return this.storage.autoFilter}set filters(e){const n=this,r=n.filters;if(r.clear(),n._filtersFunction=null,e){if("Object"===e.constructor.name)for(const n of Object.entries(e))"filterBy"===n[0]&&"function"==typeof n[1]?r.add(new Zr({filterBy:n[1]})):r.add(new Zr("Object"===n[1].constructor.name?Object.assign({property:n[0]},n[1]):{property:n[0],value:n[1]}));else Array.isArray(e)?r.add(...e.map((e=>e instanceof Zr?e:new Zr(e)))):e.isCollection?r.add(...e.values):r.add(new Zr({filterBy:e}));r.forEach((e=>e.owner=n))}}get filters(){return this._filters||(this._filters=new si({extraKeys:["property"]}))}set filtersFunction(e){this._filtersFunction=e}get filtersFunction(){const e=this,{filters:n,isGrouped:r}=e;if(!e._filtersFunction)if(n.count){const i=Zr.generateFiltersFunction(n);e._filtersFunction=e=>r&&e.isSpecialRow?e.groupChildren.some(i):i(e)}else e._filtersFunction=he.returnTrue;return e._filtersFunction}get isFiltered(){return this.filters.values.some((e=>!e.disabled))}traverseFilter(e){const n=this,r=!e.isRoot&&n.filtersFunction(e),i=e.unfilteredChildren||e.children;return i&&i.length?(e.unfilteredChildren||(e.unfilteredChildren=e.children.slice()),e.children=e.unfilteredChildren.filter((e=>n.traverseFilter(e))),e.updateChildrenIndices(e.unfilteredChildren,"unfilteredIndex",!0),e.updateChildrenIndices(e.children,"parentIndex",!0),r||Boolean(e.children.length)):r}traverseClearFilter(e){const n=this;e.unfilteredChildren&&(e.children=e.unfilteredChildren.slice(),e.unfilteredChildren=null),e.children&&(e.children.forEach((e=>n.traverseClearFilter(e))),e.updateChildrenIndices(e.children,"parentIndex",!0))}get latestFilterField(){return this.filters.last?this.filters.last.property:null}addFilter(e,n=!1){const r=this;if((e=e instanceof Zr?e:new Zr(e)).owner=r,r.filters.add(e),!n){if(r.remoteFilter)return r.filter().then((()=>e));r.filter()}return e}filter(e){const n=this;let r,i=!1;if(e){let o=typeof e;if("object"===o&&("silent"in e||"replace"in e||e.filters)&&(i=e.silent,e.replace&&n.clearFilters(0===e.filters.length),r=e.internal,o=typeof(e=e.filters)),e){const i=n.isFiltered;if(n.isConfiguring=!0,Array.isArray(e))e.forEach((e=>n.addFilter(e,!0)),n);else if("function"===o){const i=new Zr(e);i.internal=r,n.addFilter(i,!0)}else"string"===o?n.addFilter({property:e,value:arguments[1]},!0):n.addFilter(e,!0);if(n.isConfiguring=!1,!n.isFiltered&&!i)return null}}n.filtersFunction=null;const o=n.performFilter(i);return n._idMap=null,o}performFilter(e){const n=this,{storage:r,filters:i,rootNode:o}=n,s=n.count;let a,l;if(n.trigger("beforeFilter",{filters:i}),n.tree){const e=r.values;n.isFiltered?n.traverseFilter(o):n.traverseClearFilter(o);const i=n.collectDescendants(o).visible;r.replaceValues({values:i,silent:!0});const s=oe.delta(i,e,!0);a=s.toAdd,l=s.toRemove}else r.ion({change({removed:e,added:n}){l=e,a=n},once:!0}),n.isFiltered?(n.isGrouped&&n.includeCollapsed(),r.addFilter({id:"primary-filter",filterBy:n.filtersFunction}),n.isGrouped&&n.excludeCollapsed()):r.filters.clear();n.afterPerformFilter(e||n.isRemoteDataLoading?null:{action:"filter",filters:i,oldCount:s,added:a,removed:l,records:n.storage.values})}afterPerformFilter(e){this.resetRelationCache(),e&&this.triggerFilterEvent(e)}get filtered(){return this.storage.isFiltered}triggerFilterEvent(e){this.trigger("filter",e),this.remoteFilter||(this.trigger("refresh",e),this.trigger("change",e))}filterBy(e){return this.filter(e)}removeFilter(e,n=!1){const r=this,i=e instanceof Zr?e:r.filters.get(e);if(i){if(r.filters.remove(i),r._filtersFunction=null,!n){if(r.remoteFilter)return r.filter().then((()=>i));r.filter()}return i}}clearFilters(e=!0){if(this.filters.remove(this.filters.values.filter((e=>!e.internal))),e)return this.filter()}convertFilterToString(e){const n=this.filters.getBy("property",e);return n&&!n.filterBy?String(n):""}doDestroy(){var e;null==(e=this._filters)||e.destroy(),super.doDestroy()}},di={add:1,replace:1},StoreGroup_default=e=>class StoreGroup extends(e||re){static get $name(){return"StoreGroup"}static get defaultConfig(){return{groupers:null,useGroupFooters:!1,startGroupsCollapsed:null}}static get properties(){return{collapsedGroups:new Set}}construct(e){super.construct(e),this.ion({change:"onDataChanged",thisObj:this})}get groupers(){return this._groupers}set groupers(e){this.setGroupers(e)}setGroupers(e,n){const r=this,{storage:i}=r;let o;return(null==e?void 0:e.length)?r._groupers=e:r.groupers&&(delete r._groupers,r.includeCollapsed(),i.replaceValues({values:r.removeHeadersAndFooters(i._values),filteredValues:i.isFiltered?r.removeHeadersAndFooters(i._filteredValues):null,silent:!0}),o=r.group(null,null,null,!1,null==n?void 0:n.silent)),r._idMap=null,o}get groupRecords(){const e=[];if(this.isGrouped)for(const n of this)n.isSpecialRow&&e.push(n);return e}get unfilteredGroupRecords(){var e;const n=this;if(n.isGrouped){const{generation:r}=n.storage;(null==(e=n._unfilteredGroupRecords)?void 0:e.generation)!==r&&(n._unfilteredGroupRecords=n.storage.allValues.filter((e=>e.isSpecialRow)),n._unfilteredGroupRecords.generation=r)}return n._unfilteredGroupRecords||[]}getGroupHeaderForRecord(e,n=!1){if(this.isGrouped){let r;const i=n?this.storage._values:this.storage.values;for(const n of i)if(n.isGroupHeader)if(e){if(n===e||n.unfilteredGroupChildren.includes(e)){r=n;break}}else r=n;return r}}includeCollapsed(){for(const e of this.collapsedGroups)this.expand(this.getById(e),!1)}excludeCollapsed(){for(const e of this.collapsedGroups)this.collapse(this.getById(e))}onDataChange({source:e,action:n,removed:r}){var i;const o=this,{groupers:s}=o;s&&(s.length?("splice"===n&&(null==r?void 0:r.length)||"move"===n)&&e.replaceValues({...o.prepareGroupRecords(),silent:!0}):e.replaceValues({values:o.removeHeadersAndFooters(e._values),filteredValues:e.isFiltered?o.removeHeadersAndFooters(e._filteredValues):null,silent:!0})),null==(i=super.onDataChange)||i.call(this,...arguments)}move(e,n){const r=this;if(r.isGrouped&&!r.tree){let i=n;if((null==n?void 0:n.isSpecialRow)&&(i=r.getPrev(n,!1,!1),!i))return;const o=r.getGroupHeaderForRecord(i),s=r.groupers[0].field,a=o.meta.groupRowFor,{reapplyFilterOnUpdate:l}=r;if(r.reapplyFilterOnUpdate=!1,r.beginBatch(),e.forEach((e=>e[s]=a)),r.endBatch(),r.reapplyFilterOnUpdate=l,r.isFiltered&&(null==n?void 0:n.isSpecialRow)){const{unfilteredGroupRecords:e}=r,i=e.indexOf(o);n=e[i+1]}}super.move(e,n)}collapse(e){return!(!e||e.meta.collapsed)&&(this.excludeGroupRecords(e),e.meta.collapsed=!0,this.collapsedGroups.add(e.id),!0)}expand(e,n=!0){return!!(null==e?void 0:e.meta.collapsed)&&(this.includeGroupRecords(e),e.meta.collapsed=!1,n&&this.collapsedGroups.delete(e.id),!0)}removeHeadersAndFooters(e){return e.filter((e=>!e.isSpecialRow||(this.unregister(e),!1)))}prepareGroupRecords(e){const n=this,{isFiltered:r,reapplyFilterOnUpdate:i,startGroupsCollapsed:o}=n,s=n.collapsedGroups,{allValues:a}=n.storage,l=[],c=n._groupVisibleRecordIds||[],isVisible2=e=>{const o=!r||n.filtersFunction(e);return i?o:o||c.includes(e.id)};for(const e of a)e.isGroupHeader&&(e.meta.collapsed||s.has(e.id))&&(s.add(e.id),l.push(e));for(const e of l)n.includeGroupRecords(e);const d=n.removeHeadersAndFooters(n.storage._values);e&&d.sort(e),r&&(n.filtersFunction=null);const u=[],h=n.groupers[0].field;let g=null,p=null,m=0;function addFooter(){const e=p.meta.groupRowFor,r=`group-footer-${"number"==typeof e?e:w.createId(e)}`,i=n.getById(r)||new n.modelClass({id:r},n,{specialRow:!0,groupFooterFor:e,groupRecord:p});return i.stores=[n],n.register(i),i.groupChildren=p.groupChildren,p.meta.collapsed||u.push(i),n.allRecords.push(i),p.groupChildren.push(i),p.unfilteredGroupChildren.push(i),m++,i}d.forEach((e=>{var r;const i=null==e[h]?"__novalue__":e[h],a=`group-header-${"number"==typeof i?i:w.createId(i)}`;0!==(null==(r=e.unfilteredGroupChildren)?void 0:r.length)?(Et.isEqual(i,g)||(p&&(n.useGroupFooters&&addFooter(),p.meta.childCount=m),p=n.getById(a),p||(p=new n.modelClass({id:a},n,{specialRow:!0,groupRowFor:i,groupField:h}),o&&(s.add(a),n.startGroupsCollapsed=!1)),p.meta.collapsed=s.has(a),p.stores=[n],n.register(p),p.groupChildren=[],p.unfilteredGroupChildren=[],u.push(p),n.allRecords.push(p),g=i,m=0),e.instanceMeta(n.id).groupParent=p,s.has(a)||u.push(e),isVisible2(e)&&(p.groupChildren.push(e),m++),p.unfilteredGroupChildren.push(e)):n.unregister(e)})),p&&(n.useGroupFooters&&addFooter(),p.meta.childCount=m),n._idMap=null;const f={values:u};return r&&(f.filteredValues=u.filter(isVisible2)),f}get isGrouped(){var e;return Boolean(null==(e=this.groupers)?void 0:e.length)}group(e,n,r=!1,i=!0,o=!1){var s,a;const l=this;let c,d;if(e&&"object"==typeof e&&(n=e.ascending,d=e.fn,e=e.field),r?l.groupers.push(c={field:e,ascending:n,complexMapping:e.includes(".")}):e&&(null==n&&(n=(null==(s=l.groupInfo)?void 0:s.field)!==e||(null==(a=l.groupInfo)?void 0:a.fn)!==d||!l.groupInfo.ascending),l.groupInfo=c={field:e,ascending:n,fn:d,complexMapping:e.includes(".")},l.groupers=[l.groupInfo]),c){const{prototype:n}=l.modelClass;c.complexMapping&&!Object.prototype.hasOwnProperty.call(n,e)&&Object.defineProperty(n,e,{get(){return Et.getPath(this,e)}})}if(!1!==i){if(l.remoteSort&&!l.isRemoteDataLoading)return l.sort(null,null,!1,!0).then((()=>l.onAfterGrouping(o)));l.sort(null,null,!1,!0)}l.onAfterGrouping(o)}onAfterGrouping(e){if(e)return;const n=this,r=n.groupers||[];n.trigger("group",{isGrouped:n.isGrouped,groupers:r,records:n.storage.values}),n.trigger("refresh",{action:"group",isGrouped:n.isGrouped,groupers:r,records:n.storage.values})}addGrouper(e,n=!0){return this.group(e,n,!0)}removeGrouper(e){const n=this,{groupers:r}=n;if(!r)return;const i=r.findIndex((n=>n.field===e));return i>-1?(r.splice(i,1),r.length?n.group():n.clearGroupers()):void 0}clearGroupers(e=!1){return this.setGroupers(null,{silent:e})}isRecordInGroup(e,n){var r;if(!this.isGrouped)return null;return e[null==(r=this.groupers[0])?void 0:r.field]===n&&!e.isSpecialRow}isInCollapsedGroup(e){const n=e.instanceMeta(this).groupParent;return null==n?void 0:n.meta.collapsed}getGroupRecords(e){return this.isGrouped?this.storage.values.filter((n=>this.isRecordInGroup(n,e))):null}getGroupTitles(){return this.isGrouped?this.getDistinctValues(this.groupers[0].field):null}onDataChanged({changes:e,action:n}){this.isGrouped&&(!e&&di[n]||e&&this.groupers.some((n=>n.field in e)))&&this.sort()}internalIncludeExcludeGroupRecords(e,n){const r=this,i=r.indexOf(e),o=r.allIndexOf(e),{id:s,storage:a}=r,{_filteredValues:l,_values:c}=a,{meta:d,groupChildren:u,unfilteredGroupChildren:h}=e;-1===o||d.collapsed&&!n||!d.collapsed&&n||(h.forEach((e=>e.instanceMeta(s).hiddenByCollapse=!n)),n?(l&&l.splice(i+1,0,...u.filter((e=>!r.isAvailable(e)))),a._values.splice(o+1,0,...h.filter((e=>!r.isAvailable(e))))):(l&&l.splice(i+1,u.length),c.splice(o+1,h.length)),a._indicesInvalid=!0,r._idMap=null)}excludeGroupRecords(e){this.internalIncludeExcludeGroupRecords(e,!1)}includeGroupRecords(e){this.internalIncludeExcludeGroupRecords(e,!0)}collectGroupRecords(e,n=!0){return(e?this.storage.allValues:this.storage.values).reduce(((e,r)=>(r.isSpecialRow&&(n&&!r.isGroupFooter&&e.push(r),r.isGroupHeader&&e.push.apply(e,r.groupChildren)),e)),[])}},StoreProxy_default=e=>class StoreProxy extends(e||re){static get configurable(){return{objectify:null}}initProxy(){if(!globalThis.Proxy)throw new Error("Proxy not supported");return new Proxy(this,{get(e,n){if(n in e)return e[n];if("$store"===n)return e;let r=e.getById(n);return r||isNaN(parseInt(n))||(r=e.getAt(parseInt(n))),r},set:(e,n,r)=>(n in e||e.isDestroying?e[n]=r:e.add({[e.modelClass.idField]:n,...r}),!0),deleteProperty:(e,n)=>e.isDestroying?(delete e[n],!0):Boolean(e.remove(n).length),has(e,n){if(n in e)return!0;if(n.startsWith("{")&&n.endsWith("}")){const e=w.safeJsonParse(n);n=null==e?void 0:e.id}return e.includes(n)}})}},StoreRelation_default=e=>{var n;return __publicField(n=class extends(e||re){initRelations(e){const n=this,r=n.modelClass.exposedRelations;e&&n.modelRelations&&n.modelRelations.forEach((e=>{var n;return null==(n=e.storeDetacher)?void 0:n.call(e)})),n.modelRelations&&0!==n.modelRelations.length&&!e||!r||(n.modelRelations=[],null==r||r.forEach((r=>{const i={...r},{foreignStore:o,relationName:s,relatedCollectionName:a}=i,l="string"==typeof o?n[o]:o;if(i.dependentStore=n,n.modelRelations.push(i),l){i.foreignStoreProperty=i.foreignStore,i.foreignStore=l;const r=l.dependentStoreConfigs;if(r.has(n)){const o=r.get(n);if(e){const e=o.find((e=>e.relationName===s));e&&oe.remove(o,e)}o.push(i)}else r.set(n,[i]);a&&l.initRelationCollection(i,n),l.count>0&&l.updateDependentStores("dataset",l.records)}})))}initRelationCollection(e,n){const r=this,i=e.relatedCollectionName;(r.collectionStores||(r.collectionStores={}))[i]={store:n,config:e},r[i+"Store"]||(r[i+"Store"]=n),r.count>0&&r.initModelRelationCollection(i,r.records)}initModelRelationCollection(e,n){const r=this;n.forEach((n=>{n.traverse((n=>{const i=e in n?`$related${w.capitalize(e)}`:e;Object.defineProperty(n,i,{enumerable:!0,configurable:!0,get:function(){return r.getCollection(this,e)},set:function(n){return r.setCollection(this,e,n)}})}))}))}resetRelationCache(){this.relationCache={},this.forEach((e=>e.initRelations()))}updateRecordRelationCache(e,n){null==n||n.forEach((n=>{const{config:r}=n,i=n.related?n.related.id:e.get(r.foreignKey);void 0!==i&&this.cacheRelatedRecord(e,i,r.relationName,i)}))}getRelationCollection(e,n){const r=Ur.asId(n);return this.relationCache[e]&&this.relationCache[e][r]||[]}getCollection(e,n){const{config:r,store:i}=this.collectionStores[n];return i.relationCache[r.relationName]&&i.relationCache[r.relationName][e.id]||[]}setCollection(e,n,r){const{config:i,store:o}=this.collectionStores[n],s=((o.relationCache[i.relationName]||(o.relationCache[i.relationName]={}))[e.id]||[]).slice(),a=[],l=[];o.suspendEvents(),s.forEach((e=>{r.includes(e)||(e[i.foreignKey]=null,o.remove(e),l.push(e))})),r.forEach((n=>{n.isModel instanceof Ur?n.stores.includes(o)||(o.add(n),a.push(n)):([n]=o.add(n),a.push(n)),n[i.foreignKey]=e.id})),o.resumeEvents(),l.length&&(o.trigger("remove",{records:l}),o.trigger("change",{action:"remove",records:l})),a.length&&(o.trigger("add",{records:a}),o.trigger("change",{action:"add",records:a}))}cacheRelatedRecord(e,n,r,i=null){const o=this,s=o.relationCache[r]||(o.relationCache[r]={});null!==i&&o.uncacheRelatedRecord(e,r,i),null!=n&&oe.include(s[n]||(s[n]=[]),e)}uncacheRelatedRecord(e,n=null,r=null){const i=this;function remove(n,r){const o=i.relationCache[n],s=null==o?void 0:o[r];if(s){const n=s.indexOf(e);n>=0&&s.splice(n,1),0===s.length&&delete o[r]}}null!=r?remove(n,r):e.meta.relationCache&&Object.entries(e.meta.relationCache).forEach((([e,n])=>remove(e,null==n?void 0:n.id)))}updateDependentStores(e,n){this.dependentStoreConfigs.forEach((r=>{r.forEach((r=>{const{dependentStore:i,relatedCollectionName:o,relationName:s,foreignKey:a}=r,l=i.relationCache[s];return"dataset"===e?(o&&this.initModelRelationCollection(o,n),void i.forEach((e=>{const n=e.initRelation(r);n&&i.cacheRelatedRecord(e,n.id,s,n.id)}))):"removeall"===e?(i.forEach((e=>e.removeRelation(r))),void delete i.relationCache[s]):("add"===e&&o&&this.initModelRelationCollection(o,n),void("add"!==e&&"remove"!==e||n.forEach((n=>{const o=null==l?void 0:l[n.id];switch(e){case"remove":o&&o.forEach((e=>e.removeRelation(r)));break;case"add":i.forEach((e=>{e.get(a)==n.id&&(e.initRelation(r),i.cacheRelatedRecord(e,n.id,s))}))}}))))}))}))}updateDependentRecordIds(e,n){var r;null==(r=this.dependentStoreConfigs)||r.forEach((r=>{r.forEach((r=>{var i;const{dependentStore:o,relationName:s,foreignKey:a}=r,l=o.relationCache[s],c=null==(i=null==l?void 0:l[e])?void 0:i.slice();null==c||c.forEach((r=>{o.cacheRelatedRecord(r,n,s,e),r.set(a,n,!1,!0)}))}))}))}},"$name","StoreRelation"),n},StoreSum_default=e=>class StoreSum extends(e||re){static get $name(){return"StoreSum"}sum(e,n=this.storage.values){return n?n.reduce(((n,r)=>{if(r.isSpecialRow)return n;const i=Number(r[e]);return isNaN(i)?n:n+i}),0):0}min(e,n=this.storage.values){return n&&n.length?n.reduce(((n,r)=>{var i;return"number"===typeof(null==(i=r[e])?void 0:i.valueOf())&&r[e]<n&&(n=r[e]),n}),n[0][e]):0}max(e,n=this.storage.values){return n&&n.length?n.reduce(((n,r)=>{var i;return"number"===typeof(null==(i=r[e])?void 0:i.valueOf())&&r[e]>n&&(n=r[e]),n}),n[0][e]):0}average(e,n=this.storage.values){if(!n||!n.length)return 0;let r=0;const i=n.reduce(((n,i)=>{if(i.isSpecialRow)return n;const o=parseFloat(i[e]);return isNaN(o)?n:(r++,n+o)}),0);return r>0?i/r:0}groupSum(e,n){return this.sum(n,this.getGroupRecords(e))}},findInString=(e,n)=>String(e).toLowerCase().includes(n),ui={string:findInString,number:findInString,boolean:findInString,date:(e,n)=>e instanceof Date&&n instanceof Date?e-n==0:String(e.getMonth()+1).includes(n)||String(e.getDate()).includes(n)||String(e.getFullYear()).includes(n),object:(e,n)=>e===n,undefined:(e,n)=>e===n},StoreSearch_default=e=>class StoreSearch extends(e||re){static get $name(){return"StoreSearch"}search(e,n=null,r,i){const o=this.isTree&&!i?this.rootNode.allChildren:this.getAllDataRecords(i),s=o.length,a=[];if(null==e)return[];let l,c,d,u,h,g;for("string"==typeof e&&(e=e.toLowerCase()),l=0;l<s;l++){d=o[l],c=0;for(const i of n||d.fieldNames){u=d[i],h=u instanceof Date?"date":typeof u;const n=null==r?void 0:r[c];n&&(u=n(u),h="string"),g=ui[h],u&&(null==g?void 0:g(u,e))&&a.push({index:l,data:d,field:i,id:d.id}),c++}}return a}findByField(e,n,r=!1,i=!1){const o=this.getAllDataRecords(i),s=o.length,a=new Set,l=[];let c,d,u;for(null!=n&&(n=String(n).toLowerCase()),c=0;c<s;c++)if(d=o[c],u=d[e],!r||!a.has(u)){const e=u instanceof Date?"date":typeof u;(null==n&&u===n||n&&(0,ui[e])(u,n))&&(l.push({id:d.id,index:c,data:d}),r&&a.add(u))}return l}find(e,n=!1){return this.getAllDataRecords(n).find(e)}findRecord(e,n,r=!1){const matchFn=r=>Et.isEqual(r[e],n);return this.isTree?this.query(matchFn,r)[0]:this.getAllDataRecords(r).find(matchFn)}query(e,n=!1){if(this.isTree){const r=[];return this.traverse((n=>{e(n)&&r.push(n)}),void 0,void 0,n),r}return this.getAllDataRecords(n).filter(e)}some(e,n=!1){return this.getAllDataRecords(n).some(e)}},hi=/\./,StoreSort_default=e=>class StoreSort extends(e||re){static get $name(){return"StoreSort"}static get defaultConfig(){return{useLocaleSort:null}}static get configurable(){return{sorters:[],reapplySortersOnAdd:!1}}get isSorted(){return Boolean(this.sorters.length)||this.isGrouped}changeSorters(e){return e.map((e=>this.normalizeSorterConfig(e,!0)))}updateReapplySortersOnAdd(e){this.storage.autoSort=e}sort(e,n,r=!1,i=!1){const o=this,s=o.allRecords,a=o.sorters?o.sorters.slice():[];let l,c=null;if(e)if(Array.isArray(e))o.sorters=e.map((e=>o.normalizeSorterConfig(e,"string"==typeof e||n)));else{const i=o.normalizeSorterConfig(e,n);r?(l=o.getCurrentSorterByField(i.field),l?(c=l.ascending,l.ascending=i.ascending):o.sorters.push(i)):o.sorters=[i]}return i||!1!==o.trigger("beforeSort",{sorters:o.sorters,records:s,currentSorters:a})?o.performSort(i):(o.sorters=a,null!==c&&(l.ascending=c),null)}normalizeSorterConfig(e,n){var r,i,o;const s=this,a={ascending:n};if("object"==typeof e?(Et.assign(a,e),e.fn&&(delete a.fn,a.sortFn=e.fn),a.ascending=null!=(r=e.ascending)?r:n):"function"==typeof e?a.sortFn=e:a.field=e,null==a.ascending){const e=s.getCurrentSorterByField(a.field);a.ascending=!e||!e.ascending}if(null==a.sortFn){const e=null==(o=null==(i=s.modelClass)?void 0:i.$meta.fields.map[a.field])?void 0:o.compareItems;e&&(a.sortFn=e)}return a}getCurrentSorterByField(e){return"string"==typeof e&&this.sorters.find((n=>n.field===e))||null}addSorter(e,n=!0){return this.sort(e,n,!0)}removeSorter(e){const n=this.sorters.findIndex((n=>n.field===e||n.sortFn===e));if(n>-1)return this.sorters.splice(n,1),this.sort()}clearSorters(e=!1){if(this.sorters.length)return this.sorters.length=0,this.sort(void 0,void 0,void 0,e)}createSorterFn(e){const n=this.useLocaleSort;return(r,i)=>{for(let o=0;o<e.length;o++){const s=e[o],{field:a,ascending:l=!0,useLocaleSort:c=n}=s,d=s.fn||s.sortFn,u=l?1:-1;if(d){const e=d.call(s,r,i);if(0===e)continue;if(null!==e)return e*u}const h=hi.test(a),g=h?r.get(a):r[a],p=h?i.get(a):i[a];if(g!==p){if(null==g)return-u;if(null==p)return u;if(c&&"string"==typeof g){if(!0===c)return String(g).localeCompare(p)*u;if("string"==typeof c)return String(g).localeCompare(p,c)*u;if("object"==typeof c)return String(g).localeCompare(p,c.locale,c)*u}if(g>p)return u;if(g<p)return-u}}return 0}}get sorterFn(){const e=this,{sorters:n}=e;return e.createSorterFn(e.remoteSort?[{field:"_remoteSortIndex"}]:e.isGrouped?e.groupers.concat(n):n)}performSort(e){const n=this,{rootNode:r,storage:i,sorterFn:o}=n;n.tree?(!n.isChained&&r.traverse((e=>{e.isLoaded&&e.isParent&&(e.children.sort(o),e.updateChildrenIndices(e.children,"parentIndex",!0))})),i.replaceValues({values:n.collectDescendants(r).visible,silent:!0})):n.isGrouped?i.replaceValues({...n.prepareGroupRecords(o),silent:!0}):i.replaceValues({values:i.values.sort(o),silent:!0}),n.afterPerformSort(e||n.isRemoteDataLoading)}afterPerformSort(e){if(e)return;const n=this;n._idMap=null;const r={action:"sort",sorters:n.sorters,records:n.allRecords};n.trigger("sort",r),n.trigger("refresh",r)}},returnTrue=()=>!0,StoreChained_default=e=>class StoreChained extends(e||re){static get $name(){return"StoreChained"}static get defaultConfig(){return{chainedFilterFn:null,chainedFields:null,masterStore:null,doRelayToMaster:["add","remove","insert"],dontRelayToMaster:[],excludeCollapsedRecords:!0}}static get properties(){return{chainedStores:null}}construct(e){super.construct(e);const n=this,{masterStore:r}=n,i=n.syncOrder?"sort":"";r&&(n.methodNamesToRelay.forEach((e=>n[e]=(...r)=>n.relayToMaster(e,r))),n.removeAll=(...e)=>{r.remove(n.getRange(),...e)},r.ion({changePreCommit:n.onMasterDataChangedPreCommit,change:n.onMasterDataChanged,[i]:n.onMasterDataChanged,prio:1,thisObj:n}),r.chainedStores||(r.chainedStores=[]),r.chainedStores.push(n),n.fillFromMaster())}get $master(){return this.masterStore||this}get isChained(){return Boolean(this.masterStore)}set chainedFilterFn(e){this._chainedFilterFn=this.thisObj?e.bind(this.thisObj):e}get chainedFilterFn(){return this._chainedFilterFn||returnTrue}get methodNamesToRelay(){const e=Array.isArray(this.doRelayToMaster),n=Array.isArray(this.dontRelayToMaster);return e&&this.doRelayToMaster.filter((e=>!n||!this.dontRelayToMaster.includes(e)))||[]}updateChainedStores(){this.chainedStores&&this.chainedStores.forEach((e=>e.fillFromMaster()))}fillFromMaster(){const e=this,{masterStore:n,isTree:r}=e;let i=[];if(!e.isChained)throw new Error("fillFromMaster only allowed on chained store");if(n.isGrouped&&n.isFiltered?n.forEach((e=>i.push(e)),n,{includeFilteredOutRecords:!0,includeCollapsedGroupRecords:!0}):i=n.allRecords.filter((n=>!n.isSpecialRow&&e.chainedFilterFn(n))),r&&(e.idRegister={},e.internalIdRegister={},i.forEach((n=>{n.stores.includes(e)?e.register(n):n.joinStore(e)})),e.excludeCollapsedRecords)){const n=e.getChildren(e.rootNode);i=e.doIncludeExclude(n,!0)}e.isFillingFromMaster=!0,e.data=i,e.isFillingFromMaster=!1}commitToMaster(){const e=this,n=e.masterStore;if(!e.isChained)throw new Error("commitToMaster only allowed on chained store");return n.beginBatch(),n.remove(e.removed.values),n.add(e.added.values),n.endBatch(),e.commit()}relayToMaster(e,n){return this.masterStore[e](...n)}onMasterDataChangedPreCommit(e){this.onMasterDataChanged(e),this.$masterEventhandled=!0}onMasterDataChanged({action:e,changes:n,$handled:r,isMove:i}){var o;this.$masterEventhandled?this.$masterEventhandled=!1:i&&"remove"===e||("update"!==e||(null==(o=this.chainedFields)?void 0:o.some((e=>e in n))))&&this.fillFromMaster()}makeChained(e=returnTrue,n,r){return new((null==r?void 0:r.storeClass)||this.constructor)({...r||{},tree:!1,autoTree:!1,masterStore:this.$master,modelClass:this.modelClass,syncDataOnLoad:!1,chainedFilterFn:e,chainedFields:n})}chain(){return this.makeChained(...arguments)}doDestroy(){var e;null==(e=this.chainedStores)||e.forEach((e=>e.destroy())),super.doDestroy()}},StoreState_default=e=>class StoreState extends(e||re){static get $name(){return"StoreState"}getState(){const{sorters:e,groupers:n,filters:r}=this,i={};return(null==e?void 0:e.length)&&(i.sorters=e.map((e=>{const n=Et.cleanupProperties(Et.clone(e));return delete n.fn,delete n.sortFn,n}))),(null==n?void 0:n.length)&&(i.groupers=n.map((e=>{const n=Et.cleanupProperties(Et.clone(e));return delete n.fn,n}))),(null==r?void 0:r.values.length)&&(i.filters=r.values.map((e=>{const n=Et.cleanupProperties(Et.clone(e.config));return n.value=e.value,n.caseSensitive&&delete n.caseSensitive,n}))),i}applyState(e){const n=this,{sorters:r=[],groupers:i=[],filters:o=[]}=e,{sortParamName:s,filterParamName:a}=n;n.sorters=r.filter((e=>e.field||e.sortFn&&!s)),n.groupers=i.slice(),n.sort(),n.filters=o.filter((e=>e.property||e.filterBy&&!a)),n.filter()}},zeroPad=e=>String(e).padStart(6,"0"),gi=class{constructor(e){this.value=e,this._padded=null}set value(e){this._value=String(null!=e?e:"")}get value(){return this._value}static from(e){return null==e||e instanceof gi?e:new gi(e)}static pad(e){return e instanceof gi?e.valueOf():gi.split(e).map(zeroPad).join(".")}static split(e){let n,r;if(e||0===e)switch(typeof e){case"object":e=String(e);case"string":for(r=e.split("."),n=r.length;n-- >0;)r[n]=parseInt(r[n],10);break;case"number":r=[e]}return r||[]}static compare(e,n){return e===n?0:e&&n?(e=gi.pad(e))<(n=gi.pad(n))?-1:n<e?1:0:e?1:n?-1:0}append(e){const n=this.value;return gi.from(n?`${n}.${e}`:e)}isEqual(e){return!gi.compare(this,e)}match(e){let n=!1;if(e){const r=this.value,i="*"===e[0],o=e.endsWith("*"),s=e.length;n=i===o?r.indexOf(i?e.substr(1,s-2):e)>-1:i?r.endsWith(e.substr(1)):r.startsWith(e.substr(0,s-1))}return n}toString(){return this.value}toJSON(){return this.toString()}valueOf(){var e;return null!=(e=this._padded)?e:this._padded=gi.pad(this.value)}};gi._$name="Wbs";var pi=Object.freeze([]),StoreTree_default=e=>{var n;return __publicField(n=class extends(e||re){get isTree(){return this.tree||this.masterStore&&this.masterStore.tree}get leaves(){const e=this,n=[];return e.isTree?(e.traverse((e=>{e.isLeaf&&n.push(e)})),n):(e.allRecords.forEach((e=>{e.isLeaf&&n.push(e),e.traverse((e=>{e.isLeaf&&n.push(e)}),!0)})),n)}async loadChildren(e){}onNodeAddChild(e,n,r,i,o=!1){var s;const a=this,l=e===a.rootNode&&e.isLoading,{storage:c}=a,d=[],u=[],{previousSibling:h}=n[0];let g;if(a.collectDescendants(n,d,u,{inCollapsedBranch:!(e.isExpanded(a)&&e.ancestorsExpanded(a))}),!l&&u.length)for(const e of u)a.modified.includes(e)||i[e.id]||(a.removed.includes(e)?a.removed.remove(e):e.isLinked||a.added.add(e));if(l&&a.rootVisible&&(d.unshift(e),u.unshift(e)),d.length?(g=0!==r&&h?c.indexOf(h)+h.getDescendantCount(!0,a):c.indexOf(e),c.suspendEvents(),a.storage.splice(++g,0,d),c.resumeEvents(),a._idMap=null):a._allRecords=null,a.updateDependentStores("add",n),l&&d.length){if(a.sorters.length&&a.sort(null,null,!1,!0),null==(s=a.afterLoadData)||s.call(a),!o){const e={action:"dataset",data:a._data,records:d};a.trigger("refresh",e),a.trigger("change",e)}}else if(!o){const r={action:"add",parent:e,isChild:!0,isMove:i,records:n,allRecords:u,index:g};if(a.trigger("add",r),a.trigger("change",r),Object.values(i).some((e=>e))){const r={newParent:e,records:n.filter((e=>i[e.id])),oldParents:n.map((e=>a.getById(e.meta.oldParentId)))};a.trigger("move",r)}}}onNodeRemoveChild(e,n,r,i={isMove:!1,silent:!1,unfiltered:!1}){const o=this,{storage:s}=o,a=[],l=[],{isMove:c,silent:d,unfiltered:u}=i,h=u&&o.isFiltered,g=h&&e.unfilteredChildren?e.unfilteredChildren:n;if(o.collectDescendants(g,a,l,{inCollapsedBranch:!(e.isExpanded(o)&&e.ancestorsExpanded(o)),unfiltered:h}),!c){for(const e of n)e.unjoinStore(o);for(const e of l)e.stores.includes(o)&&e.unjoinStore(o),o.added.includes(e)?o.added.remove(e):e.isLinked||o.removed.add(e);o.modified.remove(l)}if(a.length?(r=s.indexOf(a[0]))>-1&&(s.suspendEvents(),s.splice(r,a.length),s.resumeEvents(),o._idMap=null):(r=-1,o._allRecords=null),!d&&(o.fireRemoveEventForMoveAction||!c)){const i={action:"remove",parent:e,isChild:!0,isMove:c,records:n,allRecords:l,index:r};o.trigger("remove",i),o.trigger("change",i)}return l}collectDescendants(e,n=[],r=[],i){const o=this,{inCollapsedBranch:s=!1,unfiltered:a=!1}=i||0,l=Array.isArray(e)?e:o.getChildren(e,a);if(l)for(let e,i=0,c=l.length;i<c;i++)e=l[i],s||n.push(e),r.push(e),o.collectDescendants(e,n,r,{inCollapsedBranch:s||!e.isExpanded(o),unfiltered:a});return{visible:n,all:r}}getChildren(e,n=!1){const r=this,i=(n||r.isChained)&&e.unfilteredChildren||e.children;return(null==i?void 0:i.length)?r.isChained?i.filter(r.chainedFilterFn).sort(r.sorterFn):i:pi}internalToggleTreeSubRecords(e,n){const r=this,{storage:i}=r,o=i.indexOf(e),s=r.doIncludeExclude(r.getChildren(e),n);if(r.isFiltered&&n&&e.unfilteredChildren&&r.updateChildrenHiddenState(e),s.length&&!1!==o){if(i.suspendEvents(),n){i.splice(o+1,0,...s);const e={action:"add",isExpand:!0,records:s,index:o+1};r.trigger("add",e),r.trigger("change",e)}else{i.splice(o+1,s.length);const e={action:"remove",isCollapse:!0,records:s,index:o+1};r.trigger("remove",e),r.trigger("change",e)}i.resumeEvents(),r._idMap=null}}updateChildrenHiddenState(e){var n;null==(n=e.unfilteredChildren)||n.forEach((e=>{e.instanceMeta(this.id).hidden=!1,e.isLeaf||this.updateChildrenHiddenState(e)}))}doIncludeExclude(e,n,r=[]){const i=this,o=(null==e?void 0:e.length)||0;for(let s=0;s<o;s++){const o=e[s];if(!i.isChained||i.chainedFilterFn(o)){const e=o.instanceMeta(i.id);!n&&e.hidden||r.push(o),e.hidden=!n,o.isExpanded(i)&&i.doIncludeExclude(i.getChildren(o),n,r)}}return r}async toggleCollapse(e,n){const r=this,i=r.getById(e),o=i.instanceMeta(r);if(void 0===n&&(n=!o.collapsed),!o.isLoadingChildren&&!i.isLeaf&&i.isExpanded(r)===n){if(r.trigger("beforeToggleNode",{record:i,collapse:n}),o.collapsed=n,o.collapsed)return r.onNodeCollapse(i),!0;{r.onNodeExpand(i);let e=!0;if(!i.isLoaded){o.isLoadingChildren=!0;try{await r.loadChildren(i)}catch(n){o.collapsed=!0,e=!1,r.trigger("loadChildrenException",{record:i,exception:n})}finally{o.isLoadingChildren=!1}}return e}}}onNodeCollapse(e){if(e.ancestorsExpanded(this))return this.internalToggleTreeSubRecords(e,!1)}onNodeExpand(e){if(e.ancestorsExpanded(this))return this.internalToggleTreeSubRecords(e,!0)}transformToTree(e){var n;const{parentIdField:r,idField:i,childrenField:o}=this.modelClass,s=new Map,a=[];for(const l of e){const c=l[r];if(null!=c){let r=s.get(c);void 0===r&&(r=null!=(n=e.find((e=>e[i]===c)))?n:null,s.set(c,r)),r&&(r[o]||(r[o]=[]),r[o].push(l))}else a.push(l)}return a}treeify(e,n,r=!1){const{length:i}=e,o=[],s={};let a,l;for(a=0;a<i;a++){if(!e[a].call){const n=e[a];e[a]=e=>e[n]}o[a]=new Map}this.rootNode.traverse((n=>{if(l=null,n.isLeaf){for(a=0;a<i;a++){const r=(null==l?void 0:l.path)||"",i=o[a],s=e[a](n),c=`${r+s}/`,d=w.makeValidDomId(`generated_${c}`,"_"),u=i.get(d)||i.set(d,{id:d,key:s,path:c,expanded:!0,readOnly:!0,children:[],generatedParent:!0}).get(d);l&&!l.children.includes(u)&&l.children.push(u),l=u}l.children.push(n)}}),!0),o.forEach((e=>e.forEach(((e,i,o)=>{null==n||n(e),r&&(e=this.createRecord(e),o.set(i,e))})))),s.children=[...o[0].values()];const sort=n=>{n.children&&(n.children.sort(((n,r)=>{if(n.isLeaf){let o;for(let s=0;!o&&s<i;s++){const i=e[s](n),a=e[s](r);o=i<a?-1:a>i?1:0}return o}return"string"==typeof n.key||"string"==typeof r.key?n.key.localeCompare(r.key,void 0,{numeric:!0}):n.key<r.key?-1:n.key>r.key?1:0})),n.children.forEach(sort))};return sort(s),s}treeifyFlatData(e){const{childrenField:n,parentIdField:r}=this.modelClass;let i=!1,o=!0;for(const s of e){if(s.isModel||Array.isArray(s[n])){o=!1;break}null!=s[r]&&(i=!0)}return o&&i&&(e=this.transformToTree(e)),e}async indent(e){const n=this;if((e=(e=Array.isArray(e)?e:[e]).filter((n=>{let r=Boolean(n.previousSibling);for(;r&&!n.isRoot;)r=!e.includes(n.parent),n=n.parent;return r}))).length&&!1!==n.trigger("beforeIndent",{records:e})){e.sort(((e,n)=>gi.compare(e.wbsCode,n.wbsCode))),n.beginBatch();for(const r of e){const e=r.previousSibling;e.appendChild(r),n.toggleCollapse(e,!1)}n.endBatch(),n.trigger("indent",{records:e}),n.trigger("change",{action:"indent",records:e})}}async outdent(e){const n=this;if((e=(e=Array.isArray(e)?e:[e]).filter((n=>{const{parent:r}=n;let i=r&&!r.isRoot;for(;i&&!n.isRoot;)i=!e.includes(r),n=n.parent;return i}))).length&&!1!==n.trigger("beforeOutdent",{records:e})){e.sort(((e,n)=>gi.compare(e.wbsCode,n.wbsCode))),n.beginBatch();for(const r of e){const{parent:e}=r,i=e.children.slice(e.children.indexOf(r)+1);e.parent.insertChild(r,e.nextSibling),r.appendChild(i),n.toggleCollapse(r,!1)}n.endBatch(),n.trigger("outdent",{records:e}),n.trigger("change",{action:"outdent",records:e})}}},"$name","StoreTree"),__publicField(n,"configurable",{transformFlatData:null,fireRemoveEventForMoveAction:A.checkVersion("core","6.0","<")}),n},mi=class{static preWalk(e,n,r){const i=[e];let o,s;for(;i.length;)o=i.pop(),r(o),s=n(o),s&&i.push.apply(i,s.slice().reverse())}static preWalkWithParent(e,n,r){const i=[{node:e,parent:null}];for(;i.length;){const{parent:e,node:o}=i.pop();r(e,o);const s=n(o);Array.isArray(s)&&i.push(...s.slice().reverse().map((e=>({node:e,parent:o}))))}}static preWalkUnordered(e,n,r){const i=[e];let o,s;for(;i.length;)o=i[i.length-1],r(o),s=n(o),s?i.splice(i.length-1,1,...s):i.length=i.length-1}static postWalk(e,n,r){const i=new Map,o=[e];let s,a;for(;o.length;)s=o[o.length-1],i.has(s)?(r(s),o.pop()):(a=n(s),a&&o.push(...a.slice().reverse()),i.set(s,s))}static prePostWalk(e,n,r,i){const o=new Map,s=[e];let a,l;for(;s.length;)a=s[s.length-1],o.has(a)?(i(a),s.pop()):(r(a),l=n(a),l&&s.push(...l.slice().reverse()),o.set(a,a))}};mi._$name="WalkHelper";var StoreSync_default=e=>class StoreSync extends(e||re){static get $name(){return"StoreSync"}static get configurable(){return{syncDataOnLoad:null,shouldSyncDataset:null,shouldSyncRecord:null}}syncDataset(e){var n;const r=this,{storage:i}=r,o=null==(n=r.shouldSyncDataset)?void 0:n.call(r,{data:e});if(!1===o)return;r.isSyncingDataOnLoad=!0;const{toAdd:s,toRemove:a,toMove:l,updated:c,ids:d}=r.tree?r.syncTreeDataset(e,o):r.syncFlatDataset(e,o);let{threshold:u}=r.syncDataOnLoad,h=!1;if(u&&("string"==typeof u&&(u=parseInt(u,10)/100*r.count),h=s.length+a.length+l.length+c.length>u),r.tree){if(s.length){r.add(s,h).forEach((e=>e.clearParentId()))}if(l.length)for(const{parent:e,node:n,index:i}of l){r.getById(e.id).insertChild(n,i)}r.remove(a,h)}else h&&r.suspendEvents(),r.remove(a),r.add(s),h&&r.resumeEvents();u&&!h&&c.forEach((({record:e,toSet:n,wasSet:i})=>r.onModelChange(e,n,i))),r.acceptChanges();const g={added:s,removed:a,updated:c,thresholdSurpassed:h};if(r.isFiltered&&!r.remoteFilter&&r.filter({silent:r.isRemoteDataLoading}),r.isGrouped)r.group(null,null,!1,!0,r.isRemoteDataLoading);else if(r.isSorted)r.remoteSort?i.replaceValues({values:i.values.sort(r.createSorterFn(r.sorters)),silent:!0}):r.sort();else if(r.tree){let e=!1,n=0;mi.preWalk(r.rootNode,(n=>Array.isArray(n.children)&&!e?n.children:null),(r=>{r.id!==d[n++]&&(e=!0)})),e&&(r.sort(((e,n)=>d.indexOf(e.id)-d.indexOf(n.id)),void 0,void 0,!0),r.clearSorters(!0),!h&&r.afterPerformSort())}else i.values.some(((e,n)=>e.id!==d[n]))&&(i.replaceValues({values:i.values.sort(((e,n)=>d.indexOf(e.id)-d.indexOf(n.id))),silent:!0}),!h&&r.afterPerformSort());h&&r.trigger("refresh",{action:"batch",data:e,records:i.values,syncInfo:g}),r.isSyncingDataOnLoad=!1,r.trigger("loadSync",g)}syncFlatDataset(e,n){if(!e)return{toRemove:this.records};const r=this,{idField:i,allFields:o}=r.modelClass,s=[],a=[],l=[],c={},d=[],u=Array.isArray(n),{threshold:h,keepMissingValues:g}=r.syncDataOnLoad;let p=0;if(e.forEach((e=>{var s;const m=(e=e.isModel?e.data:e)[i],f=r.getById(m);if(!u||n.includes(m))if(f){if(!1!==(null==(s=r.shouldSyncRecord)?void 0:s.call(r,{record:f,data:e}))){if(!1===g)for(const n of o)!(n.dataSource in e)&&n.dataSource in f.data&&(e[n.dataSource]=n.defaultValue);const n=f.set(e,null,Boolean(h));n&&l.push({record:f,wasSet:n,toSet:e})}}else a.push(r.processRecord(r.createRecord(e)));f&&p++,c[m]=1,d.push(m)})),p<r.storage.totalCount)if(n)for(const e of n)c[e]||s.push(r.getById(e));else r.forEach((e=>{c[e.id]||s.push(e)}));return{toAdd:a,toRemove:s,toMove:[],updated:l,ids:d}}syncTreeDataset(e){if(!e)return{toRemove:this.records};const n=this,{idField:r,parentIdField:i,childrenField:o,allFields:s}=n.modelClass,{keepMissingValues:a,threshold:l}=n.syncDataOnLoad,c=[],d=[],u=[],h=[],g=new Set,p=[];return n.transformFlatData&&(e=n.treeifyFlatData(e)),mi.preWalkWithParent({isRoot:!0,id:n.rootNode.id,children:e},(e=>e.children),((e,c)=>{var m;if(e){const{id:f,node:b}=n.resolveSyncNode(c);if(b){if(!1!==(null==(m=n.shouldSyncRecord)?void 0:m.call(n,{record:b,data:c}))){let i;const d=b.children;if(!0!==d&&!0===c[o]&&(b.clearChildren(),b.data[o]=b.children=!0,delete c[o],n.toggleCollapse(b,!0),i=!0),b.parent.id!==e[r]&&u.push({node:b,parent:e,index:e[o].indexOf(c)}),!1===a)for(const e of s)"parentId"!==e.name&&!(e.dataSource in c)&&e.dataSource in b.data&&(c[e.dataSource]=e.defaultValue);const g=b.set(c,null,Boolean(l));g?h.push({record:b,wasSet:g,toSet:c}):i&&b.signalNodeChanged({[o]:{value:!0,oldValue:d}})}}else c[i]=e[r],d.push({...c,...Array.isArray(c[o])?{children:[]}:void 0});g.add(b),p.push(f)}})),g.length!==e.length&&n.traverse((e=>{g.has(e)||c.push(e)})),{toAdd:d,toRemove:c,toMove:u,updated:h,ids:p}}resolveSyncNode(e){const n=e[this.modelClass.idField];return{id:n,node:this.getById(n)}}},fi=Symbol("STM_PROP"),StoreStm_default=e=>class StoreStm extends(e||re){static get $name(){return"StoreStm"}static get defaultConfig(){return{stm:null,ignoreRemoteChangesInSTM:!1}}get stm(){return this[fi]}set stm(e){var n;const r=this;r.stm!==e&&((null==(n=r.stm)?void 0:n.hasStore(r))&&r.stm.removeStore(r),r[fi]=e,r.stm&&!r.stm.hasStore(r)&&r.stm.addStore(r))}add(e,n=!1,r={}){let i;const{stm:o}=this;return!this.tree&&(null==o?void 0:o.enabled)?(i=super.add(e,n),(null==i?void 0:i.length)&&o.onStoreModelAdd(this,i,n)):i=super.add(e,n,r),i}insert(e,n,r=!1){let i;const{stm:o}=this;if(!this.tree&&(null==o?void 0:o.enabled)){const s=(Array.isArray(n)?n:[n]).reduce(((e,n)=>{const r=n instanceof Ur?this.indexOf(n):void 0;return void 0!==r&&-1!==r&&e.set(n,r),e}),new Map);i=super.insert(e,n),(null==i?void 0:i.length)&&(e=this.indexOf(i[0]),o.onStoreModelInsert(this,e,i,s,r))}else i=super.insert(e,n,r);return i}remove(e,n=!1,r){let i;const{stm:o}=this;if(!this.tree&&(null==o?void 0:o.enabled)){const s=(Array.isArray(e)?e:[e]).map((e=>this.getById(e))).filter((e=>!!e)).reduce(((e,n)=>{const r=this.indexOf(n);return void 0!==r&&-1!==r&&e.set(n,r),e}),new Map);i=super.remove(e,n,r),(null==i?void 0:i.length)&&o.onStoreModelRemove(this,i,s,n)}else i=super.remove(e,n,r);return i}removeAll(e){const{stm:n}=this;let r;if(null==n?void 0:n.enabled){const{tree:i,rootNode:o,allRecords:s}=this,a=s.length,l=i?o.children.slice():s.slice();r=super.removeAll(e),a&&0===this.count&&n.onStoreRemoveAll(this,l,e)}else r=super.removeAll(e);return r}beforeApplyChangeset(){const{stm:e,crudManager:n}=this;let r=!1;return!(null==n?void 0:n.applyingChangeset)&&(null==e?void 0:e.enabled)&&(r=!0,e.isRecording&&e.stash(),this.ignoreRemoteChangesInSTM?e.disable():e.startTransaction()),r}applyChangeset(e,n,r,i,o){const s=this.beforeApplyChangeset(),a=super.applyChangeset(e,n,r,i,o);return this.afterApplyChangeset(s),a}afterApplyChangeset(e){if(e){const{stm:e}=this;this.ignoreRemoteChangesInSTM?e.enable():e.stopTransaction(),e.applyStash()}}},bi={splice:1,clear:1},vi={includeFilteredOutRecords:!1,includeCollapsedGroupRecords:!1},fixTraverseOptions2=(e,n)=>("boolean"==typeof(n=n||!1)&&(n={includeFilteredOutRecords:n,includeCollapsedGroupRecords:!1}),n||vi),yi=class extends(re.mixin(Delayable_default,Identifiable_default,Events_default,Pluggable_default,State_default,StoreFilter_default,StoreChanges_default,StoreCRUD_default,StoreRelation_default,StoreSum_default,StoreSearch_default,StoreSort_default,StoreGroup_default,StoreChained_default,StoreState_default,StoreTree_default,StoreStm_default,StoreSync_default,StoreProxy_default)){static get $name(){return"Store"}static get properties(){return{relationCache:{},dependentStoreConfigs:new Map}}static get configurable(){return{id:!0,modelClass:Ur,verifyNoGeneratedIds:!0}}static get defaultConfig(){return{fields:null,autoTree:!0,data:null,tree:!1,callOnFunctions:!0,storage:null,useRawData:!1,allowNoId:!0,preventSubClassingModel:null}}static get identifiable(){return{registerGeneratedId:!1}}constructor(...e){if(super(...e),this.objectify)return this.initProxy()}construct(e={}){Object.assign(this,{added:new ci,removed:new ci,modified:new ci,idRegister:{},internalIdRegister:{},oldIdMap:{}}),e.storeId&&(e=Et.assign({id:e.storeId},e)),super.construct(e),this.initRelations()}static from(e,n={},r=null){return e&&!e.isStore&&("string"==typeof e?e=yi.getStore(e):(Array.isArray(e)&&(r&&(e=e.map((e=>e.isModel?e:r(e)))),e=Et.assign({},n,{data:e})),e=new yi(e))),e}doDestroy(){var e,n,r,i;const o=this,s=o.registeredRecords;for(let e,n=s.length-1;n>=0;n--)e=s[n],(null==e?void 0:e.isDestroyed)||e.unjoinStore(o);null==(e=o._storage)||e.destroy(),null==(r=null==(n=o.stm)?void 0:n.removeStore)||r.call(n,o),o.isChained||null==(i=o.rootNode)||i.destroy(),super.doDestroy()}beginBatch(){this.suspendEvents()}endBatch(){this.resumeEvents()&&this.trigger("refresh",{action:"batch",data:this.storage.values,records:this.storage.values})}set storage(e){const n=this;(null==e?void 0:e.isCollection)?n._storage=e:n._storage=new si(e),n._storage.autoFilter=n.reapplyFilterOnAdd,n._storage.autoSort=n.reapplySortersOnAdd;for(const e of n._storage)e.joinStore(n);n._storage.ion({change:"onDataChange",thisObj:n})}get storage(){return this._storage||(this.storage={}),this._storage}get allRecords(){var e;const n=this;if((null==(e=n._allRecords)?void 0:e.generation)!==n.storage.generation){if(n.isTree){const e=n.collectDescendants(n.rootNode,void 0,void 0,{unfiltered:!0}).all;n.rootVisible&&e.unshift(n.rootNode),n._allRecords=e}else n._allRecords=n.isGrouped?n.collectGroupRecords():n.storage.allValues;n._allRecords.generation=n.storage.generation}return n._allRecords}getAllDataRecords(e){return this.isGrouped?this.collectGroupRecords(e,!1):e?this.storage.allValues:this.storage.values}onIsCreatingToggle(e,n){const r=this,i=e.isPersistable&&!n;r.added[i?"add":"remove"](e),i&&(r.trigger("addConfirmed",{record:e}),r.autoCommit&&r.doAutoCommit())}joinRecordsToStore(e){const{allCount:n}=this;for(let r=0;r<e.length;r++){const i=e[r];i.setData("parentIndex",n+r-e.length),i.joinStore(this)}}onDataChange({source:e,action:n,added:r,removed:i,replaced:o,oldCount:s,items:a,from:l,to:c}){const d=this,u=bi[n],h=u&&(null==r?void 0:r.length),g=u&&(null==i?void 0:i.length);let p,m;if(d._idMap=null,h&&d.joinRecordsToStore(r),null==o||o.forEach((([e,n])=>{e.unjoinStore(d,!0),n.joinStore(d)})),super.onDataChange(...arguments),!d.isTree){if(h){for(const e of r)d.removed.includes(e)?d.removed.remove(e):e.isLinked||d.added.add(e);p=!d.remoteFilter&&d.filtered&&d.reapplyFilterOnAdd,p&&d.filter({silent:!0}),m=!d.remoteSort&&d.isSorted&&d.reapplySortersOnAdd,m&&d.sort(null,null,!1,!0)}if(g){for(const e of i)e.cancelBatch(),e.unjoinStore(d),d.added.includes(e)?d.added.remove(e):e._undoingInsertion||e.isCreating||e.isLinked||d.removed.add(e);d.modified.remove(i),p=!d.remoteFilter&&d.filtered,p&&d.filter({silent:!0})}}switch(n){case"clear":d.relationCache={},d.updateDependentStores("removeall"),d.trigger("removeAll"),d.trigger("change",{action:"removeall"});break;case"splice":if(h){d.updateDependentStores("add",r);const n=r.reduce(((e,n)=>{const{previousIndex:r}=n.meta;return r>-1&&r<e&&(e=r),e}),r[0].meta.previousIndex),i={records:r,index:e.indexOf(r[0],!e.autoFilter)};n>-1&&(i.oldIndex=n),d.trigger("add",i),d.trigger("change",Object.assign({action:"add"},i)),p&&d.triggerFilterEvent({action:"filter",filters:d.filters,oldCount:s,records:d.storage.allValues}),m&&d.trigger("sort",{action:"sort",sorters:d.sorters,records:d.storage.allValues})}i.length&&(d.updateDependentStores("remove",i),d.trigger("remove",{records:i}),d.trigger("change",{action:"remove",records:i})),o.length&&(d.trigger("replace",{records:o,all:d.records.length===o.length}),d.trigger("change",{action:"replace",replaced:o,all:d.records.length===o.length}));break;case"filter":(d.isGrouped||d.isSorted)&&d.performSort(!0);break;case"move":{const e=Math.min(l,c),r=Math.min(d.storage.allValues.length-1,Math.max(l,c));for(let n=d.storage.allValues,i=e;i<=r;i++)n[i].setData("parentIndex",i);d.trigger("move",{record:a[0],records:a,from:l,to:c}),d.isFiltered&&d.performFilter(),d.trigger("change",{action:n,record:a[0],records:a,from:l,to:c});break}}}onDataReplaced(e,n){var r;const i=this,{storage:o}=i,s=o.allValues,a=Boolean(i.sorters.length>0);for(let e=0;e<s.length;e++)s[e].joinStore(i);if(!i.remoteFilter&&i.isFiltered&&i.filter({silent:!0}),i.remoteSort?i.isGrouped&&o.replaceValues({...i.prepareGroupRecords(),silent:!0}):(i.isGrouped&&i.group(null,null,!1,!a,!0),a&&i.sort(null,null,!1,!0)),!i.useRawData.disableDuplicateIdCheck){const{idMap:e}=i;if(Object.keys(e).length<o.values.length){const n=[];throw o.values.forEach((r=>e[r.id]?delete e[r.id]:n.push(r))),new Error(`Id collision on ${n.map((e=>e.id))}`)}}const l={action:e,data:n,records:o.values};i.updateDependentStores(e,l.records),null==(r=i.afterLoadData)||r.call(i),i.isRemoteDataLoading||i.trigger("refresh",l),i.trigger("change",l)}onModelChange(e,n,r,i,o){const s=this,a={record:e,records:[e],changes:r,batch:null!=e.batching,fromRelationUpdate:o},l=!e.ignoreBag&&!e.isLinked&&s.updateModifiedBagForRecord(e);if(s.storage.onItemMutation(e,r),"id"in r){const{oldValue:r,value:i}=n.id;s.updateDependentRecordIds(r,i),s.onRecordIdChange({record:e,oldValue:r,value:i})}if(!i){if("id"in r){const{oldValue:r,value:i}=n.id;s.trigger("idChange",{store:s,record:e,oldValue:r,value:i})}s.onUpdateRecord(e,r),s.trigger("update",a),s.trigger("change",Object.assign({action:"update"},a))}s.autoCommit&&l&&s.doAutoCommit()}updateModifiedBagForRecord(e){const n=this;let r=!1;return e.isModified?n.modified.includes(e)||n.added.includes(e)||!e.isPartOfStore(n)||e.isAutoRoot||(e.isPhantom?n.added.add(e):n.modified.add(e),r=!0):n.modified.remove(e),r}get idMap(){const e=this,n=!e._idMap,r=e._idMap||(e._idMap={});if(n){const n=e.storage.values;for(let e,i=0,o=0;i<n.length;i++)e=n[i],r[e.id]={index:i,visibleIndex:o,record:e},e.isSpecialRow||o++;if(e.isFiltered)for(let n=0,i=e.storage._values.length;n<i;n++){const i=e.storage._values[n];i.id in r?r[i.id].unfilteredIndex=n:r[i.id]={index:-1,unfilteredIndex:n,record:i}}}return r}changeModelClass(e){const{fields:n}=this;this.originalModelClass=e;let r=e;if(null==n?void 0:n.length){class ModelClass extends e{static get fields(){return n}}r=ModelClass}else if(!this.preventSubClassingModel){class ModelClass extends e{}r=ModelClass}return r.initClass(),r}set storeId(e){this.id=e}get storeId(){return this.id}changeId(e,n){return super.changeId(!0!==e&&e,n)}updateId(e,n){const r=yi.getById(e);r&&yi.unregisterInstance(r),super.updateId(e,n)}generateAutoId(){return yi.generateId("store-")}get tree(){return this._tree}set tree(e){this._tree=e,e&&!this.rootNode&&(this.rootNode=this.buildRootNode(),this.rootNode.isAutoRoot=!0)}buildRootNode(){return{}}static getStore(e,n){if(e instanceof yi)return e;if(this.getById(e))return this.getById(e);if(Array.isArray(e)){let r;const i=e.map((e=>(e instanceof Ur?r=e.constructor:"string"==typeof e&&(e={text:e}),e)));if(!r){class ModelClass extends Ur{}r=ModelClass}e={autoCreated:!0,data:i,modelClass:r,allowNoId:!0},n||(n=yi)}return n?new n(e):void 0}static get stores(){return yi.registeredInstances}get rootNode(){return this.masterStore?this.masterStore.rootNode:this._rootNode}set rootNode(e){var n;const r=this,i=r._rootNode;e!==i&&(i&&r.clear(!0),e instanceof Ur?(e.instanceMeta(r).collapsed=!1,r._rootNode=e):r._rootNode=e=new r.modelClass(Object.assign({expanded:!0,[r.modelClass.idField]:`${r.id}-rootNode`},e),r,null,!0),r._tree=!0,e.isRoot=!0,e.joinStore(r),((null==(n=e.children)?void 0:n.length)||r.rootVisible)&&(e.isLoading=!0,r.onNodeAddChild(e,e.children||[],0),e.isLoading=!1),r.trigger("rootChange",{oldRoot:i,rootNode:e}))}set data(e){this.setStoreData(e)}setStoreData(e){const n=this,{idField:r,childrenField:i}=n.modelClass;if(n.transformFlatData&&(null==e?void 0:e.length)>0&&!Object.isExtensible(e[0])&&(n.useRawData=n.useRawData||{disableDuplicateIdCheck:!1,disableDefaultValue:!1,disableTypeConversion:!1},e=Et.clone(e)),n.getConfig("plugins"),n.processConfiguredListeners(),e&&!Array.isArray(e)&&(e=Et.transformNamedObjectToArray(e,r)),n.tree=!n.isChained&&(n.tree||Boolean(n.autoTree&&(null==e?void 0:e.some((e=>e[i]))))),e&&(n.remoteSort||n.remoteFilter))for(let n=0;n<e.length;n++)e[n]._remoteSortIndex=n;if(n.syncDataOnLoad&&n._data)n.syncDataset(e);else{if(n._data=e,n.tree){n.transformFlatData&&(e=n.treeifyFlatData(e));const r=n.rootNode;if(r.isLoading=!0,n._data.forEach((e=>delete e.parentId)),n.clear(!0),r.appendChild(e),n.updateDependentStores("dataset",[r]),r.isLoading=!1,0===e.length){const e={action:"dataset",data:[],records:[]};n.trigger("refresh",e),n.trigger("change",e)}else n.isFiltered&&n.filter()}else n.loadData(e);n.added.clear(),n.removed.clear(),n.modified.clear()}}loadData(e,n="dataset"){var r,i;const o=this,{storage:s,allowNoId:a}=o,l=o.modelClass.fieldMap.id.dataSource,c=o.find((e=>e.isCreating));c&&s.values.splice(o.records.indexOf(c),1);let d=o.verifyNoGeneratedIds;if(o.removeHeadersAndFooters(o.storage.values),o._idMap=null,o.oldIdMap={},e){if(!(e[0]instanceof Ur)){o.modelClass.exposeProperties(e[0]);const n=e.length,c=new Array(n);for(let s=0;s<n;s++){const n=e[s];if(!a&&null==n[l])throw new Error(`Id required but not found on row ${s}`);d&&(null==(i=null==(r=n[l])?void 0:r.startsWith)?void 0:i.call(r,"_generated"))&&(console.warn(`Generated id found in data: ${n[l]}. Generated ids are temporary and should be replaced with real ids by the backend`),d=!1),c[s]=o.processRecord(o.createRecord(n,!0),!0),c[s].setData("parentIndex",s)}o.clear(!0),s.replaceValues({values:c,isNewDataset:!0,silent:!0})}else o.clear(!0),s.replaceValues({values:e.slice(),isNewDataset:!0,silent:!0});c&&s.values.push(c),o._data=e,o.onDataReplaced(n,e)}else o.clear(!0),o._data=null;o.isSyncingDataOnLoad=!1}get data(){return this._data}getRange(e,n,r=!0){return(r?this.storage.allValues:this.storage.values).slice(e,n)}createRecord(e,n=!1,r=!1){return new this.modelClass(e,this,null,n,!1,r)}processRecord(e,n=!1){return e}refreshData(){this.filter(),this.sort()}onRecordIdChange({record:e,oldValue:n,value:r}){const i=this,o=i._idMap,{idRegister:s,oldIdMap:a}=i;if(i.storage._indicesInvalid=!0,a[n]=e,o&&!o[r]){const e=o[n];delete o[n],o[r]=e}i.added.changeId(n,r),i.removed.changeId(n,r),i.modified.changeId(n,r),delete s[n],s[r]=e,e.index=i.storage.indexOf(e)}onUpdateRecord(e,n){const r=this,{internalId:i}=n,{internalIdRegister:o}=r;i&&(this.storage._indicesInvalid=!0,delete o[i.oldValue],o[i.value]=e),r.reapplyFilterOnUpdate&&r.isFiltered&&r.filter()}get useRawData(){return this._useRawData}set useRawData(e){this._useRawData=!0===e?{enabled:!0,disableDuplicateIdCheck:!0,disableTypeConversion:!0,disableDefaultValue:!1}:e?Object.assign(e,{enabled:!0}):{enabled:!1}}getCount(e=!0){return e?this.count:this.originalCount}get originalCount(){var e;return this.storage.totalCount-((null==(e=this.groupRecords)?void 0:e.length)||0)}get count(){return this.storage.count}get allCount(){return this.isTree?this.rootNode.descendantCount:this.storage.totalCount}get records(){return this.storage.values}get first(){return this.storage.values[0]}get last(){return this.storage.values[this.storage.values.length-1]}getAt(e,n=!1){return this.storage.getAt(e,n)}register(e){const n=this;if(!n.useRawData.disableDuplicateIdCheck){const r=n.isTree&&n.idRegister[e.id];if(r&&r!==e)throw new Error(`Id collision on ${e.id}`)}n.idRegister[e.id]=e,n.internalIdRegister[e.internalId]=e}unregister(e){delete this.idRegister[e.id],delete this.internalIdRegister[e.internalId]}get registeredRecords(){return Object.values(this.idRegister)}getById(e){if(null==e?void 0:e.isModel){const n=e;return n.hasLinks&&!this.storage.allValues.includes(n)?n.$links.find((e=>this.storage.allValues.includes(e))):n}return this.idRegister[e]}isAvailable(e){const n=this.getById(e);return n&&this.storage.includes(n)||!1}getByInternalId(e){return this.internalIdRegister[e]}includes(e){return this.isTree?null!=this.idRegister[Ur.asId(e)]:this.indexOf(e)>-1}indexOf(e,n=!1,r=!1){if((null==e?void 0:e.isModel)&&!e.stores.includes(this.$store||this)){const r=e.$links.find((e=>this.storage.allValues.includes(e)));return r?this.indexOf(r,n):-1}if(this.isTree)return(r?this.rootNode.allChildren:this.storage.values).indexOf(this.getById(e));const i=Ur.asId(e);if(null==i)return-1;const o=this.idMap[i];return o?o[n?"visibleIndex":"index"]:-1}allIndexOf(e){return this.isTree?this.allRecords.indexOf(this.getById(e)):this.storage.indexOf(e,!0)}getDistinctValues(e,n=!1){const r=[],i={};let o;return this.forEach((n=>{if(!n.isSpecialRow&&!n.isRoot){o=n.get(e);const s=o instanceof Date?o.getTime():o;i[s]||(r.push(o),i[s]=1)}}),this,n),r}getValueCount(e,n){let r=0;return this.forEach((i=>{Et.isEqual(i.get(e),n)&&r++})),r}set json(e){"string"==typeof e&&(e=w.safeJsonParse(e)),this.data=e}get json(){return w.safeJsonStringify(this)}get formattedJSON(){return w.safeJsonStringify(this,null,4)}toJSON(){return(this.isTree?this.rootNode.unfilteredChildren||this.rootNode.children||[]:this.allRecords).map((e=>e.toJSON()))}preProcessCurrentConfigs(e){super.preProcessCurrentConfigs(e),delete e.project}getInlineData(e){var n;const r=[];return this.tree?null==(n=this.rootNode.children)||n.forEach((n=>r.push(n.getCurrentConfig(e)))):this.forEach((n=>r.push(n.getCurrentConfig(e)))),r}getCurrentConfig(e){var n;const r=super.getCurrentConfig(e),{state:i}=this;return r&&(r.data&&(r.data=this.getInlineData(e)),delete r.project,delete r.stm,delete r.asyncEvents,(null==(n=r.modelClass)?void 0:n.$meta.hierarchy[r.modelClass.$meta.hierarchy.length-2])===this.constructor.defaultConfig.modelClass&&delete r.modelClass,this.tree||delete r.tree,i&&Object.assign(r,i)),r}forEach(e,n=this,r){const i=this,callback=(r,i)=>{if(!r.isRoot&&!r.isSpecialRow)return e.call(n,r,i)};if(r=fixTraverseOptions2(0,r),i.isTree)i.isChained&&(r={...r,sorterFn:i.sorterFn}),i.rootNode.traverseWhile(callback,!1,r);else{const e=r.includeFilteredOutRecords?i.storage.allValues:i.storage.values;if(i.isGrouped&&r.includeCollapsedGroupRecords)for(let n=0;n<e.length;n++){const i=e[n],o=r.includeFilteredOutRecords?i.unfilteredGroupChildren:i.groupChildren;if(o&&!0===i.meta.collapsed)for(let e=0;e<o.length;e++){if(!1===callback(o[e],e))return}else if(!1===callback(i,n))return}else for(let n=0;n<e.length;n++)if(!1===callback(e[n],n))return}}map(e,n=this){return this.storage.values.map(e,n)}every(e,n=this,r){return this.storage[r?"allValues":"values"].every(e,n)}reduce(e,n=[],r=this){return r!==this&&(e=e.bind(r)),this.storage.values.reduce(e,n,r)}[Symbol.iterator](){return this.storage.values[Symbol.iterator]()}traverse(e,n=this.rootNode,r=n===this.rootNode,i){const o=this;if(i=fixTraverseOptions2(0,i),o.isTree){if("boolean"==typeof n&&(r=n,n=o.rootNode),o.isChained){const n=e;e=e=>{o.chainedFilterFn(e)&&n(e)}}n.traverse(e,r,i)}else o.forEach((n=>n.traverse(e,!1,i)),o,i)}traverseWhile(e,n=this.rootNode,r=n===this.rootNode,i){const o=this;if(i=fixTraverseOptions2(0,i),o.isTree){if("boolean"==typeof n&&(r=n,n=o.rootNode),o.isChained){const n=e;e=e=>{o.chainedFilterFn(e)&&n(e)}}n.traverseWhile(e,r,i)}else for(const n of o.storage)if(!1===n.traverse(e,!1,i))break}getNext(e,n=!1,r=!1){const i=this,o=i.storage.values;let s=i.indexOf(e);if(s>=o.length-1){if(!n)return null;s=-1}const a=o[s+1];return r&&a&&a.isSpecialRow?i.getNext(o[s+1],n,!0):a}getPrev(e,n=!1,r=!1){const i=this,o=i.storage.values;let s=i.indexOf(e);if(0===s){if(!n)return null;s=o.length}const a=o[s-1];return r&&a&&a.isSpecialRow&&s>0?i.getPrev(o[s-1],n,!0):a}getAdjacent(e,n=!0,r=!1,i=!1){return n?this.getNext(e,r,i):this.getPrev(e,r,i)}getNextLeaf(e,n=!1){const r=this.leaves,i=this.getById(e);let o=r.indexOf(i);if(o>=r.length-1){if(!n)return null;o=-1}return r[o+1]}getPrevLeaf(e,n=!1){const r=this.leaves,i=this.getById(e);let o=r.indexOf(i);if(0===o){if(!n)return null;o=r.length}return r[o-1]}getAdjacentLeaf(e,n=!0,r=!1){return n?this.getNextLeaf(e,r):this.getPrevLeaf(e,r)}};yi.initClass(),yi._$name="Store";var processParamEntry=(e,n)=>(Array.isArray(n[1])?n[1].forEach((r=>e.push(encodeURIComponent(n[0])+"="+encodeURIComponent(r)))):e.push(encodeURIComponent(n[0])+"="+encodeURIComponent(n[1])),e),wi=Promise.resolve(),prependZeros=e=>String(e).padStart(2,"0"),Ci=class extends yi{static get defaultConfig(){return{headers:null,fetchOptions:null,sendAsFormData:null,writeAllFields:null,parentIdParamName:"id",responseSuccessProperty:"success",responseDataProperty:"data",responseTotalProperty:"total",filterParamName:null,restfulFilter:!1,sortParamName:null,pageParamName:null,pageStartParamName:null,pageSizeParamName:"pageSize",pageSize:50,useRestfulMethods:null,httpMethods:{create:"POST",read:"GET",update:"PUT",delete:"DELETE"}}}static get configurable(){return{params:null}}afterConstruct(e){super.afterConstruct(e),this.autoLoad&&this.load().catch((()=>{}))}get isLoading(){return this._isLoading?2:!!this.loadTriggerPromise&&1}get isCommitting(){return Boolean(this.commitPromise)}set pageParamName(e){if(this.tree)throw new Error("Paging cannot be supported for tree stores");if(this.pageStartParamName)throw new Error("Configs pageStartParamName and pageParamName are mutually exclusive");this._pageParamName=e}get pageParamName(){return this._pageParamName}set pageStartParamName(e){if(this.tree)throw new Error("Paging cannot be supported for tree stores");if(this.pageParamName)throw new Error("Configs pageParamName and pageStartParamName are mutually exclusive");this._pageStartParamName=e}get pageStartParamName(){return this._pageStartParamName}get isPaged(){return this.pageParamName||this.pageStartParamName}get allCount(){return"remoteTotal"in this?this.remoteTotal:super.allCount}get lastPage(){if(this.isPaged)return Math.floor((this.allCount+this.pageSize-1)/this.pageSize)}buildQueryString(e,...n){const r=e.includes("?"),i=Object.entries(Object.assign({},...n)).reduce(processParamEntry,[]).join("&");return i?(r?"&":"?")+i:""}async performSort(e){const n=this;if(n.remoteSort&&!n.isRemoteDataLoading){n.isRemoteDataLoading=!0;const r=await n.internalLoad({},"",(r=>{n.data=r.data,n.afterPerformSort(e)}));return n.isRemoteDataLoading=!1,r}super.performSort(e)}async performFilter(e){var n;const r=this;if(r.remoteFilter){null==(n=r.loadingPromise)||n.abort(),r.isRemoteDataLoading=!0;const i=r.count,{filters:o}=r;r.currentPage=1;const s=await r.internalLoad({},"",(n=>{r.data=n.data,n=e?null:{action:"filter",filters:o,oldCount:i,records:r.storage.values},r.afterPerformFilter(n),r.trigger("refresh",n)}));return r.isRemoteDataLoading=!1,s}super.performFilter(e)}encodeFilterParams(e){const n=[];for(const{property:r,operator:i,value:o,caseSensitive:s}of e)n.push({field:r,operator:i,value:o,caseSensitive:s});return JSON.stringify(n,(function(e,n){return""===e?n:this[e]instanceof Date?`${(r=this[e]).getFullYear()}-${prependZeros(r.getMonth()+1)}-${prependZeros(r.getDate())}T${prependZeros(r.getHours())}:${prependZeros(r.getMinutes())}:${prependZeros(r.getSeconds())}.${r.getMilliseconds()}`:n;var r}))}encodeSorterParams(e){return JSON.stringify(e.filter((e=>!e.sortFn)).map((e=>e)))}buildReadUrl(){const{readUrl:e}=this;if(this.restfulFilter&&this.filters.count){return(e.endsWith("/")?e:e+"/")+this.filters.first.value}return e}internalLoad(e,n,r,i=0){e=Et.assign({},this.params,e);const o=this,s=o.buildReadUrl(),a={action:"read"+n,params:e,url:s};if(!s)throw new Error("No load url specified");if(!1===o.trigger("beforeLoad"+n,a))throw!1;return o.loadArgs=[s,a,e,n,r],!1===i?new Promise(((e,n)=>o.sendLoadRequest(e,n))):o.loadTriggerPromise||(o.loadTriggerPromise=new Promise(((e,n)=>{o.setTimeout({delay:i,fn:"sendLoadRequest",args:[e,n],cancelOutstanding:!0})})))}async sendLoadRequest(e,n){const r=this,[i,o,s,a,l]=r.loadArgs;if(r.loadTriggerPromise=null,i){if(r._isLoading=!0,r.trigger(`load${a}Start`,o),r.trigger("beforeRequest",o),r.filterParamName&&r.isFiltered&&(s[r.filterParamName]=r.encodeFilterParams(r.filters.values)),r.remoteSort&&r.isSorted&&(s[r.sortParamName]=r.encodeSorterParams(r.groupers?r.groupers.concat(r.sorters):r.sorters)),r.isPaged){if(!(r.pageParamName in s)&&!(r.pageStartParamName in s)){const e=Math.min(r.currentPage||1,r.allCount?r.lastPage:1/0);r.pageParamName?s[r.pageParamName]=e:s[r.pageStartParamName]=(e-1)*r.pageSize}s[r.pageSizeParamName]=r.pageSize}const i={headers:r.headers,parseJson:!0};r.useRestfulMethods&&(i.method=r.httpMethods.read,o.body&&(i.body=JSON.stringify(o.body)));try{const c=r.loadingPromise=Fe.get(o.url+r.buildQueryString(o.url,s),Et.assign(i,r.fetchOptions)),d=await c,u=d.parsedJson,h=Array.isArray(u),g=h||u&&!1!==Et.getPath(u,r.responseSuccessProperty),p=h?null:Et.getPath(u,r.responseTotalProperty);if(r.isDestroyed)return;if(r.loadingPromise=null,r._isLoading=!1,o.response=d,o.json=u,g){if(null!=p&&(r.remoteTotal=parseInt(p,10)),r.isPaged){if(!(r.remoteTotal>=0))throw new Error("A paged store must receive its responseTotalProperty in each data packet");{const e=r.pageParamName?s[r.pageParamName]:s[r.pageStartParamName]/r.pageSize+1;r.currentPage=Math.min(e,r.lastPage)}}o.data=h?u:Et.getPath(u,r.responseDataProperty),await l(o),!r.isDestroyed&&r.trigger("load"+a,o),e(o)}else Object.assign(o,{exception:!0,exceptionType:"server",error:null==u?void 0:u.error}),!r.isDestroyed&&r.trigger("exception",o),n(o);!r.isDestroyed&&r.trigger("afterRequest",o)}catch(e){r._isLoading=!1,o.exception=!0,e instanceof Response?(o.exceptionType=e.ok?"server":"network",o.response=e,o.error=e.error):(o.exceptionType="server",o.error=e),!r.isDestroyed&&r.trigger("exception",o),n(o),!r.isDestroyed&&r.trigger("afterRequest",o)}}}async load(e){const n=this;return n.isPaged?n.loadPage(n.currentPage||1,e):n.internalLoad(e,"",(e=>{n.data=e.data}))}async loadChildren(e){return this.readUrl?this.internalLoad({[this.parentIdParamName]:e.id},"Children",(n=>{n.parentRecord=e,e.children.length&&e.clearChildren(!0),e.data[e.constructor.childrenField]=n.data,e.processChildren(e.stores)}),!1):this.immediatePromise}async loadPage(e,n){this.allCount&&(e=Math.min(e,this.lastPage));const r=this,i=r.pageParamName?{[r.pageParamName]:e}:{[r.pageStartParamName]:(e-1)*r.pageSize};return i[r.pageSizeParamName]=r.pageSize,r.internalLoad(Et.assign(i,n),"Page",(e=>{r.loadData(e.data,"pageLoad")}))}async nextPage(e){const n=this;return n.isPaged&&n.currentPage!==n.lastPage?n.loadPage(n.currentPage+1,e):wi}async previousPage(e){return this.isPaged&&1!==this.currentPage?this.loadPage(this.currentPage-1,e):wi}async commit(){const e=this,{changes:n}=e,r=[];if(e.commitPromise)return!1;if(!n)return e.modified.count&&(e.modified.forEach((e=>e.clearChanges(!0,!1))),e.modified.clear()),wi;if(!1!==e.trigger("beforeCommit",{changes:n})){[...n.added,...n.modified,...n.removed].forEach((e=>e.meta.committing=!0)),e.trigger("commitStart",{changes:n});const i={action:"commit",exception:!1,changes:n};let o=e.commitRemoved(i);return o&&r.push(o),o=e.commitAdded(i),o&&r.push(o),o=e.commitModified(i),o&&r.push(o),r.length?(o=1===r.length?r[0]:Promise.all(r),e.commitPromise=new Promise(((r,s)=>{o.then((()=>{e.commitPromise=null,i.exception?(e.trigger("exception",i),s(i)):(e.trigger("commit",{changes:n}),r(i))})).catch((()=>{e.commitPromise=null,s(i)}))}))):(e.modified.forEach((e=>e.clearChanges(!0,!1))),e.modified.clear(),e.added.forEach((e=>e.clearChanges(!0,!1))),e.added.clear(),e.removed.clear(),e.trigger("commit",{changes:n}),wi)}}doAutoCommit(){this.suspendCount<=0&&this.commit().catch((e=>{const{response:n}=e;if(!n||!(n.ok&&n.parsedJson||[500,404].includes(n.status)))throw e}))}commitAdded(e){const n=this,r=n.added,i={action:"create",params:n.params};return r.count&&n.createUrl?new Promise((o=>{const s=r.values.map((e=>e.persistableData));e.create=i,i.body={data:s},n.trigger("beforeRequest",i);let a=i.body;if(n.sendAsFormData){const e=new FormData;e.append("data",JSON.stringify(s)),a=e}const l={headers:n.headers,parseJson:!0},c=n.createUrl+n.buildQueryString(n.createUrl,n.params);n.useRestfulMethods&&(l.method=n.httpMethods.create),Fe.post(c,a,Et.assign(l,n.fetchOptions)).then((s=>{const a=s.parsedJson,l=Array.isArray(a),c=l||a&&!1!==a.success;e.response=s,i.json=a,i.response=s,c?(n.processReturnedData(r.values,l?a:Et.getPath(a,n.responseDataProperty)),r.clear(),n.trigger("commitAdded"),n.trigger("refresh",i),o(e)):(r.forEach((e=>e.meta.committing=!1)),e.exception=i.exception=!0,e.exceptionType=i.exceptionType="server",n.trigger("exception",i),o(e)),n.trigger("afterRequest",i)})).catch((s=>{r.forEach((e=>e.meta.committing=!1)),e.exception=i.exception=!0,s instanceof Response?(e.response=s,i.exceptionType=s.ok?"server":"network",i.response=s,i.error=s.error):(i.exceptionType="server",i.error=s),n.trigger("exception",i),o(e),n.trigger("afterRequest",i)}))})):null}commitModified(e){const n=this,{modified:r}=n.changes,i={action:"update",params:n.params},o=r.length&&n.updateUrl?new Promise((o=>{const s=r.map((e=>n.writeAllFields?e.persistableData:e.modificationDataToWrite)).filter((e=>!Et.isEmpty(e)));if(0===s.length)return n.modified.clear(),r.forEach((e=>e.meta.committing=!1)),void o();e.update=i,i.body={data:s},n.trigger("beforeRequest",i);let a=i.body;if(n.sendAsFormData){const e=new FormData;e.append("data",JSON.stringify(s)),a=e}const l={headers:n.headers,parseJson:!0};n.useRestfulMethods&&(l.method=n.httpMethods.update),Fe.post(n.updateUrl+n.buildQueryString(n.updateUrl,n.params),a,Et.assign(l,n.fetchOptions)).then((s=>{const a=s.parsedJson,l=Array.isArray(a),c=l||a&&!1!==a.success;e.response=s,i.json=a,i.response=s,c?(n.processReturnedData(r,l?a:Et.getPath(a,n.responseDataProperty),!0),n.modified.clear(),n.trigger("commitModified"),n.trigger("refresh",i),o(e)):(r.forEach((e=>e.meta.committing=!1)),e.exception=i.exception=!0,i.exceptionType="server",n.trigger("exception",i),o(e)),n.trigger("afterRequest",i)})).catch((s=>{r.forEach((e=>e.meta.committing=!1)),e.exception=i.exception=!0,s instanceof Response?(e.response=s,i.exceptionType=s.ok?"server":"network",i.response=s,i.error=s.error):(i.exceptionType="server",i.error=s),n.trigger("exception",i),o(e),n.trigger("afterRequest",i)}))})):null;return!r.length&&n.modified.count&&n.modified.clear(),o}processReturnedData(e,n,r=!1){const i=this,o=i.modelClass,s=o.fieldMap.id.dataSource;n.forEach(((n,a)=>{const l=e[a];l.clearChanges(!0,!1),l.syncId(n[s]),Object.assign(e[a].data,o.processData(n,r,i,l))}))}commitRemoved(e){const n=this,r=n.removed,i={action:"delete",params:n.params};return r.count&&n.deleteUrl?new Promise((o=>{e.delete=i,i.body={ids:r.map((e=>e.id))},n.trigger("beforeRequest",i);let s=i.body;if(n.sendAsFormData){const e=new FormData;e.append("id",JSON.stringify(s.ids)),s=e}const a={headers:n.headers,parseJson:!0};n.useRestfulMethods&&(a.method=n.httpMethods.delete),Fe.post(n.deleteUrl+n.buildQueryString(n.deleteUrl,n.params),s,Et.assign(a,n.fetchOptions)).then((s=>{const a=s.parsedJson,l=Array.isArray(a)||a&&!1!==a.success;e.response=s,i.json=a,i.response=s,l?(r.forEach((e=>e.meta.committing=!1)),r.clear(),n.trigger("commitRemoved"),n.trigger("refresh",i),o(e)):(r.forEach((e=>e.meta.committing=!1)),e.exception=i.exception=!0,i.exceptionType="server",n.trigger("exception",i),o(e)),n.trigger("afterRequest",i)})).catch((s=>{r.forEach((e=>e.meta.committing=!1)),e.exception=i.exception=!0,s instanceof Response?(e.response=s,i.exceptionType=s.ok?"server":"network",i.response=s,i.error=s.error):(i.exceptionType="server",i.error=s),n.trigger("exception",i),o(e),n.trigger("afterRequest",i)}))})):null}get remoteFilter(){return Boolean(this.filterParamName||this.restfulFilter)}get remoteSort(){return Boolean(this.sortParamName)}};__publicField(Ci,"$name","AjaxStore"),Ci._$name="AjaxStore";var Si=class{static get(e,n){const r=e._domData||(e._domData={});return null!=n?r[n]:r}static remove(e,n){const{_domData:r}=e,i=null==r?void 0:r[n];return null==r||delete r[n],i}static set(e,n,r){3===arguments.length?(e._domData||(e._domData={}))[n]=r:e._domData=n}static assign(e,n){Object.assign(e._domData||(e._domData={}),n)}};Si._$name="DomDataStore";var throwAbstractMethodCall=()=>{throw new Error("Abstract method call!")},xi=class extends re{get type(){return this.constructor.name}undo(){throwAbstractMethodCall()}redo(){throwAbstractMethodCall()}};xi._$name="ActionBase";var throwAbstractMethodCall2=()=>{throw new Error("Abstract method call!")},throwInvalidMethodCall=()=>{throw new Error("Method cannot be called at this state!")},Di=class extends re{canUndo(e){throwAbstractMethodCall2()}canRedo(e){throwAbstractMethodCall2()}onUndo(e){throwAbstractMethodCall2()}onRedo(e){throwAbstractMethodCall2()}onStartTransaction(e){throwAbstractMethodCall2()}onStopTransaction(e){throwAbstractMethodCall2()}onStopTransactionDelayed(e){throwAbstractMethodCall2()}onRejectTransaction(e){throwAbstractMethodCall2()}onEnable(e){throwAbstractMethodCall2()}onDisable(e){throwAbstractMethodCall2()}onAutoRecordOn(e){throwAbstractMethodCall2()}onAutoRecordOff(e){throwAbstractMethodCall2()}onResetQueue(e){throwAbstractMethodCall2()}onModelUpdate(e){throwAbstractMethodCall2()}onStoreModelAdd(e){throwAbstractMethodCall2()}onStoreModelInsert(e){throwAbstractMethodCall2()}onStoreModelRemove(e){throwAbstractMethodCall2()}onStoreModelRemoveAll(e){throwAbstractMethodCall2()}onModelInsertChild(e){throwAbstractMethodCall2()}onModelRemoveChild(e){throwAbstractMethodCall2()}};Di._$name="StateBase";var Ei=Symbol("STATE_PROP"),Ri=Symbol("STORES_PROP"),ki=Symbol("QUEUE_PROP"),Ti=Symbol("POS_PROP"),Mi=Symbol("TRANSACTION_PROP"),Ai=Symbol("TRANSACTION_TIMER_PROP"),Ii=Symbol("AUTO_RECORD_PROP"),Fi=(Object.freeze([Ei,Ri,ki,Ti,Mi,Ai,Ii]),new Map),Registry_default_registerStmState=(e,n)=>{Fi.set(e,n)},Registry_default_resolveStmState=e=>("string"==typeof e&&(e=Fi.get(e)),e),resetQueue=(e,n)=>{const{undo:r,redo:i}=n;let o;return o=r&&!i?{[ki]:e[ki].slice(e.position),[Ti]:0}:i&&!r?{[ki]:e[ki].slice(0,e.position)}:{[ki]:[],[Ti]:0},[o,()=>{e.notifyStoresAboutQueueReset(n)}]},Pi=new class extends Di{canUndo(){return!1}canRedo(){return!1}onUndo(){throwInvalidMethodCall()}onRedo(){throwInvalidMethodCall()}onEnable(e){return e.autoRecord?"autoreadystate":"readystate"}onDisable(){throwInvalidMethodCall()}onAutoRecordOn(){return{[Ii]:!0}}onAutoRecordOff(){return{[Ii]:!1}}onStartTransaction(){throwInvalidMethodCall()}onStopTransaction(){throwInvalidMethodCall()}onStopTransactionDelayed(){throwInvalidMethodCall()}onRejectTransaction(){throwInvalidMethodCall()}onResetQueue(e,n){return resetQueue(e,n)}onModelUpdate(){}onModelInsertChild(){}onModelRemoveChild(){}onStoreModelAdd(){}onStoreModelInsert(){}onStoreModelRemove(){}onStoreRemoveAll(){}},Oi=Pi;Registry_default_registerStmState("disabledstate",Pi);var Li=Symbol("ACTION_QUEUE_PROP"),_i=class extends re{get defaultConfig(){return{title:null}}construct(...e){this[Li]=[],super.construct(...e)}get queue(){return this[Li].slice(0)}get length(){return this[Li].length}addAction(e){this[Li].push(e)}undo(){const e=this[Li];for(let n=e.length-1;n>=0;--n)e[n].undo()}redo(){const e=this[Li];for(let n=0,r=e.length;n<r;++n)e[n].redo()}};_i._$name="Transaction";var $i=class extends Di{canUndo(e){return 0<e.position&&e.position<=e.length}canRedo(e){return 0<=e.position&&e.position<e.length}onUndo(e,n){let r=e.position;const i=e[ki],o=Math.max(0,r-n);return[{[Ei]:"restoringstate",[Ti]:o},()=>{e.notifyStoresAboutStateRestoringStart();const n=[];for(;r!==o;){const e=i[--r];e.undo(),n.push(e)}return[e.autoRecord?"autoreadystate":"readystate",()=>{e.notifyStoresAboutStateRestoringStop({cause:"undo",transactions:n})}]}]}onRedo(e,n){let r=e.position;const i=e[ki],o=Math.min(i.length,r+n);return[{[Ei]:"restoringstate",[Ti]:o},()=>{e.notifyStoresAboutStateRestoringStart();const n=[];do{const e=i[r++];e.redo(),n.push(e)}while(r!==o);return[e.autoRecord?"autoreadystate":"readystate",()=>{e.notifyStoresAboutStateRestoringStop({cause:"redo",transactions:n})}]}]}onEnable(){throwInvalidMethodCall()}onDisable(){return"disabledstate"}onAutoRecordOn(){return{[Ei]:"autoreadystate",[Ii]:!0}}onAutoRecordOff(){throwInvalidMethodCall()}onStartTransaction(e,n){const r=new _i({title:n});return[{[Ei]:"recordingstate",[Mi]:r},()=>{e.notifyStoresAboutStateRecordingStart(r)}]}onStopTransaction(){throwInvalidMethodCall()}onStopTransactionDelayed(){throwInvalidMethodCall()}onRejectTransaction(){throwInvalidMethodCall()}onResetQueue(e,n){return resetQueue(e,n)}onModelUpdate(){}onModelInsertChild(){}onModelRemoveChild(){}onStoreModelAdd(){}onStoreModelInsert(){}onStoreModelRemove(){}onStoreRemoveAll(){}},ji=new $i,zi=ji;Registry_default_registerStmState("readystate",ji);var Bi=class extends Di{canUndo(){return!1}canRedo(){return!1}onEnable(){}onDisable(e){const n=e[Mi];return e.notifyStoresAboutStateRecordingStop(n,{disabled:!0}),{[Ei]:"disabledstate",[Mi]:null}}onAutoRecordOn(e){return[{[Ei]:"autorecordingstate",[Ii]:!0},()=>{e.stopTransactionDelayed()}]}onAutoRecordOff(){throwInvalidMethodCall()}onStartTransaction(){throwInvalidMethodCall()}onStopTransaction(e,n){const r=e[Mi],i=e[ki];let o=e[Ti];return r.length&&(r.title||n||!e.getTransactionTitle?n&&(r.title=n):r.title=e.getTransactionTitle(r),i[o]=r,i.length=++o),[{[Ei]:"readystate",[Ti]:o,[Mi]:null},()=>{e.notifyStoresAboutStateRecordingStop(r,{stop:!0})}]}onRejectTransaction(e){const n=e[Mi];return[{[Ei]:"restoringstate",[Mi]:null},()=>(n.length&&n.undo(),["readystate",()=>{e.notifyStoresAboutStateRecordingStop(n,{rejected:!0})}])]}onStopTransactionDelayed(){throwInvalidMethodCall()}onResetQueue(e,n){return resetQueue(e,n)}onModelUpdate(e,n,r,i,o){e[Mi].addAction(e.makeModelUpdateAction(n,r,i,o))}onModelInsertChild(e,n,r,i,o,s){e[Mi].addAction(e.makeModelInsertChildAction(n,r,i,o,s))}onModelRemoveChild(e,n,r,i){e[Mi].addAction(e.makeModelRemoveChildAction(n,r,i))}onStoreModelAdd(e,n,r,i){e[Mi].addAction(e.makeStoreModelAddAction(n,r,i))}onStoreModelInsert(e,n,r,i,o,s){e[Mi].addAction(e.makeStoreModelInsertAction(n,r,i,o,s))}onStoreModelRemove(e,n,r,i,o){e[Mi].addAction(e.makeStoreModelRemoveAction(n,r,i,o))}onStoreRemoveAll(e,n,r,i){e[Mi].addAction(e.makeStoreRemoveAllAction(n,r,i))}},Hi=new Bi,Vi=Hi;Registry_default_registerStmState("recordingstate",Hi);var Ni=new class extends Di{static get $name(){return"RestoringStateClass"}canUndo(){return!1}canRedo(){return!1}onUndo(){throwInvalidMethodCall()}onRedo(){throwInvalidMethodCall()}onEnable(){throwInvalidMethodCall()}onDisable(){throwInvalidMethodCall()}onAutoRecordOn(){return{[Ii]:!0}}onAutoRecordOff(){return{[Ii]:!1}}onStartTransaction(){throwInvalidMethodCall()}onStopTransaction(){throwInvalidMethodCall()}onStopTransactionDelayed(){throwInvalidMethodCall()}onRejectTransaction(){throwInvalidMethodCall()}onQueueReset(){throwInvalidMethodCall()}onModelUpdate(){}onModelInsertChild(){}onModelRemoveChild(){}onStoreModelAdd(){}onStoreModelInsert(){}onStoreModelRemove(){}onStoreRemoveAll(){}},qi=Ni;Registry_default_registerStmState("restoringstate",Ni);var Wi=new class extends $i{onAutoRecordOn(){throwInvalidMethodCall()}onAutoRecordOff(){return{[Ei]:"readystate",[Ii]:!1}}onStartTransaction(e,n){const r=new _i({title:n});return[{[Ei]:"autorecordingstate",[Mi]:r},()=>{e.notifyStoresAboutStateRecordingStart(r),e.stopTransactionDelayed()}]}onModelUpdate(e,n,r,i){e.startTransaction(),e.onModelUpdate(n,r,i)}onModelInsertChild(e,n,r,i,o){e.startTransaction(),e.onModelInsertChild(n,r,i,o)}onModelRemoveChild(e,n,r,i){e.startTransaction(),e.onModelRemoveChild(n,r,i)}onStoreModelAdd(e,n,r,i){e.startTransaction(),e.onStoreModelAdd(n,r,i)}onStoreModelInsert(e,n,r,i,o,s){e.startTransaction(),e.onStoreModelInsert(n,r,i,o,s)}onStoreModelRemove(e,n,r,i,o){e.startTransaction(),e.onStoreModelRemove(n,r,i,o)}onStoreRemoveAll(e,n,r,i){e.startTransaction(),e.onStoreRemoveAll(n,r,i)}},Ui=Wi;Registry_default_registerStmState("autoreadystate",Wi);var Gi=new class extends(Bi.mixin(Delayable_default)){onDisable(e){const n=e[Mi],r=e[Ai];return r&&this.clearTimeout(r),e.notifyStoresAboutStateRecordingStop(n,{disabled:!0}),{[Ei]:"disabledstate",[Mi]:null,[Ai]:null}}onAutoRecordOn(e){throwInvalidMethodCall()}onAutoRecordOff(e){const n=e[Ai];return n&&this.clearTimeout(n),{[Ei]:"recordingstate",[Ii]:!1,[Ai]:null}}onStopTransaction(e,n){const r=e[Mi],i=e[Ai],o=e[ki];let s=e[Ti];return i&&this.clearTimeout(i),r.length&&(r.title||n||!e.getTransactionTitle?n&&(r.title=n):r.title=e.getTransactionTitle(r),o[s]=r,o.length=++s),[{[Ei]:"autoreadystate",[Ti]:s,[Mi]:null,[Ai]:null},()=>{e.notifyStoresAboutStateRecordingStop(r,{stop:!0})}]}onStopTransactionDelayed(e){let n=e[Ai];return n&&this.clearTimeout(n),n=this.setTimeout((()=>{e.stopTransaction()}),e.autoRecordTransactionStopTimeout),{[Ei]:Gi,[Ai]:n}}onResetQueue(e,n){return resetQueue(e,n)}onRejectTransaction(e){const n=e[Mi],r=e[Ai];return r&&this.clearTimeout(r),[{[Ei]:"restoringstate",[Mi]:null,[Ai]:null},()=>(n.length&&n.undo(),["autoreadystate",()=>{e.notifyStoresAboutStateRecordingStop(n,{rejected:!0})}])]}onModelUpdate(e,...n){super.onModelUpdate(e,...n),e.stopTransactionDelayed()}onModelInsertChild(e,...n){super.onModelInsertChild(e,...n),e.stopTransactionDelayed()}onModelRemoveChild(e,...n){super.onModelRemoveChild(e,...n),e.stopTransactionDelayed()}onStoreModelAdd(e,...n){super.onStoreModelAdd(e,...n),e.stopTransactionDelayed()}onStoreModelInsert(e,...n){super.onStoreModelInsert(e,...n),e.stopTransactionDelayed()}onStoreModelRemove(e,...n){super.onStoreModelRemove(e,...n),e.stopTransactionDelayed()}onStoreRemoveAll(e,...n){super.onStoreRemoveAll(e,...n),e.stopTransactionDelayed()}},Yi=Gi;Registry_default_registerStmState("autorecordingstate",Gi);var Ki=Symbol("MODEL_PROP"),Xi=Symbol("NEW_DATA_PROP"),Zi=Symbol("OLD_DATA_PROP"),Qi=class extends xi{static get defaultConfig(){return{model:void 0,newData:void 0,oldData:void 0,isInitialUserAction:!1}}get type(){return"UpdateAction"}get model(){return this[Ki]}set model(e){this[Ki]=e}get newData(){return this[Xi]}set newData(e){this[Xi]={...e}}get oldData(){return this[Zi]}set oldData(e){this[Zi]={...e}}undo(){const{model:e,oldData:n}=this;e.$&&Object.assign(e,n),e.set(n,null,null,null,Boolean(e.$))}redo(){const{model:e,newData:n}=this;e.$&&Object.assign(e,n),e.set(n,null,null,null,Boolean(e.$))}};Qi._$name="UpdateAction";var Ji=Symbol("PARENT_MODEL_PROP"),eo=Symbol("CHILD_MODELS_PROP"),to=Symbol("INSERT_INDEX_PROP"),no=Symbol("CONTEXT_PROP"),ro=class extends xi{static get defaultConfig(){return{parentModel:void 0,childModels:void 0,insertIndex:void 0,context:void 0}}get type(){return"InsertChildAction"}get parentModel(){return this[Ji]}set parentModel(e){this[Ji]=e}get childModels(){return this[eo]}set childModels(e){this[eo]=e.slice(0)}get insertIndex(){return this[to]}set insertIndex(e){this[to]=e}get context(){return this[no]}set context(e){this[no]=e}undo(){const{parentModel:e,context:n,childModels:r}=this,i=new Map,o=new Set;for(const s of r){const r=n.get(s);if(r){let n=i.get(r.parent);n||(n={moveRight:[],moveLeft:[],moveFromAnotherParent:[]},i.set(r.parent,n)),r.parent===e?r.index>s.parentIndex?n.moveRight.push({parent:r.parent,model:s,index:r.index+1}):n.moveLeft.push({parent:r.parent,model:s,index:r.index}):n.moveFromAnotherParent.push({parent:r.parent,model:s,index:r.index})}else o.add(s)}for(const e of i.values()){const{moveRight:n,moveLeft:r}=e;r.sort(((e,n)=>e.index-n.index)),n.sort(((e,n)=>n.index-e.index))}o.forEach((e=>e.parent.removeChild(e)));for(const e of i.values()){const{moveRight:n,moveLeft:r,moveFromAnotherParent:i}=e;r.forEach((e=>{e.parent.insertChild(e.model,e.index)})),n.forEach((e=>{e.parent.insertChild(e.model,e.index)})),i.forEach((e=>{e.parent.insertChild(e.model,e.index)}))}}redo(){const{parentModel:e,insertIndex:n,childModels:r}=this;e.insertChild(r,n)}};ro._$name="InsertChildAction";var io=Symbol("PARENT_MODEL_PROP"),oo=Symbol("CHILD_MODELS_PROP"),so=Symbol("CONTEXT_PROP"),ao=class extends xi{static get defaultConfig(){return{parentModel:void 0,childModels:void 0,context:void 0}}get type(){return"RemoveChildAction"}get parentModel(){return this[io]}set parentModel(e){this[io]=e}get childModels(){return this[oo]}set childModels(e){this[oo]=e.slice(0)}get context(){return this[so]}set context(e){this[so]=e}undo(){const{parentModel:e,context:n,childModels:r}=this;r.sort(((e,r)=>n.get(e)-n.get(r))),r.forEach((r=>{e.insertChild(r,n.get(r))}))}redo(){this.parentModel.removeChild(this.childModels)}};ao._$name="RemoveChildAction";var lo=Symbol("STORE_PROP"),co=Symbol("MODEL_LIST_PROP"),uo=class extends xi{static get defaultConfig(){return{store:void 0,modelList:void 0,silent:!1}}get type(){return"AddAction"}get store(){return this[lo]}set store(e){this[lo]=e}get modelList(){return this[co]}set modelList(e){this[co]=e.slice(0)}undo(){this.store.remove(this.modelList,this.silent)}redo(){this.store.add(this.modelList,this.silent)}};uo._$name="AddAction";var ho=Symbol("STORE_PROP"),go=Symbol("MODEL_LIST_PROP"),po=Symbol("INSERT_INDEX_PROP"),mo=Symbol("CONTEXT_PROP"),fo=class extends xi{static get defaultConfig(){return{store:void 0,modelList:void 0,insertIndex:void 0,context:void 0,silent:!1}}get type(){return"InsertAction"}get store(){return this[ho]}set store(e){this[ho]=e}get modelList(){return this[go]}set modelList(e){this[go]=e.slice(0)}get insertIndex(){return this[po]}set insertIndex(e){this[po]=e}get context(){return this[mo]}set context(e){this[mo]=e}undo(){const{store:e,modelList:n,context:r,silent:i}=this;n.sort(((e,n)=>{const i=r.get(e),o=r.get(n);return void 0!==i&&void 0!==o?i-o:0})),n.forEach((n=>{const o=r.get(n);n._undoingInsertion=!0,void 0!==o?e.insert(o,n,i):e.remove(n,i),n._undoingInsertion=!1}))}redo(){const e=this;e.store.insert(e.insertIndex,e.modelList,e.silent)}};fo._$name="InsertAction";var bo=Symbol("STORE_PROP"),vo=Symbol("MODEL_LIST_PROP"),yo=Symbol("CONTEXT_PROP"),wo=class extends xi{static get defaultConfig(){return{store:void 0,modelList:void 0,context:void 0,silent:!1}}get type(){return"RemoveAction"}get store(){return this[bo]}set store(e){this[bo]=e}get modelList(){return this[vo]}set modelList(e){this[vo]=e.slice(0)}get context(){return this[yo]}set context(e){this[yo]=e}undo(){const{store:e,context:n,modelList:r,silent:i}=this;r.sort(((e,r)=>n.get(e)-n.get(r))),r.forEach((r=>{const o=n.get(r);e.insert(o,r,i)}))}redo(){this.store.remove(this.modelList,this.silent)}};wo._$name="RemoveAction";var Co=Symbol("STORE_PROP"),So=Symbol("ALL_RECORDS_PROP"),xo=class extends xi{static get defaultConfig(){return{store:void 0,allRecords:void 0,silent:!1}}get type(){return"RemoveAllAction"}get store(){return this[Co]}set store(e){this[Co]=e}get allRecords(){return this[So]}set allRecords(e){this[So]=e.slice(0)}undo(){const{store:e,allRecords:n,silent:r}=this;e.add(n,r)}redo(){this.store.removeAll(this.silent)}};xo._$name="RemoveAllAction";var makeModelUpdateAction=(e,n,r,i)=>new Qi({model:e,newData:n,oldData:r,isInitialUserAction:i}),makeModelInsertChildAction=(e,n,r,i)=>new ro({parentModel:e,childModels:r,insertIndex:n,context:i}),makeModelRemoveChildAction=(e,n,r)=>new ao({parentModel:e,childModels:n,context:r}),makeStoreModelAddAction=(e,n,r)=>new uo({store:e,modelList:n,silent:r}),makeStoreModelInsertAction=(e,n,r,i,o)=>new fo({store:e,insertIndex:n,modelList:r,context:i,silent:o}),makeStoreModelRemoveAction=(e,n,r,i)=>new wo({store:e,modelList:n,context:r,silent:i}),makeStoreRemoveAllAction=(e,n,r)=>new xo({store:e,allRecords:n,silent:r}),stateTransition=(e,n,...r)=>{const i=e.state,o=n.call(e[Ei],e,...r);if("string"==typeof o)e[Ei]=Registry_default_resolveStmState(o);else if(o instanceof Di)e[Ei]=o;else if(Array.isArray(o)){const[n,i]=o;"string"==typeof n?e[Ei]=Registry_default_resolveStmState(n):n instanceof Di?e[Ei]=n:n&&"object"==typeof n&&((e=Object.assign(e,n))[Ei]=Registry_default_resolveStmState(e[Ei])),"function"==typeof i&&stateTransition(e,i,...r)}else o&&"object"==typeof o&&((e=Object.assign(e,o))[Ei]=Registry_default_resolveStmState(e[Ei]));i!==zi&&i!==Ui&&o!==zi&&o!==Ui&&e.trigger("ready")},Do=class extends(Events_default(re)){static get defaultConfig(){return{disabled:!0,autoRecord:!1,autoRecordTransactionStopTimeout:100,makeModelUpdateAction,makeModelInsertChildAction,makeModelRemoveChildAction,makeStoreModelAddAction,makeStoreModelInsertAction,makeStoreModelRemoveAction,makeStoreRemoveAllAction,getTransactionTitle:null}}construct(...e){Object.assign(this,{[Ei]:zi,[Ri]:[],[ki]:[],[Ti]:0,[Mi]:null,[Ai]:null,[Ii]:!1}),super.construct(...e)}get state(){return this[Ei]}get position(){return this[Ti]}get length(){return this[ki].length}get stores(){return Array.from(this[Ri])}hasStore(e){return this[Ri].includes(e)}addStore(e){this.hasStore(e)||(this[Ri].push(e),e.stm=this)}removeStore(e){this.hasStore(e)&&(this[Ri]=this[Ri].filter((n=>n!==e)),e.stm=null)}forEachStore(e){this[Ri].forEach((n=>e(n,n.id)))}get disabled(){return this.state===Oi}set disabled(e){const n=this;n.disabled!==e&&(stateTransition(n,e?n.state.onDisable:n.state.onEnable,n),n.trigger("stmDisabled",{disabled:e}),n.trigger("disabled",{disabled:e}))}get enabled(){return!this.disabled}enable(){this.disabled=!1}disable(){this.disabled=!0}get isReady(){return this.state===zi||this.state===Ui}waitForReadiness(){return this.await("ready",!1)}get isRecording(){return this.state===Vi||this.state===Yi}get autoRecord(){return this[Ii]}set autoRecord(e){const n=this;n.autoRecord!=e&&stateTransition(n,e?n.state.onAutoRecordOn:n.state.onAutoRecordOff,n)}startTransaction(e=null){stateTransition(this,this.state.onStartTransaction,e)}stopTransaction(e=null){stateTransition(this,this.state.onStopTransaction,e)}stopTransactionDelayed(){stateTransition(this,this.state.onStopTransactionDelayed)}rejectTransaction(){stateTransition(this,this.state.onRejectTransaction)}get transaction(){return this[Mi]}get queue(){return this[ki].map((e=>e.title))}get rawQueue(){return this[ki]}get isRestoring(){return this.state===qi}get canUndo(){return this.state.canUndo(this)}get canRedo(){return this.state.canRedo(this)}async undo(e=1){this.isReady||await this.waitForReadiness(),stateTransition(this,this.state.onUndo,e)}async undoAll(){this.isReady||await this.waitForReadiness(),this.undo(this.length)}async redo(e=1){this.isReady||await this.waitForReadiness(),stateTransition(this,this.state.onRedo,e)}async redoAll(){this.isReady||await this.waitForReadiness(),this.redo(this.length)}resetQueue(e={undo:!0,redo:!0}){stateTransition(this,this.state.onResetQueue,e)}resetUndoQueue(){this.resetQueue({undo:!0})}resetRedoQueue(){this.resetQueue({redo:!0})}notifyStoresAboutStateRecordingStart(e){this.forEachStore((n=>{var r;return null==(r=n.onStmRecordingStart)?void 0:r.call(n,this,e)})),this.trigger("recordingStart",{stm:this,transaction:e})}notifyStoresAboutStateRecordingStop(e,n){this.forEachStore((r=>{var i;return null==(i=r.onStmRecordingStop)?void 0:i.call(r,this,e,n)})),this.trigger("recordingStop",{stm:this,transaction:e,reason:n})}notifyStoresAboutStateRestoringStart(){this.forEachStore((e=>{var n;return null==(n=e.onStmRestoringStart)?void 0:n.call(e,this)})),this.trigger("restoringStart",{stm:this})}notifyStoresAboutStateRestoringStop({cause:e,transactions:n}){this.forEachStore((e=>{var n;return null==(n=e.onStmRestoringStop)?void 0:n.call(e,this)})),this.trigger("restoringStop",{stm:this,cause:e,transactions:n})}notifyStoresAboutQueueReset(e){this.forEachStore((n=>{var r;return null==(r=n.onStmQueueReset)?void 0:r.call(n,this,e)})),this.trigger("queueReset",{stm:this,options:e})}onModelUpdate(e,n,r,i){stateTransition(this,this.state.onModelUpdate,e,n,r,i)}onModelInsertChild(e,n,r,i){stateTransition(this,this.state.onModelInsertChild,e,n,r,i)}onModelRemoveChild(e,n,r){stateTransition(this,this.state.onModelRemoveChild,e,n,r)}onStoreModelAdd(e,n,r){stateTransition(this,this.state.onStoreModelAdd,e,n,r)}onStoreModelInsert(e,n,r,i,o){stateTransition(this,this.state.onStoreModelInsert,e,n,r,i,o)}onStoreModelRemove(e,n,r,i){stateTransition(this,this.state.onStoreModelRemove,e,n,r,i)}onStoreRemoveAll(e,n,r){stateTransition(this,this.state.onStoreRemoveAll,e,n,r)}onUndoKeyPress(e){const n=this;n.enabled&&(e.shiftKey?n.canRedo&&(e.preventDefault(),n.redo()):n.canUndo&&(e.preventDefault(),n.undo()))}stash(){this.transaction&&(this.stashedTransaction=this.transaction,this.rejectTransaction())}applyStash(){this.stashedTransaction&&(this.startTransaction(this.stashedTransaction.title),this.stashedTransaction.redo(),delete this.stashedTransaction)}};Do._$name="StateTrackingManager";var Eo=Array.prototype.slice,Ro=Object.freeze([]),ko=Object.freeze({}),To=/[&<]/,{getPrototypeOf:Mo}=Object,{toString:Ao}=Object.prototype,{isEqual:Io,isObject:Fo}=Et,Po={parent:1,elementData:1,ns:1,syncOptions:1},makeCheckEqualityOptions=()=>({ignore:Po,refsFound:new Set}),Oo={class:1,className:1,classname:1},Lo={bigint:1,boolean:1,function:1,number:1,string:1,symbol:1},_o={tag:1,html:1,text:1,children:1,tooltip:1,parent:1,nextSibling:1,ns:1,reference:1,elementData:1,retainElement:1,compareHtml:1,syncOptions:1,listeners:1,isReleased:1,null:1,"":1,keepChildren:1},$o=class{static checkEquality(e,n,r,i){var o;if(e===n)return!0;if(null==e)return null==n;if(!e||!n)return!1;const s=typeof e;if(s!==typeof n||Lo[s])return!1;let a,l,c,d,u,h,g,p=r.equalityCache||(r.equalityCache=new Map),m=Boolean(i);if(p=p.get(e)||p.set(e,new Map).get(e),a=p.get(n),void 0===a){if(a=!0,Mo(e)!==Mo(n)||e instanceof Node)a=!1;else if(Array.isArray(e)){if(l=e.length,l!==n.length)a=!1;else for(;l-- >0;)if(!$o.checkEquality(e[l],n[l],r,m)){a=!1;break}}else{for(u in h=e.syncOptions,d=null==h?void 0:h.ignoreRefs,d&&(m=!0,i="children"!==d),c=r.ignore||ko,n)if(!(c[u]||u in e||i&&"reference"===u)){a=!1;break}if(a)if("[object Date]"===Ao.call(n))a=e.getTime()===n.getTime();else for(u in e)if(!(c[u]||i&&"reference"===u)){if(!(u in n)){a=!1;break}if(g=e[u],!$o.checkEquality(g,n[u],r,m)){a=!1;break}}}!i&&Fo(e)&&e.reference&&(null==(o=r.refsFound)||o.add(e.reference)),p.set(n,a)}return a}static sync(e){const n=e,{refOwner:r}=e,i=null==r?void 0:r.byRef,o=makeCheckEqualityOptions();let s,a,l,c,d=e.affected;if("string"==typeof d&&(d=[d]),e={...e,checkEqualityOptions:o},r){if(r.byRef={},d)for(a in i)d.includes(a)||(r.byRef[a]=i[a]);e.refsWas=i}if(n.changed=$o.performSync(e,e.targetElement),r)for(d||(d=Object.keys(i)),s=0;s<d.length;++s)a=d[s],l=i[a],o.refsFound.has(a)||l.retainElement?r.byRef[a]=l:(c=l.lastDomConfig,l.remove(),r.detachRef(a,l,c));return e.targetElement}static performSync(e,n){const{domConfig:r,callback:i}=e,{lastDomConfig:o}=n;return(e.configEquality||$o.checkEquality)(r,o,e.checkEqualityOptions,e.ignoreRefs)?(null==i||i({action:"none",domConfig:r,targetElement:n}),!1):(r?(r.onlyChildren||($o.syncAttributes(r,n,e),$o.syncContent(r,n)),r.keepChildren||$o.syncChildren(e,n)):(n.innerHTML=null,n.syncIdMap=null),n.lastDomConfig=(null==r?void 0:r.onlyChildren)&&o?{...o,children:r.children}:r,!0)}static syncDataset(e,n){const{lastDomConfig:r}=n,i=e===r,o=Object.keys(e.dataset),s=r&&r.dataset&&Object.keys(r.dataset),a=oe.delta(o,s);let l,c,d,u;for(c=0;c<a.onlyInA.length;c++)l=a.onlyInA[c],u=e.dataset[l],null!=u&&n.setAttribute(`data-${w.hyphenate(l)}`,u);for(c=0;c<a.inBoth.length;c++)l=a.inBoth[c],u=e.dataset[l],(i||u!=r.dataset[l])&&(d=`data-${w.hyphenate(l)}`,null==u?n.removeAttribute(d):n.setAttribute(d,u));for(c=0;c<a.onlyInB.length;c++)n.removeAttribute(`data-${w.hyphenate(a.onlyInB[c])}`)}static addCls(e,n){const{lastDomConfig:r}=n;(e=Xt.normalize(e,"array")).forEach((e=>{n.classList.add(e),((e,n)=>{const r="className"in n?"className":"class",i=n[r];if(i)if("string"==typeof i){const o=i.split(" ");o.includes(e)||(o.push(e),n[r]=o.join(" "))}else Array.isArray(i)?i.includes(e)||i.push(e):i.isDomClassList?i.add(e):Et.isObject(i)&&(i[e]=1)})(e,r)}))}static removeCls(e,n){const{lastDomConfig:r}=n;(e=Xt.normalize(e,"array")).forEach((e=>{n.classList.remove(e),((e,n)=>{const r="className"in n?"className":"class",i=n[r];if(i)if("string"==typeof i){const o=i.split(" ");o.includes(e)&&(o.splice(o.indexOf(e),1),n[r]=o.join(" "))}else Array.isArray(i)?i.includes(e)&&i.splice(i.indexOf(e),1):i.isDomClassList?i.remove(e):Et.isObject(i)&&delete i[e]})(e,r)}))}static syncClassList(e,n,r){let i,o,s,a,l,c,d=e.className||e.class,u=!1;if(r){for(o=Xt.normalize(n,"array"),d=Xt.normalize(d,"object"),c=Xt.normalize(r.className||r.class,"object"),l=[],s=0,a=o.length;s<a;++s)i=o[s],d[i]||!(i in c)?(c[i]=1,l.push(i)):u=!0;for(i in d)c[i]||(l.push(i),u=!0);if(!u)return;d=l.join(" ")}else d=Xt.normalize(d);n.setAttribute("class",d)}static getSyncAttributes(e){const n={},r=[];return e&&Object.keys(e).forEach((i=>{if(!_o[i]){const o=i.toLowerCase();n[o]=e[i],r.push(o)}})),{attributes:n,names:r}}static syncAttributes(e,n,r){const{lastDomConfig:i}=n,o=e===i,s=$o.getSyncAttributes(e),{attributes:a,names:l}=s,{attributes:c,names:d}=o?s:$o.getSyncAttributes(i),{onlyInA:u,onlyInB:h,inBoth:g}=o?{onlyInA:Ro,onlyInB:Ro,inBoth:l}:oe.delta(l,d);let p,m;for(m=0;m<u.length;m++){p=u[m];const r=a[p];"style"===p&&null!=r?Gn.applyStyle(n,r,!0):"dataset"===p?$o.syncDataset(e,n):Oo[p]?$o.syncClassList(e,n):null!=r&&n.setAttribute(p,r)}for(m=0;m<h.length;m++)n.removeAttribute(h[m]);for(m=0;m<g.length;m++){p=g[m];const i=a[p],s=c[p];null==i?n.removeAttribute(p):"style"===p?r.strict?o?$o.syncStyles(n,i):Io(i,s,!0)||$o.syncStyles(n,i,s):!o&&Io(i,s,!0)||Gn.applyStyle(n,i,!0):"dataset"===p?$o.syncDataset(e,n):Oo[p]?$o.syncClassList(e,n,r.strict&&n.lastDomConfig):(o||i!==s)&&n.setAttribute(p,i)}}static syncStyles(e,n,r){let i,o,s;if(r){if(i={},n=Gn.parseStyle(n),r=Gn.parseStyle(r),n)for(o in n)s=n[o],r[o]!==s&&(i[o]=s);for(o in r)o in n||(i[o]="")}else i=n;Gn.applyStyle(e,i)}static syncContent(e,n){var r;const{html:i,text:o}=e,s=null!=o?o:i;if(n.didSetTextContent=!1,e.elementData&&(n.elementData=e.elementData),s instanceof DocumentFragment)1===n.childNodes.length&&0===Gn.getChildElementCount(n)&&1===s.childNodes.length&&0===Gn.getChildElementCount(s)?Gn.setInnerText(n,s.firstChild.data):(n.innerHTML="",n.appendChild(s));else if(null!=i&&To.test(i))n.innerHTML=String(i);else if(null!=s){const{lastDomConfig:e}=n;(null==(r=null==e?void 0:e.children)?void 0:r.length)||(null==e?void 0:e.html)&&To.test(n.lastDomConfig.html)?n.innerHTML=s:(Gn.setInnerText(n,String(s)),n.didSetTextContent=!0)}}static insertTextNode(e,n,r,i,o=null){const s=document.createTextNode(e);n.insertBefore(s,o),i&&(s.$refOwnerId=i.id),null==r||r({action:"newNode",domConfig:e,targetElement:s})}static insertElement(e,n,r,i,o,s,a){var l;const c=a.ns?document.createElementNS(a.ns,e.tag||"svg"):document.createElement(e.tag||"div");n.insertBefore(c,r),$o.performSync(a,c),null!=s&&(o[s]=c),e.role||e.tabIndex||e["aria-hidden"]||Gn.isFocusable(c,!0)||c.htmlFor||c.setAttribute("role","presentation"),i&&(c.$refOwnerId=i.id,s&&(c.$reference=s,i.attachRef(s,c,e))),null==(l=a.callback)||l.call(a,{action:"newElement",domConfig:e,targetElement:c,syncId:s})}static syncChildren(e,n){var r,i,o;let s,a,l,{domConfig:c,syncIdField:d,callback:u,releaseThreshold:h,configEquality:g,ns:p,refOwner:m,refsWas:f,strict:b,checkEqualityOptions:v,ignoreRefs:y}=e,w=null;const C=c.syncOptions||{};if(null!=(r=c.html)?r:c.text)return;y=Boolean(null!=(i=C.ignoreRefs)?i:y),y&&(m=f=null),"strict"in C&&(b=C.strict);const S=m?m.byRef:{},x=Eo.call(c.children||[]),D=Eo.call(n.childNodes),E=f||n.syncIdMap||{},R=n.releasedIdMap||{},nextTarget=e=>{for(;D.length&&D[0].parentNode!==n;)D.shift();return(e?D.shift():D[0])||null};d=C.syncIdField||d,b=C.strict||b,u=C.callback||u,g=C.configEquality||g,h="releaseThreshold"in C?C.releaseThreshold:h,d&&(n.syncIdMap=S);const k={checkEqualityOptions:v||makeCheckEqualityOptions(),ignoreRefs:y,refOwner:m,refsWas:f,strict:b,syncIdField:d,releaseThreshold:h,callback:u,configEquality:g};for(;x.length;){const e=x.shift();if(l=null,!e)continue;if(Gn.isReactElement(e)){u({jsx:e,targetElement:n});continue}if(e instanceof Node){a=nextTarget(),e!==a&&n.insertBefore(e,a),s=D.indexOf(e),s>-1&&D.splice(s,1);continue}const r="string"==typeof e;if(k.domConfig=e,k.ns=e.ns||p,!r){if(m?l=e.reference:d&&e.dataset&&(l=e.dataset[d]),null!=l&&!e.unmatched){const r=E[l]||R[l];if(r){const{lastDomConfig:i}=r;r.retainElement||$o.performSync(k,r)&&(null==u||u({action:"reuseOwnElement",domConfig:e,targetElement:r,lastDomConfig:i,syncId:l})),e.retainElement&&(r.retainElement=!0),S[l]=r,oe.remove(D,r),delete R[l],r.isReleased=!1,a=nextTarget(),(r.parentNode!==n||b&&r.nextSibling!==a)&&n.insertBefore(r,a)}else b?$o.insertElement(e,n,nextTarget(),m,S,l,k):(x.push(e),e.unmatched=!0);continue}e.unmatched&&delete e.unmatched}let i,c=null,h=null;for(;!h&&(i=nextTarget(!0));){if(m){if(i.$refOwnerId!==m.id)continue;if(i.$reference){if(!b)continue;c=i;break}h=i}else i.retainElement||(h=i);h||(w||(w=[])).push(i)}if(c||!h)r?$o.insertTextNode(e,n,u,m,c):$o.insertElement(e,n,c,m,S,l,k);else if(r||h.nodeType!==Node.ELEMENT_NODE||(e.tag||"div").toLowerCase()!==h.tagName.toLowerCase())r&&h.nodeType===Node.TEXT_NODE?h.data=e:(r?$o.insertTextNode(e,n,u,m,h):$o.insertElement(e,n,h,m,S,l,k),h.remove());else{const{lastDomConfig:n}=h,r=$o.performSync(k,h);if(d&&null!=(null==(o=null==n?void 0:n.dataset)?void 0:o[d])){const e=n.dataset[d];delete R[e],delete E[e]}null!=l&&(S[l]=h),h.isReleased=!1,r&&(null==u||u({action:"reuseElement",domConfig:e,targetElement:h,lastDomConfig:n,syncId:l}))}}if(!n.didSetTextContent||1!==D.length||D[0].nodeType!==Node.TEXT_NODE){for(;a=nextTarget(!0);)m&&(a.$refOwnerId!==m.id||a.$reference)||(w||(w=[])).push(a);w&&$o.syncChildrenCleanup(n,w,S,u,m,h,d)}}static syncChildrenCleanup(e,n,r,i,o,s,a){let l,c=0;for(const d of n){const{lastDomConfig:n}=d;d.nodeType!==Element.TEXT_NODE?d.retainElement?a&&n&&(r[d.dataset[a]]=d):!o&&a&&(null==s||c<s)?(d.isReleased||(d.className="b-released",d.isReleased=!0,(null==n?void 0:n.dataset)&&(e.releasedIdMap||(e.releasedIdMap={}),e.releasedIdMap[n.dataset[a]]=d),null==i||i({action:"releaseElement",domConfig:n,lastDomConfig:n,targetElement:d}),n&&(n.isReleased=!0,n.className&&(n.className="b-released"),n.class&&(n.class="b-released"),n.style&&(n.style=null))),c++):(d.remove(),o&&(l=d.$reference,l&&o.detachRef(l,d,n)),e.releasedIdMap&&a&&(null==n?void 0:n.dataset)&&delete e.releasedIdMap[n.dataset[a]],null==i||i({action:"removeElement",domConfig:d.lastDomConfig,lastDomConfig:d.lastDomConfig,targetElement:d})):d.remove()}}static removeChild(e,n){if(e.contains(n)){const r=e.syncIdMap;if(r){const e=Object.values(r).indexOf(n);e>-1&&delete r[Object.keys(r)[e]]}e.removeChild(n)}}static addChild(e,n,r){e.appendChild(n),e.syncIdMap||(e.syncIdMap={}),e.syncIdMap[r]=n}static getChild(e,n){var r;const i=String(n).split(".");for(const n of i)if(!(e=null==(r=null==e?void 0:e.syncIdMap)?void 0:r[n]))return null;return e}};$o._$name="DomSync";var jo=class{static init(){const e=["fullscreenEnabled","requestFullscreen","exitFullscreen","fullscreenElement"],prefixFn=n=>e.map((e=>{let r=n+w.capitalize(e);return"moz"===n&&(r=r.replace("screen","Screen"),"mozCancelFullScreen"in document&&"exitFullscreen"===e&&(r="mozCancelFullScreen")),r}));this.functions="fullscreenEnabled"in document&&e||"webkitFullscreenEnabled"in document&&prefixFn("webkit")||"mozFullScreenEnabled"in document&&prefixFn("moz")||"msFullscreenEnabled"in document&&prefixFn("ms")||[];const n=["fullscreenchange","fullscreenerror"],prefixEvt=e=>n.map((n=>e+w.capitalize(n)));this.events="fullscreenEnabled"in document&&n||"webkitFullscreenEnabled"in document&&prefixEvt("webkit")||"mozFullscreenEnabled"in document&&prefixEvt("moz")||"msFullscreenEnabled"in document&&["MSFullscreenChange","MSFullscreenError"]||[],this.onFullscreenChange(this.onInternalFullscreenChange.bind(this))}static get enabled(){return Boolean(this.functions[0]&&document[this.functions[0]])}static async request(e){return this.functions[1]&&(null==e?void 0:e[this.functions[1]]())}static async exit(){return this.functions[2]&&document[this.functions[2]]()}static get isFullscreen(){return!!this.element}static get element(){return this.functions[3]&&document[this.functions[3]]}static onFullscreenChange(e){this.events[0]&&document.addEventListener(this.events[0],e)}static unFullscreenChange(e){this.events[0]&&document.removeEventListener(this.events[0],e)}static onInternalFullscreenChange(){const e=this,{element:n}=e;if(n){if(!n.closest(".b-floatroot")){const r=Gn.getRootElement(n),{floatRoot:i}=r;i&&(e._floatRoot=i,e._oldParent=i.parentElement,n.appendChild(i))}}else e._floatRoot&&e._oldParent.appendChild(e._floatRoot),e._oldParent=null,e._floatRoot=null}};jo.init(),jo._$name="Fullscreen";var zo=null,Bo=[],isAbsolutelyPositioned=e=>{var n;return e.nodeType===e.ELEMENT_NODE&&"absolute"===(null==(n=e.ownerDocument.defaultView)?void 0:n.getComputedStyle(e).getPropertyValue("position"))},Ho=class{static addResizeListener(e,n){const r=this;if(e!==document&&e!==globalThis||(e=document.body),e.nodeType===e.DOCUMENT_FRAGMENT_NODE&&(e=e.host),e.classList.contains("b-resize-monitored")||(e.classList.add("b-resize-monitored"),e._bResizemonitor={handlers:[]}),e===document.body)r.hasWindowResizeListener||(globalThis.addEventListener("resize",r.onWindowResize),r.hasWindowResizeListener=!0);else if(globalThis.ResizeObserver)r.resizeObserver||(r.resizeObserver=new ResizeObserver(r.onElementResize)),r.resizeObserver.observe(e);else{e.classList.add("b-no-resizeobserver");const[i,o,s]=Gn.createElement({parent:e,className:"b-resize-monitors",children:[{className:"b-resize-monitor-expand"},{className:"b-resize-monitor-shrink"}]},{returnAll:!0});o.scrollLeft=o.scrollTop=s.scrollLeft=s.scrollTop=1e6,o.addEventListener("scroll",r.onSizeMonitorScroll,!0),s.addEventListener("scroll",r.onSizeMonitorScroll,!0),(n.targetMutationMonitor=new MutationObserver((e=>{const n=[],r=[];for(const i of e)"childList"===i.type&&(n.push.apply(n,i.addedNodes),r.push.apply(r,i.removedNodes));const i=[...n.filter((e=>!r.includes(e))),...r.filter((e=>!n.includes(e)))];0!==i.length&&(i.length>0&&i.every(isAbsolutelyPositioned)||o.dispatchEvent(new CustomEvent("scroll",{bubbles:!1})))}))).observe(e,{childList:!0,subtree:!0}),n.monitorElement=i}e._bResizemonitor.handlers.push(n)}static removeResizeListener(e,n){if(e){e!==document&&e!==globalThis||(e=document.body);const r=e._bResizemonitor;let i=0;r&&r.handlers&&(oe.remove(r.handlers,n),i=r.handlers.length),i||(e.classList.remove("b-resize-monitored"),this.resizeObserver?this.resizeObserver.unobserve(e):(n.monitorElement&&(n.monitorElement.remove(),n.monitorElement=null),n.targetMutationMonitor&&n.targetMutationMonitor.disconnect()))}}static onElementResize(e){for(const n of e){const e=n.target,r=e._bResizemonitor,i=n.contentRect||e.getBoundingClientRect();if(hasLayout(e)&&(!r.rectangle||i.width!==r.rectangle.width||i.height!==r.rectangle.height)){const n=r.rectangle;r.rectangle=i;for(const o of r.handlers)o(e,n,i)}}}static onSizeMonitorScroll(e){var n;if(null==(n=document.body)?void 0:n.contains(e.target)){e.stopImmediatePropagation();const n=e.target.parentNode,r=n.parentNode,i=r._bResizemonitor,o=r.getBoundingClientRect();i.rectangle&&o.width===i.rectangle.width&&o.height===i.rectangle.height||(Bo.push([r,i.rectangle,o]),i.rectangle=o,zo||(zo=requestAnimationFrame(Ho.fireResizeEvents))),n.firstChild.scrollLeft=n.firstChild.scrollTop=n.childNodes[1].scrollTop=n.childNodes[1].scrollLeft=1e6}}static onWindowResize(e){const n=document.body,r=n._bResizemonitor,i=r.rectangle;r.rectangle=document.documentElement.getBoundingClientRect();for(const e of r.handlers)e(n,i,r.rectangle)}static fireResizeEvents(){for(const e of Bo)for(const n of e[0]._bResizemonitor.handlers)e[0].offsetParent&&n.apply(this,e);zo=null,Bo.length=0}static removeGlobalListeners(){globalThis.removeEventListener("resize",this.onWindowResize)}};Ho._$name="ResizeMonitor";var Vo={auto:"auto",true:"auto",false:"hidden","hidden-scroll":"auto",clip:c.supportsOverflowClip?"clip":"hidden"},No="b-widget-scroller",qo={block:"nearest"},Wo=Promise.resolve(),scrollPromise=e=>new Promise((n=>cn.on({element:e===document.documentElement?globalThis:e,scroll:n,once:!0}))),Uo={x:1},Go={auto:1,scroll:1},Yo={true:1,auto:1},Ko={overflowX:"auto",overflowY:"auto"},Xo=class extends(Delayable_default(Events_default(re))){static get configurable(){return{widget:null,element:{$config:{nullify:!0},value:null},contentElement:{$config:{nullify:!0},value:null},overflowX:null,overflowY:null,translate:null,x:0,y:0,rtlSource:null}}static get delayable(){return{onScrollEnd:{type:"buffer",delay:100}}}get isRTL(){var e;return Boolean(null==(e=this.rtlSource)?void 0:e.rtl)}syncOverflowState(){const e=this,{element:n}=e,r=new Xt(n.classList),i=e.hasOverflowX=n.scrollWidth>n.clientWidth,o=e.hasOverflowY=n.scrollHeight>n.clientHeight;r.value=n.classList;(r.toggle("b-horizontal-overflow",i)||r.toggle("b-vertical-overflow",o))&&(Gn.syncClassList(n,r),e.isConfiguring||e.trigger("overflowChange",{x:i,y:o}))}hasOverflow(e="y"){const n=this[`overflow${e.toUpperCase()}`],r=this["overflow"+("y"===e?"x":"y")];if(Gn.scrollBarWidth&&Yo[n]&&"hidden-scroll"!==r&&!c.isFirefox)return this[`hasOverflow${e.toUpperCase()}`];{const n="y"===e?"Height":"Width";return this[`scroll${n}`]>this[`client${n}`]}}hasScrollbar(e="y"){const{element:n}=this;if(n&&Gn.scrollBarWidth){const r="y"===e,i=r?"Width":"Height",o=n[`client${i}`],s=parseInt(Gn.getStyleValue(n,`border${r?"Left":"Top"}Width`))+parseInt(Gn.getStyleValue(n,`border${r?"Right":"Bottom"}Width`)),a=n[`offset${i}`]-s-o;return Math.abs(a-Gn.scrollBarWidth)<2}}addPartner(e,n=Uo){const r=this;"string"==typeof n&&(n={[n]:1}),r.partners||(r.partners={}),r.partners[e.id]={scroller:e,axes:n},n.x&&(e.x=r.x),n.y&&(e.y=r.y),e.isPartneredWith(r)||e.addPartner(r,n)}eachPartner(e){const{partners:n}=this;n&&Object.values(n).forEach(e)}removePartner(e){this.isPartneredWith(e)&&(delete this.partners[e.id],e.removePartner(this))}isPartneredWith(e){var n;return Boolean(null==(n=this.partners)?void 0:n[e.id])}clearPartners(){this.partners&&Object.values(this.partners).forEach((e=>e.scroller.removePartner(this)))}async scrollIntoView(e,n=qo){const r=this,{isRectangle:i}=e,o=i?e:Gt.from(e),{xDelta:s,yDelta:a}=r.getDeltaTo(e,n),l=r.scrollBy(s,a,n);return(n.highlight||n.focus)&&l.then((()=>{i&&(e=o.translate(-s,-a)),n.highlight&&(isNaN(n.highlight)?(r.widget||r).callback(n.highlight,null,[e]):Gn.highlight(e,r)),n.focus&&Gn.focusWithoutScrolling(e)})),l}static async scrollIntoView(e,n=qo,r=!1){const i=Gt.from(e),o="object"==typeof n?n.animate:n,s=Xo._globalScroller||(Xo._globalScroller=new Xo),a=[];s.rtlSource={rtl:r};let l,c=0,d=0;for(let r=e.parentNode;r.nodeType===Node.ELEMENT_NODE;r=r.parentNode){if(r===document.body&&r!==document.scrollingElement)continue;const e=r===document.scrollingElement?Ko:r.ownerDocument.defaultView.getComputedStyle(r);if(!1!==n.y&&Go[e.overflowY]&&r.scrollHeight>r.clientHeight||!1!==n.x&&Go[e.overflowX]&&r.scrollWidth>r.clientWidth){s.element=r,s.positionDirty=!0;const{xDelta:e,yDelta:o}=s.getDeltaTo(i,n);(e||o)&&(a.push({element:r,x:r.scrollLeft,y:r.scrollTop,xDelta:e,yDelta:o}),i.translate(-e,-o),c+=e,d+=o)}}if(a.length){const e=Math.abs(c),n=Math.abs(d);let i=o&&("number"==typeof o?o:"number"==typeof o.duration?o.duration:300);if(i&&(e>10||n>10))Math.max(e,n)<50&&(i=Math.min(i,500)),l=s.scrollAnimation=he.animate(i,(e=>{const n=1===e;for(const{element:i,x:o,y:l,xDelta:c,yDelta:d}of a)s.element=i,c&&(s.x=Math[r?"min":"max"](o+(n?c:Math.round(c*e)),0)),d&&(s.y=Math.max(l+(n?d:Math.round(d*e)),0))}),null,o.easing),l.then((()=>{s.scrollAnimation=null}));else{for(const{element:e,xDelta:n,yDelta:r}of a)e.scrollTop+=r,e.scrollLeft+=n;l=scrollPromise(a[a.length-1].element)}}else l=Wo;return(n.highlight||n.focus)&&l.then((()=>{n.highlight&&(isNaN(n.highlight)?s.callback(n.highlight,null,[e]):Gn.highlight(e,s)),n.focus&&e.focus()})),l}async scrollBy(e=0,n=0,r=qo){const i=this,o="object"==typeof r?r.animate:r,s=Math.abs(e),a=Math.abs(n);i.scrollAnimation&&(i.scrollAnimation.cancel(),i.scrollAnimation=null),(e||n)&&(i.silent=r.silent);let l=o&&("number"==typeof o?o:"number"==typeof o.duration?o.duration:300);if(l&&(s>10||a>10)){const{x:c,y:d}=i;let u=c,h=d;return Math.max(s,a)<50&&(l=Math.min(l,500)),i.scrollAnimation=he.animate(l,(o=>{var s,a;const l=1===o;if(e){if(i.x!==u&&!r.force)return null==(s=i.scrollAnimation)?void 0:s.cancel();i.x=Math.max(c+(l?e:Math.round(e*o)),0)}if(n){if(i.y!==h&&!r.force)return null==(a=i.scrollAnimation)?void 0:a.cancel();i.y=Math.max(d+(l?n:Math.round(n*o)),0)}u=i.x,h=i.y}),i,o.easing),i.element.classList.add("b-scrolling"),i.scrollAnimation.then((()=>{i.isDestroyed||(i.element.classList.remove("b-scrolling"),i.scrollAnimation=null)})),i.scrollAnimation}if(e||n){const r=i.x,o=i.y;if(i.x+=e,i.y+=n,i.x!==r||i.y!==o)return scrollPromise(i.element)}return Wo}async scrollTo(e,n,r){const{x:i,y:o}=this,s=null==e?0:e-i,a=null==n?0:n-o;return this.scrollBy(s,a,r)}doDestroy(){var e,n;const r=this;r._element&&(r._element.removeEventListener("scroll",r.scrollHandler),null==(e=r.wheelListenerRemover)||e.call(r)),null==(n=r.scrollAnimation)||n.cancel(),Object.values(r.partners||{}).forEach((({scroller:e})=>e.removePartner(r))),super.doDestroy()}onElMutation(e){const n=this,[r,i]=Gn.getTranslateXY(n.element);if(n._x!==-r||n.y!==-i){const e=new CustomEvent("scroll",{bubbles:!0});Object.defineProperty(e,"target",{get:()=>n.element}),n.onScroll(e)}}onElResize(){const e=this,{widget:n}=e;(null==n?void 0:n.isAnimating)?-1===n.findListener("animationend","onElResize",e)&&n.ion({animationEnd:"onElResize",thisObj:e,once:!0}):e.syncOverflowState()}onScroll(e){const n=this,{_x:r,_y:i,element:o}=n;let s=0;"clip"===n.overflowX&&o.scrollLeft!==r&&(o.scrollLeft=r,++s),"clip"===n.overflowY&&o.scrollTop!==i&&(o.scrollTop=i,++s),2!==s&&(n.widget&&n.widget.isDestroyed||(n.positionDirty=!0,o.classList.contains("b-scrolling")||o.classList.add("b-scrolling"),e.widget=n.widget,n.silent||n.trigger("scroll",e),n.syncPartners(),n.controllingPartner=null,n.onScrollEnd(e)))}syncPartners(e,n){const r=this;r.partners&&Object.values(r.partners).forEach((({axes:i,scroller:o})=>{(o!==r.controllingPartner||e)&&o.sync(r,i)&&n&&o.syncPartners(e,n)}))}onScrollEnd(e){const n=this;n.silent&&(n.silent=!1),n.trigger("scrollEnd",e),n.controllingPartner=null,n.element.classList.remove("b-scrolling")}getDeltaTo(e,n){const r=this;if(!r.viewport)return{xDelta:0,yDelta:0};const{x:i,y:o,scrollWidth:s,scrollHeight:a,isRTL:l}=r,c=e instanceof Gt?e:Gt.from(e),d=n.block||"nearest",u=r.viewport,h=(e=>{var n,r,i,o;let s,a,l,c;return e?"number"==typeof e?s=a=l=c=e:(s=null!=(n=e.top)?n:0,a=null!=(r=e.bottom)?r:0,l=null!=(i=e.start)?i:0,c=null!=(o=e.end)?o:0):s=a=l=c=0,{top:s,bottom:a,start:l,end:c}})(n.edgeOffset),g=u.width>=c.width+(h.start+h.end)?h:{start:0,end:0},p=u.height>=c.height+(h.top+h.bottom)?h:{top:0,bottom:0},m=new Gt(l?u.right- -i-s:u.x-i,u.y-o,s,a),f=c.clone().adjust(-g.start,-p.top,g.end,p.bottom).constrainTo(m),b=f.clone(),v=r.isRTL?-1:1;let y=0,w=0;if("start"===d)b.moveTo(u.x+(r.isRTL?u.width-b.width:0),u.y),y=f.x-b.x,w=f.y-b.y;else if("end"===d)b.moveTo(u.x+(r.isRTL?0:u.width-b.width),u.bottom-b.height),y=f.x-b.x,w=f.y-b.y;else if("center"===d){const e=u.center;b.moveTo(e.x-b.width/2,e.y-b.height/2),y=y||f.x-b.x,w=w||f.y-b.y}else b.width>u.width?y=b.x-u.x:b.right>u.right?y=b.right-u.right:b.x<u.x&&(y=b.x-u.x),b.height>u.height?w=b.y-u.y:b.bottom>u.bottom?w=b.bottom-u.bottom:b.y<u.y&&(w=b.y-u.y);return y=v*Math.round(y),w=Math.round(w),{xDelta:!1===n.x?0:Math.max(Math.min(y,r.maxX-i),-i),yDelta:!1===n.y?0:Math.max(Math.min(w,r.maxY-o),-o)}}get viewport(){return Gt.client(this.element)}updateWidget(e){this.rtlSource=this.owner=e}updateElement(e,n){var r;const i=this;if(i===Xo._globalScroller)return i._element=e,void(i.positionDirty=!0);const o=i.scrollHandler||(i.scrollHandler=i.onScroll.bind(i)),s=i.resizeHandler||(i.resizeHandler=i.onElResize.bind(i));if(n&&(i.translate?null==(r=i.mutationObserver)||r.disconnect():(n.removeEventListener("scroll",o),n.classList.remove(No),n.style.overflowX=n.style.overflowY=""),Ho.removeResizeListener(n,s)),e){if(i.translate){if(i.mutationObserver||(i.mutationObserver=new MutationObserver(i.mutationHandler||(i.mutationHandler=i.onElMutation.bind(i)))),i._x=i._y=0,document.contains(e)){const[n,r]=Gn.getTranslateXY(e);i._x=-n,i._y=-r}i.mutationObserver.observe(e,{attributes:!0})}else e.addEventListener("scroll",o),e.classList.add(No);Ho.addResizeListener(e,s),i.widget||(i.rtlSource={get rtl(){return"rtl"===Gn.getStyleValue(e,"direction")}}),i.isRTL&&e.classList.add("b-rtl"),i.positionDirty&&(i.updateOverflowX(i.overflowX),i.updateOverflowY(i.overflowY)),i.syncOverflowState(),i.isConfiguring&&(i._x&&i.updateX(i._x),i._y&&i.updateY(i._y))}i.positionDirty=!0}get x(){const e=this,{element:n}=e;if(n&&e.positionDirty){if(e.translate){const[r,i]=Gn.getTranslateXY(n);e._x=-r,e._y=-i}else e._x=Math.abs(n.scrollLeft),e._y=n.scrollTop;e.positionDirty=!1}return e._x}get scrollLeft(){return this.element.scrollLeft}changeX(e){if(e=Math.max(e,0),!this.isConfiguring||e)return e;this._x=e}updateContentElement(e){e&&(e="string"==typeof e?this.element.querySelector(e):e,Ho.addResizeListener(e,this.resizeHandler))}updateX(e){var n;const{element:r}=this;r&&!(null==(n=this.widget)?void 0:n.isConfiguring)&&(e=Math.round(e),this.trigger("scrollStart",{x:e}),this.translate?Gn.setTranslateX(r,-e):r.scrollLeft=this.isRTL?-e:e),this.positionDirty=!0}sync(e,n){const r=this,{x:i,y:o}=n;let s=!1;return null!=i&&r.x!==e.x&&(r.controllingPartner=e,r.x=e.x,s=!0),null!=o&&r.y!==e.y&&(r.controllingPartner=e,r.y=e.y,s=!0),s}get y(){const e=this,{element:n}=e;if(n&&e.positionDirty){if(e.translate){const[r,i]=Gn.getTranslateXY(n);e._x=-r,e._y=-i}else e._x=n.scrollLeft,e._y=n.scrollTop;e.positionDirty=!1}return e._y}changeY(e){if(!this.isConfiguring||e)return e;this._y=e}updateY(e){const{element:n,widget:r}=this;n&&!(null==r?void 0:r.isConfiguring)&&(this.trigger("scrollStart",{y:e}),this.translate?Gn.setTranslateY(n,-e):n.scrollTop=e),this.positionDirty=!0}get maxX(){return this.scrollWidth-this.clientWidth}get maxY(){return this.scrollHeight-this.clientHeight}get lastScrollLeft(){return(this.scrollWidth-this.clientWidth)*(this.isRTL?-1:1)}updateOverflowX(e,n){const r=this,{element:i,translate:o}=r,{style:s,classList:a}=i;if("hidden-scroll"===n&&a.remove("b-hide-scroll"),"hidden-scroll"===e&&!o){Go[s.overflowY]?(e="hidden",r.enableWheel()):a.add("b-hide-scroll")}o||(s.overflowX=Vo[e]||e),r.isConfiguring||(r.positionDirty=!0,r.syncOverflowState())}updateOverflowY(e,n){const r=this,{element:i,translate:o}=r,{style:s,classList:a}=i;if("hidden-scroll"===n&&a.remove("b-hide-scroll"),"hidden-scroll"===e&&!o){Go[s.overflowX]?(e="hidden",r.enableWheel()):a.add("b-hide-scroll")}o||(s.overflowY=Vo[e]||e),r.isConfiguring||(r.positionDirty=!0,r.syncOverflowState())}enableWheel(){this.wheelListenerRemover||(this.wheelListenerRemover=cn.on({element:this.element,wheel:"onWheel",thisObj:this}))}onWheel(e){Math.abs(e.deltaX)>Math.abs(e.deltaY)&&"hidden-scroll"===this.overflowX?this.x+=e.deltaX:"hidden-scroll"===this.overflowY&&(this.y+=e.deltaY)}get scrollWidth(){var e,n;return null!=(n=null==(e=this.element)?void 0:e.scrollWidth)?n:0}set scrollWidth(e){const n=this,{element:r,isRTL:i}=n;let o=n.widthStretcher;o&&null==e?(o.remove(),n.widthStretcher=null):e&&(e=Math.abs(e),o||(o=n.widthStretcher=Gn.createElement({className:"b-scroller-stretcher b-horizontal-stretcher",retainElement:!0})),o.style.transform=`translateX(${(e-1)*(i?-1:1)}px)`,r&&!r.contains(o)&&r.insertBefore(o,r.firstElementChild)),!1!==n.propagate&&n.eachPartner((({scroller:n})=>{n.propagate=!1,n.scrollWidth=e,delete n.propagate})),n.positionDirty=!0,n.syncOverflowState()}get scrollHeight(){var e,n;return null!=(n=null==(e=this.element)?void 0:e.scrollHeight)?n:0}set scrollHeight(e){const n=this,r=n.stretcher||(n.stretcher=Gn.createElement({className:"b-scroller-stretcher"}));r.style.transform=`translateY(${e-1}px)`,n.element&&n.element.lastChild!==r&&n.element.appendChild(r),n.positionDirty=!0,n.syncOverflowState()}get clientWidth(){var e;return(null==(e=this.element)?void 0:e.clientWidth)||0}get clientHeight(){var e;return(null==(e=this.element)?void 0:e.clientHeight)||0}get id(){return this._id||(this.widget?this._id=`${this.widget.id}-scroller`:this._id=Jr.generateId("scroller-")),this._id}preProcessCurrentConfigs(e){super.preProcessCurrentConfigs(),delete e.widget,delete e.element}};Xo._$name="Scroller";var Zo=class{constructor(e){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n})),e&&e(this)}};Zo._$name="Promissory";var{defineProperty:Qo}=Reflect,Jo=class extends(re.mixin(Localizable_default,Events_default,Delayable_default,Identifiable_default)){static get configurable(){return{element:null}}static get delayable(){return{refreshDom:"raf"}}static get identifiable(){return{}}static get renderConfigs(){const e=this,n=e.$meta;let r,i,o=n.renderConfigs;if(void 0===o){for(i in o=null,r=n.configs,r)r[i].render&&(o||(o=new Set)).add(i);n.renderConfigs=e.prototype.$renderConfigs=o}return o}construct(...e){this.$iid=++Jo.$idSeed,this.byRef={},super.construct(...e),this.onDraw!==Jo.prototype.onDraw&&this.initDrawable()}startConfigure(e){this.element=this.renderContext.renderDom(),super.startConfigure(e)}get element(){return this.refreshDom.flush(),this._element}changeElement(e,n){const r=this;return n&&n.remove(),e&&(e.id=r.id,e=Gn.createElement(e,{refOwner:r})),e}updateId(e,n){const r=this;if(n){const i=r.element;i.id=e,r.fixRefOwnerId(i,e,n)}}get classes(){return this.element.classList}fixRefOwnerId(e,n,r){if(e.$refOwnerId===r){e.$refOwnerId=n;const i=e.$reference;i&&(e.id=`${n}-${i}`);for(const i of e.childNodes)this.fixRefOwnerId(i,n,r)}}onConfigChange({name:e}){!this.isConfiguring&&this.$renderConfigs.has(e)&&this.refreshDom()}attachRef(e,n,r){const i=this,o="_"+e,{listeners:s}=r;o in i||Qo(i,e,{get:()=>(i.refreshDom.flush(),i[o]),set(e){i[o]=e}}),n.id=`${i.id}-${e}`,i.byRef[e]=n,i[e]=n,s&&(r.listeners={on:s,un:cn.on(Object.assign({element:n,thisObj:i},s))})}detachRef(e,n,r){r.listeners&&(r.listeners.un(),r.listeners=null),this[e]=null,delete this.byRef[e]}renderDom(){return{}}get renderContext(){const e=this,n=e.$meta,r=e.constructor;let i=n.renderConfigs||r.renderConfigs,o=e;if(!i){o=Object.create(e),i=new Set;for(const r in n.configs)Qo(o,r,{get:()=>(i.add(r),e[r])});o.renderDom=()=>e.renderDom.call(o),e.$renderConfigs=i}return Qo(e,"renderContext",{value:o}),o}refreshDom(){$o.sync({targetElement:this.element,domConfig:this.renderContext.renderDom(),refOwner:this,strict:!0})}onListen(e){"draw"===e&&this.initDrawable()}initDrawable(){const e=this;if(!e.intersector){let n=Object.values(e.byRef).find((e=>e.classList.contains("b-drawable")));n||(n=e.element,n.classList.add("b-drawable")),e.intersector=new IntersectionObserver((n=>{e.isDestroyed||n.forEach((n=>{n.isIntersecting&&e.onDraw({count:++e.drawCounter})}))})),e.intersector.observe(n)}}onDraw(e){this.trigger("draw",e)}};Jo.$idSeed=0,Object.assign(Jo.prototype,{drawCounter:0,hasGeneratedId:!1,intersector:null}),Jo._$name="Renderable";var es=class extends Jo{construct(e){if(e){let n,r=e.element;r&&(A.deprecate("Core","4.0.0",'Mask "element" config has been renamed to "target"'),e=n=Object.assign({},e),delete n.element,n.target=r),r=e.target,"string"==typeof r&&(e=n=n||Object.assign({},e),n.target=e.owner[r])}super.construct(e);const n=this,{type:r}=n;n.target||(n.target=document.body),n.maskName=`mask${"string"==typeof r?r.trim():""}-${es.counter++}`,n.show()}doDestroy(){const e=this,{element:n}=e;if("trial"===e.type)return!1;n&&(e.element=null,e.mode.endsWith("blur")&&Gn.forEachChild(n,(n=>{n.classList.remove(`b-masked-${e.mode}`)})),e.target.classList.remove("b-masked"),e.target[e.maskName]=null,oe.remove(es.masks,e)),super.doDestroy()}get maskElement(){return this.element}set error(e){this.setConfig(this.errorDefaults),this.text=e}renderDom(){const e=this,{maxProgress:n}=e;return{class:{"b-mask":1,"b-delayed-show":e.showDelay,"b-widget":1,[`b-mask-${e.mode}`]:1,"b-progress":n,"b-prevent-transitions":!e.useTransition},children:[{reference:"maskContent",class:"b-mask-content b-drawable",children:[n?{reference:"progressElement",class:"b-mask-progress-bar",style:{width:`${Math.max(0,Math.min(100,Math.round(e.progress/n*100)))}%`}}:null,{reference:"maskText",class:"b-mask-text",html:(e.icon?`<i class="b-mask-icon ${e.icon}"></i>`:"")+e.text}]}]}}static mergeConfigs(...e){const n={};for(const r of e)"string"==typeof r?n.text=r:Et.assign(n,r);return n}static mask(e,n=document.body){return es.new({target:n},"string"!=typeof e?{...e}:{text:e})}static unmask(e=document.body){const n=this.getElementMasks(e);return n.length>0?n[n.length-1].close():null}static unmaskAll(e=document.body){return this.getElementMasks(e).forEach((e=>e.close()))}static getElementMasks(e){return this.masks.filter((n=>n.target===e))}updateAutoClose(e){this.deferredClose.cancel(),e&&(this.deferredClose.delay=e,this.deferredClose())}updateCover(){this.syncCover()}syncCover(){var e,n;null==(n=null==(e=this.owner)?void 0:e.syncMaskCover)||n.call(e,this)}onOwnerResize(){this.syncCover()}updateOwner(e){this.detachListeners("cover"),null==e||e.ion({name:"cover",recompose:"onOwnerResize",resize:"onOwnerResize",thisObj:this})}updateShowDelay(e){const{delayedShow:n}=this;n.delay=e,e||n.flush()}deferredClose(){var e;const{owner:n}=this;this.close().then((()=>{var e;null==(e=null==n?void 0:n.onMaskAutoClose)||e.call(n,this)})),null==(e=null==n?void 0:n.onMaskAutoClosing)||e.call(n,this)}delayedShow(){this.classes.remove("b-delayed-show")}show(){const e=this,{element:n,target:r,hiding:i,maskName:o}=e;i&&(i.resolve(),e.hiding=null,e.clearTimeout("hide")),e.showDelay&&(n.classList.add("b-delayed-show"),e.delayedShow()),n.classList.add("b-visible"),n.classList.remove("b-hidden"),r.classList.add("b-masked"),r[o]||(r[o]=e,r.appendChild(n)),oe.include(es.masks,e),e.shown=!0,e.trigger("show"),e.mode.endsWith("blur")&&Gn.forEachChild(r,(r=>{r!==n&&r.classList.add(`b-masked-${e.mode}`)}))}hide(){const e=this,{target:n,element:r}=e;let{hiding:i}=e;if(!i){if(!e.shown)return Promise.resolve();e.hiding=i=new Zo,e.shown=!1,r.classList.remove("b-visible"),r.classList.add("b-hidden"),n.classList.remove("b-masked"),e.mode.endsWith("blur")&&Gn.forEachChild(n,(n=>{n!==r&&n.classList.remove(`b-masked-${e.mode}`)})),i.promise=i.promise.then((()=>{e.hiding===i&&(e.hiding=null)})),e.setTimeout((()=>i.resolve()),500,"hide")}return i.promise}async close(){await this.hide(),this.destroy()}},ts=es;__publicField(ts,"$name","Mask"),__publicField(ts,"type","mask"),__publicField(ts,"configurable",{autoClose:null,cover:null,icon:"b-icon b-icon-spinner",errorDefaults:{icon:"b-icon b-icon-warning",autoClose:3e3,showDelay:0},maxProgress:null,mode:"dark",progress:null,owner:{$config:"nullify",value:null},target:null,text:null,type:null,showDelay:null,useTransition:!1}),__publicField(ts,"delayable",{deferredClose:0,delayedShow:0,syncCover:{type:"throttle",delay:100}}),__publicField(ts,"counter",0),__publicField(ts,"masks",[]),ts._$name="Mask";var KeyMap_default=e=>{var n;return __publicField(n=class extends(e||re){get widgetClass(){}get keyMapElement(){return this.element}get keyMapSubComponents(){return this.features}matchKeyMapEntry(e,n=this.keyMap){if(n&&!e.handled&&void 0!==e.key)return Et.keys(n).find((n=>{const r=n.split("+"),i=r.includes("Alt"),o=r.includes("Shift"),s=r.includes("Ctrl");let a=r[r.length-1].toLowerCase();return"space"===a&&(a=" "),a===e.key.toLowerCase()&&(!e.altKey&&!i||e.altKey&&i)&&(!e.ctrlKey&&!s||e.ctrlKey&&s)&&(!e.shiftKey&&!o||e.shiftKey&&o)}))}performKeyMapAction(e){var n;const{keyMap:r}=this;let i=!1;if(r&&!e.handled&&void 0!==e.key){const o=this.matchKeyMapEntry(e);if(r[o]){const s=oe.asArray(r[o]);let a;e.fromKeyMap=!0;for(let r of s){if(a=!0,Et.isObject(r)){if(!r.handler)continue;!1===r.preventDefault&&(a=!1),r=r.handler}if("string"==typeof r){const{thisObj:s,handler:a}=this.resolveKeyMapAction(r);if(!1!==(null==(n=s.isActionAvailable)?void 0:n.call(s,{keyCombination:o,actionName:r.split(".").pop(),action:r,event:e}))&&!1!==a.call(s,e)){i=!0;break}}else if(!1!==r.call(this)){i=!0;break}}delete e.fromKeyMap,i&&(a&&e.preventDefault(),e.handled=!0)}}return i}resolveKeyMapAction(e){const{keyMapSubComponents:n}=this;if(e.startsWith("up.")||e.startsWith("this."))return this.resolveCallback(e);if(n&&e.includes(".")){const[r,i]=e.split(".");if(r&&i)return{thisObj:n[r],handler:n[r][i]}}return{thisObj:this,handler:this[e]}}updateKeyMap(e){var n;null==(n=this.keyMapDetacher)||n.call(this),Et.isEmpty(e)||(this.keyMapDetacher=cn.on({element:this.keyMapElement,keydown:"keyMapOnKeyDown",thisObj:this}))}keyMapOnKeyDown(e){this.performKeyMapAction(e)}mergeKeyMaps(e,n,r=null){const i={};e&&Et.assign(i,e);for(const o in n){if(!n[o])continue;const s=oe.asArray(null==e?void 0:e[o]),a=[];(null==s?void 0:s.length)&&a.push(...s);for(const e of oe.asArray(n[o]))Et.isObject(e)&&e.handler?a.push(Et.assignIf({handler:(r?r+".":"")+e.handler},e)):a.push((r?r+".":"")+e);a.sort(((e,n)=>{const r=(e.weight||0)-(n.weight||0);return 0===r&&(null==s?void 0:s.length)?s.indexOf(e)-s.indexOf(n):r})),i[o]=a}return i}},"$name","KeyMap"),__publicField(n,"configurable",{keyMap:{value:null,$config:{merge:"objects",nullify:!0}}}),n},RTL_default=e=>{var n;return __publicField(n=class extends(e||re){get widgetClass(){}get isRTL(){return this.rtl}updateRtl(e){const{element:n}=this;n&&(n.classList.toggle("b-rtl",!0===e),n.classList.toggle("b-ltr",!1===e))}startConfigure(e){var n,r;if(null==(n=super.startConfigure)||n.call(this,arguments),!e.floating&&null==e.rtl){const n=this,i=e.rootElement||e.forElement||(null==(r=n.parent)?void 0:r.contentElement)||(n.floating?n.floatRoot:n.changeElementRef(n.getRenderContext(e)[0]||e.adopt||document.body)),o=e.owner||e.parent||n.constructor.fromElement(i);e.rtl=o?o[o.isConfiguring?"peekConfig":"getConfig"]("rtl"):1===(null==i?void 0:i.nodeType)&&"rtl"===getComputedStyle(i).getPropertyValue("direction"),e.rtl&&(n.configDone.rtl=!1)}}render(...e){var n,r;super.render&&super.render(...e),(c.isChrome&&c.chromeVersion<87||c.isFirefox&&c.firefoxVersion<66||c.isSafari&&c.safariVersion<14.1)&&this.element.classList.add("b-legacy-inset"),("rtl"===getComputedStyle(this.element).direction||(null==(n=this.owner)?void 0:n.rtl))&&(this.rtl=!0,null==(r=this.childItems)||r.forEach((e=>e.rtl=!0)))}},"$name","RTL"),__publicField(n,"configurable",{rtl:null}),n},ns=Object.freeze({highlight:!1,onlyName:!1}),rs=[],is="highlightExternalChange",os=/transparent|rgba\(0,\s*0,\s*0,\s*0\)/,ss=Symbol("renderConfigObserver"),as={INPUT:1,TEXTAREA:1},addElementListeners=(e,n,r,i)=>{let o=(null==r?void 0:r.listeners)||(null==r?void 0:r.internalListeners);if(o=(null==o?void 0:o.on)||o,o){const s=cn.on(Et.assign({element:n,thisObj:e},o));i?(e._refListeners||(e._refListeners=Object.create(null)))[i]=s:r.listeners={on:o,un:s}}},mergeAnim=(e,n)=>e&&n&&n[Et.keys(e)[0]]?H.merge(e,n):e,widgetTriggerPaint=e=>{e.isVisible&&e.triggerPaint()},ls=/^:not\((.+)\)$/,cs=/absolute|fixed/i,isScaled=e=>null!=e.scale,{hasOwn:ds}=Et,{defineProperty:us}=Reflect,parseDuration=e=>parseFloat(e)*(e.endsWith("ms")?1:1e3),hs=["b-aligned-above","b-aligned-right","b-aligned-below","b-aligned-left"],gs={configurable:!0,get:()=>!1},ps=/(?:L\{([^}.]+)\})/,localizeTooltip=(e,n)=>"L{Tooltip."+n+"}",ms=/^([trblc])(\d*)-([trblc])(\d*)$/i,mergeAlign=(e,n)=>(ms.test(e)&&(e={align:e}),ms.test(n)&&(n={align:n}),H.merge(e,n)),fs=/^[\w.]+$/,bs=class extends(re.mixin(Localizable_default,Events_default,Delayable_default,Identifiable_default,Factoryable_default,KeyMap_default,RTL_default)){static mergeCls(e,n){return n&&e?e=new Xt(n).assign("string"==typeof e?new Xt(e):e):e&&!e.isDomClassList&&(e=new Xt(e)),e}static get $name(){return"Widget"}static get type(){return"widget"}static get configurable(){return{element:!0,callOnFunctions:!0,id:"",html:null,content:null,cls:{$config:{merge:"classList"},value:null},ui:{$config:{merge:"classList"},value:null},collapsify:null,contentElementCls:{$config:{merge:"classList"},value:null},defaultCls:{$config:{merge:"classList"},value:null},dock:null,forwardTwinEvents:{$config:{merge:"classList"},value:null},parent:null,tab:null,elementAttributes:null,htmlCls:{$config:{merge:"classList"},value:{"b-html":1}},style:null,disabled:null,readOnly:{value:null,default:!1,$config:null},ignoreParentReadOnly:null,adopt:null,appendTo:null,insertBefore:null,insertFirst:null,dataset:null,tooltip:{$config:["lazy","nullify"],value:null},showTooltipWhenDisabled:!0,preventTooltipOnTouch:null,monitorResize:{$config:["lazy","nullify"],value:null},masked:{$config:"nullify",value:null},maskDefaults:{target:"element"},cache:{},floating:null,positioned:null,draggable:null,align:{$config:{merge:mergeAlign},value:"t-b"},centered:null,constrainTo:void 0,anchor:null,owner:null,scrollAction:null,hideAnimation:{$config:{merge:mergeAnim},value:null},showAnimation:{$config:{merge:mergeAnim},value:null},x:null,y:null,scrollable:{$config:["lazy","nullify"],value:null},scrollerClass:Xo,defaultBindProperty:"html",defaultAction:null,overflowable:{value:null,default:!0,$config:null},width:null,height:null,maxHeight:null,maxWidth:null,minWidth:null,minHeight:null,scaleToFitWidth:null,allowGrowWidth:!0,margin:null,flex:null,weight:null,alignSelf:null,ripple:null,title:null,localizableProperties:["title","ariaLabel","ariaDescription"],requireSize:!1,ref:null,hidden:null,textAlign:null,ignoreScrollDuration:500,tag:"div",recomposeAsync:null,rootElement:null,htmlMutationObserver:{$config:["lazy","nullify"],value:{childList:!0,subtree:!0}},role:{$config:"lazy",value:"presentation"},ariaLabel:{$config:"lazy",value:null},ariaDescription:{$config:"lazy",value:null},ariaElement:"element",ariaHasPopup:null,realignTimeout:300,testConfig:{ignoreScrollDuration:100,realignTimeout:50}}}static get prototypeProperties(){return{hasGeneratedId:!1,innerItem:!0}}static get declarable(){return["renderConfigs"]}static get delayable(){return{recompose:"raf",doHideOrRealign:"raf",onAlignConstraintChange:"raf"}}static get factoryable(){return{defaultType:"widget"}}static get identifiable(){return{}}static get all(){return super.all}static get recomposeAsync(){return bs._recomposeAsync}static set recomposeAsync(e){if(bs._recomposeAsync=e,null!=e){const{all:n}=bs;for(let r=0;r<n.length;++r)n[r].isComposable&&(n[r].recomposeAsync=e)}}isType(e,n){return bs.isType(this,e,n)}static setupRenderConfigs(e,n){const r=n.getInherited("renderConfigs"),{renderConfigs:i}=e;if(i){if(Array.isArray(i))for(const e of i)r[e]=!0;else Et.assign(r,i);r[ss]=null}}construct(e={},...n){const r=this,{domSyncCallback:i}=r;r.configureAriaDescription=e.ariaDescription,r._isAnimatingCounter=0,r.alignConstrained=0,r.byRef=Object.create(null),r.onTargetResize=r.onTargetResize.bind(r),r.onFullscreenChange=r.onFullscreenChange.bind(r),r.domSyncCallback=i.$nullFn?null:i.bind(r),r._isUserAction=!1,super.construct(e,...n);const{recomposeAsync:o}=bs;null!=o&&null==r.recomposeAsync&&(r.recomposeAsync=o),r.finalizeInit()}startConfigure(e){super.startConfigure(e);const n=this,{adopt:r,element:i}=n;r&&(n.adoptElement(i,r,e.id),n.updateElement(n._element,i))}finalizeInit(){var e;const n=this,r=n.insertBefore||n.appendTo||n.insertFirst||n.adopt;r&&(n.owner||(null==(e=r.nodeType?r:document.getElementById(r))?void 0:e.isConnected)?n.render():(n.onFirstResizeAfterConnect=n.onFirstResizeAfterConnect.bind(n),Ho.addResizeListener(r,n.onFirstResizeAfterConnect)))}onFirstResizeAfterConnect(e){Ho.removeResizeListener(e,this.onFirstResizeAfterConnect),this.isDestroyed||this.rendered||this.render()}doDestroy(){var e,n,r,i;const o=this,{preExistingElements:s,element:a,_refListeners:l,adopt:c}=o;if(jo.element===a&&jo.exit(),l&&(Object.values(l,(e=>e())),o._refListeners=null),a){const i=!o._tooltip&&o._rootElement&&(null==(e=bs.Tooltip)?void 0:e.getSharedTooltip(o._rootElement,!0));if((null==i?void 0:i.owner)===o&&(i.owner=null,i.hide()),o.onExitFullscreen(),o.clearTimeout(o.scrollListenerTimeout),o.clearTimeout(o.resizeListenerTimeout),o.removeTransientListeners(),o.floating||o.positioned?o.hide(!1):o.revertFocus(),Ho.removeResizeListener(a.parentElement,o.onParentElementResize),Ho.removeResizeListener(a,o.onElementResize),c){for(let e=Array.from(a.childNodes),n=0,{length:r}=e;n<r;n++){const r=e[n];s.includes(r)||r===o.floatRoot||r.remove()}a.className=o.adoptedElementClassName,a.style.cssText=o.adoptedElementCssText}null==(n=o.dragEventDetacher)||n.call(o),null==(r=o.dragOverEventDetacher)||r.call(o),o.dragGhost.remove()}null==(i=o.connectedObserver)||i.disconnect(),super.doDestroy(),c||a.remove()}get assignValueDefaults(){return ns}get valueName(){return this.name||this.ref||this.id}getValueName(e){return(e=e&&"object"==typeof e?e.onlyName:e)?this.name:this.valueName}assignFieldValue(e,n,r){const i=this,o=i.defaultBindProperty;o in i&&(i[o]=r)}assignValue(e,n=ns){const r=this,i=r[is],o=r.getValueName(n);!o||e&&!(o in e)||(!1===n.highlight&&(r[is]=!1),r.assignFieldValue(e,o,e?e[o]:null),r[is]=i)}gatherValue(e){const n=this,r=n.defaultBindProperty;n.constructor!==bs&&r in n&&(e[n.name||n.ref||n.id]=n[r])}gatherValues(e){this.eachWidget((n=>n.gatherValue(e)),!1)}get forwardTwinEvents(){const e=this._forwardTwinEvents;return e&&Et.getTruthyKeys(e)}configureOverflowTwin(e){var n;const r=this;let i=Et.clone(r.initialConfig);return delete i.id,i.hidden=!1,i.type=r.type,i._overflowTwinOrigin=r,i.disabled=r.disabled,"value"in r&&(i.value=r.value),null==(n=r.forwardTwinEvents)||n.forEach((e=>{delete i[`on${w.capitalize(e)}`]})),e&&(i="function"==typeof e?e(i)||i:Et.assign(i,e)),i}createOverflowTwin(e){var n;const r=this,i=r.configureOverflowTwin(e),o=bs.create(i);return null==(n=r.forwardTwinEvents)||n.forEach((e=>{o.ion({[e]:e=>{r.overflowTwin===e.source&&(delete(e=Et.assign({},e)).source,r.trigger(e.type,e))}})})),o}ensureOverflowTwin(e,n){let{overflowTwin:r}=this;return r||(this.overflowTwin=r=this.createOverflowTwin(e),null==n||n(r)),r}get isComposable(){return!this.compose.$nullFn}adoptElement(e,n,r){var i;const o=this,s="string"==typeof n?document.getElementById(n):n,a=bs.fromElement(s);if(a&&a.adopt&&a!==o){("string"==typeof a.adopt?document.getElementById(a.adopt):a.adopt)===s&&a.destroy()}o.preExistingElements=Array.from(s.childNodes),o.adoptedElementClassName=s.className,o.adoptedElementCssText=s.style.cssText,s.id&&!r&&(o.id=e.id=s.id),Gn.syncAttributes(e,s);for(let n=0,{length:r}=e.childNodes;n<r;n++)s.appendChild(e.childNodes[0]);delete o._contentRange,o._element=s;const l=e.lastDomConfig,c=null==l?void 0:l.listeners;c&&o.isComposable&&(null==(i=c.un)||i.call(c),addElementListeners(o,s,l)),s.lastDomConfig=l||s.lastDomConfig,s.$refOwnerId=o.id,o.scaleToFitWidth||o.getConfig("monitorResize")}addRefAccessor(e,n){const{prototype:r}=this.constructor;us(r,n,{writable:!0,value:null}),us(r,e,{get(){return this.recompose.flush(),this[n]},set(e){this[n]=e}})}attachRef(e,n,r){const i=this,o="_"+e;n.dataset&&(n.dataset.ownerCmp=i.id),i.isComposable&&(o in i||i.addRefAccessor(e,o),addElementListeners(i,n,r,e)),i.byRef[e]=n,i[e]=n}detachRef(e,n,r){const i=this,o=i._refListeners;(null==o?void 0:o[e])&&(o[e](),delete o[e]),i[e]=null,delete i.byRef[e]}afterRecompose(){}compose(){return{class:Xt.normalize(this.widgetClassList,"object")}}doCompose(){const e=this,{$meta:n}=e,r=n.hierarchy,i=n.renderConfigs||n.getInherited("renderConfigs");let o,s,a,l,{composers:c}=n,d=null;if(e.recompose.suspend(),!c){for(n.composers=c=[],a=r.indexOf(bs);a<r.length;++a)l=r[a].prototype,ds(l,"compose")&&c.push(l);ds(i,ss)||(i[ss]={get(e){i[e]=!0}})}for(e.configObserver=i[ss],a=0;a<c.length;++a)o=c[a].compose.call(e,d),d=d?Gn.merge(d,o):o;return ds(e,"compose")&&(o=e.compose)&&(o=o.call(e,d),Gn.merge(d,o)),e.configObserver=null,Gn.normalizeChildren(d,((n,r)=>{r&&(s="_"+n,s in e||e.addRefAccessor(n,s))}))}get element(){return this.isComposable&&!this.isDestroying&&this.recompose.flush(),this._element}domSyncCallback(e){}changeElement(e){const n=this,r=n.isComposable;return r&&(e=n.doCompose()),"string"==typeof e?e=Gn.createElementFromTemplate(e):Et.isObject(e)?(e=Gn.createElement(e,{refOwner:n,callback:n.domSyncCallback}),n.recompose.resume(),r&&addElementListeners(n,e,e.lastDomConfig)):Gn.isReactElement(n.peekConfig("html"))?e=document.createElement("div"):1!==e.nodeType&&(e=Gn.createElementFromTemplate(n.template(n))),e.id=n.id,n.elementAttributes&&Gn.setAttributes(e,n.elementAttributes),e}updateElement(e){const n=this,{className:r}=e,{contentElement:i,contentElementCls:o,isComposable:s}=n,a=i!==e,l=!s&&e.querySelectorAll("[data-reference]"),c=s?[]:n.widgetClassList;let d=(a||!s)&&n.uiClasses;if(r&&c.unshift(r),n._hidden&&c.push("b-hidden"),n._readOnly&&c.push("b-readonly"),he.noThrow(e,"remove"),d?((null==o?void 0:o.value)&&(d=d.slice(),d.push(o.value)),d=d.join(" ")):d=null==o?void 0:o.value,d&&(a?i.className+=" "+d:c.push(d)),!n.parent){const{defaultCls:e}=n,{outerCls:r}=bs;c.push(...e?r.filter((n=>!(n in e)||e[n])):r)}if(e.className=c.join(" "),l)for(let e,r=0;r<l.length;++r)e=l[r],n.attachRef(e.getAttribute("data-reference"),e),e.removeAttribute("data-reference");n.adopt||n.scaleToFitWidth||n.getConfig("monitorResize"),n.getConfig("role"),n.getConfig("ariaLabel"),n.getConfig("ariaDescription"),n._html&&n.getConfig("htmlMutationObserver"),n.trigger("elementCreated",{element:e})}updateAriaDescription(e){const{ariaElement:n}=this,r=`${this.id}-aria-desc-el`;if(e){const i=this._ariaDescEl||(this._ariaDescEl=Gn.createElement({className:"b-aria-desc-element",id:r,parent:n}));i.innerText=e.match(ps)?this.L(e,this):e,n.setAttribute("aria-describedBy",i.id)}else n.getAttribute("aria-describedby")===r&&n.removeAttribute("aria-describedBy")}updateAriaLabel(e){Gn.setAttributes(this.ariaElement,{"aria-label":(null==e?void 0:e.match(ps))?this.L(e,this):e})}updateAriaHasPopup(e){Gn.setAttributes(this.ariaElement,{"aria-haspopup":e})}updateRole(e){var n,r;e?null==(n=this.ariaElement)||n.setAttribute("role",e):null==(r=this.ariaElement)||r.removeAttribute("role")}get ariaElement(){this.getConfig("element");const{_ariaElement:e}=this;return e.nodeType===Node.ELEMENT_NODE?e:Et.getPath(this,e)}isCollapsified({collapsed:e,alt:n}){const{collapsify:r}=this,i=null==r;return n?"overlay"===r||i&&e:!1===r||"hide"===r||i&&!e}async recompose(){const e=this,n={targetElement:e.element,domConfig:e.doCompose(),refOwner:e,callback:e.domSyncCallback,strict:!0};if(e.transitionRecompose){if(e.isTransitioningDom=!0,await Gn.transition(Et.assign({element:e.element,action(){$o.sync(n)}},e.transitionRecompose)),e.isDestroyed)return;e.isTransitioningDom=!1,e.trigger("transitionedRecompose")}else $o.sync(n);n.changed&&(e.afterRecompose(),e.trigger("recompose")),e.resumeRecompose()}resumeRecompose(){this.recompose.resume()}changeElementRef(e){if("string"==typeof e){const n=e;if(!(e=document.getElementById(n)))throw new Error(`No element found with id '${n}'`)}return e}changeAppendTo(e){return this.changeElementRef(e)}updateAppendTo(e){!this.isConfiguring&&e&&this.render()}changeInsertBefore(e){return this.changeElementRef(e)}updateInsertBefore(e){!this.isConfiguring&&e&&this.render()}changeInsertFirst(e){return this.changeElementRef(e)}updateInsertFirst(e){!this.isConfiguring&&e&&this.render()}getRenderContext(e=this,n){let r=n||e.appendTo,{insertFirst:i,insertBefore:o}=e;return i&&(r=i,o=r.firstChild),o&&(r||(r=o.parentElement)),[r,o||void 0]}render(e,n=!0){const r=this,{element:i}=r,[o,s]=r.getRenderContext(r,e);r.emptyCache(),r.syncElement&&r.currentElement?Gn.sync(i,r.currentElement):(null==o||o.insertBefore(i,s),r.currentElement=i),bs.fromElement(i.parentElement)&&i.classList.remove(...bs.outerCls),super.render(o,n),r.rendered=!0,r.getConfig("role"),n&&(r.getConfig("contentRange"),r.triggerPaint()),r.setupFocusListeners()}template({tag:e,html:n,htmlCls:r,name:i}){const o=this;"string"==typeof n&&fs.test(n)&&o.resolveCallback(n,o,!1)&&(n=o.callback(n,o,[o]));const s=(null==n?void 0:n.call)?n.call(o,o):n;return`<${e} class="${s?r:""}" ${i?`data-name="${i}"`:""}>${s||""}</${e}>`}updateRecomposeAsync(e){this.recompose.immediate=!e}onConfigChange({name:e}){var n;this._element&&!this.isDestroying&&(null==(n=this.$meta.renderConfigs)?void 0:n[e])&&this.recompose()}preProcessCurrentConfigs(e){super.preProcessCurrentConfigs(e),delete e.parent}getConfigValue(e,n){return"style"===e?this._style:super.getConfigValue(e,n)}getCurrentConfig(e){const n=super.getCurrentConfig(e);return(null==e?void 0:e.depth)>0&&(n.type=this.type),n}get dataset(){return this.element.dataset}changeDataset(e){Object.assign(this.dataset,e)}get dragGhost(){return this.constructor._dragGhost||(this.constructor._dragGhost=Gn.createElement({html:" ",style:"position:absolute;top:-10000em;left:-10000em"}))}updateParent(e){const{_element:n}=this;n&&n.classList[e?"remove":"add"](...bs.outerCls)}get constrainTo(){let e=this._constrainTo;if(e=void 0===e?globalThis:(null==e?void 0:e.nodeType)===Node.DOCUMENT_FRAGMENT_NODE?e.host||e.ownerDocument:e,this.positioned){const{offsetParent:n}=this.element;if(n&&"hidden"===Gn.getStyleValue(n,"overflow"))e=Gt.from(n).moveTo(0,0);else if(e&&!e.isRectangle){const r=e===document||e===globalThis;e=Gt.from(e,n),r&&e.translate(globalThis.pageXOffset,globalThis.pageYOffset)}}return e}updateCentered(e){const{element:n,_anchorElement:r}=this;if(e&&!this.floating&&!this.positioned)throw new Error("`centered` is only relevant when a Widget is `floating` or `positioned`");e?(n.classList.add("b-centered"),n.style.transform=n.style.left=n.style.top="",null==r||r.classList.add("b-hide-display"),n.classList.remove("b-anchored")):n.classList.remove("b-centered")}get contentElement(){return this.element}get contentRange(){const e=this,{contentElement:n}=e,r=e._contentRange||(e._contentRange=new Range);return r.collapsed&&(r.setStart(n,e.contentRangeStartOffset||0),r.setEnd(n,e.contentRangeEndOffset||n.childNodes.length)),r}fixRefOwnerId(e,n,r){if(e.$refOwnerId===r){e.$refOwnerId=n;for(let{childNodes:i}=e,o=i.length;o-- >0;)this.fixRefOwnerId(i[o],n,r)}}get placement(){var e;const{element:n}=this;let r,i,o;if((null==n?void 0:n.offsetParent)&&!cs.test(Gn.getStyleValue(n,"position"))){const s=n.nextElementSibling,a=n.previousElementSibling,l=!s&&a;i=Gn.getStyleValue(n.parentElement,"flex-direction"),i?i=i.startsWith("row")?"h":"v":(r=null==(e=s||a)?void 0:e.getBoundingClientRect(),o=r&&n.getBoundingClientRect(),i=r&&Math.abs(r.top-o.top)<Math.abs(r.left-o.left)?"h":"v"),i+="h"===i?l?"r":"l":l?"b":"t"}return i}updateId(e,n){if(super.updateId(e,n),n){const{byRef:r,element:i}=this;for(const n in r)r[n].dataset&&(r[n].dataset.ownerCmp=e);i.id=e,this.fixRefOwnerId(i,e,n)}}get style(){const{element:e}=this;return(null==e?void 0:e.ownerDocument.defaultView.getComputedStyle(e))||this._style}updateStyle(e){this.element&&Gn.applyStyle(this.element,e)}updateTitle(e){this.titleElement&&(this.titleElement.innerHTML=e)}beforeAlignTo(e){}alignTo(e){var n;const r=this,{lastAlignSpec:i,element:o}=r,{offsetParent:s,style:a,classList:l}=o;if(i&&(i.monitorIntersection&&r.intersectionObserver.unobserve(i.target),isFinite(i.zone)&&o.classList.remove(hs[i.zone])),!e)return r.removeTransientListeners(),void(r.anchor=r.lastAlignSpec=null);r.beforeAlignTo(e),(e.nodeType===Element.ELEMENT_NODE||e.isWidget||"Point"===e.$$name)&&(e={target:e}),r.releaseSizeConstraints();const{scrollable:d,constrainTo:u}=r,h=r.positioned&&"fixed"!==Gn.getStyleValue(o,"position"),g=r.scale||1,p=e.target,m=e.domEvent||e.event||p,f=(null==p?void 0:p.isRectangle)?p:(null==p?void 0:p.element)||p,b=Gt.from(o,h?s:null,!0),{width:v,height:y}=b,w=(null==f?void 0:f.nodeType)===Element.ELEMENT_NODE,C=(null==(n=null==m?void 0:m.target)?void 0:n.nodeType)===Element.ELEMENT_NODE,S=(e=e.realignTarget?e:Et.assign({aligningToEvent:C,aligningToElement:w,constrainTo:u,align:"b-t",axisLock:r.axisLock,anchor:r.anchor},r.align,e)).minWidth||r.minWidth,x=e.minHeight||r.minHeight;if(b.isAlignRectangle=!0,S&&(b.minWidth=S*g),x&&(b.minHeight=x*g),r.lastAlignSpec=e,C)delete e.target,e.domEvent=m,e.anchoredTo=m.target,e.position=new Zt(m.clientX+1,m.clientY+1);else if(w&&(e.target=f,hasLayout(f instanceof SVGElement?f.closest("svg"):f))){if((e=Object.setPrototypeOf({},e)).target=r.lastAlignSpec.targetRect=e.realignTarget||(e.allowTargetOut?Gt.from(f,h?s:null,!h):Gn.isInView(f,!1,r)),!e.target){const e=r.hide();return r.isDestroyed||(r.lastAlignSpec.targetOutOfView=!0),e}e.target.height=Math.max(e.target.height,1),e.target.width=Math.max(e.target.width,1),r.lastAlignSpec.anchoredTo=f}e.anchor&&(e.anchorSize=r.anchorSize,o.contains(r.anchorPathElement)||o.appendChild(r.anchorElement)),r.isAligning=!0,r.trigger("beforeAlign",e),r.isAligning=!1,e.rtl=r.rtl,(e.align.includes("s")||e.align.includes("e"))&&(r.rtl?e.align=e.align.replace(/s/g,"r").replace(/e/g,"l"):e.align=e.align.replace(/s/g,"l").replace(/e/g,"r"));const D=r.lastAlignSpec.result=b.alignTo(e);let{align:E,anchor:R,x:k,y:T,width:M,height:A,overlap:I}=D;if(r.lastAlignSpec.zone=D.zone,A!=y&&("configuredHeight"in r||(r.configuredHeight=a.height),r.height=A/g,r.minHeight||(a.minHeight="unset"),r.alignConstrained=1|r.alignConstrained,d&&(d.overflowY=!0)),M!=v&&("configuredWidth"in r||(r.configuredWidth=a.width),r.width=M/g,r.minWidth||(a.minWidth="unset"),r.alignConstrained=2|r.alignConstrained,d&&(d.overflowX=d.clientWidth>d.scrollWidth)),E&&r.alignConstrained){e.align=E;const n=r.lastAlignSpec.result=Gt.from(o,h?s:null,!0).alignTo(e);R=n.anchor,k=n.x,T=n.y,M=n.width,A=n.height}if(r.centered||r.setXY(k,T),!D.overlap&&isFinite(D.zone)&&l.add(hs[D.zone]),null==R?void 0:R.edge){const{edge:e}=R,{anchorElement:n}=r,i=Gt.from(o),s=[];"top"===e||"bottom"===e?(s[0]=R.x,s[1]="top"===e?1:i.height-1):(s[0]="left"===e?1:i.width-1,s[1]=R.y),n.classList.add("b-hide-display");let a=Gn.childFromPoint(o,...s);if((null==a?void 0:a.matches(":hover,:focus"))&&o.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY&&(a=a.parentNode),a&&a!==document){let e=Gn.getStyleValue(a,"background-color");for(;e.match(os)&&"absolute"!==Gn.getStyleValue(a,"position")&&(a=a.parentNode,a!==document);)e=Gn.getStyleValue(a,"background-color");e.match(os)?r.anchorPathElement.setAttribute("fill",r.defaultAnchorBackgroundColor):r.anchorPathElement.setAttribute("fill",e)}n.classList.remove("b-hide-display"),n.style.transform="",n.className=`b-anchor b-anchor-${e}`,R.x&&(R.x/=g),R.y&&(R.y/=g),Gn.setTranslateXY(n,R.x,R.y),l.add("b-anchored")}else r._anchorElement&&(r.anchorElement.classList.add("b-hide-display"),l.remove("b-anchored"));if(!w){a.pointerEvents="none";const e=Gn.elementFromPoint(k,T);r.owns(e)||(r.lastAlignSpec.anchoredTo=e),a.pointerEvents=""}if(("realign"===r.scrollAction&&w||"hide"===r.scrollAction)&&!r.documentScrollListener){if(r.clearTimeout(r.scrollListenerTimeout),e.monitorTargetMutation&&!r.targetObserver){(r.targetObserver||(r.targetObserver=new MutationObserver(r.onTargetParentMutation.bind(r)))).observe(Gn.getRootElement(f),{childList:!0,attributes:!0,subtree:!0})}r.scrollListenerTimeout=r.setTimeout((()=>{var e,n;const i=null==(n=(e=w?f:r.lastAlignSpec.anchoredTo).getRootNode)?void 0:n.call(e);r.documentScrollListener=cn.addListener(document,"scroll","doHideOrRealign",{capture:!0,thisObj:r}),(null==i?void 0:i.mode)&&(r.targetRootScrollListener=cn.addListener(i,"scroll","doHideOrRealign",{capture:!0,thisObj:r}))}),"hide"===r.scrollAction?r.ignoreScrollDuration:0)}if(w&&(e.monitorResize&&!r.targetResizeListener&&(Ho.addResizeListener(f,r.onTargetResize),r.targetResizeListener=!0),e.monitorIntersection&&!(I||f.contains(o)||f.ownerSVGElement)&&r.intersectionObserver.observe(f)),!c.isAndroid&&!r.constrainListeners){const e=(null==u?void 0:u.isRectangle)?globalThis:u;r.clearTimeout(r.resizeListenerTimeout),r.resizeListenerTimeout=r.setTimeout((()=>{r.constrainListeners=!0,Ho.addResizeListener(e||globalThis,r.onAlignConstraintChange)}),r.ignoreScrollDuration)}}onTargetParentMutation(e){var n;const{element:r,lastAlignSpec:i}=this;(null==i?void 0:i.aligningToElement)&&((null==(n=i.target)?void 0:n.isConnected)?e.some((({target:e})=>e.contains(i.target)&&!r.contains(e)))&&this.realign():this.hide())}get intersectionObserver(){return this._intersectionObserver||(this._intersectionObserver=new IntersectionObserver(this.onTargetIntersectionchange.bind(this),{root:c.isSafari?this.rootElement:this.rootElement.ownerDocument}))}onTargetIntersectionchange(e){if(!this.isDestroyed){const n=e[e.length-1];n.isIntersecting||this.onAlignTargetOutOfView(n.target)}}onTargetResize(){const{lastAlignSpec:e}=this;if(e){const{width:n,height:r}=e.targetRect,{width:i,height:o}=e.target.getBoundingClientRect();i===n&&o===r||this.onAlignConstraintChange(...arguments)}}onAlignTargetOutOfView(e){this.hide(),this.lastAlignSpec&&(this.lastAlignSpec.targetOutOfView=!0)}onAlignConstraintChange(e,n,{height:r}){const{style:i}=this.contentElement,{overflowY:o}=i;this.setTimeout(this.realign,50),n&&r>n.height&&(i.overflowY="hidden",this.requestAnimationFrame((()=>i.overflowY=o)))}realign(){const e=this,{lastAlignSpec:n}=e;if((e.floating||e.positioned)&&n&&e.isVisible){if(n.aligningToElement){const r=n.target.contains(this.element),i=Gn.isInView(n.target,!1,e);if(!(n.allowTargetOut||hasLayout(n.target)&&i))return e.hide(),void(e.isDestroyed||(e.lastAlignSpec.targetOutOfView=!0));n.realignTarget=r?null:i}Gn.addTemporaryClass(e.element,"b-realigning",e.realignTimeout,e),e.alignTo(n)}}rectangle(e,n,r){return this.rectangleOf("element",e,n,r)}rectangleOf(e,n,r,i){return"string"!=typeof n?(i=r,r=n,n=""):"border"===n&&(n=""),"boolean"==typeof r&&(i=r,r=void 0),"element"!==e&&void 0===r&&(r=this.element),r=(null==r?void 0:r.isWidget)?r.element:r,Gt[n||"from"](this[e],r,i)}releaseSizeConstraints(){const e=this,{scrollable:n}=e,{style:r}=e.element;1&e.alignConstrained&&(e.height=e.configuredHeight,r.minHeight=e._minHeight||"",n&&(n.overflowY=n.config.overflowY)),2&e.alignConstrained&&(e.width=e.configuredWidth,r.minWidth=e._minWidth||"",n&&(n.overflowX=n.config.overflowX)),e.alignConstrained=0}toFront(){const{element:e}=this,n=this.floating?this.floatRoot:this.positioned?null==e?void 0:e.parentNode:null,r=document.createDocumentFragment();for(let i,o=e.nextSibling;o;o=i)i=o.nextSibling,n.contains(o)&&!this.owns(o)&&r.appendChild(o);n.insertBefore(r,e)}updateRef(e){this.element.dataset.ref=e}get overflowElement(){return this.contentElement}get maxHeightElement(){return this.element}changeAlign(e){return"string"==typeof e?{align:e}:e}changeScrollable(e,n){return"boolean"==typeof e&&(e={overflowX:e,overflowY:e}),e?(e.element=this.overflowElement,e.widget=this,e.isScroller||(e=n?n.setConfig(e):new this.scrollerClass(e)),e.syncOverflowState()):null==n||n.destroy(),e}handleReactElement(e){const n=this.closest((e=>e.reactComponent));(null==n?void 0:n.reactComponent)&&n.reactComponent.processWidgetContent({reactElement:e,widget:this,reactComponent:n.reactComponent})}get html(){return this.initializingElement||!this.element?this.content||this._html:this.contentElement.innerHTML}updateHtml(e){const n=this,r=null==e,{element:i,contentElement:o,htmlCls:s}=n;if(i||!Gn.isReactElement(e)){if(i){n.updatingHtml=!0;const a=o===i&&n._anchorElement;s&&s.values.forEach((e=>i.classList[r?"remove":"add"](e))),a&&i.removeChild(a),e&&"object"==typeof e?Gn.isReactElement(e)?n.handleReactElement(e):$o.sync({domConfig:{...e,onlyChildren:!0},targetElement:n.contentElement}):n.contentElement.innerHTML=r?"":e,n.getConfig("htmlMutationObserver"),a&&i.appendChild(a),n.isComposable?n.recompose():(n.floating||n.positioned)&&(n.isAligning||n.realign())}}else n.whenVisible((()=>n.handleReactElement(e)))}changeHtmlMutationObserver(e,n){const r=this,{contentElement:i}=r;if(null==n||n.disconnect(),e){const n=new MutationObserver((()=>{r.updatingHtml?r.updatingHtml=!1:r._html=i.innerHTML}));return n.observe(i,e),n}}updateContent(e){const n=this,r=null==e,{element:i,htmlCls:o}=n;if(i){const{contentRange:s}=n;o&&o.values.forEach((e=>i.classList[r?"remove":"add"](e))),i.isConnected?(s.deleteContents(),r||s.insertNode(Gn.createElementFromTemplate(e,{fragment:!0}))):n.contentElement.innerHTML=e,n.contentRangeStartOffset=s.startOffset,n.contentRangeEndOffset=s.endOffset,!n.floating&&!n.positioned||n.isAligning||n.realign()}}onThemeChange(){var e;(null==(e=this.anchorElement)?void 0:e.offsetParent)&&(this._anchorSize=null,this.realign())}get anchorSize(){const e=this;let n=this._anchorSize;if(!n){const r=parseFloat(Gn.getStyleValue(e.element,"border-top-width")),i=Gn.getStyleValue(e.element,"border-top-color"),o=e.anchorElement,{className:s}=o,a=o.firstElementChild,l=e.anchorPathElement=a.lastElementChild,c=e._hidden;o.className="b-anchor b-anchor-top";let d=Gn.getStyleValue(e.contentElement,"background-color");d.match(os)&&(d=Gn.getStyleValue(e.element,"background-color")),e.defaultAnchorBackgroundColor=d,n=o.getBoundingClientRect();const[u,h]=n=e._anchorSize=[n.width,n.height];o.className=s,a.setAttribute("height",h+r),a.setAttribute("width",u),l.setAttribute("d",`M0,${h}L${u/2},0.5L${u},${h}`),r&&(l.setAttribute("stroke-width",r),l.setAttribute("stroke",i)),n[1]-=r,c&&e.element.classList.add("b-hidden"),e.themeChangeListener||(e.themeChangeListener=or.ion({theme:"onThemeChange",thisObj:e})),e.anchorPathElement.setAttribute("fill",e.defaultAnchorBackgroundColor)}return n}get anchorElement(){const e=this;if(!e._anchorElement){const n=e.floating,r=`${e.id}-shadow-filter`;e._anchorElement=Gn.createElement({parent:e.element,className:"b-anchor b-anchor-top",children:[{tag:"svg",ns:"http://www.w3.org/2000/svg",version:"1.1",class:"b-pointer-el",children:[n?{tag:"defs",children:[{tag:"filter",id:r,children:[{tag:"feDropShadow",dx:0,dy:-1,stdDeviation:1,"flood-opacity":.2}]}]}:null,{tag:"path",[n?"filter":""]:`url(#${r})`}]}]})}return e._anchorElement}updateAnchor(e){this._anchorElement&&this._anchorElement.classList[e?"remove":"add"]("b-hide-display")}updateDraggable(e){var n,r,i;const o=this,{element:s}=o;e?(o.dragEventDetacher=cn.addListener({element:s,dragstart:"onWidgetDragStart",dragend:"onWidgetDragEnd",thisObj:o}),o.dragDetacher=cn.on({element:s,mousedown(e){const{target:n}=e,r=bs.fromElement(n);(!e.target.closest(".b-field-inner")&&r===this||this.strips&&Object.values(this.strips).includes(r))&&s.setAttribute("draggable","true")},thisObj:o})):(null==(n=o.dragEventDetacher)||n.call(o),null==(r=o.dragOverEventDetacher)||r.call(o),null==(i=o.dragDetacher)||i.call(o))}onWidgetDragStart(e){var n;const r=this;if(!r.validateDragStartEvent(e))return;const{element:i,align:o,constrainTo:s}=r,a=r.positioned&&"fixed"!==Gn.getStyleValue(i,"position"),l=a?i.parentElement:r.rootElement,d=Gt.from(i,a?l:null),u=e.clientX,h=e.clientY,g=document.scrollingElement||document.body,[p,m]=a?Gn.getOffsetXY(i,l):r.getXY(),f=null==(n=a?Gt.content(l).moveTo(0,0):s&&((null==s?void 0:s.isRectangle)?s:Gt.from(s)))?void 0:n.deflate(o.constrainPadding||0),b={element:l,dragover:e=>{i.classList.remove("b-centered"),d.moveTo(p+e.clientX-u-(a?0:g.scrollLeft),m+e.clientY-h-(a?0:g.scrollTop)),f&&d.constrainTo(f),Gn.setTranslateXY(i,d.x,d.y)}};c.isTouchDevice&&(b.touchmove=e=>e.preventDefault()),r.floatRoot.appendChild(r.dragGhost),r.setDragImage(e),e.dataTransfer.effectAllowed="none",r.dragOverEventDetacher=cn.addListener(b),r.alignTo()}validateDragStartEvent(e){var n;const{element:r}=this,i=Gn.elementFromPoint(e.clientX,e.clientY),{handleSelector:o}=this.draggable;if(o){const s=null==(n=ls.exec(o))?void 0:n[1];if(s){if(i.closest(`#${r.id} ${s}`))return e.preventDefault(),!1}else if(!i.closest(`#${r.id} ${o}`))return e.preventDefault(),!1}return!0}setDragImage(e){e.dataTransfer.setDragImage&&(e.dataTransfer.setData("application/node type",""),e.dataTransfer.setDragImage(this.dragGhost,-9999,-9999))}setStyle(e,n){return Gn.applyStyle(this.element,Et.isObject(e)?e:{[e]:n}),this}onWidgetDragEnd(){this.dragGhost.remove(),this.dragOverEventDetacher(),this.element.removeAttribute("draggable")}changeFloating(e){return Boolean(e)}changePositioned(e){return Boolean(e)}updatePositioned(e){this.element.classList[e?"add":"remove"]("b-positioned")}getXY(){return[Gn.getPageX(this.element),Gn.getPageY(this.element)]}setXY(e,n){const r=this,{element:i}=r;if(r.floating||r.positioned){if(null!=e&&(r._x=e),null!=n&&(r._y=n),"fixed"===Gn.getStyleValue(i,"position")){const r=i.getBoundingClientRect(),[o,s]=Gn.getTranslateXY(i),a=e-r.x,l=n-r.y;Gn.setTranslateXY(i,o+a,s+l)}else Gn.setTranslateXY(i,r._x||0,r._y||0);r.isConstructing?r.centered=!1:i.classList.remove("b-centered")}}get x(){return this.getXY()[0]}changeX(e){this.setXY(e)}get y(){return this.getXY()[1]}changeY(e){this.setXY(null,e)}get width(){const e=this,n=e.element;return e.monitorResize?(null==e._width&&(e._width=n.offsetWidth),e._width):n.offsetWidth}changeWidth(e){const n=this;Gn.setLength(n.element,"width",e),n._lastWidth=e,n._width=null,n._flex=null,n.element.style.flex=""}clearWidthCache(){this._width=null}get maxWidth(){return Gn.measureSize(this.element.style.maxWidth,this.element)}updateMaxWidth(e){Gn.setLength(this.element,"maxWidth",e)}get minWidth(){return Gn.measureSize(this.element.style.minWidth,this.element)}updateMinWidth(e){Gn.setLength(this.element,"minWidth",e)}updateFlex(e){this.getConfig("width"),"number"!=typeof e&&isNaN(e)||(e=`${e} ${e}`),this.element.style.flex=e,this.element.style.width=""}updateAlignSelf(e){this.element.style.alignSelf=e}updateMargin(e){this.element.style.margin=this.parseTRBL(e).join(" ")}updateTextAlign(e,n){n&&this.element.classList.remove(`b-text-align-${n}`),this.element.classList.add(`b-text-align-${e}`)}updatePlaceholder(e){this.input&&(null==e?this.input.removeAttribute("placeholder"):this.input.placeholder=e)}get height(){const e=this,n=e.element;return e.monitorResize?(null==e._height&&(e._height=n.offsetHeight),e._height):n.offsetHeight}changeHeight(e){Gn.setLength(this.element,"height",e),this._lastHeight=e,this._height=null}get maxHeight(){return Gn.measureSize(this.maxHeightElement.style.maxHeight,this.element)}updateMaxHeight(e){Gn.setLength(this.maxHeightElement,"maxHeight",e)}get minHeight(){return Gn.measureSize(this.element.style.minHeight,this.element)}updateMinHeight(e){Gn.setLength(this.element,"minHeight",e)}updateDisabled(e=!1){const{element:n,focusElement:r,ariaElement:i}=this;this.trigger("beforeUpdateDisabled",{disabled:e}),e&&(this.revertFocus(),this._disabled!==e)||(n&&(n.classList[e?"add":"remove"]("b-disabled"),r&&(r.disabled=e),i&&i.setAttribute("aria-disabled",e)),this.onDisabled(e))}onDisabled(e){}disable(){this.disabled=!0}enable(){this.disabled=!1}requestFullscreen(){const e=this,n=jo.request(e.floating?e.floatRoot:e.element);return jo.onFullscreenChange(e.onFullscreenChange),e.element.classList.add("b-fullscreen"),n}exitFullscreen(){return jo.exit()}onFullscreenChange(){jo.isFullscreen||this.onExitFullscreen()}onExitFullscreen(){jo.unFullscreenChange(this.onFullscreenChange),this.element.classList.remove("b-fullscreen")}get tooltip(){var e;if(this._tooltip)return this._tooltip;{const n=null==(e=bs.Tooltip)?void 0:e.getSharedTooltip(this.rootElement);if(n&&n.activeTarget===this._element&&n.isVisible)return n}}changeTooltip(e,n){var r;const i=this,{element:o}=i;if(e){if(!i.preventTooltipOnTouch||!c.isTouchDevice){if(e.isTooltip||"Object"===e.constructor.name||(e={html:"string"==typeof e?e:i.placeholder,textContent:!0}),i.configureAriaDescription||(i.ariaDescription=(null==(r=e.html)?void 0:r.match(ps))?e.html.replace(ps,localizeTooltip):e.html),!(null==n?void 0:n.isTooltip)&&!e.newInstance)return o.dataset.btip=!0,void(i.tipConfig=e);e.type="tooltip",e.forElement||(e.forElement=o),"showOnHover"in e||e.forSelector||(e.showOnHover=!0),"autoClose"in e||(e.autoClose=!0),e=bs.reconfigure(n,e,i),i.detachListeners("tooltipValueListener"),i.configureAriaDescription||e.ion({name:"tooltipValueListener",innerHtmlUpdate:"onTooltipValueChange",thisObj:i})}}else if(n){if(null!=e||!n.isTooltip)return void(n.html=null);n.destroy()}else delete o.dataset.btip;return e}onTooltipValueChange({value:e,source:n}){this.ariaDescription="string"==typeof e?e:n.contentElement.innerText}get tooltipText(){const e=this._tooltip;return e?e.isTooltip?e.contentElement.innerText:"string"==typeof e?e:e.html:this.tipConfig?this.tipConfig.html:void 0}get isVisible(){const e=this,{element:n}=e;let r;return Boolean(n&&!e._hidden&&!e.isDestroying&&n.isConnected&&(!e.requireSize||hasLayout(n))&&(!(r=e.containingWidget)||r.isVisible))}whenVisible(e,n=this,r,i=e){const o=this;o.isVisible&&o.isPainted?o.callback(e,n,r):(o.toCallWhenVisible||(o.toCallWhenVisible=new Map)).set(i,{callback:e,thisObj:n,args:r})}focus(){this.isFocusable&&Gn.focusWithoutScrolling(this.focusElement)}get focusElement(){}get isFocusable(){const e=!this.isDestroying&&this.isVisible&&!this.disabled&&this.focusElement;return e&&(e===document.body||e.offsetParent)}async show({align:e,animate:n=!0}={}){const r=this,{element:i,floating:o}=r,{style:s}=i,a=n&&r.showAnimation;let l,c,d=!r.isVisible;return d&&(d=r.trigger("beforeShow"),Et.isPromise(d)&&(d=await d)),!1===d||r.internalBeforeShow&&!1===r.internalBeforeShow()?Promise.resolve():new Promise((n=>{if(r.cancelHideShowAnimation(),r.updateCentered(r._centered),o){const e=r.floatRoot;e.contains(i)||(r.rendered?e.appendChild(r.element):r.render(e,!1)),s.transform.includes("scale")&&(r.scale=null,s.transform=s.transformOrigin="");const n=r.closest(isScaled);if(n){const{scale:e}=n;r.scale=e,s.transform=`scale(${e})`,s.transformOrigin="0 0"}}if(r._hidden=!1,i.classList.remove("b-hidden"),o&&!isVisible(i)&&(r.hide(!1),n()),r.onConfigChange({name:"hidden",value:!1,was:!0,config:r.$meta.configs.hidden}),a){l=Object.keys(a)[0],c=a[l];const e=r.currentAnimation={showing:!0,styleProp:l,resolve:n};r.isAnimating=!0,s.transition="none",s[l]=c.from,Gn.getStyleValue(i,l),r.currentAnimation.detacher=cn.onTransitionEnd({element:i,property:l,duration:parseDuration(c.duration)+20,handler:()=>r.afterHideShowAnimate(e),thisObj:r}),s.transition=`${l} ${c.duration} ease ${c.delay}`,s[l]=c.to}r.afterShow(e,a?null:n)}))}async showBy(e,n,r){const i=this,o=Array.isArray(e);if(o||"number"==typeof e){const i=o?e:[e,n];e=Object.assign({target:new Zt(i[0]+1,i[1]+1),matchSize:!1,align:"t0-b0"},o?n:r)}if(i.requireSize=!0,!i.isVisible)return i.show({align:e});Gn.addTemporaryClass(i.element,"b-realigning",300,i),i.alignTo(e)}async showByPoint(){return A.deprecate("Core","6.0.0","Widget.showByPoint() replaced by Widget.showBy() with the same signature"),this.showBy(...arguments)}afterShow(e,n){var r,i;const o=this;o.trigger("show"),o._configuredAnchorState=o.anchor,null==(i=null==(r=o.owner)?void 0:r.onChildShow)||i.call(r,o),o.triggerPaint(),(o.floating||o.positioned)&&(e?o.alignTo(e):o.centered?o.alignTo({target:o.constrainTo,align:"c-c"}):o.forElement&&o.alignTo(o.forElement)),null==n||n()}onChildHide(e){e.floating&&this.ariaElement.removeAttribute("aria-owns")}onChildShow(e){e.floating&&(this.ariaHasPopup=e.role,this.ariaElement.setAttribute("aria-owns",e.id))}triggerPaint(){const e=this,{element:n,toCallWhenVisible:r}=e,i=!e.isPainted;if(e.isVisible){if(i&&(e.getConfig("scrollable"),e.scaleToFitWidth&&!e.monitorResize&&(e.onParentElementResize=e.onParentElementResize.bind(e),Ho.addResizeListener(n.parentElement,e.onParentElementResize),e.updateScale()),!e.hideBryntumDomMessage&&(e.isTaskBoardBase||e.isGridBase||e.isCalendar)&&n.insertBefore(new Comment("POWERED BY BRYNTUM (https://bryntum.com)"),n.firstChild),e.onConnectedCallback&&globalThis.ResizeObserver&&(e.connectedObserver=new ResizeObserver((()=>{e.isElementConnected&&!n.isConnected?(e.onConnectedCallback(!1),e.isElementConnected=!1):!e.isElementConnected&&n.isConnected&&(e.onConnectedCallback(!0,null==e.isElementConnected),e.isElementConnected=!0)})),e.connectedObserver.observe(n))),e.eachWidget(widgetTriggerPaint,!1),i&&(e.rootElement=Gn.getRootElement(n),e.getConfig("tooltip"),!bs.Ripple&&bs.RippleClass&&(bs.Ripple=new bs.RippleClass({rootElement:e.rootElement})),globalThis.DocsBrowser&&e.floating&&e.closest((e=>{var n;return null==(n=e.element)?void 0:n.closest(".fiddlePanelResult,.b-owned-by-fiddle")}))&&n.classList.add("b-owned-by-fiddle")),e.isPainted=!0,i&&e.triggerConfigs("paint"),e.trigger("paint",{firstPaint:i}),null==r?void 0:r.size){for(const{callback:n,thisObj:i,args:o}of r.values())e.callback(n,i,o);r.clear()}i&&e.monitorResize&&!e.scaleToFitWidth&&Ho.onElementResize([{target:n}])}}cancelHideShowAnimation(){const e=this,{currentAnimation:n,element:r}=e;n&&(e.isAnimating=!1,r.classList.contains("b-hiding")&&(r.classList.remove("b-hiding"),e._hidden=!1),n.detacher(),n.resolve(),r.style.transition=r.style[n.styleProp]="",e.currentAnimation=null,e.trigger((n.showing?"show":"hide")+"AnimationEnd"))}afterHideShowAnimate(e){const n=this;e===n.currentAnimation&&(n.element.classList.remove("b-hiding"),n.cancelHideShowAnimation(),n._hidden&&n.afterHideAnimation())}suspendVisibility(){this._visibilitySuspended=(this._visibilitySuspended||0)+1,Object.defineProperty(this,"isVisible",gs)}resumeVisibility(e=!0){--this._visibilitySuspended||(delete this.isVisible,e&&this.triggerPaint())}hide(e=!0){return new Promise((n=>{const r=this,{element:i,lastAlignSpec:o}=r,{style:s}=i,a=e&&r.hideAnimation;if(r.clearTimeout(r.scrollListenerTimeout),r.clearTimeout(r.resizeListenerTimeout),!r._hidden&&!1!==r.trigger("beforeHide",{animate:e})){if(r._hidden=!0,o&&(o.targetOutOfView=null,o.monitorIntersection&&(r.intersectionObserver.takeRecords(),r.intersectionObserver.unobserve(o.target))),r.onConfigChange({name:"hidden",value:!0,was:!1,config:r.$meta.configs.hidden}),!i)return void n();if(i.contains(Gn.getActiveElement(i))&&r.revertFocus(!0),r.isDestroyed)return void n();if(r.cancelHideShowAnimation(),a){const e=Object.keys(a)[0],o=a[e];if(Number(getComputedStyle(r.element)[e])!==o.to){const a=r.currentAnimation={hiding:!0,styleProp:e,resolve:n};i.classList.add("b-hiding"),r.isAnimating=!0,r.currentAnimation.detacher=cn.onTransitionEnd({element:i,property:e,duration:parseDuration(o.duration)+20,handler:()=>r.afterHideShowAnimate(a),thisObj:r}),s[e]=o.from,Gn.getStyleValue(i,e),s.transition=`${e} ${o.duration} ease ${o.delay}`,s[e]=o.to}else i.classList.add("b-hidden")}else i.classList.add("b-hidden");r.afterHide(!a&&n,a)}}))}doHideOrRealign({target:e,isTrusted:n}){const r=this,{lastAlignSpec:i,element:o}=r,s=null==i?void 0:i.anchoredTo,a=null==i?void 0:i.target,l=null==i?void 0:i.position,c=Gn.getActiveElement(r);if(!n||!hasLayout(o)||e&&(o.contains(e)||e.nodeType===Element.ELEMENT_NODE&&r.owns(e)||e.nodeType===Element.DOCUMENT_NODE&&o.contains(c)&&as[c]&&globalThis.innerHeight<document.body.offsetHeight))return;if(i.aligningToElement){const e=Gn.isInView(a,!1,r);if(e&&e.equals(i.targetRect))return}const d="hide"===r.scrollAction&&r.getXY();if(r.realign(),!r.isDestroyed&&isVisible(o)&&"hide"===r.scrollAction){const[n,o]=r.getXY(),c=n!==d[0]||o!==d[1];((null==i?void 0:i.aligningToEvent)||(c||"Point"===(null==a?void 0:a.$$name)||l)&&(!s||!hasLayout(s)||e&&Gn.isDescendant(e,s)))&&r.hide()}}afterHide(e=null,n=this.hideAnimation){var r,i;const o=this;o._anchor=o._configuredAnchorState,o.removeTransientListeners(),n||o.afterHideAnimation(),o.trigger("hide"),null==(i=null==(r=o.owner)?void 0:r.onChildHide)||i.call(r,o),e&&e()}removeTransientListeners(){var e,n,r;const i=this,{targetObserver:o,lastAlignSpec:s}=i;if(i.clearTimeout(i.resizeListenerTimeout),i.clearTimeout(i.scrollListenerTimeout),o&&(o.disconnect(),delete i.targetObserver),i.documentScrollListener=null==(e=i.documentScrollListener)?void 0:e.call(i),i.targetRootScrollListener=null==(n=i.targetRootScrollListener)?void 0:n.call(i),i.targetResizeListener&&(Ho.removeResizeListener(s.target,i.onTargetResize),i.targetResizeListener=!1),i.constrainListeners){const e=(null==(r=s.constrainTo)?void 0:r.isRectangle)?globalThis:s.constrainTo;Ho.removeResizeListener(e||globalThis,i.onAlignConstraintChange),i.constrainListeners=!1}}afterHideAnimation(){const e=this,{element:n}=e;e.floating&&e.floatRoot.contains(n)?n.remove():n.classList.add("b-hidden"),e.defaultAnchorBackgroundColor&&e.anchorPathElement.setAttribute("fill",e.defaultAnchorBackgroundColor)}changeHidden(e){const n=this;let r;return n.isConfiguring?(r=Boolean(e),n.element.classList[e?"add":"remove"]("b-hidden")):(n.trigger("beforeChangeHidden",{hidden:e}),e?n.hide():n.show()),r}get assignedId(){return this.hasGeneratedId?null:this.id}get owner(){return this.parent||this._owner||this.containingWidget}get containingWidget(){var e,n;let r=this.parent;if(!r){const i=(null==(e=this.forElement)?void 0:e.nodeType)===Element.ELEMENT_NODE?this.forElement:null==(n=this.element)?void 0:n.parentNode;r=(null==i?void 0:i.closest(".b-widget"))&&bs.fromElement(i)}return r}get previousSibling(){return this.getSibling(-1)}get nextSibling(){return this.getSibling(1)}getSibling(e){const n=this,{parent:r}=n,i=r?r.childItems:Array.from(n.element.parentElement.querySelectorAll(".b-widget"));return r?i[i.indexOf(n)+e]:bs.fromElement(i[i.indexOf(n.element)+e])}up(e,n,r){var i;const{owner:o}=this;return e?null==(i=null==o?void 0:o.closest)?void 0:i.call(o,e,n,r):o}closest(e,n,r){const i=typeof r,o="number"===i,s="string"===i;for(let i=this,a=1;i;i=i.owner,a++){if(bs.widgetMatches(i,e,n))return i;if(o&&a>=r)return;if(s&&bs.widgetMatches(i,r,n))return;if(i===r)return}}owns(e){if(e){if("eventPhase"in e&&(e=e.target),e.nodeType===Element.ELEMENT_NODE){if(this.element.contains(e))return!0;e=bs.fromElement(e)}for(;e;){if(e===this)return!0;e=e.owner}}return!1}eachAncestor(e){let n=this.owner;for(;n;){if(!1===e(n))return!1;n=n.owner}return!0}changeMonitorResize(e,n){const r=!this.scaleToFitWidth&&Boolean(e);if(r!==Boolean(n))return r}updateMonitorResize(e){const n=this;ds(n,"onElementResize")||(n.onElementResize=n.onElementResize.bind(n)),Ho[e?"addResizeListener":"removeResizeListener"](n.element,n.onElementResize)}changeReadOnly(e){if(e=Boolean(e),Boolean(this._readOnly)!==e)return e}updateReadOnly(e){var n;null==(n=this.element)||n.classList[e?"add":"remove"]("b-readonly"),this.isConfiguring||(this.eachWidget((n=>{n.ignoreParentReadOnly||("_originalReadOnly"in n||(n._originalReadOnly=n.config.readOnly||!1),n.readOnly=e||n._originalReadOnly)}),!1),this.trigger("readOnly",{readOnly:e}))}eachWidget(e,n=!0){const r=this.childItems,i=(null==r?void 0:r.length)||0,o={};for(let s=0;s<i;s++){const i=r[s];if(o.down=n,!1===e(i,o))return!1;if(o.down&&i.eachWidget&&!1===i.eachWidget(e,n))return!1}return!0}queryAll(e){const n=[];return this.eachWidget((r=>{e(r)&&n.push(r)})),n}query(e){let n=null;return this.eachWidget((r=>{if(e(r))return n=r,!1})),n}getWidgetByRef(e){var n,r;return e instanceof bs?e:(null==(n=null==this?void 0:this.widgetMap)?void 0:n[e])||(null==(r=null==this?void 0:this.owner)?void 0:r.getWidgetByRef(e))}onFocusIn(e){const n=this,{element:r}=n;n.containsFocus=!0,n.focusInEvent=e,(n.floating||n.positioned)&&n.toFront(),r.classList.add("b-contains-focus"),n.updateAriaLabel(n.localizeProperty("ariaLabel")),n.updateAriaDescription(n.localizeProperty("ariaDescription")),r.contains(e._target)&&n.onInternalKeyDown&&!n.keyDownListenerRemover&&(n.keyDownListenerRemover=cn.on({element:r,keydown:"onInternalKeyDown",thisObj:n})),n.trigger("focusin",e)}onFocusOut(e){const n=this;n.keyDownListenerRemover&&(n.keyDownListenerRemover(),n.keyDownListenerRemover=null),n.isDestroyed||(e.relatedTarget||n.revertFocus(!n.isVisible),n.containsFocus=!1,n.element.classList.remove("b-contains-focus"),n.updateAriaLabel(n.localizeProperty("ariaLabel")),n.updateAriaDescription(n.localizeProperty("ariaDescription")),n.trigger("focusout",e))}captureFocus(){const e=this,n=Gn.getActiveElement(e),r=e.contains(n)&&e.captureFocusItem(n);return(i,o)=>{if(r&&!e.isDestroying){(Gn.getActiveElement(e)!==n||o)&&r(i)}}}captureFocusItem(e){return(n=!0)=>{this.contains(e)&&(n?e.focus():Gn.focusWithoutScrolling(e))}}contains(e,n){const{element:r}=this;if(e&&r)return e.isWidget&&(e=e.element),r.contains(e)&&(!n||r!==e)}revertFocus(e){var n;const r=this,i=Gn.getActiveElement(r);let o=null==(n=r.focusInEvent)?void 0:n.relatedTarget;(e||r.containsFocus&&(null==o?void 0:o.nodeType)===Element.ELEMENT_NODE&&r.element.contains(i))&&(o&&Gn.isFocusable(o)||(o=r.getFocusRevertTarget()),r._isRevertingFocus=!0,o&&Gn.isFocusable(o)?(o._isRevertingFocus=!0,Gn.focusWithoutScrolling(o),o._isRevertingFocus=!1):null==i||i.blur(),r._isRevertingFocus=!1)}getFocusRevertTarget(){var e;const n=this,{owner:r,focusInEvent:i}=n,o=i&&i.backwards?1:-1;let s=i&&i.relatedTarget;const a=s&&bs.fromElement(s);if(r&&!r.isDestroyed&&(!s||!Gn.isFocusable(s)||a&&!a.isFocusable)){if(s=null,r.eachWidget){const e=[];if(r.eachWidget((r=>{(r===n||r.isFocusable)&&e.push(r)}),!1),e.length>1){const r=e.indexOf(n);s=e[r+o]||e[r-o]}}!s&&r.isFocusable&&(s=r),s=s?s.focusElement:null==(e=r.getFocusRevertTarget)?void 0:e.call(r)}return s}getStaticWidgetClasses(e,n){const r=new Xt,i=this.$meta.hierarchy;let o,s,a,l,c;for(s=i.indexOf(e);s<i.length;++s)o=i[s],c=Reflect.getOwnPropertyDescriptor(o.prototype,"widgetClass"),(null==c?void 0:c.get)?l=c.get.call(this):(a=ds(o,"$$name")||ds(o,"$name")||ds(o,"_$name")?o.$$name:o.name,(a.length<3||a.includes("$"))&&console.warn(`Class "${a}" extending "${o.$name}" should have "$name" static getter with no less than 3 chars.`),l=`b-${a.toLowerCase()}`),l&&r.add(n?l+n:l);return r}get rootUiClass(){return bs}get staticClassList(){const{$meta:e}=this;let n=e.staticClassList;return n||(e.staticClassList=n=this.getStaticWidgetClasses(bs),c.isTouchDevice&&n.add("b-touch")),n}get uiClasses(){return this.getConfig("ui"),this._uiClasses}get uiClassList(){return this.getConfig("ui"),this._uiClassList}get widgetClassList(){const e=this,{cls:n,defaultCls:r,uiClasses:i}=e;let{staticClassList:o}=e;(r||n)&&(o=o.clone(),r&&o.assign(r),n&&o.assign(n));const s=o.values;return i&&s.push(...i),e.floating&&s.push("b-floating"),"hide"===e.collapsify&&s.push("b-collapsify-hide"),s}changeCls(e){return Xt.from(e)}updateCls(e,n){if(!this.isConfiguring&&!this.isComposable){const{element:r}=this;n&&Et.getTruthyKeys(n).forEach((e=>r.classList.remove(e))),e.assignTo(r)}}changeContentElementCls(e){return Xt.from(e)}changeHtmlCls(e){return Xt.from(e)}changeDefaultCls(e){return Xt.from(e,!0)}changeUi(e){return Xt.from(e)}updateUi(e){let n,r,i=null;if(e){const o=this.getStaticWidgetClasses(this.rootUiClass);for(r in e)if(e[r])for(n in o)o[n]&&((i||(i=new Xt))[`${n}-ui-${r}`]=1)}this._uiClasses=null==i?void 0:i.values,this._uiClassList=i}fromCache(e,n=!1,r=this.element){if(!r)return null;const i=this;return i.cache[e]||(i.cache[e]=n?Gn.children(r,e):Gn.down(r,e)),i.cache[e]}emptyCache(){this.cache={}}changeMasked(e,n){var r;if("trial"!==(null==(r=this.masked)?void 0:r.type)){if(!0!==e&&""!==e||(e=" "),n&&!n.isDestroyed)"string"==typeof e?(n.text=e,e=n):e?(n.setConfig(e),e=n):n.destroy();else if(e){const n=bs.resolveType("mask");(e=n.mergeConfigs(this.maskDefaults,e)).owner=this,e=n.mask(e)}return e||null}}onMaskAutoClose(e){e.isDestroyed&&e===this.masked&&(this.masked=null)}mask(e){return this.masked=e,this.masked}unmask(){this.masked=null}onInternalResize(e,n,r,i,o){this._width=e.offsetWidth,this._height=e.offsetHeight}onElementResize(e,n){const r=this,{element:i}=r,o=r._width,s=r._height,a=i.offsetWidth,l=i.offsetHeight;r.floating&&n&&r.onFloatingWidgetResize(...arguments),r.suspendResizeMonitor||o===a&&s===l||(r.onInternalResize(i,a,l,o,s),r.trigger("resize",{width:a,height:l,oldWidth:o,oldHeight:s}))}onFloatingWidgetResize(e,n,r){const i=this,{lastAlignSpec:o,constrainTo:s}=i;if(i.isVisible&&o&&o.target){const e=!n||r.height!==n.height,a=!n||r.width!==n.width,l=s&&!Gt.from(s).contains(Gt.from(i.element,null,!0));(e&&2!==o.zone||a&&1!==o.zone||l)&&i.requestAnimationFrame((()=>i.realign()))}}updateScale(){const e=this,n=e.element,r=n.parentElement;e.configuredWidth||(e.configuredWidth=e.width),n.style.display="none";const i=Gt.client(r).width/e.configuredWidth,o=e.scale=e.allowGrowWidth?Math.min(i,1):i;n.style.transform=`scale(${o})`,n.style.transformOrigin="top left",n.style.display="",e.allowGrowWidth&&i>1&&(e.width=e.configuredWidth*i)}onParentElementResize(e){this.updateScale()}parseTRBL(e,n="px"){if("number"==typeof(e=e||0))return[`${e}${n}`,`${e}${n}`,`${e}${n}`,`${e}${n}`];const r=e.split(" "),i=r.length;return 1===i?r[1]=r[2]=r[3]=r[0]:2===i?(r[2]=r[0],r[3]=r[1]):3===i&&(r[3]=r[1]),[isFinite(r[0])?`${r[0]}${n}`:r[0],isFinite(r[1])?`${r[1]}${n}`:r[2],isFinite(r[2])?`${r[2]}${n}`:r[3],isFinite(r[3])?`${r[3]}${n}`:r[4]]}get documentRoot(){var e;return(null==(e=this.owner)?void 0:e.documentRoot)||this.element.getRootNode()}get rootElement(){var e;const n=this;if(!n._rootElement){let r=(null==(e=n.owner)?void 0:e.rootElement)||Gn.getRootElement(n.forElement||(n.element.isConnected?n.element:n.getRenderContext()[0]||n.element));r||(r=document.body),n._rootElement=r}return n._rootElement}get floatRoot(){var e,n;const r=this.rootElement||(null==(e=this.owner)?void 0:e.rootElement);let{floatRoot:i}=r;if(i)r.contains(i)||r.appendChild(i);else{const{outerCls:e}=bs,o=null==(n=Gn.getThemeInfo(null,r))?void 0:n.name;if(!Gn.isValidFloatRootParent(r))throw new Error("Attaching float root to wrong root");o&&e.push(`b-theme-${o.toLowerCase()}`),i=r.floatRoot=Gn.createElement({className:`b-float-root ${e.join(" ")}`,parent:r}),rs.push(i),c.isAndroid&&(i.style.height=`${screen.height}px`,cn.on({element:globalThis,orientationchange:()=>i.style.height=`${screen.height}px`,thisObj:this})),!c.isHoverableDevice&&globalThis.visualViewport&&cn.on({element:globalThis.visualViewport,resize:({target:e})=>i.style.height=`${e.height}px`,thisObj:this}),or.ion({theme:({theme:e,prev:n})=>{i.classList.add(`b-theme-${e.toLowerCase()}`),i.classList.remove(`b-theme-${n.toLowerCase()}`)}})}return i}get floatRootMaxZIndex(){let e=1;return Array.from(this.floatRoot.children).forEach((n=>{const r=parseInt(getComputedStyle(n).zIndex||0,10);r>e&&(e=r)})),e}static resetFloatRootScroll(){rs.forEach((e=>e.scrollTop=e.scrollLeft=0))}static get floatRoots(){return rs}static removeFloatRoot(e){rs.splice(rs.indexOf(e),1)}static get outerCls(){const e=["b-outer"],{platform:n}=c;return n&&e.push(`b-${n}`),c.isTouchDevice&&e.push("b-touch-events"),Gn.scrollBarWidth?e.push("b-visible-scrollbar"):e.push("b-overlay-scrollbar"),c.isChrome?e.push("b-chrome"):c.isSafari?e.push("b-safari"):c.isFirefox&&e.push("b-firefox"),globalThis.ResizeObserver||e.push("b-no-resizeobserver"),e}get isAnimating(){return this._isAnimatingCounter>0}set isAnimating(e){const n=this,{_isAnimatingCounter:r}=n;n._isAnimatingCounter=Math.max(0,r+(e?1:-1)),0===r&&e?(n.element.classList.add("b-animating"),n.trigger("animationStart")):1!==r||e||(n.element.classList.remove("b-animating"),n.trigger("animationEnd"))}async waitForAnimations(){this.isAnimating&&await this.await("animationend",{checkLog:!1})}static query(e,n=!1){const{idMap:r}=bs.identifiable;for(const i in r)if(bs.widgetMatches(r[i],e,n))return r[i];return null}static queryAll(e,n=!1){const{idMap:r}=bs.identifiable,i=[];for(const o in r)bs.widgetMatches(r[o],e,n)&&i.push(r[o]);return i}static fromElement(e,n,r){const i=typeof n;e&&!e.nodeType&&(e=e.target),("number"===i||n&&n.nodeType===Element.ELEMENT_NODE)&&(r=n,n=null);let o,s,a,l=e,c=0;for("number"!=typeof r&&(o=r,r=Number.MAX_VALUE),"string"===i&&(n=n.toLowerCase());l&&l.nodeType===Element.ELEMENT_NODE&&c<r&&l!==o;){if(s=l.dataset&&l.dataset.ownerCmp||l.id,s){if(a=bs.getById(s),a){if(!n)return a;if("function"===i){if(n(a))return a}else if(bs.widgetMatches(a,n,!0))return a}c++}l=l.parentNode}return null}static fromSelector(e){const n=document.querySelector(e);return n?bs.fromElement(n):null}triggerFieldChange(e,n=!0){var r;n&&this.trigger("change",e),null==(r=this.eachAncestor)||r.call(this,(n=>{var r,i;if(null==(r=n.onFieldChange)||r.call(n,e),null==(i=n.isolateFieldChange)?void 0:i.call(n,this))return!1}))}isolateFieldChange(e){return this.isolateFields}setupFocusListeners(){or.setupFocusListenersOnce(this._rootElement,cn)}static widgetMatches(e,n,r){return"*"===n||("function"==typeof n?n(e):bs.isType(e,n,r))}static attachTooltip(e,n){return"string"==typeof n&&(n={html:n}),bs.create(Object.assign({forElement:e},n),"tooltip"),e}changeDock(e){return"start"===e?"left":"end"===e?"right":e}updateRtl(e){super.updateRtl(e),this.eachWidget((n=>{"rtl"in n.initialConfig||(n.rtl=e)}))}},vs=bs.prototype;["compose","domSyncCallback"].forEach((e=>vs[e].$nullFn=!0)),bs.initClass(),bs.register("mask",ts),Gn.Widget=bs,or.Widget=bs,ts.identifiable.idMap=bs.identifiable.idMap,Object.assign(globalThis.bryntum||(globalThis.bryntum={}),{get:bs.getById.bind(bs),query:bs.query,queryAll:bs.queryAll,fromElement:bs.fromElement,fromSelector:bs.fromSelector}),bs._$name="Widget";var ys=class extends(re.mixin(Events_default,Factoryable_default)){get contentElement(){var e;return null==(e=this.owner)?void 0:e.contentElement}onChildAdd(e){}onChildRemove(e){}renderChildren(){const e=this,{owner:n,itemCls:r}=e,{contentElement:i,items:o}=n,s=n.itemCls,a=null==o?void 0:o.length;if(a){n.textContent=!1;for(let e=0;e<a;e++){const a=o[e],{element:l}=a,{classList:c}=l;l.dataset.itemIndex=e,c.contains("b-outer")&&c.remove(...bs.outerCls),r&&c.add(r),s&&c.add(s),a.render(i,Boolean(n.isPainted))}}e.syncPendingConfigs(),e.syncChildCount()}removeChild(e){const n=this,{element:r}=e,{owner:i,itemCls:o}=n,{contentElement:s}=i,a=i.itemCls;s.contains(r)&&r.remove(),delete r.dataset.itemIndex,o&&r.classList.remove(o),a&&r.classList.remove(a),n.fixChildIndices(),n.syncChildCount()}appendChild(e){const{element:n}=e,{owner:r,itemCls:i}=this,{contentElement:o}=r,s=r.itemCls;n.dataset.itemIndex=r.indexOfChild(e),r.textContent=!1,i&&n.classList.add(i),s&&n.classList.add(s),e.render(o,Boolean(r.isPainted)),this.syncChildCount()}insertChild(e,n){const r=this,{element:i}=e,{owner:o,itemCls:s}=r,{contentElement:a}=o,l=Gn.getChild(a,`[data-item-index="${n}"]`),c=o.itemCls;o.textContent=!1,s&&i.classList.add(s),c&&i.classList.add(c),a.insertBefore(i,l),e.render(null,Boolean(o.isPainted)),r.fixChildIndices(),r.syncChildCount()}fixChildIndices(){this.owner.items.forEach(((e,n)=>{e.element.dataset.itemIndex=n}))}syncChildCount(){var e;const{owner:n}=this,{length:r}=n.items;null==(e=n.contentElement)||e.classList[1===r?"add":"remove"]("b-single-child")}syncConfigLater(e){const n=this.pendingConfigs||(this.pendingConfigs=[]);n.includes(e)||n.push(e)}syncConfigStyle({name:e,style:n,classes:r,map:i}){const o=this,s=`b-box-${e}-`,{contentElement:a}=o,l=o[e];let c=(null==i?void 0:i[l])||l;if(a){if(r){const{classList:e}=a;r.forEach((n=>{n!==c&&e.remove(s+n)})),r.includes(c)&&(e.add(s+c),c="")}a.style[n]=c}else o.syncConfigLater(e)}syncPendingConfigs(){const e=this,{pendingConfigs:n}=e;let r;if(n)for(e.pendingConfigs=null;r=n.pop();)e[e.$meta.configs[r].updater](e[r])}};__publicField(ys,"type","default"),__publicField(ys,"configurable",{owner:null,containerCls:"b-auto-container",itemCls:null}),__publicField(ys,"factoryable",{defaultType:"default"}),ys.initClass(),ys._$name="Layout";var ws=0,hasRipple=e=>e.ripple,Cs=class extends bs{static get defaultConfig(){return{old_element:{children:[{className:"b-ripple-inner",reference:"rippleElement"}]},element:{children:[{tag:"svg",class:"b-ripple-inner",reference:"rippleElement",ns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 100 100",children:[{reference:"circleElement",tag:"circle",cx:"0",cy:"0",r:10}]}]},floating:!0,hideAnimation:!1,showAnimation:!1,scrollAction:"realign",color:"rgba(0,0,0,.3)",startRadius:10,radius:100}}static get $name(){return"Ripple"}afterConstruct(){super.afterConstruct(),cn.on({element:this.rootElement,mousedown:"onRippleControllingEvent",thisObj:this,capture:!0,once:!0})}onRippleControllingEvent(e){var n;const r=this;r.show();const i=Gn.getStyleValue(r.circleElement,"animationName");r.hide(),null==(n=r.listenerDetacher)||n.call(r),i&&"none"!==i&&(r.listenerDetacher=cn.on({mousedown:{element:r.rootElement,capture:!0,handler:"onMousedown"},touchstart:{element:r.rootElement,capture:!0,handler:"onTouchStart"},animationend:{element:r.circleElement,handler:"onAnimationEnd"},thisObj:r}),"mousedown"===e.type&&(r.onMousedown(e),or.ion({theme:"onRippleControllingEvent",thisObj:this})))}onTouchStart(e){ws=performance.now(),this.handleTriggerEvent(e)}onMousedown(e){performance.now()-ws>200&&this.handleTriggerEvent(e)}handleTriggerEvent(e){const n=bs.fromElement(e.target,hasRipple);if(n){const r=n.ripple,i=r.delegate?e.target.closest(r.delegate):n.focusElement||n.element;if(i){const o=Et.assign({event:e,target:i,radius:this.radius},r);if("string"==typeof o.clip&&(o.clip=n[o.clip]||e.target.closest(o.clip),!o.clip))return;this.ripple(o)}}}ripple({event:e,point:n=cn.getClientPoint(e),target:r=e.target,clip:i=r,radius:o=this.radius,color:s=this.color}){this.clip=i;const a=this,l=(i=Gt.from(i,null,!0)).getDelta(n),c=a.rippleElement.style,d=a.circleElement,u=Gn.getStyleValue(r,"border-radius");a.hide(),c.transform=`translateX(${l[0]}px) translateY(${l[1]}px)`,c.height=c.width=`${o}px`,a.element.style.borderRadius=u,d.setAttribute("r",o),d.setAttribute("fill",s),a.showBy({target:i,align:"c-c",matchSize:!0})}onAnimationEnd(e){"b-ripple-expand"===e.animationName&&this.hide()}};bs.RippleClass=Cs,Cs._$name="Ripple";var Ss=Object.freeze({}),{isArray:xs}=Array,returnWeight=e=>e.weight,sortByWeight=({weight:e},{weight:n})=>"string"==typeof e||"string"==typeof n?String(e).localeCompare(String(n)):(null!=e?e:Number.MAX_SAFE_INTEGER)-(null!=n?n:Number.MAX_SAFE_INTEGER),isNotHidden=e=>e&&!e.hidden,Ds=["display","flex-direction"],Es={default:1,box:1},Rs=class extends bs{static get $name(){return"Container"}static get type(){return"container"}static get configurable(){return{items:null,lazyItems:{$config:["lazy"],value:null},defaults:null,defaultType:"widget",layoutStyle:null,itemCls:null,layout:{type:"default"},namedItems:null,overflowable:{value:null,default:!1,$config:null},textContent:!0,record:null,strictRecordMapping:null,autoUpdateRecord:null,autoUpdateFields:null,hideWhenEmpty:null,contentElMutationObserver:{$config:["lazy","nullify"],value:!0},isolateFields:!1,focusDescendant:!1,defaultBindProperty:null,defaultFocus:null}}static get prototypeProperties(){return{flexRowCls:"b-flex-row",flexColCls:"b-flex-column",initialItems:!0}}startConfigure(e){const n=e.items||e.lazyItems;(this.hasItems=Boolean(n&&(xs(n)?n:Object.keys(n)).length))||(this.initialItems=!1),super.startConfigure(e)}get firstItem(){return this.getAt(0)}get lastItem(){return this.getAt(-1)}getAt(e){return this.ensureItems().at(e)}remove(...e){let n=!0;1===e.length&&(xs(e[0])?e=e[0]:n=!1);const r=this,{_items:i}=r,o=[];for(let n=0;n<e.length;n++){const s=e[n];i.includes(s)&&(i.remove(s),r.layout.removeChild(s),o.push(s),r.onChildRemove(s))}return n?o:o[0]}removeAll(){return this.remove(this.items)}add(...e){const n=this,r=n.ensureItems(),i=[];let o,s,a,l=!0;for(1===e.length&&(xs(e[0])?e=e[0]:l=!1),s=0;s<e.length;s++)o=e[s],o.isWidget?o.parent=n:o=n.createWidget(o),null!=(null==o?void 0:o.weight)?(a=oe.findInsertionIndex(o,r.values,sortByWeight),i.push(n.insert(o,a))):o&&(r.includes(o)||(r.add(o),n.onChildAdd(o),n.layout.appendChild(o),i.push(o)));return l?i:i[0]}ensureItems(){const e=this;return e.getConfig("items"),e.getConfig("lazyItems"),e._items||(e.items=[]),e._items}insert(e,n){const r=this,i=r.ensureItems();e instanceof bs?e.parent=r:e=r.createWidget(e),i.includes(n)&&(n=r.indexOfChild(n)),n=Math.min(n,i.count);const o=i.values;return o.splice(n,0,e),i.values=o,r.onChildAdd(e),r.layout.insertChild(e,n),e}indexOfChild(e){return this.items.indexOf(e)}changeLazyItems(e){this.items=e,this.layout.renderChildren()}changeItems(e,n){const r=this,i=[],o=new li;return xs(e)?r.processItemsArray(e,i):e&&r.processItemsObject(e,r.namedItems,i),i.some(returnWeight)&&i.sort(sortByWeight),o.add(i),n&&n.forEach((e=>{r.remove(e),o.includes(e)||e._createdBy!==r||e.destroy()})),o}afterConstruct(){const{rtl:e}=this,{classList:n}=this.contentElement;n.toggle("b-rtl",!0===e),n.toggle("b-ltr",!1===e)}updateRtl(e){super.updateRtl(e);const{contentElement:n}=this;n&&(n.classList.toggle("b-rtl",!0===e),n.classList.toggle("b-ltr",!1===e))}updateItems(e,n){let r=0;e.forEach((e=>{this.onChildAdd(e),n&&!n.temporary&&this.layout.insertChild(e,r),++r})),this.initialItems=!1}updateHideWhenEmpty(){this.syncChildCount(this.rendered)}get items(){const e=this;if(e.getConfig("lazyItems"),!e._items){if(e.initializingItems)return[];e._items=new li,e._items.temporary=!0}return e._items.values}processItemsArray(e,n){const r=e.length;let i,o;for(i=0;i<r;i++)o=e[i],o instanceof bs?(o.parent=this,o.element.classList.remove(...bs.outerCls)):o=this.createWidget(o),o&&((o.ref||o.id)&&this.addDescendant(o),n.push(o))}processItemsObject(e,n,r){let i,o;for(o in e)i=e[o],i&&(n&&o in n&&(i="object"==typeof i?Et.merge(Et.clone(n[o]),i):n[o]),i&&(i instanceof bs?i.parent=this:(i instanceof Object&&(i.ref=o),i=this.createWidget(i)),i&&(i.ref=o,this.addDescendant(i),r.push(i))))}onChildAdd(e){if(e.innerItem&&this.readOnly&&!e.ignoreParentReadOnly&&(e.readOnly=!0),this.onChildAddLayout(e),e.ref||e.id)for(let n=this;n;n=n.parent)n.addDescendant(e);this.syncChildCount(!0)}onChildAddLayout(e){e.innerItem&&this.layout.onChildAdd(e)}onChildHide(e){var n;super.onChildHide(e),(null==(n=this._items)?void 0:n.includes(e))&&this.syncChildCount(!0)}onChildShow(e){var n;super.onChildShow(e),(null==(n=this._items)?void 0:n.includes(e))&&this.syncChildCount(!0)}syncChildCount(e){if(!this.isConfiguring){const n=this,{items:r,hasItems:i}=n,o=r.filter(isNotHidden),{length:s}=o;if(n.visibleChildCount=s,n.hideWhenEmpty&&e){const e=Boolean(!s);Boolean(n._hidden)!==e&&(n.hidden=e)}r.forEach((e=>e.element.classList.remove("b-last-visible-child","b-first-visible-child"))),s&&(o[0].element.classList.add("b-first-visible-child"),o[s-1].element.classList.add("b-last-visible-child")),n.hasItems=Boolean(n.childItems.length),n.contentElement.classList[s?"remove":"add"]("b-no-visible-children"),n.isComposable?i!==n.hasItems&&n.recompose():n.updateTextContent(n._textContent)}}syncFlexDirection(){const{contentElement:e,flexColCls:n,flexRowCls:r}=this,i=new Xt(e.className),o=Gn.getStyleValue(e,Ds);i[r]=i[n]=0,"flex"===o.display&&(i["row"===o["flex-direction"]?r:n]=1),Gn.syncClassList(e,i)}addDescendant(e){const n=e.ref||e.id,r=this._widgetMap||(this._widgetMap={});r[n]||(r[n]=e)}onChildRemove(e){const n=this,r=e.ref||e.id;if(r)for(let i=n;i;i=i.parent)i.widgetMap[r]===e&&delete i.widgetMap[r];n.layout.onChildRemove(e),n.syncChildCount(!0)}get widgetMap(){return this._widgetMap||(this._widgetMap={}),this.initializingItems||this.getConfig("items"),this._widgetMap}changeRecord(e){return this._record=null==e?Ss:null,e}updateRecord(e){var n;const r=this;null==(n=r.recordUpdateDetacher)||n.call(r),r.trigger("beforeSetRecord",{record:e}),r.setValues(e,{onlyName:r.strictRecordMapping,highlight:Boolean(r.$highlight)}),r.autoUpdateFields&&(null==e?void 0:e.firstStore)&&(r.recordUpdateDetacher=e.firstStore.ion({update:r.onRecordUpdated,thisObj:r}))}setRecord(e,n){this.$highlight=n,this.record=e,this.$highlight=!1}onRecordUpdated({record:e}){e===this.record&&this.setValues(this.record,!0,!0)}onFieldChange({source:e,userAction:n}){if(this.autoUpdateRecord&&n){const{record:n,strictRecordMapping:r}=this,{name:i,ref:o,isValid:s=!0,value:a}=e,l=r?i:i||o;n&&l&&s&&(n[l]=a)}}getValues(e){const n={};return this.eachWidget(((r,i)=>{r.isolateFields?i.down=!1:!("name"in r)||e&&!e(r)||(n[r.name]=r.value)}),!0),n}get values(){const e={};return this.gatherValue(e),e}set values(e){this.assignValue(e)}get isSettingValues(){return Boolean(this.assigningValues)}get assigningValues(){var e;return this._assigningValues||(null==(e=this.parent)?void 0:e.assigningValues)}set assigningValues(e){this._assigningValues=e}assignValue(e,n){super.assignValue(e,n),this.isolateFields||this.setValues(e,n)}gatherValue(e){super.gatherValue(e),this.isolateFields||this.gatherValues(e)}setValues(e,n=this.assignValueDefaults){this.assigningValues=n,this.eachWidget((r=>r.assignValue(e,n)),!1),this.assigningValues=!1}get hasNoChildren(){const e=this,{items:n,lazyItems:r}=e.initialConfig,i=n&&(xs(n)?n:Et.values(n)),o=r&&(xs(r)?r:Et.values(r)),s=e.isConfiguring?o||i:e.items;return!(null==s?void 0:s.filter(isNotHidden).length)}afterRecompose(){super.afterRecompose(),this.realign()}updateTextContent(e){const n=this;if(!n.isComposable){const r=Boolean(e&&n.hasNoChildren),{classList:i}=n.contentElement;r!==i.contains("b-text-content")&&(i[r?"add":"remove"]("b-text-content"),n.rendered&&n.realign())}}updateLayoutStyle(e){Gn.applyStyle(this.contentElement,e)}updateElement(e){if(super.updateElement(...arguments),e){const{classList:e}=this.contentElement,{containerCls:n}=this.layout;e.add("b-content-element"),n&&e.add(n)}}onPaint(){var e;null==(e=super.onPaint)||e.call(this,...arguments),this.getConfig("contentElMutationObserver")}changeContentElMutationObserver(e,n){if(n&&(n.takeRecords(),n.disconnect()),e){const n=this,{element:r,contentElement:i}=n;(e=new MutationObserver((e=>n.onContentElMutation(e)))).observe(i,{attributes:!0}),i!==r&&e.observe(r,{attributes:!0}),n.syncFlexDirection()}return e}onContentElMutation(){Es[this.layout.type]&&this.isVisible&&this.syncFlexDirection()}changeLayout(e,n){return ys.reconfigure(n,e,{owner:this,defaults:{owner:this}})}get childItems(){return this.items}getWidgetById(e){return this.widgetMap[e]}processWidgetConfig(e){}setupWidgetConfig(e,n){const r=this;"string"==typeof e?e={html:e}:e.nodeType===Element.ELEMENT_NODE&&(e={element:e,id:e.id}),("string"==typeof n||!n&&(n=e.type))&&(n=bs.resolveType(n,!0));for(let i=(e=(n||bs).mergeConfigs(r.defaults,e,{parent:r})).parent;i;i=i.parent)if(!1===i.processWidgetConfig(e))return null;return!1===r.trigger("beforeWidgetCreate",{widgetConfig:e})?null:e}createWidget(e){const n=bs.create(this.setupWidgetConfig(e),this.defaultType);return n&&(n._createdBy=this),n}updateDefaults(e,n){if(!this.isConfiguring&&e){const r=Object.entries(e);this.eachWidget((e=>{r.forEach((([r,i])=>{n&&e[r]!==n[r]||(e[r]=i)}))}),!1)}}render(){this.getConfig("lazyItems"),this.layout.renderChildren(),this.syncChildCount(),super.render(...arguments)}get focusElement(){const e=this.query(this.defaultFocus||(e=>{var n;return e.isFocusable&&"close"!==e.ref&&!(null==(n=e.ref)?void 0:n.endsWith("collapse"))}));return e?e.focusElement:super.focusElement}doDestroy(){var e;null==(e=this._items)||e.forEach((e=>{var n;return null==(n=e.destroy)?void 0:n.call(e)})),this.layout.destroy(),super.doDestroy()}get isValid(){let e=!0;return this.eachWidget((n=>{n.isVisible&&"isValid"in n&&!n.isValid&&(e=!1)}),!0),e}};Rs.initClass(),Rs._$name="Container";var{assign:ks}=Et,now=()=>performance.now(),Ts={start:!1},Ms=/^[.\d]+([^\d].*)?$/,getTransitions=e=>{const n=e.$bryntum||(e.$bryntum={});return n.transitions||(n.transitions=Object.create(null))},milliseconds=(e,n)=>{var r;return"string"==typeof e&&(n=null==(r=Ms.exec(e))?void 0:r[1],e=parseFloat(e)),e&&e*("s"===n||!n&&e<10?1e3:1)},syncTransitions=e=>{const n=Et.values(getTransitions(e)).filter((e=>null==e.completed)).map((e=>e.toString()));e.style.transition=n.join(", ")},Anim=e=>class Anim extends e{static get prototypeProperties(){return{_delay:null,_duration:null,_retain:null,_timing:null,_unit:null,owner:null,reverting:null}}constructor(...e){super(...e),this.id=++As}start(){this.startTime=now()}get delay(){var e,n,r;return milliseconds(null!=(r=null!=(n=this._delay)?n:null==(e=this.owner)?void 0:e.delay)?r:0,this.unit)}set delay(e){this._delay=e}get duration(){var e;const{owner:n,unit:r}=this;return milliseconds(null!=(e=this._duration)?e:n?n.duration:Fs.defaultDuration,r)}set duration(e){this._duration=e}get elapsed(){return now()-this.startTime}get remaining(){return this.duration-this.elapsed}get retain(){var e,n;return null!=(n=this._retain)?n:null==(e=this.owner)?void 0:e.retain}set retain(e){this._retain=e}get timing(){var e,n;return null!=(n=this._timing)?n:null==(e=this.owner)?void 0:e.timing}set timing(e){this._timing=e}get unit(){var e,n;return null!=(n=this._unit)?n:null==(e=this.owner)?void 0:e.unit}set unit(e){this._unit=e}},As=0,Is=class extends(re.mixin(Anim)){static get $name(){return"AnimatorTransition"}static get prototypeProperties(){return{element:null,property:null,from:null,to:null,completed:null,promissory:null,reverting:null}}afterConstruct(){super.afterConstruct();const e=this,{element:n,transitions:r}=e;let{property:i}=e;[i,e.to]=Gn.unitize(i,e.to),e.from=Gn.unitize(i,e.from)[1],e.promissory=new Zo,e.property=i;const o=r[i];r[i]=e;let{from:s}=e;o&&(e.from=o.to,s=null,o.destroy()),null===s&&(s=e.getCurrentStyleValue(),o||(e.from=s)),n.style[i]=s,e.getCurrentStyleValue()}doDestroy(){const e=this;e.finish(!1),e.completed&&!e.retain&&e.clearStyle(),super.doDestroy()}get promise(){var e;return null==(e=this.promissory)?void 0:e.promise}get transitions(){return getTransitions(this.element)}clearStyle(){this.setStyle("")}finish(e){const n=this,{transitions:r,promissory:i,property:o}=n;i&&(n.completed=e,n.promissory=null,i.resolve(e),r[o]===n?(delete r[o],e||(syncTransitions(n.element),n.clearStyle())):n.completed=!1)}getCurrentStyleValue(){return Gn.getStyleValue(this.element,this.property)}revert(){const{duration:e,elapsed:n,element:r,from:i,property:o,_retain:s,_timing:a}=this;return new Is({element:r,property:o,retain:s,timing:a,duration:Math.round(Math.min(e,n)),reverting:this,to:i,unit:"ms"})}setStyle(e){this.element.style[this.property]=e}start(){const e=this,{delay:n,duration:r,element:i,property:o}=e;cn.onTransitionEnd({element:i,property:o,duration:n+r+20,thisObj:e.owner,handler:()=>{var n;return null==(n=e.finish)?void 0:n.call(e,!0)}}),super.start(),e.setStyle(e.to)}toString(){const{delay:e,duration:n,property:r,timing:i}=this;return`${r} ${n}ms ${i||"ease-in-out"}${e?` ${e}ms`:""}`}};Is.initClass();var Fs=class extends(re.mixin(Anim)){static get $name(){return"Animator"}static get prototypeProperties(){return{element:null,finalize:null,prefinalize:null,completed:null,items:null}}static register(e,n){Et.isObject(e)?Et.entries(e).forEach((e=>Fs.register(...e))):(Fs.fx[e]=n,Fs[e]=n=>(Gn.isElement(n)?n={element:n,[e]:{}}:delete(n={element:n.element,[e]:n})[e].element,Fs.run(n)))}static run(e){return new Fs(e).start()}constructor(e){var n;super(null);const r=this,i=[],o={};let s,a,l,c;if(Array.isArray(e))r.items=e;else for(l in e)(Fs.specialPropsRe.test(l)?r:o)[l]=e[l];Et.keys(o).forEach((e=>{c=o[e],null!=c&&!1!==c&&c==c&&((a=Fs.fx[e])?(c=ks(r.defaults,a(c,r,e)),c.owner=r,s=new Fs(c)):(c=ks(r.defaults,"object"==typeof c?c:{to:c}),c.owner=r,c.property=e,s=new Is(c)),i.push(s))})),null==(n=r.items)||n.forEach((e=>{Et.isInstantiated(e)?e.owner=r:((e=ks(r.defaults,e)).owner=r,e=new Fs(e)),i.push(e)})),r.items=i,r.promise=(1===i.length?i[0].promise:Promise.all(i.map((e=>e.promise)))).then((e=>{var n;return null==(n=r.finish)||n.call(r,e),r.completed||!1}))}doDestroy(){this.items.forEach((e=>e.destroy())),super.doDestroy()}get defaults(){return{element:this.element}}get retain(){const{_retain:e,finalize:n,owner:r}=this;return null!=e?e:!n&&(!r||r.retain)}set retain(e){super.retain=e}done(){return this.promise}finish(e){var n,r;const i=this,{items:o}=i;for(syncTransitions(i.element),i.completed="boolean"==typeof e?e:!e.some((e=>!e)),null==(n=i.prefinalize)||n.call(i,i.completed,i);o.length;)o.pop().destroy();null==(r=i.finalize)||r.call(i,i.completed,i)}revert(e){var n;const r=this,{reverting:i}=r,o=!e||null==(n=e.start)||n;let s=r.defaults;return i&&(i.finalize&&(s.finalize=i.finalize),i.prefinalize&&(s.prefinalize=i.prefinalize),s.retain=i._retain),s=ks(s,e,{items:r.items.map((e=>e.revert(Ts))),reverting:r}),s=new Fs(s),o&&s.start(),s}start(){const{element:e,items:n}=this;return super.start(),n.length&&(syncTransitions(e),n.forEach((e=>e.start()))),this}};Fs.initClass().Transition=Is,Fs.specialPropsRe=new RegExp(`^(?:${Object.keys(Fs.prototypeProperties).concat(Object.keys(Fs.superclass.prototypeProperties)).map((e=>"_"===e[0]?e.substr(1):e)).join("|")})$`),Fs.defaultDuration=200,Fs.fx={},Fs.register({puff:e=>(!0===e?e={}:"object"!=typeof e?e={transform:`scale(${e})`}:e.scale&&((e=Et.clone(e)).transform=`scale(${e.scale})`,delete e.scale),ks({opacity:0,transform:"scale(8)"},e))}),Fs._$name="Animator";var Ps=class extends(re.mixin(Delayable_default)){static get configurable(){return{element:null,delegate:null,delay:500,startRate:2,endRate:20,accelerateDuration:4e3,pressedCls:"b-pressed"}}doDestroy(){var e;null==(e=this.mousedownRemover)||e.call(this),this.cancel(),super.doDestroy()}cancel(){var e,n,r;const i=this;null==(e=i.activeElement)||e.classList.remove(i.pressedCls),i.activeElement=null,null==(n=i.acceleration)||n.cancel(),i.activeListenerRemover=null==(r=i.activeListenerRemover)?void 0:r.call(i),i.clearTimeout(i.autoRepeatTimer),i.clearTimeout(i.repeatTimer)}updateElement(e){var n;null==(n=this.mousedownRemover)||n.call(this),this.mousedownRemover=cn.on({element:e,mousedown:"onMouseDown",thisObj:this})}onMouseDown(e){const n=this,r=n.delegate?e.target.closest(n.delegate):n.element;n.cancel(),r&&(n.activeElement=r,n.triggerEvent=e,r.classList.add(n.pressedCls),n.activeListenerRemover=cn.on({mouseup:{element:document,capture:!0,handler:"onMouseUp"},mousemove:{element:r,handler:"onTargetMouseMove"},mouseleave:{element:r,handler:"onTargetMouseLeave"},mouseenter:{element:r,handler:"onTargetMouseEnter"},thisObj:n}),n.autoRepeatTimer=n.setTimeout("startAutoRepeat",n.delay))}onMouseUp(){this.cancel()}onTargetMouseLeave(){this.activeElement.classList.remove(this.pressedCls),this.clearTimeout(this.repeatTimer)}onTargetMouseEnter(e){const n=this;e.buttons?(n.activeElement.classList.add(n.pressedCls),n.triggerEvent=e,n.fireClick()):n.cancel()}onTargetMouseMove(e){this.triggerEvent=e}startAutoRepeat(){const e=this;e.interval=e.startInterval=1e3/e.startRate,e.accelerationDelta=e.startInterval-1e3/e.endRate,e.fireClick(),e.acceleration=he.animate(e.accelerateDuration,e.nextTick,e,"easeOutQuad")}nextTick(e){this.interval=this.startInterval-this.accelerationDelta*e}fireClick(){const e=this,n=new MouseEvent("click",e.triggerEvent);e.triggerEvent.target.dispatchEvent(n),e.repeatTimer=e.setTimeout(e.fireClick,e.interval)}};Ps._$name="ClickRepeater";var Os=/^(?:undefined|null|LEFT|RIGHT)$/,Ls={TOP:"BOTTOM",RIGHT:"LEFT",BOTTOM:"TOP",LEFT:"RIGHT"},canonicalDock=e=>{const n=null==e?void 0:e.toUpperCase();return[n,"LEFT"===n||"RIGHT"===n]},Rotatable_default=e=>class Rotatable extends(e||re){static get $name(){return"Rotatable"}static get configurable(){return{rotate:null,invertRotate:null}}compose(){const{rotate:e}=this;return{class:{[`b-rotate-${(e||"").toLowerCase()}`]:e,"b-rotate-vertical":e}}}syncRotationToDock(e){if(Os.test(String(this.rotate))){const[n,r]=canonicalDock(e);this.rotate=r?this.invertRotate?Ls[n]:n:null}}get widgetClass(){return null}},_s=class extends(bs.mixin(Rotatable_default)){compose(){const{align:e,href:n}=this;return{tag:null!=n?"a":"button",class:{[`b-align-${e||"end"}`]:1,"b-icon":1},listeners:{click:"onInternalClick"}}}get focusElement(){return this.element}get panel(){var e,n;if((null==(e=this.parent)?void 0:e.isPanel)&&(null==(n=this.element)?void 0:n.parentNode.matches(".b-panel-header")))return this.parent}changeAlign(e){return e}onInternalClick(e){const n=this,{handler:r,panel:i}=n,o={domEvent:e,tool:n};n.disabled||(n.trigger("click",o),n.isDestroyed||(n.trigger("action",o),n.isDestroyed||!1===(null==i?void 0:i.trigger("toolClick",o))||r&&n.callback(r,i,[e,i,n])))}onInternalKeyDown(e){"Enter"===(e.key.trim()||e.code)&&(e.cancelBubble=!0,e.stopPropagation())}updateDisabled(e,n){var r;super.updateDisabled(e,n),e&&(null==(r=this.repeat)||r.cancel())}changeRepeat(e,n){return null==n||n.destroy(),e&&Ps.new({element:this.element},e)}};__publicField(_s,"$name","Tool"),__publicField(_s,"type","tool"),__publicField(_s,"configurable",{align:{value:null,$config:{merge:"replace"}},href:null,repeat:null,defaultBindProperty:null}),_s.initClass(),_s._$name="Tool";var $s=/right/i,autoAlign=e=>(e.collapsed||e.collapsing)&&"top"===e.owner.expandedHeaderDock&&e.owner.collapsible.direction.match($s)?"start":"end",js=class extends _s{static get $name(){return"CollapseTool"}static get type(){return"collapsetool"}static get configurable(){return{autoAlign:!0,collapsed:null,collapsing:null,collapsify:!1,direction:"up",defaultBindProperty:null}}compose(){const{collapsed:e,direction:n}=this;return{class:{[`b-icon-collapse-${n}`]:1,"b-collapsed":e}}}changeAutoAlign(e){return!0===e?autoAlign:e}syncAutoAlign(){const{autoAlign:e}=this;e&&(this.align=e(this))}updateAutoAlign(){this.syncAutoAlign()}updateCollapsed(){this.syncAutoAlign()}updateCollapsing(){this.syncAutoAlign()}updateDirection(){this.syncAutoAlign()}};js.initClass(),js._$name="CollapseTool";var zs=/^(?:UP|DOWN|LEFT|RIGHT)$/,Bs=/^(left|top)$/i,Hs={},Vs=/^b-dock-(top|left|right|bottom)$/,Ns="b-panel-collapse-revealer",qs=/^(?:left|right)$/i,Ws="b-collapse-unflex",{round:Us}=Math,Gs=["up","down","left","right"].reduce(((e,n)=>(e[n.toUpperCase()]=e[n]=n,e)),{}),Ys={top:["top","bottom"],right:["right","left"],bottom:["bottom","top"],left:["left","right"]},Ks={hl:"LEFT",hr:"RIGHT",vb:"DOWN",vt:"UP"},Xs={h:"w",w:"h"},Zs={up:"top",right:"right",down:"bottom",left:"left"},Qs={top:!1,right:!0,bottom:!1,left:!0},Js={top:"UP",right:"RIGHT",bottom:"DOWN",left:"LEFT"},ea={top:e=>`translate(0, -${Us(e.height||0)}px)`,bottom:e=>`translate(0, ${Us(e.height||0)}px)`,right:e=>`translate(${Us(e.width||0)}px, 0)`,left:e=>`translate(-${Us(e.width||0)}px, 0)`},ta=0,na=class extends(re.mixin(Factoryable_default)){static get $name(){return"PanelCollapser"}static get type(){return"inline"}static get configurable(){return{animation:{duration:200},collapsed:{value:null,$config:null,default:!1},direction:null,collapseTooltip:"L{Collapse}",expandTooltip:"L{Expand}",panel:{value:null,$config:"nullify"},supportAxis:null,tool:{type:"collapsetool",handler(e){var n;null==(n=this.collapsible)||n.onCollapseClick(e)}}}}static get factoryable(){return{defaultType:"inline"}}get collapsing(){return"collapsing"===this.collapsingExpanding}get collapsingExpanding(){var e;const n=null==(e=this.currentOperation)?void 0:e.collapsing;return null==n?null:n?"collapsing":"expanding"}get currentDock(){var e,n,r,i;return null!=(i=null==(r=null==(n=null==(e=this.panel)?void 0:e.header)?void 0:n.dock)?void 0:r.toLowerCase())?i:"top"}get expanding(){return"expanding"===this.collapsingExpanding}get collapseTool(){var e,n;return null==(n=null==(e=this.panel)?void 0:e.tools)?void 0:n.collapse}get collapseDim(){return qs.test(this.collapseDir)?"width":"height"}getCollapseDir(e){var n;let{direction:r,panel:i}=this;if(!r||zs.test(r)){const e=null==i?void 0:i.placement;r=e?Ks[e]:Js[(null==(n=null==i?void 0:i.header)?void 0:n.dock)||"top"]}return e?Gs[r]:r}get collapseDir(){return this.getCollapseDir(!0)}get collapseDock(){return this.collapseInfo[0]}get collapseInfo(){const{panel:e}=this,n=e.hasHeader&&e.expandedHeaderDock;let r=Zs[this.collapseDir],i=!1;return n&&((i=Qs[r]!==Qs[n])||(r=n)),[r,i]}get toolsConfig(){const{direction:e,tool:n}=this;return n&&{collapse:Et.assign({direction:e.toLowerCase()},n)}}beforeCollapse(e){const{panel:n}=this,{element:r}=n;r.contains(Gn.getActiveElement(r))&&n.revertFocus(!0)}changeTool(e){const n=this,{panel:r}=n;if(n.isConfiguring||n.isDestroying||!r||r.isDestroying)return e;r.tools={collapse:e}}collapse(e){var n,r;const i=this,{panel:o}=i,s={id:++ta,completed:!1,panel:o};let{currentOperation:a}=i;return e=null==e||e,Et.isObject(e)&&(s.collapsed=!0,Et.assign(s,e),e=s.collapsed,delete s.collapsed),s.collapsing=e,s.previous=null!=a?a:null,e!==i.collapsed?a?a.collapsing!==e&&(s.animation=a.animation.revert({finalize(){var e;null==(e=i.collapseFinalize)||e.call(i,s,!0)}}),s.collapsing=e,a=s):(s.animation=Et.clone(("animation"in s?s:i).animation),!1!==i.beforeCollapse(s)&&(s.animation&&(s.animation.finalize=e=>{var n;return null==(n=i.collapseFinalize)?void 0:n.call(i,s,e)}),o.changingCollapse=!0,i[e?"collapseBegin":"expandBegin"](s),s.animation?a=s:(s.completed=!0,i[e?"collapseEnd":"expandEnd"](s)),o.changingCollapse=!1,s.animation||i.onComplete(e?"collapse":"expand"))):a&&a.collapsing!==e&&(i[e?"expandRevert":"collapseRevert"](s),s.animation=a.animation.revert({finalize(){var e;null==(e=i.collapseFinalize)||e.call(i,s,!1)}}),a=s),i.currentOperation=a,null!=(r=null==(n=null==a?void 0:a.animation)?void 0:n.done())?r:Promise.resolve(e===i.collapsed)}collapseFinalize(e,n){const r=this,{currentOperation:i,panel:o}=r,s=o.collapsed?"expand":"collapse";i===e&&(r.currentOperation=null,e.completed=n,o.changingCollapse=!0,r[s+"End"](e),o.changingCollapse=!1,n&&r.onComplete(s))}applyHeaderDock(e,n=!0){const{currentDock:r,panel:i}=this,o=e?this.collapseDock:i.expandedHeaderDock;o!==r&&i.hasHeader&&(i.header={dock:o},n&&i.recompose.flush())}composeHeader(e){const{panel:n}=this,{class:r}=e,i=n.expandedHeaderDock||Object.keys(r).filter((e=>r[e]&&Vs.test(e))).map((e=>Vs.exec(e)[1][0]));return r[Ns]=1,r[`b-collapsible-${i[0]}${this.collapseDir[0]}`]=1,e}composeTitle(e){return e.class[Ns]=1,e}collapseBegin(e){var n;const r=this,{animation:i}=e,{collapseDim:o,collapseTool:s,panel:a}=r,{element:l,placement:c}=a,[d,u]=r.collapseInfo,h=null==s?void 0:s.element.classList,g=!c||"h"===c[0]&&"width"===o||"v"===c[0]&&"height"===o;r.configuredWidth=a._lastWidth,r.configuredHeight=a._lastHeight,r.transverseCollapse=u,r.applyHeaderDock(!0);const p=a.rectangle(),m=r.lockInnerSize().moveTo(0,0),f=m.clone(),b=Ys[d],v=null==(n=a.headerElement)?void 0:n.getBoundingClientRect(),y=Us((null==v?void 0:v[o])||0);l.classList.toggle(Ws,g),i?(f[b[0]]=f[b[1]],l.classList.add("b-collapsing"),null==h||h.add("b-collapsed","b-collapsing"),s&&(s.collapsing=!0),h&&(h.remove("b-collapsed"),a.rectangle(),h.remove("b-collapsing"),h.add("b-collapsed")),i.element=l,i.retain=!0,i[o]={from:Us(p[o]),to:y},i.items=[{element:r.innerElement,retain:!1,clip:{from:`rect(${m})`,to:`rect(${f})`}}],u&&i.items.push({element:a.headerElement,duration:i.duration,retain:!1,transform:{from:ea[d](v),to:"translate(0, 0)"}}),e.animation=Fs.run(i)):(l.style[o]=`${y}px`,s&&(h.add("b-collapsing","b-collapsed"),s.rectangle(),h.remove("b-collapsing")))}collapseEnd(e){const n=this,{collapseTool:r}=n;n.panel.element.classList.remove("b-collapsing"),r&&(r.collapsing=!1),e.completed?n.collapsed=!0:(n.applyHeaderDock(!1),n.restoreConfiguredSize(),n.lockInnerSize(!1))}collapseRevert(e){var n;null==(n=this.collapseTool)||n.element.classList.remove("b-collapsed")}expandBegin(e){const n=this,{animation:r}=e,{collapseDim:i,collapseTool:o,panel:s}=n,[a,l]=n.collapseInfo,{element:c}=s,d=c.classList,u=d.contains(Ws),h=s.rectangle();d.remove("b-collapsed","b-collapsing"),s.element.style[i]="",n.restoreConfiguredSize(),n.lockInnerSize(!1);const g=s.rectangle(),p=n.lockInnerSize().moveTo(0,0),m=p.clone(),f=Ys[n.collapseDock];null==o||o.element.classList.remove("b-collapsed"),r&&(m[f[0]]=m[f[1]],d.add("b-collapsed","b-expanding"),u&&d.add(Ws),r.element=c,r[i]={from:Us(h[i]),to:Us(g[i])},r.items=[{element:n.innerElement,retain:!1,clip:{from:`rect(${m})`,to:`rect(${p})`}}],l&&r.items.push({element:s.headerElement,duration:r.duration,retain:!1,transform:{from:"translate(0, 0)",to:ea[a](h)}}),e.animation=Fs.run(r))}expandEnd(e){const n=this;n.panel.element.classList.remove("b-expanding"),e.completed&&(n.collapsed=!1,n.applyHeaderDock(!1),n.restoreConfiguredSize(),n.lockInnerSize(!1))}expandRevert(e){var n;null==(n=this.collapseTool)||n.element.classList.add("b-collapsed")}get innerElement(){return this.panel.collapseWrapElement||this.panel.bodyWrapElement}get innerSizeElement(){return this.transverseCollapse?this.panel.element:this.innerElement}get supportAxis(){let{_supportAxis:e}=this;const n=!0===e;return(n||null==e)&&(e=this.collapseDim[0],(n||"absolute"===Gn.getStyleValue(this.panel.element,"position"))&&(e+=Xs[e])),e||""}lockInnerSize(e=!0){const n=this,{innerElement:r,panel:i}=n,o=e?n.supportAxis:"",s=i.element,a=i.headerElement,l=e&&a&&Gt.from(a,s),c=e&&Gt.from(n.innerSizeElement,s),d=r.style;return a&&(a.style.minWidth=o.includes("w")?`${l.width}px`:"",a.style.minHeight=o.includes("h")?`${l.height}px`:""),d.width=e?`${c.width}px`:"",d.height=e?`${c.height}px`:"",r.classList[e?"add":"remove"]("b-panel-collapse-size-locker"),c}onCollapseClick(e){let n=!this.collapsing&&(!!this.expanding||!this.collapsed);e.altKey&&(n={animation:null,collapsed:n}),this.collapse(n)}onComplete(e){var n;null==(n=this.panel)||n.trigger(e)}onHeaderClick({event:e}){0===e.button&&this.panel.collapsed&&e.target.classList.contains(Ns)&&this.onRevealerClick()}onPanelConfigChange({name:e,value:n}){const r=this,{panel:i}=r;"collapsed"===e?i.isPainted&&(r.collapsed=n):"header"!==e||i.changingCollapse||r.syncDirection()}onPanelPaint(){this.syncDirection(),this.panel.collapsed&&!this.collapsed&&this.collapse({animation:null,collapsed:!0})}onRevealerClick(){this.panel._collapse({collapsed:!1})}restoreConfiguredSize(e){const{configuredHeight:n,configuredWidth:r,panel:i}=this;e=null!=e?e:"wh",i.element.classList.remove(Ws),null!=r&&e.includes("w")&&(i.width=r),null!=n&&e.includes("h")&&(i.height=n)}splitHeaderItems({as:e,dock:n}=Hs){var r;return null==(r=this.panel)?void 0:r.splitHeaderItems({as:e,dock:n,alt:!0})}syncDirection(){const e=this,{direction:n}=e;n&&!zs.test(n)||(e.direction=e.getCollapseDir())}changeCollapsed(e){return Boolean(e)}updateCollapsed(e){const{collapseTool:n,panel:r}=this;r&&(r.collapsed=e,r.element.classList[e?"add":"remove"]("b-collapsed")),n&&(n.collapsed=e)}updateDirection(e){const{collapseTool:n,panel:r}=this;n&&(n.direction=Gs[e]),(null==r?void 0:r.rendered)&&r.recompose()}updatePanel(e){var n;const r=this;r.syncDirection(),null==(n=r.panelChangeDetacher)||n.call(r),r.panelChangeDetacher=e&&he.after(e,"onConfigChange","onPanelConfigChange",r,{return:!1})}wrapCollapser(e,n){var r;const i=this,[o,s]=i.collapseInfo;if(!s)return[e,n];const{collapseDir:a,panel:l}=i,{expandedHeaderDock:c,header:d,uiClassList:u}=l,h=null==(r=l.tools)?void 0:r.recollapse,[g,p]=i.splitHeaderItems({as:"element",dock:o}),m=l.hasHeader?l.title||(null==d?void 0:d.title)||" ":null,f=m&&{tag:"header",class:new Xt({...u,[`b-dock-${c}`]:1,"b-panel-header":1,"b-panel-collapser-header":1},null==d?void 0:d.cls),children:[...g,{reference:"collapserTitleElement",html:m,class:{...u,[`b-align-${(null==d?void 0:d.titleAlign)||"start"}`]:1,"b-header-title":1}},...p]};return h&&(h.direction=a),["collapseWrapElement",{class:{...u,[`b-panel-collapser-header-${c}`]:1,[`b-panel-collapser-${a}`]:1,[`b-${Qs[c]?"h":"v"}box`]:1,"b-panel-collapser":1,"b-box-center":1},children:Bs.test(c)?{collapserHeaderElement:f,[e]:n}:{[e]:n,collapserHeaderElement:f}}]}};na.maps={clipByDock:Ys,dockByDirection:Zs,dockIsHorz:Qs},na.initClass(),na._$name="PanelCollapser";var ra=Symbol("pendingCreate"),ia=class extends re{static get prototypeProperties(){return{cleanup:null,configName:null,created:null,factory:null,inferType:"name",owner:null,ownerName:null,proxyable:"undefined"!=typeof Proxy,setup:null,transform:null}}static get properties(){return{defaults:{},instances:{},object:Object.create({})}}get proxy(){const e=this;let n=null;return e.proxyable&&(n=new Proxy(e.instances,{get:(n,r)=>e.get(r),set:(n,r,i)=>(e.set(r,i),!0),deleteProperty:(n,r)=>(e.set(r,null),!0)})),Reflect.defineProperty(e,"proxy",{configurable:!0,value:n}),n}get target(){return this.proxy||this.object}define(e,n){const r=this,{transform:i}=r,o=i?i(n,e):n,s=Et.isInstantiated(o);r.instances[e]=ra,s||r.setDefaults(e,o),r.defineProp(e,!0),s&&r.set(e,o)}defineProp(e,n){const r=this,{object:i}=r;r.proxy||Reflect.defineProperty(n?Object.getPrototypeOf(i):i,e,{configurable:!n,enumerable:!0,get:()=>r.get(e),set:n=>r.set(e,n)})}flush(){var e;const n=this;try{n.updating=!0;for(const e in n.defaults)n.get(e);n.afterConfigureOwner=null==(e=n.afterConfigureOwner)?void 0:e.call(n)}finally{n.updating=!1}}get(e){const{defaults:n,instances:r}=this;return r[e]===ra&&this.set(e,ra),r[e]||n[e]&&null}set(e,n){var r;const i=this,{cleanup:o,configName:s,defaults:a,factory:l,instances:c,owner:d,setup:u,transform:h,updating:g}=i,p=d&&s&&!g,m=c[e]===ra?null:c[e],f=l.reconfigure(m,n===ra?{}:n||null,{cleanup:o&&(n=>o(n,e)),defaults:a[e]||i.setDefaults(e,{}),owner:i.owner,setup:u&&((n,r,i)=>u(n,e,r,i)),transform:h&&(n=>h(n,e))});if(f!==m){const n=p&&{...c};c[e]=f,f?(i.defineProp(e),null==(r=i.created)||r.call(i,f,e)):(delete i.object[e],delete c[e]),p&&d.onConfigChange({name:s,config:d.$meta.configs[s],value:i.target,was:n})}}setDefaults(e,n){const{defaults:r,factory:i,inferType:o,instances:s,owner:a,ownerName:l}=this,{typeKey:c}=i.factoryable;return n=!0===n?{}:Et.assign({},n),("name"===o||!0===o&&!n[c])&&(n[c]=e),l&&(n[l]=a),n.beforeConfigure=n=>{s[e]=n},r[e]=n}update(e){const n=this,{owner:r}=n;let i,o;try{if(n.updating=!0,e)for(i in e)o=e[i],n.defaults[i]?n.set(i,o):o&&n.define(i,o);else for(i in n.instances)n.set(i,null)}finally{n.updating=!1}r&&(r.isConfiguring?n.afterConfigureOwner||(n.afterConfigureOwner=he.before(r,"afterConfigure","flush",n)):n.flush())}};ia.initClass(),ia._$name="DynamicObject";var oa=[],sa={},aa={align:1,weight:1},Toolable_default=e=>class Toolable extends(e||bs){static get $name(){return"Toolable"}static get configurable(){return{tools:{value:null,$config:{nullify:!0}},toolDefaults:{"*":{type:"tool",align:"end"}}}}byWeightSortFn(e,n){return(e.weight||0)-(n.weight||0)}byWeightReverseSortFn(e,n){return(n.weight||0)-(e.weight||0)}gatherTools({align:e,alt:n,refs:r}=sa){var i,o,s;const{collapsed:a,tools:l}=this,c={collapsed:a,alt:n};let d,u,h,g,p,m=[];for(u in l)p=l[u],d=null!=(s=null!=(o=null==(i=null==p?void 0:p.align)?void 0:i.align)?o:null==p?void 0:p.align)?s:"end",d===e&&p.isCollapsified(c)&&m.push(p);if(m.sort(this["end"===e?"byWeightReverseSortFn":"byWeightSortFn"]),r){const e="widget"===r,n={};for(h=0;h<m.length;++h)g=m[h],n[g.ref]=e?g:g.element;m=n}return m}getEndTools({alt:e,refs:n}=sa){return this.gatherTools({align:"end",alt:e,refs:n})}getStartTools({alt:e,refs:n}=sa){return this.gatherTools({align:"start",alt:e,refs:n})}get childItems(){return[...this.getStartTools(),...this._items||oa,...this.getEndTools()]}changeTools(e,n){const r=this,i=r.$tools||(r.$tools=new ia({configName:"tools",factory:bs,inferType:!1,owner:r,created(e){var n,o;e.innerItem=!1,null==(o=e.syncRotationToDock)||o.call(e,null==(n=r.header)?void 0:n.dock),he.after(e,"onConfigChange",((e,{name:n})=>{aa[n]&&r.onConfigChange({name:"tools",value:i.target})})),r.onChildAdd(e)},setup:(e,n)=>((e=Et.merge({},r.toolDefaults["*"],r.toolDefaults[n],e)).parent=r,e.ref=n,e)}));if(i.update(e),!n)return i.target}get widgetClass(){}},la=["b-hbox","b-vbox"],ca={name:"align",style:"alignItems"},da={name:"contentAlign",style:"alignContent"},ua={name:"direction",style:"flexDirection"},ha={name:"justify",style:"justifyContent",classes:["stretch"]},ga={name:"wrap",style:"flexWrap",map:{false:"nowrap",true:"wrap",reverse:"wrap-reverse"}},pa=class extends ys{get vertical(){return!1===this.horizontal}set vertical(e){return this.horizontal=!e}updateAlign(){this.syncConfigStyle(ca)}updateContentAlign(){this.syncConfigStyle(da)}updateDirection(){this.syncConfigStyle(ua)}updateHorizontal(){var e;const n=this,r=null==(e=n.contentElement)?void 0:e.classList,i=Number(n.vertical);r?(r.remove(la[1-i]),r.add(la[i])):n.syncConfigLater("horizontal"),n.syncDirection()}updateJustify(){this.syncConfigStyle(ha)}updateReverse(){this.syncDirection()}updateWrap(){this.syncConfigStyle(ga)}syncDirection(){const e=this,{reverse:n}=e;e.direction=n?`${e.vertical?"column":"row"}${n?"-reverse":""}`:null}};__publicField(pa,"$name","Box"),__publicField(pa,"type","box"),__publicField(pa,"alias","hbox"),__publicField(pa,"configurable",{itemCls:"b-box-item",align:null,contentAlign:null,direction:null,horizontal:!0,justify:null,reverse:null,wrap:null}),pa.initClass(),pa._$name="Box";var ma=class extends pa{};__publicField(ma,"$name","VBox"),__publicField(ma,"type","vbox"),__publicField(ma,"configurable",{horizontal:!1}),ma.initClass(),ma._$name="VBox";var Badge_default=e=>class Badge extends(e||re){static get $name(){return"Badge"}static get configurable(){return{badge:null}}compose(){const{badge:e}=this;return{dataset:{badge:e},class:{"b-badge":null!=e&&""!==e}}}},fa=/(?:^|\s)b-icon-/,ba=/(?:^|\s)b-fa-/,va=Symbol("defaultToggleable"),ya=["items","type","widgets","html","listeners"],wa=Symbol("defaultListener"),Ca=class extends(bs.mixin(Badge_default,Rotatable_default)){static get $name(){return"Button"}static get type(){return"button"}static get configurable(){return{icon:null,menuIcon:"b-icon-picker",pressedIcon:null,iconAlign:"start",text:{value:null,$config:null,default:""},color:null,toggleable:va,pressed:!1,toggleGroup:null,ripple:{radius:75},forwardTwinEvents:["action","toggle"],localizableProperties:["text"],menu:{$config:["lazy","nullify"],value:null},menuDefaults:{type:"menu",autoShow:!1,autoClose:!0,floating:!0,scrollAction:"realign",align:"t0-b0"},href:null,target:null,defaultBindProperty:null}}updateElement(e,n){var r,i,o;const s=this,{constructor:a}=s,l=super.updateElement(e,n),c=s.peekConfig("menu"),d=!!c&&(c.isWidget?c.role:(null==(i=null==(r=a.resolveType(c.type))?void 0:r.configurable)?void 0:i.role)||(null==(o=a.configurable.menuDefaults)?void 0:o.type)||"menu");return s.ariaHasPopup=d,l}compose(){const{color:e,href:n,icon:r,iconAlign:i,pressed:o,pressedIcon:s,target:a,text:l,toggleable:c,toggleGroup:d,menuIcon:u}=this,h=this.hasConfig("menu"),g=o&&s?s:r;return{tag:n?"a":"button",href:n,target:a,class:{[`b-icon-align-${i}`]:r,[e]:Boolean(e),"b-pressed":o&&c,"b-text":Boolean(l),"b-has-menu":h},"aria-pressed":o,dataset:{group:d},listeners:{click:"onInternalClick",mousedown:"onInternalMousedown"},children:{iconElement:(r||s)&&{"aria-hidden":!0,tag:"i",class:{...Xt.normalize(g,"object"),"b-icon":fa.test(g),"b-fa":ba.test(g)}},label:l&&{tag:"label",text:l},menuIconElement:h&&u&&{tag:"i",class:{"b-icon":fa.test(u),"b-fa":ba.test(u),"b-button-menu-icon":1,[u]:1}}}}}configureOverflowTwin(e){const n=this,r=super.configureOverflowTwin(e);return r.text||(r.text=n.text||n.tooltipText),r}onHide(){var e;null==(e=this._menu)||e.hide()}get childItems(){return this._menu&&[this.menu]}onFocusOut(e){var n;super.onFocusOut(e),null==(n=this.menu)||n.hide()}get focusElement(){return this.element}changeText(e){return null==e?"":e}changeToggleable(e){return e===va?this.toggleGroup||this.config.menu:e}changeMenu(e,n){const r=this,{element:i}=r;return e?(e.isWidget?(e.forElement=i,e.owner=r,e.constrainTo=r.rootElement):("object"!=typeof e||ya.some((n=>n in e))||(e={lazyItems:e}),e=bs.reconfigure(n,e?Et.merge({owner:r,constrainTo:r.rootElement,forElement:i},r.menuDefaults,e):null,r)),e.align.constrainPadding=10,r.detachListeners(wa),e.ion({name:wa,beforeShow:"onMenuBeforeShow",hide:"onMenuHide",show:"onMenuShow",thisObj:this})):null==n||n.destroy(),e}onMenuBeforeShow({source:e}){return this.trigger("beforeShowMenu",{menu:e})}onMenuShow(){this.ariaElement.setAttribute("aria-expanded",!0)}onMenuHide(){this.ariaElement.setAttribute("aria-expanded",!1),this.toggle(!1)}updateMenu(e){this.toggleable=Boolean(e)}updatePressed(e){var n,r;const i=this;if(!i.toggleable||i.isConfiguring)return;const{menu:o}=i;e&&Gn.forEachSelector(i.rootElement,`button[data-group=${i.toggleGroup}]`,(e=>{e!==i.element&&(bs.getById(e.id).pressed=!1)})),o&&(o.initialConfig.minWidth||(o.minWidth=i.width),o.align.minHeight=null!=(n=o._minHeight)?n:100,o.align.minWidth=null!=(r=o._minWidth)?r:100,o[e?"show":"hide"]()),i.trigger("toggle",{pressed:e})}onInternalMousedown(e){var n;(null==(n=this._menu)?void 0:n.containsFocus)&&this.pressed&&e.preventDefault()}onInternalClick(e){const n=this,r={event:e};if(!n.disabled){if(n.toggleable){if(n.toggleGroup&&n.pressed)return;if(n.toggle(!n.pressed),n.isDestroyed)return}n.trigger("click",r),n.isDestroyed||n.trigger("action",r),n.href||(e.preventDefault(),e.stopPropagation())}}toggle(e=!this.pressed){!1!==this.trigger("beforeToggle",{pressed:e})&&(this.pressed=e)}};Ca.initClass(),Ca._$name="Button";var Sa={refs:"element"},onCreateTwin=e=>e.element.style.margin="",isToolbar=e=>e.isToolbar,itemScoreFn=e=>e[0]+(e[1].minifiable?0:9e9),xa={hidden:!1,width:""},Da={...xa,flex:""},Ea=[{box:"hbox",clientSizeProp:"clientWidth",edgeProp:"right",flexDir:"row",horizontal:!0,max:"maxX",overflow:"overflowX",pos:"x",scrollSize:"scrollWidth",sizeProp:"width"},{box:"vbox",clientSizeProp:"clientHeight",edgeProp:"bottom",flexDir:"column",horizontal:!1,max:"maxY",overflow:"overflowY",pos:"y",scrollSize:"scrollHeight",sizeProp:"height"}],Ra={delay:0,startRate:40,endRate:200,accelerateDuration:500},ka={menu:1,pressed:1},Ta=class extends(Rs.mixin(Toolable_default)){static get $name(){return"Toolbar"}static get type(){return"toolbar"}static get delayable(){return{syncOverflowVisibility:{type:"raf",cancelOutstanding:!0}}}static get configurable(){return{defaultType:"button",dock:"top",layout:{type:"box"},overflow:{$config:["lazy","nullify"],value:{type:"menu"}},toolDefaults:{overflowMenuButton:{type:"button",hidden:!0,icon:"b-icon-menu",menuIcon:null,defaultCls:{"b-overflow-button":1}},overflowScrollEnd:{handler:"up.onEndScrollClick",hidden:!0,defaultCls:{"b-icon-angle-right":1,"b-overflow-button":1,"b-icon":1}},overflowScrollStart:{align:"start",handler:"up.onStartScrollClick",hidden:!0,defaultCls:{"b-icon-angle-left":1,"b-overflow-button":1,"b-icon":1}}},widgetCls:null,ignoreParentReadOnly:!0}}static get prototypeProperties(){return{flexRowCls:"b-hbox",flexColCls:"b-vbox"}}static getEvictionList(e){const n=e.filter((e=>"none"!==e.overflowable));return n.forEach(((e,r)=>n[r]=[r,e])),n.sort(((e,n)=>itemScoreFn(n)-itemScoreFn(e))),n}compose(){const e=this,{axisProps:n,dock:r}=e,i=e.getEndTools(Sa),o=e.getStartTools(Sa);return{class:{[`b-dock-${r}`]:1,[`b-${r}-toolbar`]:1,[`b-${n.box}`]:1},children:{...o,toolbarContent:{class:{"b-box-center":1,"b-toolbar-content":1}},...i}}}get axisProps(){return Ea[this.layout.horizontal?0:1]}get contentElement(){return this.toolbarContent}get overflowMenuButton(){var e;return null==(e=this.tools)?void 0:e.overflowMenuButton}get overflowType(){const{overflow:e}=this;return"string"==typeof e?e:null==e?void 0:e.type}onChildAdd(e){var n;super.onChildAdd(e),this.processAddedLeafItem(e),null==(n=e.syncRotationToDock)||n.call(e,this.dock)}onChildRemove(e){super.onChildRemove(e),this.syncOverflowVisibility()}processAddedLeafItem(e){he.after(e,"onConfigChange",this.onLeafItemConfigChange,e),e.isContainer&&e.eachWidget((e=>this.processAddedLeafItem(e)))}onPaint({firstPaint:e}){var n;null==(n=super.onPaint)||n.call(this,...arguments),e&&this.getConfig("overflow")}updateDock(e){var n;const r=this,{layout:i}=r,{vertical:o}=i;if(i.vertical=canonicalDock(e)[1],!r.initialItems){o!==i.vertical&&r.updateOverflow(r.overflow);for(const i of r.childItems)null==(n=i.syncRotationToDock)||n.call(i,e)}}updateOverflow(e,n){var r,i;const o=this,{axisProps:s,contentElement:a,overflowType:l}=o,{flexDir:c}=s,d=null==(r=o.overflowMenuButton)?void 0:r._menu,u={};if(d&&(e?null==d||d.removeAll():d.eachWidget((e=>{e._overflowTwinOrigin.overflowTwin=null}))),"menu"===n?u.overflowMenuButton=null:"scroll"===n&&(u.overflowScrollStart=u.overflowScrollEnd=null),"menu"===l)null==(i=o.scrollable)||i.destroy(),a.style.overflow=a.style.overflowX=a.style.overflowY="",u.overflowMenuButton={cls:{[`b-${c}-menu`]:1}};else if("scroll"===l){const n="object"==typeof e&&(null==e?void 0:e.repeat)||Ra;o.scrollable={[s.overflow]:"hidden-scroll",element:a,internalListeners:{scroll:"onContentScroll",thisObj:o}},u.overflowScrollStart={repeat:n,invertRotate:!0,cls:{[`b-${c}-start-scroller`]:1}},u.overflowScrollEnd={repeat:n,invertRotate:!0,cls:{[`b-${c}-end-scroller`]:1}}}o.tools=u,l?(a.classList.add("b-overflow"),o.monitorResize=!0,o.syncOverflowVisibility()):(a.classList.remove("b-overflow"),o.monitorResize=!1)}onContentScroll(){this.syncScrollerState()}onStartScrollClick(){this.scrollable[this.axisProps.pos]-=2}onEndScrollClick(){this.scrollable[this.axisProps.pos]+=2}onInternalResize(){super.onInternalResize(...arguments),this.isPainted&&this.syncOverflowVisibility()}syncOverflowVisibility(){const e=this,{overflowType:n,contentElement:r,isVisible:i}=e,{clientSizeProp:o,edgeProp:s,sizeProp:a}=e.axisProps,{overflowMenuButton:l,overflowScrollStart:c,overflowScrollEnd:d}=e.tools,u=e.rtl&&e.layout.horizontal,h="menu"===n,getAvailSpace=()=>Math.ceil(r[o]+(!c||c.hidden?0:c.rectangle("outer")[a])+(!d||d.hidden?0:d.rectangle("outer")[a])),getContentSize=()=>{if(0===D.length)return 0;const e=D[D.length-1].rectangle(r);return Math.floor(u?r[o]-e.left:e[s])};let g,p,m,f,b,v,y,w,C,S,x,D;if(i&&n&&0!==e.items.length){if(e.inSyncOverflowVisibility=!0,null==l||l.hide(),e.eachWidget(((e,n)=>{y=e.minifiable,S=e.overflowable,S=y?S||y:S,e.floating?n.down=!1:(n.down=!S,e.innerItem&&(e._toolbarOverflow&&(e.hidden=e._toolbarOverflow=!1),e._toolbarMinified&&(e.minified=e._toolbarMinified=!1),e.isVisible&&(y&&(w||(w=[])).push(e),S&&(D||(D=[])).push(e))))})),D&&(g=getAvailSpace(),p=getContentSize()),D&&p>g)if(h){for(;p>g&&(b=null==w?void 0:w.pop());)v=p,b._toolbarMinified=!0,b.minified=!0,p=getContentSize(),v-=p,(C||(C=[])).push([b,v]);if(p>g){for(m of(l.show(),g=getAvailSpace(),f=Ta.getEvictionList(D),f))p>g&&(b=m[1],b._toolbarOverflowWidth=b.width,b._toolbarOverflow=!0,b.hidden=!0,D.splice(D.indexOf(b),1),(x||(x=[])).push(m),p=getContentSize());if(x){for(x.sort(((e,n)=>e[0]-n[0])).forEach(((e,n)=>x[n]=e[1]));null==C?void 0:C.length;)[b,v]=C.pop(),p+v<=g&&!b._toolbarOverflow&&(p+=v,b.minified=b._toolbarMinified=!1);e.syncOverflowMenuButton(x)}else l.hide()}}else d.show(),c.show(),e.syncScrollerState();else h||(null==d||d.hide(),null==c||c.hide());e.inSyncOverflowVisibility=!1}}syncOverflowMenuButton(e){var n;const r=this,{axisProps:i,overflowMenuButton:o}=r,s={cls:"b-toolbar-overflow-menu",minWidth:280,items:[],align:{align:i.horizontal?"t100-b100":"r100-l100",axisLock:"flexible"}};if(r.addToMenu(s,e.filter((e=>r.overflowItemFilter(e)))),null==(n=o._menu)?void 0:n.isMenu){const e=o.menu,{toAdd:n,toRemove:r}=oe.delta(s.items,e.items,1);if(e.remove(r),e.items.length)for(let r=n.length-1;r>=0;r--)e.insert(n[r],0);else e.add(n)}else o.menu=s}syncScrollerState(){const{axisProps:e,scrollable:n}=this,{overflowScrollStart:r,overflowScrollEnd:i}=this.tools,o=n[e.pos],s=n[e.max];r.disabled=!o,i.disabled=Math.abs(Math.ceil(o))>=Math.abs(s)}overflowItemFilter(e){const{filter:n}=this.overflow;return Boolean(n?n.call(this,e):Gn.getChildElementCount(e.element))}addToMenu(e,n){const r=this.horizontal?Da:xa;for(const i of n){const n=i.ensureOverflowTwin(r,onCreateTwin);e.items.push(n)}}onLeafItemConfigChange(e,{name:n,value:r}){const i=this,o=i.up(isToolbar),s=o.hasConfig("overflow"),{overflowTwin:a}=i;!s||(null==o?void 0:o.inSyncOverflowVisibility)||"hidden"===n&&r===i._toolbarOverflow||(a&&!ka[n]&&(a[n]=r),(null==o?void 0:o.isPainted)&&"overflowMenuButton"!==i.ref&&(i.isTextField&&"value"===n&&(i.containsFocus||(null==a?void 0:a.containsFocus))||o.syncOverflowVisibility()))}createWidget(e){"->"===e?e={type:"widget",cls:"b-toolbar-fill"}:"|"===e?e={type:"widget",cls:"b-toolbar-separator"}:"string"==typeof e&&(e={type:"widget",cls:"b-toolbar-text",html:e});const n=super.createWidget(e);return this.widgetCls&&n.element.classList.add(this.widgetCls),n}};Ta.initClass(),Ta._$name="Toolbar";var acceptNode=e=>!e.classList.contains("b-focus-trap")&&Gn.isFocusable(e)?Gn.NodeFilter.FILTER_ACCEPT:Gn.NodeFilter.FILTER_SKIP,Ma=[],Aa={},Ia=[Ma,Ma],finishBodyWrap=(e,n,r)=>{const{vertical:i}=e;return delete e.vertical,{...e,class:{...n,[`b-${i?"v":"h"}box`]:1,"b-box-center":1,"b-panel-bar-wrap":!r}}},wrapBody=(e,n,r=!1)=>{const i={vertical:r,children:e?[e]:[]};return n&&(i.tag=n),i},Fa={dock:1,hidden:1,weight:1},Pa={top:[!0,!0],bottom:[!0,!1],left:[!1,!0],right:[!1,!1]},Oa={header:1,"pre-header":1},La=class extends(Rs.mixin(State_default,Toolable_default)){static get $name(){return"Panel"}static get type(){return"panel"}static get configurable(){return{localizableProperties:["title"],collapsed:{value:null,$config:null,default:!1},collapsible:{value:null,$config:"nullify"},bodyCls:{$config:{merge:"classList"},value:null},bodyTag:null,bodyWrapTag:null,trapFocus:null,title:null,header:null,stateful:["collapsed"],stripDefaults:{"*":{type:"toolbar",dock:"top"},bbar:{dock:"bottom",weight:-1e3},tbar:{weight:-1e3}},strips:{value:null,$config:"nullify"},toolDefaults:{close:{weight:-1e3},collapse:{weight:-990}},footer:null,revealed:null,tbar:null,bbar:null,role:"region"}}updateElement(e,n){const r=super.updateElement(e,n);return this.titleElement&&Gn.setAttributes(this.ariaElement,{"aria-describedby":this.titleElement.id}),r}compose(){const e=this,{collapsible:n,focusable:r,hasItems:i,revealed:o,tools:s}=e,a=e.composeHeader(),l=(null==a?void 0:a.class["b-dock-left"])||(null==a?void 0:a.class["b-dock-right"]);let c=e.composeBody(),d="bodyWrapElement";return n&&([d,c]=n.wrapCollapser(d,c)),{tabIndex:i&&!1!==r||r?0:null,class:{[`b-panel-collapsible-${null==n?void 0:n.type}`]:n,[`b-panel-collapse-${null==n?void 0:n.collapseDir}`]:n,[`b-${l?"h":"v"}box`]:1,"b-panel-collapsible":n,"b-panel-has-header":a,"b-panel-has-tools":s?1:0,"b-panel-overlay-revealed":o},children:{topFocusTrap:{"aria-hidden":!0,tabIndex:0,class:{"b-focus-trap":1}},headerElement:a,[d]:c,bottomFocusTrap:{"aria-hidden":!0,tabIndex:0,class:{"b-focus-trap":1,"b-end-focus-trap":1}}}}}composeBody(){const e=this,{bodyCls:n,bodyConfig:r,bodyWrapTag:i,footer:o,uiClassList:s}=e,a=Et.values(e.strips,((e,n)=>!Pa[null==n?void 0:n.dock])).sort(e.byWeightSortFn);let l,c,d,u,h,g,p;for(o&&(d=o.dock||"bottom",a.unshift({dock:d,element:{tag:"footer",reference:"footerElement",html:"string"==typeof o?o:o.html,class:{...s,[`b-dock-${d}`]:1,[`${o.cls||""}`]:1}}})),n&&(r[h="className"]||(h="class"),r[h]=new Xt(r[h]).assign(n)),u=a.length;u-- >0;)l=a[u],[g,c]=Pa[l.dock],p?p.vertical!==g&&(p=wrapBody(finishBodyWrap(p,s),"",g)):p=wrapBody(r,i,g),p.children[c?"unshift":"push"](l.element);const m=finishBodyWrap(p||wrapBody(r,i),s,!0);return m.class["b-panel-body-wrap"]=1,m.class[`b-${e.$$name.toLowerCase()}-body-wrap`]=1,m}get hasHeader(){if(!1===this.header)return!1;const{header:e,title:n,tools:r,parent:i}=this,o=this.maximizable||Object.values(r||{}).some((e=>!e.hidden));return e||!(null==i?void 0:i.suppressChildHeaders)&&(n||o)}get rootUiClass(){return La}composeHeader(e){var n;const r=this;if(!r.hasHeader&&!e)return;const i=r.header||{},o=i.dock||"top",[s,a]=r.splitHeaderItems({as:"element",dock:o}),l=r.$meta.hierarchy,c=r.composeTitle(i),d=new Xt({[`b-dock-${o}`]:1,...r.uiClassList},i.cls);let u,h;for(u=l.indexOf(La);u<l.length;++u)h=l[u].$$name,"Grid"!==h&&(d[`b-${h.toLowerCase()}-header`]=1);const g={tag:"header",class:d,children:[...s,c,...a]};return(null==(n=r.collapsible)?void 0:n.composeHeader(g))||g}composeTitle(e){var n;const r="string"==typeof e?e:this.title||e.title,i={reference:"titleElement",id:`${this.id}-panel-title`,html:null!=r?r:" ",class:{[`b-align-${e.titleAlign||"start"}`]:1,"b-header-title":1,...this.uiClassList}};return Et.isObject(r)&&(delete i.html,Et.merge(i,r)),(null==(n=this.collapsible)?void 0:n.composeTitle(i))||i}updateTitle(){}afterRecompose(){var e;super.afterRecompose();const n=this,{headerElement:r}=n;null==(e=n._headerClickDetacher)||e.call(n),n._headerClickDetacher=r&&cn.on({element:r,click:e=>{var r;return null==(r=n.trigger)?void 0:r.call(n,"headerClick",{event:e})}})}onHeaderClick(e){var n;null==(n=this.collapsible)||n.onHeaderClick(e)}onPaint(){var e;super.onPaint(...arguments),null==(e=this.collapsible)||e.onPanelPaint(this)}splitHeaderItems({as:e,dock:n,alt:r}=Aa){var i,o,s,a;const l=this,c="element"===e,{collapsed:d}=l,u=l.getEndTools({alt:r}),h=l.getStartTools({alt:r}),g=Et.values(l.strips,((e,n)=>!Oa[null==n?void 0:n.dock]&&n.isCollapsified({collapsed:d,alt:r})));let p,m,f,b=Ia;if(g.length+u.length+h.length){for(b=[m=[...h,...g.filter((e=>"pre-header"===e.dock)).sort(l.byWeightSortFn)],p=[...g.filter((e=>"header"===e.dock)).sort(l.byWeightReverseSortFn),...u]],f=0;f<m.length;++f)n&&(null==(o=(i=m[f]).syncRotationToDock)||o.call(i,n)),c&&(m[f]=m[f].element);for(f=0;f<p.length;++f)n&&(null==(a=(s=p[f]).syncRotationToDock)||a.call(s,n)),c&&(p[f]=p[f].element)}return b}set bodyConfig(e){this._bodyConfig=e}get bodyConfig(){const e=this,{bodyTag:n}=e,r=Et.merge({reference:"bodyElement",className:{...e.getStaticWidgetClasses(La,"-content"),"b-box-center":1,"b-text-content":e.textContent&&e.hasNoChildren}},e._bodyConfig);return n&&(r.tag=n),!e.initializingElement&&e._element||(r.html=e.content||e._html),r}changeBodyCls(e){return Xt.from(e)}changeTbar(e){return this.getConfig("strips"),this.strips={tbar:e},this.strips.tbar}changeBbar(e){return this.getConfig("strips"),this.strips={bbar:e},this.strips.bbar}get childItems(){var e;const n=this,r=Et.values(n.strips,((e,n)=>!Pa[null==n?void 0:n.dock])).sort(n.byWeightSortFn),[i,o]=n.splitHeaderItems(),[s,a]=(null==(e=n.collapsible)?void 0:e.splitHeaderItems())||Ia;return[...i,...s,...o,...a,...r.filter((e=>Pa[e.dock][1])),...n._items||Ma,...r.filter((e=>!Pa[e.dock][1])).reverse()]}changeStrips(e,n){const r=this,i=r.$strips||(r.$strips=new ia({configName:"strips",factory:bs,inferType:!1,owner:r,created(e){var n;const{dock:o}=e;if(!Oa[o]&&!Pa[o])throw new Error(`Invalid dock value "${o}"; must be: top, left, right, bottom, header, or pre-header`);he.after(e,"onConfigChange",((e,{name:n})=>{Fa[n]&&r.onConfigChange({name:"strips",value:i.target})})),e.innerItem=!1,r.onChildAdd(e),e.parent=r,null==(n=e.layout)||n.renderChildren(),e.hasItems&&(r.hasItems=!0)},setup:(e,n)=>((e=Et.merge(Et.clone(r.stripDefaults["*"]),r.stripDefaults[n],e)).parent=r,e.ref=n,e),transform:e=>(Array.isArray(e)&&(e={items:e}),e||null)}));if(i.update(e),!n)return i.target}get collapsing(){var e;return null==(e=this.collapsible)?void 0:e.collapsing}get collapsingExpanding(){var e;return null==(e=this.collapsible)?void 0:e.collapsingExpanding}get expanding(){var e;return null==(e=this.collapsible)?void 0:e.expanding}changeCollapsed(e){const n=this,{collapsible:r}=n;if(n.recompose.flush(),e=Boolean(e),!r||n.changingCollapse||!n.isPainted)return e;null==r||r.collapse({animation:null,collapsed:e})}changeCollapsible(e,n){const r=this;return r.getConfig("tools"),e&&(!0===e?e={}:"string"==typeof e&&(e={[Pa[e]?"direction":"type"]:e})),na.reconfigure(n,e,{owner:r,defaults:{panel:r},cleanup(){r.collapsed&&(n.collapse({animation:null,collapsed:!1}),r._collapsed=1)}})}updateCollapsible(e){const n=this,r=null==e?void 0:e.toolsConfig;n.tools={collapse:(null==r?void 0:r.collapse)||null,recollapse:(null==r?void 0:r.recollapse)||null},e&&n.isPainted&&n.collapsed&&(n._collapsed=1),1===n.collapsed&&(n.collapsed=!0)}_collapse(e,n){var r;return!0!==n&&void 0!==n&&(!1===n?e.collapsed=!e.collapsed:"number"==typeof n?e.animation={duration:n}:null===n?e.animation=n:!0===n||("animation"in n?Et.merge(e,n):e.animation=n)),null==(r=this.collapsible)?void 0:r.collapse(e)}collapse(e){return this._collapse({collapsed:!0},e)}expand(e){return this._collapse({collapsed:!1},e)}toggleCollapsed(e){return this.collapsed?this.expand(e):this.collapse(e)}get expandedHeaderDock(){var e,n,r;return null!=(r=null!=(n=this._expandedHeaderDock)?n:null==(e=this.initialConfig.header)?void 0:e.dock)?r:"top"}set expandedHeaderDock(e){this._expandedHeaderDock=null==e?void 0:e.toLowerCase()}updateHeader(e){this.changingCollapse||(this.expandedHeaderDock=null==e?void 0:e.dock)}updateTrapFocus(e){var n;const r=this;r.element.classList[e?"add":"remove"]("b-focus-trapped"),r.focusTrapListener=null==(n=r.focusTrapListener)?void 0:n.call(r),e&&(r.focusTrapListener=cn.on({element:r.element,focusin:"onFocusTrapped",delegate:".b-focus-trap",thisObj:r}),r.treeWalker||(r.treeWalker=this.setupTreeWalker(r.element,Gn.NodeFilter.SHOW_ELEMENT,acceptNode)))}setupTreeWalker(e,n,r){return document.createTreeWalker(e,n,r)}onFocusTrapped(e){const n=this,r=n.treeWalker;if(e.target===n.bottomFocusTrap)r.currentNode=n.topFocusTrap,r.nextNode();else{if(e.target!==n.topFocusTrap)return;r.currentNode=n.bottomFocusTrap,r.previousNode()}n.requestAnimationFrame((()=>r.currentNode.focus()))}get focusElement(){return this.hasItems&&(super.focusElement||this.element)}get contentElement(){return this.element&&this.bodyElement}get widgetClassList(){var e;const n=this,r=super.widgetClassList;return n.hasHeader&&r.push("b-panel-has-header",`b-header-dock-${(null==(e=n.header)?void 0:e.dock)||"top"}`),n.tbar&&r.push("b-panel-has-top-toolbar"),n.bbar&&r.push("b-panel-has-bottom-toolbar"),r}};La.initClass(),La._$name="Panel";var _a=class extends La{static get $name(){return"Popup"}static get type(){return"popup"}static get configurable(){return{autoShow:!0,autoClose:!0,showOnClick:!1,forElement:null,monitorResize:!0,floating:!0,hidden:!0,axisLock:!0,hideAnimation:{opacity:{from:1,to:0,duration:".3s",delay:"0s"}},showAnimation:{opacity:{from:0,to:1,duration:".4s",delay:"0s"}},stripDefaults:{bbar:{layout:{justify:"flex-end"}}},testConfig:{hideAnimation:null,showAnimation:null},closeAction:"hide",trapFocus:!0,focusOnToFront:!0,closable:null,maximizable:null,modal:null,maximized:null,tools:{close:{cls:"b-popup-close",handler:"close",weight:-1e3,ariaLabel:"L{Popup.close}",hidden:!0},maximize:{cls:"b-popup-expand",handler:"toggleMaximized",weight:-999,hidden:!0}},highlightReturnedFocus:!0,role:"dialog"}}finalizeInit(){const e=this,{forElement:n}=e;e.anchoredTo=n,e.initialAnchor=e.anchor,n&&e.showOnClick&&(e.initialConfig.autoShow||(e.autoShow=!1),cn.on({element:n,click:"onElementUserAction",thisObj:e})),super.finalizeInit(),!e.autoShow||n&&!Gn.isVisible(n)||(!0===e.autoShow?e.show():e.setTimeout((()=>e.show()),e.autoShow))}onPaint({firstPaint:e}){var n;null==(n=super.onPaint)||n.call(this,...arguments);const r=this;e&&r.headerElement&&cn.on({element:r.headerElement,dblclick:r.onHeaderDblClick,thisObj:r})}doDestroy(){this.syncModalMask(),super.doDestroy()}compose(){const{hasNoChildren:e,textContent:n}=this;return{class:{"b-text-popup":Boolean(n&&e)}}}close(){const e=this;if(!e._hidden&&!1!==e.trigger("beforeClose")||e._hidden&&"destroy"===e.closeAction)return e.modal&&"destroy"===e.closeAction&&e.revertFocus(),e.unmask(),e.containsFocus&&e.highlightReturnedFocus&&e.setTimeout((()=>e.element.classList.add("b-using-keyboard")),0),e[e.closeAction]()}toggleMaximized(){this.maximized=!this.maximized}updateMaximized(e){Gn.toggleClasses(this.element,["b-maximized"],e)}onInternalKeyDown(e){const n=this;"Escape"===e.key&&(e.stopImmediatePropagation(),n.floating||n.positioned?n.close(!0):n.collapsible&&(n.revealed?n.collapsible.toggleReveal():n.collapse()))}onDocumentMouseDown({event:e}){const n=this,{owner:r}=n,{target:i}=e;if("touchend"!==e.type&&(null==r?void 0:r.isButton)&&r._menu===n&&r.element.contains(i))return e.preventDefault(),!1;n.modal&&i===_a.modalMask?(e.preventDefault(),n.modal.closeOnMaskTap?n.close():n.containsFocus||n.focus()):n.owns(i)||!n.autoClose||n.containsFocus||n.close()}get isTopModal(){return Gn.isVisible(_a.modalMask)&&this.element.previousElementSibling===_a.modalMask}onFocusIn(e){const n=Gn.getActiveElement(this);super.onFocusIn(e),Gn.getActiveElement(this)===n&&e.target===this.element&&this.focus()}onFocusOut(e){globalThis.visualViewport&&globalThis.visualViewport.height<document.documentElement.clientHeight-1||this.modal||!this.autoClose||this.close(),super.onFocusOut(e)}onShow(){var e;const n=this;n.autoClose&&n.addDocumentMouseDownListener(),n.focusOnToFront&&n.focus(),null==(e=super.onShow)||e.call(this),n.syncModalMask()}addDocumentMouseDownListener(){this.mouseDownRemover||(this.mouseDownRemover=or.ion({globaltap:"onDocumentMouseDown",thisObj:this}))}updateModal(e){e&&(this.floating=!0)}syncModalMask(){const e=this,{modal:n,element:r}=e;if(r.setAttribute("aria-modal",Boolean(n)),n&&e.isVisible)"number"!=typeof e._x&&"number"!=typeof e._y&&(e.centered=!0,e.anchor=!1),e.modalMask.classList.remove("b-hide-display"),r.classList.add("b-modal");else if(e.isPainted){r.classList.remove("b-modal");const n=e.floatRoot.querySelectorAll(".b-modal"),i=n.length?_a.fromElement(n[n.length-1],"popup"):null;i?i.syncModalMask():_a.modalMask.classList.add("b-hide-display")}}onHide(){var e,n;const r=this;null==(e=r.mouseDownRemover)||e.call(r),r.mouseDownRemover=null,null==(n=super.onHide)||n.call(this),r.syncModalMask()}onElementUserAction(){this.show()}onHeaderDblClick(){this.maximizable&&this.toggleMaximized()}updateClosable(e){this.tools.close.hidden=!e}updateMaximizable(e){this.tools.maximize.hidden=!e}get modalMask(){const{modalMask:e}=_a;return e.nextElementSibling!==this.element&&this.floatRoot.insertBefore(e,this.element),e}static get modalMask(){return this._modalMask||(this._modalMask=Gn.createElement({className:"b-modal-mask b-hide-display"}),cn.on({element:this._modalMask,wheel:e=>e.preventDefault()})),this._modalMask}};_a.initClass(),_a._$name="Popup";var $a=/^b-icon-/,ja=/^b-fa-/,za=class extends bs{static get $name(){return"MenuItem"}static get type(){return"menuitem"}static get configurable(){return{checked:null,separator:null,toggleGroup:null,menu:{value:null,$config:["lazy","nullify"]},icon:null,closeParent:null,href:null,target:null,localizableProperties:["text"],role:"menuitem",closeMenuDelay:200}}updateElement(e,n){const r=super.updateElement(e,n);return"boolean"==typeof this.checked&&(this.role="menuitemcheckbox"),this.ariaHasPopup=!!this.hasMenu&&"menu",r}compose(){var e;const n=this,{checked:r,href:i,hasMenu:o,separator:s,target:a,text:l,toggleGroup:c}=n,d="boolean"==typeof r,u=n.icon||(d?"b-fw-icon":""),h="b-icon-"+(c?"radio-":""),g="object"==typeof l;return{tag:i?"a":"div",tabIndex:-1,href:i,target:a,class:{"b-has-submenu":o,"b-checked":r,"b-separator":s||(null==(e=n.cls)?void 0:e["b-separator"])},dataset:{group:n.toggleGroup},[d?"aria-checked":""]:r,[o?"aria-expanded":""]:!1,children:{iconElement:u&&{"aria-hidden":!0,tag:"i",class:{"b-fa":ja.test(u),"b-icon":$a.test(u),"b-menuitem-icon":1,[`${h}checked`]:!0===r,[`${h}unchecked`]:!1===r,...Xt.normalize(u,"object")}},textElement:{tag:"span",html:g?null:l,class:{"b-menu-text":1,"b-menu-custom-content":g},children:g?[l]:null},subMenuIcon:o&&{"aria-hidden":!0,tag:"i",class:{"b-fw-icon":1,"b-icon-sub-menu":1}}}}}doAction(e){const n=this,r=this.parent,i={menu:r,item:n,element:n.element,bubbles:!0,domEvent:e};if("boolean"==typeof n.checked){const e=!n.checked;n.toggleGroup&&!e||(n.checked=!n.checked)}n.trigger("beforeItem",i),n.trigger("item",i),n.closeParent&&r&&(r.rootMenu.close(),e&&!n.href&&e.preventDefault())}get focusElement(){return this.element}get contentElement(){return this.textElement}get isFocusable(){const{focusElement:e}=this;return e&&this.isVisible&&(e===document.body||e.offsetParent)}get hasMenu(){return this.hasConfig("menu")}get childItems(){const{_menu:e}=this;return e?[e]:[]}get text(){return this.html}set text(e){this.html=e}onFocusIn(e){super.onFocusIn(e),!this.disabled&&this.menu&&this.delay("openMenu",200)}onFocusOut(e){this.clearTimeout("openMenu"),super.onFocusOut(e),this._menu&&(this.menu.closeTimer=this.menu.setTimeout((()=>this.closeMenu()),this.closeMenuDelay))}openMenu(e){const{menu:n}=this;!this.disabled&&n&&(n.focusOnToFront=e,n.show())}onChildShow(e){super.onChildShow(e),this.ariaElement.setAttribute("aria-expanded",!0)}closeMenu(){this._menu instanceof bs&&this.menu.close()}onChildHide(e){super.onChildHide(e),this.ariaElement.setAttribute("aria-expanded",!1)}changeToggleGroup(e){return e&&"boolean"!=typeof this.checked&&(this.checked=!1),e}changeChecked(e,n){if(this.isConfiguring||"boolean"==typeof n)return Boolean(e)}updateChecked(e){const n=this;n.isConfiguring||(n.toggleGroup&&n.uncheckToggleGroupMembers(),n.element.setAttribute("aria-checked",e),n.trigger("toggle",{menu:n.owner,item:n,element:n.element,bubbles:!0,checked:e}))}getToggleGroupMembers(){const e=this,{checked:n,toggleGroup:r,element:i}=e,o=[];return n&&r&&Gn.forEachSelector(e.rootElement,`[data-group=${r}]`,(e=>{if(e!==i){const n=bs.fromElement(e);n&&o.push(n)}})),o}uncheckToggleGroupMembers(){this.checked&&this.toggleGroup&&this.getToggleGroupMembers().forEach((e=>e.checked=!1))}get closeParent(){return("boolean"==typeof this.checked?this._closeParent:!1!==this._closeParent)&&!this.hasMenu}changeMenu(e,n){const r=this,{constrainTo:i,scrollAction:o}=r.owner;return!e||"object"!=typeof e||"items"in e||"widgets"in e||"html"in e||(e={lazyItems:e}),Va.reconfigure(n,e,{owner:r,defaults:{type:"menu",align:"s0-e0",anchor:!0,autoClose:!0,autoShow:!1,cls:"b-sub-menu",forElement:r.element,owner:r,ariaLabel:r.text,constrainTo:i,scrollAction:o}})}};za.initClass(),za._$name="MenuItem";var Ba,Ha={ArrowUp:1,ArrowDown:1,ArrowRight:1,ArrowLeft:1,Enter:1,Escape:1},Va=class extends _a{static get $name(){return"Menu"}static get type(){return"menu"}static get configurable(){return{focusable:!0,align:"t-b",scrollAction:"hide",focusOnHover:null,scrollable:!1,defaultType:"menuitem",tools:{close:!1},role:"menu",ariaElement:"bodyElement"}}construct(e){Array.isArray(e)&&(e={lazyItems:e}),super.construct(e),cn.on({element:this.element,click:"onMouseClick",mouseover:"onMouseOver",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",thisObj:this})}afterShow(){const{items:e,element:n}=this;e.some((e=>Boolean(e._menu)))&&n.classList.add("b-menu-with-submenu");e.some((e=>e.icon))&&n.classList.add("b-menu-with-icon"),super.afterShow(...arguments)}createWidget(e){return"string"==typeof e&&(e={text:e}),super.createWidget(e)}get focusElement(){var e;const n=this,r=null==(e=n.parentMenu)?void 0:e.element.contains(Gn.getActiveElement(n.parentMenu)),i=n.items[0];return!r&&!Gn.usingKeyboard&&i instanceof za?n.element:super.focusElement}onDocumentMouseDown({event:e}){if(!this.parentMenu||!this.parentMenu.owns(e.target))return super.onDocumentMouseDown(...arguments)}hide(e){var n,r;const i=this;super.hide(e),i.isVisible||(null==(r=null==(n=i.currentSubMenu)?void 0:n.hide)||r.call(n,e),i.parentMenu&&(i.parentMenu.currentSubMenu=null))}show(){super.show(...arguments);const{parentMenu:e}=this;this.isVisible&&e&&(e.currentSubMenu=this)}onMouseClick(e){const n=e.target.closest(".b-menuitem");n&&this.triggerElement(n,e)}onMouseOver(e){var n;if(!1!==this.focusOnHover){const r=null==(n=e.relatedTarget)?void 0:n.closest(".b-widget"),i=e.target.closest(".b-widget"),o=bs.fromElement(i);!Gn.isTouchEvent&&i&&i!==r&&o.parent===this&&this.setTimeout({fn:"handleMouseOver",delay:30,args:[o],cancelOutstanding:!0})}}handleMouseOver(e){e.focus()}onMouseEnter(){this.clearTimeout(this.closeTimer)}onMouseLeave(e){const n=this,{relatedTarget:r}=e,i=r&&n.owns(r);let o=r instanceof HTMLElement&&bs.fromElement(r),s=!i;if(o){for(;o.ownerCmp;)o=o.ownerCmp;s&=!Gn.getAncestor(o.element,[e.target])}!i&&s&&(n.currentSubMenu&&!n.currentSubMenu.closeTimer&&n.currentSubMenu.hide(),n.element.contains(Gn.getActiveElement(n))&&Gn.getActiveElement(n).matches(".b-menuitem")&&n.focusElement.focus())}onInternalKeyDown(e){const n=bs.fromElement(e),r=n&&n!==this&&!(n instanceof za);if("Escape"===e.key)return void(r?this:this.rootMenu).close();if(super.onInternalKeyDown(e),r)return;Ha[e.key]&&e.preventDefault();const i=this.element,o=Gn.getActiveElement(i);this.navigateFrom(o!==i&&i.contains(o)?o:null,e.key,e)}navigateFrom(e,n,r){const i=this,{treeWalker:o}=i,s=e&&i.getItem(e),a=i.rtl?"ArrowLeft":"ArrowRight",l=i.rtl?"ArrowRight":"ArrowLeft";let c;switch(n){case"ArrowUp":o.currentNode=e||(e=i.bottomFocusTrap),o.previousNode(),c=o.currentNode;break;case"ArrowDown":o.currentNode=e||(e=i.topFocusTrap),o.nextNode(),c=o.currentNode;break;case" ":e&&!e.classList.contains("b-disabled")&&((null==s?void 0:s.menu)?i.openSubMenu(e,s):i.triggerElement(e,r));break;case a:if(e&&(null==s?void 0:s.menu)&&!e.classList.contains("b-disabled")){const n=i.openSubMenu(e,s);null==n||n.focus()}else o.currentNode=e||(e=i.topFocusTrap),o.nextNode(),c=o.currentNode;break;case l:i.isSubMenu?i.hide():e||(o.currentNode=e||(e=i.topFocusTrap),o.nextNode(),c=o.currentNode);break;case"Enter":e&&!e.classList.contains("b-disabled")&&i.triggerElement(e,r)}c&&(c===i.element?i.navigateFrom(i.bottomFocusTrap,"ArrowUp",r):c===e?i.navigateFrom(i.topFocusTrap,"ArrowDown",r):c.focus())}getItem(e){if(null!=e)return"number"==typeof e?this.items[e]:e.nodeType===Element.ELEMENT_NODE?bs.fromElement(e,"menuitem",this.contentElement):this.items.find((n=>n.id==e))}triggerElement(e,n){const r=this.getItem(e);r&&!r.disabled&&r.doAction(n)}get isSubMenu(){var e;return this===(null==(e=this.owner)?void 0:e.menu)}openSubMenu(e,n){var r;const i=this,o=n.menu;if(o){if(!o.isVisible){const s={item:n,element:e};if(!1===i.trigger("beforeSubMenu",s))return;if(!1===(null==(r=n.onBeforeSubMenu)?void 0:r.call(n,s)))return;o.show()}return i.currentSubMenu=o}}set selectedElement(e){const n=this,r=n._selectedElement;if(r){const e=n.getItem(r),i=null==e?void 0:e.menu;null==i||i.hide(),r.classList.remove("b-active")}if(n._selectedElement=e,e){const r=Gn.isFocusable(e);e.classList.add("b-active"),n.scrollable.scrollIntoView(e,{animate:!r,focus:r})}}get selectedElement(){return this._selectedElement}selectFirst(){const e=this.treeWalker;e.currentNode=this.topFocusTrap,e.nextNode(),this.requestAnimationFrame((()=>e.currentNode.focus()))}get parentMenu(){var e;const n=this.owner;return n&&(n.isMenu?n:null==(e=n.up)?void 0:e.call(n,"menu"))}get rootMenu(){let e=this;for(;e.parentMenu instanceof this.constructor;)e=e.parentMenu;return e}};Va.initClass(),Va._$name="Menu";var Na=class extends sr{static get $name(){return"ContextMenuBase"}static get configurable(){return{type:null,menu:{$config:["lazy","nullify"],value:{type:"menu",autoShow:!1,closeAction:"hide",scrollAction:"hide",constrainTo:globalThis}},items:{},triggerEvent:!1,keyMap:{" ":{handler:"showContextMenuByKey",weight:100},"Ctrl+Space":"showContextMenuByKey"}}}static get pluginConfig(){return{assign:["showContextMenu"],chain:["onElementContextMenu","onElementClick","onElementDblClick"]}}construct(...e){var n;if(super.construct(...e),!(null==(n=this.type)?void 0:n.length))throw new Error("Config 'type' is required to be specified for context menu")}onElementContextMenu(e){this.onElementEvent(e)}onElementClick(e){this.onElementEvent(e)}onElementDblClick(e){this.onElementEvent(e)}onElementEvent(e){if(!e.handled&&this.triggerEvent===e.type){if(!0===e.ctrlKey&&!c.isMac)return void e.preventDefault();const n=e;if(Ba){const{target:r}=Ba;e=cn.fixEvent(new MouseEvent(e.type,e)),Object.defineProperty(e,"target",{get:()=>r,configurable:!0}),e.preventDefault=function(){n.preventDefault(),n.handled=!0}}this.internalShowContextMenu(e)}}showContextMenuByKey(e){if(!Gn.isEditable(e.target)){const n=this.getKeyboardContextMenuTarget(e.target);if(n)return Ba=e,Gn.triggerMouseEvent(n,this.triggerEvent),e.handled=!0,e.preventDefault(),e.stopImmediatePropagation(),Ba=null,!0}return!1}getKeyboardContextMenuTarget(e){const n=Gn.isInView(e);return e.children.length?Gn.childFromPoint(e,n.width/2,n.height/2):e}internalShowContextMenu(e){const n=this;if(n.disabled)return;const r=n.getDataFromEvent(e);!e.handled&&!e.defaultPrevented&&r&&n.shouldShowMenu(r)&&("contextmenu"===e.type&&c.isSafari&&e.ctrlKey&&!e.metaKey&&cn.on({element:e.target,capture:!0,once:!0,thisObj:this,click(e){e.preventDefault(),e.stopImmediatePropagation()}}),r.domEvent=e,n.showContextMenu(r))}getDataFromEvent(e){return{event:e,targetElement:this.getTargetElementFromEvent(e)}}getTargetElementFromEvent(e){return e.target}async showContextMenu(e,n){var r,i;const o=this,s=Gn.isDOMEvent(e),a=s?o.getDataFromEvent(e):e,l=s?e:a.domEvent;if(null==(r=o._menu)||r.hide(),o.disabled)return;o.menuContext=a;const{type:c,client:d,processItems:u}=o,h=Gn.isInView(a.targetElement).center;if(M.assign(a,{feature:o,point:(null==l?void 0:l.clientX)?[l.clientX+1,l.clientY+1]:[h.x,h.y],menu:o,items:{},selection:d.selectedRecords}),o.callChainablePopulateMenuMethod(a),M.merge(a.items,o.baseItems),o.preventDefaultEvent(a),(!u||!1!==o.callback(u,d,[a]))&&o.hasActiveMenuItems(a)&&(o.populateItemsWithData(a),!1!==o.beforeContextMenuShow(a))){const{menu:e}=o;let r=d.trigger(`${c}MenuBeforeShow`,a);Et.isPromise(r)&&(l.handled=!0,r=await r),!1!==r&&(e.items=a.items,e.showBy(n||{target:a.domEvent}),null==(i=o.touchMoveDetacher)||i.call(o),o.touchMoveDetacher=cn.on({element:d.element,touchmove:()=>e.hide(),thisObj:e,once:!0}),l&&(l.preventDefault(),l.handled=!0))}}get baseItems(){if(!this._baseItems){const e=this,{namedItems:n}=e,r=e._baseItems=M.assign({},e.items);for(const e in r){const i=r[e];i&&(n&&e in n?r[e]="object"==typeof i?M.merge(M.clone(n[e]),i):n[e]:!0===i&&delete r[e])}}return this._baseItems}hideContextMenu(e){var n;null==(n=this.menu)||n.hide(e)}callChainablePopulateMenuMethod(e){var n,r;null==(r=(n=this.client)[`populate${w.capitalize(this.type)}Menu`])||r.call(n,e)}hasActiveMenuItems(e){return Object.values(e.items).some((e=>e&&!e.hidden))}shouldShowMenu(){return!0}beforeContextMenuShow(e){}populateItemsWithData(e){}preventDefaultEvent(e){var n;null==(n=e.event)||n.preventDefault()}changeTriggerEvent(e){return e||this.client.contextMenuTriggerEvent}changeMenu(e,n){const r=this,{client:i,type:o}=r;if(e)return Va.reconfigure(n,e?Va.mergeConfigs({owner:i,rootElement:i.rootElement,onItem(e){i.trigger(`${o}MenuItem`,e)},onToggle(e){i.trigger(`${o}MenuToggleItem`,e)},onDestroy(){r.menu=null},onBeforeItem(e){Object.assign(e,r.menuContext)},onShow({source:e}){r.menuContext.menu=e,i.trigger(`${o}MenuShow`,r.menuContext)}},e):null,r);(null==n?void 0:n.isWidget)&&n.destroy()}};Na._$name="ContextMenuBase";var qa=class{static insertRule(e,n=document.head){const r=this.getStyleSheet(n),i=r.cssRules.length;if(r.insertRule(e,0),r.cssRules.length>i)return r.cssRules[0]}static findRule(e){let n;const r="function"==typeof e;return Array.prototype.find.call(document.head.querySelectorAll("link[rel=stylesheet],style[type*=css]"),(i=>{if(n=Array.prototype.find.call(i.sheet.rules||i.sheet.cssRules,(n=>r?e(n):n.selectorText===e)),n)return!0})),n}static getStyleSheet(e=document.head){return e.$bryntumStylesheet||(e.$bryntumStylesheet=Gn.createElement({tag:"style",id:"bryntum-private-styles",type:"text/css",parent:e}).sheet),e.$bryntumStylesheet}};qa._$name="CSSHelper";var DragHelperContainer_default=e=>class DragHelperContainer extends(e||re){static get $name(){return"DragHelperContainer"}initContainerDrag(){const e=this;if(e.mode||(e.mode="container"),"container"===e.mode&&!e.containers)throw new Error("Container drag mode must specify containers")}grabContainerDrag(e){const n=this;if(!n.ignoreSelector||!e.target.closest(n.ignoreSelector)){const r=Gn.getAncestor(e.target,n.containers,n.outerElement);if(r){const i=r.getBoundingClientRect();n.context={element:r,valid:!0,action:"container",offsetX:e.pageX-i.left,offsetY:e.pageY-i.top,originalPosition:{parent:r.parentElement,prev:r.previousElementSibling,next:r.nextElementSibling}}}return!0}return!1}startContainerDrag(e){var n;const r=this,{context:i,floatRootOwner:o}=r,{element:s}=i,a=s.cloneNode(!0),l=s.getBoundingClientRect(),c=null==o?void 0:o.element.closest(".b-outer");a.classList.add(r.dragProxyCls),a.classList.add(r.draggingCls),((null==o?void 0:o.floatRoot)||Gn.getRootElement(s)).appendChild(a),i.dragProxy=a,a.style.width=l.width+"px",a.style.height=l.height+"px",Gn.setTranslateXY(i.dragProxy,l.left,l.top),i.dragging=s,s.classList.add(r.dropPlaceholderCls),(null==(n=null==c?void 0:c.parentElement)?void 0:n.matches(".b-float-root"))&&(a.style.zIndex=o.floatRootMaxZIndex+1)}updateContainerDrag(e){var n;const r=this,{context:i}=r;if(!i.started||!i.targetElement)return;const o=Gn.getAncestor(i.targetElement,r.containers,"b-gridbase"),s=null==(n=i.dragging)?void 0:n.contains(Gn.getActiveElement(i.dragging));o&&Gn.isDescendant(i.element,o)||(s&&or.suspendFocusEvents(),o&&i.valid?r.moveNextTo(o,e):r.revertPosition(),s&&or.resumeFocusEvents(),e.preventDefault())}finishContainerDrag(e){const n=this,{context:r}=n,{dragging:i,dragProxy:o,valid:s,draggedTo:a,insertBefore:l,originalPosition:c}=r;i&&(r.valid=s&&a&&(i!==l||c.parent!==a),r.finalize=(e=r.valid)=>{!e&&n.context&&n.revertPosition(),i.classList.remove(n.dropPlaceholderCls),o.remove(),n.reset()},r.async=!1,n.trigger("drop",{context:r,event:e}),r.async||r.finalize())}abortContainerDrag(e=!1,n=null,r=!1){const i=this,{context:o}=i;o.dragging&&(o.dragging.classList.remove(i.dropPlaceholderCls),o.dragProxy.remove(),i.revertPosition()),r||i.trigger(e?"drop":"abort",{context:o,event:n}),i.reset()}updateContainerProxy(e){const n=this,{context:r}=n,i=r.dragProxy;let o,s=e.pageX-r.offsetX,a=e.pageY-r.offsetY;if("number"==typeof n.minX&&(s=Math.max(n.minX,s)),"number"==typeof n.maxX&&(s=Math.min(n.maxX-i.offsetWidth,s)),"number"==typeof n.minY&&(a=Math.max(n.minY,a)),"number"==typeof n.maxY&&(a=Math.min(n.maxY-i.offsetHeight,a)),n.lockX?Gn.setTranslateY(i,a):n.lockY?Gn.setTranslateX(i,s):Gn.setTranslateXY(i,s,a),"touchmove"===e.type){const n=e.changedTouches[0];o=Gn.elementFromPoint(n.clientX,n.clientY)}else o=e.target;r.targetElement=o}moveNextTo(e,n){const{context:r}=this,i=r.dragging,o=e.parentElement;if(e!==i){const s=Gt.from(e).center.x;this.isRTL&&n.pageX>s||!this.isRTL&&n.pageX<s?(o.insertBefore(i,e),r.insertBefore=e):e.nextElementSibling?e.nextElementSibling!==i?(r.insertBefore=e.nextElementSibling,o.insertBefore(i,e.nextElementSibling)):r.insertBefore||i.parentElement.lastElementChild===i||(r.insertBefore=e.nextElementSibling):(o.appendChild(i),r.insertBefore=null),r.draggedTo=o}}revertPosition(){const{context:e}=this,{dragging:n}=e,{parent:r,next:i}=e.originalPosition;if(i){i.previousSibling===n||!i&&n===r.lastChild||r.insertBefore(n,i)}else r.appendChild(n);e.draggedTo=null}},Wa={pageXOffset:0,pageYOffset:0},DragHelperTranslate_default=e=>class DragHelperTranslate extends(Delayable_default(e||re)){static get $name(){return"DragHelperTranslate"}static get configurable(){return{positioning:null,skipUpdatingElement:null}}initTranslateDrag(){const e=this;!e.isElementDraggable&&e.targetSelector&&(e.isElementDraggable=n=>n.closest(e.targetSelector))}grabTranslateDrag(e){const n=this.getTarget(e);return!!n&&(this.context={valid:!0,element:n,startPageX:e.pageX,startPageY:e.pageY,startClientX:e.clientX,startClientY:e.clientY},!0)}getTarget(e){return e.target.closest(this.targetSelector)}getX(e){return"absolute"===this.positioning?parseFloat(e.style.left,10):Gn.getTranslateX(e)}getY(e){return"absolute"===this.positioning?parseFloat(e.style.top,10):Gn.getTranslateY(e)}getXY(e){return"absolute"===this.positioning?[e.offsetLeft,e.offsetTop]:Gn.getTranslateXY(e)}setXY(e,n,r){this.skipUpdatingElement||("absolute"===this.positioning?(e.style.left=n+"px",e.style.top=r+"px"):Gn.setTranslateXY(e,n,r))}startTranslateDrag(e){const n=this,{context:r,outerElement:i,proxySelector:o}=n,s=n.dragWithin=n.dragWithin||n.cloneTarget&&document.body;let a=r.dragProxy||r.element;const l=a,c=a.parentElement;if(n.cloneTarget){const i=o?a.querySelector(o):a,{width:c,height:d,x:u,y:h}=Gt.from(i,s);a=n.createProxy(a);let g=u,p=h;if(n.autoSizeClonedTarget&&(a.style.width=`${c}px`,a.style.height=`${d}px`),a.classList.add(n.dragProxyCls,n.draggingCls),a.classList.remove("b-hover","b-selected","b-focused"),s.appendChild(a),!n.autoSizeClonedTarget||o){const n=a.getBoundingClientRect(),{x:i,y:o}=s.getBoundingClientRect(),l=e.clientX-i,c=e.clientY-o+(s!==document.body?document.body.getBoundingClientRect().y:0);g=l-n.width/2,p=c-n.height/2,r.startPageX=e.pageX,r.startPageY=e.pageY}n.setXY(a,g,p),l.classList.add("b-drag-original"),n.hideOriginalElement&&l.classList.add("b-hidden")}a.classList.add(n.draggingCls),Object.assign(r,{element:a,grabbed:l,grabbedParent:c,grabbedNextSibling:a.nextElementSibling,elementStartX:n.getX(a),elementStartY:n.getY(a),elementX:Gn.getOffsetX(a,s||i),elementY:Gn.getOffsetY(a,s||i),scrollX:0,scrollY:0,scrollManagerElementContainsDragProxy:!n.cloneTarget||s===i}),s&&(r.parentElement=a.parentElement,s!==a.parentElement&&s.appendChild(a),n.updateTranslateProxy(e))}onDragStarted(){const e=this,{context:n}=e;let{relatedElements:r}=n;if(e.unifiedProxy&&n.element.classList.add("b-drag-main","b-drag-unified-proxy"),(null==r?void 0:r.length)>0){n.relatedElStartPos=[],n.relatedElDragFromPos=[];const{proxySelector:i}=e;let[o,s]=[n.elementStartX,n.elementStartY];n.originalRelatedElements=r,r=n.relatedElements=r.map(((r,a)=>{const l=i?r.querySelector(i):r,{x:c,y:d,width:u,height:h}=Gt.from(l,e.dragWithin),g=e.cloneTarget?e.createProxy(r):r;return g.classList.add(e.draggingCls),g.classList.remove("b-hover","b-selected","b-focused"),e.cloneTarget&&(e.setXY(g,c,d),e.dragWithin.appendChild(g),g.classList.add(e.dragProxyCls),e.autoSizeClonedTarget&&(g.style.width=`${u}px`,g.style.height=`${h}px`),e.hideOriginalElement&&r.classList.add("b-hidden"),r.classList.add("b-drag-original")),n.relatedElStartPos[a]=n.relatedElDragFromPos[a]=e.getXY(g),e.unifiedProxy&&(g.classList.add("b-drag-unified-animation","b-drag-unified-proxy"),o+=e.unifiedOffset,s+=e.unifiedOffset,e.setXY(g,o,s),n.relatedElDragFromPos[a]=[o,s],g.style.zIndex=100-a),g})),e.unifiedProxy&&r&&r.length>0&&cn.onTransitionEnd({element:r[0],property:"transform",handler(){r.forEach((e=>e.classList.remove("b-drag-unified-animation")))},thisObj:e,once:!0})}}applyConstraints(e,n,r){const i=this,{constrain:o,dragWithin:s}=i,{pageXOffset:a,pageYOffset:l}=s===document.body?globalThis:Wa;return s&&o&&(n<0&&(n=0),n+e.offsetWidth>s.scrollWidth&&(n=s.scrollWidth-e.offsetWidth),r<0&&(r=0),r+e.offsetHeight>s.scrollHeight&&(r=s.scrollHeight-e.offsetHeight)),"number"==typeof i.minX&&(n=Math.max(i.minX+a,n)),"number"==typeof i.maxX&&(n=Math.min(i.maxX+a,n)),"number"==typeof i.minY&&(r=Math.max(i.minY+l,r)),"number"==typeof i.maxY&&(r=Math.min(i.maxY+l,r)),{constrainedX:n,constrainedY:r}}updateTranslateProxy(e,n){const r=this,{lockX:i,lockY:o,context:s}=r,a=s.dragProxy||s.element,{relatedElements:l,relatedElDragFromPos:c}=s;s.scrollManagerElementContainsDragProxy&&n&&(s.scrollX=n.getRelativeLeftScroll(a),s.scrollY=n.getRelativeTopScroll(a)),s.pageX=e.pageX,s.pageY=e.pageY,s.clientX=e.clientX,s.clientY=e.clientY;let d=s.elementStartX+e.pageX-s.startPageX+s.scrollX,u=s.elementStartY+e.pageY-s.startPageY+s.scrollY;if(r.snapCoordinates){const e=r.snapCoordinates({element:a,newX:d,newY:u});d=e.x,u=e.y}const{constrainedX:h,constrainedY:g}=r.applyConstraints(a,d,u);if((s.started||h!==d||g!==u)&&r.setXY(a,i?void 0:h,o?void 0:g),l){const e=i?0:h-s.elementStartX,n=o?0:g-s.elementStartY;l.forEach(((i,o)=>{const[s,a]=c[o];r.setXY(i,s+e,a+n)}))}s.newX=h,s.newY=g}async finishTranslateDrag(e){const n=this,r=n.context,{target:i}=e,o=!n.lockX&&Math.round(r.newX)!==Math.round(r.elementStartX),s=!n.lockY&&Math.round(r.newY)!==Math.round(r.elementStartY),a=r.dragProxy||r.element,{relatedElements:l}=r;if(!n.ignoreSamePositionDrop||o||s)if(!1===r.valid)await n.abortTranslateDrag(!0,e);else{const o=!n.allowDropOutside&&Gt.from(n.dragWithin||n.outerElement);o&&("number"!=typeof n.minX&&!0!==n.minX&&e.pageX<o.left||"number"!=typeof n.maxX&&!0!==n.maxX&&e.pageX>o.right||"number"!=typeof n.minY&&!0!==n.minY&&e.pageY<o.top||"number"!=typeof n.maxY&&!0!==n.maxY&&e.pageY>o.bottom)?await n.abortTranslateDrag(!0,e):(r.finalize=async(o=r.valid)=>{r.finalized?console.warn("DragHelper: Finalizing already finalized drag"):(r.finalized=!0,!o&&n.context&&await n.abortTranslateDrag(!0,null,!0),n.isDestroyed||(n.trigger("dropFinalized",{context:r,event:e,target:i}),n.reset()),n.cloneTarget||a.parentElement===r.grabbedParent||[a,...l||[]].forEach((e=>e.style.transform="")))},r.async=!1,await n.trigger("drop",{context:r,event:e,target:i}),r.async||await r.finalize())}else n.abortTranslateDrag(!1,e)}async abortTranslateDrag(e=!1,n=null,r=!1){var i,o;const s=this,{cloneTarget:a,context:l,proxySelector:c,dragWithin:d,draggingCls:u}=s,{relatedElements:h,relatedElStartPos:g,grabbed:p}=l,m=l.dragProxy||l.element;if(l.valid=!1,null==(i=s.scrollManager)||i.stopMonitoring(),l.aborted)return void console.warn("DragHelper: Aborting already aborted drag");let{elementStartX:f,elementStartY:b}=l;const v=f!==s.getX(m)||b!==s.getY(m);if(m&&l.started){if(!a&&d&&d!==l.grabbedParent&&l.grabbedParent.insertBefore(m,l.grabbedNextSibling),a&&c){const e=p.querySelector(c)||p,{x:n,y:r}=Gt.from(e);f=n,b=r}m.classList.add("b-aborting"),s.setXY(m,f,b),null==h||h.forEach(((e,n)=>{e.classList.remove(u),e.classList.add("b-aborting"),s.setXY(e,g[n][0],g[n][1])})),r||s.trigger(e?"drop":"abort",{context:l,event:n}),m.isConnected&&!s.isDestroying&&v&&await cn.waitForTransitionEnd({element:m,property:Gn.getPropertyTransitionDuration(m,"transform")?"transform":"all",thisObj:s,once:!0,runOnDestroy:!0}),s.isDestroyed||s.trigger("abortFinalized",{context:l,event:n})}(null==(o=s.context)?void 0:o.started)&&s.reset()}cleanUp(){const{context:e,cloneTarget:n,draggingCls:r,dragProxyCls:i}=this,o=e.dragProxy||e.element,{relatedElements:s,originalRelatedElements:a,grabbed:l}=e,c=n&&(this.removeProxyAfterDrop||!e.valid),d=[r,"b-aborting",i,"b-drag-main","b-drag-unified-proxy"];o.classList.remove(...d),c&&o.remove(),null==s||s.forEach((e=>{c?e.remove():e.classList.remove(...d)})),l.classList.remove("b-drag-original","b-hidden"),null==a||a.forEach((e=>e.classList.remove("b-hidden","b-drag-original")))}},Ua="onMouseMove",Ga="onMouseUp",Ya="onDocumentClick",Ka="onTouchMove",Xa="onTouchEnd",Za="onKeyDown",Qa=class extends(re.mixin(Events_default,DragHelperContainer_default,DragHelperTranslate_default)){static get defaultConfig(){return{dragProxyCls:"b-drag-proxy",invalidCls:"b-drag-invalid",draggingCls:"b-dragging",dropPlaceholderCls:"b-drop-placeholder",dragThreshold:5,outerElement:document.body,dragWithin:null,unifiedProxy:null,monitoringConfig:null,constrain:!0,minX:null,maxX:null,minY:null,maxY:null,mode:"translateXY",isElementDraggable:null,targetSelector:null,dropTargetSelector:null,dropTargetCls:null,proxySelector:null,cloneTarget:!1,autoSizeClonedTarget:!0,hideOriginalElement:!1,containers:null,ignoreSelector:null,startEvent:null,lockX:!1,lockY:!1,touchStartDelay:300,scrollManager:null,snapCoordinates:null,unifiedOffset:5,removeProxyAfterDrop:!0,clickSwallowDuration:50,ignoreSamePositionDrop:!0,allowDropOutside:null,floatRootOwner:null,mouseMoveListenerElement:document,testConfig:{transitionDuration:10,clickSwallowDuration:50,touchStartDelay:100},rtlSource:null,createProxy:null}}construct(e){const n=this;super.construct(e),n.initListeners(),n.isContainerDrag?n.initContainerDrag():n.initTranslateDrag(),n.onScrollManagerScrollCallback=n.onScrollManagerScrollCallback.bind(n)}doDestroy(){this.reset(!0),super.doDestroy()}initListeners(){const e=this,{outerElement:n}=e,r={element:n,pointerdown:"onPointerDown",thisObj:e};e.mouseMoveListenerElement=e.getMouseMoveListenerTarget(n),cn.on(r)}getMouseMoveListenerTarget(e){const n=e.getRootNode();let r=this.mouseMoveListenerElement;return n.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"closed"===n.mode&&(r=e.closest(".b-outer")||r),r}get isRTL(){var e;return Boolean(null==(e=this.rtlSource)?void 0:e.rtl)}onPointerDown(e){const n=this;if(0!==e.button||!Gn.isVisible(e.target)||n.context)return;if(n.isElementDraggable&&!n.isElementDraggable(e.target,e))return;n.startEvent=e;if(n.isContainerDrag?n.grabContainerDrag(e):n.grabTranslateDrag(e)){n.blurDetacher=cn.on({element:globalThis,blur:n.onWindowBlur,thisObj:n});const r={element:n.mouseMoveListenerElement,thisObj:n,capture:!0,keydown:Za};if("touch"===e.pointerType?(n.touchStartTimer=n.setTimeout((()=>n.touchStartTimer=null),n.touchStartDelay,"touchStartDelay"),r.touchmove={handler:Ka,passive:!1},r.touchend=r.pointerup=Xa):(r.pointermove=Ua,r.pointerup=Ga),n.dragListenersDetacher=cn.on(r),n.dragWithin&&n.dragWithin!==n.outerElement&&n.outerElement.contains(n.dragWithin)){const e=Gt.from(n.dragWithin,n.outerElement);n.minY=e.top,n.maxY=e.bottom,n.minX=e.left,n.maxX=e.right}}}internalMove(e){var n,r,i;if(e.scrollInitiated)return;const o=this,{context:s}=o,a=cn.getDistanceBetween(o.startEvent,e);if(o.touchStartTimer&&a>o.dragThreshold)o.abort(!0);else if(!o.touchStartTimer&&(null==s?void 0:s.element)&&(s.started||a>=o.dragThreshold)&&(null==(n=e.target)?void 0:n.nodeType)===Node.ELEMENT_NODE){if(!s.started){if(!1===o.trigger("beforeDragStart",{context:s,event:e}))return o.abort();o.isContainerDrag?o.startContainerDrag(e):o.startTranslateDrag(e),s.started=!0,null==(r=o.scrollManager)||r.startMonitoring(Et.merge({scrollables:[{element:o.dragWithin||o.outerElement}],callback:o.onScrollManagerScrollCallback},o.monitoringConfig)),s.outermostEl=Gn.getOutermostElement(e.target),s.outermostEl.classList.add("b-draghelper-active"),o.dropTargetSelector&&o.dropTargetCls&&Gn.getRootElement(o.outerElement).querySelectorAll(o.dropTargetSelector).forEach((e=>e.classList.add(o.dropTargetCls))),o.trigger("dragStart",{context:s,event:e}),null==(i=o.onDragStarted)||i.call(o),o.trigger("afterDragStart",{context:s,event:e})}o.update(e),"touchmove"===e.type&&(e.preventDefault(),e.stopImmediatePropagation())}}onScrollManagerScrollCallback(e){var n;const{lastMouseMoveEvent:r}=this;(null==(n=this.context)?void 0:n.element)&&r&&(r.isScroll=!0,this.update(r,e))}onTouchMove(e){this.internalMove(e)}onMouseMove(e){this.internalMove(e)}update(e,n){const r=this,{context:i}=r,o=document.scrollingElement||document.body;let s=r.getMouseMoveEventTarget(e);if("touchmove"===e.type){const n=e.changedTouches[0];s=Gn.elementFromPoint(n.clientX+o.scrollLeft,n.clientY+o.scrollTop)}i.target=s;let a=r.allowDropOutside||!r.dragWithin||r.dragWithin.contains(e.target);a&&r.dropTargetSelector&&(a=a&&Boolean(null==s?void 0:s.closest(r.dropTargetSelector))),r.isContainerDrag?r.updateContainerProxy(e,n):r.updateTranslateProxy(e,n),i.valid=a,r.trigger("drag",{context:i,event:e}),r.isContainerDrag&&r.updateContainerDrag(e,n),i.valid=i.valid&&a;for(const e of r.draggedElements)e.classList.toggle(r.invalidCls,!i.valid);e&&(r.lastMouseMoveEvent=e)}get draggedElements(){var e;const{context:n}=this;return[n.dragProxy||n.element,...null!=(e=n.relatedElements)?e:[]]}async abort(e=!1){var n,r;const i=this,{context:o}=i;null==(r=null==(n=i.scrollManager)?void 0:n.stopMonitoring)||r.call(n),i.removeListeners(),(null==o?void 0:o.started)&&!o.aborted?(o.element.getBoundingClientRect(),o.valid=!1,i.isContainerDrag?i.abortContainerDrag(void 0,void 0,e):i.abortTranslateDrag(void 0,void 0,e),o.aborted=!0):i.reset(!0)}removeListeners(){var e,n;null==(e=this.dragListenersDetacher)||e.call(this),null==(n=this.blurDetacher)||n.call(this)}reset(e){const n=this,{context:r}=n;if(null==r?void 0:r.started){for(const e of n.draggedElements)e.classList.remove(n.invalidCls);r.outermostEl.classList.remove("b-draghelper-active"),n.isContainerDrag?r.dragProxy.remove():n.cleanUp(),n.dropTargetSelector&&n.dropTargetCls&&Gn.getRootElement(n.outerElement).querySelectorAll(n.dropTargetSelector).forEach((e=>e.classList.remove(n.dropTargetCls)))}n.removeListeners(),e||n.trigger("reset"),n.context=n.lastMouseMoveEvent=null}onTouchEnd(e){this.onMouseUp(e)}onDocumentClick(e){e.stopPropagation()}onMouseUp(e){var n;const r=this,{context:i}=r;r.removeListeners(),i&&(null==(n=r.scrollManager)||n.stopMonitoring(),i.started?(e.stopPropagation(),i.finalizing=!0,r.isContainerDrag?r.finishContainerDrag(e):r.finishTranslateDrag(e),cn.on({element:document,thisObj:r,click:Ya,capture:!0,expires:r.clickSwallowDuration,once:!0})):r.reset(!0))}onKeyDown(e){var n;(null==(n=this.context)?void 0:n.started)&&"Escape"===e.key&&(e.stopImmediatePropagation(),this.abort())}onWindowBlur(){this.context&&!this.context.finalizing&&this.abort()}createProxy(e){this.proxySelector&&(e=e.querySelector(this.proxySelector)||e);const n=e.cloneNode(!0);return n.removeAttribute("id"),n}get isContainerDrag(){return"container"===this.mode}async animateProxyTo(e,n={align:"c-c"}){const{context:r,draggedElements:i}=this,{element:o}=r,s=e.isRectangle?e:Gt.from(e);i.forEach((e=>{e.classList.add("b-drag-final-transition"),Gn.alignTo(e,s,n)})),await cn.waitForTransitionEnd({element:o,property:"all",thisObj:this,once:!0}),i.forEach((e=>e.classList.remove("b-drag-final-transition")))}get isDragging(){var e;return Boolean(null==(e=this.context)?void 0:e.started)}getMouseMoveEventTarget(e){return e.isScroll?Gn.elementFromPoint(e.clientX,e.clientY):e.target}};Qa._$name="DragHelper";var Ja={down:"onMouseDown",move:"onMouseMove",up:"onMouseUp",docclick:"onDocumentClick",touchstart:{handler:"onTouchStart",passive:!1},touchmove:"onTouchMove",touchend:"onTouchEnd",keydown:"onKeyDown"},el=class extends(Events_default(re)){static get defaultConfig(){return{resizingCls:"b-resizing",dragThreshold:5,handleSize:10,dynamicHandleSize:null,reservedSpace:10,touchHandleSize:30,minWidth:1,maxWidth:0,minHeight:1,maxHeight:0,outerElement:document.body,scroller:null,allowResize:null,dragWithin:null,isElementResizable:null,targetSelector:null,leftHandle:!0,rightHandle:!0,topHandle:!0,bottomHandle:!0,handleSelector:null,handleContainerSelector:null,startEvent:null,grab:null,invalidCls:"b-resize-invalid",handleVisibilityThreshold:null,skipTranslate:!1,direction:"horizontal",clickSwallowDuration:50,rtlSource:null}}construct(e){const n=this;super.construct(e),n.handleSelector||c.isHoverableDevice||(n.handleSize=n.touchHandleSize),n.handleVisibilityThreshold=n.handleVisibilityThreshold||2*n.handleSize,n.initListeners(),n.initResize()}doDestroy(){this.abort(!0),super.doDestroy()}updateSkipUpdatingElement(e){e&&(this.skipTranslate=!0)}initResize(){const e=this;if(!e.isElementResizable&&e.targetSelector&&(e.isElementResizable=n=>n.closest(e.targetSelector)),e.grab){const{edge:n,element:r,event:i}=e.grab;e.startEvent=i;const o=e.getCursorOffsetToElementEdge(i,r,n);e.context={element:r,edge:n,valid:!0,async:!1,elementStartX:Gn.getTranslateX(r)||r.offsetLeft,elementStartY:Gn.getTranslateY(r)||r.offsetTop,newX:Gn.getTranslateX(r)||r.offsetLeft,newY:Gn.getTranslateY(r)||r.offsetTop,elementWidth:r.offsetWidth,elementHeight:r.offsetHeight,cursorOffset:o,startX:i.clientX+o.x+e.scrollLeft,startY:i.clientY+o.y+e.scrollTop,finalize:()=>{var n;return null==(n=e.reset)?void 0:n.call(e)}},r.classList.add(e.resizingCls),e.internalStartResize(e.isTouch)}}initListeners(){const e=this,n={element:e.outerElement,mousedown:Ja.down,touchstart:Ja.touchstart,thisObj:e};!e.handleSelector&&c.isHoverableDevice&&(n.mousemove={handler:Ja.move,delegate:e.targetSelector},n.mouseleave={handler:"onMouseLeaveTarget",delegate:e.targetSelector,capture:!0}),cn.on(n)}get isRTL(){var e;return Boolean(null==(e=this.rtlSource)?void 0:e.rtl)}get scrollLeft(){return this.scroller?this.scroller.x:this.outerElement.scrollLeft}get scrollTop(){return this.scroller?this.scroller.y:this.outerElement.scrollTop}internalStartResize(e){const n={element:document,keydown:Ja.keydown,thisObj:this};e?(n.touchmove=Ja.touchmove,n.touchend=n.pointerup=Ja.touchend):(n.mousemove=Ja.move,n.mouseup=Ja.up),this.removeDragListeners=cn.on(n)}removeDragListeners(){}reset(){var e;null==(e=this.removeDragListeners)||e.call(this),this.context=null,this.trigger("reset")}canResize(e,n){return!this.isElementResizable||this.isElementResizable(e,n)}onPointerDown(e,n){const r=this;r.startEvent=n,r.canResize(n.target,n)&&r.grabResizeHandle(e,n)&&(n.stopImmediatePropagation(),"touchstart"===n.type&&n.preventDefault(),r.internalStartResize(e))}onTouchStart(e){e.touches.length>1||this.onPointerDown(!0,e)}onMouseDown(e){0===e.button&&this.onPointerDown(!1,e)}internalMove(e,n){var r;const i=this,{context:o,direction:s}=i;(null==o?void 0:o.element)&&(o.started||cn.getDistanceBetween(i.startEvent,n)>=i.dragThreshold)?(o.started||(null==(r=i.scrollManager)||r.startMonitoring(Et.merge({scrollables:[{element:i.dragWithin||i.outerElement,direction:s}],callback:e=>{var n;return(null==(n=i.context)?void 0:n.element)&&i.lastMouseMoveEvent&&i.update(i.lastMouseMoveEvent,e)}},i.monitoringConfig)),i.trigger("resizeStart",{context:o,event:n}),o.started=!0),i.update(n)):e||i.handleSelector||i.checkResizeHandles(n)}onTouchMove(e){this.internalMove(!0,e)}onMouseMove(e){this.internalMove(!1,e)}onPointerUp(e,n){var r,i,o;const s=this,a=s.context;null==(r=s.removeDragListeners)||r.call(s),a?(null==(i=s.scrollManager)||i.stopMonitoring(),a.started&&cn.on({element:document,thisObj:s,click:Ja.docclick,expires:s.clickSwallowDuration,capture:!0,once:!0}),s.finishResize(n)):null==(o=s.reset)||o.call(s)}onTouchEnd(e){this.onPointerUp(!0,e)}onMouseUp(e){this.onPointerUp(!1,e)}onDocumentClick(e){e.stopPropagation()}onKeyDown(e){"Escape"===e.key&&this.abort()}update(e){const n=this,r=n.context,i=Gt.from(n.outerElement);r.currentX=Math.max(Math.min(e.clientX+r.cursorOffset.x,i.right),i.x)+n.scrollLeft,r.currentY=Math.max(Math.min(e.clientY+r.cursorOffset.y,i.bottom),i.y)+n.scrollTop,e&&(n.updateResize(e)&&(n.trigger("resizing",{context:r,event:e}),r.element.classList.toggle(n.invalidCls,!1===r.valid)),n.lastMouseMoveEvent=e)}abort(e=!1){var n,r;const i=this;null==(r=null==(n=i.scrollManager)?void 0:n.stopMonitoring)||r.call(n),i.context?i.abortResize(null,e):i.isDestroyed||i.reset()}grabResizeHandle(e,n){const r=this;if(r.allowResize&&!r.allowResize(n.target,n))return!1;const i=r.handleSelector,o="touchstart"===n.type?n.changedTouches[0]:n,s=o.clientX,a=o.clientY,l=r.targetSelector?n.target.closest(r.targetSelector):n.target;if(l){let c;if(i){if(!n.target.matches(i))return!1;c="horizontal"===r.direction?n.pageX<Gn.getPageX(l)+l.offsetWidth/2?r.isRTL?"right":"left":r.isRTL?"left":"right":n.pageY<Gn.getPageY(l)+l.offsetHeight/2?"top":"bottom"}else if("horizontal"===r.direction?r.overLeftHandle(n,l)?c=r.isRTL?"right":"left":r.overRightHandle(n,l)&&(c=r.isRTL?"left":"right"):r.overTopHandle(n,l)?c="top":r.overBottomHandle(n,l)&&(c="bottom"),!c)return r.context=null,!1;"touchstart"===n.type&&n.preventDefault();const d=r.getCursorOffsetToElementEdge(o,l,c);if(!1!==r.trigger("beforeResizeStart",{element:l,event:n}))return r.context={element:l,edge:c,isTouch:e,valid:!0,async:!1,direction:r.direction,elementStartX:Gn.getTranslateX(l)||l.offsetLeft,elementStartY:Gn.getTranslateY(l)||l.offsetTop,newX:Gn.getTranslateX(l)||l.offsetLeft,newY:Gn.getTranslateY(l)||l.offsetTop,elementWidth:l.offsetWidth,elementHeight:l.offsetHeight,cursorOffset:d,startX:s+d.x+r.scrollLeft,startY:a+d.y+r.scrollTop,finalize:()=>{var e;return null==(e=r.reset)?void 0:e.call(r)}},l.classList.add(r.resizingCls),!0}return!1}getCursorOffsetToElementEdge(e,n,r){const i=Gt.from(n);let o=0,s=0;switch(r){case"left":o=i.x-(this.isRTL?i.width:0)-e.clientX;break;case"right":o=i.x+(this.isRTL?0:i.width)-e.clientX;break;case"top":s=i.y-e.clientY;break;case"bottom":s=i.y+i.height-e.clientY}return{x:o,y:s}}checkResizeHandles(e){const n=this,r=n.targetSelector?e.target.closest(n.targetSelector):e.target;if(!r||n.allowResize&&!n.allowResize(e.target,e))n.currentElement&&n.unHighlightHandle();else if(n.currentElement=n.handleContainerSelector?e.target.closest(n.handleContainerSelector):e.target,n.currentElement){let i;i="horizontal"===n.direction?n.overLeftHandle(e,r)||n.overRightHandle(e,r):n.overTopHandle(e,r)||n.overBottomHandle(e,r),i?n.highlightHandle():n.unHighlightHandle()}}onMouseLeaveTarget(e){const n=this;n.currentElement=n.handleContainerSelector?e.target.closest(n.handleContainerSelector):e.target,n.currentElement&&n.unHighlightHandle()}updateResize(e){const n=this,{context:r,allowEdgeSwitch:i,skipTranslate:o,skipUpdatingElement:s}=n;let a;i&&("horizontal"===n.direction?r.edge=r.currentX>r.startX?"right":"left":r.edge=r.currentY>r.startY?"bottom":"top");const{element:l,elementStartX:c,elementStartY:d,elementWidth:u,elementHeight:h,edge:g}=r,{style:p}=l,m=r.currentX-r.startX,f=r.currentY-r.startY,b=Gn.getExtremalSizePX(l,"minWidth")||n.minWidth,v=Gn.getExtremalSizePX(l,"maxWidth")||n.maxWidth,y=Gn.getExtremalSizePX(l,"minHeight")||n.minHeight,w=Gn.getExtremalSizePX(l,"maxHeight")||n.maxHeight,C="right"===g&&!n.isRTL||"bottom"===g?1:-1,S=u+m*C,x=h+f*C;let D=Math.max(b,S),E=Math.max(y,x);if(v>0&&(D=Math.min(D,v)),w>0&&(E=Math.min(E,w)),p.flex&&(p.flex=""),"horizontal"===n.direction&&u!==D){if(s||(p.width=Math.abs(D)+"px"),r.newWidth=D,"left"===g||D<0){const e=Math.max(Math.min(c+u-n.minWidth,c+m),0);o||Gn.setTranslateX(l,Math.round(e)),r.newX=e}else"right"===g&&i&&!o&&Gn.setTranslateX(l,c);a=!0}else"vertical"===n.direction&&h!==x&&(s||(p.height=Math.abs(E)+"px"),r.newHeight=E,"top"===g||E<0?(r.newY=Math.max(Math.min(d+h-n.minHeight,d+f),0),o||Gn.setTranslateY(l,r.newY)):"bottom"===g&&i&&!o&&Gn.setTranslateY(l,d),a=!0);return a}finishResize(e){var n;const r=this,i=r.context,o={context:i,event:e};if(i.element.classList.remove(r.resizingCls),i.started){let e=!1;e="horizontal"===r.direction?i.newWidth&&i.newWidth!==i.elementWidth:i.newHeight&&i.newHeight!==i.elementHeight,r.trigger(e?"resize":"cancel",o),i.async||i.finalize()}else null==(n=r.reset)||n.call(r)}abortResize(e=null,n=!1){const r=this,i=r.context;i.element.classList.remove(r.resizingCls),"horizontal"===r.direction?(("left"===i.edge||i.allowEdgeSwitch&&!i.skipTranslate)&&Gn.setTranslateX(i.element,i.elementStartX),i.element.style.width=i.elementWidth+"px"):(Gn.setTranslateY(i.element,i.elementStartY),i.element.style.height=i.elementHeight+"px"),!n&&r.trigger("cancel",{context:i,event:e}),r.isDestroyed||r.reset()}highlightHandle(){const e=this,n=e.targetSelector?e.currentElement.closest(e.targetSelector):e.currentElement;e.currentElement.classList.add("b-resize-handle"),n.classList.add("b-over-resize-handle")}unHighlightHandle(){const e=this,n=e.targetSelector?e.currentElement.closest(e.targetSelector):e.currentElement;n&&n.classList.remove("b-over-resize-handle"),e.currentElement.classList.remove("b-resize-handle"),e.currentElement=null}overAnyHandle(e,n){return this.overStartHandle(e,n)||this.overEndHandle(e,n)}overStartHandle(e,n){return"horizontal"===this.direction?this.overLeftHandle(e,n):this.overTopHandle(e,n)}overEndHandle(e,n){return"horizontal"===this.direction?this.overRightHandle(e,n):this.overBottomHandle(e,n)}getDynamicHandleSize(e,n){const r=e?2:1,{handleSize:i}=this;return this.dynamicHandleSize&&i*r>n-this.reservedSpace?Math.max(Math.floor((n-this.reservedSpace)/r),0):i}overLeftHandle(e,n){const r=this,{offsetWidth:i}=n;if(r.leftHandle&&r.canResize(n,e)&&(i>=r.handleVisibilityThreshold||r.dynamicHandleSize)){const o=Gt.from(n);return o.width=r.getDynamicHandleSize(r.rightHandle,i),o.width>0&&o.contains(cn.getPagePoint(e))}return!1}overRightHandle(e,n){const r=this,{offsetWidth:i}=n;if(r.rightHandle&&r.canResize(n,e)&&(i>=r.handleVisibilityThreshold||r.dynamicHandleSize)){const o=Gt.from(n);return o.x=o.right-r.getDynamicHandleSize(r.leftHandle,i),o.width>0&&o.contains(cn.getPagePoint(e))}return!1}overTopHandle(e,n){const r=this,{offsetHeight:i}=n;if(r.topHandle&&r.canResize(n,e)&&(i>=r.handleVisibilityThreshold||r.dynamicHandleSize)){const o=Gt.from(n);return o.height=r.getDynamicHandleSize(r.bottomHandle,i),o.height>0&&o.contains(cn.getPagePoint(e))}return!1}overBottomHandle(e,n){const r=this,{offsetHeight:i}=n;if(r.bottomHandle&&r.canResize(n,e)&&(i>=r.handleVisibilityThreshold||r.dynamicHandleSize)){const o=Gt.from(n);return o.y=o.bottom-r.getDynamicHandleSize(r.bottomHandle,i),o.height>0&&o.contains(cn.getPagePoint(e))}return!1}};__publicField(el,"configurable",{skipUpdatingElement:null}),el._$name="ResizeHelper";var tl=/>[ \t\r\n]+</g,nl=/\s\s+/g,rl=class{static tpl(e,...n){let r=0,i=n.map(((n,i)=>{let o=e[i];return Array.isArray(n)?o+=n.reduce(((e,n)=>e+(("string"==typeof n?n.trim():n)+"\n")),""):(void 0===n&&(n=""),o+="string"==typeof n?n.trim():n),r++,o})).join("");return r<=e.length&&(i+=e[e.length-1]),i.replace(tl,"><").replace(nl," ").trim()}static docsTpl(e,...n){let r=0,i=n.map(((n,i)=>{let o=e[i];return Array.isArray(n)?o+=n.reduce(((e,n)=>e+(("string"==typeof n?n.trim():n)+"\n")),""):(void 0===n&&(n=""),o+="string"==typeof n?n.trim():n),r++,o})).join("");return r<=e.length&&(i+=e[e.length-1]),i.replace(tl,"><").trim()}static repeat(e){return function(...n){return rl.tpl(...n).repeat(e)}}static loop(e){}};rl._$name="TemplateHelper";var il=class extends Array{constructor(e,n){super(),this.timeZone=e,this.year=n}},toTimeZoneInternal=(e,n)=>{const r=e.toLocaleString("sv-SE",{timeZone:n});return new class{constructor(e,n){this.asString=e,this.timeZone=n,this.asArray=parseStringDate(e)}get asLocalDate(){return this._asLocalDate||(this._asLocalDate=new Date(...this.asArray)),this._asLocalDate}get asTicksUtc(){return this._asTicksUtc||(this._asTicksUtc=new Date(Date.UTC(...this.asArray)).getTime()),this._asTicksUtc}}(r,n)},getOffsetUtc=(e,n)=>{const{asTicksUtc:r,asString:i}=toTimeZoneInternal(new Date(e),n);return{offset:(e-r)/6e4,tzTicksUtc:r,tzString:i}},parseStringDate=e=>{const n=e.split(/[\s-:]/).map((e=>1*e));return n[1]-=1,n},ol=-864e5,sl=2592e6,findOffsetDates=(e,n)=>{const r=al.get(e,n);if(r)return r;const i=new il(e,n),o=new Date(Date.UTC(n,0,1)).getTime();let s,a,l,c,d=o,u=sl,h=0,g=[],p=null;for(;!c;)({offset:l,tzTicksUtc:s,tzString:a}=getOffsetUtc(d,e)),null==p?(p=l,i.push({offset:l})):u>0&&l!==p?u=u===sl?ol:-6e4:u<0&&l===p&&(u===ol?u=36e5:(1===i.length?(i.push(g),p=g.offset):(i[0].startTicks=g.startTicks,i[0].startDateString=g.startDateString,c=!0),u=sl)),g={offset:l,startDateString:a,startTicks:s},u===sl&&(d=o,d+=h*sl,h+=1),d+=u,h>11&&(c=!0);return al.set(i),i},al={_cache:{},get(e,n){var r;return null==(r=this._cache[e])?void 0:r[n]},set(e){const{timeZone:n}=e,{_cache:r}=this;r[n]||(r[n]={}),r[n][e.year]=e}},ll=class{static get $name(){return"TimeZoneHelper"}static toTimeZone(e,n){if("number"==typeof n)return this.toUtcOffset(e,n);const r=toTimeZoneInternal(e,n);return r.asArray[3]!==r.asLocalDate.getHours()&&console.warn("Incorrect time zone conversion due to local DST-switch detected"),r.asLocalDate}static fromTimeZone(e,n){if("number"==typeof n)return this.fromUtcOffset(e,n);const r=this.dateAsArray(e),i=findOffsetDates(n,e.getUTCFullYear());let o=i[0].offset;if(2===i.length){const e=Date.UTC(...r);e>=i[1].startTicks&&e<i[0].startTicks&&(o=i[1].offset)}return r[4]+=o,new Date(Date.UTC(...r))}static toUtcOffset(e,n){const r=e.getTimezoneOffset()+n;return new Date(e.getTime()+60*r*1e3)}static fromUtcOffset(e,n){const r=-e.getTimezoneOffset()-n;return new Date(e.getTime()+60*r*1e3)}static dateAsArray(e){return[e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()]}};ll.findOffsetDates=findOffsetDates,ll._$name="TimeZoneHelper";var cl=class extends bs{static get $name(){return"Toast"}static get type(){return"toast"}static get configurable(){return{testConfig:{destroyTimeout:1,timeout:100},floating:!0,timeout:2500,autoDestroy:null,destroyTimeout:200,showProgress:!0,color:null,bottomMargin:20}}compose(){const{appendTo:e,color:n,html:r,showProgress:i,style:o,timeout:s}=this;return{parent:e||this.floatRoot,class:{...Xt.normalize(n,"object"),"b-toast-hide":1},html:r,style:o,children:{progressElement:i&&{style:`animation-duration:${s/1e3}s;`,class:{"b-toast-progress":1}}},listeners:{click:"hide"}}}doDestroy(){this.untoast(),super.doDestroy()}get nextBottom(){const{bottomMargin:e,element:n}=this;return parseInt(n.style.bottom,10)+n.offsetHeight+e}async show(){var e,n;await super.show(...arguments);const r=this,{element:i}=r,{toasts:o}=cl;o.includes(r)||(i.style.bottom=(null!=(n=null==(e=o[0])?void 0:e.nextBottom)?n:r.bottomMargin)+"px",o.unshift(r),i.getBoundingClientRect(),i.classList.remove("b-toast-hide"),r.timeout>0&&(r.hideTimeout=r.setTimeout("hide",r.timeout)))}async hide(){const e=this;e.untoast(),e.element.classList.add("b-toast-hide"),e.autoDestroy&&!e.destroyTimer&&(e.destroyTimer=e.setTimeout("destroy",e.destroyTimeout))}untoast(){const{toasts:e}=cl;e.includes(this)&&e.splice(e.indexOf(this),1)}static hideAll(){cl.toasts.slice().reverse().forEach((e=>e.hide()))}static show(e){const n=cl.new({autoDestroy:!0,rootElement:document.body},"string"==typeof e?{html:e}:e);return n.show(),n}};cl.toasts=[],cl.initClass(),cl._$name="Toast";var dl=class{static getById(e){return bs.getById(e)}static fromElement(e,n,r){return bs.fromElement(e,n,r)}static createWidget(e={}){return e.isWidget?e:bs.create(e)}static append(e,n){if(e=Array.isArray(e)&&e||[e],(n instanceof HTMLElement||"string"==typeof n)&&(n={appendTo:n}),n.insertFirst){const e="string"==typeof n.insertFirst?document.getElementById(n.insertFirst):n.insertFirst;e.firstChild?n.insertBefore=e.firstChild:n.appendTo=e}return e.map((e=>bs.create(Et.assign({},n||{},e))))}static openPopup(e,n){return bs.create(Et.assign({forElement:e},"string"==typeof n?{html:n}:n),"popup")}static showContextMenu(e,n){const r=this;return r.currentContextMenu&&r.currentContextMenu.destroy(),e instanceof HTMLElement?n.forElement=e:(n.forElement=document.body,Array.isArray(e)&&(e=new Zt(...e)),e instanceof Zt&&(n.align={position:e})),n.internalListeners={destroy:r.currentContextMenu=null},r.currentContextMenu=bs.create(n,"menu")}static attachTooltip(e,n){return bs.attachTooltip(e,n)}static hasTooltipAttached(e){return bs.resolveType("tooltip").hasTooltipAttached(e)}static destroyTooltipAttached(e){return bs.resolveType("tooltip").destroyTooltipAttached(e)}static mask(e,n="Loading"){if(e)return e instanceof HTMLElement&&(e={target:e,text:n}),ts.mask(e,e.target)}static unmask(e,n=!0){e.mask&&(n?e.mask.close():e.mask.hide())}static toast(e){return cl.show(e)}};dl._$name="WidgetHelper";var ul=class{static convertFromObject(e,n={}){M.assignIf(n,{rootName:"root",elementName:"element",includeHeader:!0,rootElementForArray:!0});const{rootName:r,elementName:i,includeHeader:o,rootElementForArray:s}=n;let{xmlns:a}=n;a=a?` xmlns="${a}"`:"";const converter=e=>{const n=[];for(const r in e){const o=e[r];if(Array.isArray(o)){s&&n.push(`<${r}>`);for(const e of o)i.length?n.push(`<${i}>`):n.push(`<${r}>`),n.push(converter(e)),i.length?n.push(`</${i}>`):n.push(`</${r}>`);s&&n.push(`</${r}>`)}else M.isObject(o)?n.push(`<${r}>${converter(o)}</${r}>`):null==o?n.push(`<${r}/>`):n.push(`<${r}>${w.encodeHtml(o)}</${r}>`)}return n.join("")};return`${o?'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>':""}<${r}${a}>${converter(e)}</${r}>`}};ul._$name="XMLHelper";var hl=class{constructor(){this.random100=[46,2,36,46,54,59,18,20,71,55,88,98,13,61,61,40,2,15,3,32,51,45,64,25,81,85,54,13,57,49,64,22,81,94,0,62,17,7,11,2,33,99,85,26,83,83,96,26,20,89,91,38,26,13,11,79,32,30,5,51,70,7,5,56,58,77,37,89,40,80,78,59,26,36,8,51,60,23,86,5,11,96,64,94,87,64,4,78,17,85,35,0,90,86,23,55,53,9,35,59,29,2,64,42,8,49,43,73,6,53,38,9,39,31,32,40,49,13,78,68,20,99,24,78,35,91,73,46,67,76,89,69,30,69,25,3,4,55,1,65,66,76,83,19,67,1,95,24,54,45,56,40,67,92,72,4,69,8,47,50,27,2,38,9,14,83,12,14,62,95,22,47,35,18,38,14,86,64,68,61,52,69,39,93,20,73,32,52,74,6,56,68,99,29,24,92,40,67,6,72,31,41,91,53,80,55,33,97,97,99,18,20,5,27,82,84,61,78,27,67,7,42,75,95,91,25,63,21,70,36,46,0,1,45,84,6,86,15,10,62,96,94,10,23,93,83,94,47,5,29,29,52,51,37,77,96,43,72,43,14,54,14,72,52,4,39,15,26,68,28,25,76,60,50,22,40,72,74,68,58,8,48,40,62,52,24,9,26,47,44,49,96,7,77,90,45,76,47,5,86,1,36,18,42,19,90,34,23,70,32,69,79,0,99,57,80,72,21,19,72,85,68,4,40,86,62,0,63,4,11,69,31,78,31,21,78,29,84,13,53,57,10,26,50,24,30,90,42,51,96,93,21,99,23,81,0,89,43,86,63,93,19,54,71,92,36,4,95,37,99,60,29,23,50,68,95,57,95,77,53,99,78,75,12,92,47,23,14,0,41,98,11,34,64,26,90,50,23,38,31,74,76,16,76,66,23,22,72,48,50,20,36,37,58,5,43,49,64,81,30,8,21,98,75,60,17,50,42,27,38,90,74,45,68,67,27,31,15,58,76,41,99,23,98,53,98,56,19,79,2,4,38,96,24,65,51,43,42,41,60,46,7,90,65,3,27,63,99,51,44,86,1,54,40,15,74,3,81,51,63,87,79,84,72,22,38,96,95,33,41,21,99,21,69,7,49,40,52,41,6,91,19,76,40,54,17,33,11,11,0,1,32,94,33,13,18,45,7,85,61,42,54,45,72,78,96,17,9,80,87,41,96,66,0,8,59,18,21,2,28,64,75,97,32,80,86,97,97,55,2,73,75,11,89,67,58,70,76,12,46,64,17,22,97,25,35,93,57,82,46,57,61,31,74,27,4,32,85,53,86,53,53,42,5,28,50,65,63,70,61,73,37,13,80,7,34,22,3,26,6,62,78,12,56,87,41,58,64,31,27,45,35,18,66,62,43,89,69,94,93,33,74,2,43,85,37,82,41,74,9,15,44,33,42,65,19,1,49,78,12,29,9,78,7,55,12,45,40,33,16,86,14,52,16,73,76,0,98,75,91,78,46,99,95,90,69,78,45,62,55,37,88,49,77,27,83,38,73,39,1,75,40,65,83,54,95,7,73,4,30,26,36,89,21,5,95,11,14,87,45,36,21,77,55,5,66,51,98,48,62,74,58,23,82,30,28,19,53,89,76,98,8,34,70,28,54,16,52,35,93,54,54,72,49,18,93,72,90,71,73,15,60,38,80,76,53,70,39,69,25,5,31,61,46,6,54,34,31,52,33,36,79,76,44,29,28,38,1,66,2,90,91,1,76,78,31,55,37,71,2,3,38,85,0,95,42,2,39,57,87,61,77,98,2,24,80,48,27,47,71,15,7,49,60,86,3,2,29,38,54,36,59,83,27,47,9,36,42,8,73,85,9,16,73,60,39,12,43,25,23,29,28,47,40,77,20,89,22,30,41,59,96,19,56,20,76,73,39,46,72,40,47,37,52,29,79,37,39,50,41,87,66,17,75,31,45,26,88,70,11,90,40,74,9,32,65,72,61,6,93,54,15,84,22,99,47,10,96,4,84,19,85,73,45,25,16,8,94,99,39,28,26,68,87,48,1,65,86,46,86,7,60,82,45,75,38,56,41,35,30,86,91,97,85,45,5,14,69,85,96,37,18,26,16,38,16,1,44,94,85,58,60,20,5,47,52,41,50,71,43,42,67,64,38,65,83,99,78,96,33,20,98,24,6,2,25,16,16,44,63,24,68,56,49,91,15,59,99,27,43,34,28,36,45,1,10,19,54,26,75,17,88,96,63,24,71,93,72,97,66,87,18,86],this.randomCache={},this.rndIndex=0}nextRandom(e){const{randomCache:n}=this;let r;return n[e]?r=n[e]:(r=this.random100.filter((n=>n<e)),n[e]=r),r[this.rndIndex++%r.length]}reset(){this.rndIndex=0}fromArray(e){return e[this.nextRandom(e.length)]}randomArray(e,n){const r=[],i=this.nextRandom(n+1),o={};for(let n=0,s=this.nextRandom(e.length);n<i;n++){for(;o[s];)s=this.nextRandom(e.length);o[s]=!0,r.push(e[s])}return r}};hl._$name="RandomGenerator";var gl=["Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.","Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.","Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.","Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.","Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.","Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui atione voluptatem sequi nesciunt.","Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem.","Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur?","Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?"],pl=class{static reset(){this.rnd.reset(),this.rndTime.reset(),this.rndRating.reset()}static*generate(e,n=!1,r=1){var i;let o,s;"object"==typeof e&&(n=e.randomHeight,r=null!=(i=e.initialId)?i:1,o=e.addSkills,s=e.rowCallback,e=e.count);const{rnd:a,rndTime:l,rndRating:c,rndText:d,firstNames:u,surNames:h,teams:g,foods:p,colors:m,cities:f,skills:b}=this;for(let i=0;i<e;i++){const v=a.fromArray(u),y=a.fromArray(h),w=`${v} ${String.fromCharCode(65+i%25)} ${y}`,C=a.nextRandom(60)+1,S=new Date(2019,0,C),x=new Date(2019,0,C+a.nextRandom(30)+2),D={id:r>-1?i+r:void 0,title:"Row "+i,name:w,firstName:v,surName:y,city:a.fromArray(f),team:a.fromArray(f)+" "+a.fromArray(g),age:10+a.nextRandom(80),food:a.fromArray(p),color:a.fromArray(m),score:10*a.nextRandom(100),rank:a.nextRandom(100)+1,start:S,finish:x,time:Ct.getTime(l.nextRandom(24),5*l.nextRandom(12)),percent:a.nextRandom(100),done:a.nextRandom(100)<50,rating:c.nextRandom(5),relatedTo:Math.min(e-1,i+r+a.nextRandom(10)),notes:gl[d.nextRandom(7)+1]};o&&(D.skills=a.randomArray(b,7));const E=null==s?void 0:s(D);E&&Object.assign(D,E),n&&(D.rowHeight=5*a.nextRandom(!0===n?20:n)+20),yield D}}static generateData(e,n=!1,r=1,i=!0){let o=e;"object"!=typeof e&&(o={count:e,randomHeight:n,initialId:r,reset:i}),!1!==o.reset&&this.reset(),pl.overrideRowCount&&(o.count=pl.overrideRowCount);const s=[],a=this.generate(o);for(let e=0;e<o.count;e++)s.push(a.next().value);return s}static generateEvents({viewStartDate:e,viewEndDate:n,nbrResources:r=50,nbrEvents:i=5,dependencies:o,tickUnit:s="days",minDuration:a=2,maxDuration:l=10}){const c=this.generateData(r),d=[];o=[];for(let c=0;c<r;c++)for(let r=0;r<i;r++){const i=Ct.getDurationInUnit(e,n,s),u=Ct.add(e,Math.round(.9*Math.random()*i),s),h=Math.round(Math.random()*(l-a))+a,g=Ct.add(u,h,"days"),p=d.length+1;d.push({id:p,name:this.tasks[(c+r)%(this.tasks.length-1)],startDate:u,duration:h,endDate:g,resourceId:c}),o&&c>0&&o.push({id:o.length+1,from:p-1,to:p})}return{resources:c,events:d,dependencies:o}}static generateRow(){return pl.generateData(1,!1,-1,!1)[0]}};Object.assign(pl,{rnd:new hl,rndTime:new hl,rndRating:new hl,rndText:new hl,cities:["Stockholm","Barcelona","Paris","Dubai","New York","San Francisco","Washington","Moscow"],firstNames:["Mike","Linda","Don","Karen","Doug","Jenny","Daniel","Melissa","John","Jane","Theo","Lisa","Adam","Mary","Barbara","James","David"],surNames:["McGregor","Ewans","Scott","Smith","Johnson","Adams","Williams","Brown","Jones","Miller","Davis","More","Wilson","Taylor","Anderson","Thomas","Jackson"],teams:["Lions","Eagles","Tigers","Horses","Dogs","Cats","Panthers","Rats","Ducks","Cougars","Hens","Roosters"],foods:["Pancake","Burger","Fish n chips","Carbonara","Taco","Salad","Bolognese","Mac n cheese","Waffles"],colors:["Blue","Green","Red","Yellow","Pink","Purple","Orange","Teal","Black"],skills:["JavaScript","CSS","TypeScript","React","Vue","Angular","Java","PHP","Python","C#","C++","BASIC","COBOL","FORTRAN","PASCAL","SQL"],tasks:["Meetings","Documentation","Email communication","Project management","Budgeting","Marketing and advertising","Customer service","Research and analysis","Data entry","IT support","Employee management","Sales and business development","Event planning","Graphic design","Writing and editing","Presentation","Travel arrangements and expense management","Training and development","Quality assurance","Customer support","Technical writing","Social media management","Translation","Legal research","Data analysis and visualization","Video editing and production","Network admin","Content creation","Market research","Public relations","Teaching and training","Recruiting","Product development"]}),pl._$name="DataGenerator";var ml=["action","target","to","deltaX","deltaY","x","y","text"],fl=class extends(Events_default(Delayable_default())){static get defaultConfig(){return{repeat:!0,outerElement:document.body,callOnFunctions:!0}}construct(e){super.construct(e);const n=this;n.widget&&(n.outerElement=n.widget.element,n.widget.playingDemo=!0),cn.playingDemo=!0,Object.assign(n,{prevTarget:null,currentStep:0,mouse:Gn.createElement({parent:n.outerElement,tag:"div",className:"simulated-mouse"}),timeoutId:null,innerIntervalId:null,mouseOutElements:[]}),n.intervalId=n.setInterval(n.nextStep.bind(n),1e3),n.outerElement.classList.add("b-playing-demo"),n.outerElement.addEventListener("click",(e=>{e.isTrusted&&n.abort()}))}doDestroy(){this.abort()}abort(e=!1){const n=this;n.mouse.style.top="-100px",n.clearInterval(n.intervalId),n.timeoutId&&n.clearTimeout(n.timeoutId),n.innerIntervalId&&n.clearInterval(n.innerIntervalId),n.outerElement.classList.remove("b-playing-demo"),n.widget&&(n.widget.playingDemo=!1),cn.playingDemo=!1,n.trigger(e?"done":"abort")}triggerEvent(e,n,r){if(!e)return null;let i;if(n.startsWith("mouse")){const e=this.mouse.getBoundingClientRect();i=new MouseEvent(n,Object.assign({view:globalThis,bubbles:!0,cancelable:!0,clientX:e.left,clientY:e.top},r||{}))}else i=document.createEvent("Event"),i.initEvent(n,!0,!1);return e.dispatchEvent(i),i}handleMouseMove(e,n){const r=this,i=r.mouse;i.classList.add("quick"),r.mouseDown&&i.classList.add("drag");const o=Gt.from(i,r.outerElement),s=o.x,a=o.y;let l=0,c=0;if(e.to)if("string"==typeof e.to){const n=r.outerElement.querySelector(e.to);if(n){const e=Gt.from(n,r.outerElement),i=e.x+e.width/2,o=e.y+e.height/2;l=(i-s)/10,c=(o-a)/10}}else e.to.x?l=(e.to.x-s)/10:(l=e.to[0]/10,c=e.to[1]/10);else e.deltaX?l=e.deltaX/10:e.x&&(l=(e.x-s)/10);e.deltaY&&(c=e.deltaY/10);let d=0;r.innerIntervalId=r.setInterval((()=>{if(r.shouldPause)return;9==d++&&(clearInterval(r.innerIntervalId),e.then&&e.then());const n=s+l*d,o=a+c*d;i.style.left=n+"px",i.style.top=o+"px";const u=i.getBoundingClientRect(),h=u.left,g=u.top,p=Gn.elementFromPoint(h,g);p!==r.prevTarget&&(r.prevTarget&&(r.mouseOutElements.push(r.prevTarget),Gn.isDescendant(r.mouseOutElements[0],p)||(r.mouseOutElements.forEach((e=>r.triggerEvent(e,"mouseout"))),r.mouseOutElements.length=0)),r.prevTarget=p,r.triggerEvent(p,"mouseover")),r.triggerEvent(p,e.action,{clientX:h,clientY:g})}),50)}getTarget(e){const n=this,r=e.target;return r?"function"==typeof r?r(e):document.querySelector(r):n.prevTarget||n.outerElement}normalizeStep(e){if(e.action)return"function"==typeof e.action?e.action(e):e;if("function"==typeof e)return e(),e;for(const n in e)Object.hasOwnProperty.call(e,n)&&!ml.includes(n)&&(e.action=n.toLowerCase(),e.to=e[n]);return e.target||"string"!=typeof e.to&&"function"!=typeof e.to||(e.target=e.to),e}get isScrolling(){const e=this,n=e.outerElement.getBoundingClientRect(),r=e.lastTop&&n.top!==e.lastTop;return e.lastTop=n.top,r}get isInView(){const e=this.outerElement.getBoundingClientRect();return e.top<globalThis.innerHeight&&e.bottom>0}get shouldPause(){return!this.isInView||this.isScrolling||document.hidden||!document.hasFocus()}nextStep(){const e=this;if(e.shouldPause)return;if(e.currentStep===e.steps.length){if(!e.repeat)return e.abort(!0);e.currentStep=0}0===e.currentStep&&e.trigger("initialize");const n=e.mouse,r=e.normalizeStep(e.steps[e.currentStep++]),i=e.getTarget(r),o=r.action;if(i&&o)if(n.className="simulated-mouse","mousemove"===o)e.handleMouseMove(r,i);else{if(i!==e.prevTarget){const r=Gt.from(i,e.outerElement);n.style.left=r.x+r.width/2+"px",n.style.top=r.y+r.height/2+"px"}"mousedown"===o&&(e.mouseDown=!0),"mouseup"===o&&(e.mouseDown=!1),e.timeoutId=e.setTimeout((()=>{if(e.prevTarget=i,n.classList.add(o),"type"===o){const e=bs.fromElement(i),n=r.text.split("|");e.value=n[1===n.length||e.value!=n[0]?0:1]}else e.triggerEvent(i,o)}),"type"===o?100:550)}}};fl._$name="DemoBot";var bl=Object.prototype.hasOwnProperty,vl=null;var yl=class{static get(e){if(null==e)return this.NULL;if(e instanceof this)return e;const n="string"==typeof e?e:JSON.stringify(e),r=this.cache;let i=r.get(n);return i||(vl=n,i=new this(e),r.set(n,i)),i}static get cache(){return bl.call(this,"_cache")&&this._cache||(this._cache=new Map)}static get NULL(){return bl.call(this,"_null")?this._null:this._null=new this(null)}constructor(e){const n=this;if(n.cacheKey=vl,vl=null,n.initialize(),null===e)n.formatter=new class{constructor(e){this.formatter=e}format(e){return this.formatter.defaultFormat(e)}parse(e,n){return this.formatter.defaultParse(e,n)}resolvedOptions(){return null}}(n);else{n.configure(e);for(const[e,r]of Object.entries(n.resolvedOptions()))null!=r&&e in n.defaults&&(n[e]=r)}}get parser(){return function setParser(e,n){return Object.defineProperty(e,"parser",{value:n}),n}(this,new this.constructor.Parser(this))}defaultFormat(e){return null==e?e:String(e)}defaultParse(e){return e}format(e){return null==e?e:this.formatter.format(e)}parse(e,n){return null==e?e:this.parser.parse(e,n)}parseStrict(e){return this.parse(e,!0)}resolvedOptions(){return this.formatter.resolvedOptions()}};yl._$name="Formatter";var wl=class extends(re.mixin(Events_default,Factoryable_default)){static get $name(){return"Navigator"}static get type(){return"navigator"}static get configurable(){return{ownerCmp:null,itemsTabbable:null,target:null,keyEventTarget:null,processEvent:null,itemSelector:null,activeItem:null,focusCls:"b-active",keys:null,allowCtrlKey:null,allowShiftKey:null,scrollDuration:50,disabled:null,datasetIdProperty:"id",testConfig:{scrollDuration:1}}}static get factoryable(){return{defaultType:"navigator"}}get activeItem(){const{_activeItem:e}=this;if(this.target.contains(e))return e;this._activeItem=null}updateOwnerCmp(e){this.itemSelector||(this.itemSelector=`.${this.ownerCmp.itemCls}`),Gn.setAttributes(this.keyEventTarget,{"aria-activedescendant":`${this.owner.id}-active-descendant`})}set navigationEvent(e){const{owner:n}=this;this._navigationEvent=n.navigationEvent=e,e&&Promise.resolve(1).then((()=>this.navigationEvent=null))}get navigationEvent(){return this._navigationEvent}static getComposedKeyName(e){const n=(e.key||"").trim()||e.code;return`${e.ctrlKey?"CTRL+":""}${e.shiftKey?"SHIFT+":""}${e.altKey?"ALT+":""}${n}`}onKeyDown(e){var n;const r=this,{ownerCmp:i,itemSelector:o,activeItem:s,itemsTabbable:a}=r,{target:l}=e,c=r.target.querySelector(o),d=(e.key||"").trim()||e.code,u=r.constructor.getComposedKeyName(e),h=l.matches(o)||l===r.keyEventTarget;if(!r.disabled&&r.processEvent&&(e=r.processEvent.call(i,e)),e&&!r.disabled&&c&&r.target.offsetParent&&h){if(!a){if(null==r.inlineFlow){const e=c.parentNode,n=Gn.getStyleValue(c,"position"),i=Gn.getStyleValue(c,"display"),o=Gn.getStyleValue(c,"float");r.inlineFlow="absolute"===n||"inline"===i||"inline-block"===i||"left"===o||"right"===o||"flex"===Gn.getStyleValue(e,"display")&&"row"===Gn.getStyleValue(e,"flex-direction")}r.prevKey||(r.inlineFlow?(r.prevKey="ArrowLeft",r.nextKey="ArrowRight"):(r.prevKey="ArrowUp",r.nextKey="ArrowDown"))}if(r.navigationEvent=e,s)switch(d){case r.prevKey:if(r.disabled||e.ctrlKey&&!r.allowCtrlKey)return;if(e.shiftKey&&!r.allowShiftKey)return;e.preventDefault(),e.handled=!0,r.navigatePrevious(e);break;case r.nextKey:if(r.disabled||e.ctrlKey&&!r.allowCtrlKey)return;if(e.shiftKey&&!r.allowShiftKey)return;e.preventDefault(),e.handled=!0,r.navigateNext(e);break;default:{const o=null==(n=r.keys)?void 0:n[u];if(o&&!r.disabled){if(!1===r.callback(o,r.thisObj||i,[e]))return}else i.onInternalKeyDown&&i.onInternalKeyDown(e);if(Gn.getActiveElement(l)!==l&&e.preventDefault(),a)return}}else{if(a)return;d!==r.nextKey&&d!==r.prevKey||(r.activeItem=r.getDefaultNavigationItem(e))}r.activeItem!==s&&r.triggerNavigate(e)}}getDefaultNavigationItem(e){const{target:n,itemSelector:r,prevKey:i,nextKey:o}=this;return 4&n.compareDocumentPosition(e.target)&&e.key===i?n.querySelector(`${r}:last-of-type`):2&n.compareDocumentPosition(e.target)&&e.key===o?n.querySelector(`${r}`):void 0}navigatePrevious(e){const n=this,r=n.previous;e.preventDefault(),r&&n.ownerCmp.scrollable.scrollIntoView(r,{animate:n.scrollDuration}).then((()=>{n.activeItem=r,n.triggerNavigate(e)}))}navigateNext(e){const n=this,r=n.next;e.preventDefault(),r&&n.ownerCmp.scrollable.scrollIntoView(r,{animate:n.scrollDuration}).then((()=>{n.activeItem=r,n.triggerNavigate(e)}))}get owner(){return this.ownerCmp}get previous(){return this.getAdjacent(-1)}get next(){return this.getAdjacent(1)}getAdjacent(e=1,n=this.activeItem){const r=this.treeWalker;if(r.currentNode=n,r[e<0?"previousNode":"nextNode"](),r.currentNode!==this.activeItem)return r.currentNode}onTargetFocusIn(e){var n;const r=this,{target:i,relatedTarget:o}=e,{owner:s,itemsTabbable:a,skipScrollIntoView:l,previousActiveItem:c}=r;if(!i.matches(".b-focus-trap"))if(i.matches(r.itemSelector))r.skipScrollIntoView=!0,r.activeItem=i,r.skipScrollIntoView=l,r.activeItem&&a&&r.triggerNavigate(e);else if(i===r.target){(o?i.compareDocumentPosition(o):0)&Node.DOCUMENT_POSITION_CONTAINED_BY?null==(n=s.previousSibling)||n.focus():r.activeItem=c&&r.target.contains(c)?c:0}}onTargetFocusOut(e){const n=this,{relatedTarget:r}=e;(null==r?void 0:r.matches(".b-focus-trap"))||r&&n.target.contains(r)&&r.matches(n.itemSelector)||n.activeItem&&(n.activeItem=null,n.itemsTabbable&&n.triggerNavigate(e))}onTargetMouseDown(e){const n=this,r=e.target.closest(n.itemSelector);n.navigationEvent=e,n.itemsTabbable?r===n.activeItem&&n.triggerNavigate(e):!1===n.ownerCmp.itemsFocusable?n.onFocusGesture(e):r&&(e.preventDefault(),Gn.focusWithoutScrolling(r))}onTargetClick(e){var n;const r=this,{skipScrollIntoView:i}=r;r.skipNextClick||(null==(n=r.navigationEvent)?void 0:n.ignoreNavigation)?r.skipNextClick=!1:r.disabled||(r.skipScrollIntoView=!0,r.processEvent&&(e=r.processEvent.call(r.ownerCmp,e)),e&&(r.activeItem=e.target.closest(r.itemSelector),r.triggerNavigate(e)),r.skipScrollIntoView=i)}onFocusGesture(e){(e.target===this.ownerCmp.contentElement||e.target.closest(this.itemSelector)&&!1===this.ownerCmp.itemsFocusable)&&e.preventDefault()}acceptNode(e){return e.offsetParent&&e.matches&&e.matches(this.itemSelector)?Gn.NodeFilter.FILTER_ACCEPT:Gn.NodeFilter.FILTER_SKIP}changeActiveItem(e){return null!=e&&this.ownerCmp.getItem&&(e=this.ownerCmp.getItem(e)),e}updateActiveItem(e,n){var r;const i=this,{ownerCmp:o}=i,s=n&&i.target.contains(n),a=e&&Gn.isFocusable(e)&&e!==Gn.getActiveElement(e);if(s&&(i.previousActiveItem=n),n&&(n.classList.remove(i.focusCls),n.removeAttribute("id")),null!=e){if(i.skipScrollIntoView?a&&Gn.focusWithoutScrolling(e):null==(r=o.scrollable)||r.scrollIntoView(e,{block:"nearest",focus:a,silent:i.scrollSilently}),e===n&&s)return;e.classList.add(i.focusCls),e.id=`${i.owner.id}-active-descendant`,i._activeItem=e}else i._activeItem=null,n===Gn.getActiveElement(n)&&o.revertFocus()}updateTarget(e,n){const r=this,i={element:e,thisObj:r,focusin:"onTargetFocusIn",focusout:"onTargetFocusOut",mousedown:{handler:"onTargetMouseDown",delegate:r.itemSelector}};r.itemsTabbable||r.itemsFocusable||(i.click="onTargetClick"),Object.prototype.hasOwnProperty.call(r,"acceptNode")||(r.acceptNode=r.acceptNode.bind(r),r.acceptNode.acceptNode=r.acceptNode),cn.on(i),r.treeWalker=r.setupTreeWalker(e,Gn.NodeFilter.SHOW_ELEMENT,r.acceptNode),r.keyEventTarget||(r.keyEventTarget=e),(r.targetMutationMonitor=new MutationObserver(r.onTargetChildListChange.bind(r))).observe(e,{childList:!0,subtree:!0})}setupTreeWalker(e,n,r){return document.createTreeWalker(e,n,r)}onTargetChildListChange(){var e;const n=this,{activeItem:r,datasetIdProperty:i}=n;r&&(n.target.contains(r)?r.classList.contains(n.focusCls)||r.classList.add(n.focusCls):n.activeItem=n.target.querySelector(`${n.itemSelector}.${n.focusCls}[data-${w.hyphenate(i)}="${r.dataset[i]}"]`)||(null==(e=n.target.querySelector(`${n.itemSelector}.${n.focusCls}`))?void 0:e[r.dataset.index])||null)}changeKeyEventTarget(e){this._keyEventTarget=e,cn.on({element:e,keydown:"onKeyDown",thisObj:this})}triggerNavigate(e,n=this.activeItem){var r;const i={event:e,item:n,oldItem:this.previousActiveItem};this.trigger("navigate",i),null==(r=this.ownerCmp)||r.trigger("navigate",i)}};wl._$name="Navigator";var Cl=w.escapeRegExp,Sl=/[\d+-]/g,newFormatter=(e,n)=>new Intl.NumberFormat(e||void 0,n),xl=/^(?:([$])\s*)?(?:(\d+)>)?\d+(,\d+)?(?:\.((\d*)(?:#*)|[*]))?(?:\s*([%])?)?$/,Dl=class extends yl{static get $name(){return"NumberFormat"}initialize(){this._as={},this.is={decimal:!1,currency:!1,percent:!1,null:!0,from:null}}get truncator(){const e=this.maximumFractionDigits;return null==e?null:this.as({style:"decimal",maximumFractionDigits:Math.min(20,e+1)},"truncator")}configure(e){const n=this;"string"!=typeof e?Object.assign(n,e):n.template=e;const r={},i=n.locale?Le.locales[n.locale]:Le.locale,o=i&&i.NumberFormat,s=n.template;if(o)for(const e in o)null==n[e]&&"function"!=typeof o[e]&&(n[e]=o[e]);if(s){const e=xl.exec(s),r=e[2],i=e[4];n.useGrouping=!!e[3],n.style=e[1]?"currency":e[6]?"percent":"decimal",r&&(n.integer=+r),"*"===i?n.fraction=[0,20]:null!=i&&(n.fraction=[e[5].length,i.length])}n._minMax("fraction",!0,!0),n._minMax("integer",!0,!1),n._minMax("significant",!1,!0);for(const e in n.defaults)null!=n[e]&&(r[e]=n[e]);n.is.from=n.from&&n.from.is,n.is[n.style]=!(n.is.null=!1),n.formatter=newFormatter(n.locale,r)}as(e,n=null){const r=this.resolvedOptions()||{template:"9.*"},i=this._as;let o=n&&i[n];return o||("string"==typeof e?r.style=e:Object.assign(r,e),r.from=this,o=new Dl(r)),n&&(i[n]=o),o}defaultParse(e,n){return null==e?e:n?Number(e):parseFloat(e)}format(e){if("string"==typeof e){const n=Number(e);e=isNaN(n)?this.parse(e):n}return super.format(e)}round(e){return this.parse(this.format(e))}truncate(e){const n=this,r=n.maximumFractionDigits,{truncator:i}=n;let o,s=n.parse(e);return i&&(s=i.format(s),o=s.indexOf(i.parser.decimal),o>-1&&s.length-o-1>r&&(s=s.substr(0,o+r+1)),s=i.parse(s)),s}resolvedOptions(){const e=super.resolvedOptions();for(const n in e)void 0===e[n]&&(e[n]=this[n]);return e}_minMax(e,n,r){const i=this,o=i[e];if(null!=o){const s=w.capitalize(e),a=`maximum${s}Digits`,l=`minimum${s}Digits`;"number"==typeof o?(n&&(i[l]=o),r&&(i[a]=o)):(i[l]=o[0],i[a]=o[1])}}};Dl.Parser=class{constructor(e){const n=this,r=e.locale,i=newFormatter(r,{maximumFractionDigits:3}),o=e.is.currency?n._decodeStyle(r,{style:"currency",currency:e.currency,currencyDisplay:e.currencyDisplay}):null,s=e.is.percent?n._decodeStyle(r,{style:"percent"}):null,a=i.format(1.2).replace(Sl,"")[0],l=i.format(1e9).replace(Sl,"")[0]||"";Object.assign(n,{currency:o,decimal:a,formatter:e,grouper:l,percent:s}),n.decimal=a,n.decimalRe=Cl(a,"g"),n.grouper=l,n.stripRe=new RegExp(`(?:\\s+|${Cl(l)})`+(o?`|(?:${Cl(o.text)})`:"")+(s?`|(?:${Cl(s.text)})`:""),"g")}decimalPlaces(e){const n=(e=e.replace(this.stripRe,"")).indexOf(this.decimal)+1;return n&&e.length-n}parse(e,n){return"string"==typeof e&&(e=e.replace(this.stripRe,"").replace(this.decimalRe,".").replace("−","-"),e=n?Number(e):parseFloat(e),this.formatter.is.percent&&(e/=100)),e}_decodeStyle(e,n){const r=newFormatter(e,n),i=newFormatter(e,Object.assign(r.resolvedOptions(),{style:"decimal"})),o=r.format(0),s=i.format(0);return{suffix:o.startsWith(s),text:o.replace(s,"").trim()}}},Object.assign(Dl.prototype,{defaults:{style:"decimal",currency:null,currencyDisplay:"symbol",locale:null,maximumFractionDigits:null,minimumFractionDigits:null,minimumIntegerDigits:null,maximumSignificantDigits:null,minimumSignificantDigits:null,useGrouping:!0},fraction:null,from:null,integer:null,significant:null,template:null}),Object.assign(Dl.prototype,Dl.prototype.defaults),yl.number=(e,n)=>Dl.format(e,n),Dl._$name="NumberFormat";var El=class extends(Events_default(re)){construct(e={}){const n=this;super.construct(e),n.onWsOpen=n.onWsOpen.bind(n),n.onWsClose=n.onWsClose.bind(n),n.onWsMessage=n.onWsMessage.bind(n),n.onWsError=n.onWsError.bind(n),n.autoConnect&&n.address&&n.open()}doDestroy(){const e=this;e.connector&&(e.detachSocketListeners(e.connector),e.connector.close(),e.connector=null),super.doDestroy()}get isConnecting(){var e;return(null==(e=this.connector)?void 0:e.readyState)===this.constructor.webSocketImplementation.CONNECTING}get isOpened(){var e;return(null==(e=this.connector)?void 0:e.readyState)===this.constructor.webSocketImplementation.OPEN}get isClosing(){var e;return(null==(e=this.connector)?void 0:e.readyState)===this.constructor.webSocketImplementation.CLOSING}get isClosed(){var e;return(null==(e=this.connector)?void 0:e.readyState)===this.constructor.webSocketImplementation.CLOSED}createWebSocketConnector(){const e=this.connector=new this.constructor.webSocketImplementation(this.address);this.attachSocketListeners(e)}destroyWebSocketConnector(){this.detachSocketListeners(this.connector),this.connector.close(),this.connector=null}attachSocketListeners(e){const n=this;e.addEventListener("open",n.onWsOpen),e.addEventListener("close",n.onWsClose),e.addEventListener("message",n.onWsMessage),e.addEventListener("error",n.onWsError)}detachSocketListeners(e){const n=this;e.removeEventListener("open",n.onWsOpen),e.removeEventListener("close",n.onWsClose),e.removeEventListener("message",n.onWsMessage),e.removeEventListener("error",n.onWsError)}async open(){const e=this;if(e._openPromise)return e._openPromise;if(!e.address)return void console.warn("Server me.address cannot be empty");if(e.isOpened)return!0;let n;return e.createWebSocketConnector(),e._openPromise=new Promise((r=>{n=e.ion({open(){r(!0)},error(){r(!1)}})})).then((r=>(n(),e._openPromise=null,r||e.destroyWebSocketConnector(),r))).catch((()=>{e._openPromise=null,e.destroyWebSocketConnector()})),e._openPromise}close(){this.connector&&(this.destroyWebSocketConnector(),this.trigger("close"))}send(e,n={}){var r;null==(r=this.connector)||r.send(JSON.stringify({command:e,...n}))}onWsOpen(e){this.trigger("open",{event:e})}onWsClose(e){this.trigger("close",{event:e})}onWsMessage(e){try{const n=JSON.parse(e.data);this.trigger("message",{data:n})}catch(e){this.trigger("error",{error:e})}}onWsError(e){this.trigger("error",{error:e})}};__publicField(El,"webSocketImplementation","undefined"==typeof WebSocket?null:WebSocket),__publicField(El,"configurable",{address:"",userName:"User",autoConnect:!0}),El._$name="WebSocketManager";var Finalizable_default=e=>class Finalizable extends(e||re){static get $name(){return"Finalizable"}construct(...e){super.construct(...e),this.finalizer=null,this.finalizing=null,this.isFinalized=!1,this.isFinalizing=!1}doFinalize(){this.destroy()}finalize(){const e=this;let n=e.finalizing;return n||e.isFinalized||(e.isFinalizing=!0,e.finalizing=n=e._awaitFinalizer()),n}async _awaitFinalizer(){const e=this;try{await e.finalizer}finally{e.finalizing=null,e.isFinalized=!0,e.doFinalize()}}},Rl=Symbol("dragAbort"),kl=Symbol("dragInit"),Tl=Symbol("dragDrag"),Ml=Symbol("dragDrop"),Al={x:"horizontal",y:"vertical"},Il=class extends(re.mixin(Finalizable_default,Delayable_default,Identifiable_default)){static get configurable(){return{itemElement:null,scrollManager:null,monitoringConfig:null,source:null,target:null,targetElement:null,threshold:5,touchStartDelay:300}}static get identifiable(){return{}}construct(...e){super.construct(...e);const n=this,{event:r}=n;Object.assign(n,{altKey:null,cleaners:[],ctrlKey:null,data:new Map,element:r.target,endEvent:null,lastMoveEvent:null,metaKey:null,previousTarget:null,scrollerAction:null,shiftKey:null,state:kl,startEvent:r,touchStartTimer:null,_valid:!0}),"touches"in r&&n.touchStartDelay&&(n.touchStartTimer=n.setTimeout((()=>n.touchStartTimer=null),n.touchStartDelay,"touchStartDelay")),cn.on({element:globalThis,blur:"onWindowBlur",thisObj:n})}doDestroy(){const e=this,{source:n,target:r}=e;e.cleanup(),(null==r?void 0:r.dropping)===e&&(r.dropping=null),(null==n?void 0:n.dragging)===e&&(n.dragging=null),super.doDestroy()}onWindowBlur(){this.started&&this.abort()}get aborted(){return this.state===Rl}get completed(){return this.isDestroying||this.aborted||null!==this.endEvent}get pending(){return this.state===kl}get started(){return this.state!==kl&&!this.aborted}get valid(){return this.started&&null!=this.targetElement&&this._valid}set valid(e){this._valid=e}async get(e){if(this.aborted)throw new Error("Data is not available on aborted drag");if(!this.completed)throw new Error("Data is not available until drag completion");if(Array.isArray(e))return Promise.all(e.map((e=>this.get(e))));let n=this.data.get(e);return"function"==typeof n&&(n=await n(),this.data.set(e,n)),n}has(e){return this.data.has(e)}peek(e){if(this.aborted)throw new Error("Data is not available on aborted drag");if(Array.isArray(e))return e.map((e=>this.peek(e)));let n=this.data.get(e);return"function"==typeof n&&(n=!0),n}set(e,n){this.data.set(e,n)}changeTarget(e,n){if(e!==n){const r=this;r._target=e,r.previousTarget=n,n&&(n.dropping=null),e&&(e.dropping=r,e.dropping!==r&&(e=null,r.valid=!1)),r._target=n}return e}updateTarget(e,n){const r=this;n&&r.source.dragLeaveTarget(r,n),e&&(r.valid=!0,e.dragMove(r),r.source.dragEnterTarget(r))}updateTargetElement(e){let n,r,i,o,s;for(s=e;s;s=s.parentElement)if(r=Si.get(s,"droppables"),r)for(o=0;o<r.length;++o)if(n=r[o],n.dropRootElement.contains(e)&&(i=n.droppableSelector,(!i||e.closest(`#${Gn.getId(n.dropRootElement)} ${i}`))&&(this.target=n,this.target===n)))return}abort(){const e=this,{element:n,source:r}=e;null==n||n.getBoundingClientRect(),e.state!==Ml&&(e.state=Rl,e.cleanup()),null==r||r.endDrag(e)}begin(){const e=this,{source:n}=e,r=n.beforeDrag(e);return!1!==r&&(n.dragging=e),r}cleanup(){let e;for(;e=this.cleaners.pop();)e()}end(e){const n=this,{lastMoveEvent:r,target:i}=n,{dragSwallowClickTime:o}=n.source;n.event=n.endEvent=e,n.syncFlags(),n.started&&((null==r?void 0:r.clientX)===e.clientX&&(null==r?void 0:r.clientY)===e.clientY&&(null==r?void 0:r.target)===e.target||n.track(),o&&cn.on({element:document,capture:!0,expires:o,once:!0,click(e){e.stopPropagation()}}),n.state=Ml,i!==n.source&&(null==i||i.dragDrop(n)))}fakeKey(e,n){const r=this,{lastMoveEvent:i}=r;if(i&&r.element){let o;i.isKey=!0,"Alt"===e.key?r.altKey!==n&&(r.altKey=n,o=!0):"Control"===e.key&&r.ctrlKey!==n&&(r.ctrlKey=n,o=!0),o&&(r.event=i,r.track())}}keyDown(e){this.completed||("Escape"===e.key?this.abort():this.isDragToggleKey(e.key)&&this.fakeKey(e,!0))}keyUp(e){!this.completed&&this.isDragToggleKey(e.key)&&this.fakeKey(e,!1)}getDistance(e){return cn.getDistanceBetween(this.startEvent,e)}isDragToggleKey(e){return"Control"===e||"Alt"===e}move(e){const n=this,{target:r}=e,i=n.getDistance(e)>=n.threshold;if(n.syncFlags(),n.touchStartTimer)i&&n.abort();else if(r&&r.nodeType===Node.ELEMENT_NODE){if(i&&!n.started&&(n.event=e,!1===n.start()))return void n.abort();n.started&&!n.completed&&(n.lastMoveEvent=n.event=e,"touchmove"===e.type&&(e.preventDefault(),e.stopImmediatePropagation()),n.track())}}start(){const e=this,{scrollManager:n,monitoringConfig:r,source:i}=e,{draggingBodyCls:o,dragLock:s}=i,a=i.dragRootElement;if(e.state=Tl,n){const i=n.startMonitoring(M.merge({scrollables:[{element:a}],direction:Al[s]||s||"both",callback(n){const{lastMoveEvent:r}=e;r&&e.element&&(r.isScroll=!0,e.event=r,e.scrollerAction=n,e.track(),e.scrollerAction=null)}},r));e.cleaners.push(i)}const l=i.dragRootElement.closest(".b-outer")||document.body;if(l.classList.add(o),e.cleaners.push((()=>l.classList.remove(o))),!1===i.startDrag(e))return e.cleanup(),!1}syncFlags(){const e=this,{event:n}=e;e.altKey=n.altKey,e.ctrlKey=n.ctrlKey||n.metaKey,e.metaKey=n.metaKey,e.shiftKey=n.shiftKey}track(){const e=this,{event:n,source:r,target:i}=e;let o,s=n.target;"touchmove"===n.type&&(o=n.changedTouches[0],s=Gn.elementFromPoint(o.clientX,o.clientY)),e.targetElement=s,i===e.target&&(null==i||i.dragMove(e)),r.trackDrag(e)}};__publicField(Il,"$name","DragContext"),Il.prototype.STATE=Il.STATE=Object.freeze({ABORTED:Rl,INIT:kl,DRAGGING:Tl,DROPPED:Ml}),Il._$name="DragContext";var Fl=class extends(re.mixin(Factoryable_default)){static get type(){return"default"}static get configurable(){return{dragging:null}}static get factoryable(){return{defaultType:Fl}}updateDragging(e,n){n&&this.close(n),e&&this.open(e)}close(e){}open(e){}dragStart(e){this.dragging=e}dragMove(e){}dragEnd(e){this.dragging=null}};Fl.initClass(),Fl._$name="DragProxy";var Draggable_default=e=>class Draggable extends(e||re){static get $name(){return"Draggable"}static get configurable(){return{dragging:{$config:"nullify",value:null},draggingClsSelector:null,dragDocumentListeners:{element:document,keydown:"onDragKeyDown",keyup:"onDragKeyUp",contextmenu:"onDragContextMenu",mousemove:"onDragPointerMove",mouseup:"onDragPointerUp",pointerup:"onDragPointerUp",touchend:"onDragPointerUp",touchmove:{handler:"onDragPointerMove",passive:!1}},dragItemSelector:null,dragItemOverCls:null,dragLock:null,dragMinDistance:1,dragProxy:{$config:["lazy","nullify"],value:null},dragRootElement:{$config:"nullify",value:null},dragSameTargetDrop:!1,dragSelector:null,ignoreSelector:null,dragSwallowClickTime:50,dragThreshold:5,dragTouchStartDelay:300,dropTargetSelector:null,overItem:null,testConfig:{dragSwallowClickTime:50}}}static get properties(){return{draggingCls:"b-draggable-active",draggingBodyCls:"b-draghelper-active",draggingItemCls:"b-dragging-item",draggingStartedCls:"b-draggable-started",draggableCls:"b-draggable"}}beforeDrag(e){const{dragRootElement:n,dragSelector:r,ignoreSelector:i}=this,o=r&&e.element.closest(r);return!r||Boolean(o&&o===n||n.contains(o)&&(!i||!e.element.matches(i)))}dragStart(e){}dragOver(e){}dragEnterTarget(e){}dragLeaveTarget(e,n){}dragDrop(e){}dragEnd(e){}get activeDrag(){const{dragging:e}=this;return(null==e?void 0:e.started)&&!e.completed?e:null}get dragEventer(){return this.trigger?this:null}get draggingClassElement(){const{draggingClsSelector:e,dragRootElement:n}=this;return e?null==n?void 0:n.closest(e):n}beginDrag(e){const{draggingCls:n,draggingClassElement:r}=this;n&&r&&(r.classList.add(n),e.cleaners.push((()=>r.classList.remove(n))))}async endDrag(e){const n=this,{dragEventer:r,dragProxy:i}=n;e.valid&&await n.dragDrop(e),n.isDestroyed||(e.pending?e.destroy():(n.dragEnd(e),null==i||i.dragEnd(e),null==r||r.trigger(e.valid?"drop":"dragCancel",{drag:e,event:e.event}),n.finalizeDrag(e)))}async finalizeDrag(e){var n;await(null==(n=e.finalize)?void 0:n.call(e))}moveDrag(e){if(!1!==this.dragOver(e)){const{dragEventer:n,dragProxy:r}=this;null==r||r.dragMove(e),null==n||n.trigger("drag",{drag:e,event:e.event})}}setupDragContext(e){const n=this,{dragItemSelector:r,id:i}=n,{target:o}=e;return{event:e,id:i?`${i}-drag-${n._nextDragId=(n._nextDragId||0)+1}`:null,itemElement:r?o.closest(r):o,touchStartDelay:n.dragTouchStartDelay,source:n,threshold:n.dragThreshold}}startDrag(e){const{draggingStartedCls:n,draggingClassElement:r,draggingItemCls:i,dragEventer:o,dragProxy:s}=this,{itemElement:a}=e;if(!1===(null==o?void 0:o.trigger("beforeDragStart",{drag:e,event:e.event})))return!1;n&&r&&(r.classList.add(n),e.cleaners.push((()=>r.classList.remove(n)))),i&&a&&(a.classList.add(i),e.cleaners.push((()=>a.classList.remove(i)))),null==s||s.dragStart(e);const l=this.dragStart(e);return!1!==l&&(null==o||o.trigger("dragStart",{drag:e,event:e.event})),l}trackDrag(e){var n;const{dropTargetSelector:r}=this;e.valid=!(r&&!(null==(n=e.targetElement)?void 0:n.closest(r))),this.moveDrag(e)}configureListeners(e){const n=Et.assign({thisObj:this},this.dragDocumentListeners);return"touches"in e.startEvent?(delete n.mousemove,delete n.mouseup):(delete n.contextmenu,delete n.touchmove,delete n.touchend,delete n.pointerup),n}updateDragging(e,n){const r=this;if(e){const n=r.configureListeners(e);e.cleaners.push(cn.on(n)),r.beginDrag(e)}else n&&n.destroy()}changeDragProxy(e,n){return Fl.reconfigure(n,e,{owner:this,defaults:{owner:this}})}updateDragRootElement(e,n){var r;const i=this,{draggableCls:o,dragItemSelector:s,onDragItemMouseMove:a}=i;if(null==n||n.classList.remove(o),null==(r=i._dragRootDetacher)||r.call(i),e){const n={thisObj:i,element:e,mousedown:"onDragMouseDown",touchstart:"onDragTouchStart",pointerdown:e=>{var n,r;return e.pointerId&&(null==(r=(n=e.target).releasePointerCapture)?void 0:r.call(n,e.pointerId))}};a&&(n.mousemove={delegate:s,handler:"onDragItemMouseMove"}),(i.dragItemOverCls||a||i.onDragItemMouseEnter||i.onDragItemMouseLeave)&&Object.assign(n,{mouseover:{delegate:s,handler:"onDragItemMouseOver"},mouseout:{delegate:s,handler:"onDragItemMouseOut"}}),e.classList.add(o),i._dragRootDetacher=cn.on(n)}}onDragItemMouseOver(e){this.overItem=e}onDragItemMouseOut(e){this.dragging||(this.overItem=e)}changeOverItem(e){var n;return this.enterLeaveEvent=e,"mouseout"===e.type?(null==(n=e.relatedTarget)?void 0:n.closest(this.dragItemSelector))||null:e.target.closest(this.dragItemSelector)}updateOverItem(e,n){var r,i;const o=this,{dragItemOverCls:s}=o;n&&(s&&n.classList.remove(s),null==(r=o.onDragItemMouseLeave)||r.call(o,o.enterLeaveEvent,n)),e&&(s&&e.classList.add(s),null==(i=o.onDragItemMouseEnter)||i.call(o,o.enterLeaveEvent,e))}onDragContextMenu(e){e.preventDefault()}onDragKeyDown(e){this.dragging.keyDown(e)}onDragKeyUp(e){this.dragging.keyUp(e)}onDragMouseDown(e){0===e.button&&this.onDragPointerDown(e)}onDragPointerDown(e){let{dragging:n}=this;n?n.isFinalizing||n.abort():(n=this.setupDragContext(e),n&&(n=new Il(n),!1===n.begin()&&n.destroy()))}changeDragging(e,n){return null==n||n.destroy(),e}onDragPointerMove(e){const{dragging:n}=this;n&&!n.completed&&(null==n||n.move(e))}onDragPointerUp(e){const{dragging:n}=this;n&&!n.completed&&(n.end(e),this.endDrag(n))}onDragTouchStart(e){1===e.touches.length&&this.onDragPointerDown(e)}},Droppable_default=e=>class Droppable extends(e||re){static get $name(){return"Droppable"}static get configurable(){return{droppableSelector:null,dropping:null,dropRootElement:{$config:"nullify",value:null}}}get dropEventer(){return this.trigger?this:null}get droppableCls(){return"b-droppable"}dragEnter(e){var n;return null==(n=this.dropEventer)?void 0:n.trigger("dragEnter",{drag:e,event:e.event})}dragMove(e){var n;return null==(n=this.dropEventer)?void 0:n.trigger("dragMove",{drag:e,event:e.event})}dragDrop(e){var n;return null==(n=this.dropEventer)?void 0:n.trigger("drop",{drag:e,event:e.event})}dragLeave(e){var n;return null==(n=this.dropEventer)?void 0:n.trigger("dragLeave",{drag:e,event:e.event})}changeDropping(e,n){if(e!==n){const r=this;n&&(!n.aborted&&n.completed||r.dragLeave(n)),e&&(r._dropping=e,!1===r.dragEnter(e)&&(e=null),r._dropping=n)}return e}updateDropRootElement(e,n){const r=this,{droppableCls:i}=r;let o,s,a;n&&(o=Si.get(n,"droppables"),a=!0,Array.isArray(o)&&(s=o.indexOf(r))>-1&&(o.length<2?Si.remove(n,"droppables"):(o.splice(s,1),o.forEach((e=>{i===e.droppableCls&&(a=!1)})))),a&&n.classList.remove(i)),e&&(o=Si.get(e,"droppables"),o?o.push(r):Si.set(e,"droppables",[r]),e.classList.add(i))}},Featureable_default=e=>class Featureable extends(e||re){static get $name(){return"Featureable"}static get configurable(){return{features:null}}static get declarable(){return["featureable"]}static setupFeatureable(e){const n={ownerName:"client",...e.featureable};n.factory.initClass(),Reflect.defineProperty(e,"featureable",{get:()=>n})}doDestroy(){var e;const n=this.features;super.doDestroy();for(const r in n){const i=n[r];null==(e=i.destroy)||e.call(i)}}hasFeature(e){var n;return Boolean(null==(n=this.features)?void 0:n[e])}changeFeatures(e,n){if(this.isDestroying)return;const r=this,{featureable:i}=r.constructor,o=r.$features||(r.$features=new ia({configName:"features",factory:i.factory,owner:r,ownerName:i.ownerName}));return o.update(e),n?void 0:o.target}get widgetClass(){}getCurrentConfig(e){const n=super.getCurrentConfig(e),{features:r}=n;if(r)for(const e in r)0===Object.keys(r[e]).length&&(r[e]=!0);return n}},Pl="b-hover-edge",Ol="b-hover-top",Ll="b-hover-right",_l="b-hover-bottom",$l="b-hover-left",jl={[Pl]:1,[Ol]:1,[Ll]:1,[_l]:1,[$l]:1},zl={t:[Pl,Ol],r:[Pl,Ll],b:[Pl,_l],l:[Pl,$l],tr:[Pl,Ol,Ll],bl:[Pl,_l,$l],tl:[Pl,Ol,$l],br:[Pl,_l,Ll]},Hoverable_default=e=>class Hoverable extends(e.mixin(Delayable_default)){static get $name(){return"Hoverable"}static get configurable(){return{hoverCls:null,hoverAnimationCls:null,hoverRootCls:null,hoverRootActiveCls:null,hoverDelay:null,hoverElement:null,hoverIgnoreElement:null,hoverEdges:null,hoverEdgeSize:10,hoverRootElement:{$config:"nullify",value:null},hoverSelector:null,hoverTarget:{$config:"nullify",value:null},hoverTrack:null,hoverZone:null}}static get delayable(){return{setHoverTarget:0}}hoverEnter(e){}hoverIgnore(e){var n;return null==(n=this.hoverIgnoreElement)?void 0:n.contains(e)}hoverLeave(e){}hoverMove(e){}onHoverMouseMove(e){const n=this,{hoverEdges:r,hoverEdgeSize:i,hoverTarget:o}=n;if(o){if(r){const{top:s,left:a,width:l,height:c,right:d,bottom:u}=o.getBoundingClientRect(),{clientX:h,clientY:g}=e,p=a+l/2,m=s+c/2,f=g<(i?s+i:m),b=h>=(i?d-i:p),v=f||g>=(i?u-i:m)?f?"t":"b":"",y=b||h<(i?a+i:p)?b?"r":"l":"";n.hoverZone=(r.includes(v)?v:"")+(r.includes(y)?y:"")}n.hoverEvent=e,n.hoverTrack&&n.hoverMove(e)}}onHoverMouseOver(e){this.hoverEvent=e,this.hoverElement=e.target}onHoverMouseOut(e){this.hoverEvent=e,this.hoverElement=e.relatedTarget}updateHoverDelay(e){this.setHoverTarget.delay=e}changeHoverEdges(e){return!0===e?"trbl":(e||"").replace("v","tb").replace("h","lr")}updateHoverEdges(){this.syncHoverListeners()}changeHoverElement(e){if(!this.hoverIgnore(e))return e}updateHoverElement(e){const{hoverSelector:n}=this;n&&(e=null==e?void 0:e.closest(n)),this.setHoverTarget(e)}updateHoverRootElement(e,n){const{hoverRootCls:r}=this;r&&(null==n||n.classList.remove(r),null==e||e.classList.add(r)),this.syncHoverListeners()}changeHoverTarget(e,n){return n&&(this.hoverZone=null),e}updateHoverTarget(e,n){const r=this,{hoverCls:i,hoverAnimationCls:o,hoverRootActiveCls:s,hoverRootElement:a}=r;s&&(null==a||a.classList[e?"add":"remove"](s)),n&&(i&&n.classList.remove(i),o&&n.classList.remove(o),r.hoverLeave(n)),e&&(i&&e.classList.add(i),r.hoverEnter(n),r.hoverTrack&&r.hoverMove(r.hoverEvent),o&&(e.getBoundingClientRect(),e.classList.add(o)))}updateHoverTrack(){this.syncHoverListeners()}updateHoverZone(e){const{hoverAnimationCls:n,hoverTarget:r}=this;if(r){const{className:i}=r,o=Xt.change(i,e?zl[e]:null,jl);i!==o&&(r.className=o,e&&n&&(r.classList.remove(n),r.getBoundingClientRect(),r.classList.add(n)))}}setHoverTarget(e){this.hoverTarget=e}syncHoverListeners(){var e;const n=this,r=n.hoverRootElement,i={element:r,thisObj:n,mouseover:"onHoverMouseOver",mouseout:"onHoverMouseOut"};(n.hoverTrack||n.hoverEdges)&&(i.mousemove="onHoverMouseMove"),null==(e=n._hoverRootDetacher)||e.call(n),n._hoverRootDetacher=r&&cn.on(i)}},LoadMaskable_default=e=>class LoadMaskable extends e{static get $name(){return"LoadMaskable"}static get configurable(){return{loadMaskDefaults:{useTransition:!0,showDelay:1e3},loadMaskError:{icon:"b-icon b-icon-warning",autoClose:3e3,showDelay:0},loadMask:{text:"L{GridBase.loadMask}"},syncMask:{text:"L{GridBase.syncMask}"},localizableProperties:["loadMask.text","syncMask.text"],testConfig:{loadMaskError:{icon:"b-icon b-icon-warning",autoClose:500,showDelay:0}}}}applyLoadMask(){const e=this,{loadMask:n}=e;return n&&(e.masked=ts.mergeConfigs(e.loadMaskDefaults,n)),e.masked}applyMaskError(e){const{loadMaskError:n,masked:r}=this;return!1===n?r.hide():r&&(Et.assign(r.errorDefaults,n),r.error=e),r}get widgetClass(){}},Bl={constructor:1,prototype:1,name:1,length:1,arguments:1,caller:1,callee:1,__proto__:1},Hl=class{static apply(e){if(!e.target)throw new Error("Override must specify what it overrides, using static getter target");if(!e.target.class)throw new Error("Override must specify which class it overrides, using target.class");if(!this.shouldApplyOverride(e))return!1;const n=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(e.prototype);return n.splice(n.indexOf("target"),1),this.internalOverrideAll(e.target.class,n,e),this.internalOverrideAll(e.target.class.prototype,r,e.prototype),!0}static internalOverrideAll(e,n,r){Reflect.ownKeys(r).forEach((i=>{if(n.includes(i)&&!Bl[i]){const n=Object.getOwnPropertyDescriptor(r,i);let o=e,s=null;for(;!s&&o;)s=Object.getOwnPropertyDescriptor(o,i),s||(o=Object.getPrototypeOf(o));s&&this.internalOverride(o,i,n,s)}}))}static internalOverride(e,n,r,i){(e._overridden=e._overridden||{})[n]=e[n],i.get?Object.defineProperty(e,n,{enumerable:!1,configurable:!0,get:r.get}):e[n]=r.value}static shouldApplyOverride(e){const n=e.target;if(!n.maxVersion&&!n.minVersion)return!0;if(!n.product)throw new Error("Override must specify product when using versioning");return(!n.maxVersion||!A[n.product].isNewerThan(n.maxVersion))&&(!n.minVersion||!A[n.product].isOlderThan(n.minVersion))}};Hl._$name="Override";var{defineProperty:Vl}=Object,{hasOwn:Nl}=Et,ql=Symbol("fencible"),Wl=[],distinct=e=>Array.from(new Set(e)),parseNames=e=>e?distinct(w.split(e)):Wl,fenceMethod=(e,n,r)=>{!0===r&&(r=n),Et.isObject(r)||(r={all:r});let i=parseNames(r.any);const o=parseNames(r.all),s=r.lock?parseNames(r.lock):distinct(o.concat(i)),a=n+"Impl";i=i.length?i:null,!e[a]&&Vl(e,a,{configurable:!0,value:e[n]}),Vl(e,n,{configurable:!0,value:function(...e){const n=this,r=Nl(n,ql)?n[ql]:n[ql]={},isFree=e=>!r[e];if(o.every(isFree)&&(!i||i.some(isFree)))try{return s.forEach((e=>r[e]=(r[e]||0)+1)),n[a](...e)}finally{s.forEach((e=>--r[e]))}}})},Fencible_default=e=>{var n;return __publicField(n=class extends(e||re){static setupFenced(e){let{fenced:n}=e;const r=n.static,i=[];r&&(n={...n},delete n.static,i.push([r,e])),i.push([n,e.prototype]);for(const[e,n]of i)for(const r in e)fenceMethod(n,r,e[r])}get widgetClass(){}},"$name","Fencible"),__publicField(n,"declarable",["fenced"]),n},Ul=6e4,Gl=36e5,Yl=864e5,Kl=/(\d+)?:?(\d*)/,Xl=class{static format(e){const n=Math.floor(e/Gl),r=Math.floor(e/Ul)%60;return`${n}:${r<10?"0":""}${r}`}static parse(e){const n=typeof e;if("string"===n){const n=Kl.exec(e);e=Number(n[1]||0)*Gl+Number(n[2]||0)*Ul}else"number"!==n?e=Ct.getTimeOfDay(e):e<=24&&(e*=Gl);return Math.min(Math.max(Math.floor(e),0),Yl)}constructor(e){let n,r,i=0;(null==e?void 0:e.isDayView)?(i=e.dayStartShift,n=e.dayStartTime,r=e.dayEndTime):"number"==typeof e?i=n=r=e:e&&(i=e.startShift,n=e.timeStart,r=e.timeEnd),this.startShift=i=Xl.parse(i||0),this.timeEnd=(null==r?(i+Yl)%Yl:Xl.parse(r))||Yl,this.timeStart=null==n?i:Xl.parse(n)}get startHour(){return Math.floor(this.timeStart/Gl)}get endHour(){return Math.floor(this.timeEnd/Gl)}get startTimeOffsetMs(){const{startShift:e,timeStart:n}=this;return n<e?Yl-e+n:n-e}get today(){return this.startOfDay(new Date)}ceil(e){const n=this.startOfDay(e);return n<e&&n.setDate(n.getDate()+1),n}contains(e){return!this.outside(e)}dateKey(e){return e=this.shiftDate(e,-1),Ct.makeKey(e)}dayOfDate(e){return this.shiftDate(Ct.clearTime(e))}dayOfWeek(e){return(e=this.shiftDate(e,-1)).getDay()}delta(e,n="ms"){const{timeStart:r}=this,i=Xl.parse(e),o=(this.startShift&&i<r?i+Yl:i)-r;return"ms"===n?o:Ct.as(n,o,"ms")}duration(e="ms"){const{timeStart:n,timeEnd:r}=this,i=n<r?r-n:Yl-n+r;return"ms"===e?i:Ct.as(e,i,"ms")}equals(e){return this.startShift===(null==e?void 0:e.startShift)&&this.timeStart===e.timeStart&&this.timeEnd===e.timeEnd}intersects(e,n){const r=this,{timeStart:i,timeEnd:o}=r,[s,a]=r._dateRangeArgs(e,n),[l,c]=r.timeRange(s,a);return i<o?l<c?l<o&&i<=c:l<o||i<=c:!(l<c)||l<o||i<=c}isIntraDay(e,n){const[r,i]=this._dateRangeArgs(e,n),o=this.startOfDay(r),s=Yl-Ct.diff(o,i,"ms");return!(s<0)&&(s>0||o<r)}isInterDay(e){return e.allDay||!this.isIntraDay(...arguments)}outside(e){const{startShift:n,timeStart:r,timeEnd:i}=this,o=Xl.parse(e);return r<i?o<r?o<n?1:-1:o<i?0:o<n?-1:1:o<i||o>=r?0:o<n?1:-1}parseKey(e){return this.dayOfDate(Ct.parseKey(e))}shiftDate(e,n=1){const{startShift:r}=this,i=typeof e;return e="number"===i?new Date(e):"string"===i?Ct.parse(e):new Date(e.getTime()),n&&r&&e.setMilliseconds(n>0?r:-r),e}sortEvents(e,n){const r=this.startOfDay(e);return null==n?void 0:n.sort(((e,n)=>{e=e.eventRecord||e,n=n.eventRecord||n;let{startDate:i}=e,{startDate:o}=n;return i?o?(i=i<r?r:i,o=o<r?r:o,i-o||n.endDate-o-(e.endDate-i)):1:-1}))}startOfDay(e){return e=this.shiftDate(e,-1),e=Ct.clearTime(e),e=this.shiftDate(e)}timeRange(e,n){const[r,i]=this._dateRangeArgs(e,n);return[Ct.getTimeOfDay(r),Ct.getTimeOfDay(i)]}toString(){const{startShift:e,timeEnd:n,timeStart:r}=this,i=e?`@${Xl.format(e)}`:"",o=Xl.format(r);return r===n?e?i:o:`${o}-${Xl.format(n)}${i}`}_dateRangeArgs(e,n){return e.isModel?[e.startDate,e.endingDate]:[e,n]}};Xl.MIDNIGHT=new Xl({startShift:0,timeStart:0,timeEnd:24}),Xl.MILLIS_PER_MINUTE=Ul,Xl.MILLIS_PER_HOUR=Gl,Xl.MILLIS_PER_DAY=Yl,Xl._$name="DayTime";var Zl=class extends(Events_default(re)){static get configurable(){return{date:{$config:{equal:"date"},value:Ct.clearTime(new Date)},month:null,year:null,weekStartDay:null,hideNonWorkingDays:null,nonWorkingDays:null,sixWeeks:null}}configure(e){super.configure(e),this.updateDayNumbers(),e.date&&(this.date=e.date),this.generation=0}changeDate(e){if(!this.isConfiguring){if(e="string"==typeof e?Ct.parse(e,"YYYY-MM-DD"):new Date(e),isNaN(e))throw new Error("Month date ingestion must be passed a Date, or a valid YYYY-MM-DD date string");return e}}updateDate(e,n){const r=this,{dayColumnIndex:i,weekCount:o}=r,s=Ct.getFirstDateOfMonth(e),a=Ct.getLastDateOfMonth(s),l=i[s.getDay()],c=i[a.getDay()],d=!n||e.getFullYear()!==n.getFullYear(),u=!n||e.getMonth()!==n.getMonth(),h=r.eventListeners&&(n?e.getDate()!==n.getDate()|(r.getWeekId(e)!==r.getWeekId(n))<<1|u<<2|d<<3:15);if(r._year=e.getFullYear(),r._month=e.getMonth(),r.startDayOfMonth=1-l,r.endDayOfMonth=a.getDate()+(6-c),r.sixWeeks&&(r.endDayOfMonth+=7*(6-r.weekCount)),r.weekBase&&!d||r.calculateWeekBase(),(u||d)&&r.generation++,h){const i={newDate:e,oldDate:n,changes:{d:!0,w:Boolean(2&h),m:Boolean(12&h),y:Boolean(8&h),r:r.weekCount!==o}};r.trigger("dateChange",i),2&h&&r.trigger("weekChange",i),12&h&&r.trigger("monthChange",i),8&h&&r.trigger("yearChange",i)}}calculateWeekBase(){const e=this,{dayColumnIndex:n}=e,r=new Date(e.year,0,1),i=new Date(e.year,11,31),o=e.month?e.getOtherMonth(r):e;e.dayColumnIndex[r.getDay()]>3?e.weekBase=o.startDate:e.weekBase=new Date(e.year,0,o.startDayOfMonth-7);const s=Math.floor(Ct.diff(e.weekBase,i,"day")/7);e.has53weeks=53===s&&n[i.getDay()]>2}getWeekStart(e){if("number"==typeof e)return Ct.add(this.weekBase,7*Math.max(e,1),"day");const n=this,[r,i]=e;return r===n.year?n.getWeekStart(i):n.getOtherMonth(new Date(r,0,1)).getWeekStart(i)}getOtherMonth(e){const n=this,r=n===Jl?new Zl(null):Jl;return r.configure({weekBase:null,weekStartDay:n.weekStartDay,nonWorkingDays:n.nonWorkingDays,hideNonWorkingDays:n.hideNonWorkingDays,sixWeeks:n.sixWeeks,date:new Date(e.getFullYear(),0,1)}),r.date=e,r.updateDate(r.date,r.date),r}changeYear(e){const n=new Date(this.date);n.setFullYear(e),this.date=n}changeMonth(e){const n=new Date(this.date);n.setMonth(e),this.date=n}get weekStartDay(){return"number"==typeof this._weekStartDay?this._weekStartDay:Ct.weekStartDay}updateWeekStartDay(){const e=this;e.updateDayNumbers(),!e.isConfiguring&&e.date&&(e.weekBase=null,e.updateDate(e.date,e.date))}get nonWorkingDays(){return this._nonWorkingDays||Ct.nonWorkingDays}changeNonWorkingDays(e){return Et.assign({},e)}updateNonWorkingDays(){this.updateDayNumbers()}updateHideNonWorkingDays(){this.updateDayNumbers()}updateSixWeeks(){this.isConfiguring||this.updateDate(this.date,this.date)}get dayCount(){return this.endDayOfMonth+1-this.startDayOfMonth}get weekCount(){return this.dayCount/7}get startDate(){const e=this;if(null!=e.year&&null!=e.month&&null!=e.startDayOfMonth)return new Date(e.year,e.month,e.startDayOfMonth)}get endDate(){const e=this;if(null!=e.year&&null!=e.month&&null!=e.startDayOfMonth)return new Date(e.year,e.month,e.endDayOfMonth)}eachDay(e){for(let n=this.startDayOfMonth;n<=this.endDayOfMonth;n++)e(new Date(this.year,this.month,n))}eachWeek(e){const n=this,{weekCount:r}=n;for(let i=n.startDayOfMonth,o=0;o<r;o++){const r=[],o=n.getWeekNumber(new Date(n.year,n.month,i));for(let e=0;e<7;e++,i++)r.push(new Date(n.year,n.month,i));e(o,r)}}getWeekNumber(e){const n=this;if((e=Ct.clearTime(e)).getFullYear()!==n.year)return n.getOtherMonth(new Date(e.getFullYear(),0,1)).getWeekNumber(e);let r=Math.floor(Ct.diff(n.weekBase,e,"day")/7),i=e.getFullYear();return r?(53!==r||n.has53weeks?r>53&&(r%=52):(r=1,i++),[i,r]):n.getOtherMonth(new Date(n.year-1,0,1)).getWeekNumber(new Date(n.year,0,0))}getWeekId(e){const n=this.getWeekNumber(e);return 100*n[0]+n[1]}getCellData(e,n,r=Xl.MIDNIGHT){const i=this,o=e.getDay(),s=i.visibleDayColumnIndex[o],a=i.nonWorkingDays[o],l=i.hideNonWorkingDays&&a;return(e<i.startDate||e>i.endDate)&&(i.month=e.getMonth()),{day:o,dayTime:r,visibleColumnIndex:s,isNonWorking:a,week:i.getOtherMonth(e).getWeekNumber(e),key:Ct.format(e,"YYYY-MM-DD"),columnIndex:i.dayColumnIndex[o],date:new Date(e),dayEnd:r.duration("s"),tomorrow:r.dayOfDate(Ct.add(e,1,"day")),isOtherMonth:Math.sign(e.getMonth()+12*e.getFullYear()-(n.month+12*n.year)),visible:!l&&e>=n.startDate&&e<Ct.add(n.endDate,1,"day"),isRowStart:0===s,isRowEnd:s===i.visibleColumnCount-1}}updateDayNumbers(){const e=this,{weekStartDay:n,nonWorkingDays:r,hideNonWorkingDays:i}=e,o=e.dayColumnIndex=[],s=e.canonicalDayNumbers=[],a=e.visibleDayColumnIndex=[];let l=0;for(let e=0;e<7;e++){const c=(n+e)%7;s[e]=c,o[c]=e,i&&r[c]||(a[c]=l++)}e.visibleColumnCount=l,e.weekLength=i?7-Et.keys(r).length:7}},Ql=Zl;__publicField(Ql,"$name","Month");var Jl=new Ql(null);Ql._$name="Month";var ec=0,tc=new WeakMap,memo=e=>{const n=new Map;return(...r)=>{const i=((...e)=>e.map((e=>{let n;return e&&"object"==typeof e||"function"==typeof e?(n=tc.get(e),void 0===n&&(n=++ec,tc.set(e,n))):n=String(e),n})).join("-"))(r);let o=n.get(i);return void 0===o&&(o=e(...r),n.set(i,o)),o}},memoCps=e=>{const n=new Map,entryContinuations=e=>e[0],entryResults=e=>e[1],pushContinuation=(e,n)=>entryContinuations(e).push(n);return(r,i)=>{const o=(e=>{let r=n.get(e);return void 0===r&&(r=[[],[]],n.set(e,r)),r})(r);(e=>!entryResults(e).length&&!entryContinuations(e).length)(o)?(pushContinuation(o,i),e(r,(e=>{((e,n)=>entryResults(e).some((e=>Et.isEqual(e,n))))(o,e)||(((e,n)=>{entryResults(e).push(n)})(o,e),entryContinuations(o).forEach((n=>n(e))))}))):(pushContinuation(o,i),entryResults(o).forEach((e=>i(e))))}},nc=Symbol("success"),rc=Symbol("failure"),success=(e,n)=>[nc,e,n],failure=e=>[rc,e],isSuccess=e=>e.length&&e[0]===nc,resolveParser=e=>"function"!=typeof e||e.length?e:e(),ic=memo((e=>memoCps(((n,r)=>r(success(e,n)))))),oc=memo((e=>memoCps(((n,r)=>{const i=Math.min(e.length,n.length),o=n.substr(0,i),s=n.substr(i);r(o===e?success(o,s):failure(s))})))),bind=(e,n)=>(r,i)=>resolveParser(e)(r,(e=>{if(isSuccess(e)){const[,r,o]=e;n(r)(o,i)}else i(e)})),sc=memo(((...e)=>{const n=memo(((e,n)=>memoCps(bind(e,(e=>bind(n,(n=>ic([].concat(e,n)))))))));return e.reduce(n,ic([]))})),ac=memo(((...e)=>memoCps(((n,r)=>e.forEach((e=>resolveParser(e)(n,r))))))),lc=memo((e=>(n,r)=>{const i=new RegExp(`^${e}`).exec(n);if(i){const e=i[0],o=n.substr(e.length);r(success(e,o))}else r(failure(n))})),cc=memo(((e,n)=>bind(e,((...e)=>ic(n(...[].concat.apply([],e))))))),runParser=(e,n)=>{const r=[];return e(n,(e=>{if(isSuccess(e)){const[,,n]=e;""===n&&r.push(e)}})),r},dc={memo,memoCps,success,failure,isSuccess,resolveParser,succeed:ic,string:oc,bind,seq:sc,alt:ac,regexp:lc,red:cc,runParser,defineParser:e=>(n,r)=>r?resolveParser(e)(n,r):runParser(resolveParser(e),n)},uc=class extends(Delayable_default(re)){static get configurable(){return{element:null,zoneWidth:50,scrollSpeed:5,direction:"both",startScrollDelay:500,stopScrollWhenPointerOut:!1,testConfig:{scrollSpeed:2,startScrollDelay:100},activeScroll:{$config:["lazy"],value:{}},monitoring:{$config:["lazy","nullify"],value:!0},owner:null}}changeMonitoring(e,n){return null==n||n.clear(),new Map}doDestroy(){this.stopMonitoring(),super.doDestroy()}get isScrolling(){return 0!==Object.keys(this.activeScroll).length}get rtl(){var e;return null==(e=this.owner)?void 0:e.rtl}startMonitoring(e={}){const n=this,{element:r,direction:i}=n,{scrollables:o=[],direction:s=i,callback:a}=e,l=[];return o.length||o.push({element:r}),o.forEach((e=>{const i=e.element;"string"==typeof i?Gn.forEachSelector(r,i,(r=>{n.createMonitor(r,e.direction||s,e.callback||a),l.push(r)})):(n.createMonitor(i,e.direction||s,e.callback||a),l.push(i))})),function detacher2(){var e;null==(e=n.stopMonitoring)||e.call(n,l)}}createMonitor(e,n,r){const{monitoring:i}=this;i.has(e)||i.set(e,new hc({scrollManager:this,element:e,direction:n,callback:r}))}stopMonitoring(e){const n=this,{monitoring:r}=n;if(e=oe.asArray(e),r){if(!e)return void r.forEach((e=>n.stopMonitoring(e.element)));e.forEach((e=>{const n=r.get(e);e.classList.remove("b-scrolling"),n&&(n.destroy(),r.delete(e))}))}}requestScroll(e,n){const{activeScroll:r}=this;return(!(e in r)||r[e]===n)&&(r[e]=n,!0)}releaseScroll(e){const{activeScroll:n={}}=this;Object.keys(n).forEach((r=>{n[r]===e&&delete n[r]}))}getRelativeScroll(e,n="left"){let r=0;return this.monitoring.forEach(((i,o)=>{Gn.isDescendant(o,e)&&(r+="left"===n?i.scrollRelativeLeft:i.scrollRelativeTop)})),r}},hc=class extends re{construct(e){const{element:n}=e,r=n.scrollLeft,i=n.scrollTop;Object.assign(e,{startScrollLeft:r,startScrollTop:i}),super.construct(e),cn.on({element:n,scroll:"onElementScroll",pointermove:"onMouseMove",capture:!0,thisObj:this}),cn.on({element:n,pointerleave:"onPointerLeave",thisObj:this})}doDestroy(){this.stopScroll(),super.doDestroy()}startScroll(){this.scrolling=!0,this.performScroll()}stopScroll(){const e=this;e.scrolling=!1,e.scrollRequested&&(e.scrollManager.cancelAnimationFrame(e.frameId),e.scrollRequested=!1),e.scrollManager.clearTimeout(e.scrollTimeout),e.scrollManager.releaseScroll(e),e.scrollTimeout=null}onPointerLeave(){this.scrollManager.stopScrollWhenPointerOut&&this.stopScroll()}onMouseMove(e){const n=this,{scrollManager:r}=n,i=n.element.getBoundingClientRect(),o=r.zoneWidth,s=r.scrollSpeed;if(n.scrollDeltaX=n.scrollDeltaY=0,"vertical"!==n.direction){const{scrollLeft:a,scrollWidth:l,clientWidth:c}=n.element;r.rtl?e.clientX<i.left+o&&l+a-c>=1?n.scrollDeltaX=-Math.round((o+(i.left-e.clientX))/s)-1:e.clientX>i.right-o&&a<0&&(n.scrollDeltaX=Math.round((o-(i.right-e.clientX))/s)+1):e.clientX>i.right-o&&l-a-c>=1?n.scrollDeltaX=Math.round((o-(i.right-e.clientX))/s)+1:e.clientX<i.left+o&&a>0&&(n.scrollDeltaX=-Math.round((o+(i.left-e.clientX))/s)-1)}if("horizontal"!==n.direction){const{scrollTop:r,scrollHeight:a,clientHeight:l}=n.element;e.clientY>i.bottom-o&&a-r-l>=1?n.scrollDeltaY=Math.round((o-(i.bottom-e.clientY))/s)+1:e.clientY<i.top+o&&r>0&&(n.scrollDeltaY=-Math.round((o+(i.top-e.clientY))/s)-1)}0===n.scrollDeltaX||r.requestScroll("horizontal",n)||(n.scrollDeltaX=0),0===n.scrollDeltaY||r.requestScroll("vertical",n)||(n.scrollDeltaY=0),0===n.scrollDeltaX&&0===n.scrollDeltaY?n.scrolling&&n.stopScroll():n.scrollTimeout||(n.scrollTimeout=r.setTimeout((()=>n.startScroll()),r.startScrollDelay))}performScroll(){const e=this,{element:n}=e;if(e.scrolling&&!e.scrollRequested){if(0!==e.scrollDeltaX){const r=n.scrollLeft,i=Math.min(r+e.scrollDeltaX,n.scrollWidth-n.clientWidth);i!==r&&(n.scrollLeft=i)}if(0!==e.scrollDeltaY){const r=n.scrollTop,i=Math.min(r+e.scrollDeltaY,n.scrollHeight-n.clientHeight);i!==r&&(n.scrollTop=i)}e.scrollRequested=!0,e.frameId=e.scrollManager.requestAnimationFrame((()=>{e.scrollRequested=!1,e.performScroll(e)}))}}onElementScroll(){var e,n;null==(n=null==(e=this.config)?void 0:e.callback)||n.call(this.thisObj||this.scrollManager,this)}get scrollLeft(){return this.element.scrollLeft}get scrollTop(){return this.verticalElement?this.verticalElement.scrollTop:this.element.scrollTop}get scrollRelativeLeft(){return this.scrollLeft-this.startScrollLeft}get scrollRelativeTop(){return this.scrollTop-this.startScrollTop}getRelativeLeftScroll(e){return this.scrollManager.getRelativeScroll(e,"left")}getRelativeTopScroll(e){return this.scrollManager.getRelativeScroll(e,"top")}};uc._$name="ScrollManager";var gc={left:!0,right:!0,top:!0,bottom:!0,transform:!0},pc={true:1,false:1},mc=Promise.resolve(),fc=class extends _a{static get $name(){return"Tooltip"}static get type(){return"tooltip"}static get configurable(){return{mouseOffsetX:15,mouseOffsetY:15,html:{$config:{equals:()=>!1}},getHtml:null,forElement:null,trackMouse:null,updateContentOnMouseMove:!1,forSelector:null,hideOnDelegateChange:null,anchorToTarget:!0,showOnHover:!1,hoverDelay:500,autoShow:!1,dismissDelay:0,hideDelay:500,loadingMsg:"Loading...",allowOver:null,anchor:!0,align:{align:"b-t",minHeight:300},axisLock:!0,activeTarget:null,testConfig:{hideDelay:100,hoverDelay:100,showAnimation:null,hideAnimation:null}}}afterConfigure(){const e=this,{forSelector:n}=e;n&&(e.showOnHover=!0,e.forElement||(e.anchorToTarget||(e.trackMouse=!0),e.forElement=e.rootElement.host||e.rootElement)),super.afterConfigure(),e.forElement&&e.showOnHover&&(e.pointerOverOutDetacher=cn.on({element:e.forElement,pointerover:"internalOnPointerOver",pointerout:"internalOnPointerOut",thisObj:e}))}doDestroy(){var e;null==(e=this.pointerOverOutDetacher)||e.call(this),super.doDestroy()}set focusOnToFront(e){super.focusOnToFront=e}get focusOnToFront(){return super.focusOnToFront&&Gn.usingKeyboard}get focusElement(){const e=super.focusElement;if(e!==this.element)return e}get anchorToTarget(){return this._anchorToTarget&&!this.trackMouse}get anchor(){return super.anchor&&!this.trackMouse}set anchor(e){super.anchor=e}onDocumentMouseDown({event:e}){const n=this,{triggeredByEvent:r}=n;r&&Gn.isTouchEvent&&e.pageX===r.pageX&&e.pageY===r.pageY&&n.activeTarget.contains(e.target)&&performance.now()-r.timeStamp<500||(n.abortDelayedShow(),super.onDocumentMouseDown({event:e}))}internalOnPointerOver(e){const n=this,{target:r,relatedTarget:i}=e,{forElement:o,forSelector:s,activeTarget:a}=n;let l;if(!(n.disabled||n.owner&&!n.owner.showTooltipWhenDisabled&&n.owner.disabled||n.allowOver&&n.element.contains(r))){if(s){if(l=n.filterTarget(r),(null==a?void 0:a.contains(r))&&a.contains(i)&&l===a)return;if(l&&(null==i?void 0:i.closest(s))===l)return}else{if(o.contains(i))return;l=o}l?n.handleForElementOver(e,l):a&&n.handleForElementOut()}}filterTarget(e){return e.closest(this.forSelector)}onTransitionEnd(e){var n;const r=this,{currentOverElement:i}=fc;if(gc[e.propertyName]){if(r.allowOver&&r.element.contains(i))return;(null==(n=r.activeTarget)?void 0:n.contains(i))&&!r.trackMouse&&r.realign()}}async handleForElementOver(e,n){const r=this,{activeTarget:i,hideOnDelegateChange:o,anchorToTarget:s}=r,a=n!==i,l=a&&o;if(!1===r.trigger("pointerOver",{event:e,target:n}))r.internalOnPointerOut(e);else{if(r.triggeredByEvent=e,r.hasTimeout("hide")&&(r.abortDelayedHide(),!a))return;if(!o&&r.element.classList.contains("b-hiding")&&r.cancelHideShowAnimation(),!r._hidden&&l&&r.hide(!1),r.activeTarget=n,r.isVisible){const e=r.updateContent();if(M.isPromise(e)&&!r.loadingMsg&&await e,!1===r.trigger("beforeShow"))return r.hide();r.alignTo({[s?"target":"position"]:s?n:"mouse",overlap:!(s&&r.anchor)}),r.trigger("show"),r.afterShowByTarget()}else r.delayShow(n)}}async delayShow(e){var n;const r=this;if((null==(n=r.currentAnimation)?void 0:n.showing)&&r.cancelHideShowAnimation(),r.isVisible||r.hasTimeout("show"))r.isVisible&&r.showByTarget(e);else if(!r.hoverDelay||r.forSelector&&Date.now()-r.lastHidden<r.quickShowInterval){const n=r.updateContent();M.isPromise(n)&&!r.loadingMsg&&await n,r.showByTarget(e)}else r.addDocumentMouseDownListener(),r.listeningForMouseMove||r.anchorToTarget||(r.mouseMoveRemover=cn.on({element:r.rootElement,mousemove:"onMouseMove",thisObj:r})),r.setTimeout((async()=>{if(e.isConnected){const n=r.updateContent();M.isPromise(n)&&!r.loadingMsg&&await n,r.showByTarget(e)}}),r.triggeredByEvent&&"pointerover"!==r.triggeredByEvent.type?0:r.hoverDelay,"show")}changeAllowOver(e){return this.inAfterShow||(this.configuredAllowOver=e),e}updateAllowOver(e){var n;const r=this,{element:i}=r;i.classList.toggle("b-allow-over",Boolean(e)),e?r.allowOverlisteners=cn.on({element:i,mouseenter:"onOwnElementMouseEnter",mouseleave:"internalOnPointerOut",thisObj:r}):null==(n=r.allowOverlisteners)||n.call(r)}updateContent(){const e=this;if(e.getHtml){const n=e.callback(e.getHtml,e,[{tip:e,element:e.element,activeTarget:e.activeTarget,event:e.triggeredByEvent}]);return e.html=n,n}}get hasContent(){return Boolean(Gn.isReactElement(this._html)||""!==this._html&&"string"==typeof this.html&&this.html.length||this.items.length)}internalBeforeShow(){return(this.updateContentOnMouseMove||this.hasContent)&&!this.disabled}showAsyncMessage(e=this.optionalL(this.loadingMsg)){e&&(this.html=`\n                <div class="b-tooltip-loading">\n                    <i class="b-icon b-icon-spinner"></i>\n                    ${e}\n                </div>\n            `)}showByTarget(e){var n;const r=this,{anchorToTarget:i}=r;r.mouseMoveRemover=null==(n=r.mouseMoveRemover)?void 0:n.call(r),r.showBy({[i?"target":"position"]:i?e:"mouse",overlap:!(i&&r.anchor)})}afterShowByTarget(){const e=this,{dismissDelay:n}=e;e.abortDelayedShow(),n&&e.setTimeout("hide",n),e.toFront(),e.mouseMoveRemover||!e.trackMouse&&!e.updateContentOnMouseMove||(e.mouseMoveRemover=cn.on({element:e.rootElement,pointermove:"onMouseMove",thisObj:e})),e.inAfterShow=!0,e.allowOver=e.allowOver||0!=e.configuredAllowOver&&e.childItems.some((e=>e.isVisible&&!e.disabled&&e.focusElement)),e.inAfterShow=!1}updateActiveTarget(e,n){e&&!this.isConfiguring&&this.trigger("overTarget",{newTarget:e,lastTarget:n})}internalOnPointerOut(e){var n;const r=this,i=e.relatedTarget;r.allowOver&&r.element.contains(i)||r.element.contains(e.target)&&(null==(n=r.activeTarget)?void 0:n.contains(i))||r.activeTarget&&!r.activeTarget.contains(i)&&r.handleForElementOut()}handleForElementOut(){const e=this,{hideDelay:n}=e;!1!==e.trigger("pointerOut")?(e.abortDelayedShow(),e.isVisible&&!1!==n&&(e.abortDelayedHide(),n>0?e.setTimeout("hide",n):e.hide())):e.activeTarget=null}show(e){const n=this;!e&&n.forElement&&n.anchorToTarget&&!n.forSelector?n.showByTarget(n.forElement):super.show(...arguments),n.isVisible&&(n.afterShowByTarget(),!n.forElement||n.transitionEndDetacher||n._hidden||(n.transitionEndDetacher=cn.on({element:n.forElement,transitionend:"onTransitionEnd",thisObj:n})))}hide(){var e,n;const r=this;if(r.abortDelayedShow(),r._hidden)return mc;{r.abortDelayedHide();const i=super.hide(...arguments);return r.lastHidden=Date.now(),r.activeTarget=null,null==(e=r.mouseMoveRemover)||e.call(r),r.mouseMoveRemover=null,null==(n=r.transitionEndDetacher)||n.call(r),r.transitionEndDetacher=null,i}}abortDelayedShow(){var e,n,r;const i=this;i.hasTimeout("show")&&(null==(e=i.mouseDownRemover)||e.call(i),i.mouseDownRemover=null,i.clearTimeout("show"),null==(n=i.mouseMoveRemover)||n.call(i),i.mouseMoveRemover=null,null==(r=i.transitionEndDetacher)||r.call(i),i.transitionEndDetacher=null)}abortDelayedHide(){this.clearTimeout("hide")}realign(){const e=this,n=e.lastAlignSpec;e.isConfiguring||e.isVisible||!(null==n?void 0:n.targetOutOfView)||(n.allowTargetOut||Gn.isInView(n.target,!1,e))&&(e.show(),n.targetOutOfView=!1),super.realign()}alignTo(e){const n=this,{mouseOffsetX:r,mouseOffsetY:i}=n;if(!n.isVisible)return;let o;n.anchorToTarget||"mouse"!==e.position||(o=new Zt(n.triggeredByEvent.pageX-globalThis.scrollX,n.triggeredByEvent.pageY-globalThis.scrollY),e.position=new Zt(o.x+n.mouseOffsetX*(n.rtl?-1:1),o.y+n.mouseOffsetY)),!e||n.triggeredByEvent&&n.element.contains(n.triggeredByEvent.target)||e.nodeType===Node.ELEMENT_NODE&&(e={target:e}),super.alignTo(e),o&&n.lastAlignSpec.result.inflate(5).contains(o)&&(n.lastAlignSpec.position="mouse",n.mouseOffsetY=-i-n.height,n.mouseOffsetX=-r-n.width,n.realign(),n.mouseOffsetY=i,n.mouseOffsetX=r)}changeHtml(e){const n=this;return M.isPromise(e)?(n.showAsyncMessage(),e.target=n.activeTarget,void e.then((r=>{e.target===n.activeTarget&&(n.html=r)}))):("object"!=typeof e&&(e=null!=e?n.optionalL(String(e)):""),e)}updateHtml(e,n){const r=this;let i=""===e;i||(super.updateHtml(e,n),r.hasContent?(r.isVisible&&r.realign(),M.isPromise(e)||r.trigger("innerHtmlUpdate",{value:e})):i=!0),i&&r.hide()}onMouseMove(e){const n=this,{forElement:r,activeTarget:i}=n,o=n.hasTimeout("hide"),s=e.target;if(n.triggeredByEvent=e,!n._hidden){let a;const l=!(null==i?void 0:i.contains(s))&&n.forSelector&&i&&!o&&s.nodeType===Node.ELEMENT_NODE&&!s.matches(n.forSelector)&&!(n.allowOver&&n.element.contains(s)),c=(null==r?void 0:r.document)?r.document.documentElement:r,d=c&&(c.contains?c.contains(s):16&c.compareDocumentPosition(s));if(l&&(a=n.handleForElementOut()),a||!o||d){if(n.dismissDelay&&!o&&n.setTimeout("hide",n.dismissDelay),n.updateContentOnMouseMove&&n.getHtml&&(n.html=n.callback(n.getHtml,n,[{tip:n,element:n.element,forElement:i,event:e}]),!n.html))return void n.hide();n.trackMouse&&n.alignTo({position:"mouse",ignorePageScroll:!0})}}}onOwnElementMouseEnter(e){this.abortDelayedHide()}static getSharedTooltip(e,n){var r,i,o;let s=null==(i=null==(r=e.bryntum)?void 0:r.tooltip)?void 0:i.get(fc);if(!s&&!n){(null==(o=e.bryntum)?void 0:o.tooltip)||Et.setPath(e,"bryntum.tooltip",new Map);const n=e.bryntum.tooltip;n.set(fc,!0),s=new fc({forElement:e,rootElement:e,forSelector:"[data-btip]",resetCfg:{},isShared:!0,cls:"b-tooltip-shared",internalListeners:{pointerOver({source:e,target:n}){for(const n in e.resetCfg)"listeners"===n?e.un(e.resetCfg[n].set):"html"!==n&&(e[n]=e.resetCfg[n].was);e.resetCfg={};const r=bs.getById(n.id),i=(null==r?void 0:r.tipConfig)||e.gatherDataConfigs(n.dataset);if(r&&r.element!==n||!r&&n.matches(".b-widget")||(null==r?void 0:r.disabled)&&!r.showTooltipWhenDisabled)return!1;e.owner=r;for(const n in i)e.resetCfg[n]={set:i[n],was:e[n]},"listeners"===n?e.ion(i[n]):e[n]=i[n]},hide({source:e}){e.owner=null}},gatherDataConfigs(e){const n=this,r={};for(const i in e)if(i.startsWith("btip"))if(i.length>4){const o=w.uncapitalize(i.substr(4));if(o in n.getDefaultConfiguration()){const n=e[i];r[o]=pc[n]?"true"===n:isNaN(n)?n:parseInt(n,10)}}else r.html=e[i];return r},filterTarget(e){const n=e.closest(this.forSelector);if(n)return n;if(fc.showOverflow)for(;(null==e?void 0:e.nodeType)===Element.ELEMENT_NODE;){if("ellipsis"===Gn.getStyleValue(e,"text-overflow")&&e.clientWidth<e.scrollWidth)return this.html=w.encodeHtml(e.textContent),e;e=e.parentNode}}}),cn.on({element:e,mouseenter:e=>fc.currentOverElement=e.target,keydown:e=>fc.currentOverElement=e.target,capture:!0,thisObj:s}),n.set(fc,s)}return s}static encodeConfig(e){const n={};if("string"==typeof e)n.btip=e;else for(const r in e)n[`btip${"html"===r?"":w.capitalize(r)}`]=e[r];return n}};fc.initClass(),Object.defineProperty(bs,"tooltip",{get:()=>fc.getSharedTooltip(document.body)}),bs.Tooltip=fc,fc._$name="Tooltip";var bc=class extends Fl{static get type(){return"tip"}static get configurable(){return{align:"t10-b50",offset:20,tooltip:{$config:["lazy","nullify"],value:{type:"tooltip"}}}}open(){this.getConfig("tooltip")}close(){var e;null==(e=this.tooltip)||e.hide()}dragMove(e){const{offset:n,tooltip:r}=this,{event:i}=e;r&&(r.isVisible||r.show(),r.alignTo({align:this.align,target:new Gt(i.clientX-n,i.clientY-n,2*n,2*n)}))}changeTooltip(e,n){return bs.reconfigure(n,e,this)}};bc.initClass(),bc._$name="DragTipProxy";var Labelable_default=e=>class Labelable extends(e||re){static get $name(){return"Labelable"}static get configurable(){return{label:null,labelPosition:"before",labelCls:null,labelWidth:{value:null,$config:{localeKey:"L{labelWidth}"}}}}get hasLabel(){return Boolean(this.label)}compose(){const{hasLabel:e,labelPosition:n}=this;return{class:{[`b-label-${n}`]:e,"b-has-label":e}}}changeLabel(e){return e||""}setupLabel(e){return Et.assign({tag:"label",for:`${this.id}-input`,class:`b-label b-align-${e.align||"start"}`},e)}updateLabelWidth(e){this.labelElement&&(this.labelElement.style.flex=`0 0 ${Gn.setLength(e)}`,this.inputWrap.style.flexBasis=null==e?"":"auto")}get widgetClass(){}},vc=class extends Rs{static get $name(){return"FieldContainer"}static get type(){return"fieldcontainer"}static get configurable(){return{animation:{duration:300},collapsed:null,collapser:{value:null,$config:"nullify"},syncableConfigs:null,syncConfigTriggers:{$config:{merge:"classList"},value:null},testConfig:{animation:{duration:10}}}}static get delayable(){return{syncChildConfigs:"raf"}}get inline(){var e;return null!=(e=this.owner.inline)?e:1===this.ensureItems().count}changeCollapsed(e){if(this.togglingCollapse)return this.togglingCollapse=!1,e;this.toggleCollapse(Boolean(e))}updateCollapsed(e){var n;this.collapser=null==(n=this.collapser)?void 0:n.destroy(),this.setCollapsedCls(e)}updateCollapser(e,n){n&&null==n.completed&&(n.reverting&&e||n.destroy()),this.setOwnerCls("b-collapsing",e)}get collapsing(){const{collapser:e}=this;return null!=e&&e.collapsed}get collapsingExpanding(){return null!=this.collapser}get expanding(){const{collapser:e}=this;return null!=e&&!e.collapsed}collapse(e){this.toggleCollapse(!0,e)}expand(e){this.toggleCollapse(!1,e)}setCollapsedCls(e){this.setOwnerCls("b-collapsed",e)}setOwnerCls(e,n){var r,i;null==(i=null==(r=this.owner)?void 0:r.element)||i.classList[n?"add":"remove"](e)}syncChildConfigs(){const e=this,{owner:n,syncableConfigs:r}=e;if(r){let i,o;for(i in r)o=r[i](n),e.eachWidget((e=>{e[i]=o}),!1)}n.afterSyncChildConfigs(e)}syncContainer(){const{inline:e,layout:n}=this;this.autoLayout&&(n.horizontal=e,n.justify=e?"center":"stretch")}toggleCollapse(e,n){const r=this,{animation:i,collapser:o,inline:s}=r,{containerWrapElement:a}=r.owner,finalize=n=>{n&&(r.element.style.height="",r.togglingCollapse=!0,r.collapsed=e,r.collapser=null)};if(null==e&&(e=!r.collapsed),!1!==n&&null!==n&&(a&&r.isVisible?(!0===n?n={}:"number"==typeof n&&(n={duration:n}),n=i||n?Et.merge({},i,n):null):n=null),n){if(o&&e!==o.collapsed)r.collapser=o.revert({finalize}),r.collapser.collapsed=e;else if(!o&&e!==r.collapsed){!e&&r.setCollapsedCls(!1);const{element:i}=r,{height:o}=i.getBoundingClientRect(),l=s?1:o;!e&&r.setCollapsedCls(!0),i.style.height=`${o}px`,r.collapser=Fs.run(Et.merge({finalize,element:a,[s?"opacity":"height"]:{from:e?l:0,to:e?0:l}},n)),r.collapser.collapsed=e}}else r.togglingCollapse=!0,r.collapsed=e}};vc.initClass(),vc._$name="FieldContainer";var byWeight=(e,n)=>(e.weight||0)-(n.weight||0),byWeightReverse=(e,n)=>(n.weight||0)-(e.weight||0),yc=[],wc={align:!0,weight:!0},Cc=class extends(bs.mixin(Badge_default,Labelable_default)){static get $name(){return"Field"}static get type(){return"field"}static get configurable(){return{defaultBindProperty:"value",placeholder:null,value:"",name:null,labels:null,required:null,clearable:null,revertOnEscape:null,hint:null,hintHtml:null,inputWidth:null,keyStrokeChangeDelay:0,readOnly:null,editable:!0,defaultAction:"change",triggers:null,highlightExternalChange:!0,localizableProperties:["label","title","placeholder","labelWidth"],autoSelect:!1,autoComplete:"off",spellCheck:null,validateOnInput:!0,inputAttributes:null,inputType:"text",inputAlign:null,attributes:{value:["placeholder","autoComplete","spellCheck","minLength","maxLength","pattern","tabIndex","min","max"],$config:{merge:"distinct"}},nullValue:{$config:null,value:null,default:null},updatedClsDuration:500,inputReadOnly:!1,ariaElement:"input",container:{$config:"nullify",value:null},containerDefaults:{type:"fieldcontainer",syncableConfigs:{disabled:e=>e.disabled},syncConfigTriggers:{disabled:1}},containValues:null,inline:null,testConfig:{updatedClsDuration:10},keyMap:{}}}static get delayable(){return{highlightChanged:"raf"}}doDestroy(){var e,n,r;const i=this,{triggers:o}=i,s=i.isPainted&&Cc.getSharedErrorTooltip(i.rootElement,!0);if(null==(e=i.inputListenerRemover)||e.call(i),null==(n=i.keyListenerRemover)||n.call(i),null==(r=i.container)||r.destroy(),super.doDestroy(),o)for(const e of Object.values(o))e.destroy();(null==s?void 0:s.field)===i&&s.hide()}get childItems(){const{container:e,triggers:n}=this,r=n?Object.values(n):[];return e?[...r,...e.childItems]:r}get invalidValueError(){return"L{invalidValue}"}get errorTip(){return this.constructor.getSharedErrorTooltip(this.rootElement)}static getSharedErrorTooltip(e,n){var r;let i=null==(r=e.bryntum)?void 0:r.errorTooltip;return i||n||(e.bryntum=e.bryntum||{},i=new fc({cls:"b-field-error-tip",forSelector:".b-field.b-invalid .b-field-inner",align:{align:"l-r",monitorTargetMutation:!0},scrollAction:"realign",trapFocus:!1,rootElement:e,onBeforeShow(){const e=this,n=bs.fromElement(e.activeTarget);if(n){const r=n.getErrors();if(r)return e.html=r.join("<br>"),e.field=n,!0}return!1}}),e.bryntum.errorTooltip=i),i}static get errorTip(){return this.getSharedErrorTooltip(document.body)}construct(e){super.construct(e);const n=this;n.keyStrokeChangeDelay&&(n.changeOnKeyStroke=n.buffer(n.internalOnChange,n.keyStrokeChangeDelay))}changeKeyMap(e){var n;const r=this;let i={};e&&(r._fieldKeyMap?Et.assign(i,r._fieldKeyMap):(r._fieldKeyMap=e,Et.assign(i,e)));for(const e in r.triggers)(null==(n=r.triggers[e])?void 0:n.keyMap)&&(i=r.mergeKeyMaps(i,r.triggers[e].keyMap,e));return i}get keyMapSubComponents(){return this.triggers}onFocusIn(e){const n=this;n.valueOnFocus=Et.clone(n.value),n.validOnFocus=!(n.errors&&Object.keys(n.errors).length),super.onFocusIn(e),n.focusing=!0,n.syncInvalid(),n.focusing=!1}onFocusOut(e){super.onFocusOut(e),this.syncRequired(),this.onEditComplete()}onEditComplete(){}get rootUiClass(){return Cc}compose(){this.getConfig("clearable");const e=this,{container:n,innerElements:r,label:i,labels:o,labelCls:s,readOnly:a,triggers:l}=e,c=Et.values(l,((e,n)=>!n)),d=c.filter((e=>"start"===e.align)).sort(byWeight),u=c.filter((e=>"start"!==e.align)).sort(byWeightReverse),h=e.setupLabel.bind(e),g=[...d.map((e=>e.element)),...r,...u.map((e=>e.element))];return{class:{"b-has-start-trigger":d.length,"b-no-input":!r.length,"b-readonly":a,"b-field-container":Boolean(n),"b-field-container-inline":null==n?void 0:n.inline},children:[...(o||yc).filter((e=>e&&"end"!==e.align)).map(h),i?h({reference:"labelElement",class:`b-label b-align-start ${s||""}`,html:i}):null,g.length?{class:"b-field-inner",reference:"inputWrap",children:g}:null,...(o||yc).filter((e=>"end"===(null==e?void 0:e.align))).map(h),...n?[{reference:"containerWrapElement",children:[n.element],class:{"b-field-container-wrap":1}}]:yc]}}updateElement(e,n){var r;const i=this,o=i.initialConfig.value,{input:s}=i;super.updateElement(e,n),null!=o&&(i.value=o),i.syncEmpty(),i.updateInputReadOnly(i.inputReadOnly),i.syncInvalid();const a=s||i.focusElement;null==(r=i.keyListenerRemover)||r.call(i),i.keyListenerRemover=a&&cn.on({element:a,thisObj:i,keydown:"internalOnKeyEvent",keypress:"internalOnKeyEvent",keyup:"internalOnKeyEvent"})}get innerElements(){return[this.inputElement]}get inputElement(){const{attributes:e,inputAttributes:n,id:r,inputCls:i,inputType:o,name:s}=this,a=Et.assign({reference:"input",tag:"input",type:o,name:s||r,id:`${r}-input`,retainElement:!0},n);i&&(a.class=i);for(let n,r,i=e.length;i-- >0;)n=e[i],r=this[n],null!=r&&(a[n]=r);return a}get caretPos(){return this.textSelection[0]}set caretPos(e){this.textSelection=e}get focusElement(){return this.input}get textSelection(){var e;const n=this.input;let r;try{r=[n.selectionStart,n.selectionEnd,n.selectionDirection]}catch(i){r=(null==(e=n.value)?void 0:e.length)||0,r=[r,r]}return r}set textSelection(e){"number"==typeof e?this.select(e,e):this.select(...e)}get hasTextSelection(){const[e,n]=this.textSelection;return e&&n-e>0}getAfterValue(e){const[n,r]=this.textSelection,i=this.input.value;return`${i.substr(0,n)}${e}${i.substr(r||n)}`}select(e,n){const r=this.focusElement;if(r.value.length){if(0===arguments.length)return void this.selectAll();if(!this.supportsTextSelection)return;r.setSelectionRange(e,n)}}moveCaretToEnd(){const e=this.input;if(e.createTextRange){const n=e.createTextRange();n.collapse(!1),n.select()}else this.supportsTextSelection&&this.select(e.value.length,e.value.length)}selectAll(){this.focusElement.select()}syncEmpty(){var e;const{isEmptyInput:n,isEmpty:r,element:i}=this,o=null==(e=this.triggers)?void 0:e.clear,s=n&&r;i&&(o&&o[s?"hide":"show"](),i.classList.toggle("b-empty",s))}updateHint(){this.syncHint()}updateHintHtml(){this.syncHint()}syncHint(){const e=this,{input:n,hint:r,hintHtml:i}=e,o=null==n?void 0:n.parentElement;if(n){let s=i||r;const a=e.hintElement||s&&(e.hintElement=Gn.createElement({parent:o,className:"b-field-hint",nextSibling:n.nextSibling,children:[{className:"b-field-hint-content"}]}));a&&("function"==typeof s&&(s=s({source:e,value:e.value})),a.firstChild[i?"innerHTML":"textContent"]=s||""),e.element.classList[s?"remove":"add"]("b-field-no-hint")}}syncInvalid(){const e=this,{isPainted:n}=e;if(e.updatingInvalid=!0,n){const{isValid:n,element:r,inputWrap:i}=e;if(r.classList[n?"remove":"add"]("b-invalid"),n){const n=e.constructor.getSharedErrorTooltip(e.rootElement,!0);(null==n?void 0:n.isVisible)&&n.field===e&&n.hide()}else{const n=e.errorTip;n&&(e.containsFocus||e.isVisible&&i.contains(fc.currentOverElement))&&(n.activeTarget===i&&n.isVisible?n.onBeforeShow():(n.activeTarget=i,n.showBy(i)))}}e.updatingInvalid=!1}updateEditable(){this.syncInputReadOnly()}syncInputReadOnly(){this.getConfig("readOnly"),this.inputReadOnly=this._readOnly||!1===this.editable}updateInputReadOnly(e){const n=this,{input:r,inputListenerRemover:i}=n;r&&(r.readOnly=e?"readOnly":null,e?n.inputListenerRemover=null==i?void 0:i():i||(n.inputListenerRemover=cn.on({element:r,thisObj:n,focus:"internalOnInputFocus",change:"internalOnChange",input:"internalOnInput"})))}changeReadOnly(e){return Boolean(e)}updateReadOnly(e){this.syncInputReadOnly()}updateClearable(e){const n=this;n.getConfig("triggers"),n.triggers={clear:e&&Et.assign({cls:"b-icon-remove",weight:1e3,key:"Shift+backspace",handler(){n._isUserAction=!0,n.clear(...arguments),n._isUserAction=!1}},e)||null}}changeTriggers(e,n){const r=this,i=r.$triggers||(r.$triggers=new ia({configName:"triggers",factory:Cc.Trigger,inferType:!1,owner:r,created(e){he.after(e,"onConfigChange",((e,{name:n})=>{wc[n]&&r.onConfigChange({name:"triggers",value:i.target})}))},setup(e,n){e.reference=e.ref=n,e.parent=r}}));if(!1===r.stepTriggers&&(e.back||e.forward)&&(delete(e=Et.assign({},e)).back,delete e.forward),i.update(e),r.element&&(r.keyMap=r.keyMap),!n)return i.target}updateInputWidth(e){this.input.style.width=Gn.setLength(e),this.element.classList.add("b-has-width")}updateInputAlign(e){this.input.style.textAlign=e}get isValid(){const e=this;if(!e.disabled){if(e.syncRequired(),e.errors&&Object.keys(e.errors).length)return!1;const n=e.validity;if(n)return n.valid}return!0}get isEmpty(){return null==this.value||""===this.value}get isEmptyInput(){return!this.input||null==this.input.value||""===this.input.value}get validity(){const e=this.input;return null==e?void 0:e.validity}async setValue(e){this.value=e}changeValue(e,n){return null==e&&(e=this.nullValue),this.hasChanged(n,e)?e:(""===e&&this.syncRequired(),n)}updateValue(e,n){const r=this;r.isConfiguring||(r.syncRequired(),r.inputting||r.triggerChange()),r.inputting||(r._lastValue=e),r.syncInputFieldValue(),r.overflowTwin&&!r._overflowTwinSync&&(r._overflowTwinSync=!0,r.overflowTwin.value=e,r._overflowTwinSync=!1)}hasChanged(e,n){return n!==e}syncInputFieldValue(e=!1){const n=this,{input:r,parent:i,inputValueAttr:o,inputValue:s}=n;if(r&&!n.inputting&&r[o]!==s&&(r[o]=s,!n.isConfiguring&&!n.containsFocus&&n.highlightExternalChange)){if(r.classList.remove("b-field-updated"),n.clearTimeout("removeUpdatedCls"),i){const{assigningValues:n}=i;!0!==n&&!1!==(null==n?void 0:n.highlight)||(e=!0)}e||n.highlightChanged()}n.syncEmpty(),n.syncInvalid()}highlightChanged(){this.input.classList.add("b-field-updated"),this.setTimeout("removeUpdatedCls",this.updatedClsDuration)}removeUpdatedCls(){this.input.classList.remove("b-field-updated")}get inputValue(){return null==this.value?"":this.value}get inputValueAttr(){return"value"}get supportsTextSelection(){const e=this.focusElement;return e&&("textarea"===e.tagName.toLowerCase()||e.type&&/text|search|password|tel|url/.test(e.type))}internalOnInputFocus(){this.autoSelect&&this.selectAll()}internalOnChange(e){const n=this;n.hasChanged(n._lastValue,n.value)&&n.isValid&&(n.triggerChange(e,!0),n._lastValue=n.value)}triggerChange(e,n=Boolean(this._isUserAction)){const r=this,{value:i,_lastValue:o,isValid:s}=r;r.syncHint(),r.triggerFieldChange({value:i,oldValue:o,event:e,userAction:n,valid:s}),"change"===r.defaultAction&&r.trigger("action",{value:i,oldValue:o,event:e,userAction:n,valid:s})}fetchInputValue(){this.value=this.input[this.inputValueAttr]}internalOnInput(e){var n;const r=this;r.validateOnInput||r.errorTip.hide(),r.inputting=!0,r.fetchInputValue(),r.inputting=!1,r.trigger("input",{value:r.value,event:e}),null==(n=r.changeOnKeyStroke)||n.call(r,e)}get needsInputSync(){var e;return this.input[this.inputValueAttr]!==String(null!=(e=this.inputValue)?e:"")}internalOnKeyEvent(e){const n=this,{value:r}=n;let i=!1;if("keydown"===e.type&&"Escape"===e.key&&!n.readOnly&&!n.disabled){const e=n.isValid,o="initialValue"in n?n.initialValue:n.valueOnFocus,s=n.hasChanged(o,r),{needsInputSync:a}=n;n.revertOnEscape&&(!e||s||a)&&(s&&(n.value=o),a&&n.syncInputFieldValue(!0),n.clearError(),i=(s||a)&&n.isValid||e!==n.validOnFocus)}n.isDestroyed||(i&&e.stopImmediatePropagation(),n.trigger(e.type,{event:e}))}clear(e){const n=this,{value:r}=n;(r!==n.nullValue||n.input.value.length>0)&&(n.value=n.nullValue,n.clearError(),n.syncInvalid(),n.trigger("clear",{event:e}))}onDisabled(){this.syncInvalid()}syncRequired(){var e;const n=this;n.isConfiguring||n.focusing||!n.required||!n.isEmpty||(null==(e=n.parent)?void 0:e.isSettingValues)?n.clearError("L{fieldRequired}",n.updatingInvalid):n.setError("L{fieldRequired}",n.updatingInvalid)}setError(e,n,r){const i=this;if((i.errors||(i.errors={}))[i.optionalL(e)]=1,n||i.syncInvalid(),r){const clearError=()=>{i.clearError(e),n()},n=i.ion({keydown:clearError,focusOut:clearError})}}clearError(e,n){const r=this;r.errors&&(e?delete this.errors[this.optionalL(e)]:r.errors={}),n||r.syncInvalid()}getErrors(){const e=this;if(!e.isValid){const n=e.validity,r=Et.keys(n).find((e=>"valid"!==e&&"customError"!==e&&n[e])),i=e.errors&&Object.keys(e.errors);let o;if(o=(null==i?void 0:i.length)?i:n.customError?[e.input.validationMessage]:r?[e.L(r,{min:e.min,max:e.max})]:[e.L(e.invalidValueError)],(null==o?void 0:o.length)>0)return o}}createOverflowTwin(e){const n=this,r=super.createOverflowTwin(e);return r.ion({change({value:e}){n._overflowTwinSync=!0,n.value=e,n._overflowTwinSync=!1}}),r}get containerCollapsed(){var e;return null==(e=this.container)?void 0:e.collapsed}set containerCollapsed(e){const{container:n}=this;n&&(n.collapsed=e)}afterSyncChildConfigs(e){}changeContainer(e,n){e&&(Array.isArray(e)||!("type"in e)&&!("items"in e))&&(e={items:e});const r=this,i=e&&Et.merge({owner:r,layout:"box"},r.containerDefaults),o=bs.reconfigure(n,e,{owner:r,defaults:i});if(!o||(o.autoLayout="box"===(null==i?void 0:i.layout),o!==n))return o;o.syncContainer()}onConfigChange(e){var n,r;super.onConfigChange(e),(null==(r=null==(n=this.container)?void 0:n.syncConfigTriggers)?void 0:r[e.name])&&this.container.syncChildConfigs()}assignValue(e,n){const{container:r,containValues:i}=this,o=this.getValueName(n);r&&!1!==i?e&&"nested"===i?e&&o in e&&(e=Et.clone(e[o]),super.assignValue({[o]:e&&!("value"in e)||e.value},n),e&&delete e.value,r.assignValue(e,n)):(super.assignValue(e,n),r.assignValue(e,n)):super.assignValue(e,n)}gatherValue(e){super.gatherValue(e),this.gatherValues(e)}gatherValues(e,n){const r=this,{container:i,containValues:o,valueName:s}=r,a=typeof o;n=null!=n?n:s in e,i&&!1!==o&&("nested"===o?n&&(e[s]={value:e[s],...i.values}):(!0===o||null==o&&n||"string"===a&&r[o]||"function"===a&&o(r))&&i.gatherValues(e))}updateContainer(e,n){n&&this.detachListeners(n.id),e&&(e.rendered||e.render(),e.syncContainer(),e.syncChildConfigs())}};Cc.Trigger=class FieldTrigger extends bs{static get $name(){return"FieldTrigger"}static get factoryable(){return{defaultType:Cc.Trigger,extends:null}}static get type(){return"trigger"}static get configurable(){return{align:null,weight:null,role:void 0}}get field(){return this.parent}construct(){super.construct(...arguments),this.key&&(this.keyMap={[this.key]:"onClick"})}compose(){return{"aria-hidden":!0,class:{[`b-align-${this.align||"end"}`]:1,"b-icon":1},listeners:{click:"onClick",mousedown:"onMousedown"}}}changeAlign(e){return e}onClick(e){const n=this,{field:r}=n;r.disabled||r.readOnly||(e.key&&e.preventDefault(),!1!==r.trigger("trigger",{trigger:n})&&n.handler&&r.callback(n.handler,r,[e,n]))}onMousedown(e){const n=this.field;!("key"in e)&&Gn.isTouchEvent&&n.editable&&(n.editable=!1,n.setTimeout((()=>n.editable=!0),500)),e.preventDefault(),Gn.getActiveElement(n.input)!==n.input&&n.focus()}},Cc.SpinTrigger=class SpinTrigger extends Cc.Trigger{static get $name(){return"SpinTrigger"}static get type(){return"spintrigger"}static get configurable(){return{repeat:{$config:["nullify"],value:!0}}}compose(){return{children:{upButton:{class:{"b-icon":1,"b-spin-up":1}},downButton:{class:{"b-icon":1,"b-spin-down":1}}}}}updateRepeat(e){var n;null==(n=this.clickRepeater)||n.destroy(),this.clickRepeater=e?Ps.new({element:this.element},e):null}onClick(e){const n=this,{field:r}=n;r.disabled||r.readOnly||(e.target===n.upButton?r.doSpinUp(e.shiftKey):e.target===n.downButton&&r.doSpinDown(e.shiftKey))}},Cc.Trigger.initClass(),Cc.SpinTrigger.initClass(),bs.register(Cc.Trigger,"trigger"),bs.register(Cc.SpinTrigger,"spintrigger"),Cc._$name="Field";var Sc=class extends Cc{static get type(){return"textfield"}static get alias(){return"text"}static get configurable(){return{nullValue:""}}static get $name(){return"TextField"}construct(e){"hidden"===(null==e?void 0:e.inputType)&&(e.hidden=!0),super.construct(...arguments)}};Sc.initClass(),Sc._$name="TextField";var xc=class extends Sc{static get $name(){return"PickerField"}static get type(){return"pickerfield"}static get configurable(){return{editable:!0,pickerAlignElement:"inputWrap",value:null,triggers:{expand:{cls:"bars"}},autoClose:!0,autoExpand:null,picker:{value:{floating:!0},$config:["lazy","nullify"]},inputType:"text",monitorResize:!0,nullValue:null}}doDestroy(){var e;null==(e=this.globalTapListener)||e.call(this),super.doDestroy()}updateEditable(e){var n;const r=this,{element:i,ariaElement:o,nonEditableClickTarget:s}=r;super.updateEditable(...arguments),i.classList.toggle("b-not-editable",!e),!1===e?(o.removeAttribute("aria-autocomplete"),null==(n=r.globalTapListener)||n.call(r),cn.on({element:s,click:e=>{const n=s.getRootNode().elementFromPoint(e.clientX,e.clientY);e.target===s&&n===s&&r.onTriggerClick(e)},thisObj:r})):(o.setAttribute("aria-autocomplete","list"),r.globalTapListener=or.ion({globaltap:"showKeyboard",thisObj:r}))}get nonEditableClickTarget(){return this.input}updateElement(e,n){var r;const i=super.updateElement(e,n),o=this.peekConfig("picker"),s=!!o&&(o.isWidget?o.role:null==(r=this.constructor.resolveType(o.type))?void 0:r.$meta.config.role);return this.ariaHasPopup=s,i}changePicker(e,n){throw new Error("changePicker(oldPicker, newPicker) must be implemented in PickerField subclass implementations")}get childItems(){const e=super.childItems;return this._picker&&e.push(this.picker),e}onEditComplete(){super.onEditComplete(),this.autoClosePicker()}onElementResize(e){const n=this;n.pickerVisible&&n.picker.requestAnimationFrame(n.picker.realign,null,n.picker),super.onElementResize(e)}internalOnKeyEvent(e){const n=this;let r=!0;if("keydown"===e.type&&!n.disabled&&!e.shiftKey&&!e.ctrlKey)if(n.pickerVisible){const{picker:i}=n;"Escape"===e.key?(e.preventDefault(),e.stopImmediatePropagation(),n.hidePicker(),r=!1):i.onInternalKeyDown?i.onInternalKeyDown(e):"ArrowDown"===e.key&&i.focusable&&i.focus()}else"ArrowDown"===e.key&&(e.stopImmediatePropagation(),e.preventDefault(),n.onTriggerClick(e));r&&super.internalOnKeyEvent(e)}onFocusIn(e){const n=this;super.onFocusIn(e),n.autoExpand&&(n.minChars=0,n.onTriggerClick(e),n.ignoreTriggerClick=!0,n.setTimeout((()=>n.ignoreTriggerClick=!1),100))}onTriggerClick(e){this.disabled||this.togglePicker("key"in e)}showKeyboard({event:e}){const n=this.input;Gn.isTouchEvent&&Gn.getActiveElement(n)===n&&e.target===n&&(or.suspendFocusEvents(),n.blur(),n.focus(),or.resumeFocusEvents())}togglePicker(e){this.pickerVisible?this.hidePicker():this.showPicker(e)}showPicker(e){const n=this,{picker:r}=n;n.pickerHideShowListenersAdded||(r.ion({show:"onPickerShow",hide:"onPickerHide",thisObj:n}),n.pickerHideShowListenersAdded=!0),Gn.setAttributes(n.ariaElement,{"aria-controls":r.id,"aria-expanded":!0}),r.autoClose=n.autoClose,r.show(),r.isVisible&&e&&n.focusPicker()}onPickerShow(){const e=this;e.pickerVisible=!0,e.element.classList.add("b-open"),e.trigger("togglePicker",{show:!0}),e.pickerTapOutRemover=or.ion({globaltap:"onPickerTapOut",thisObj:e}),e.pickerKeyDownRemover=cn.on({element:e.picker.element,keydown:"onPickerKeyDown",thisObj:e})}onPickerHide(){var e,n;const r=this;r.ariaElement.setAttribute("aria-expanded",!1),r.pickerVisible=!1,r.element.classList.remove("b-open"),r.trigger("togglePicker",{show:!1}),null==(e=r.pickerTapOutRemover)||e.call(r),null==(n=r.pickerKeyDownRemover)||n.call(r)}onPickerTapOut({event:e}){this.containsFocus||this.owns(e.target)||this.autoClosePicker()}onPickerKeyDown(e){if("Tab"===e.key&&!this.picker.trapFocus){const n=Gn.getActiveElement(this.input),r=new KeyboardEvent("keydown",e);this.input.dispatchEvent(r),r.defaultPrevented&&e.preventDefault(),Gn.getActiveElement(this.input)===n?this.input.focus():e.preventDefault(),this.isDestroyed||this.hidePicker()}}autoClosePicker(){this.autoClose&&this.hidePicker()}hidePicker(){this.pickerVisible&&this.picker.hide()}focusPicker(){}focus(){const e=this.input;Gn.isTouchEvent&&this.editable&&(e.readOnly=!0,this.setTimeout((()=>e.readOnly=!1),500)),super.focus()}};xc._$name="PickerField";var Dc=document.createRange(),Ec=class extends bs{static get $name(){return"List"}static get type(){return"list"}static get configurable(){return{itemCls:"b-list-item",selectedCls:"b-selected",selectIconCls:"b-icon-check",tag:"ul",items:null,displayField:"text",store:null,navigator:!0,scrollable:{overflowX:!1,overflowY:!0},itemsFocusable:!0,multiSelect:!1,toggleAllIfCtrlPressed:!1,selectAllItem:!1,itemTpl(e){let n=w.encodeHtml(e[this.displayField]);return null!=n&&""!==n||(n="&nbsp;"),n},getItemStyle:null,getItemCls:null,groupHeaderTpl:(e,n)=>{let r=w.encodeHtml(n);return null!=r&&""!==r||(r="&nbsp;"),r},allowGroupSelect:!0,selected:{$config:"nullify",value:{}},activateOnMouseover:null,role:"listbox",keyMap:{"Ctrl+a":"selectAll"}}}construct(e,...n){var r;const i=this;Array.isArray(e)&&(e={items:e}),super.construct(e,...n);const{element:o}=i,{classList:s}=o;i.multiSelect&&s.add("b-multiselect"),(null==(r=i.store)?void 0:r.count)?i.refresh():s.add("b-empty"),cn.on({element:o,delegate:i.itemSelector,mouseover:"onMouseOver",click:"onClick",thisObj:i})}doDestroy(){var e;this.detachListeners("store"),null==(e=this.navigator)||e.destroy(),super.doDestroy()}onFocusIn(e){var n;this.restoreActiveItem(null==(n=e._target)?void 0:n.closest(this.itemSelector)),super.onFocusIn(e)}contentTpl(){const e=this,n=e.store.records.map(((n,r)=>e.itemWrapperTpl(n,r)));return e.multiSelect&&!1!==e.selectAllItem&&n.unshift(e.selectAllItemTpl()),rl.tpl`${n}`}itemWrapperTpl(e,n){const{selected:r,getItemStyle:i}=this,o=i?`style="${this.callback(i,this,[e])}"`:"";return rl.tpl`<li ${o} class="${this.getItemClasses(e,n)}" role="option" aria-selected="${r.includes(e)}" data-index="${n}" data-id="${w.encodeHtml(e.id)}" ${this.itemsFocusable?'tabindex="-1"':""}>${this.itemContentTpl(e,n)}</li>`}itemContentTpl(e,n){return"groupRowFor"in e.meta?this.groupHeaderTpl(e,w.capitalize(e.groupChildren[0][e.meta.groupField])):`${this.itemIconTpl(e,n)}${this.itemTpl(e,n)}`}itemIconTpl(e,n){return this.multiSelect?`<i class="b-selected-icon b-icon ${this.selectIconCls}"></i>`:""}selectAllItemTpl(){const e=this.allSelected?"b-selected":"";return`<li class="${this.itemCls} b-select-all-item ${e}" data-noselect data-select-all data-id="select-all">${this.itemIconTpl({})}<div>${this.optionalL("Select All")}</div></li>`}getItemClasses(e){var n;const r=this,{getItemCls:i}=r,o=null==(n=r._navigator)?void 0:n.activeItem,s=(null==o?void 0:o.dataset.id)==e.id,a="groupRowFor"in e.meta?"b-list-item-group-header":"",l=r.selected.includes(e),c=i?this.callback(i,this,[e]):"";return`${r.itemCls} ${e.cls||""} ${c} ${l?r.selectedCls:""} ${s?r.navigator.focusCls:""} ${a}`}onBeforeStoreLoad(){this.mask(this.L("L{loading}"))}onAfterStoreRequest(){this.unmask()}onStoreChange({source:e,action:n,records:r,record:i,changes:o}){const s=this,{selected:a}=s;switch(n){case"dataset":a.match(e.storage,!s._externallyOwnedSelection);break;case"remove":a.remove(r);break;case"clear":s.deselectAll();break;case"update":{const{id:e}=o;return e&&Gn.setAttributes(s.contentElement.querySelector(w.encodeAttributeSelector("data-id",e.oldValue)),{"data-id":e.value}),void s.refreshItem(i)}}s.refresh()}onStoreRefresh(){this.refresh()}refresh(){var e;const n=this;if(n.isVisible){const r=null==(e=n.navigator)?void 0:e.activeItem;n.paintListener=null;const i=Gn.createElementFromTemplate(n.contentTpl(),{fragment:!0});n.clearItems().insertNode(i),r&&n.restoreActiveItem(r),n.refreshCount=(n.refreshCount||0)+1,n.element.classList[n.store.count>0?"remove":"add"]("b-empty"),n.updateSelectAllState()}else n.paintListener||(n.paintListener=n.ion({paint:"refresh",thisObj:n,once:!0}))}clearItems(){const e=this,n=e.contentElement.querySelector(e.itemSelector),r=e.contentElement.lastChild;if(n){const r=e.contentElement.querySelectorAll(`${e.itemSelector}:not(.b-mask)`);Dc.setStartBefore(n),Dc.setEndAfter(r[r.length-1]),Dc.deleteContents()}else r?(Dc.setStartAfter(r),Dc.setEndAfter(r)):(Dc.setStart(e.contentElement,0),Dc.setEnd(e.contentElement,0));return Dc}refreshItem(...e){for(const n of e){const e=this.getItem(n);if(e){const r=this.store.indexOf(n),i=Gn.createElementFromTemplate(this.itemWrapperTpl(n,r));Gn.sync(i,e)}}}getItem(e){if(null!=e)return"number"==typeof e?this.contentElement.querySelector(`[data-index="${e<0?this.store.count+e:e}"]`):(e.nodeType===Element.ELEMENT_NODE&&(e=e.dataset.id),null!=(null==e?void 0:e.id)&&(e=e.id),this.contentElement.querySelector(w.encodeAttributeSelector("data-id",e)))}getRecordFromElement(e){return e.target&&(e=e.target),e=e.closest(this.itemSelector),this.store.getAt(parseInt(e.dataset.index))}updateItems(e){const n=this;n.store&&n.store.autoCreated&&n.store.destroy(),n.store=yi.getStore(e)}updateDisabled(e){super.updateDisabled(...arguments),this.navigator&&(this.navigator.disabled=e)}changeSelected(e,n){if(e){let n;e.isCollection?this._externallyOwnedSelection=!0:(Array.isArray(e)?(n=e,e={}):e.values&&(n=e.values,e={...e,values:[]}),e=new si(e)),e.ion({change:"onSelectionChange",thisObj:this}),this.initialSelection=n}else null==n||n.destroy();return e}get itemSelector(){return`.${this.itemCls}`}get selected(){return this._selected}get store(){return this.getConfig("items"),this._store}changeStore(e){const n=this;if(e instanceof yi||(Array.isArray(e)&&(e={data:e}),e=new yi(e)),n.detachListeners("store"),e){const r={name:"store",change:"onStoreChange",refresh:"onStoreRefresh",thisObj:n};e.readUrl&&(r.beforeLoad="onBeforeStoreLoad",r.afterRequest="onAfterStoreRequest"),e.isGrouped&&(n.element.classList.add("b-grouped"),r.groupchange="onStoreRefresh"),e.ion(r)}return e}updateStore(e){const{initialSelection:n}=this;Array.isArray(n)&&(e.count?(this.select(n),this.selected.count||this.onSelectionChange({action:"clear",removed:[]})):e.ion({refresh:()=>this.select(n),once:!0})),this.refresh()}changeNavigator(e,n){const r=this,{element:i}=r;return i&&((null==(e=wl.reconfigure(n,e?wl.mergeConfigs({ownerCmp:r,disabled:r.disabled,target:i,keyEventTarget:i},e):null,r))?void 0:e.keyEventTarget)!==i||r.itemsTabbable||(i.tabIndex=0)),e}get minAlignHeight(){const e=this.element.lastElementChild,n=this.minHeight;if(null!=n)return e?Math.min(e.offsetTop+e.offsetHeight,n):0}alignTo(...e){super.minHeight=this.minAlignHeight,super.alignTo(...e)}hide(...e){return this.navigator&&(this.navigator.activeItem=null),super.hide(...e)}show(){const{refreshCount:e}=this,{previousActiveItem:n}=this.navigator;super.minHeight=this._minHeight;const r=super.show(...arguments);return this.refreshCount===e&&this.restoreActiveItem(n,!0),r}restoreActiveItem(e=this.navigator.previousActiveItem,n="nearest"){const r=this,{navigator:i,lastAlignSpec:o}=r;if(null!=e){if("string"!=typeof n){const e=o?o.zone:1;n=1&e?"nearest":e?"start":"end"}(e=r.getItem(e))&&!r.disabled&&(r.scrollable.scrollIntoView(e,{block:n}),i.activeItem=e)}}onMouseOver(e){const n=this,r=e.currentTarget;!Gn.isTouchEvent&&r&&n.navigator&&n.activateOnMouseover&&n.setTimeout({fn:"handleMouseOver",delay:30,args:[r],cancelOutstanding:!0})}handleMouseOver(e){this.navigator.activeItem=e}onClick(e){const n=e.target.closest(this.itemSelector);n&&this.onItemClick(n,e)}onInternalKeyDown(e){const n=this.navigator.activeItem;if(!this.disabled)switch(e.key){case" ":if("INPUT"===e.target.nodeName.toUpperCase()&&!e.target.readOnly)break;case"Enter":n&&(this.onItemClick(n,e),e.stopImmediatePropagation(),e.preventDefault())}}onItemClick(e,n){const r=this,i=parseInt(e.dataset.index);let o=r.store.getAt(i);if(!r.disabled&&!1!==r.trigger("beforeItem",{item:e,record:o,index:i,event:n,userAction:!0})){if(r._isUserAction=!0,r.allowGroupSelect||o&&!o.isSpecialRow)if(e.contains(n.target.closest("[data-noselect]")))e.contains(n.target.closest("[data-select-all]"))&&r.onSelectAllClick(e,n);else{const e=r.selected;let i=e.includes(o);r.multiSelect?(r.toggleAllIfCtrlPressed&&n.ctrlKey?o=r.store.records:r.allowGroupSelect&&o.isSpecialRow&&(i=!o.groupChildren.some((n=>!e.includes(n))),o=o.groupChildren),e[i?"remove":"add"](o)):e.splice(0,e.count,o)}r.isDestroyed||(r.lastClicked=o,r.trigger("item",{item:e,record:o,index:i,event:n,userAction:!0}),r._isUserAction=!1)}}onSelectionChange({action:e,removed:n,added:r,replaced:i}){const o=this,{selectedCls:s,unselectedCls:a}=o;let l,c;if("clear"===e)for(c of o.element.querySelectorAll(`.${s}`))c.classList.remove(s),c.setAttribute("aria-selected",!1),a&&c.classList.remove(a);else if("replaceValues"!==e){for(l of n)c=o.getItem(l),c&&(c.classList.remove(s),c.setAttribute("aria-selected",!1));for(l of r)c=o.getItem(l),c&&(c.classList.add(s),c.setAttribute("aria-selected",!0))}o.selectAllItem&&o.updateSelectAllState()}onSelectAllClick(e){e.classList.contains(this.selectedCls)?this.deselectAll():this.selectAll()}updateSelectAllState(){var e;null==(e=this.element.querySelector(".b-select-all-item"))||e.classList.toggle(this.selectedCls,this.allSelected)}get allSelected(){const{selected:e,store:n}=this;return e.count&&(n.isFiltered?n.records.every((n=>e.includes(n))):n.count===e.count)}selectAll(e){const n=this;!n.multiSelect&&e||(n.selected.add(n.store.records),e&&!n.navigator.activeItem&&(n.navigator.activeItem=n.getItem(-1)))}deselectAll(){this.selected.clear()}select(e){const{store:n}=this,{modelClass:r}=n;e=oe.asArray(e).reduce(((e,i)=>((i=n.getById(r.asId(i)))&&e.push(i),e)),[]),this.selected.add(e)}deselect(e){const{modelClass:n}=this.store;e=oe.asArray(e).reduce(((e,r)=>((r=this.selected.get(n.asId(r)))&&e.push(r),e)),[]),this.selected.remove(e)}};Ec.initClass(),Ec.prototype.navigatorClass=wl,Ec._$name="List";var Rc=class extends Ec{static get $name(){return"ChipView"}static get type(){return"chipview"}static get configurable(){return{itemCls:"b-chip",multiSelect:!1,closable:!0,iconTpl:null,closeHandler:null}}itemContentTpl(e,n){const r=this;return rl.tpl`${r.iconTpl?this.iconTpl(e):""}
            ${r.itemTpl(e,n)}
            ${r.closable?'<div class="b-icon b-close-icon b-icon-clear" data-noselect></div>':""}`}onInternalKeyDown(e){const n=this;n.closable&&n.selected.count&&("Delete"===e.key||"Backspace"===e.key)?n.callback(n.closeHandler,n.owner,[n.selected.values,{isKeyEvent:!0}]):super.onInternalKeyDown(e)}updateClosable(e){this.element.classList[e?"add":"remove"]("b-chips-closable"),this.navigator&&(this.navigator.disabled=!e),this.isConfiguring||this.refresh()}onClick(e){const n=this,r=e.target.closest(`.${n.itemCls}`);if(n.closable&&e.target.classList.contains("b-close-icon")){const e=n.store.getAt(parseInt(r.dataset.index));n.callback(n.closeHandler,n.owner,[[e]])}else super.onClick(e)}};Rc.initClass(),Rc._$name="ChipView";var kc="L{Field.fieldRequired}",Tc="L{Field.validateFilter}",Mc=class extends xc{static get $name(){return"Combo"}static get type(){return"combo"}static get alias(){return"combobox,dropdown"}static get configurable(){return{primaryFilter:{},picker:{type:"list",floating:!0,scrollAction:"realign",itemsFocusable:!1,activateOnMouseover:!0,align:{align:"t0-b0",axisLock:!0},maxHeight:324,scrollable:{overflowY:!0},autoShow:!1,focusOnHover:!1},multiSelect:null,items:null,store:null,valueField:void 0,displayField:"text",pickerWidth:null,minChars:null,selected:null,listItemTpl:null,displayValueRenderer:null,listCls:null,triggers:{expand:{cls:"b-icon-picker",handler:"onTriggerClick"}},filterParamName:null,encodeFilterParams:e=>e.map((e=>e.value)),filterOnEnter:!1,hideTrigger:null,overlayAnchor:null,keyStrokeFilterDelay:null,defaultAction:"select",triggerAction:"all",filterOperator:"startsWith",caseSensitive:!1,hidePickerOnSelect:null,chipView:{$config:["lazy","nullify"],value:{type:"combochipview"}},chipStore:{$config:["lazy","nullify"],value:{}},filterSelected:null,emptyText:null,value:null,valueCollection:{$config:["nullify","lazy"],value:{}},validateFilter:!0,clearTextOnPickerHide:!0,destroyStore:!1,multiValueSeparator:",",createOnUnmatched:null,role:"combobox",inlinePicker:null,testConfig:{keyStrokeFilterDelay:0},localizeDisplayFields:!1,buildItems:null}}static get queryLast(){return"last"}construct(e){super.construct(...arguments),this.store||(this.items=[]),this.filterOnEnter&&(this.hideTrigger=!0)}startConfigure(e){this.usingRecordAsValue=null===e.valueField,super.startConfigure(...arguments)}afterConfigure(){super.afterConfigure();const e=this;Et.hasOwn(e,"_value")||(e._value=e.valueField===e.displayField?"":null,e._lastValue=e._lastValue||e._value)}get childItems(){const{_chipView:e,_picker:n}=this,r=super.childItems;return e&&r.push(e),n&&r.push(n),r}get innerElements(){var e;const n=null==(e=this._chipView)?void 0:e.element,{input:r,inputElement:i}=this;return n&&$o.sync({targetElement:r,domConfig:i}),[n||i]}updateInlinePicker(e){e&&(this.element.classList.add("b-inline-picker"),this.getConfig("picker"),this.triggers.expand=null,this.pickerVisible=!0)}hidePicker(){if(!this.inlinePicker)return super.hidePicker(...arguments)}changeChipStore(e){return!e||e instanceof yi||(e=new yi(yi.mergeConfigs({storage:this.valueCollection},e))),e}updateChipStore(e,n){null==n||n.destroy()}changeChipView(e,n){const r=this;if(r.element.classList[e?"add":"remove"]("b-uses-chipview"),e){const{input:i}=r;return r.chipStore||(r.chipStore={}),Ac.reconfigure(n,e,{defaults:{parent:r,insertBefore:i,store:r.chipStore,closable:!r.readOnly,navigator:{type:"combochipnavigator",keyEventTarget:i}}})}null==n||n.destroy()}updateChipView(e){var n;const r=this;r._chipViewEventDetacher=null==(n=r._chipViewEventDetacher)?void 0:n.call(r),r.chipStore=null==e?void 0:e.store,e&&(e.element.appendChild(r.input),r._chipViewEventDetacher=cn.on({element:e.element,mousedown:"onChipViewMousedown",thisObj:r}))}updateMultiSelect(e,n){const r=this,{input:i,element:o}=r,s=!r.isConfiguring;let{value:a}=r;if(o.classList[e?"add":"remove"]("b-multiselect"),e){const{chipView:e}=r,{parentNode:n}=i,o=null==e?void 0:e.element;o&&o!==n&&(n.insertBefore(o,i),o.appendChild(i),r.chipView.refresh()),i.value="",s&&(a=oe.asArray(a))}else{const e=r._chipView,{parentNode:n}=i,l=null==e?void 0:e.element;l===n&&(l.parentNode.insertBefore(i,l),l.remove(),o.classList.remove("b-uses-chipview")),s&&"string"!=typeof a&&(a=(null==a?void 0:a.length)?a[0]:null)}s&&(r.value=a)}onChipViewMousedown(e){e.preventDefault(),this.containsFocus||this.focus()}onChipClose(e,n={}){(n.isKeyEvent&&""===this.input.value||!n.isKeyEvent)&&(this._isUserAction=!0,this.valueCollection.remove(e),this._isUserAction=!1)}updateFilterParamName(e){!1!==this.hideTrigger&&(this.hideTrigger=Boolean(e))}updateHideTrigger(e){this.element.classList[e?"add":"remove"]("b-hide-trigger")}updateKeyStrokeFilterDelay(e){this.filterOnInput.delay=e}updateReadOnly(e){super.updateReadOnly(...arguments),this._chipView&&(this._chipView.closable=!e)}updateDisabled(e){super.updateDisabled(...arguments),this._chipView&&(this._chipView.closable=!e)}updateFilterOperator(e){this.primaryFilter&&(this.primaryFilter.operator=e)}get minChars(){const e=this._minChars;return null!=e?e:this.remoteFilter?4:1}get validateFilter(){return this._validateFilter&&!this.createOnUnmatched}get items(){return this.store.allRecords}updateBuildItems(e){e&&(this.items=e.call(this))}changeItems(e){const n=this;if(null==e){if(n.store&&!n.store.isItemStore)return;e=[]}if(n.buildItems&&!(null==e?void 0:e.length)&&(e=n.buildItems()),e instanceof yi)return void(n.store=e);const r=n.displayField;let i,o,s=n.valueField;if(Array.isArray(e)?o=e.map((e=>{let o=e;return e instanceof Ur?(i=e.constructor,s||(n.valueField=s=i.idField)):"string"==typeof e||"number"==typeof e?(s||(n.valueField=s=n.displayField),o={[s]:e,[r]:e}):(s||(n.valueField=s="value"),Array.isArray(e)&&(o={[s]:e[0],[r]:e[1]})),e.selected&&(n.value=o),o})):(s||(n.valueField=s="value"),o=[],Object.entries(e).forEach((([e,n])=>{o.push({[s]:e,[r]:n})}))),n.store)n.store.data=o;else{const e=s===r?{name:"value",dataSource:r}:s;if(!i){class ModelClass extends Ur{static get idField(){return n.valueField}static set idField(e){super.idField=e}static get fields(){return[e,r]}}i=ModelClass}n.store=new yi({isItemStore:!0,data:o,idField:s,verifyNoGeneratedIds:!1,modelClass:i})}}get value(){const e=this,{valueCollection:n,valueField:r}=e;if(null==r)return e.multiSelect?n.values.slice():n.first;let i;return i=e.multiSelect?n.count?n.map((e=>e[r])):e._lastValue||[]:n.count?n.first[r]:e._lastValue,i}set value(e){super.value=e}get needsInputSync(){return!this.usesChipView&&!this.editable}changeValue(e,n){var r,i;const o=this;if(e===n)return void o.syncInputFieldValue(!0);if(!o.multiSelect&&Array.isArray(e)&&e.length>1)throw new Error("Multiple values cannot be set to a non-multiSelect Combo");o.triggerConfig("items"),o.inputting||null==(r=o._chipView)||r.selected.clear(),o.store||(o.items=[]);const{valueField:s,displayField:a,store:l,valueCollection:c,_picker:d}=o,{storage:u}=l,h=null!=(i=o.hidePickerOnSelect)?i:!o.multiSelect,g=o._isUserAction||(null==d?void 0:d._isUserAction)||h&&o.pickerVisible||!1;if(!o.remoteFilter&&l.isAjaxStore&&!l.count)return l.ion({load:()=>o.value=e,once:!0,thisObj:o}),void(o._lastValue=e);if(o.remoteFilter){if(null!=e){if(Et.isObject(e)||e.isModel)o.store.data=[e],o.valueCollection.splice(0,o.valueCollection.count,o.store.first);else{const n=o.isConfiguring;o.primaryFilter.setConfig({value:e,disabled:!1}),l.performFilter(!0).then((()=>{if(o.isDestroyed)return;const{isConfiguring:e}=o;o.isConfiguring=n,c.splice(0,c.count,l.allRecords),o.isConfiguring=e}))}return}}else l.filtered&&(o.primaryFilter.disabled=!0,l.filter());let p;if(null!=e){const r=Array.isArray(e),i=r?e.slice():[e];for(let e=0,n=i.length;e<n;e++){let r=i[e];if(r instanceof Ur)u.includes(r,!0)||l.add(r);else{const o=Et.isObject(r);o&&(r=r[l.modelClass.fieldMap[s].dataSource]),p=u.getBy(a,r)||u.getBy(s,r)||c.getBy(a,r)||c.getBy(s,r),p instanceof Set&&(p=[...p][0]),p?(o&&p.set(i[e]),i[e]=p):(i.splice(e,1),n--,e--)}}const d=!i.length,h=c.generation;c.splice(0,c.count,i),d&&(o._value=r&&0===e.length?null:e,o._lastValue=o._value),(d||c.generation===h)&&o.syncInputFieldValue(),o.syncEmpty(),d&&!o.isConfiguring&&o.triggerFieldChange({value:e,oldValue:n,userAction:g,valid:o.isValid})}else if(c.count)c.clear();else{const n=o._value;o._value=null,o.syncInputFieldValue(),o.syncEmpty(),o.isConfiguring||o.triggerFieldChange({value:e,oldValue:n,userAction:g,valid:o.isValid})}o._lastValue=o._value}hasChanged(e,n){return this.multiSelect?!Et.isEqual(e,n):super.hasChanged(...arguments)}onComboStoreChange({action:e}){"filter"!==e&&this.syncInputFieldValue(!0)}syncInputFieldValue(e){var n;this.usesChipView?null==(n=this.chipView)||n.refresh():super.syncInputFieldValue(e)}get usesChipView(){return Boolean(this.multiSelect&&this._chipView)}get isEmpty(){return 0===this.valueCollection.count}get inputValue(){const e=this;let n=e.selected?e.selected[e.displayField]:e.value;return e.displayValueRenderer&&(n=e.callback(e.displayValueRenderer,e,[e.selected,e])),null==n?"":n}get nonEditableClickTarget(){var e;return this.multiSelect&&(null==(e=this.chipView)?void 0:e.element)||super.nonEditableClickTarget}changeValueCollection(e,n){if(null==n||n.destroy(),e)return e.isCollection||(e=new si({internalListeners:{noChange:"onValueCollectionNoChange",change:"onValueCollectionChange",prio:-1e3,thisObj:this}})),e}changePrimaryFilter(e){return e.isCollectionFilter?e.setConfig({disabled:!0,property:this.displayField,operator:this.filterOperator,caseSensitive:this.caseSensitive}):("function"==typeof e&&(e={filterBy:e}),e=new Zr({id:"primary",disabled:!0,property:this.displayField,operator:this.filterOperator,caseSensitive:this.caseSensitive,...e})),e}changeStore(e){const n=this,r=[],{valueCollection:i,keyStrokeFilterDelay:o,filterParamName:s}=n;if(Array.isArray(e))return void(n.items=e);let a;if(e){if(e.isStore){const i=e.filters.get("primary");n.remoteFilter&&(e.filterParamName=s),a=e.remoteFilter||e.restfulFilter,i?n.primaryFilter=i:r.push(n.primaryFilter)}else"string"==typeof e?e=yi.getStore(e):(e=new(e.readUrl?Ci:yi)(e),n.destroyStore=!0),a=n.remoteFilter||e.restfulFilter,a&&s&&(e.filterParamName=s,n.encodeFilterParams&&(e.encodeFilterParams=n.encodeFilterParams)),r.push(n.primaryFilter);if(n.valueField||n.usingRecordAsValue||(n.valueField=e.modelClass.idField),n.filterSelected){const selectedItemsFilter=e=>!n.containsFocus||!i.includes(e);a?(e.storage.autoFilter=!0,e.storage.addFilter({id:`${n.id}-selected-filter`,filterBy:selectedItemsFilter})):(r.push(selectedItemsFilter),e.reapplyFilterOnAdd=!0)}i.addIndex({property:n.displayField,unique:!1}),i.addIndex({property:n.valueField,unique:!0}),r.forEach((n=>e.addFilter(n,!0))),n.keyStrokeFilterDelay=a?Math.max(300,o||0):null!=o?o:10}return e}updateStore(e,n){const r=this,{_picker:i}=r;let o;r.destroyStore&&n&&n.destroy(),i&&(i.store=e),e.storage.addIndex({property:r.displayField,unique:!1}),e.storage.addIndex({property:r.valueField,unique:!0}),o={filter:"onStoreFilter"},r.displayValueRenderer&&((o||(o={})).change="onComboStoreChange"),r.detachListeners("store"),(null==e?void 0:e.storage)&&r.valueCollection.match(e.storage),r.syncInputFieldValue(),o&&(o.name="store",o.thisObj=r,e.ion(o))}get remoteFilter(){var e;return Boolean(this.filterParamName||(null==(e=this._store)?void 0:e.restfulFilter))}get record(){return this.selected}get records(){return this.valueCollection.values.slice()}get selected(){const{store:e}=this;return this.multiSelect?this.valueCollection.values.slice().sort(((n,r)=>e.indexOf(n)-e.indexOf(r)))[0]:this.valueCollection.first}onEditComplete(){const e=this,n=e.valueCollection.count;super.onEditComplete(),n&&(e.clearError(Tc),e.syncInputFieldValue()),e.required&&!n&&e.setError(kc)}onTriggerClick(e){var n;const r=this,i="key"in e;if(!(r.ignoreTriggerClick||r.remoteFilter&&r.filterOnEnter))if(r.pickerVisible)r.hidePicker();else if(!r.readOnly&&!r.disabled)switch(null==(n=r.triggerAction)?void 0:n.toLowerCase()){case"all":r.doFilter(null,i);break;case"last":r.doFilter(r.lastQuery,i);break;default:r.doFilter(r.input.value,i)}}internalOnInput(e){const n=this;n.syncEmpty(),n.syncInputWidth(),n.filterOnInput(e),n.trigger("input",{value:n.input.value,event:e})}filterOnInput(e){const n=this,{value:r}="input"===e.type?e.target:n.input,i=r.length;n.inputting=!0,n.inlinePicker||i>=n.minChars&&(!n.filterOnEnter||"Enter"===e.key)?n.doFilter(r):(n.validateFilter&&!n.remoteFilter&&n[i?"setError":"clearError"](Tc),n.hidePicker()),n.inputting=!1}syncInputWidth(){const e=this;if(e.usesChipView){const n=e.input,r=e._inputPadding||(e._inputPadding=Gn.getEdgeSize(n,"padding","lr")),i=n.value||"",o=Gn.measureText(i+"W",n,!1,e.element)+r.width;n.style.flex=`1 1 ${Math.ceil(o)}px`}}doFilter(e,n){var r;const i=this,{store:o,picker:s}=i,a=null==e||""===e;i.lastQuery=e,i.primaryFilter.setConfig({value:e,disabled:a}),i.remoteFilter&&o.clear(!0);const onAfterFilter=()=>{const{navigator:e,isVisible:n}=s;o.count?!a&&e&&(e.activeItem=0):i.remoteFilter||a||(e&&(e.activeItem=null),i.validateFilter&&i.setError(Tc)),n&&s.realign()};null==(r=i.filterPromise=o.filter())||r.then((()=>{i.filterPromise=null,onAfterFilter()})),i.inlinePicker||((null==s?void 0:s.isVisible)?0===s.lastAlignSpec.zone&&s.realign():i.showPicker(n)),i.filterPromise||onAfterFilter()}onStoreFilter({source:e}){const n=this,r=n._picker,i=null==r?void 0:r.element.dataset,{count:o}=e;n.remoteFilter&&(o?r&&(r.navigator.activeItem=0):n.validateFilter&&n.setError(Tc),n.filterSelected&&n.valueCollection.count&&(e.storage.onFiltersChanged({action:"splice",oldCount:1}),r&&r.refresh())),i&&(n.createOnUnmatched&&!o?i.addNewValue=n.L("L{addNewValue}")(n.primaryFilter.value):null==i||delete i.addNewValue)}onValueCollectionChange({source:e}){var n,r;const i=this,{multiSelect:o,_picker:s}=i,a=null!=(n=i.hidePickerOnSelect)?n:!o,l=o?e.values.slice():e.first,c=e.values.slice(),d=i._isUserAction||(null==s?void 0:s._isUserAction)||a&&i.pickerVisible||!1,u=i._value;a&&i.hidePicker(),!e.count&&i.required?i.setError(kc):(i.clearError(kc),i.clearError(Tc)),i.validateFilter&&l&&i.clearError(Tc),i.filterSelected&&(i.remoteFilter?(i.store.storage.onFiltersChanged({action:"splice",oldCount:1}),i._picker&&i._picker.refresh()):i.store.filter()),i._value=null,i._lastValue=null;const h=i.cacheCurrentValue(i.value);i.syncInputFieldValue(),i.syncEmpty(),i.isConfiguring||(i.triggerFieldChange({value:h,oldValue:u,userAction:d,valid:i.isValid}),null==(r=i.trigger)||r.call(i,"select",{record:l,records:c,userAction:d}),"select"===i.defaultAction&&i.trigger("action",{value:h,record:l,records:c,userAction:d}))}cacheCurrentValue(e){return this._value=e}onValueCollectionNoChange({toAdd:e}){!this.inlinePicker&&!this.multiSelect&&e.length&&this.pickerVisible&&this.picker.hide()}showPicker(){var e;const n=this,{picker:r}=n;n.readOnly||n.inlinePicker||(r.multiSelect=n.multiSelect,super.showPicker(...arguments),n.overlayAnchor&&!r.align.offset&&(r.align.offset=-r.anchorSize[1],r.realign()),r.restoreActiveItem&&(n.multiSelect?r.restoreActiveItem((null==(e=r.navigator)?void 0:e.previousActiveItem)||n.selected||0,!0):r.restoreActiveItem(n.selected||0,!0)),n.input.focus())}changePicker(e,n){const r=this,i=r.pickerWidth||(null==e?void 0:e.width),o=Ec.mergeConfigs({owner:r,store:r.store,selected:r.valueCollection,multiSelect:r.multiSelect,cls:r.listCls,displayField:r.displayField,forElement:r[r.pickerAlignElement],align:{matchSize:null==i,anchor:r.overlayAnchor,target:r[r.pickerAlignElement],minHeight:r.inlinePicker?null:40*Math.min(3,r.store.count)},[r.listItemTpl?"itemTpl":void 0]:r.listItemTpl,width:i,navigator:{keyEventTarget:r.input}},e);return r.inlinePicker&&Object.assign(o,{floating:!1,align:null,activateOnMouseover:!1,maxHeight:null,appendTo:r.element}),(e=Ec.reconfigure(n,e?o:null,r))&&(e.element.classList.add("b-combo-picker"),e.element.dataset.emptyText=r.emptyText?r.L(r.emptyText):r.L("L{noResults}"),e.ion({navigate:"onPickerNavigate",thisObj:r}),cn.on({element:e.element,pointerdown:e=>r.onPickerNavigate({event:e}),thisObj:r})),e}onPickerNavigate({event:e}){e.target.matches("[data-add-new-value]")&&this.addNewRecord(this.primaryFilter.value)}onPickerHide(){const e=this;super.onPickerHide(),e.multiSelect&&e.clearTextOnPickerHide&&(e.input.value="")}async internalOnKeyEvent(e){const n=this,r=n.input[n.inputValueAttr],i=r.length,{key:o}=e,{store:s,_picker:a,multiSelect:l}=n;if("keydown"===e.type&&(null==a?void 0:a.isVisible)&&a.navigator){const{activeItem:i}=a.navigator;if(i&&l&&o===n.multiValueSeparator)return n.input.value="",n.primaryFilter.setConfig({value:"",disabled:!0}),s.filter(),a.onItemClick(i,e),a.hide(),void e.preventDefault();if(!i&&n.createOnUnmatched&&(l&&o===n.multiValueSeparator||"Enter"===o))return e.preventDefault(),void await n.addNewRecord(r)}super.internalOnKeyEvent(...arguments),"keydown"===e.type&&"Enter"===o&&n.filterOnEnter&&i>=n.minChars&&(e.stopPropagation(),n.filterOnInput.now(e))}async addNewRecord(e){var n,r;const i=this,{store:o,_picker:s,valueCollection:a,multiSelect:l,primaryFilter:c}=i,d=o.remoteFilter&&o.autoCommit;i.filterPromise&&await i.filterPromise,d||(c.setConfig({value:"",disabled:!0}),o.filter());const[u]=o.add(i.callback(i.createOnUnmatched,i,[e,i]));if(o.isCommitting){let e;try{await o.commitPromise}catch(i){e=null==(r=null==(n=i.response)?void 0:n.parsedJson)?void 0:r.error}u.isPhantom&&(i.clearError(),i.setError(e||"L{Combo.recordNotCommitted}",!1,!0),o.remove(u),o.removed.remove(u))}d&&(c.setConfig({value:"",disabled:!0}),o.filter()),i.input.value="",o.includes(u)&&a.splice(l?a.count:0,l?0:a.count,u),null==s||s.hide()}changeCreateOnUnmatched(e){return!0===e&&(e=this.defaultRecordCreater),e}defaultRecordCreater(e){return this.store.createRecord({[this.displayField]:e})}updateLocalization(){var e;super.updateLocalization();const n=this,{displayField:r}=n;let{localizedDisplayFieldsMap:i}=n;if(!0===n.localizeDisplayFields){i||(n.localizedDisplayFieldsMap=i=new Map),!n.store&&n.buildItems&&(n.items=n.buildItems());for(const o of n.items)if(o.id){let s=i.get(o.id);!s&&(null==(e=o[r])?void 0:e.startsWith("L{"))&&(s=o[r],i.set(o.id,s)),s&&(o[r]=n.L(s))}n.syncInputFieldValue()}}};__publicField(Mc,"delayable",{filterOnInput:0});var Ac=class extends Rc{static get $name(){return"ComboChipView"}static get type(){return"combochipview"}static get defaultConfig(){return{closeHandler:"up.onChipClose",itemsFocusable:!1,multiSelect:!0,itemTpl(e){return w.encodeHtml(e[this.owner.displayField])},scrollable:{overflowY:"auto"}}}};Mc.initClass(),Ac.initClass(),class extends wl{static get $name(){return"ComboChipNavigator"}static get type(){return"combochipnavigator"}static get configurable(){return{allowShiftKey:!0}}onTargetClick(e){const n=this,r=e.target.closest(n.itemSelector);r&&!e.target.classList.contains("b-close-icon")&&(e.shiftKey||r.contains(e.target.closest("[data-noselect]"))||n.ownerCmp.selected.clear(),n.inClickHandler=!0,n.activeItem=r,n.inClickHandler=!1)}onKeyDown(e){"Enter"===e.key||e.target.selectionStart||e.target.selectionEnd||super.onKeyDown(e)}updateActiveItem(e,n){const r=this.ownerCmp;super.updateActiveItem(e,n),e&&!this.inClickHandler&&r.selected.add(r.getRecordFromElement(e))}navigatePrevious(e){const n=this.ownerCmp;n.navigator.activeItem&&!e.shiftKey&&n.selected.clear(),this.previous?super.navigatePrevious(e):this.activeItem=null}navigateNext(e){const n=this.ownerCmp;n.navigator.activeItem&&!e.shiftKey&&n.selected.clear(),this.next?super.navigateNext(e):this.activeItem=null}}.initClass(),Mc._$name="Combo";var Ic=class extends Rs{static get $name(){return"UndoRedoBase"}static get type(){return"undoredobase"}static get configurable(){return{project:null,stm:null,text:null,color:null,showZeroActionBadge:null,cls:"b-undo-controls b-toolbar",layoutStyle:{alignItems:"stretch",flexFlow:"row nowrap",overflow:"visible"},items:{undoBtn:{type:"button",icon:"b-icon-undo",tooltip:"L{UndoRedo.UndoLastAction}",onAction:"up.onUndo"},transactionsCombo:{type:"combo",valueField:"idx",editable:!1,store:{},emptyText:"L{UndoRedo.NoActions}",onAction:"up.onTransactionSelected",displayValueRenderer:"up.transactionsDisplayValueRenderer"},redoBtn:{type:"button",icon:"b-icon-redo",tooltip:"L{UndoRedo.RedoLastAction}",onAction:"up.onRedo"}}}}afterConstruct(){this.updateUndoRedoControls()}updateStm(e){this.detachListeners("undoredo"),null==e||e.ion({name:"undoredo",recordingstop:"updateUndoRedoControls",restoringstop:"updateUndoRedoControls",queueReset:"updateUndoRedoControls",disabled:"updateUndoRedoControls",thisObj:this})}changeItems(e){const{undoBtn:n,redoBtn:r}=e;return this.color&&(n&&(n.color=this.color),r&&(r.color=this.color)),this.text&&(n&&(n.text="L{UndoRedo.Undo}"),r&&(r.text="L{UndoRedo.Redo}")),super.changeItems(e)}updateProject(e){this.stm=e.stm}fillUndoRedoCombo(){const{transactionsCombo:e}=this.widgetMap;e&&(e.items=this.stm.queue.map(((e,n)=>[n,e||`Transaction ${n}`])))}updateUndoRedoControls(){const{stm:e,showZeroActionBadge:n}=this,{undoBtn:r,redoBtn:i}=this.widgetMap;r.badge=e.position||(n?"0":""),i.badge=e.length-e.position||(n?"0":""),r.disabled=!e.canUndo,i.disabled=!e.canRedo,this.fillUndoRedoCombo()}transactionsDisplayValueRenderer(e,n){var r;const i=(null==(r=this.stm)?void 0:r.position)||0;return`${i} undo actions / ${n.store.count-i} redo actions`}onUndo(){this.stm.canUndo&&this.stm.undo()}onRedo(){this.stm.canRedo&&this.stm.redo()}onTransactionSelected(e){const n=this.stm,r=e.value;r>=0&&(n.canUndo&&r<n.position?n.undo(n.position-r):n.canRedo&&r>=n.position&&n.redo(r-n.position+1))}};Ic.initClass(),Ic._$name="UndoRedoBase";var Fc=class extends Mc{static get $name(){return"BooleanCombo"}static get type(){return"booleancombo"}static get configurable(){return{positiveValue:!0,positiveText:null,negativeValue:!1,negativeText:null,store:{value:[],$config:"lazy"},value:!1}}changeStore(e,n){const r=this;return super.changeStore(new yi({data:[{id:r.positiveValue,text:r.positiveText||r.L("L{Object.Yes}")},{id:r.negativeValue,text:r.negativeText||r.L("L{Object.No}")}]}),n)}};Fc.initClass(),Fc._$name="BooleanCombo";var Pc=class extends(Rs.mixin(Rotatable_default)){onChildAdd(e){super.onChildAdd(e),e.ion({click:"resetValueCache",toggle:"onItemToggle",thisObj:this,prio:1e4})}onChildRemove(e){e.un({toggle:"resetValueCache",click:"resetValueCache",thisObj:this}),super.onChildRemove(e)}onItemToggle(e){const n=this;n.resetValueCache(),n.isSettingValue||n.toggleGroup&&!e.pressed||n.triggerFieldChange({value:n.value,userAction:!0,event:e})}resetValueCache(){this._value=null}createWidget(e){const n=this;return n.constructor.resolveType(e.type||"button").isButton&&(n.color&&!e.color&&(e.color=n.color),n.toggleGroup&&!e.toggleGroup&&("boolean"==typeof n.toggleGroup&&(n.toggleGroup=Pc.generateId("toggleGroup")),e.toggleGroup=n.toggleGroup)),n.columns&&(e.width=100/n.columns+"%"),e=super.createWidget(e),n.relayEvents(e,["click","action","toggle"]),e}updateRotate(e){this.eachWidget((n=>{!1!==n.rotate&&(n.rotate=e)}))}get value(){if(!this._value){const e=[];this.items.forEach((n=>{n.pressed&&void 0!==n.value&&e.push(n.value)})),this._value=e.join(this.valueSeparator)}return this._value}set value(e){const n=this,r=n.value;Array.isArray(e)||(e=null==e?[]:"string"==typeof e?e.split(n.valueSeparator):[e]),n._value=e.join(n.valueSeparator),n.isSettingValue=!0,n.items.forEach((n=>{void 0!==n.value&&(n.pressed=e.includes(n.value))})),n.isSettingValue=!1,n.isConfiguring||r===n.value||n.triggerFieldChange({value:n.value,userAction:!1})}updateDisabled(e){this.items.forEach((n=>n.disabled=e||!n.ignoreParentReadOnly&&this.readOnly))}updateReadOnly(e){super.updateReadOnly(e),this.updateDisabled(this.disabled)}get widgetClassList(){const e=super.widgetClassList;return this.columns&&e.push("b-columned"),e}},Oc=Pc;__publicField(Oc,"$name","ButtonGroup"),__publicField(Oc,"type","buttongroup"),__publicField(Oc,"configurable",{defaultType:"button",cls:null,items:null,color:null,toggleGroup:null,valueSeparator:",",columns:null,hideWhenEmpty:!0,defaultBindProperty:"value"}),Oc.initClass(),Oc._$name="ButtonGroup";var Lc=class extends La{static get $name(){return"CalendarPanel"}static get type(){return"calendarpanel"}static get configurable(){return{textContent:!1,date:{$config:{equal:"date"},value:null},month:{},year:null,weekStartDay:null,sixWeeks:!0,showWeekNumber:null,showWeekColumn:null,disabledDates:null,headerRenderer:null,weekRenderer:null,cellRenderer:null,disableWeekends:null,hideNonWorkingDays:null,hideNonWorkingDaysCls:"b-hide-nonworking-days",nonWorkingDays:null,tip:null,dayCellCls:"b-calendar-cell",dayHeaderCls:"b-calendar-day-header",disabledCls:"b-disabled-date",otherMonthCls:"b-other-month",weekendCls:"b-weekend",todayCls:"b-today",nonWorkingDayCls:"b-nonworking-day",dayNameFormat:"ddd",minRowHeight:{$config:["lazy"],value:null},minColumnWidth:{$config:["lazy"],value:null},disableOtherMonthCells:null,disableOtherMonthCellsCls:"b-disable-othermonth-cells",hideOtherMonthCells:null,hideOtherMonthCellsCls:"b-hide-othermonth-cells",animateTimeShift:!0}}construct(e){super.construct(e),this.refreshCount||this.refresh()}onPaint({firstPaint:e}){var n;null==(n=super.onPaint)||n.call(this,...arguments),e&&(this.refreshCount||this.refresh(),this.getConfig("minColumnWidth"),this.getConfig("minRowHeight"))}get overflowElement(){return this.weeksElement}doDestroy(){var e;null==(e=this.tip)||e.destroy(),super.doDestroy()}changeMinRowHeight(e){const n=parseInt(Gn.getStyleValue(this.element,"--min-row-height"),10)||75;return isNaN(e)?e:Math.max(parseInt(e)||0,n)}updateMinRowHeight(e){this.weekElements.forEach((n=>Gn.setLength(n,"minHeight",e))),this.scrollable={overflowY:!!e&&"auto"}}changeMinColumnWidth(e){const n=parseInt(Gn.getStyleValue(this.element,"--min-column-width"),10)||75;return null==e?e:Math.max(parseInt(e)||0,n)}updateMinColumnWidth(e){const n=this;n.weekdayCells.forEach((n=>Gn.setLength(n,"minWidth",e))),n.cellElements.forEach((r=>r.matches(`.${n.dayCellCls}`)&&Gn.setLength(r,"minWidth",e))),n.scrollable={overflowX:!!e&&"auto"},n.overflowElement.classList[e?"add":"remove"]("b-min-columnwidth")}getDateFromDomEvent(e){const n=(e.nodeType===Element.ELEMENT_NODE?e:e.target).closest(`#${this.id} [data-date]`);if(n)return Ct.parseKey(n.dataset.date)}changeTip(e,n){const r=this;return fc.reconfigure(n,e,{owner:r,defaults:{type:"tooltip",owner:r,id:`${r.id}-cell-tip`,forElement:r.bodyElement,forSelector:`.${r.dayCellCls}`}})}updateTip(e){this.detachListeners("tip"),null==e||e.ion({pointerOver:"onTipOverCell",name:"tip",thisObj:this})}updateElement(e,n){const r=this;super.updateElement(e,n),r.updateHideNonWorkingDays(r.hideNonWorkingDays),r.weekdayCells=Array.from(e.querySelectorAll(".b-calendar-day-header")),r.weekElements=Array.from(e.querySelectorAll(".b-calendar-week")),r.weekDayElements=Array.from(e.querySelectorAll(".b-calendar-days")),r.cellElements=[];for(let e=0,{length:n}=r.weekDayElements;e<n;e++)r.cellElements.push(r.weekDayElements[e].previousSibling,...r.weekDayElements[e].children)}changeDate(e){if(e="string"==typeof e?Ct.parse(e):new Date(e),isNaN(e))throw new Error("CalendarPanel date ingestion must be passed a Date, or a YYYY-MM-DD date string");return Ct.clearTime(e)}updateDate(e){this.month.date=e}updateDayNameFormat(){const e=new Date("2000-06-04T12:00:00");this.shortDayNames=[];for(let n=4;n<11;n++)e.setDate(n),this.shortDayNames.push(Ct.format(e,this.dayNameFormat))}get weekStartDay(){return"number"==typeof this._weekStartDay?this._weekStartDay:Ct.weekStartDay}updateWeekStartDay(e){const n=this;if(n._month){n.month.weekStartDay=e,n.dayNames=[];for(let e=0;e<7;e++)n.dayNames[e]=n.shortDayNames[n.canonicalDayNumbers[e]];n.refreshCount&&n.refresh()}}updateHideNonWorkingDays(e){var n;this.contentElement.classList.toggle(this.hideNonWorkingDaysCls,Boolean(e)),null==(n=this.scrollable)||n.syncOverflowState(),this._month&&(this.month.hideNonWorkingDays=e),this.isConfiguring||this.refresh()}updateHideOtherMonthCells(e){var n;this.element.classList.toggle(this.hideOtherMonthCellsCls,Boolean(e)),null==(n=this.scrollable)||n.syncOverflowState()}updateDisableOtherMonthCells(e){var n;this.element.classList.toggle(this.disableOtherMonthCellsCls,Boolean(e)),null==(n=this.scrollable)||n.syncOverflowState()}get nonWorkingDays(){return this._nonWorkingDays||this._localeNonWorkingDays||(this._localeNonWorkingDays=Ct.nonWorkingDays)}get weekends(){return this._localeWeekends||(this._localeWeekends=Ct.weekends)}changeNonWorkingDays(e){return Et.assign({},e)}updateNonWorkingDays(e){var n;this._month&&(this.month.nonWorkingDays=e,this.refresh(),null==(n=this.scrollable)||n.syncOverflowState())}get visibleDayColumnIndex(){return this.month.visibleDayColumnIndex}get dayColumnIndex(){return this.month.dayColumnIndex}get canonicalDayNumbers(){return this.month.canonicalDayNumbers}get visibleColumnCount(){return this.month.visibleColumnCount}get weekLength(){return this.month.weekLength}get startDate(){return this.month.startDate}get duration(){return Ct.diff(this.month.startDate,this.month.endDate,"day")+1}get endDate(){const{endDate:e}=this.month;if(e)return Ct.add(e,1,"day")}changeMonth(e,n){const r=this;if(!(e instanceof Ql)){if("number"==typeof e){if(n)return void(n.month=e);const i=r.date||Ct.clearTime(new Date);i.setMonth(e),e={date:i}}e=Ql.new({weekStartDay:r.weekStartDay,nonWorkingDays:r.nonWorkingDays,hideNonWorkingDays:r.hideNonWorkingDays,sixWeeks:r.sixWeeks},e)}return e.ion({dateChange:"onMonthDateChange",thisObj:r}),e}onMonthDateChange({source:e,newDate:n,oldDate:r,changes:i}){const o=this;o.year=e.year,o.isConfiguring||((!o.getCell(n)||i.m||i.y)&&(o.refresh(),o.animateTimeShift&&o.isVisible&&Gn.slideIn(o.contentElement,n>r?1:-1)),o.trigger("dateChange",{changes:i,value:n,oldValue:r}))}updateYear(e){this.month.year=e}updateShowWeekNumber(e){this.updateShowWeekColumn(e)}updateShowWeekColumn(e){const n=this;n.element.classList[e?"add":"remove"]("b-show-week-column"),n.floating&&(n.isAligning||n.realign())}updateSixWeeks(e){this.month&&(this.month.sixWeeks=e,this.refresh())}refresh(){this.doRefresh()}doRefresh(){var e;this.getConfig("element");const n=this,r=null!=n.timeZone?n.timeZone:null==(e=n.project)?void 0:e.timeZone,i=null!=r?ll.toTimeZone(new Date,r):new Date,{weekElements:o,weekDayElements:s,date:a,month:l,dayCellCls:c,dayHeaderCls:d,disabledCls:u,otherMonthCls:h,weekendCls:g,todayCls:p,nonWorkingDayCls:m,nonWorkingDays:f,canonicalDayNumbers:b,sixWeeks:v}=n;if(i.setHours(0,0,0,0),!a)return void(n.date=i);n.trigger("beforeRefresh"),n.getConfig("dayNameFormat");for(let e=0;e<7;e++){const r=n.weekdayCells[e],i=n.canonicalDayNumbers[e],o={[d]:1,[g]:Ct.weekends[i],[m]:f[i]};n.headerRenderer?(r.innerHTML="",n.callback(n.headerRenderer,n,[r,e,i])):Gn.setInnerText(r,n.shortDayNames[i]),Gn.syncClassList(r,o),r.dataset.columnIndex=e,r.dataset.cellDay=i}let y=0,w=0,C=6;for(let e=6;e>=0;e--)if(!f[b[e]]){C=e;break}o[4].classList.toggle("b-hide-display",l.weekCount<5&&!v),o[5].classList.toggle("b-hide-display",l.weekCount<6&&!v),l.eachWeek(((e,r)=>{const a=s[y],d=[a.previousSibling,...a.children];o[y].dataset.week=`${e[0]},${e[1]}`,n.weekRenderer?n.callback(n.weekRenderer,n,[d[0],e]):d[0].innerText=e[1];for(let s=0;s<7;s++){const a=r[s],b=a.getDay(),v=Ct.makeKey(a),S=f[b],x=d[s+1],D={[c]:1,[u]:n.isDisabledDate(a),[h]:a.getMonth()!==l.month,[g]:Ct.weekends[b],[p]:a.getTime()===i.getTime(),[m]:S,"b-last-working-day":s===C,"b-first-visible-cell":!(a-(n.firstVisibleDate||-1)),"b-last-visible-cell":!(a-(n.lastVisibleDate||-1)),[`b-day-of-week-${b}`]:1};Gn.syncClassList(x,D),x.dataset.date=v,x.dataset.cellIndex=w,x.dataset.columnIndex=s,x.lastDomConfig&&(delete x.lastDomConfig.class,delete x.lastDomConfig.className),n.cellRenderer?n.callback(n.cellRenderer,n,[{cell:x,date:a,day:b,row:o[y],rowIndex:y,cellIndex:w,columnIndex:s,visibleColumnIndex:n.visibleDayColumnIndex[b],week:e,key:v}]):x.innerHTML=a.getDate(),w++}y++})),n.visibleWeekCount=y,n.floating&&(n.isAligning||n.realign()),n.refreshCount=(n.refreshCount||0)+1,n.trigger("refresh")}isDisabledDate(e){const n=e.getDay(),{disabledDates:r,nonWorkingDays:i}=this;return!(!this.disableWeekends||!i[n])||(r?Array.isArray(r)?(e=Ct.clearTime(e,!0),r.some((n=>!(Ct.clearTime(n,!0)-e)))):this.callback(this.disabledDates,this,[e]):void 0)}get bodyConfig(){const e=super.bodyConfig,n=[];e.children=[{tag:"div",className:"b-calendar-row b-calendar-weekdays",reference:"weekdaysHeader",children:[{class:"b-week-number-cell"},...oe.fill(7,{class:this.dayHeaderCls}),Gn.scrollBarPadElement]},{className:"b-weeks-container notranslate",reference:"weeksElement",children:n}];for(let e=0;e<6;e++){const r={className:"b-calendar-row b-calendar-week",dataset:{rowIndex:e},children:[{className:"b-week-number-cell"},{className:"b-calendar-days",children:[{},{},{},{},{},{},{}],syncOptions:{ignoreRefs:!0,strict:!1}}]};n.push(r)}return e}get firstVisibleDate(){if(this.hideOtherMonthCells){const{year:e,month:n}=this.month;return new Date(e,n,1)}for(const e=this,n=e.month.startDate;;n.setDate(n.getDate()+1))if(!e.hideNonWorkingDays||!e.nonWorkingDays[n.getDay()])return n}get lastVisibleDate(){const e=Ct.add(this.endDate,-1,"d");if(this.hideOtherMonthCells)return e;for(const n=this,r=e;;r.setDate(r.getDate()-1))if(!n.hideNonWorkingDays||!n.nonWorkingDays[r.getDay()])return r}getCell(e,n){"string"!=typeof e&&(e=Ct.makeKey(e));const r=this.weeksElement.querySelector(`[data-date="${e}"]`);if(r&&(!n||!r.classList.contains(this.otherMonthCls)))return r}onTipOverCell({source:e,target:n}){e.date=Ct.parseKey(n.dataset.date)}updateLocalization(){this._localeNonWorkingDays=this._localeWeekends=null,this.updateDayNameFormat(),this.updateWeekStartDay(this.weekStartDay),super.updateLocalization()}};Lc.initClass(),Lc._$name="CalendarPanel";var whenNotChecked=e=>!e.value,_c=class extends Cc{static get $name(){return"Checkbox"}static get type(){return"checkbox"}static get alias(){return"check"}static get configurable(){return{inputType:"checkbox",autoCollapse:null,containerDefaults:{syncableConfigs:{disabled:e=>e.disabled||!e.value},syncConfigTriggers:{autoCollapse:1,value:1}},text:"",checkedValue:!0,uncheckedValue:!1,color:null,value:"",toggleGroup:null,localizableProperties:["label","text"]}}construct(e){"checked"in e&&((e=Et.assign({},e)).value=e.checked,delete e.checked),super.construct(e),this.syncHasText()}get textLabelCls(){return"b-checkbox-label"}get innerElements(){return[this.inputElement,{tag:"label",class:this.textLabelCls,for:`${this.id}-input`,reference:"textLabel",html:this.text||""}]}get inputElement(){const e=super.inputElement;return this.toggleGroup&&(e.dataset={group:this.toggleGroup}),e.listeners={click:"internalOnClick",change:"internalOnChange",input:"internalOnInput"},e}get checked(){return this.value}set checked(e){this.value=e}syncHasText(){this.element.classList[this.text?"add":"remove"]("b-text")}updateText(e){this.textLabel&&(this.syncHasText(),this.textLabel.innerHTML=e)}afterSyncChildConfigs(e){super.afterSyncChildConfigs(e);let{autoCollapse:n}=this;n&&(n=!0===n?whenNotChecked:n,e.collapsed=n(this))}assignFieldValue(e,n,r){this.value=r===this.checkedValue||r!==this.uncheckedValue&&null}fetchInputValue(){this.readOnly||(this.value=this.input.checked)}gatherValue(e){var n;const r=this,i=r.value?r.checkedValue:r.uncheckedValue,o=void 0!==i,{valueName:s}=r;o&&(e[s]=i),r.gatherValues(e,o),!0===i&&(null==(n=e[s])?void 0:n.value)===i&&delete e[s].value}changeValue(e){return"false"!==e&&Boolean(e)}updateValue(e){var n;const r=this,i=r.input.checked!==e;r.input.checked=e,null==(n=r.container)||n.syncChildConfigs(),!i||r.inputting||r.isConfiguring||(r.uncheckToggleGroupMembers(),r.triggerChange(!1))}get inputValueAttr(){return"checked"}updateColor(e,n){const r=this.element.classList;n&&r.remove(n),e&&r.add(e)}getToggleGroupMembers(){const e=this,{checked:n,toggleGroup:r,input:i,type:o}=e,s=[];return n&&r&&Gn.forEachSelector(e.rootElement,`input[type=${o}][data-group=${r}]`,(e=>{if(e!==i){const n=bs.fromElement(e);n&&s.push(n)}})),s}uncheckToggleGroupMembers(){this.checked&&this.toggleGroup&&this.getToggleGroupMembers().forEach((e=>e.checked=!1))}check(){this.checked=!0}uncheck(){this.checked=!1}toggle(){this.checked=!this.checked}internalOnClick(e){return this.readOnly?(e.preventDefault(),!1):this.trigger("click",{event:e})}internalOnChange(e){const n=this;n.readOnly&&n.value!==n.input.checked?n.input.checked=n.value:(n.value=n.input.checked,n.inputting||(n.inputting=!0,n.triggerChange(!0),n.inputting=!1))}updateInputReadOnly(e){}triggerChange(e){const n=this,{checked:r}=n.input,i={checked:r,value:r,userAction:e,valid:!0};if(!(!r&&e&&n.toggleGroup&&n.getToggleGroupMembers().filter((e=>e.isVisible&&!e.disabled)).length||!1===n.trigger("beforeChange",i)))return n.triggerFieldChange(i,!1),e&&n.uncheckToggleGroupMembers(),n.trigger("action",i),n.trigger("change",i),!0;n.input.checked=n._value=!r}};_c.initClass(),_c._$name="Checkbox";var $c=class extends La{construct(e){super.construct({year:(new Date).getFullYear(),...e}),cn.on({element:this.contentElement,click:"onYearClick",delegate:".b-yearpicker-year",thisObj:this})}get focusElement(){return this.getYearButton(this.year)||this.getYearButton(this.startYear)}getYearButton(e){return this.contentElement.querySelector(`.b-yearpicker-year[data-year="${e}"]`)}get value(){return this.year}set value(e){this.year=e}onYearClick({target:e}){const n=Math.min(Math.max(parseInt(e.innerText),this.minYear||1),this.maxYear||9999);this.year===n?this.trigger("select",{oldValue:n,value:n}):this.year=n}handleTitleClick(e){this.trigger("titleClick",e)}previous(){this.startYear=this.startYear-this.yearButtonCount}next(){this.startYear=this.endYear+1}ingestYear(e){if(!isNaN(e))return Et.isDate(e)?e.getFullYear():e}changeYear(e){if(e=this.ingestYear(e))return Math.min(Math.max(e,this.minYear||1),this.maxYear||9999)}updateYear(e,n){const r=this;!r.startYear||e>r.endYear?r.startYear=e:e<r.startYear&&(r.startYear=e-(r.yearButtonCount-1)),r.isConfiguring||r.trigger("select",{oldValue:n,value:e})}get endYear(){return this.startYear+this.yearButtonCount-1}changeStartYear(e){if(e=this.ingestYear(e))return e=this.minYear?Math.max(e,this.minYear):e,this.maxYear?Math.min(e,this.maxYear-(this.yearButtonCount-1)):e}async updateStartYear(e,n){this.isVisible&&Gn.slideIn(this.contentElement,Math.sign(e-n))}composeBody(){this.getConfig("year");const{startYear:e}=this,n=super.composeBody(),r=n.children[this.tbar?1:0].children=[];this.widgetMap.title.text=`${`000${e}`.slice(-4)} - ${`000${this.endYear}`.slice(-4)}`;for(let n=0,i=e;n<this.yearButtonCount;n++,i++)r.push({tag:"button",dataset:{year:i},class:{"b-yearpicker-year":1,"b-selected":i===this.year},text:`000${i}`.slice(-4)});return n}};__publicField($c,"$name","YearPicker"),__publicField($c,"type","yearpicker"),__publicField($c,"configurable",{textContent:!1,tbar:{overflow:null,items:{previous:{type:"tool",cls:"b-icon b-icon-previous",onAction:"up.previous",weight:100},title:{type:"button",cls:"b-yearpicker-title",weight:200,onAction:"up.handleTitleClick"},next:{type:"tool",cls:"b-icon b-icon-next",onAction:"up.next",weight:300}}},itemCls:"b-year-container",yearButtonCount:12,year:null,minYear:null,maxYear:null,startYear:null}),$c.initClass(),$c._$name="YearPicker";var jc=class extends Sc{static get $name(){return"DisplayField"}static get type(){return"displayfield"}static get alias(){return"display"}static get configurable(){return{readOnly:!0,editable:!1,cls:"b-display-field",template:null,ariaElement:"displayElement"}}get focusElement(){}changeReadOnly(){return!0}changeEditable(){return!1}get inputElement(){return{tag:"span",id:`${this.id}-input`,reference:"displayElement",html:this.template?this.template(this.value):w.encodeHtml(this.value)}}};jc.initClass(),jc._$name="DisplayField";var generateMonthNames=()=>Ct.getMonthNames().map(((e,n)=>[n,e])),dateSort=(e,n)=>e.valueOf()-n.valueOf(),zc=Object.freeze([]);(class extends Mc{static get $name(){return"ReadOnlyCombo"}static get type(){return"readonlycombo"}static get configurable(){return{editable:!1,inputAttributes:{tag:"div",tabIndex:-1},inputValueAttr:"innerHTML",highlightExternalChange:!1,monitorResize:!1,triggers:{expand:!1},picker:{align:{align:"t-b",axisLock:!0,matchSize:!1},cls:"b-readonly-combo-list",scrollable:{overflowX:!1}}}}}).initClass();var Bc=class extends Lc{static get $name(){return"DatePicker"}static get type(){return"datepicker"}static get delayable(){return{refresh:"raf"}}static get configurable(){return{activeDate:{value:new Date,$config:{equal:"date"}},focusable:!0,textContent:!1,tbar:{overflow:null,items:{prevYear:{cls:"b-icon b-icon-first",onAction:"up.gotoPrevYear",tooltip:"L{DatePicker.gotoPrevYear}"},prevMonth:{cls:"b-icon b-icon-previous",onAction:"up.gotoPrevMonth",tooltip:"L{DatePicker.gotoPrevMonth}"},fields:{type:"container",cls:"b-datepicker-title",items:{monthField:{type:"readonlycombo",cls:"b-datepicker-monthfield",items:generateMonthNames(),internalListeners:{select:"up.onMonthPicked"}},yearButton:{type:"button",cls:"b-datepicker-yearbutton",internalListeners:{click:"up.onYearPickerRequested"}}}},nextMonth:{cls:"b-icon b-icon-next",onAction:"up.gotoNextMonth",tooltip:"L{DatePicker.gotoNextMonth}"},nextYear:{cls:"b-icon b-icon-last",onAction:"up.gotoNextYear",tooltip:"L{DatePicker.gotoNextYear}"}}},yearPicker:{value:{type:"YearPicker",yearButtonCount:16,trapFocus:!0,positioned:!0,hidden:!0,internalListeners:{titleClick:"up.onYearPickerTitleClick",select:"up.onYearPicked"}},$config:"lazy"},date:null,minDate:{value:null,$config:{equal:"date"}},maxDate:{value:null,$config:{equal:"date"}},focusDisabledDates:null,multiSelect:!1,selection:{$config:{equal:(e,n)=>e&&e.equals(n)},value:null},editMonth:!0,dayNameFormat:"dd",trapFocus:!0,role:"grid",focusDescendant:!0,alwaysRefreshOnMonthChange:null}}static get prototypeProperties(){return{outOfRangeCls:"b-out-of-range",activeCls:"b-active-date",selectedCls:"b-selected-date"}}construct(e){const n=this;super.construct(e),n.externalCellRenderer=n.cellRenderer,n.cellRenderer=n.internalCellRenderer,n.element.setAttribute("aria-activedescendant",`${n.id}-active-day`),n.weeksElement.setAttribute("role","grid"),n.weekElements.forEach((e=>e.setAttribute("role","row"))),n.element.setAttribute("ariaLabelledBy",n.widgetMap.fields.id),cn.on({element:n.weeksElement,click:{handler:"onCellClick",delegate:`.${n.dayCellCls}:not(.${n.disabledCls}):not(.${n.outOfRangeCls})`},mousedown:{handler:"onCellMousedown",delegate:`.${n.dayCellCls}`},thisObj:n}),n.widgetMap.monthField.readOnly=n.widgetMap.yearButton.disabled=!n.editMonth,n.refresh.flush()}afterHide(){var e;null==(e=this._yearPicker)||e.hide(),super.afterHide(...arguments)}doDestroy(){var e,n;null==(e=this.yearButton)||e.destroy(),null==(n=this.monthField)||n.destroy(),super.doDestroy()}get focusElement(){return this.weeksElement.querySelector(`.${this.dayCellCls}[tabIndex="0"]`)}doRefresh(){const e=this,n=e.focusElement,r=Ct.betweenLesser(e.activeDate,e.month.startDate,e.month.endDate)?e.activeDate:e._activeDate=e.date;super.doRefresh(...arguments);const i=Ct.parseKey(null==n?void 0:n.dataset.date);r-i&&e.syncActiveDate(r,i)}internalCellRenderer({cell:e,date:n}){const r=this,{activeCls:i,selectedCls:o,externalCellRenderer:s}=r,a=r.isSelectedDate(n),l={[i]:i&&r.isActiveDate(n),[o]:a,[r.outOfRangeCls]:r.minDate&&n<r.minDate||r.maxDate&&n>r.maxDate};if(a&&r.multiSelect){const e=!r.isSelectedDate(Ct.add(n,-1,"d")),i=!r.isSelectedDate(Ct.add(n,1,"d"));l["b-range-start"]=e,l["b-range-end"]=i,l["b-in-range"]=!e&&!i}Gn.updateClassList(e,l),e.innerHTML=`<div class="b-datepicker-cell-inner">${n.getDate()}</div>`,e.setAttribute("role","gridcell"),e.setAttribute("aria-label",Ct.format(n,"MMMM D, YYYY")),r.isActiveDate(n)?e.id=`${r.id}-active-day`:e.removeAttribute("id"),s&&(arguments[0].cell=e.firstChild,r.callback(s,this,arguments))}onCellMousedown(e){const n=e.target.closest("[data-date]");e.preventDefault(),n.focus(),this.activeDate=Ct.parseKey(n.dataset.date)}onCellClick(e){const n=e.target.closest("[data-date]");this.onUIDateSelect(Ct.parseKey(n.dataset.date),e)}onMonthDateChange({newDate:e,changes:n}){this.getConfig("tbar"),super.onMonthDateChange(...arguments),(n.m||n.y)&&(this.widgetMap.monthField.value=e.getMonth(),this.widgetMap.yearButton.text=e.getFullYear())}onUIDateSelect(e,n){const r=this,{lastClickedDate:i,multiSelect:o}=r;r.lastClickedDate=e,r.isDisabledDate(e)||(r.activatingEvent=n,o?r.handleMultiSelect(i,e,n):(r.selection=e,r.floating&&r.hide()),r.activatingEvent=null)}handleMultiSelect(e,n,r){const i=this,{multiSelect:o}=i,s=i._selection||(i._selection=new Hc),a=s.dates,l="range"===o,{size:c,generation:d}=s,u=c&&{[Ct.makeKey(Ct.add(a[0],-1,"d"))]:1,[Ct.makeKey(a[0])]:1,[Ct.makeKey(a[a.length-1])]:1,[Ct.makeKey(Ct.add(a[a.length-1],1,"d"))]:1},h=s.has(n)?"delete":"add",g=l&&(null==u?void 0:u[Ct.makeKey(n)]);if(r.ctrlKey)!0!==o&&c&&!g||(s[h](n),l&&!s.has(i.rangeStartDate)&&i.rangeStartDate.setDate(i.rangeStartDate.getDate()+(n<a[1]?1:-1)));else if(r.shiftKey&&c){const[r,o]=[new Date(l?i.rangeStartDate||(i.rangeStartDate=a[0]):e),n].sort(dateSort);l&&s.clear();for(const e=r;e<=o;e.setDate(e.getDate()+1))s.add(e)}else s.has(n)&&1===s.size||(s.clear(),s.add(n));const p=s.size;1===p?i.rangeStartDate=n:p||(i.rangeStartDate=null),s.generation!==d&&i.updateSelection(s)}changeSelection(e){const n=this;let r,i;if(e)if(e.forEach||(e=[e]),e.forEach(((r,i)=>e[i]=n.changeDate(r))),i=e[0],e.sort(dateSort),"range"===n.multiSelect&&2===e.length){r=new Hc;for(const n=new Date(e[0]);n<=e[1];n.setDate(n.getDate()+1))r.add(n)}else i=e[0],r=new Hc(e);else r=new Hc;return i&&(n.activeDate=n.rangeStartDate=Ct.clearTime(i)),r}updateMultiSelect(e){this.element.classList.toggle("b-multiselect",Boolean(e)),e||(this.selection=[...this.selection][0])}updateSelection(e){const n=this,{dates:r}=e,i="range"===n.multiSelect?[r[0],r[r.length-1]]:r;r.length&&(n.date=r[0]),n.isConfiguring||(n.refresh.now(),n.trigger("selectionChange",{selection:i,userAction:Boolean(n.activatingEvent)}))}get selection(){const{_selection:e}=this,n=e?e.dates:zc;return"range"===this.multiSelect&&n.length?[n[0],n[n.length-1]]:n}onInternalKeyDown(e){const n=this,r=e.key.trim()||e.code,i=n.activeDate;let o=new Date(i);if("Escape"===r&&n.floating)return n.hide();if(i&&n.weeksElement.contains(e.target)){do{switch(r){case"ArrowLeft":e.preventDefault(),e.ctrlKey?o=n.gotoPrevMonth():o.setDate(o.getDate()-1);break;case"ArrowUp":e.preventDefault(),o.setDate(o.getDate()-7);break;case"ArrowRight":e.preventDefault(),e.ctrlKey?o=n.gotoNextMonth():o.setDate(o.getDate()+1);break;case"ArrowDown":e.preventDefault(),o.setDate(o.getDate()+7);break;case"Enter":return n.onUIDateSelect(i,e)}}while(n.isDisabledDate(o)&&!n.focusDisabledDates);if(n.minDate&&o<n.minDate)return;if(n.maxDate&&o>n.maxDate)return;n.activeDate=o}}changeMinDate(e){return e&&Lc.prototype.changeDate.apply(this,arguments)}updateMinDate(e){this._yearpicker&&(this._yearpicker.minYear=null==e?void 0:e.getFullYear()),this.refresh()}changeMaxDate(e){return e&&Lc.prototype.changeDate.apply(this,arguments)}updateMaxDate(e){this._yearpicker&&(this._yearpicker.maxYear=null==e?void 0:e.getFullYear()),this.refresh()}changeDate(e){return Ct.clamp(super.changeDate(e),this.minDate,this.maxDate)}updateDate(e){const n=this;n.isConfiguring&&!n.initializingActiveDate&&(n.selection=e),n.month.date&&e.getMonth()!==n.month.month&&n.getCell(e)&&!n.alwaysRefreshOnMonthChange&&!n.isNavigating||super.updateDate(e)}changeActiveDate(e,n){if(!1!==this.trigger("beforeActiveDateChange",{activeDate:e,oldActiveDate:n})){if(e=e?this.changeDate(e):this.date||(this.date=Ct.clearTime(new Date)),isNaN(e))throw new Error("DatePicker date ingestion must be passed a Date, or a YYYY-MM-DD date string");return Ct.clamp(e,this.minDate,this.maxDate)}}updateActiveDate(e,n){const r=this,{isConfiguring:i}=r;!i&&r.getCell(e)||(r.initializingActiveDate=i,r.date=e,r.initializingActiveDate=!1),i||r.refresh.isPending||r.syncActiveDate(e,n)}syncActiveDate(e,n){const r=this,{activeCls:i}=r,o=r.getCell(e),s=n&&r.getCell(n),a=Gn.getActiveElement(r.element);o.setAttribute("tabIndex",0),i&&o.classList.add(i),o.id=`${r.id}-active-day`,r.weeksElement.contains(a)&&o.focus(),s&&s!==o&&(s.removeAttribute("tabIndex"),i&&s.classList.remove(i),s.removeAttribute("id"))}set value(e){const n=this,{selection:r,duration:i}=n;if(e){if(e=n.changeDate(e,n.value),"range"===n.multiSelect&&2===(null==r?void 0:r.length))return Ct.betweenLesserEqual(e,...r)||(e<r[0]?n.selection=[e,Ct.add(e,i-1,"d")]:n.selection=[Ct.add(e,-(i-1),"d"),e]),void(n.date=n.activeDate=e);void 0!==e&&(n.selection=e)}else n.date=new Date,n.selection=null}get value(){return this.selection[this.selection.length-1]}get duration(){return"range"===this.multiSelect?Ct.diff(...this.selection,"d")+1:1}gotoPrevYear(){return this.goto(-1,"year")}gotoPrevMonth(){return this.goto(-1,"month")}gotoNextMonth(){return this.goto(1,"month")}gotoNextYear(){return this.goto(1,"year")}goto(e,n){const r=this,{activeDate:i}=r,o=i&&r.getCell(i);let s;s="month"===n&&o&&(null==i?void 0:i.getMonth())===r.month.month+e?i:Ct.add(o?i:r.date,e,n);const a=new Date(s);a.setDate(1);const l=Ct.add(Ct.add(a,1,"month"),-1,"day");if(r.minDate&&e<0&&l<r.minDate||r.maxDate&&e>0&&a>r.maxDate)return;r.isNavigating=!0;const c=r.date=s;return o&&(r.activeDate=s),r.isNavigating=!1,c}isActiveDate(e){return!(e-this.activeDate)}isSelectedDate(e){var n;return null==(n=this._selection)?void 0:n.has(e)}onMonthPicked({record:e,userAction:n}){var r;n&&(this.activeDate=Ct.add(this.activeDate,e.value-this.activeDate.getMonth(),"month"),null==(r=this.focusElement)||r.focus())}onYearPickerRequested(){const{yearPicker:e}=this;e.isVisible?e.hide():(e.year=e.startYear=this.activeDate.getFullYear(),e.show(),e.focus())}onYearPickerTitleClick(){this.yearPicker.hide()}onYearPicked({value:e,source:n}){const r=new Date(this.activeDate);r.setFullYear(e),this.activeDate=r,this.focusElement&&Gn.focusWithoutScrolling(this.focusElement),n.hide()}changeYearPicker(e,n){var r,i;return $c.reconfigure(n,e?$c.mergeConfigs({owner:this,appendTo:this.element,minYear:null==(r=this.minDate)?void 0:r.getFullYear(),maxYear:null==(i=this.maxDate)?void 0:i.getFullYear()},e):null,this)}get childItems(){const{_yearPicker:e}=this,n=super.childItems;return e&&n.push(e),n}updateLocalization(){const{monthField:e}=this.widgetMap,n=generateMonthNames();this.isConfiguring||n.every(((n,r)=>n[1]===e.store.getAt(r).text))||(n[e.value].selected=!0,e.items=n),super.updateLocalization()}},Hc=class extends Set{add(e){return e=Ct.makeKey(e),this.has(e)||(this.generation=(this.generation||0)+1),super.add(e)}delete(e){return e=Ct.makeKey(e),this.has(e)&&this.generation++,super.delete(e)}has(e){return super.has(Ct.makeKey(e))}clear(){return this.size&&this.generation++,super.clear()}equals(e){return Array.isArray(e)&&(e=new Hc(e)),e.size===this.size&&[...this].every((n=>e.has(n)))}get dates(){return[...this].sort().map((e=>Ct.parseKey(e)))}};Bc.initClass(),Bc._$name="DatePicker";var Vc=class extends xc{static get $name(){return"DateField"}static get type(){return"datefield"}static get alias(){return"date"}static get configurable(){return{format:"L",strictParsing:!1,fallbackFormat:"YYYY-MM-DD",timeFormat:"HH:mm:ss:SSS",keepTime:!1,pickerFormat:null,validateDateOnly:null,triggers:{expand:{cls:"b-icon-calendar",handler:"onTriggerClick",weight:200},back:{cls:"b-icon b-icon-angle-left b-step-trigger",key:"Shift+ArrowDown",handler:"onBackClick",align:"start",weight:100},forward:{cls:"b-icon b-icon-angle-right b-step-trigger",key:"Shift+ArrowUp",handler:"onForwardClick",align:"end",weight:100}},calendarContainerCls:"",min:null,max:null,step:!1,stepTriggers:null,weekStartDay:null,picker:{type:"datepicker",role:"dialog",floating:!0,scrollAction:"realign",align:{align:"t0-b0",axisLock:!0}},value:null}}changePicker(e,n){const r=this,i={owner:r,forElement:r[r.pickerAlignElement],minDate:r.min,maxDate:r.max,weekStartDay:r._weekStartDay,align:{anchor:r.overlayAnchor,target:r[r.pickerAlignElement]},onSelectionChange:({selection:e,source:n})=>{n.isVisible&&(r._isUserAction=r._isPickerInput=!0,r.value=e[0],r._isPickerInput=r._isUserAction=!1,n.hide())}};r.calendarContainerCls&&(i.cls=r.calendarContainerCls),r.value?i.value=r.value:i.activeDate=new Date;const o=Bc.reconfigure(n,e,{owner:r,defaults:i});return null==o||o.refresh.flush(),o}get backShiftDate(){return Ct.add(this.value,-1*this._step.magnitude,this._step.unit)}onBackClick(){const e=this,{min:n}=e;if(!e.readOnly&&e.value){const r=e.backShiftDate;(!n||n.getTime()<=r)&&(e._isUserAction=!0,e.value=r,e._isUserAction=!1)}}get forwardShiftDate(){return Ct.add(this.value,this._step.magnitude,this._step.unit)}onForwardClick(){const e=this,{max:n}=e;if(!e.readOnly&&e.value){const r=e.forwardShiftDate;(!n||n.getTime()>=r)&&(e._isUserAction=!0,e.value=r,e._isUserAction=!1)}}showPicker(e){if(this.readOnly)return;const n=this,{_picker:r}=n;if(r){const e={minDate:n.min,maxDate:n.max};n.value?e.value=n.value:r.activeDate||(e.activeDate=new Date),r.setConfig(e)}super.showPicker(e)}focusPicker(){this.picker.focus()}get isValid(){const e=this;e.clearError("L{Field.minimumValueViolation}",!0),e.clearError("L{Field.maximumValueViolation}",!0);let n=e.value;if(n){const{min:r,max:i,validateDateOnly:o}=e;if(o&&(n=Ct.clearTime(n,!1)),r&&n<r)return e.setError("L{Field.minimumValueViolation}",!0),!1;if(i&&n>i)return e.setError("L{Field.maximumValueViolation}",!0),!1}return super.isValid}transformDateValue(e){const n=this;return null!=e&&(Ct.isDate(e)||(e="string"==typeof e?Ct.parse(e,n.format,n.strictParsing)||Ct.parse(e,n.fallbackFormat,n.strictParsing):new Date(e)),Ct.isValidDate(e))?(!n.min||e-n.min>-Ct.MS_PER_DAY)&&(!n.max||e<=n.max)?n.transformTimeValue(e):e:null}transformTimeValue(e){const n=this,{keepTime:r}=n;if(e=Ct.clone(e),r)if("entered"!==r){const i=Ct.parse(r,n.timeFormat);Ct.isValidDate(i)?Ct.copyTimeValues(e,i):Ct.isValidDate(n.value)&&Ct.copyTimeValues(e,n.value)}else n._isPickerInput&&Ct.isValidDate(n.value)&&Ct.copyTimeValues(e,n.value);else Ct.clearTime(e,!1);return e}changeMin(e){return this.transformDateValue(e)}updateMin(e){const{input:n,_picker:r}=this;n&&(null==e?n.removeAttribute("min"):n.min=e),r&&(r.minDate=e),this.syncInvalid()}changeMax(e){return this.transformDateValue(e)}updateMax(e){const{input:n,_picker:r}=this;n&&(null==e?n.removeAttribute("max"):n.max=e),r&&(r.maxDate=e),this.syncInvalid()}get weekStartDay(){return"number"==typeof this._weekStartDay?this._weekStartDay:Ct.weekStartDay}updateWeekStartDay(e){this._picker&&(this._picker.weekStartDay=e)}changeValue(e,n){const r=this,i=r.transformDateValue(e);if(!e||i){if(r.clearError("L{invalidDate}"),r.hasChanged(n,i))return super.changeValue(i,n);r.inputting||r.syncInputFieldValue()}else r.setError("L{invalidDate}")}updateValue(e,n){const r=this._picker;r&&!this.inputting&&(r.value=r.activeDate=e),super.updateValue(e,n)}changeStep(e,n){const r=typeof e;return e?("number"===r?e={magnitude:Math.abs(e),unit:n?n.unit:"day"}:"string"===r&&(e=Ct.parseDuration(e)),e&&e.unit&&e.magnitude?(e.magnitude<0&&(e={magnitude:-e.magnitude,unit:e.unit}),e):void 0):null}updateStep(e){this.element.classList[e?"remove":"add"]("b-no-steppers"),this.syncInvalid()}hasChanged(e,n){return(null==e?void 0:e.getTime)&&(null==n?void 0:n.getTime)&&"entered"!==this.keepTime?!Ct.isEqual(Ct.clearTime(e),Ct.clearTime(n)):super.hasChanged(e&&e.getTime(),n&&n.getTime())}get inputValue(){const e=this.value;return e?Ct.format(e,this.format):""}updateFormat(){this.isConfiguring||this.syncInputFieldValue(!0)}updateLocalization(){super.updateLocalization(),this.syncInputFieldValue(!0)}internalOnKeyEvent(e){super.internalOnKeyEvent(e),"Enter"===e.key&&this.isValid&&this.picker.hide()}};Vc.initClass(),Vc._$name="DateField";var Nc=class extends Cc{static get $name(){return"NumberField"}static get type(){return"numberfield"}static get alias(){return"number"}static get configurable(){return{min:null,max:null,step:1,largeStep:0,value:null,format:"",decimalPrecision:null,leadingZeroes:null,triggers:{spin:{type:"spintrigger"}},changeOnSpin:!0,inputType:null}}construct(e){super.construct(e);const n=this;n.input.addEventListener("dblclick",(()=>{n.select()})),"number"==typeof n.changeOnSpin&&(n.bufferedSpinChange=n.buffer(n.triggerChange,n.changeOnSpin))}acceptValue(e,n){let r=!isNaN(e);if(r&&!this.hasTextSelection){r=!1;const e=this.input.value,i=parseFloat(e);e!==n&&(r=!this.acceptValue(i,e))}return r}okMax(e){return isNaN(this.max)||e<=this.max}okMin(e){return isNaN(this.min)||e>=this.min}internalOnKeyEvent(e){if("keydown"===e.type){const n=this,r=e.key;let i;if("ArrowUp"===r)n.doSpinUp(e.shiftKey),i=!0;else if("ArrowDown"===r)n.doSpinDown(e.shiftKey),i=!0;else if(!e.altKey&&!e.ctrlKey&&r&&1===r.length){const e=n.getAfterValue(r),o=n.formatter.parseStrict(e);i=!(o===n.value||"-"===e&&(isNaN(n.min)||n.min<0))&&!n.acceptValue(o,e)}"Enter"===r&&n._changedBySilentSpin&&(n.triggerChange(e,!0),n._changedBySilentSpin=!1),i&&e.preventDefault()}super.internalOnKeyEvent(e)}doSpinUp(e=!1){const n=this;if(n.readOnly)return;let r=(n.value||0)+(e?n.largeStep:n.step);n.okMin(r)||(r=n.min),n.okMax(r)&&n.applySpinChange(r)}doSpinDown(e=!1){const n=this;if(n.readOnly)return;let r=(n.value||0)-(e?n.largeStep:n.step);n.okMax(r)||(r=n.max),n.okMin(r)&&n.applySpinChange(r)}applySpinChange(e){const n=this;n._isUserAction=!0,!0!==n.changeOnSpin&&(n._changedBySilentSpin=!0,n.silenceChange=!0,n.bufferedSpinChange&&n.bufferedSpinChange(null,!0)),n.value=e,n._isUserAction=!1,n.silenceChange=!1}triggerChange(){this.silenceChange||super.triggerChange(...arguments)}onFocusOut(e){var n,r,i;super.onFocusOut(...arguments);const o=this,{input:s}=o,a=s.value,l=o.formatter.truncate(a),c=isNaN(l)?a:o.formatValue(l);null==(i=null==(r=null==(n=o.triggers)?void 0:n.spin)?void 0:r.clickRepeater)||i.cancel(),a!==c&&(s.value=c),o._changedBySilentSpin&&(o.triggerChange(e,!0),o._changedBySilentSpin=!1)}internalOnInput(e){const n=this,{formatter:r,input:i}=n,{parser:o}=r,s=i.value,a=o.decimalPlaces(s);if(r.truncator&&a){let e=s;const l=r.truncate(s);if(!isNaN(l)&&(e=n.formatValue(l),o.decimalPlaces(e)<a)){const r=s.length-n.caretPos;i.value=e,n.caretPos=e.length-r}}super.internalOnInput(e)}formatValue(e){return this.formatter.format(e)}changeFormat(e){const n=this;if(""===e){const{leadingZeroes:r,decimalPrecision:i}=n;e=r?`${r}>9`:null,null!=i?e=`${e||""}9.${"#".repeat(i)}`:e&&(e+=".*")}return e}get formatter(){const e=this,n=e.format;let r=e._formatter;return r&&e._lastFormat===n||(r=Dl.get(e._lastFormat=n),e._formatter=r),r}updateStep(e){this.element.classList[e?"remove":"add"]("b-hide-spinner"),this._step=e}changeLargeStep(e){return e||10*this.step}get validity(){const e=this.value,n={};return null!=e&&(n.rangeUnderflow=!this.okMin(e),n.rangeOverflow=!this.okMax(e)),n.valid=!n.rangeUnderflow&&!n.rangeOverflow,n}changeValue(e,n){const r=this;if(e||0===e){let n;"number"!=typeof e&&(e="string"==typeof e?r.formatter.parse(e):Number(e),n=isNaN(e),n&&(e="")),!n&&r.format&&(e=r.formatter.round(e))}else e=void 0;return super.changeValue(e,n)}get inputValue(){let e=this.value;return null!=e&&this.format&&(e=this.formatValue(e)),e}};Nc.initClass(),Nc._$name="NumberField";var qc=class extends Rs{static get $name(){return"TimePicker"}static get type(){return"timepicker"}construct(e){super.construct(e),this.refresh()}updateSeconds(e){this.widgetMap.second[e?"show":"hide"]()}onFieldChange(){this.isConfiguring||this.isRefreshing||(this.value=this.pickerToTime())}onAmPmButtonClick({source:e}){this._pm="pmButton"===e.ref,this._value&&(this.value=this.pickerToTime())}onInternalKeyDown(e){var n;const r=this;switch(e.key){case"Escape":return r.triggerTimeChange(r._initialValue),r.hide(),void e.preventDefault();case"Enter":return r.value=r.pickerToTime(),r.hide(),void e.preventDefault()}null==(n=super.onInternalKeyDown)||n.call(this,e)}pickerToTime(){const e=this,n=e._pm,{hour:r,minute:i,second:o}=e.widgetMap;r.format=e._is24Hour?"2>9":null;let s=r.value,a=new Date(e.value);return e._is24Hour||(n&&s<12&&(s+=12),n||12!==s||(s=0)),a.setHours(s),a.setMinutes(i.value),e.seconds&&a.setSeconds(o.value),e._min&&(a=Ct.max(e._min,a)),e._max&&(a=Ct.min(e._max,a)),a}triggerTimeChange(e){this.trigger("timeChange",{time:e})}updateInitialValue(e){this.value=e}changeValue(e){return e&&(e="string"==typeof e?Ct.parse(e,this.format):e),this.isVisible||(this._initialValue=e),null!=e?e:Ct.getTime(0)}updateValue(e){this.isVisible&&this.triggerTimeChange(e),this.refresh()}updateFormat(e){this._is24Hour=Ct.is24HourFormat(e),this.refresh()}changeMin(e){return"string"==typeof e?Ct.parse(e,this.format):e}changeMax(e){return"string"==typeof e?Ct.parse(e,this.format):e}refresh(){const e=this;if(!e.isConfiguring&&e.value){e.isRefreshing=!0;const{hour:n,minute:r,second:i,amButton:o,pmButton:s}=e.widgetMap,a=e.value,l=e._is24Hour,c=a.getHours(),d=e._pm=c>=12;e.element.classList[l?"add":"remove"]("b-24h"),n.min=l?0:1,n.max=l?23:12,n.value=l?c:c%12||12,r.value=a.getMinutes(),i.value=a.getSeconds(),o.pressed=!d,s.pressed=d,o.hidden=s.hidden=l,e.isRefreshing=!1}}};__publicField(qc,"configurable",{floating:!0,items:{hour:{label:"L{TimePicker.hour}",type:"number",min:0,max:23,highlightExternalChange:!1,format:"2>9"},minute:{label:"L{TimePicker.minute}",type:"number",min:0,max:59,highlightExternalChange:!1,format:"2>9"},second:{hidden:!0,label:"L{TimePicker.second}",type:"number",min:0,max:59,highlightExternalChange:!1,format:"2>9"},amButton:{type:"button",text:"AM",toggleGroup:"am-pm",cls:"b-blue",onClick:"up.onAmPmButtonClick"},pmButton:{type:"button",text:"PM",toggleGroup:"am-pm",cls:"b-blue",onClick:"up.onAmPmButtonClick"}},autoShow:!1,trapFocus:!0,seconds:null,value:{$config:{equal:"date"},value:null},format:null,max:null,min:null,initialValue:null}),qc.initClass(),qc._$name="TimePicker";var Wc=class extends xc{static get $name(){return"TimeField"}static get type(){return"timefield"}static get alias(){return"time"}static get configurable(){return{picker:{type:"timepicker",align:{align:"t0-b0",axisLock:!0}},format:"LT",triggers:{expand:{align:"end",handler:"onTriggerClick",compose:()=>({children:[{class:{"b-icon-clock-live":1}}]})},back:{align:"start",cls:"b-icon b-icon-angle-left b-step-trigger",key:"Shift+ArrowDown",handler:"onBackClick"},forward:{align:"end",cls:"b-icon b-icon-angle-right b-step-trigger",key:"Shift+ArrowUp",handler:"onForwardClick"}},min:null,max:null,step:"5m",stepTriggers:null,value:null,keepDate:!1}}changePicker(e,n){const r=this;return qc.reconfigure(n,e,{owner:r,defaults:{value:r.value,forElement:r[r.pickerAlignElement],owner:r,align:{anchor:r.overlayAnchor,target:r[r.pickerAlignElement]},onTimeChange({time:e}){r._isUserAction=!0,r.value=e,r._isUserAction=!1}}})}onBackClick(){const e=this,{min:n}=e;if(!e.readOnly&&e.value){const r=Ct.add(e.value,-1*e.step.magnitude,e.step.unit);(!n||n.getTime()<=r)&&(e._isUserAction=!0,e.value=r,e._isUserAction=!1)}}onForwardClick(){const e=this,{max:n}=e;if(!e.readOnly&&e.value){const r=Ct.add(e.value,e.step.magnitude,e.step.unit);(!n||n.getTime()>=r)&&(e._isUserAction=!0,e.value=r,e._isUserAction=!1)}}get isValid(){const e=this;e.clearError("L{Field.minimumValueViolation}",!0),e.clearError("L{Field.maximumValueViolation}",!0);let n=e.value;if(n){if(n=n.getTime(),e._min&&e._min.getTime()>n)return e.setError("L{Field.minimumValueViolation}",!0),!1;if(e._max&&e._max.getTime()<n)return e.setError("L{Field.maximumValueViolation}",!0),!1}return super.isValid}hasChanged(e,n){return(null==e?void 0:e.getTime)&&(null==n?void 0:n.getTime)?e.getHours()!==n.getHours()||e.getMinutes()!==n.getMinutes()||e.getSeconds()!==n.getSeconds()||e.getMilliseconds()!==n.getMilliseconds():super.hasChanged(e,n)}showPicker(){const e=this,{picker:n,value:r}=e;e.readOnly||(n.value=r,n.format=e.format,n.maxTime=e.max,n.minTime=e.min,r||(e.value=n.value),super.showPicker(!0))}onPickerShow(){var e;super.onPickerShow(),this.pickerKeyDownRemover=null==(e=this.pickerKeyDownRemover)?void 0:e.call(this)}focusPicker(){this.picker.focus()}transformTimeValue(e){return null!=e&&("string"==typeof e?(e=Ct.parse(e,this.format),this.keepDate&&(e=Ct.copyTimeValues(new Date(this.value),e))):e=new Date(e),Ct.isValidDate(e))?this.keepDate?e:Ct.getTime(e):null}changeMin(e){return this.transformTimeValue(e)}updateMin(e){const{input:n}=this;n&&(null==e?n.removeAttribute("min"):n.min=e),this.syncInvalid()}changeMax(e){return this.transformTimeValue(e)}updateMax(e){const{input:n}=this;n&&(null==e?n.removeAttribute("max"):n.max=e),this.syncInvalid()}changeValue(e,n){const r=this,i=r.transformTimeValue(e);if(e&&!i||r.isRequired&&""===e)r.setError("L{invalidTime}");else{if(r.clearError("L{invalidTime}"),r.hasChanged(n,i))return super.changeValue(i,n);r.inputting||r.syncInputFieldValue(!0)}}updateValue(e,n){const{expand:r}=this.triggers;r&&e&&(r.element.firstElementChild.style.animationDelay=-(60*e.getHours()+e.getMinutes())/10+"s"),super.updateValue(e,n)}changeStep(e,n){const r=typeof e;return e?("number"===r?e={magnitude:Math.abs(e),unit:n?n.unit:"hour"}:"string"===r&&(e=Ct.parseDuration(e)),(null==e?void 0:e.unit)&&(null==e?void 0:e.magnitude)?(e.magnitude<0&&(e={magnitude:-e.magnitude,unit:e.unit}),e):void 0):null}updateStep(e){this.element.classList[e?"remove":"add"]("b-no-steppers"),this.syncInvalid()}updateFormat(){this.syncInputFieldValue(!0)}get inputValue(){return Ct.format(this.value,this.format)}updateLocalization(){super.updateLocalization(),this.syncInputFieldValue(!0)}};Wc.initClass(),Wc._$name="TimeField";var Uc=new Date(2e3,0,1),Gc=class extends Cc{doDestroy(){this.dateField.destroy(),this.timeField.destroy(),super.doDestroy()}get focusElement(){return this.dateField.input}get innerElements(){return[this.dateField.element,this.timeField.element]}internalOnKeyEvent(){}updateRevertOnEscape(e){this.timeField.revertOnEscape=e,this.dateField.revertOnEscape=e}changeTimeField(e){const n=this,r=Wc.new({revertOnEscape:n.revertOnEscape,syncInvalid(...e){const r=n.updatingInvalid;Wc.prototype.syncInvalid.apply(this,e),n.timeField&&!r&&n.syncInvalid()}},e);return cn.on({element:r.element,keydown:"onTimeFieldKeyDown",thisObj:n}),n.readOnly&&(r.readOnly=!0),r}updateTimeField(e){const n=this;e.ion({change({userAction:e,value:r}){if(e&&!n.$settingValue){const e=n.dateField.value;n._isUserAction=!0,n.value=e?Ct.copyTimeValues(e,r||Uc):null,n._isUserAction=!1}},thisObj:n})}changeDateField(e){const n=this,r=(null==e?void 0:e.type)||"datefield",i=bs.resolveType(e.type||"datefield"),o=bs.create(Et.assign({type:r,revertOnEscape:n.revertOnEscape,syncInvalid(...e){const r=n.updatingInvalid;i.prototype.syncInvalid.apply(this,e),n.dateField&&!r&&n.syncInvalid()}},e));return cn.on({element:o.element,keydown:"onDateFieldKeyDown",thisObj:n}),n.readOnly&&(o.readOnly=!0),o.ion({keydown:({event:e})=>{var n;"Tab"===e.key&&!e.shiftKey&&(null==(n=this.timeField)?void 0:n.isVisible)&&(e.stopPropagation(),e.cancelBubble=!0)}}),o}get childItems(){return[this.dateField,this.timeField]}updateDateField(e){const n=this;e.ion({change({userAction:e,value:r}){e&&!n.$isInternalChange&&(n._isUserAction=!0,n.timeField.value?r&&Ct.copyTimeValues(r,n.timeField.value||Uc):n.timeField.value=r,n.value=r,n._isUserAction=!1)},thisObj:n})}updateWeekStartDay(e){this.dateField&&(this.dateField.weekStartDay=e)}changeWeekStartDay(e){var n,r;return"number"==typeof e?e:null!=(r=null==(n=this.dateField)?void 0:n.weekStartDay)?r:Ct.weekStartDay}syncInputFieldValue(e=this.isConfiguring){super.syncInputFieldValue(!0);const n=this,{dateField:r,timeField:i}=n,o=r.highlightExternalChange,s=i.highlightExternalChange;e||n.highlightExternalChange||(e=!0),n.$isInternalChange=!0,r.highlightExternalChange=!1,r.value=null,r.highlightExternalChange=o,e&&(i.highlightExternalChange=r.highlightExternalChange=!1),i.value=r.value=n.inputValue,r.highlightExternalChange=o,i.highlightExternalChange=s,n.$isInternalChange=!1,n.syncInvalid()}onTimeFieldKeyDown(e){const n=this;if("Enter"===e.key||"Tab"===e.key){const e=n.dateField.value;n._isUserAction=!0,n.value=e?Ct.copyTimeValues(e,n.timeField.value||Uc):null,n._isUserAction=!1}}onDateFieldKeyDown(e){const n=this;"Tab"!==e.key||e.shiftKey?"Enter"===e.key&&(n.value=n.dateField.value):(e.stopPropagation(),e.preventDefault(),n.timeField.focus())}updateRequired(e,n){this.timeField.required=this.dateField.required=e}updateReadOnly(e,n){super.updateReadOnly(e,n),this.isConfiguring||(this.timeField.readOnly=this.dateField.readOnly=e)}onDisabled(e){this.timeField.disabled=this.dateField.disabled=e}focus(){this.dateField.focus()}hasChanged(e,n){return!Ct.isEqual(e,n)}get isValid(){return this.timeField.isValid&&this.dateField.isValid}setError(e,n){[this.dateField,this.timeField].forEach((r=>r.setError(e,n)))}getErrors(){const e=[...this.dateField.getErrors()||[],...this.timeField.getErrors()||[]];return e.length?e:null}clearError(e,n){[this.dateField,this.timeField].forEach((r=>r.clearError(e,n)))}updateInvalid(){this.updatingInvalid=!0,[this.dateField,this.timeField].forEach((e=>e.updateInvalid())),this.updatingInvalid=!1}};__publicField(Gc,"configurable",{timeField:{},dateField:{keepTime:!0,step:"1 d"},weekStartDay:null,inputTemplate:()=>"",ariaElement:"element"}),__publicField(Gc,"$name","DateTimeField"),__publicField(Gc,"type","datetimefield"),__publicField(Gc,"alias","datetime"),Gc.initClass(),Gc._$name="DateTimeField";var Yc=class extends Sc{static get $name(){return"DurationField"}static get type(){return"durationfield"}static get alias(){return"duration"}static get defaultConfig(){return{value:null,step:1,unit:null,defaultUnit:"day",magnitude:null,useAbbreviation:!1,allowNegative:!1,decimalPrecision:null,triggers:{spin:{type:"spintrigger"}},nullValue:null}}static get configurable(){return{min:null,max:null,allowedUnits:null}}changeMin(e){return"string"==typeof e?new Gr(e):e}changeMax(e){return"string"==typeof e?new Gr(e):e}changeAllowedUnits(e){return"string"==typeof e&&(e=e.split(",")),e}updateAllowedUnits(e){this.allowedUnitsRe=new RegExp(`(${e.join("|")})`,"i")}get inputValue(){return null==this.value?"":this.calcValue(!0).toString(this.useAbbreviation)}set unit(e){this._unit=e,this.value=this.calcValue()}get unit(){return this._unit}get unitWithDefault(){return this._unit||Yc.defaultConfig.defaultUnit}set magnitude(e){this.clearError("L{invalidUnit}"),this._magnitude=e,super.value=this.calcValue()}get magnitude(){return this._magnitude}roundMagnitude(e){return e&&null!=this.decimalPrecision?Et.round(e,this.decimalPrecision):e}get allowDecimals(){return 0!==this.decimalPrecision}get isValid(){const e=this,n=null==e.value||e.value&&null==e.value.magnitude;return super.isValid&&(n&&!e.required||!n&&(e.allowNegative||e.value.magnitude>=0))}internalOnChange(e){const n=this,r=n.value,i=n._lastValue;n.hasChanged(i,r)&&(n._lastValue=r,n.triggerFieldChange({value:r,event:e,userAction:!0,valid:n.isValid}))}onFocusOut(e){var n,r,i;return this.syncInputFieldValue(!0),null==(i=null==(r=null==(n=this.triggers)?void 0:n.spin)?void 0:r.clickRepeater)||i.cancel(),super.onFocusOut(e)}set value(e){const n=this;let r,i;if(this.clearError("L{invalidUnit}"),"number"==typeof e)r=e,i=n._unit;else if("string"==typeof e)if(/^\s*$/.test(e))r=null;else{const o=Ct.parseDuration(e,n.allowDecimals,n.unitWithDefault);o&&(!n.allowedUnitsRe||n.allowedUnitsRe.test(o.unit)?(i=o.unit,r=o.magnitude):n.setError("L{invalidUnit}"))}else e&&"unit"in e&&"magnitude"in e?(i=e.unit,r=e.magnitude):(i=null,r=null);n._magnitude===r&&n._unit==i||(n._magnitude=r,i&&(n._unit=i),super.value=n.calcValue())}okMax(e){return"number"==typeof e&&(e=new Gr({unit:this.unitWithDefault,magnitude:e})),null==this.max||e<=this.max}okMin(e){return"number"==typeof e&&(e=new Gr({unit:this.unitWithDefault,magnitude:e})),null==this.min||e>=this.min}get validity(){const e=this.value,n={};return null!=e&&(n.rangeUnderflow=!this.okMin(e),n.rangeOverflow=!this.okMax(e)),n.valid=!n.rangeUnderflow&&!n.rangeOverflow,n}get value(){return super.value}calcValue(e=!1){const n=this;return n._unit&&null!=n._magnitude||!n.clearable?new Gr(e?this.roundMagnitude(n._magnitude):this._magnitude,n.unitWithDefault):null}hasChanged(e,n){return n&&!e||!n&&e||n&&e&&!e.isEqual(n)}get milliseconds(){return this.value?this.value.milliseconds:0}onInternalKeyDown(e){"ArrowUp"===e.key?this.doSpinUp():"ArrowDown"===e.key&&this.doSpinDown()}doSpinUp(){const e=this;if(e.readOnly)return;let n=(e.magnitude||0)+e.step;e._isUserAction=!0,e.okMin(n)||(n=e.min),e.okMax(n)&&(e.value=n),e._isUserAction=!1}doSpinDown(){const e=this;if(e.readOnly)return;let n=(e.magnitude||0)-e.step;e.okMax(n)||(n=e.max),e.okMin(n)&&(e.allowNegative||(e.magnitude||0)>0)&&(e._isUserAction=!0,e.value=n,e._isUserAction=!1)}};Yc.initClass(),Yc._$name="DurationField";var Kc=class extends ys{};__publicField(Kc,"$name","Fit"),__publicField(Kc,"type","fit"),__publicField(Kc,"configurable",{containerCls:"b-fit-container",itemCls:"b-fit-item"}),Kc.initClass(),Kc._$name="Fit";var Xc=class extends Rs{afterConfigure(){const e=this;super.afterConfigure(),e.onTargetSizeChange=e.onTargetSizeChange.bind(e),cn.on({element:e.element,keydown:"onKeyDown",contextmenu:"stopMouseEvents",mousedown:"stopMouseEvents",mouseover:"stopMouseEvents",mouseout:"stopMouseEvents",mouseup:"stopMouseEvents",click:"stopMouseEvents",dblclick:"stopMouseEvents",thisObj:e}),e.ion({beforeHide:"beforeEditorHide",hide:"afterEditorHide",thisObj:e}),Le.ion({locale:"onLocaleChange",thisObj:e})}onLocaleChange(){const{inputField:e}=this;e&&!e.isDestroyed&&e.syncInputFieldValue&&e.syncInputFieldValue(!0)}render(e){const n=this.element.parentNode,[r]=this.getRenderContext(this,e);r.classList.add("b-editing"),super.render(...arguments),(null==n?void 0:n.classList)&&r!==n&&n.classList.remove("b-editing")}async startEdit(e){var n,r,i;const o=this;if(e=Et.assignIf(e,{align:o.align,hideTarget:o.hideTarget,matchSize:o.matchSize,matchFont:o.matchFont,fitTargetContent:o.fitTargetContent,focus:!0}),!1!==o.trigger("beforeStart",e)){const{target:s,hideTarget:a,matchSize:l,matchFont:c,fitTargetContent:d,record:u,field:h=o.inputField.name,focus:g}=e,{inputField:p}=o,{input:m}=p,f=Gn.getStyleValue(s,"font-size"),b=Gn.getStyleValue(s,"font-family");let{value:v,align:y}=e;if(u&&h&&(o.record=u,o.dataField=h,void 0===v&&(v=u[h])),l&&(s instanceof HTMLElement&&o.updateSize(s,l),s instanceof HTMLElement&&Ho.addResizeListener(s,o.onTargetSizeChange)),m&&(c?(m.style.fontSize=f,m.style.fontFamily=b):m.style.fontSize=m.style.fontFamily=""),o.assigningValues=!0,null==(n=p.clearError)||n.call(p),"setValue"in p?await p.setValue(v):p.value=v,o.assigningValues=!1,"string"==typeof y&&(y={align:y}),await o.showBy({target:s,allowTargetOut:!0,...y}),d){const e=m.scrollWidth-m.clientWidth;e>0&&(o.width+=e+Gn.scrollBarWidth)}g&&(null==(r=p.focus)||r.call(p)),s.nodeType===Element.ELEMENT_NODE&&a&&s.classList.add("b-hide-visibility"),o.editing=!0;const w=p.value;return o.trigger("start",{value:w}),Array.isArray(w)&&p.editingRecords&&(null==(i=w[0])?void 0:i.isModel)?o.oldValue=w.map((e=>e.copy(e.id))):(o.oldValue=w,Array.isArray(o.oldValue)&&(o.oldValue=o.oldValue.slice())),p.initialValue=o.oldValue,!0}return!1}async refreshEdit(){if(this.isVisible){const{record:e,dataField:n,inputField:r}=this;if(e&&n){const i=e[n];Et.isEqual(r.value,i)||await r.setValue(i)}}}finishEdit(){const{target:e,aligningToElement:n}=this.lastAlignSpec;n&&(e.classList.remove("b-editing"),e.classList.remove("b-hide-visibility")),this.editing=!1,this.trigger("finishEdit")}onKeyDown(e){var n;const r=this;switch(e.key){case r.completeKey:r.completeEdit(null,e),e.stopImmediatePropagation();break;case r.cancelKey:r.cancelEdit(e),e.stopImmediatePropagation()}null==(n=r.trigger)||n.call(r,"keydown",{event:e})}stopMouseEvents(e){this.allowMouseEvents||e.stopPropagation()}onFocusOut(e){super.onFocusOut(e);const n=this;if(!n.isFinishing&&n.editing)switch(n.blurAction){case"cancel":n.cancelEdit(e);break;case"complete":n.completeEdit(null,e)}}async completeEdit(e,n){var r,i,o,s;const a=this,{inputField:l,oldValue:c,record:d}=a,u=l.invalidAction||(!1===l.allowInvalid?"block":a.invalidAction),{value:h}=l;if(a.isVisible){if(l.isValid||"allow"===u){if(Et.isEqual(h,c))return a.cancelEdit(n),!0;{const n={inputField:l,record:d,value:h,oldValue:c};if(!1!==a.trigger("beforeComplete",n)){if(e||(e=n.finalize||(null==(o=n.editorContext)?void 0:o.finalize)),e){let r=await e(n);if(!0===r)a.onEditComplete();else{if(l.setError){const e=r||l.invalidValueError,clearError=()=>{n(),l.clearError(e)},n=l.ion({change:clearError,input:clearError});l.setError(e)}"block"===u?null==(s=l.focus)||s.call(l):"revert"===u&&(await l.setValue(c),r=!0),r=!1}return r}return a.onEditComplete(),!0}null==(i=l.focus)||i.call(l)}}else{if("block"===u)return null==(r=l.focus)||r.call(l),!1;if("revert"===u)return a.cancelEdit(n),!0}return!1}}cancelEdit(e){var n;const r=this,{inputField:i,oldValue:o}=r,{value:s}=i;r.editing&&!r.isFinishing&&!1!==r.trigger("beforeCancel",{value:s,oldValue:o,event:e})&&(null==(n=i.clearError)||n.call(i),r.isFinishing=!0,r.hide(),r.trigger("cancel",{value:s,oldValue:o,event:e}),r.finishEdit(),r.isFinishing=!1)}onEditComplete(){const e=this,{record:n,dataField:r,inputField:i,oldValue:o}=e,{value:s}=i;if(!e.isFinishing){if(e.isFinishing=!0,e.hide(),n){const e=`set${w.capitalize(r)}`;n[e]?n[e](s):r.includes(".")?n.set(r,s):n[r]=s}e.trigger("complete",{value:s,oldValue:o}),e.finishEdit(),e.isFinishing=!1}}doDestroy(){this.createdInputField&&this.inputField.destroy(),super.doDestroy()}set owner(e){this._owner=e}get owner(){return this._owner||bs.fromElement(this.element.parentNode)}changeInputField(e,n){const r=this;return n&&n.destroy(),"string"==typeof e&&(e={type:e}),e instanceof bs||(e=bs.create(e),r.createdInputField=!0),r.completeOnChange&&e.ion({change:"onInputFieldChange",thisObj:r}),e.parent=r,e}updateInputField(e){this.removeAll(),this.add(e)}get inputField(){return this.items[0]}onInputFieldChange(){this.containsFocus&&this.completeEdit()}onTargetSizeChange(e,n,r){n&&r&&this.updateSize(e)}updateSize(e,n=this.lastMatchSize){const r=this,i=Gt.inner(e);r.width=!1===n.width?"auto":i.width-r.align.offset[0],r.height=!1===n.height?"auto":i.height,r.lastMatchSize=n}beforeEditorHide(){if(this.editing&&!this.isFinishing)return this.cancelEdit(),!1}afterEditorHide(){this.positioned&&this.element.remove(),Ho.removeResizeListener(this.lastAlignSpec.target,this.onTargetSizeChange)}};__publicField(Xc,"$name","Editor"),__publicField(Xc,"type","editor"),__publicField(Xc,"configurable",{positioned:!0,hidden:!0,layout:"fit",align:{align:"t0-t0",offset:[0,0]},hideTarget:!1,matchSize:!0,matchFont:!0,fitTargetContent:!1,inputField:"textfield",blurAction:"complete",completeKey:"Enter",cancelKey:"Escape",invalidAction:"block",completeOnChange:null,isolateFields:!0}),Xc.initClass(),Xc._$name="Editor";var Zc=["number","boolean","string","date","duration"],isSupportedDurationField=e=>{var n;return"duration"===(null==(n=e.column)?void 0:n.type)},Qc=class extends Rs{static get $name(){return"FieldFilterPicker"}static get type(){return"fieldfilterpicker"}static get defaultValueFieldPlaceholders(){return{string:"L{enterAValue}",number:"L{enterANumber}",date:"L{selectADate}",list:"L{selectOneOrMoreValues}",duration:"L{enterAValue}"}}afterConstruct(){const e=this;if(!e._fields)throw new Error(`${Qc.name} requires 'fields' to be configured.`);if(!e._filter)throw new Error(`${Qc.name} requires 'filter' to be configured.`);super.afterConstruct();const{widgetMap:{propertyPicker:n,operatorPicker:r,caseSensitive:i}}=e;n.ion({select:"onPropertySelect",thisObj:e}),r.ion({select:"onOperatorSelect",thisObj:e}),i.ion({change:"onCaseSensitiveChange",thisObj:e}),e.propertyFieldConfig&&n.setConfig(e.propertyFieldConfig),e.operatorFieldConfig&&r.setConfig(e.operatorFieldConfig),n.cls=e.allPropertyPickerClasses,r.cls=e.allOperatorPickerClasses,e.populateUIFromFilter()}changeDateFormat(e){return this.L(e)}get allChildInputs(){const{propertyPicker:e,operatorPicker:n,caseSensitive:r}=this.widgetMap;return[e,n,...this.valueFields,r]}updateDisabled(e){this.allChildInputs.forEach((n=>n.disabled=e))}updateReadOnly(e){const{propertyPicker:n,operatorPicker:r}=this.widgetMap;this.allChildInputs.forEach((n=>n.readOnly=e)),n.readOnly=n.readOnly||e,r.readOnly=r.readOnly||e}updatePropertyLocked(e){this.widgetMap.propertyPicker.readOnly=e||this.readOnly,this.widgetMap.propertyPicker.cls=this.allPropertyPickerClasses}updateOperatorLocked(e){this.widgetMap.operatorPicker.readOnly=e||this.readOnly,this.widgetMap.operatorPicker.cls=this.allOperatorPickerClasses}changeOperators(e){const n=null!=e?e:Qc.defaultOperators;return Object.keys(n).reduce(((e,r)=>({...e,[r]:n[r].map((e=>({...e,text:this.L(e.text)})))})),{})}changeFields(e){let n=e;return Array.isArray(e)&&(A.deprecate("Core","6.0.0","FieldOption[] deprecated, use Object<String, FieldOption> keyed by field name instead"),n=oe.keyBy(n,"name")),n}get isMultiSelectValueField(){var e;return["isIncludedIn","isNotIncludedIn"].includes(null==(e=this._filter)?void 0:e.operator)}get allPropertyPickerClasses(){var e;return new Xt(`b-${Qc.type}-property`,null==(e=this.propertyFieldConfig)?void 0:e.cls,{[`b-${Qc.type}-combo-locked`]:this.propertyLocked})}get allOperatorPickerClasses(){var e;return new Xt(`b-${Qc.type}-operator`,null==(e=this.operatorFieldConfig)?void 0:e.cls,{[`b-${Qc.type}-combo-locked`]:this.operatorLocked})}getValueFieldConfigs(){const e=this,{valueFieldCls:n,fieldType:r,_filter:{operator:i},onValueChange:o,filterValues:s,isMultiSelectValueField:a,operatorArgCount:l,getValueFieldConfig:c}=e,d=Et.merge({},Qc.defaultValueFieldPlaceholders,e.valueFieldPlaceholders);if(!r||!i||0===l)return[];let u={type:"textfield",internalListeners:{change:o,input:o,thisObj:e},cls:n,dataset:{type:r},placeholder:e.L(d[a?"list":r])};return a?u={...u,type:"combo",multiSelect:!0,createOnUnmatched:!0,items:this.getUniqueDataValues(s),value:null!=s?s:[]}:["number","date","boolean"].includes(r)?u.type=`${r}field`:"duration"===r&&(u.type="durationfield"),c&&(u=e.callback(c,e,[e.filter,u])),a?[u]:oe.populate(l,(n=>[{type:"widget",tag:"div",cls:`b-${Qc.type}-value-separator`,content:e.L("L{FieldFilterPicker.and}")},{...u,value:s[n]}])).flat().slice(1)}getUniqueDataValues(e=[]){var n;const r=this,{fieldType:i}=r;if(!r.store||!(null==(n=r._filter)?void 0:n.property))return[];const{relatedDisplayField:o}=r.selectedField;let s,a;if(r.fieldIsRelation){const{foreignStore:e}=r.currentPropertyRelationConfig;o?(s=e.allRecords.reduce(((e,n)=>(null!=n.id&&e.push({text:n[o],value:n.id}),e)),[]),a=s.sort(((e,n)=>r.sortStrings(e.text,n.text)))):s=e.allRecords.map((e=>e.id))}else s=r.store.allRecords.map((e=>e[r._filter.property]));if(!a){s.push(...e);const n=oe.unique(s.reduce(((e,n)=>(null!=n&&""!==String(n).trim()&&("date"===i?e.push(n.valueOf()):"duration"===i?e.push(n.toString()):e.push(n)),e)),[]));a="string"===i?n.sort(r.sortStrings):"duration"===i?n.map((e=>new Gr(e))).filter((e=>e.isValid)).sort(r.sortDurations):n.sort(r.sortNumerics),"date"===i?a=a.map((e=>{const n=new Date(e);return{text:Ct.format(n,r.dateFormat),value:e}})):"duration"===i&&(a=a.map((e=>e.toString())))}return a}sortStrings(e,n){return(null!=e?e:"").localeCompare(null!=n?n:"")}sortNumerics(e,n){return e-n}sortDurations(e,n){return e.valueOf()-n.valueOf()}get fieldType(){var e;return null==(e=this.selectedField)?void 0:e.type}get selectedField(){var e,n;return null==(n=this.fields)?void 0:n[null==(e=this._filter)?void 0:e.property]}get propertyOptions(){var e;return Object.entries(null!=(e=this.fields)?e:{}).filter((([,e])=>Zc.includes(e.type)||isSupportedDurationField(e))).map((([e,{title:n}])=>({value:e,text:null!=n?n:e}))).sort(((e,n)=>e.text.localeCompare(n.text)))}get operatorOptions(){return this.operators[this.fieldIsRelation?"relation":this.fieldType]}get fieldIsRelation(){return Boolean(this.currentPropertyRelationConfig)}get currentPropertyRelationConfig(){var e,n;return null==(n=null==(e=this.store)?void 0:e.modelRelations)?void 0:n.find((({foreignKey:e})=>{var n;return e===(null==(n=this._filter)?void 0:n.property)}))}updateOperators(){delete this._operatorArgCountLookup}get operatorArgCountLookup(){return this._operatorArgCountLookup||(this._operatorArgCountLookup=Qc.buildOperatorArgCountLookup(this.operators))}updateFilter(){this._filter&&this.onFilterChange()}updateStore(e){var n;null==(n=this._store)||n.un(this),null==e||e.ion({refresh:"onStoreRefresh",thisObj:this})}onStoreRefresh({action:e}){this.isMultiSelectValueField&&["dataset","create","update","delete"].includes(e)&&(this.valueFields[0].items=this.getUniqueDataValues(this.filterValues))}refreshValueFields(){const e=this,{valueFieldRow:n}=e.widgetMap;n.removeAll(),n.add(e.getValueFieldConfigs()),delete e._valueFields,e.refreshCaseSensitive()}refreshCaseSensitive(){var e,n;const r=this,{fieldType:i,operatorArgCount:o,isMultiSelectValueField:s}=r,a=null==(e=r._filter)?void 0:e.operator,{caseSensitive:l}=r.widgetMap;l.hidden="string"!==i||!a||s||0===o,l.checked=!1!==(null==(n=r._filter)?void 0:n.caseSensitive)}onPropertySelect(e){var n;const r=this,{_filter:i}=r;i.property=(null==(n=e.record)?void 0:n.data.value)||null,r.fieldType!==r._fieldType&&(i.operator=null,i.value=null),r._fieldType=i.type=r.fieldType,r.refreshOperatorPicker(),r.refreshValueFields(),r.triggerChange()}onCaseSensitiveChange({checked:e}){this._filter.caseSensitive=e,this.triggerChange()}onOperatorSelect(e){var n;const r=this,i=r.isMultiSelectValueField,o=this.operatorArgCount;r._filter.operator=(null==(n=e.record)?void 0:n.data.value)||null,r.operatorArgCount!==o&&(r._filter.value=null),r.isMultiSelectValueField&&!i&&(r._filter.value=[]),r.refreshValueFields(),r.triggerChange()}triggerChange(){const{filter:e,isValid:n}=this;this.trigger("change",{filter:e,isValid:n})}onValueChange(){const{isMultiSelectValueField:e,fieldType:n,_filter:r}=this,i=this.valueFields.map((e=>e.value));e&&"date"===n?r.value=i[0].map((e=>new Date(e))):e&&"duration"===n?r.value=i[0].map((e=>new Gr(e))):("date"===n&&"between"===r.operator&&Ct.isValidDate(i[1])&&i[1].setHours(23,59,59,999),r.value=1===i.length?i[0]:i),this.triggerChange()}refreshOperatorPicker(){const{operatorPicker:e}=this.widgetMap,{_filter:{operator:n,property:r},operatorOptions:i}=this;e.items=i,e.value=n,e.hidden=null===r}populateUIFromFilter(e=!1){const n=this,{filterValues:r,widgetMap:{propertyPicker:i,operatorPicker:o},_filter:{property:s,operator:a,disabled:l},propertyOptions:c,operatorOptions:d,isMultiSelectValueField:u}=n;i.items=c,o.items=d,o.hidden=null===s;let h=e;i.value!==s&&(i.value=s,n.refreshOperatorPicker(),h=!0),o.value!==a&&(null!==a&&o.items.find((({value:e})=>e===a))?o.value=a:o.clear(),h=!0),h&&n.refreshValueFields(),n.refreshCaseSensitive(),n.valueFields.forEach(((e,i)=>{u&&(e.value.length>0||r.length>0)?"date"===n.fieldType?e.value=r.map((e=>null==e?void 0:e.valueOf())):"duration"===n.fieldType?e.value=r.map((e=>null==e?void 0:e.toString())):e.value=r:i>=r.length?e.clear():e.value=r[i]})),n.allChildInputs.forEach((e=>e.disabled=n.disabled||l))}get valueFields(){return this._valueFields||(this._valueFields=this.widgetMap.valueFieldRow.queryAll((e=>["textfield","datefield","numberfield","durationfield","combo"].includes(e.type))))}get filterValues(){var e;return null==(null==(e=this._filter)?void 0:e.value)?[]:oe.asArray(this._filter.value)}onFilterChange(){const e=this,n=e.fieldType,r=n!==e._fieldType;e._fieldType=e._filter.type=n,e.populateUIFromFilter(r)}get operatorArgCount(){const{fieldType:e,filter:{operator:n},operatorArgCountLookup:r}=this;return e&&n?r[e][n]:1}get isValid(){const{filter:e,fieldType:n,filterValues:r,isMultiSelectValueField:i,operatorArgCount:o}=this,{operator:s}=e,a=o>0&&null==(null==e?void 0:e.value);return n&&s&&!a&&(i&&r.length>0||r.length===o)&&r.every((e=>null!=e&&("duration"!==n||e.isValid)))}},Jc=Qc;__publicField(Jc,"operators",{empty:{value:"empty",text:"L{isEmpty}",argCount:0},notEmpty:{value:"notEmpty",text:"L{isNotEmpty}",argCount:0},"=":{value:"=",text:"L{equals}"},"!=":{value:"!=",text:"L{doesNotEqual}"},">":{value:">",text:"L{isGreaterThan}"},"<":{value:"<",text:"L{isLessThan}"},">=":{value:">=",text:"L{isGreaterThanOrEqualTo}"},"<=":{value:"<=",text:"L{isLessThanOrEqualTo}"},between:{value:"between",text:"L{isBetween}",argCount:2},notBetween:{value:"notBetween",text:"L{isNotBetween}",argCount:2},isIncludedIn:{value:"isIncludedIn",text:"L{isOneOf}"},isNotIncludedIn:{value:"isNotIncludedIn",text:"L{isNotOneOf}"}}),__publicField(Jc,"defaultOperators",{string:[Qc.operators.empty,Qc.operators.notEmpty,Qc.operators["="],Qc.operators["!="],{value:"includes",text:"L{contains}"},{value:"doesNotInclude",text:"L{doesNotContain}"},{value:"startsWith",text:"L{startsWith}"},{value:"endsWith",text:"L{endsWith}"},Qc.operators.isIncludedIn,Qc.operators.isNotIncludedIn],number:[Qc.operators.empty,Qc.operators.notEmpty,Qc.operators["="],Qc.operators["!="],Qc.operators[">"],Qc.operators["<"],Qc.operators[">="],Qc.operators["<="],Qc.operators.between,Qc.operators.notBetween,Qc.operators.isIncludedIn,Qc.operators.isNotIncludedIn],date:[Qc.operators.empty,Qc.operators.notEmpty,Qc.operators["="],Qc.operators["!="],{value:"<",text:"L{isBefore}"},{value:">",text:"L{isAfter}"},Qc.operators.between,{value:"isToday",text:"L{isToday}",argCount:0},{value:"isTomorrow",text:"L{isTomorrow}",argCount:0},{value:"isYesterday",text:"L{isYesterday}",argCount:0},{value:"isThisWeek",text:"L{isThisWeek}",argCount:0},{value:"isNextWeek",text:"L{isNextWeek}",argCount:0},{value:"isLastWeek",text:"L{isLastWeek}",argCount:0},{value:"isThisMonth",text:"L{isThisMonth}",argCount:0},{value:"isNextMonth",text:"L{isNextMonth}",argCount:0},{value:"isLastMonth",text:"L{isLastMonth}",argCount:0},{value:"isThisYear",text:"L{isThisYear}",argCount:0},{value:"isNextYear",text:"L{isNextYear}",argCount:0},{value:"isLastYear",text:"L{isLastYear}",argCount:0},{value:"isYearToDate",text:"L{isYearToDate}",argCount:0},Qc.operators.isIncludedIn,Qc.operators.isNotIncludedIn],boolean:[{value:"isTrue",text:"L{isTrue}",argCount:0},{value:"isFalse",text:"L{isFalse}",argCount:0}],duration:[Qc.operators.empty,Qc.operators.notEmpty,Qc.operators["="],Qc.operators["!="],Qc.operators[">"],Qc.operators["<"],Qc.operators[">="],Qc.operators["<="],Qc.operators.between,Qc.operators.notBetween,Qc.operators.isIncludedIn,Qc.operators.isNotIncludedIn],relation:[Qc.operators.isIncludedIn,Qc.operators.isNotIncludedIn]}),__publicField(Jc,"configurable",{fields:null,disabled:!1,readOnly:!1,layout:"vbox",propertyLocked:!1,operatorLocked:!1,filter:null,propertyFieldConfig:null,operatorFieldConfig:null,valueFieldCls:null,items:{propertyAndOperator:{type:"container",layout:"box",items:{propertyPicker:{type:"combo",items:{},cls:`b-${Qc.type}-property`,placeholder:"L{FieldFilterPicker.selectAProperty}"},operatorPicker:{type:"combo",items:{},cls:`b-${Qc.type}-operator`,placeholder:"L{FieldFilterPicker.selectAnOperator}"}}},valueFieldRow:{type:"container",cls:`b-${Qc.type}-values`,items:{}},caseSensitive:{type:"checkbox",text:"L{FieldFilterPicker.caseSensitive}",cls:`b-${Qc.type}-case-sensitive`}},operators:Qc.defaultOperators,dateFormat:"L{FieldFilterPicker.dateFormat}",store:null,valueFieldPlaceholders:null,getValueFieldConfig:null}),__publicField(Jc,"buildOperatorArgCountLookup",(e=>oe.keyBy(Object.entries(e),(([e])=>e),(([,e])=>oe.keyBy(e,(({value:e})=>e),(({argCount:e})=>void 0===e?1:e)))))),Jc.initClass(),Jc._$name="FieldFilterPicker";var ed=class extends bs{compose(){const{text:e,html:n}=this;return{tag:"label",text:e,html:n}}};__publicField(ed,"$name","Label"),__publicField(ed,"type","label"),__publicField(ed,"configurable",{text:null,localizableProperties:["text"]}),ed.initClass(),ed._$name="Label";var td=class extends Rs{static get $name(){return"FieldFilterPickerGroup"}static get type(){return"fieldfilterpickergroup"}afterConstruct(){const e=this;e.validateConfig();const{addFilterButton:n}=e.widgetMap;n.ion({click:"addFilter",thisObj:e}),n.text=e.L(n.text),e.store&&e.updateStore(e.store),super.afterConstruct()}changeDateFormat(e){return this.L(e)}validateConfig(){if(!this.fields&&!this.store)throw new Error("FieldFilterPickerGroup requires either a 'fields' or 'store' config property.")}get someFiltersNotShown(){return this.store&&this.store.filters.count>this.filters.length}updateFields(e){this.widgetMap.pickers.childItems.forEach((n=>n.fields=e))}updateFilters(e,n){const r=this;n&&n.filter((n=>!e.find((e=>e.id===n.id)))).forEach((e=>{var n;return null==(n=r.store)?void 0:n.removeFilter(e.id)})),e.forEach((e=>e.id=e.id||r.nextFilterId)),r.widgetMap.pickers.items=(null==e?void 0:e.map((e=>r.getPickerRowConfig(e))))||[]}changeFilters(e){const{canManageFilter:n}=this;return e&&n?e.filter((e=>this.callback(n,this,[e]))):e}updateStore(e){const n=this;n.detachListeners("store"),e&&(n.widgetMap.pickers.childItems.forEach((({widgetMap:{filterPicker:{filter:n,isValid:r}}})=>{e.removeFilter(n.id,!0),r&&e.addFilter(n,!0)})),e.filter(),n.appendFiltersFromStore(),e.ion({name:"store",filter:"onStoreFilter",thisObj:n})),n.widgetMap.pickers.childItems.forEach((n=>n.store=e))}updateShowAddFilterButton(e){this.widgetMap.addFilterButton.hidden=!e}updateAddFilterButtonText(e){this.widgetMap.addFilterButton.text=null!=e?e:td.addFilterButtonDefaultText}appendFiltersFromStore(){const e=this;e.store.filters.forEach((n=>{var r;const i=e.canManage(n),{property:o,operator:s,value:a,id:l,disabled:c=!1,caseSensitive:d}=n;i&&o&&s&&!(null==(r=e.filters)?void 0:r.find((e=>e.id===l)))&&e.appendFilter({id:l,property:o,operator:s,value:a,disabled:c,caseSensitive:d})}))}canManage(e){const n=this;return!n.canManageFilter||!0===n.callback(n.canManageFilter,n,[e])}getFilterPickerConfig(e){const n=this,{fields:r,store:i,disabled:o,readOnly:s,valueFieldCls:a,operators:l,limitToProperty:c,dateFormat:d,getFieldFilterPickerConfig:u}=n;return{type:n.constructor.childPickerType,fields:null!=r?r:n.getFieldsFromStore(i),filter:e,store:i,disabled:o,readOnly:s,propertyLocked:Boolean(c),valueFieldCls:a,operators:l,dateFormat:d,internalListeners:{change:"onFilterPickerChange",thisObj:n},flex:1,...u?n.callback(u,n,[e]):void 0}}getFieldsFromStore(e){var n,r;return Object.fromEntries(null!=(r=null==(n=e.fields)?void 0:n.map((({name:e,type:n})=>[e,{type:n}])))?r:[])}getPickerRowConfig(e){const n=this,{disabled:r,readOnly:i,canDeleteFilter:o}=n;return{type:"container",layout:"box",layoutStyle:{alignItems:"start"},cls:`b-${td.type}-row`,dataset:{separatorText:n.L("L{FieldFilterPicker.and}")},items:{activeCheckbox:{type:"checkbox",disabled:r,readOnly:i,checked:!Boolean(e.disabled),internalListeners:{change:"onFilterActiveChange",thisObj:n},cls:`b-${td.type}-filter-active`},filterPicker:n.getFilterPickerConfig(e),removeButton:{type:"button",ref:"removeButton",disabled:r,readOnly:i,hidden:o&&!1===n.callback(o,n,[e]),cls:`b-transparent b-${td.type}-remove`,icon:"b-fa-trash",internalListeners:{click:"removeFilter",thisObj:n}}}}}get allInputs(){const e=[this.constructor.childPickerType,"button","checkbox"];return this.queryAll((n=>e.includes(n.type)))}updateDisabled(e){this.allInputs.forEach((n=>n.disabled=e))}updateReadOnly(e){this.allInputs.forEach((n=>n.readOnly=e))}onFilterActiveChange({source:e,checked:n}){const r=this,i=r.getFilterIndex(e),o=r.filters[i],s=r.getFilterPicker(i);o.disabled=!n,s.onFilterChange(),r.store&&s.isValid&&r.store.addFilter(o,!0),r.updateStoreFilter(),r.triggerChange()}onFilterPickerChange({source:e,filter:n,isValid:r}){const i=this,{store:o}=i,s=i.getFilterIndex(e);o&&(o.removeFilter(n.id,!0),r&&o.addFilter(n,!0),i.updateStoreFilter()),Object.assign(i.filters[s],n),i.triggerChange()}getFilterIndex(e){return this.widgetMap.pickers.childItems.indexOf(e.containingWidget)}getPickerRow(e){return this.widgetMap.pickers.childItems[e]}getFilterPicker(e){return this.getPickerRow(e).widgetMap.filterPicker}get nextFilterId(){return this._nextId=(this._nextId||0)+1,`${this.id}-filter-${this._nextId}`}removeFilter({source:e}){const n=this,r=n.getFilterIndex(e),i=n.filters[r],o=n.getPickerRow(r),s=n.query((e=>e.isFocusable&&"container"!==e.type&&!o.contains(e)));s&&s.focus(),n.removeFilterAt(r),n.store&&(n.store.removeFilter(i.id,!0),n.updateStoreFilter()),n.trigger("remove",{filter:i}),n.triggerChange()}addFilter({property:e=null,operator:n=null,value:r=null}={}){var i;const o=this,{filters:s}=o,a={property:o.limitToProperty||e,operator:n,value:r,disabled:!1,id:o.nextFilterId,caseSensitive:!1};o.appendFilter(a),o.getFilterPicker(s.length-1).isValid&&(null==(i=o.store)||i.addFilter(a,!0),o.store&&o.updateStoreFilter()),o.trigger("add",{filter:a}),o.triggerChange()}appendFilter(e){const n=this;n.limitToProperty&&e.property!==n.limitToProperty||(n.filters.push(e),n.widgetMap.pickers.add(n.getPickerRowConfig(e,n.filters.length-1)))}onStoreFilter(e){const n=this;if(n._isUpdatingStore)return;const{filters:r}=e,i=r.values.reduce(((e,n)=>({...e,[n.id]:n})),{});for(let e=n.filters.length-1;e>=0;e--){const r=n.filters[e],o=i[r.id],s=n.getPickerRow(e);if(s){const{filterPicker:i,activeCheckbox:a}=s.widgetMap;if(!o&&i.isValid)n.removeFilterAt(e);else if(void 0!==o){const{operator:e,value:n,property:s,disabled:l,caseSensitive:c}=o;r!==o&&Object.assign(r,{operator:e,value:n,property:s,disabled:l,caseSensitive:c}),i.filter=r,i.onFilterChange(),a.checked=!l}}}n.appendFiltersFromStore(),n.triggerChange()}removeFilterAt(e){const{widgetMap:{pickers:n},filters:r}=this;n.remove(n.childItems[e]),r.splice(e,1),this.triggerChange()}updateStoreFilter(){var e;this._isUpdatingStore=!0,null==(e=this.store)||e.filter(),this._isUpdatingStore=!1}get value(){return this.filters}triggerChange(){const{filters:e}=this,n=e.filter(((e,n)=>this.getPickerRow(n).widgetMap.filterPicker.isValid));this.trigger("change",{filters:e,validFilters:n})}activateAll(){this.setAllActiveStatus(!0)}deactivateAll(){this.setAllActiveStatus(!1)}setAllActiveStatus(e){const n=this,{_filters:r,store:i}=n;r.forEach(((r,o)=>{if(e===r.disabled){const{filterPicker:s,activeCheckbox:a}=n.getPickerRow(o).widgetMap;r.disabled=!e,s.onFilterChange(),a.checked=e,e&&i&&s.isValid&&i.addFilter(r,!0)}})),n.updateStoreFilter()}},nd=td;__publicField(nd,"addFilterButtonDefaultText","L{FieldFilterPickerGroup.addFilter}"),__publicField(nd,"configurable",{filters:[],fields:null,disabled:!1,readOnly:!1,layout:"vbox",store:null,limitToProperty:null,valueFieldCls:null,showAddFilterButton:!0,canDeleteFilter:null,getFieldFilterPickerConfig:null,canManageFilter:null,addFilterButtonText:null,items:{pickers:{type:"container",layout:"vbox",scrollable:!0,items:{}},addFilterButton:{type:"button",text:td.addFilterButtonDefaultText,cls:`b-${td.type}-add-button`,hidden:!0}},operators:null,dateFormat:"L{FieldFilterPicker.dateFormat}"}),__publicField(nd,"childPickerType","fieldfilterpicker"),nd.initClass(),nd._$name="FieldFilterPickerGroup";var rd=class extends(La.mixin(Labelable_default)){static get $name(){return"FieldSet"}static get type(){return"fieldset"}static get configurable(){return{bodyTag:"fieldset",focusable:!1,inline:null,inlineInternal:null,layout:{type:"box",horizontal:!1}}}static get prototypeProperties(){return{flexRowCls:"b-hbox",flexColCls:"b-vbox"}}get bodyConfig(){const e=super.bodyConfig,{className:n}=e,{inlineInternal:r,hasLabel:i,title:o}=this;return delete e.html,n["b-inline"]=r,n["b-fieldset-has-label"]=i,o&&(e.children={legendElement:{tag:"legend",text:o,class:{"b-fieldset-legend":1}}}),e}compose(){const{inlineInternal:e,label:n,labelCls:r,labelWidth:i}=this;return{class:{"b-field":n,"b-vbox":!e},children:{"labelElement > headerElement":n?{tag:"label",html:n,class:{"b-label":1,"b-align-start":1,[r]:r},style:{width:Gn.unitize("width",i)[1]}}:null}}}syncInlineInternal(){var e;this.inlineInternal=null!=(e=this.inline)?e:null!=this.label&&"before"===this.labelPosition}updateDisabled(e,n){super.updateDisabled(e,n),this.eachWidget((n=>{n.disabled=e}),!1)}updateInline(){this.syncInlineInternal()}updateInlineInternal(e){this.layout.horizontal=e}updateLabel(){this.syncInlineInternal()}updateLabelPosition(){this.syncInlineInternal()}};rd.initClass(),rd._$name="FieldSet";var id=class extends Cc{static get $name(){return"FileField"}static get type(){return"filefield"}static get configurable(){return{multiple:null,accept:null,inputType:"file",attributes:["multiple","accept"]}}get files(){return this.input.files}pickFile(){this.input.click()}get multiple(){return this._multiple?"":null}clear(){this.input.value=null}triggerChange(e){this.triggerFieldChange({event:e,value:this.input.value,oldValue:this._lastValue,userAction:!0,valid:!0})}};id.initClass(),id._$name="FileField";var od=class extends Rs{static get $name(){return"FilePicker"}static get type(){return"filepicker"}static get defaultConfig(){return{defaultBindProperty:"value",buttonConfig:null,fileFieldConfig:null}}construct(e={}){const n=this;e.items=[Object.assign({type:"button",ref:"fileButton",text:"L{FilePicker.file}",localeClass:this},e.buttonConfig),Object.assign({type:"filefield",ref:"fileField",style:"display: none"},e.fileFieldConfig)].concat(e.items||[]),super.construct(e),n.button.ion({click:n.onButtonClick,thisObj:n}),n.fileField.ion({change:n.onFileFieldChange,thisObj:n}),n._thisIsAUsedExpression(n.fileTip)}get button(){return this.widgetMap.fileButton}get fileField(){return this.widgetMap.fileField}get files(){return this.fileField.files}get fileTip(){const e=this;return e._fileTip||(e._fileTip=new fc({cls:"b-file-tip",forElement:e.button.element,showOnHover:!0,align:"b-t",scrollAction:"realign",internalListeners:{beforeshow(){const n=this,r=e.files;return!(!r||!r.length)&&(n.html=`${Array.from(r).map((e=>e.name)).join("<br>")}`,!0)}}}))}clear(){const e=this;e.fileField.clear(),e.button.badge="",e.trigger("clear")}onButtonClick({event:e}){this.fileField.pickFile(),e.preventDefault()}onFileFieldChange({valid:e}){const n=this;n.button.badge=n.files.length||"",n.triggerFieldChange({files:n.files,valid:e})}};od.initClass(),od._$name="FilePicker";var sd=class extends Sc{static get $name(){return"FilterField"}static get type(){return"filterfield"}static get configurable(){return{field:null,store:null,filterFunction:null,clearable:!0,revertOnEscape:!0,keyStrokeChangeDelay:100,onChange({value:e}){const{store:n,field:r,filterFunction:i}=this;if(n){const o=`${r||this.id}-Filter`;if(0===e.length)n.removeFilter(o);else{let s;i?s=n=>i(n,e):(e=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),s=n=>{var i;return null==(i=n.get(r))?void 0:i.match(new RegExp(e,"i"))}),n.filter({id:o,filterBy:s})}}}}}updateValue(e,n){super.updateValue(e,n),e&&this.isConfiguring&&this.onChange({value:e})}};sd.initClass(),sd._$name="FilterField";var ad=[{ref:"cancelButton",cls:"b-messagedialog-cancelbutton b-gray",text:"L{Object.Cancel}",onClick:"up.onCancelClick"},{ref:"okButton",cls:"b-messagedialog-okbutton b-raised b-blue",text:"L{Object.Ok}",onClick:"up.onOkClick"}];c.isWindows&&ad.reverse();var ld=class extends _a{static get $name(){return"MessageDialog"}static get type(){return"messagedialog"}static get configurable(){return{centered:!0,modal:!0,hidden:!0,autoShow:!1,closeAction:"hide",title:" ",lazyItems:{$config:["lazy"],value:[{cls:"b-messagedialog-message",ref:"message"},{type:"textfield",cls:"b-messagedialog-input",ref:"input"}]},showClass:null,bbar:{overflow:null,items:ad}}}construct(){this.okButton=this.yesButton=1,this.cancelButton=3,super.construct(...arguments)}destroy(){}async confirm(){return this.showDialog("confirm",...arguments)}async alert(){return this.showDialog("alert",...arguments)}async prompt({textField:e}){const n=this.widgetMap.input;return bs.reconfigure(n,e),n.value="",this.showDialog("prompt",...arguments)}showDialog(e,{message:n="",title:r=" ",cancelButton:i,okButton:o,rootElement:s=document.body}){const a=this;return a.rootElement=s,a.getConfig("lazyItems"),a.title=a.optionalL(r),a.widgetMap.message.html=a.optionalL(n),a.showClass=`b-messagedialog-${e}`,o&&(o="string"==typeof o?{text:o}:o),i&&(i="string"==typeof i?{text:i}:i),o=Object.assign({},a.widgetMap.okButton.initialConfig,o),i=Object.assign({},a.widgetMap.cancelButton.initialConfig,i),o.text=a.optionalL(o.text),i.text=a.optionalL(i.text),bs.reconfigure(a.widgetMap.okButton,o),bs.reconfigure(a.widgetMap.cancelButton,i),a.show(),a.promise=new Promise((e=>{a.resolve=e}))}show(){const e=Gn.getActiveElement(this.element);return this.owner=this.element.contains(e)?null:ld.fromElement(document.activeElement),super.show(...arguments)}updateShowClass(e,n){const{classList:r}=this.element;n&&r.remove(n),e&&r.add(e)}doResolve(e){const n=this,{resolve:r}=n;if(r){const i="b-messagedialog-prompt"===n.showClass;if(i&&e===n.okButton&&!n.widgetMap.input.isValid)return;n.resolve=n.reject=n.promise=null,r(i?{button:e,text:n.widgetMap.input.value}:e),n.hide()}}onInternalKeyDown(e){"Escape"===e.key&&(e.stopImmediatePropagation(),this.onCancelClick()),"Enter"===e.key&&(e.stopImmediatePropagation(),e.preventDefault(),this.onOkClick()),super.onInternalKeyDown(e)}onOkClick(){this.doResolve(cd.okButton)}onCancelClick(){this.doResolve(cd.cancelButton)}};ld.initClass();var cd=new Proxy({},{get(e,n){const r=e.instance||(e.instance=new ld({rootElement:document.body})),i=r[n];return"function"==typeof i?i.bind(r):i}}),dd=cd,ud=class extends Ta{static get $name(){return"PagingToolbar"}static get type(){return"pagingtoolbar"}static get defaultConfig(){return{store:null,defaults:{localeClass:this},items:{firstPageButton:{onClick:"up.onFirstPageClick",icon:"b-icon-first",weight:100,tooltip:"L{PagingToolbar.firstPage}"},previousPageButton:{onClick:"up.onPreviousPageClick",icon:"b-icon-previous",weight:110,tooltip:"L{PagingToolbar.prevPage}"},pageNumber:{type:"numberfield",label:"L{page}",min:1,max:1,triggers:null,onChange:"up.onPageNumberChange",highlightExternalChange:!1,weight:120},pageCount:{type:"widget",cls:"b-pagecount b-toolbar-text",weight:130},nextPageButton:{onClick:"up.onNextPageClick",icon:"b-icon-next",weight:140,tooltip:"L{PagingToolbar.nextPage}"},lastPageButton:{onClick:"up.onLastPageClick",icon:"b-icon-last",weight:150,tooltip:"L{PagingToolbar.lastPage}"},separator:{type:"widget",cls:"b-toolbar-separator",weight:151},reloadButton:{onClick:"up.onReloadClick",icon:"b-icon-reload",weight:160,tooltip:"L{PagingToolbar.reload}"},spacer:{type:"widget",cls:"b-toolbar-fill",weight:161},dataSummary:{type:"widget",cls:"b-toolbar-text",weight:170}}}}set parent(e){super.parent=e,this.store||(this.store=e.store)}get parent(){return super.parent}set store(e){const n=this;n.detachListeners("store"),n._store=e,e&&(e.ion({name:"store",beforerequest:"onStoreBeforeRequest",afterrequest:"onStoreChange",change:"onStoreChange",thisObj:n}),e.isLoading&&n.onStoreBeforeRequest())}get store(){return this._store}onStoreBeforeRequest(){this.eachWidget((e=>e.disable()))}updateLocalization(){this.updateSummary(),super.updateLocalization()}updateSummary(){const e=this,{pageCount:n,dataSummary:r}=e.widgetMap;let i=0,o=0,s=0,a=0,l=0;if(e.store){const{store:n}=e,{pageSize:r,currentPage:c}=n;i=n.count,o=n.lastPage,l=n.allCount,s=Math.max(0,(c-1)*r+1),a=Math.min(l,s+r-1)}n.html=e.L("L{pageCountTemplate}")({lastPage:o}),r.html=i?e.L("L{summaryTemplate}")({start:s,end:a,allCount:l}):e.L("L{noRecords}")}onStoreChange(){const e=this,{widgetMap:n,store:r}=e,{count:i,lastPage:o,currentPage:s}=r,{pageNumber:a,pageCount:l,firstPageButton:c,previousPageButton:d,nextPageButton:u,lastPageButton:h,dataSummary:g}=n;e.eachWidget((e=>e.enable())),a.value=s,a.max=o,g.disabled=a.disabled=l.disabled=!i,c.disabled=d.disabled=s<=1||!i,u.disabled=h.disabled=s>=o||!i,e.updateSummary()}onPageNumberChange({value:e}){this.store.currentPage!==e&&this.store.loadPage(e)}onFirstPageClick(){this.store.loadPage(1)}onPreviousPageClick(){this.store.previousPage()}onNextPageClick(){this.store.nextPage()}onLastPageClick(){this.store.loadPage(this.store.lastPage)}onReloadClick(){this.store.loadPage(this.store.currentPage)}};ud.initClass(),ud._$name="PagingToolbar";var{dockIsHorz:hd}=na.maps,gd={top:0,down:0,left:1,bottom:2,up:2,right:3},pd={up:{from:"translate(0,0)",to:"translate(0,-100%)"},down:{from:"translate(0,0)",to:"translate(0,100%)"},left:{from:"translate(0,0)",to:"translate(-100%,0)"},right:{from:"translate(0,0)",to:"translate(100%,0)"}},md=class extends(na.mixin(Delayable_default)){static get $name(){return"PanelCollapserOverlay"}static get type(){return"overlay"}static get configurable(){return{autoCloseDelay:1e3,autoClose:!0,revealing:{value:null,$config:null,default:!1},recollapseTool:{type:"collapsetool",cls:"b-recollapse",collapsify:"overlay",handler(){var e;null==(e=this.collapsible)||e.toggleReveal()}}}}static get delayable(){return{doAutoClose:0}}doAutoClose(){this.toggleReveal(!1)}updateAutoCloseDelay(e){const{doAutoClose:n}=this;(n.suspended=null==e||e<0)||(n.delay=e,n.immediate=!e)}changeRecollapseTool(e){const n=this,{panel:r}=n;if(n.isConfiguring||n.isDestroying||!r||r.isDestroying)return e;r.tools={recollapse:e}}beforeCollapse(e){if(!1===super.beforeCollapse(e))return!1;this.panel.revealed&&(e.animation=null)}applyHeaderDock(e,n=!0){var r;null==(r=this.panel)||r.recompose(),super.applyHeaderDock(e,n)}collapseBegin(e){const n=this,{collapseDir:r,innerElement:i}=n,{animation:o}=e,{collapseTool:s,panel:a}=n;n.configuredWidth=a._lastWidth,n.configuredHeight=a._lastHeight,n.applyHeaderDock(!0),n.lockInnerSize(),null==s||s.element.classList.add("b-collapsed"),o&&(a.element.classList.add("b-collapsing"),o.element=i,o.transform=pd[r],e.animation=Fs.run(o))}onComplete(e){var n,r;super.onComplete(e);const i=this,{panel:o}=i,{element:s}=o;i.autoCloseLeaveDetacher=null==(n=i.autoCloseLeaveDetacher)?void 0:n.call(i),i.autoCloseClickDetacher=null==(r=i.autoCloseClickDetacher)?void 0:r.call(i),i.doAutoClose.cancel(),"reveal"===e&&i.autoClose&&(o.containsFocus&&(i.autoCloseLeaveDetacher=cn.on({element:s,mouseenter:e=>{i.doAutoClose.cancel()},mouseleave:e=>{i.doAutoClose()}})),i.autoCloseClickDetacher=cn.on({element:document.body,thisObj:o,mousedown:e=>{var n;o.owns(e)||(null==(n=i.revealer)?void 0:n.contains(e.target))||null==i.autoCloseDelay||i.doAutoClose.now()}}))}expandBegin(e){const n=this,{animation:r}=e,{collapseDir:i,collapseTool:o,innerElement:s,panel:a}=n,{element:l}=a;l.classList.remove("b-collapsed","b-collapsing"),n.restoreConfiguredSize(),n.lockInnerSize(!1),n.lockInnerSize(),null==o||o.element.classList.remove("b-collapsed"),r&&(l.classList.add("b-collapsed","b-expanding"),r.element=s,r.transform={from:pd[i].to,to:pd[i].from},e.animation=Fs.run(r))}expandEnd(e){super.expandEnd(e);const{panel:n}=this;e.completed&&(n.revealed=!1),n.element.classList.remove("b-expanding")}expandRevert(e){super.expandRevert(e),this.panel.element.classList.add("b-expanding")}get innerElement(){return this.panel.overlayElement}get innerSizeElement(){return this.panel.element}get toolsConfig(){const{direction:e}=this,n=super.toolsConfig,r=this.recollapseTool;return r?{...n,recollapse:r&&Et.assign({direction:e.toLowerCase()},r)}:n}lockInnerSize(e=!0){const n=this,{panel:r}=n,i=e&&r.rectangle(),o=e?[0,0,0,0]:"",s=super.lockInnerSize(e);return e&&(o[gd[n.collapseDir]]=`-${i[n.collapseDim]+10}px`),r.element.style.clipPath=e?`inset(${o.join(" ")})`:"",s}onOverlayTransitionDone(e){const n=this,{panel:r}=n;e.srcElement===r.overlayElement&&n.revealing&&(n.revealing=!1,n.onComplete(r.revealed?"reveal":"unreveal"))}onRevealerClick(){this.toggleReveal()}toggleReveal(e){const{panel:n}=this,{element:r}=n;n.collapsed&&(this.revealer=Gn.getActiveElement(r),null==e&&(e=!n.revealed),n.revealed!==e&&!1!==n.trigger("beforeToggleReveal",{reveal:e})&&(!e&&r.contains(this.revealer)&&n.revertFocus(!0),this.revealing=!0,n.revealed=e))}updateRevealing(e){const n=this,{panel:r}=n,i=/left|right/i.test(n.collapseDir)?"height":"width";r&&(n.innerElement.style[i]="0px",n.innerElement.style[`min-${i}`]="100%",r.element.classList[e?"add":"remove"]("b-panel-overlay-revealing"))}wrapCollapser(e,n){var r;const i=this,{collapseDir:o,panel:s}=i,{expandedHeaderDock:a,header:l,uiClassList:c}=s,d=null==(r=s.tools)?void 0:r.recollapse,[u,h]=i.splitHeaderItems({as:"element",dock:i.collapseDock}),g=hd[a],p=s.hasHeader?s.title||(null==l?void 0:l.title)||" ":null;return d&&(d.direction=o),["overlayElement",{class:{...c,[`b-panel-overlay-header-${a}`]:1,[`b-panel-overlay-${o}`]:1,[`b-${g?"h":"v"}box`]:1,"b-panel-overlay":1,"b-box-center":1},listeners:{transitionend:e=>i.onOverlayTransitionDone(e)},children:{overlayHeaderElement:p&&{tag:"header",class:new Xt({...c,[`b-dock-${a}`]:1,"b-panel-header":1,"b-panel-overlay-header":1},null==l?void 0:l.cls),children:[...u,{reference:"overlayTitleElement",html:p,class:{...c,[`b-align-${(null==l?void 0:l.titleAlign)||"start"}`]:1,"b-header-title":1}},...h]},[e]:n}}]}};md.initClass(),md._$name="PanelCollapserOverlay";var fd=class extends Cc{static get type(){return"passwordfield"}static get alias(){return"password"}static get $name(){return"PasswordField"}construct(e={}){e.inputType="password",super.construct(...arguments),this.element.classList.add("b-textfield")}};fd.initClass(),fd._$name="PasswordField";var bd=class extends _c{static get $name(){return"Radio"}static get type(){return"radio"}static get alias(){return"radiobutton"}static get configurable(){return{inputType:"radio",clearable:null,uncheckedValue:void 0}}get textLabelCls(){return super.textLabelCls+" b-radio-label"}internalOnClick(e){!1!==super.internalOnClick(e)&&this.checked&&this.clearable&&(this.checked=!1)}updateName(e){this.toggleGroup=e}updateClearable(){}};bd.initClass(),bd._$name="Radio";var vd=class extends rd{static get $name(){return"RadioGroup"}static get type(){return"radiogroup"}static get configurable(){return{defaultType:"radio",clearable:null,name:null,options:{value:null,$config:{merge:"items"}},defaultBindProperty:"value"}}get existingOptions(){const{name:e}=this;return this.ensureItems().filter((n=>n.name===e))}get refPrefix(){return`${this.name||this.ref||this.id}_`}get selected(){return this.existingOptions.filter((e=>e.input.checked))[0]||null}get value(){const{selected:e}=this;return e?e.checkedValue:null}set value(e){this.existingOptions.forEach((n=>{n.isConfiguring=this.isConfiguring,n.checked=n.checkedValue===e,n.isConfiguring=!1}))}ensureItems(){return this.getConfig("options"),super.ensureItems()}changeOptions(e,n){if(!(e&&n&&Et.isDeeplyEqual(n,e)))return e}convertOption(e,n,r){const i=this,{name:o}=i,s={name:o,type:"radio",value:e===i.value,ref:`${i.refPrefix}${e}`,checkedValue:e};return"string"==typeof n?s.text=n:Et.assign(s,n),r?bs.reconfigure(r,s):s}isOurRadio(e){return e.isRadio&&e.name===this.name}isolateFieldChange(e){return this.isOurRadio(e)}onChildAdd(e){super.onChildAdd(e),this.isOurRadio(e)&&e.ion({name:e.id,beforeChange:"onRadioItemBeforeChange",change:"onRadioItemChange",click:"onRadioClick",thisObj:this})}onChildRemove(e){this.isOurRadio(e)&&this.detachListeners(e.id),super.onChildRemove(e)}onRadioClick(e){const{source:n}=e;n.checked&&this.clearable&&null==n.clearable&&(n.checked=!1)}onRadioItemBeforeChange(e){if(e.checked){const n=this,{lastValue:r}=n;if(!n.reverting&&!1===n.trigger("beforeChange",n.wrapRadioEvent(e))&&null!=r&&r!==n.value)return n.reverting=!0,e.source.uncheckToggleGroupMembers(),n.value=r,n.lastValue=r,n.reverting=!1,!1}}onRadioItemChange(e){const n=this;e.checked&&!n.reverting&&(n.triggerFieldChange(n.wrapRadioEvent(e)),n.lastValue=n.value)}wrapRadioEvent(e){return{from:e,item:e.source,userAction:e.userAction,lastValue:this.lastValue,value:this.value}}updateOptions(){const e=this,{options:n,refPrefix:r}=e,i=e.existingOptions.reduce(((e,n)=>(e[n.ref.substring(r.length)]=n,e)),{});let o,s,a=0;if(n)for(o in n)s=e.convertOption(o,n[o],i[o]),delete i[o],e.insert(s,a++);const l=Object.values(i);(null==l?void 0:l.length)&&(e.remove(l),l.forEach((e=>e.destroy())))}};vd.initClass(),vd._$name="RadioGroup";var yd={ArrowUp:1,ArrowDown:1,ArrowLeft:1,ArrowRight:1},wd=class extends bs{static get $name(){return"Slider"}static get type(){return"slider"}static get configurable(){return{text:null,showValue:!0,showTooltip:!1,min:0,max:100,step:1,value:50,unit:null,thumbSize:20,tooltip:{$config:["lazy","nullify"],value:{type:"tooltip",align:"b-t",anchor:!1,axisLock:!0}},localizableProperties:["text"],triggerChangeOnInput:null,defaultBindProperty:"value"}}compose(){const{id:e,min:n,max:r,showValue:i,step:o,text:s,value:a,unit:l="",disabled:c}=this,d=`${e}-input`,u=Boolean(s||i);return{class:{"b-has-label":u,"b-text":u,"b-disabled":c},children:{input:{tag:"input",type:"range",id:d,reference:"input",disabled:c,min:n,max:r,step:o,value:a,listeners:{input:"onInternalInput",change:"onInternalChange",mouseover:"onInternalMouseOver",mouseout:"onInternalMouseOut"}},label:{tag:"label",for:d,html:i?s?`${s} (${a}${l})`:a+l:s}}}}get focusElement(){return this.input}get percentProgress(){return(this.value-this.min)/(this.max-this.min)*100}onInternalKeyDown(e){!this.readOnly&&yd[e.key]&&e.stopImmediatePropagation()}onInternalChange(){this.updateUI(),this.triggerChange(!0),this.trigger("action",{value:this.value})}onInternalInput(){const e=this;e.readOnly?e.input.value=e.value:(e.value=parseInt(e.input.value,10),e.trigger("input",{value:e.value}),e.triggerChangeOnInput&&e.triggerChange(e))}onInternalMouseOver(){var e;const n=this,r=n.rtl?100-n.percentProgress:n.percentProgress;null==(e=n.tooltip)||e.showBy({target:Gt.from(n.input).inflate(n.thumbSize/2,-n.thumbSize/2),align:`b-t${Math.round(r)}`})}onInternalMouseOut(){var e;null==(e=this.tooltip)||e.hide()}triggerChange(e){this.triggerFieldChange({value:this.value,valid:!0,userAction:e})}updateMax(e){const n=this;n.input&&n._value>e&&(n.value=e,n.trigger("input",{value:n.value}))}updateMin(e){const n=this;n.input&&n._value<e&&(n.value=e,n.trigger("input",{value:n.value}))}changeTooltip(e,n){var r;return e&&(e.owner=this),this.showTooltip?fc.reconfigure(n,e,{owner:this,defaults:{forElement:this.input,html:String(this.value)+(null!=(r=this.unit)?r:"")}}):null}changeValue(e){const{min:n,step:r}=this;return(e=Math.min(Math.max(e,n),this.max))>n?n+Et.roundTo(e-n,r):Et.roundTo(e,r)}updateValue(e){var n;const r=this,{input:i,_tooltip:o}=r;o&&(o.html=r.value+(null!=(n=r.unit)?n:"")),i&&i.value!==String(e)&&(i.value=e,r.triggerChange(!1)),r.updateUI()}updateUI(){var e,n;const r=this;(null==(e=r._tooltip)?void 0:e.isVisible)&&(null==(n=r._tooltip)||n.alignTo({target:Gt.from(r.input).inflate(r.thumbSize/2,-r.thumbSize/2),align:`b-t${Math.round(r.percentProgress)}`}))}};wd.initClass(),wd._$name="Slider";var Cd=class extends _c{static get $name(){return"SlideToggle"}static get type(){return"slidetoggle"}static get properties(){return{toggledCls:"b-slidetoggle-checked"}}construct(e){(null==e?void 0:e.checked)&&(e.cls=(e.cls||"")+" "+this.constructor.properties.toggledCls),super.construct(e)}get innerElements(){const e=super.innerElements;return e.splice(1,0,this.toggleElement),this.text?e[e.length-1].class="b-slidetoggle-label":e.pop(),e}get toggleElement(){return{class:"b-slidetoggle-toggle",reference:"slideToggle",children:[{class:"b-slidetoggle-thumb",reference:"slideThumb"}]}}internalOnChange(){super.internalOnChange(),this.element.classList[this.value?"add":"remove"](this.toggledCls)}};Cd.initClass(),Cd._$name="SlideToggle";var Sd=["b-horizontal","b-vertical"],hasFlex=e=>"flex"===Gn.getStyleValue(e.parentElement,"display")&&(parseInt(Gn.getStyleValue(e,"flex-basis"),10)||parseInt(Gn.getStyleValue(e,"flex-grow"),10)),xd={horizontal:!1,vertical:!0},Dd=class extends bs{static get $name(){return"Splitter"}static get type(){return"splitter"}static get configurable(){return{orientation:"auto",vertical:null,containerElement:{$config:"nullify",value:null},nextNeighbor:{$config:"nullify",value:null},previousNeighbor:{$config:"nullify",value:null}}}static get delayable(){return{syncState:"raf"}}doDestroy(){var e;null==(e=this.mouseDetacher)||e.call(this),super.doDestroy()}compose(){return{class:{"b-splitter":1},listeners:{pointerdown:"onMouseDown",mouseenter:"syncState",...!c.supportsPointerEvents&&{mousedown:"onMouseDown",touchstart:"onMouseDown"}}}}get currentOrientation(){return this.vertical?"vertical":"horizontal"}getSibling(e=!0){let n,{element:r}=this;for(;!n&&(r=r[(e?"next":"previous")+"ElementSibling"]);)r.isConnected&&!Gn.isVisible(r)||(n=r);return n}get nextWidget(){let e,{element:n}=this;for(;!e&&(n=n.nextElementSibling);)e=bs.fromElement(n,1);return e}get previousWidget(){let e,{element:n}=this;for(;!e&&(n=n.previousElementSibling);)e=bs.fromElement(n,1);return e}updateContainerElement(e){var n;const r=this;r.stateDetector=null==(n=r.stateDetector)?void 0:n.disconnect(),e&&(r.stateDetector=new MutationObserver((()=>r.syncState())),r.stateDetector.observe(e,{attributes:!0,childList:!0}))}updateNextNeighbor(e){this.watchNeighbor(e,"next")}updatePreviousNeighbor(e){this.watchNeighbor(e,"previous")}watchNeighbor(e,n){this.detachListeners(n),null==e||e.ion({name:n,thisObj:this,collapse:"syncState",expand:"syncState",hide:"syncState",show:"syncState"})}updateOrientation(){this.syncState.now()}updateVertical(e){var n;const r=null==(n=this.element)?void 0:n.classList;null==r||r.add(Sd[e?1:0]),null==r||r.remove(Sd[e?0:1])}syncState(){var e;const n=this,{element:r,nextWidget:i,previousWidget:o}=n;let s=null!=(e=xd[n.orientation])?e:null;if(n.nextNeighbor=i,n.previousNeighbor=o,n.disabled=i&&(i.collapsible&&i.collapsed||i.hidden)||o&&(o.collapsible&&o.collapsed||o.hidden),null!==s&&i&&o)n.containerElement=null;else if(n.containerElement=r.parentElement,n.rendered&&r.offsetParent){const e=Gn.getStyleValue(r.parentElement,"flex-direction");if(e)s=!e.startsWith("column");else{const e=r.previousElementSibling,n=r.nextElementSibling;if(!e||!n)return;const i=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=i.top<o.top?i:o,l=a===o?i:o;s=a.top===l.top}}n.vertical=s}onMouseDown(e){var n;e.preventDefault(),e.touches&&(e=e.touches[0]);const r=this,{element:i,nextNeighbor:o,previousNeighbor:s}=r,a=s?s.element:r.getSibling(!1),l=o?o.element:r.getSibling(),d=hasFlex(a),u=hasFlex(l),h=[];null==(n=r.mouseDetacher)||n.call(r);for(const e of i.parentElement.children)hasFlex(e)&&e!==i&&h.push({element:e,width:e.offsetWidth,height:e.offsetHeight});r.context={startX:e.pageX,startY:e.pageY,prevWidth:a.offsetWidth,prevHeight:a.offsetHeight,nextWidth:l.offsetWidth,nextHeight:l.offsetHeight,prevHasFlex:d,nextHasFlex:u,flexed:h,prev:a,next:l};const g={element:document,pointermove:"onMouseMove",pointerup:"onMouseUp",thisObj:r};c.supportsPointerEvents||(g.mousemove=g.touchmove="onMouseMove",g.mouseup=g.touchend="onMouseUp"),i.classList.add("b-moving"),r.mouseDetacher=cn.on(g)}onMouseMove(e){const n=this,{context:r,nextWidget:i,previousWidget:o}=n,s=r.prev.style,a=r.next.style,l=(e.pageX-r.startX)*(n.rtl?-1:1),c=e.pageY-r.startY;if(e.preventDefault(),Object.assign(r,{deltaX:l,deltaY:c}),r.started||(r.started=!0,n.trigger("dragStart",{context:r,event:e}),r.flexed.forEach((e=>{e.element.style.flexGrow=n.vertical?e.width:e.height,e.element.style.flexBasis="0"}))),n.vertical){const e=r.prevWidth+l,n=r.nextWidth-l;r.prevHasFlex?s.flexGrow=e:o?o.width=e:s.width=`${e}px`,r.nextHasFlex?a.flexGrow=n:i?i.width=n:a.width=`${n}px`}else{const e=r.prevHeight+c,n=r.nextHeight-c;r.prevHasFlex?s.flexGrow=e:o?o.height=e:s.height=`${e}px`,r.nextHasFlex?a.flexGrow=n:i?i.height=n:a.height=`${n}px`}n.trigger("drag",{context:r,event:e})}onMouseUp(e){var n;const r=this;null==(n=r.mouseDetacher)||n.call(r),r.mouseDetacher=null,r.element.classList.remove("b-moving"),r.context.started&&r.trigger("drop",{context:r.context,event:e}),r.context=null}render(){super.render(...arguments),this.syncState.now(),null===this.vertical&&this.syncState()}};Dd.initClass(),Dd._$name="Splitter";var Ed=class extends Ca{static get $name(){return"Tab"}static get type(){return"tab"}static get configurable(){return{active:null,index:null,isFirst:null,isLast:null,item:{value:null,$config:"nullify"},itemCls:null,tabPanel:null,titleProperty:"text",titleSource:"title",role:"tab"}}compose(){const{active:e,cls:n,index:r,isFirst:i,isLast:o}=this;return{tabindex:0,"aria-selected":e,"aria-setsize":this.owner.visibleChildCount,"aria-posinset":r+1,class:{"b-tabpanel-tab":1,"b-active":e,"b-tab-first":i,"b-tab-last":o,...n},dataset:{index:r}}}updateIndex(e){this.isFirst=!e}updateItem(e,n){var r,i;const o=this;(null==n?void 0:n.tab)===o&&(n.tab=null),e&&(e.tab=o,o[o.titleProperty]=e[o.titleSource],o.itemCls=e.cls,o.ariaElement.setAttribute("aria-controls",e.id),e.role="tabpanel"),null==(r=o.itemChangeDetacher)||r.call(o),o.itemChangeDetacher=e&&he.after(e,"onConfigChange","onItemConfigChange",o,{return:!1}),null==(i=o.itemHideDetacher)||i.call(o),o.itemHideDetacher=null==e?void 0:e.ion({beforeChangeHidden:"onItemBeforeChangeHidden",beforeHide:"onItemBeforeHide",beforeUpdateDisabled:"onItemBeforeUpdateDisabled",thisObj:o,prio:1e3}),o.syncMinMax()}updateItemCls(e,n){const{element:r}=this,i=r&&Xt.from(null==r?void 0:r.classList,!0);r&&(i.remove(n).add(e),r.className=i.value)}updateRotate(e,n){!e!=!n&&this.syncMinMax()}syncMinMax(){const e=this,{rotate:n,tabPanel:r}=e;let{_minWidth:i,_minHeight:o,_maxWidth:s,_maxHeight:a}=e;if(r){const{tabMinWidth:l,tabMaxWidth:c}=r;null!=l&&(n?(i===l&&(i=null),o=l):(o===l&&(o=null),i=l)),null!=c&&(n?(s===c&&(s=null),a=c):(a===c&&(a=null),s=c)),e.minWidth=i,e.minHeight=o,e.maxWidth=s,e.maxHeight=a}}onItemBeforeChangeHidden({source:e,hidden:n}){if(!e.$isDeactivating&&!e.$isActivating){const{tabPanel:r}=this;this.hidden=n,n&&e===r.activeItem&&r.activateAvailableTab(e)}}onItemBeforeHide(){this.item.$isDeactivating||this.hide()}onItemBeforeUpdateDisabled({source:e,disabled:n}){const{tabPanel:r}=this;this.disabled=n,e===r.activeItem&&r.activateAvailableTab(e)}onItemConfigChange({name:e,value:n}){e===this.titleSource&&(this[this.titleProperty]=n)}};Ed.initClass(),Ed._$name="Tab";var isTab=e=>e.isTab,Rd=class extends Ta{static get $name(){return"TabBar"}static get type(){return"tabbar"}static get configurable(){return{defaultType:"tab",overflow:"scroll",role:"tablist",ignoreParentReadOnly:!0}}get firstTab(){return this.tabAt(0)}get lastTab(){return this.tabAt(-1)}get tabCount(){return this._items.countOf(isTab)}get tabs(){return oe.from(this._items,isTab)}compose(){return{children:{toolbarContent:{class:{"b-tabpanel-tabs":1}}}}}indexOfTab(e){return this._items.indexOf(e,isTab)}onChildAdd(e){super.onChildAdd(e),null==e.index&&this.syncTabs()}onChildRemove(e){super.onChildRemove(e),this.syncTabs()}onFocusIn(){const{activeIndex:e}=this.owner;isNaN(e)||this.tabs[e].focus()}syncTabs(){const{tabs:e}=this;for(let n=0,r=e.length;n<r;++n)e[n].index=n,e[n].isFirst=!n,e[n].isLast=n===r-1}tabAt(e){return this._items.find(isTab,e)||null}};Rd.initClass(),Rd._$name="TabBar";var kd=["b-slide-out-left","b-slide-out-right","b-slide-in-left","b-slide-in-right"],Td=class extends ys{onChildAdd(e){super.onChildAdd(e);const n=this,{activeItem:r,owner:i}=n,o=null!=i.activeIndex?i.activeIndex:n.activeIndex||0,s=i.items.indexOf(e),a=null!=r?e===r:s===o;e.ion({beforeHide:"onBeforeChildHide",beforeShow:"onBeforeChildShow",thisObj:n}),a?(n._activeIndex=s,n._activeItem=e,e.show()):(e.$isDeactivating=!0,e.hide(),e.$isDeactivating=!1)}onChildRemove(e){super.onChildRemove(e);const n=this;n._activeItem===e&&n.activateSiblingOf(e),n._activeIndex=n.owner.items.indexOf(n._activeItem),e.un({beforeHide:"onBeforeChildHide",beforeShow:"onBeforeChildShow",thisObj:n})}onBeforeChildShow({source:e}){if(!this.owner.isConfiguring&&!e.$isActivating)return this.activeItem=e,!1}onBeforeChildHide({source:e}){if(!this.owner.isConfiguring&&!e.$isDeactivating)return this.activateSiblingOf(e),!1}activateSiblingOf(e){const{owner:n}=this,r=n.items.slice(),i=r.indexOf(e);r.splice(i,1),this.activeIndex=Math.min(i,r.length-1)}setActiveItem(e,n=this.activeIndex,r){var i;const o=this,{owner:s}=o,{items:a}=s,l=e instanceof bs,c=a[n],d=s.items[e=l?a.indexOf(e):parseInt(e,10)],u=!1!==(null==r?void 0:r.animation),h=!(null==r?void 0:r.silent),g={prevActiveIndex:n,prevActiveItem:c};if(d&&!d.$isActivating&&d!==c){const a=c&&c.element,l=d&&d.element;if(o.animateDetacher){const e=o.animateDetacher.event;if(e.activeItem===d)return e.promise;o.animateDetacher(),e.prevActiveItem.element.classList.remove(...kd),e.activeItem.element.classList.remove(...kd),o.animateDetacher=null}if(g.activeIndex=e,g.activeItem=d,h&&!1===s.trigger("beforeActiveItemChange",g))return null;const p=o._activeIndex!==g.activeIndex;p&&(o._activeIndex=g.activeIndex),h&&(null==(i=s.onBeginActiveItemChange)||i.call(s,g)),p&&(o._activeIndex=g.prevActiveIndex),u&&a&&s.isVisible&&o.animateCardChange?g.promise=o.cardChangeAnimation=new Promise(((i,u)=>{const p=c.monitorResize;c.monitorResize=!1,o.contentElement.style.overflowX="hidden",c._hidden=!0,d.$isActivating=!0,d.show(),d.$isActivating=!1,a.classList.add(e>n?"b-slide-out-left":"b-slide-out-right"),l.classList.add(e<n?"b-slide-in-left":"b-slide-in-right"),s.isAnimating=!0,o.animateDetacher=cn.onTransitionEnd({mode:"animation",element:l,thisObj:c,handler(){s.isAnimating=o.cardChangeAnimation=!1,o.animateDetacher?(o.animateDetacher=null,l.classList.remove(...kd),a&&(a.classList.remove(...kd),c.$isDeactivating=!0,c._hidden=!1,c.hide(),c.monitorResize=p,c.$isDeactivating=!1),o.contentElement.style.overflowX="",o.onActiveItemChange(g,i,!h)):o.setActiveItem(e,n,r)}}),o.animateDetacher.reject=u,o.animateDetacher.event=g})):(d.$isActivating=!0,d.show(),d.focus(),d.$isActivating=!1,c&&(c.$isDeactivating=!0,c.hide(),c.$isDeactivating=!1),o.onActiveItemChange(g,null,!h))}return g}onActiveItemChange(e,n,r){const i=this;i._activeItem=e.activeItem,i._activeIndex=e.activeIndex,!r&&i.owner.trigger("activeItemChange",e),e.activeItem.focus(),null==n||n(e)}renderChildren(){const{owner:e}=this;e.contentElement.classList.toggle(this.hideChildHeaderCls,e.suppressChildHeaders),super.renderChildren()}changeActiveIndex(e){const{owner:n}=this;return n.isConfiguring&&!n._items?e:Math.min(e,n.items.length-1)}updateActiveIndex(e,n){this.owner.isConfiguring||this.setActiveItem(e,n)}updateActiveItem(e){this.owner.isConfiguring||this.setActiveItem(e,this.activeIndex)}get isChangingCard(){return Boolean(this.animateDetacher)}};__publicField(Td,"$name","Card"),__publicField(Td,"type","card"),__publicField(Td,"configurable",{containerCls:"b-card-container",itemCls:"b-card-item",hideChildHeaderCls:"b-hide-child-headers",animateCardChange:!0,activeItem:null,activeIndex:null}),Td.initClass(),Td._$name="Card";var Md=class extends La{static get $name(){return"TabPanel"}static get type(){return"tabpanel"}static get alias(){return"tabs"}static get configurable(){return{activeTab:0,animateTabChange:!0,autoHeight:!1,defaultType:"container",focusable:!1,itemCls:"b-tabpanel-item",layout:{type:"card"},suppressChildHeaders:!0,tabBar:{type:"tabbar",weight:-2e3},tabMinWidth:null,tabMaxWidth:null}}get activeIndex(){return this.layout.activeIndex}get activeItem(){return this.layout.activeItem}get activeTabItemIndex(){var e;const{activeTab:n,items:r,tabBar:i}=this;return r.indexOf(null==(e=i.tabs[n])?void 0:e.item)}get bodyConfig(){return Et.merge({className:{"b-tabpanel-body":1}},super.bodyConfig)}get focusElement(){var e;const n=this.items[this.activeTab||0];return(null==n?void 0:n.focusElement)||(null==(e=null==n?void 0:n.tab)?void 0:e.focusElement)}get tabPanelBody(){return this.bodyElement}finalizeInit(){super.finalizeInit();const e=this,{activeTab:n,layout:r}=e,{activeIndex:i}=r,{tabs:o}=e.tabBar,s=n>=0&&n<o.length&&e.items.indexOf(o[n].item);if(o.length>0&&(!1===s||s<0))throw new Error(`Invalid activeTab ${n} (${o.length} tabs)`);s!==i&&r.setActiveItem(s,i,{animation:!1,silent:!0}),r.animateCardChange=e.animateTabChange}onChildAdd(e){if(super.onChildAdd(e),!this.initialItems){const n=this,{tabBar:r}=n,i=n.makeTabConfig(e),o=i&&(null==r?void 0:r.firstTab),s=o&&r._items,a=o&&oe.from(n._items,(n=>n.tab||n===e)),l=o?a.indexOf(e)+s.indexOf(o):0;i&&r&&(o&&null==e.weight&&l<s.count-1?r.insert(i,l):r.add(i))}}onChildRemove(e){const{tab:n}=e,{items:r}=this;n&&(this.tabBar.remove(n),n.destroy()),e===this.activeItem&&(this._activeTab=null,r.length&&(this.activeTab=r[Math.min(this.activeIndex,r.length-1)])),super.onChildRemove(e)}isDisabledOrHiddenTab(e){const{tabs:n}=this.tabBar,r=null==n?void 0:n[e];return r&&(r.disabled||r.hidden)}findAvailableTab(e,n=1){const{tabs:r}=this.tabBar,i=r.length,o=Math.max(0,r.indexOf(e.tab));let s;o&&(n=-n);for(let e=1;e<=i&&(s=(o+(n<0?i:0)+e*n)%i,this.isDisabledOrHiddenTab(s));++e);return s}activateAvailableTab(e,n=1){this.activeTab=this.findAvailableTab(e,n)}changeActiveTab(e,n){const r=this,{tabBar:i,layout:o}=r,{tabCount:s}=i;if(e.isWidget||Et.isObject(e)?(-1===r.items.indexOf(e)&&(e=r.add(e)),e=i.indexOfTab(e.tab)):e=parseInt(e,10),!r.initialItems&&s>0&&(e<-1||e>=s))throw new Error(`Invalid activeTab ${e} (${s} tabs)`);if(r.isDisabledOrHiddenTab(e)&&(e=r.findAvailableTab(e)),!o.animateCardChange||!o.cardChangeAnimation)return e;o.cardChangeAnimation.then((i=>{(null==i?void 0:i.activeIndex)!==e&&(r._activeTab=e,r.updateActiveTab(e,n))}))}async updateActiveTab(e,n){var r;if(!this.initialItems){const{activeTabItemIndex:e,layout:i}=this;if(e>-1){const o=this.items[n],s=this.items[e];i.activeItem!==s&&(i.animateCardChange&&await this.tabSelectionPromise,(null==o?void 0:o.containsFocus)&&o.tab.focus(),this.tabSelectionPromise=null==(r=i.setActiveItem(s))?void 0:r.promise)}}}changeTabBar(e){return this.getConfig("strips"),this.strips={tabBar:e},this.strips.tabBar}makeTabConfig(e){const{tab:n}=e,r={item:e,type:"tab",tabPanel:this,disabled:Boolean(e.disabled),hidden:e.initialConfig.hidden,weight:e.weight||0,internalListeners:{click:"onTabClick",thisObj:this},localizableProperties:{text:!1}};return!1===n?null:Et.isObject(n)?Ed.mergeConfigs(r,n):r}updateItems(e,n){const r=this,{activeTab:i,initialItems:o}=r;let s,a=0;super.updateItems(e,n),o&&(s=Array.from(e,(e=>r.makeTabConfig(e))).filter((e=>{if(e)return e.index=a++,!0})),a&&(s[0].isFirst=!0,s[a-1].isLast=!0,s[i].active=!0,r.tabBar.add(s),r.activeTab=i))}updateTabMinWidth(e){var n;null==(n=this.tabBar)||n.items.forEach((n=>{n.isTab&&(n.minWidth=e)}))}updateTabMaxWidth(e){var n;null==(n=this.tabBar)||n.items.forEach((n=>{n.isTab&&(n.maxWidth=e)}))}updateAutoHeight(e){this.detachListeners("themeAutoHeight"),e&&or.ion({name:"themeAutoHeight",theme:"internalOnThemeChange",thisObj:this}),this.$measureHeight=e}applyAutoHeight(){const e=this,{layout:n,activeTab:r,element:i}=e,{animateCardChange:o}=n;n.animateCardChange=!1,e.height=null,e.height=Math.max(...e.items.map((n=>(e.activeTab=n,i.clientHeight))))+1,e.activeTab=r,n.animateCardChange=o,e.$measureHeight=!1}internalOnThemeChange(){this.isVisible?this.applyAutoHeight():this.$measureHeight=!0}onBeginActiveItemChange(e){const n=this.tabBar.tabs,{activeItem:r,prevActiveItem:i}=e;this.activeTab=n.indexOf(null==r?void 0:r.tab),(null==i?void 0:i.tab)&&(i.tab.active=!1),(null==r?void 0:r.tab)&&(r.tab.active=!0,r.tab.show())}onBeforeActiveItemChange(e){return this.trigger("beforeTabChange",e)}onActiveItemChange(e){this.trigger("tabChange",e)}onTabClick(e){this.activeTab=e.source.item}onPaint(){super.onPaint(...arguments),this.$measureHeight&&this.applyAutoHeight()}};Md.initClass(),Md._$name="TabPanel";var Ad=class extends Cc{static get $name(){return"TextAreaField"}static get type(){return"textareafield"}static get alias(){return"textarea"}static get configurable(){return{resize:"none",inputAttributes:{tag:"textarea"}}}updateResize(e){this.input.style.resize=e}};Ad.initClass(),Ad._$name="TextAreaField";var Id=class extends xc{static get $name(){return"TextAreaPickerField"}static get type(){return"textareapickerfield"}static get configurable(){return{picker:{type:"widget",tag:"textarea",cls:"b-textareapickerfield-picker",scrollAction:"realign",align:{align:"t-b",axisLock:!0},autoShow:!1},triggers:{expand:{cls:"b-icon-picker",handler:"onTriggerClick"}},resize:"none",inputType:null}}startConfigure(e){"boolean"==typeof e.inline&&A.deprecate("Core","6.0.0","TextAreaPickerField.inline config is no longer supported"),super.startConfigure(e)}get inputElement(){const e=super.inputElement;return e.readOnly="readonly",e.reference="displayElement",this.ariaElement="displayElement",e}get focusElement(){var e;return(null==(e=this._picker)?void 0:e.isVisible)?this.input:this.displayElement}get needsInputSync(){var e;return this.displayElement[this.inputValueAttr]!==String(null!=(e=this.inputValue)?e:"")}showPicker(){const e=this,{picker:n}=e;e.inline||(n.width=e.pickerWidth||e[e.pickerAlignElement].offsetWidth,super.showPicker(!0))}focusPicker(){this.input.focus()}onPickerKeyDown(e){const n=this,r=n.input;switch(e.key.trim()||e.code){case"Escape":return void n.picker.hide();case"Enter":e.ctrlKey&&(n.syncInputFieldValue(),n.picker.hide())}n.input=n.displayElement;const i=super.onPickerKeyDown(e);return n.input=r,i}syncInputFieldValue(e){this.displayElement&&(this.displayElement.value=this.inputValue),super.syncInputFieldValue(e)}changeValue(e){return null==e?"":e}changePicker(e,n){var r;const i=this,o=i.pickerWidth||(null==e?void 0:e.width);if(e=Id.reconfigure(n,e?M.merge({owner:i,forElement:i[i.pickerAlignElement],align:{matchSize:null==o,anchor:i.overlayAnchor,target:i[i.pickerAlignElement]},id:i.id+"-input",style:{resize:i.resize},html:null!=(r=i.value)?r:""},e):null,i)){const n=i.input=e.element;i.inputListenerRemover=cn.on({element:n,thisObj:i,focus:"internalOnInputFocus",change:"internalOnChange",input:"internalOnInput",keydown:"internalOnKeyEvent",keypress:"internalOnKeyEvent",keyup:"internalOnKeyEvent"})}return e}};Id.initClass(),Id._$name="TextAreaPickerField";var Minifiable_default=e=>{var n;return __publicField(n=class extends(e||re){compose(){const{minified:e}=this;return{class:{"b-minified":e}}}get widgetClass(){}},"$name","Minifiable"),__publicField(n,"configurable",{minifiable:!0,minified:null}),n},Fd=[],isStateName=e=>"*"!==e[0],pop=(e,n)=>{const r=e[n]||null;return delete e[n],r},responsiveRootFn=e=>e.responsiveRoot,Pd={number:e=>({width:n})=>n<=e&&e},splitConfigs=e=>(delete e.once,{callback:pop(e,"callback"),configs:e,when:pop(e,"when")}),splitMergedConfigs=(e,...n)=>{const r=n.flatMap((e=>(null==e?void 0:e.once)||Fd)),i=e.mergeConfigs(...n),o=splitConfigs(i);return o.once=r.length?splitConfigs(e.mergeConfigs(...r)):null,o},Responsive_default=e=>{var n;return n=class extends((e||re).mixin(Delayable_default,Fencible_default)){get isResponsivePending(){return 0===this.responsiveUpdateCount&&this.hasConfig("responsive")}get isResponsiveUpdating(){var e;return this._responsiveUpdating||(null==(e=this.responsiveWidget)?void 0:e._responsiveUpdating)}updateResponsive(e){var n;const r=this,i=r.constructor,{responsiveDefaults:o}=r,s=Array.from(new Set(Et.keys(e).concat(Et.keys(o)))).filter(isStateName);let a,l,c,d,u=null;if(e)for(l of(u={"*":splitMergedConfigs(i,o["*"],e["*"])},s))c=e[l],null!==c&&!1!==c&&(a=a||c&&"when"in c,u[l]=splitMergedConfigs(i,o["*"],o[l],e["*"],c),d=u[l].when,u[l].when=(null==(n=Pd[typeof d])?void 0:n.call(Pd,d))||d);r.$responsiveStates=u,r.$responsiveWhen=a,r.syncResponsiveWidget()}updateResponsiveState(e,n){var r,i,o,s,a;const l=this,{$responsiveStates:c}=l,d=1==++l.responsiveStateChanges,u=null==(r=l.element)?void 0:r.classList,h=c["*"],g=c[e]||h,p=d&&(g.once||h.once),m=d&&l.isStateful,f=l.responsiveWidget;let b=g.configs,v=null==p?void 0:p.configs;v&&(b=b?l.constructor.mergeConfigs(b,v):v),n&&(null==u||u.remove(`b-responsive-${n.toLowerCase()}`)),e&&(null==u||u.add(`b-responsive-${e.toLowerCase()}`)),m&&(v=l.loadStatefulData(),v&&(b=b?l.constructor.mergeConfigs(b,v):v),l.suspendStateful()),l._responsiveUpdating=!0;try{null==(i=l.trigger)||i.call(l,"beforeResponsiveStateChange",{state:e,oldState:n,target:f}),b&&l.setConfig(b),null==(o=g.callback)||o.call(g,{source:l,state:e,oldState:n,target:f,initial:d}),null==(s=null==p?void 0:p.callback)||s.call(p,{source:l,state:e,oldState:n,target:f,initial:d}),null==(a=l.trigger)||a.call(l,"responsiveStateChange",{state:e,oldState:n,target:f})}finally{l._responsiveUpdating=!1,m&&l.resumeStateful()}}get responsiveTarget(){return this.responsiveWidget||this._responsiveTarget}updateResponsiveTarget(){this.syncResponsiveWidget()}updateResponsiveWidget(e){var n;const r=this,i=e&&r.responsiveUpdate;null==(n=r.$responsiveWrapper)||n.destroy(),r.$responsiveWrapper=e&&((e,n)=>{let r,i=Proxy.revocable(e,{get:(n,i)=>(r&&(r[i]=!0),e[i])}),o=he.after(e,"onConfigChange",((e,{name:i})=>{(null==r?void 0:r[i])&&n()})),s=e.ion({resize:()=>{n()}});return e.monitorResize=!0,{widget:e,get object(){return null==i?void 0:i.proxy},destroy(){i&&(i.revoke(),o(),s(),i=o=s=null)},reset(){r=Object.create(null)}}})(e,i),null==i||i.now()}responsiveUpdate(){const e=this,{$responsiveStates:n,$responsiveWrapper:r}=e,i=null==r?void 0:r.widget;if(n&&r){let o,s,a=null,l=0,d=n;for(s in i&&i!==e&&!e.$responsiveWhen&&(i.getConfig("responsive"),d=i.$responsiveStates||d),r.reset(),n)"*"!==s&&(o=d[s].when(r.object,c),null!=o&&!1!==o&&(!a||o<l)&&(a=s,l=o));++e.responsiveUpdateCount,e.responsiveState=a}}syncResponsiveWidget(){var e;const n=this;let r,i=null;if(!n.isDestroying&&n.responsive){if(r=n.responsiveTarget,i=r){if("string"==typeof r&&(i="@"===r?n:"@"===r[0]?n[r.substring(1)]:n.up(r),!i))throw new Error(`No match for responsiveTarget="${r}"`)}else i=!n.responsiveRoot&&(null==(e=n.up)?void 0:e.call(n,responsiveRootFn))||n;if(!i.isWidget)throw new Error(`${i.constructor.$$name} is not a widget and cannot be a responsiveTarget`)}return n.responsiveWidget=i,i}changeBreakpoints(e){return Et.assertObject(e,"breakpoints"),(null==e?void 0:e.width)&&Object.keys(e.width).forEach((n=>{e.width[n].maxWidth=n})),(null==e?void 0:e.height)&&Object.keys(e.height).forEach((n=>{e.height[n].maxHeight=n})),e}updateBreakpoints(e){e&&(this.monitorResize=!0)}getBreakpoint(e,n){const r=Object.keys(e).map((e=>parseInt(e))).sort().find((e=>n<=e));return e[null!=r?r:e["*"]&&"*"]}activateBreakpoint(e,n){var r,i;const o=this,s=o[`current${e}Breakpoint`];n!==s&&(o[`current${e}Breakpoint`]=n,o.setConfig(n.configs),s&&o.element.classList.remove(`b-breakpoint-${s.name.toLowerCase()}`),o.element.classList.add(`b-breakpoint-${n.name.toLowerCase()}`),o.trigger(`responsive${e}Change`,{breakpoint:n,prevBreakpoint:s}),null==(r=n.callback)||r.call(n,{source:o,breakpoint:n,prevBreakpoint:s}),null==(i=o.recompose)||i.call(o))}applyResponsiveBreakpoints(e,n){var r;const i=this,{width:o,height:s}=null!=(r=i.breakpoints)?r:{};if(o){const n=i.getBreakpoint(o,e);i.activateBreakpoint("Width",n)}if(s){const e=i.getBreakpoint(s,n);i.activateBreakpoint("Height",e)}}onInternalResize(e,n,r,i,o){super.onInternalResize(e,n,r,i,o),this.applyResponsiveBreakpoints(n,r)}},__publicField(n,"$name","Responsive"),__publicField(n,"configurable",{responsive:{$config:{lazy:"paint"},value:null},responsiveDefaults:{small:{when:400},medium:{when:800},large:{when:()=>1/0},"*":{}},responsiveRoot:null,responsiveState:null,responsiveTarget:{value:null,$config:{lazy:"paint"}},responsiveWidget:{value:null,$config:{nullify:!0}},breakpoints:null}),__publicField(n,"delayable",{responsiveUpdate:"raf"}),__publicField(n,"fenced",{syncResponsiveWidget:!0}),__publicField(n,"prototypeProperties",{responsiveStateChanges:0,responsiveUpdateCount:0}),n},Styleable_default=e=>{var n;return __publicField(n=class extends(e||re){changeCssVarPrefix(e){return Et.assertString(e,"prefix"),e&&!e.endsWith("-")&&(e+="-"),e||""}changeCss(e){Et.assertObject(e,"css");const n=this;if(!globalThis.Proxy)throw new Error("Proxy not supported");const r=new Proxy({},{get(e,r){var i;return null==(i=getComputedStyle(n.element||document.documentElement).getPropertyValue(`--${n.cssVarPrefix}${w.hyphenate(r)}`))?void 0:i.trim()},set:(e,r,i)=>((n.element||document.documentElement).style.setProperty(`--${n.cssVarPrefix}${w.hyphenate(r)}`,i),!0)});return e&&(n._element?Et.assign(r,e):n.$initialCSS=e),r}updateElement(e,...n){super.updateElement(e,...n),this.$initialCSS&&Et.assign(this.css,this.$initialCSS)}get widgetClass(){}},"$name","Styleable"),__publicField(n,"configurable",{cssVarPrefix:"",css:{}}),n},Od="http://www.w3.org/2000/svg",Ld={bar:1,outline:2,text:3},byDatasetOrder=(e,n)=>parseInt(e.dataset.order,10)-parseInt(n.dataset.order,10),getField=e=>e.field,returnFalse=()=>!1,_d=class extends bs{static get type(){return"histogram"}static get $name(){return"Histogram"}static get defaultConfig(){return{data:null,values:null,series:null,topValue:null,element:{children:[{ns:Od,tag:"svg",reference:"svgElement",width:"100%",height:"100%",preserveAspectRatio:"none",children:[{ns:Od,tag:"g",reference:"scaledSvgGroup"},{ns:Od,tag:"g",reference:"unscaledSvgGroup"}]}]},omitZeroHeightBars:null,monitorResize:!0,getRectClass:null,getBarTip:null,getBarText:null,getBarTextRenderData:null,getBarTextTip:null}}construct(e){super.construct(e),this.scheduleRefresh=this.createOnFrame(this.refresh,[],this,!0),this.refresh()}set tip(e){var n;const r=this;null==(n=r.tip)||n.destroy(),r._tip=e?fc.new({owner:r,forElement:r.svgElement,forSelector:"rect",internalListeners:{beforeShow:"up.onBeforeTipShow"}},e):null}onElementResize(){super.onElementResize(...arguments);const e=this.svgElement.getBoundingClientRect();this.scaledSvgGroup.setAttribute("transform",`scale(${e.width} ${e.height})`)}onBeforeTipShow({source:e}){const n=parseInt(e.activeTarget.dataset.index);e.html=e.contentTemplate({histogram:this,index:n})}set series(e){const n=this._series={};for(const r in e)if(!1!==e[r]){const i=n[r]=Object.assign({},e[r]);!i.type&&e[r].type&&(i.type=e[r].type),!i.field&&e[r].field&&(i.field=e[r].field),"order"in n||(i.order=Ld[i.type]),i.id=r}this.scheduleRefresh()}get series(){return this._series}set data(e){const n=this;if(n._data=e,!n.topValue){const r=Object.values(n.series).map(getField);for(let i=0,{length:o}=e;i<o;i++)for(let o=0,{length:s}=r;o<s;o++)n.topValue=Math.max(n.topValue||0,e[i][r[o]])}n.scheduleRefresh()}get data(){return this._data}set topValue(e){this._topValue=e,this.scheduleRefresh()}get topValue(){return this._topValue}scheduleRefresh(){}refresh(){const e=this,{series:n,_tip:r}=e,i=[];for(const r in n){const o=n[r],s=e[`draw${w.capitalize(o.type)}`](o);Array.isArray(s)?i.push.apply(i,s):i.push(s)}i.sort(byDatasetOrder),$o.syncChildren({domConfig:{children:i},configEquality:returnFalse},e.scaledSvgGroup),$o.syncChildren({domConfig:{children:e.drawText()}},e.unscaledSvgGroup),r&&r.isVisible&&e.onBeforeTipShow({source:r})}drawBar(e){const n=this,{topValue:r,data:i,omitZeroHeightBars:o,barStyle:s}=n,{field:a,order:l}=e,c=1/i.length,d=[];let u;for(let h=0,g=0,{length:p}=i;h<p;h++,g+=u){const p=i[h],m=p[a],f=p.height||(m>r?r:m)/r,b=1-f,v=p.rectConfig={ns:Od,tag:"rect",dataset:{}},y=n.callback("getBarTip",n,[e,v,p,h]);u=p.width||c,s?v.style=s:delete v.style,Object.assign(v.dataset,{index:h,order:l}),Object.assign(v,{x:g,y:b,width:u,height:f,class:n.callback("getRectClass",n,[e,v,p,h])}),y?v.dataset.btip=y:delete v.dataset.btip,!f&&o||d.push(v)}return d}drawOutline(e){const{topValue:n,data:r}=this,{field:i,order:o}=e,s=1/r.length,a=["M 0,1"],l=e.outlineElement||(e.outlineElement={ns:Od,tag:"path",dataset:{order:o}});let c,d="M",u="L";for(let e=0,o=0,{length:l}=r;e<l;e++){const l=1-r[e][i]/n;c=r[e].width||s,a.push(`${d} ${o},${l} ${u} ${o+=c},${l}`),d=u=""}return l.d=a.join(" "),l}drawText(){const e=this,{data:n}=e,r=1/n.length,i=[];for(let o,s=0,a=0,{length:l}=n;s<l;s++,a+=o){o=n[s].width||r;const l=e.callback("getBarText",e,[n[s],s]);if(l){const r=e.callback("getBarTextRenderData",e,[{ns:Od,tag:"text",className:"b-bar-legend",html:l,x:100*(a+o/2)+"%",y:void 0!==n[s].y?n[s].y:"100%",dataset:{index:s}},n[s],s]),c=e.callback("getBarTextTip",e,[r,n[s],s]);c?r.dataset.btip=c:delete r.dataset.btip,i.push(r)}}return i}getBarText(e,n){return""}getBarTextRenderData(e,n,r){return e}getBarTip(e,n,r,i){}getBarTextTip(e,n,r){}getRectClass(e,n,r,i){return""}};_d.initClass(),_d._$name="Histogram";var $d="http://www.w3.org/2000/svg",jd=class extends bs{static get type(){return"scale"}static get $name(){return"Scale"}static get configurable(){return{scalePoints:null,scaleMaxPadding:.1,horizontal:!1,align:{value:!1,$config:{merge:"replace"}},element:{children:[{ns:$d,tag:"svg",reference:"svgElement",width:"100%",height:"100%",preserveAspectRatio:"none",children:[{ns:$d,tag:"g",reference:"scaledSvgGroup",children:[{ns:$d,tag:"path",reference:"pathElement"}]},{ns:$d,tag:"g",reference:"unscaledSvgGroup"}]}]},monitorResize:!0}}construct(e){super.construct(e),this.scheduleRefresh=this.createOnFrame(this.refresh,[],this,!0),this.refresh()}changeAlign(e){return e||(e=this.horizontal?"bottom":"right"),e}updateAlign(e,n){this.element.classList.remove(`b-align-${n}`),this.element.classList.add(`b-align-${e}`)}updateHorizontal(e,n){this.element.classList.remove("b-scale-"+(n?"horizontal":"vertical")),this.element.classList.add("b-scale-"+(e?"horizontal":"vertical"))}onElementResize(){super.onElementResize(...arguments),this.scheduleRefresh()}scheduleRefresh(){}refresh(){const e=this,{horizontal:n,width:r,height:i,align:o,scalePoints:s,scaleMaxPadding:a}=e,l=s[s.length-1].value,c=[],d=[],u=1/(l+a*l);e.scaledSvgGroup.setAttribute("transform",`scale(${n?r:1} ${n?1:i})`);for(const e of s){const s=Boolean(e.text),a=u*e.value;if(s){const s={ns:$d,tag:"text",className:"b-scale-tick-label",html:e.text,dataset:{tick:e.value}};n?(s.x=100*a+"%",s.y="top"===o?"1.6em":i-12):(s.x="left"===o?"12":""+(r-12),s.y=100*(1-a)+"%"),d.push(s)}n?"top"===o?c.push(`M${a},0 L${a},${s?10:5}`):c.push(`M${a},${i} L${a},${i-(s?10:5)}`):"left"===o?c.push(`M0,${1-a} L${s?10:5},${1-a}`):c.push(`M${r},${1-a} L${r-(s?10:5)},${1-a}`)}e.pathElement.setAttribute("d",c.join("")),$o.syncChildren({domConfig:{children:d}},e.unscaledSvgGroup)}};jd.initClass(),jd._$name="Scale";var zd=class extends re{static get $name(){return"AvatarRendering"}static get configurable(){return{element:null,colorPrefix:"b-sch-",tooltip:null,size:null}}doDestroy(){var e;null==(e=this.tooltip)||e.destroy(),super.doDestroy()}updateElement(e){cn.on({element:e,delegate:".b-resource-image",error:"onImageErrorEvent",thisObj:this,capture:!0})}changeTooltip(e){return fc.new({forElement:this.element,forSelector:".b-resource-avatar",cls:"b-resource-avatar-tooltip"},e)}static get failedUrls(){return this._failedUrls||(this._failedUrls=new Set),this._failedUrls}getResourceAvatar({initials:e,color:n,iconCls:r,imageUrl:i,defaultImageUrl:o,dataset:s={},resourceRecord:a,alt:l=w.encodeHtml(null==a?void 0:a.name)}){const c=this.getImageConfig(e,n,i,o,s,l)||this.getIconConfig(r,s)||this.getResourceInitialsConfig(e,n,s),{size:d}=this;return Object.assign(c.style,{...d?{height:d,width:d}:void 0}),c}getImageConfig(e,n,r,i,o,s){if(r=zd.failedUrls.has(r)?i:r||i)return{tag:"img",draggable:"false",loading:"lazy",class:{"b-resource-avatar":1,"b-resource-image":1},style:{},alt:s,elementData:{defaultImageUrl:i,imageUrl:r,initials:e,color:n,dataset:o},src:r,dataset:o}}getIconConfig(e,n){if(e)return e&&{tag:"i",style:{},class:{"b-resource-avatar":1,"b-resource-icon":1,[e]:1},dataset:n}}getResourceInitialsConfig(e,n,r){const i=Gn.isNamedColor(n)&&n,o=!i&&n,{size:s}=this;return{tag:"div",class:{"b-resource-avatar":1,"b-resource-initials":1,[`${this.colorPrefix}${i}`]:i},style:{backgroundColor:o||null,...s?{height:s,width:s}:void 0},children:[e],dataset:r}}onImageErrorEvent({target:e}){if(!e.matches(".b-resource-avatar"))return;const{defaultImageUrl:n,initials:r,color:i,imageUrl:o,dataset:s}=e.elementData;if(n&&!e.src.endsWith(n.replace(/^[./]*/gm,"")))e.src=n;else{const n=Gn.createElement(this.getResourceInitialsConfig(r,i,s));n.elementData=e.elementData,e.parentElement.replaceChild(n,e)}zd.failedUrls.add(o)}};zd._$name="AvatarRendering",window&&!window.bryntum&&(window.bryntum={});var Bd=class{constructor(e){if(e){if(e.isLocation)return e;if(e.nodeType===Node.ELEMENT_NODE){const n=bs.fromElement(e,"gridbase"),r=n&&e.closest(n.focusableSelector);if(r){const{dataset:i}=r.parentNode;this.init({grid:n,rowIndex:n.store.includes(i.id)?n.store.indexOf(i.id):i.index||-1,columnId:r.dataset.columnId}),this.initialTarget=e}}else this.init(e)}}init(e){var n,r;const i=this,o=i.grid=e.grid,{store:s,columns:a}=o,{visibleColumns:l}=a;if(e.target&&(i.actionTargets=[i._target=e.target]),e.record)i._id=e.record.id;else if("id"in e)i._id=e.id,null==e.id&&(i._rowIndex=-1);else{const r=isNaN(e.row)?isNaN(e.rowIndex)?NaN:e.rowIndex:e.row;i._rowIndex=Math.max(Math.min(Number(r),s.count-1),o.hideHeaders?0:-1),i._id=null==(n=s.getAt(i._rowIndex))?void 0:n.id}if("_rowIndex"in i||(i._rowIndex=s.indexOf(i.id)),i.isSpecialRow=null==(r=i.record)?void 0:r.isSpecialRow,"columnId"in e)i._column=a.getById(e.columnId);else if("field"in e)i._column=a.get(e.field);else{const n=isNaN(e.column)?isNaN(e.columnIndex)?NaN:e.columnIndex:e.column;isNaN(n)?i._column="column"in e?isNaN(e.column)?e.column:l[e.column]:l[0]:(i._columnIndex=Math.min(Number(n),l.length-1),i._column=l[i._columnIndex])}"_columnIndex"in i||(i._columnIndex=l.indexOf(i._column))}get isLocation(){return!0}equals(e,n=!1){const r=this;return(null==e?void 0:e.isLocation)&&e.grid===r.grid&&(n?r.id===e.id&&r._column===e._column:e.record===r.record&&e.column===r.column&&e.target===r.target)}get rowIndex(){const{_id:e}=this,{store:n}=this.grid;return n.includes(e)?n.indexOf(e):Math.min(this._rowIndex,n.count-1)}get visibleRowIndex(){const{rowManager:e}=this.grid,{rowIndex:n}=this;return-1===n?n:Math.max(Math.min(n,e.lastFullyVisibleTow.dataIndex),e.firstFullyVisibleTow.dataIndex)}get isSelectable(){return this.grid.store.includes(this._id)&&!this.isSpecialRow}get record(){if(this._rowIndex>-1){const{store:e}=this.grid;return e.includes(this._id)?e.getById(this._id):e.getAt(this._rowIndex)}}get id(){return this._id}get column(){const{visibleColumns:e}=this.grid.columns;return(null==e?void 0:e.includes(this._column))?this._column:null==e?void 0:e[this.columnIndex]}get columnId(){var e;return null==(e=this.column)?void 0:e.id}get columnIndex(){var e;return Math.min(this._columnIndex,(null==(e=this.grid.columns.visibleColumns)?void 0:e.length)-1)}move(e){const n=this,{record:r,column:i,grid:o}=n,{store:s}=o,a=o.columns.visibleColumns,l=new Bd;let c=s.includes(r)?s.indexOf(r):n.rowIndex,d=a.includes(i)?a.indexOf(i):n.columnIndex;const u=o.hideHeaders?0:-1,h=s.count-1,g=a.length-1,p=c===u,m=c===h,f=0===d,b=d===g;switch(e){case Bd.PREV_CELL:f?p||(d=g,c--):d--;break;case Bd.NEXT_CELL:b?m||(d=0,c++):d++;break;case Bd.UP:p||c--;break;case Bd.DOWN:m||(-1===c?c=o.rowManager.firstFullyVisibleRow.dataIndex:c++);break;case Bd.FIRST_COLUMN:d=0;break;case Bd.LAST_COLUMN:d=g;break;case Bd.FIRST_CELL:c=u,d=0;break;case Bd.LAST_CELL:c=h,d=g;break;case Bd.PREV_PAGE:c=Math.max(u,c-Math.floor(o.scrollable.clientHeight/o.rowHeight));break;case Bd.NEXT_PAGE:c=Math.min(h,c+Math.floor(o.scrollable.clientHeight/o.rowHeight))}return l.init({grid:o,rowIndex:c,columnIndex:d}),l}get cell(){var e,n;const r=this,{grid:i,id:o,_cell:s}=r;if(s)return s;if(null==o)return null==(e=i.columns.getById(r.columnId))?void 0:e.element;{const{row:e}=r;if(e)return e.getCell(r.columnId)||e.getCell(null==(n=i.columns.getAt(r.columnIndex))?void 0:n.id)}}get row(){return this.grid.getRowById(this.id)||this.grid.getRow(this.rowIndex)}get target(){const{cell:e,_target:n}=this,{focusableFinder:r}=this.grid;if(e)return n||(r.currentNode=this.grid.focusableFinderCell=e,r.nextNode()||e)}get isActionable(){const{cell:e,_target:n}=this,r=e&&Gn.getActiveElement(e),i=r&&e.compareDocumentPosition(r)&Node.DOCUMENT_POSITION_CONTAINED_BY;return Boolean(i||n&&n!==this.cell)}get isColumnHeader(){return this.cell&&-1===this.rowIndex}get isCell(){return this.cell&&this.record}};Bd.UP=1,Bd.NEXT_CELL=2,Bd.DOWN=3,Bd.PREV_CELL=4,Bd.FIRST_COLUMN=5,Bd.LAST_COLUMN=6,Bd.FIRST_CELL=7,Bd.LAST_CELL=8,Bd.PREV_PAGE=9,Bd.NEXT_PAGE=10,Bd._$name="Location";var validWidth=e=>"number"==typeof e||(null==e?void 0:e.endsWith("px")),Hd=class extends(Ur.mixin(Events_default,Localizable_default)){static get $name(){return"Column"}static get type(){return"column"}static get fields(){return["type","text","field","renderer","width","flex","autoWidth","autoHeight",{name:"fitMode",defaultValue:"exact"},"readOnly",{name:"editor",defaultValue:{}},"cellEditor","finalizeCellEdit",{name:"revertOnEscape",defaultValue:!0},{name:"invalidAction",defaultValue:"block"},{name:"sortable",defaultValue:!0,convert(e,n,r){if(!e)return!1;if(!0===e)return!0;const i={};return"function"==typeof e?(i.originalSortFn=e,i.sortFn=e.bind(r)):"object"==typeof e&&(Object.assign(i,e),i.fn&&(i.sortFn=i.fn,delete i.fn)),i}},{name:"searchable",defaultValue:!0},{name:"collapsible",defaultValue:!1},{name:"collapsed",defaultValue:!1},{name:"collapseMode"},{name:"filterable",defaultValue:!0,convert(e){if(!e)return!1;if(!0===e)return!0;const n={columnOwned:!0};return"function"==typeof e?n.filterFn=e:"object"==typeof e&&Object.assign(n,e),n}},{name:"sealed"},{name:"hideable",defaultValue:!0},{name:"draggable",defaultValue:!0},{name:"groupable",defaultValue:!0},{name:"resizable",defaultValue:!0},"groupRenderer","headerRenderer","tooltip","tooltipRenderer","cellCls","cls","icon","align",{name:"minWidth",defaultValue:60},"maxWidth",{name:"hidden",defaultValue:!1},{name:"locked"},{name:"region"},{name:"mergeCells",type:"boolean"},{name:"mergeable",type:"boolean",defaultValue:!0},"mergedRenderer",{name:"showColumnPicker",defaultValue:!0},{name:"enableHeaderContextMenu",defaultValue:!0},{name:"enableCellContextMenu",defaultValue:!0},"headerMenuItems","cellMenuItems","sum","summaries","summaryRenderer","responsiveLevels","tags","touchConfig","tree","filterType",{name:"htmlEncode",defaultValue:!0},{name:"htmlEncodeHeaderText",defaultValue:!0},{name:"autoSyncHtml",defaultValue:!1},{name:"alwaysClearCell",defaultValue:!1},{name:"headerWidgets"},{name:"instantUpdate",defaultValue:!1},{name:"repaintOnResize",defaultValue:!1},"editTargetSelector",{name:"exportable",defaultValue:!0},{name:"exportedType"},{name:"ariaLabel",defaultValue:"L{Column.columnLabel}"},{name:"cellAriaLabel",defaultValue:"L{cellLabel}"}]}static get autoExposeFields(){return!1}construct(e,n){var r;const i=this;i.masterStore=n,n&&(i._grid=Array.isArray(n)?n[0].grid:n.grid),i.localizableProperties=H.mergeMethods.distinct(e.localizableProperties,["text","ariaLabel","cellAriaLabel"]),e.localeClass&&(i.localeClass=e.localeClass),super.construct(...arguments),i.isLeaf&&!("field"in i.data)&&(i.field="_"+(i.type||"")+ ++Hd.emptyCount,i.noFieldSpecified=!0),i.hasComplexMapping=null==(r=i.field)?void 0:r.includes("."),i.width||i.flex||i.children||i.set({width:Hd.defaultWidth,flex:null},null,!0),i.headerWidgets&&i.initHeaderWidgets(i.headerWidgets),i.isParent&&(i.meta.visibleChildren=new Set,i.collapsible&&(i.collapsible=!0))}shouldSync(e){return e.isColumn&&e.text===this.text&&(e.field===this.field||String(e.renderer)===String(this.renderer))&&(!e.previousSibling&&!this.previousSibling||e.previousSibling.shouldSync(this.previousSibling))}get isCollapsible(){var e;return(null==(e=this.children)?void 0:e.length)>1&&this.collapsible}get collapsed(){return this.get("collapsed")}set collapsed(e){this.set("collapsed",e,!0),this.onCollapseChange(!e),this.trigger("toggleCollapse",{collapsed:e})}onCellFocus(e){this.location=e,this.updateHeaderAriaLabel(this.localizeProperty("ariaLabel")),-1!==e.rowIndex&&this.updateCellAriaLabel(this.localizeProperty("cellAriaLabel"))}updateHeaderAriaLabel(e){Gn.setAttributes(this.element,{"aria-label":e})}updateCellAriaLabel(e){var n,r;!(null==(n=this.location)?void 0:n.isSpecialRow)&&(null==(r=this.location)?void 0:r.cell)&&((null==e?void 0:e.length)||(e=this.location.column.text),Gn.setAttributes(this.location.cell,{"aria-label":e}))}doDestroy(){var e,n,r;null==(r=null==(n=null==(e=this.data)?void 0:e.editor)?void 0:n.destroy)||r.call(n),this.destroyHeaderWidgets(),super.doDestroy()}set headerWidgets(e){this.initHeaderWidgets(e),this.set("headerWidgets",e)}get headerWidgets(){return this.get("headerWidgets")}initHeaderWidgets(e){this.destroyHeaderWidgets();const n=this.headerWidgetMap={};for(const r of e){const e=bs.create({owner:this,...r});n[e.ref||e.id]=e}}destroyHeaderWidgets(){var e;for(const n of Object.values(this.headerWidgetMap||{}))null==(e=n.destroy)||e.call(n)}static generateAutoCls(){const e=[];for(let n=this;n!==Hd;n=n.superclass)n.type&&n.type!==n.superclass.type&&e.push(`b-${n.type.toLowerCase()}-cell`);const n=e.join(" ");return(Hd.autoClsMap||(Hd.autoClsMap=new Map)).set(this,n),n}getCellClass(e){var n,r;const{record:i,column:o}=e,{cellCls:s,internalCellCls:a,grid:l,constructor:c,align:d}=o,u=(null==(n=Hd.autoClsMap)?void 0:n.get(c))||c.generateAutoCls(),h=e.cell.classList.contains("b-editing"),g={[l.cellCls]:l.cellCls,[u]:u,[s]:s,[a]:a,"b-cell-dirty":i.isFieldModified(o.field)&&(o.compositeField||!1!==(null==(r=i.fieldMap[o.field])?void 0:r.persist)),[`b-grid-cell-align-${d}`]:d,"b-selected":l.selectionMode.cell&&l.isCellSelected(e),"b-focused":l.isFocused(e),"b-auto-height":o.autoHeight,"b-editing":h};return i.isSpecialRow&&g["b-checkbox-selection"]&&(g["b-checkbox-selection"]=!1),g}get locked(){return"locked"===this.data.region}set locked(e){this.region=e?"locked":"normal"}get region(){return this.parent.isRoot?this.get("region"):this.parent.region}set region(e){this.set("region",e)}get sortable(){return this.isLeaf&&this.data.sortable}set sortable(e){this.set("sortable",e)}get groupable(){return this.isLeaf&&this.data.groupable}set groupable(e){this.set("groupable",e)}get editor(){const e=this;let{editor:n}=e.data;if(n&&!n.isWidget){const r=e.grid.processCellEditor({editor:n,field:e.field});r?n=e.data.editor=r.editor:("string"==typeof n&&(n={type:n}),n=e.data.editor=bs.create(Et.merge(e.defaultEditor,{owner:e.grid,label:w.encodeHtml(e.text)},n)))}return n}set editor(e){this.data.editor=e}get defaultEditor(){return{type:"textfield",name:this.field}}getFilterableValue(e){return this.getRawValue(e)}get owner(){return this._owner||this.subGrid}set owner(e){this._owner=e}get grid(){var e;return this._grid||(null==(e=this.parent)?void 0:e.grid)}set subGrid(e){this._subGrid=e}get subGrid(){var e;return this._subGrid||(null==(e=this.grid)?void 0:e.getSubGridFromColumn(this))}get subGridElement(){return this.subGrid.element}get element(){return this.grid.getHeaderElement(this)}get previousVisibleSibling(){const e=this.region;let n=this.previousSibling;for(;n&&(n.hidden||n.region!==e);)n=n.previousSibling;return n}get nextVisibleSibling(){const e=this.region;let n=this.nextSibling;for(;n&&(n.hidden||n.region!==e);)n=n.nextSibling;return n}get isLastInSubGrid(){return!this.nextVisibleSibling&&(this.parent.isRoot||this.parent.isLastInSubGrid)}get allowDrag(){return!this.parent.isRoot||Boolean(this.nextVisibleSibling||this.previousVisibleSibling)}get textWrapper(){return Gn.getChild(this.element,".b-grid-header-text")}get textElement(){return Gn.down(this.element,".b-grid-header-text-content")}get contentElement(){return Gn.down(this.element,".b-grid-header-children")}get isSorted(){return this.grid.store.sorters.some((e=>e.field===this.field))}get isFocusable(){return this.isLeaf}static get text(){return this.$meta.fields.defaults.text}get headerText(){return this.htmlEncodeHeaderText?w.encodeHtml(this.text):this.text}get isVisible(){return!this.hidden&&(!this.parent||this.parent.isVisible)}hide(e=!1,n=!1){const r=this,{parent:i}=r;if(!r.hidden){if(r.hidden=!0,i&&!i.isRoot&&!i.isTogglingAll){i.children.some((e=>!0!==e.hidden))||i.hidden||(e=!0,i.hide())}r.isParent?r.children.forEach((e=>e.hide(!0,!0))):i.isRoot||i.meta.visibleChildren[n?"add":"delete"](r),e||r.stores.forEach((e=>e.trigger("columnHide",{column:r})))}}show(e=!1){var n;const r=this,{parent:i}=r;r.hidden&&(r.hidden=!1,(null==i?void 0:i.hidden)&&i.show(),r.isParent&&(null==(n=r.meta.visibleChildren)||n.forEach((e=>e.show(!0)))),e||r.stores.forEach((e=>e.trigger("columnShow",{column:r}))))}toggle(e){return this.hidden&&void 0===e||!0===e?this.show():!this.hidden&&void 0===e||!1===e?this.hide():void 0}toggleChildren(e=this.children,n=void 0){var r,i;const o=this;null==(r=o.grid.columns)||r.beginBatch(),o.isTogglingAll=!0,e.forEach((e=>e.toggle(n))),o.isTogglingAll=!1,null==(i=o.grid.columns)||i.endBatch()}onCollapseChange(e=void 0){var n,r;const i=this;if("toggleAll"===i.collapseMode)i.toggleChildren();else{const{firstChild:o}=i;null!=o.flex&&i.collapsed?(o.oldFlex=o.flex,o.width=o.element.offsetWidth):!i.collapsed&&o.oldFlex&&(o.flex=o.oldFlex,o.oldFlex=null),null==(n=i.grid.columns)||n.beginBatch(),i.isTogglingAll=!0,i.children.slice(1).forEach((n=>n.toggle(e))),i.isTogglingAll=!1,null==(r=i.grid.columns)||r.endBatch()}}set collapsible(e){const n=this;if(n.set("collapsible",e),n.isParent){const{headerWidgets:r=[]}=n;if(e)r.push({type:"button",ref:"collapseExpand",toggleable:!0,pressed:n.collapsed,icon:"b-icon-collapse-"+(n.grid.rtl?"right":"left"),pressedIcon:"b-icon-collapse-"+(n.grid.rtl?"left":"right"),cls:"b-grid-header-collapse-button b-transparent",onToggle:({pressed:e})=>n.collapsed=e});else{const e=r.findIndex((e=>"collapseExpand"===e.ref));e>-1&&r.splice(e,1)}n.headerWidgets=r,n.collapsed&&n.onCollapseChange(!1)}}get collapsible(){return this.get("collapsible")}generateId(){return Hd.generatedIdIndex||(Hd.generatedIdIndex=0),(this.field?this.field.replace(/\./g,"-"):"col")+ ++Hd.generatedIdIndex}get allIndex(){return this.masterStore.indexOf(this)}measureSize(e){var n;return Gn.measureSize(e,null==(n=this.subGrid)?void 0:n.element)}get calcMinWidth(){const{width:e,minWidth:n}=this.data;return validWidth(e)&&validWidth(n)?Math.max(parseInt(e)||0,parseInt(n)||0):e}get width(){return this.data.width}set width(e){const n={width:e};e&&"flex"in this.data&&(n.flex=null),this.set(n)}set flex(e){const n={flex:e};e&&"width"in this.data&&(n.width=null),this.set(n)}get flex(){return this.data.flex}calculateMinWidth(){const e=this,n=e.measureSize(e.width),r=e.measureSize(e.minWidth);let i=0;return e.children&&(i=e.children.reduce(((e,n)=>e+n.calculateMinWidth()),0)),Math.max(n,r,i)}resizeToFitContent(e,n,r=!1){const i=this,{grid:o,element:s,fitMode:a}=i,{rowManager:l,store:c}=o,{count:d}=c;if(d<=0||"none"===i.fitMode||!i.fitMode)return;const[u]=l.rows,{rowElement:h,cellElement:g}=o.beginGridMeasuring(),p=new Bd({grid:o,column:i,id:null});let m,f,b,v,y,w,C=0,S={length:0,record:null};if(g._domData={columnId:i.id,row:u,rowElement:h},p._cell=g,p.updatingSingleRow=!0,p.isMeasuring=!0,g.innerHTML="",o.resizeToFitIncludesHeader){if(!o.$headerPadding){const e=globalThis.getComputedStyle(s);o.$headerPadding=parseInt(e.paddingLeft)}const e=s.querySelector(".b-grid-header-text-content");e.style.cssText="flex: none; width: auto",C=e.offsetWidth+2*o.$headerPadding+2,e.style.cssText=""}for(d>1e3?(m=Math.max(Math.min(l.topIndex+Math.round(l.rowCount/2)-500,d-1e3),0),f=m+1e3):(m=0,f=d),b=m;b<f;b++){if(v=c.getAt(b),y=i.getRawValue(v),"value"===a)w=String(y).length;else if(p._record=S.record,p._id=v.id,p._rowIndex=b,u.renderCell(p),"textContent"===a)w=g.textContent.length;else{const e=g.offsetWidth;e>C&&(C=e)}w>S.length&&(S={record:v,length:w,rowIndex:b})}return S.length>0&&("value"===a||"textContent"===a)&&(p._record=S.record,p._id=S.record.id,p._rowIndex=S.rowIndex,u.renderCell(p),C=Math.max(C,g.offsetWidth)),Array.isArray(e)&&([e,n]=e),C=Math.max(C,e||0),C=Math.min(C,n||1e6),r||o.endGridMeasuring(),i.width=i.maxWidth?C=Math.min(C,i.maxWidth):C,C}getState(){const e=this,n={id:e.id,hidden:e.hidden,region:e.region,locked:e.locked};return e.children||(n[e.flex?"flex":"width"]=e.flex||e.width),e.isCollapsible&&(n.collapsed=e.collapsed),n}applyState(e){const n=this;n.beginBatch(),"locked"in e&&(n.locked=e.locked),"width"in e&&(n.width=e.width),"flex"in e&&(n.flex=e.flex),"width"in e&&n.flex?n.flex=void 0:"flex"in e&&n.width&&(n.width=void 0),"region"in e&&(n.region=e.region),n.endBatch(),"hidden"in e&&n.toggle(!0!==e.hidden),"collapsed"in e&&(n.collapsed=e.collapsed)}remove(){const{subGrid:e,grid:n}=this,r=e&&(null==n?void 0:n.focusedCell);(null==r?void 0:r.columnId)===this.id&&(n.owns(Gn.getActiveElement(n))?n.navigateRight():n._focusedCell=new Bd({grid:n,rowIndex:r.rowIndex,column:e.columns.getAdjacentVisibleLeafColumn(this.id,!0,!0)})),super.remove()}getRawValue(e){return this.hasComplexMapping?Et.getPath(e,this.field):e[this.field]}refreshCell(e){this.grid.rowManager.refreshCell(e,this.id)}clearCell(e){e.innerHTML="",delete e._content}canEdit(e){if(e.isEditable){const n=e.isEditable(this.field);if(void 0!==n)return n}return!0}insertChild(e,n=null,r=!1){return(e=Array.isArray(e)?e:[e]).forEach((e=>{const{parent:n}=e;(null==n?void 0:n.collapsed)&&e===n.firstChild&&n.children.length>1&&1===n.children.filter((e=>!e.hidden)).length&&(e.nextSibling.hidden=!1)})),this.sealed&&!this.inProcessChildren?null:super.insertChild(...arguments)}canFillValue(){return!0}getCurrentConfig(e){var n;const r=super.getCurrentConfig(e);return(null==(n=this.sortable)?void 0:n.originalSortFn)&&(r.sortable=this.sortable.originalSortFn),r.renderer===this.internalRenderer&&delete r.renderer,r.headerRenderer===this.internalHeaderRenderer&&delete r.headerRenderer,delete r.ariaLabel,delete r.cellAriaLabel,r}};Hd.emptyCount=0,Hd.defaultWidth=100,Hd.exposeProperties(),Hd._$name="Column";var Vd={boolean:{type:"check"},date:{type:"date"},integer:{type:"number",format:{maximumFractionDigits:0}},number:{type:"number"}},Nd=[{field:"region"}],qd=class extends(Localizable_default(yi)){static get defaultConfig(){return{modelClass:Hd,tree:!0,autoAddField:!1,syncDataOnLoad:{threshold:1},sorters:Nd,reapplySortersOnAdd:!0}}construct(e){const n=this;e.grid&&(e.grid._columnStore=n,n.id=`${e.grid.id}-columns`,e.grid.ion({subGridCollapse:"clearSubGridCaches",subGridExpand:"clearSubGridCaches",thisObj:n})),super.construct(e),n.ion({change:n.onStoreChange,sort:()=>n.updateChainedStores(),thisObj:n,prio:1})}doDestroy(){const e=[];this.isChained||this.traverse((n=>e.push(n))),super.doDestroy(),this.isChained||e.forEach((e=>e.destroy()))}getById(e){return super.getById(e)||this.idRegister[e]}forEach(e,n=this){this.traverseWhile(((r,i)=>e.call(n,r,i)),!0)}get totalFixedWidth(){let e=0;for(const n of this)n.hidden||(n.children?n.children.forEach((n=>e+=this.calculateFixedWidth(n))):e+=this.calculateFixedWidth(n));return e}get hasFlex(){return this.visibleColumns.some((e=>e.flex))}calculateFixedWidth(e){return e.flex?e.measureSize(Hd.defaultWidth):Math.max(e.measureSize(e.width),e.measureSize(e.minWidth))}get topColumns(){return this.isChained?this.masterStore.rootNode.children.filter(this.chainedFilterFn):this.rootNode.children}get visibleColumns(){const e=this;return e._visibleColumns||(e._visibleColumns=e.leaves.filter((e=>e.isVisible&&(!e.subGrid||!e.subGrid.collapsed)))),e._visibleColumns}onStoreChange({action:e,changes:n}){("update"!==e||"hidden"in n)&&this.clearCaches()}clearSubGridCaches({subGrid:e}){e.columns.clearCaches(),this.clearCaches()}clearCaches(){var e;this._visibleColumns=null,null==(e=this.masterStore)||e.clearCaches()}onMasterDataChanged(e){super.onMasterDataChanged(e),("update"!==e.action||"hidden"in e.changes)&&this.clearCaches()}getAdjacentVisibleLeafColumn(e,n=!0,r=!1){const i=this.visibleColumns,o=e instanceof Hd?e:this.getById(e);let s=i.indexOf(o)+(n?1:-1);if(!i[s]){if(!r)return null;s=n?0:i.length-1}return i[s]}get bottomColumns(){return this.leaves}get(e){return this.findRecord("field",e,!0)}createRecord(e){var n,r;const{grid:i={}}=this,{store:o}=i,s=null==(r=null==(n=null==o?void 0:o.modelClass)?void 0:n.fieldMap)?void 0:r[e.field];let a=this.modelClass;if((null==s?void 0:s.column)&&(e=M.merge({},s.column,e)),e.type&&(a=qd.getColumnClass(e.type),!a))throw new Error(`Column type '${e.type}' not registered`);e.locked&&(e.region="locked",delete e.locked);const l=new a(e,this);if(l.data.region||(l.data.region=i.defaultRegion||"normal"),this.autoAddField&&!l.noFieldSpecified&&o&&!s){let e=l.field;l.constructor.fieldType&&(e={name:l.field,type:l.constructor.fieldType}),o.modelClass.addField(e)}return l}indexOf(e){if(null==e)return-1;const n=super.indexOf(e);return n>-1?n:this.records.findIndex((n=>n.field===e))}get usesAutoHeight(){return this.find((e=>e.autoHeight))}get usesFlexAutoHeight(){return this.find((e=>e.autoHeight&&null!=e.flex))}resolveSyncNode(e){return e.id?super.resolveSyncNode(e):e.field?{id:e.field,node:this.allRecords.find((n=>n.field===e.field))}:e.type?{id:e.type,node:this.allRecords.find((n=>n.type===e.type))}:{id:null,node:null}}static registerColumnType(e,n=!1){e.simpleRenderer=n,(qd.columnTypes||(qd.columnTypes={}))[e.type]=e}static getColumnClass(e){return qd.columnTypes&&qd.columnTypes[e]}generateColumnForField(e,n){var r;"string"==typeof e&&this.grid&&(e=null==(r=this.grid.store)?void 0:r.modelClass.fieldMap[e]);let i=e.column||Vd[e.type]||{};return"string"==typeof i&&(i={type:i}),i=Object.assign({text:e.text||w.separate(e.name),field:e.name},n,i),null!=e.precision&&(i.format.maximumFractionDigits=e.precision),e.columnType&&(i.type=e.columnType),this.createRecord(i)}};qd.registerColumnType(Hd,!0),qd._$name="ColumnStore";var Wd=class extends Hd{get groupHeaderReserved(){return!0}construct(e,n){const r=this;super.construct(...arguments),e.width||e.flex||r.grid.ion({paint:"updateAutoWidth",thisObj:r}),r.disableIfGridReadOnly&&r.grid.element.classList.add("b-actioncolumn-readonly"),r.externalRenderer=r.renderer,r.renderer=r.internalRenderer}internalRenderer({grid:e,column:n,record:r,callExternalRenderer:i=!0}){var o,s;const a=r&&"groupRowFor"in r.meta,{subGrid:l}=n;return i&&(null==(o=this.externalRenderer)||o.call(this,...arguments)),{className:{"b-action-ct":1},children:null==(s=n.actions)?void 0:s.map(((e,i)=>{var o;if("visible"in e){if("function"==typeof e.visible&&!1===e.visible({record:r}))return"";if(!1===e.visible)return""}if(a&&!e.showForGroup||!a&&e.showForGroup)return"";const{tooltip:s,renderer:c}=e,d="function"==typeof s||(null==(o=null==s?void 0:s.startsWith)?void 0:o.call(s,"up."))?l.callback(s,l,[{record:r}]):s||"";if(c){const o=l.callback(c,l,[{index:i,record:r,column:n,tooltip:d,action:e}]);return"string"==typeof o?{tag:"span",dataset:{...fc.encodeConfig(d),index:i},html:o}:(o.dataset=o.dataset||{},o.dataset.index=i,o)}return{tag:"button",dataset:{...fc.encodeConfig(d),index:i},"aria-label":d,className:{"b-tool":1,"b-action-item":1,[e.cls]:e.cls}}}))}}onCellClick({grid:e,column:n,record:r,target:i}){var o;if(n!==this||!i.classList.contains("b-action-item"))return;let s=i.dataset.index;s||(s=i.parentElement.dataset&&i.parentElement.dataset.index);const a=null==(o=n.actions)?void 0:o[s],l=a&&a.onClick;l&&this.callback(l,n,[{record:r,action:a,target:i}])}updateAutoWidth(){const e=this,n=[],{actions:r}=e;if(!e.element)return;const i=e.actions=[];null==r||r.forEach((e=>{const r={...e};delete r.visible,r.showForGroup?(delete r.showForGroup,n.push(r)):i.push(r)})),n.length>i.length&&(e._actions=n);const o=Gn.createElement(e.internalRenderer({column:e,callExternalRenderer:!1})).outerHTML;e.width=Gn.measureText(o,e.element,!0,e.element.parentElement),e.actions=r}};__publicField(Wd,"type","action"),__publicField(Wd,"fields",[{name:"actions",type:"array"},{name:"disableIfGridReadOnly",defaultValue:!1}]),__publicField(Wd,"defaults",{filterable:!1,groupable:!1,sortable:!1,editor:!1,searchable:!1,htmlEncode:!1,resizable:!1,minWidth:30}),qd.registerColumnType(Wd),Wd.exposeProperties(),Wd._$name="ActionColumn";var Ud=class extends Hd{static get defaults(){return{filterType:"number",format:""}}get defaultEditor(){const{format:e,name:n,max:r,min:i,step:o,largeStep:s,align:a}=this;return Et.cleanupProperties({type:"numberfield",format:e,name:n,max:r,min:i,step:o,largeStep:s,textAlign:a})}get formatter(){const e=this,{format:n}=e;let r=e._formatter;return r&&e._lastFormat===n||(e._formatter=r=Dl.get(e._lastFormat=n)),r}formatValue(e){return null!=e&&(e=this.formatter.format(e),this.unit&&(e=`${e}${this.unit}`)),null!=e?e:""}defaultRenderer({value:e}){return this.formatValue(e)}};__publicField(Ud,"type","number"),__publicField(Ud,"fieldType","number"),__publicField(Ud,"fields",["format","min","max","step","largeStep","unit"]),qd.registerColumnType(Ud,!0),Ud.exposeProperties(),Ud._$name="NumberColumn";var Gd=class extends Ud{static get defaults(){return{function:"sum",includeParentInChangeSet:!1}}construct(e,n){this.configuredAlign="align"in e,this.configuredEditor="editor"in e,super.construct(...arguments);const{grid:r}=n;"sum"===this.function&&(this.function="sumChildren"),r&&(this.store=r.store)}set store(e){const n=this,r={update:"onRecordUpdate",thisObj:n,prio:1e3},i=n._store;if(e!==i){i&&i.un(r),n._store=e;const{modelClass:o}=e,s=o.fieldMap[n.field];s&&"number"===s.type&&(n.configuredAlign||(n.align="end"),n.configuredEditor||(n.editor="number")),e.ion(r)}}canEdit(e){return e.isLeaf}get store(){return this._store}sumChildren(...e){let n=0;for(let r=0,{length:i}=e;r<i;r++)n+=parseFloat(e[r]||0,10);return n}avg(...e){let n=0;const{length:r}=e;for(let i=0;i<r;i++)n+=parseFloat(e[i]||0,10);return n/r}onRecordUpdate({record:e,changes:n}){const r=this,{rowManager:i}=r.grid;r.field in n&&e.isLeaf&&e.bubble((e=>{const n=i.getRowFor(e);if(n){const e=n.getCell(r.field);e&&n.renderCell(e)}}),!0)}getRawValue(e){var n;let r=0;if(null==(n=e.children)?void 0:n.length){const n=this,i=n.function,o="string"==typeof i&&"function"==typeof Math[i],{handler:s,thisObj:a}=o?{handler:Math[i],thisObj:Math}:n.resolveCallback(i);r=s.apply(a,e.children.map((e=>n.getRawValue(e)))),n.includeParentInChangeSet?e.set(n.field,r,!0):e.setData(n.field,r)}else r=e[this.field];return r}canFillValue(){return!1}};__publicField(Gd,"type","aggregate"),__publicField(Gd,"fields",["function","includeParentInChangeSet"]),qd.registerColumnType(Gd,!0),Gd.exposeProperties(),Gd._$name="AggregateColumn";var Yd=class extends Hd{static get defaults(){return{filterable:!1,sortable:!1,editor:!1,searchable:!1,fitMode:!1,alwaysClearCell:!1}}construct(e,n){const r=this;r.widgetMap={},super.construct(...arguments),r.externalRenderer=r.renderer,r.renderer=r.internalRenderer}doDestroy(){for(const e of Object.values(this.widgetMap))e.destroy&&e.destroy();super.doDestroy()}updateReadOnly(e){for(const n of Object.values(this.widgetMap))n.cellInfo.record.readOnly||(n.readOnly=e)}internalRenderer(e){var n;const r=this,{cellElement:i,column:o,record:s,isExport:a}=e,{widgets:l}=o;return!a&&l&&(i.widgets||r.clearCell(i),i.widgets=e.widgets=l.map(((n,a)=>{var l,c;let d,u;if(i.widgets&&(d=i.widgets[a],u=d.element.nextElementSibling,n.recreate&&d&&(delete r.widgetMap[d.id],d.destroy(),i.widgets[a]=null)),d||(r.onBeforeWidgetCreate(n,e),n.recomposeAsync=!1,n.owner=r.grid,d=dl.append(n,u?{insertBefore:u}:i)[0],r.widgetMap[d.id]=d,r.onAfterWidgetCreate(d,e),d.name&&d.ion({change:({value:e,userAction:n})=>{n&&(d.cellInfo.record[d.name]=e)}})),d.cellInfo={record:s,column:o},r.grid&&!r.meta.isSelectionColumn&&(d.readOnly=r.grid.readOnly||s.readOnly),!1!==(null==(l=r.onBeforeWidgetSetValue)?void 0:l.call(r,d,e))){const r=n.valueProperty||"value"in d&&"value"||d.defaultBindProperty;if(r){const n=d.name?s[d.name]:e.value;d[r]=n}}return null==(c=r.onAfterWidgetSetValue)||c.call(r,d,e),d}))),a?null:null==(n=this.externalRenderer)?void 0:n.call(this,e)}onBeforeWidgetCreate(e,n){}onAfterWidgetCreate(e,n){}clearCell(e){e.widgets&&(e.widgets.forEach((e=>{delete this.widgetMap[e.id],e.destroy()})),e.widgets=null),super.clearCell(e)}resizeToFitContent(){}};__publicField(Yd,"$name","WidgetColumn"),__publicField(Yd,"type","widget"),__publicField(Yd,"fields",["widgets"]),qd.registerColumnType(Yd),Yd.exposeProperties(),Yd._$name="WidgetColumn";var Kd=class extends Yd{construct(e,n){var r;super.construct(...arguments);const i=this;if(Object.assign(i,{externalHeaderRenderer:i.headerRenderer,externalOnBeforeWidgetSetValue:i.onBeforeWidgetSetValue,externalOnAfterWidgetSetValue:i.onAfterWidgetSetValue,onBeforeWidgetSetValue:i.internalOnBeforeWidgetSetValue,onAfterWidgetSetValue:i.internalOnAfterWidgetSetValue,headerRenderer:i.internalHeaderRenderer}),!i.meta.isSelectionColumn){const e=null==(r=i.grid)?void 0:r.store.modelClass;i.field?!e||e.fieldMap[i.field]||i.constructor.suppressNoModelFieldWarning||(console.warn(i.$$name+" is configured with a field, but this is not part of your Model `fields` collection."),e.addField({name:i.field,type:"boolean"})):console.warn("CheckColumn MUST be configured with a field, otherwise the checked state will not be persistent. Widgets are recycled and reused")}}doDestroy(){var e;null==(e=this.headerCheckbox)||e.destroy(),super.doDestroy()}internalHeaderRenderer({headerElement:e,column:n}){let r;return e.classList.add("b-check-header"),n.showCheckAll?(e.classList.add("b-check-header-with-checkbox"),n.headerCheckbox?e.appendChild(n.headerCheckbox.element):n.headerCheckbox=new _c({appendTo:e,owner:this.grid,ariaLabel:"L{Checkbox.toggleSelection}",internalListeners:{change:"onCheckAllChange",thisObj:n}})):r=n.headerText,r=n.externalHeaderRenderer?n.externalHeaderRenderer.call(this,...arguments):r,n.showCheckAll?void 0:r}updateCheckAllState(e){this.headerCheckbox&&(this.headerCheckbox.suspendEvents(),this.headerCheckbox.checked=e,this.headerCheckbox.resumeEvents())}onCheckAllChange({checked:e}){const n=this;if(n.field){const{store:r}=n.grid;r.beginBatch(),r.forEach((r=>n.updateRecord(r,n.field,e))),r.endBatch()}n.trigger("toggleAll",{checked:e})}internalRenderer({value:e,isExport:n,record:r,cellElement:i}){if(n)return null==e?"":e;const o=super.internalRenderer(...arguments);return r.readOnly&&!this.meta.isSelectionColumn&&(i.widgets[0].readOnly=!0),e?i.widgets[0].input.setAttribute("checked",!0):i.widgets[0].input.removeAttribute("checked"),o}onBeforeWidgetCreate(e,n){e.cls=this.checkCls}onAfterWidgetCreate(e,n){n.cellElement.widget=e,e.ion({beforeChange:"onBeforeCheckboxChange",change:"onCheckboxChange",thisObj:this})}internalOnBeforeWidgetSetValue(e){var n;e.record=e.cellInfo.record,this.isInitialSet=!0,null==(n=this.externalOnBeforeWidgetSetValue)||n.call(this,...arguments)}internalOnAfterWidgetSetValue(e){var n;this.isInitialSet=!1,null==(n=this.externalOnAfterWidgetSetValue)||n.call(this,...arguments)}onBeforeCheckboxChange({source:e,checked:n,userAction:r}){const i=this,{grid:o}=i,{record:s}=e.cellInfo;return!(r&&i.field&&(!o.features.cellEdit||o.features.cellEdit.disabled)||i.meta.isSelectionColumn&&!o.isSelectable(s)&&n)&&(i.isInitialSet?void 0:i.trigger("beforeToggle",{record:s,checked:n}))}onCheckboxChange({source:e,checked:n}){if(!this.isInitialSet){const r=this,{record:i}=e.cellInfo,{field:o}=r;o&&(r.updateRecord(i,o,n),n?r.updateCheckAllState(r.grid.store.every((e=>e[o]),null,!0)):r.updateCheckAllState(!1)),r.trigger("toggle",{record:i,checked:n})}}updateRecord(e,n,r){const i=`set${w.capitalize(n)}`;e[i]?e[i](r):e.set(n,r)}onCellKeyDown({event:e,cellElement:n}){if(" "===e.key){const r=n.widget;null==r||r.toggle(),e.preventDefault(),e.handled=!0}}getCurrentConfig(e){const n=super.getCurrentConfig(e);return delete n.onBeforeWidgetSetValue,delete n.onAfterWidgetSetValue,this.externalOnBeforeWidgetSetValue&&(n.onBeforeWidgetSetValue=this.externalOnBeforeWidgetSetValue),this.externalOnAfterWidgetSetValue&&(n.onAfterWidgetSetValue=this.externalOnAfterWidgetSetValue),n}};__publicField(Kd,"$name","CheckColumn"),__publicField(Kd,"type","check"),__publicField(Kd,"fields",["checkCls","showCheckAll","onAfterWidgetSetValue","onBeforeWidgetSetValue","callOnFunctions","onBeforeToggle","onToggle","onToggleAll"]),__publicField(Kd,"defaults",{align:"center",checkCls:null,showCheckAll:!1,sortable:!0,filterable:!0,widgets:[{type:"checkbox",valueProperty:"checked"}]}),qd.registerColumnType(Kd,!0),Kd._$name="CheckColumn";var Xd=class extends Hd{static get defaults(){return{format:"L",step:1,minWidth:85,filterType:"date"}}defaultRenderer({value:e}){return e?this.formatValue(e):""}groupRenderer({cellElement:e,groupRowFor:n}){e.innerHTML=this.formatValue(n)}formatValue(e){return"string"==typeof e&&(e=Ct.parse(e,this.format||void 0)),Ct.format(e,this.format||void 0)}set format(e){const{editor:n}=this.data;this.set("format",e),n&&(n.format=e)}get format(){return this.get("format")}get defaultEditor(){const e=this,{min:n,max:r,step:i,format:o}=e;return{name:e.field,type:"date",calendarContainerCls:"b-grid-cell-editor-related",weekStartDay:e.grid.weekStartDay,format:o,max:r,min:n,step:i}}};__publicField(Xd,"$name","DateColumn"),__publicField(Xd,"type","date"),__publicField(Xd,"fieldType","date"),__publicField(Xd,"fields",["format","pickerFormat","step","min","max"]),qd.registerColumnType(Xd,!0),Xd.exposeProperties(),Xd._$name="DateColumn";var Zd=class extends Ud{static get defaults(){return{min:0,max:100,showValue:!1,lowThreshold:20,htmlEncode:!1,searchable:!1,summaryRenderer:e=>`${e}%`,fitMode:!1}}constructor(e,n){super(...arguments),this.internalCellCls="b-percent-bar-cell"}defaultRenderer({value:e}){return{className:"b-percent-bar-outer",role:"progressbar","aria-Valuemin":0,"aria-Valuemax":100,"aria-Valuenow":e=e||0,tabIndex:0,children:[{tag:"div",className:{"b-percent-bar":1,"b-zero":0===e,"b-low":e<this.lowThreshold},style:{width:e+"%"},children:[this.showValue?{tag:"span",text:e+"%"}:void 0]}]}}resizeToFitContent(){}};__publicField(Zd,"type","percent"),__publicField(Zd,"fieldType","number"),__publicField(Zd,"fields",["showValue","lowThreshold"]),Zd.sum="average",qd.registerColumnType(Zd,!0),Zd._$name="PercentColumn";var Qd=class extends Ud{static get defaults(){return{min:0,max:5,emptyIcon:"b-icon b-icon-star",filledIcon:"b-icon b-icon-star",editable:!0,filterType:"number",searchable:!1,width:"11.2em",htmlEncode:!1,minWidth:"11.2em",editor:!1,fitMode:"value"}}renderer({value:e}){return{className:{"b-rating-cell-inner":1,"b-not-editable":!this.editable},children:oe.populate(this.max,(n=>{const r=n<e;return{tag:"i",className:{"b-rating-icon":!0,"b-filled":r,"b-empty":!r,[r?this.filledIcon:this.emptyIcon]:!0}}}))}}onCellClick({grid:e,column:n,record:r,target:i,event:o}){if(i.classList.contains("b-rating-icon")&&!e.readOnly&&n.editable){let e=[].indexOf.call(i.parentNode.childNodes,i);i.classList.contains("b-filled")&&(o.metaKey||o.shiftKey)&&(e-=1),1===r.get(n.field)&&0===e&&(e=-1),r.set(n.field,e+1)}}};__publicField(Qd,"$name","RatingColumn"),__publicField(Qd,"type","rating"),__publicField(Qd,"fieldType","number"),__publicField(Qd,"fields",["emptyIcon","filledIcon","editable"]),qd.registerColumnType(Qd,!0),Qd.exposeProperties(),Qd._$name="RatingColumn";var Jd=class extends Hd{static get defaults(){return{groupable:!1,sortable:!1,filterable:!1,searchable:!1,resizable:!1,draggable:!1,minWidth:50,width:50,align:"center",text:"#",editor:!1,readOnly:!0}}construct(e){super.construct(...arguments);const n=this,{grid:r}=n;n.internalCellCls="b-row-number-cell",n.externalHeaderRenderer=n.headerRenderer,n.headerRenderer=n.internalHeaderRenderer,r&&(r.ion({bindStore:"bindStore",thisObj:n}),n.bindStore({store:r.store,initial:!0}),r.store.count&&!r.rendered&&r.ion({paint:"resizeToFitContent",thisObj:n,once:!0}))}get groupHeaderReserved(){return!0}bindStore({store:e,initial:n}){const r=this;r.detachListeners("grid"),e.ion({name:"grid",[`change${r.grid.asyncEventSuffix}`]:"onStoreChange",thisObj:r}),n||r.resizeToFitContent()}onStoreChange({action:e,isMove:n}){if("dataset"===e||"add"===e||"remove"===e||"removeall"===e){if("remove"===e&&n)return;const r=this,i=r.resizeToFitContent();"dataset"===e&&!i&&r.grid.store.count&&r.grid.rowManager.ion({renderDone(){this.resizeToFitContent()},once:!0,thisObj:r})}}renderer({record:e,grid:n}){return e.isSpecialRow?"":n.store.indexOf(e,!0)+1}resizeToFitContent(){const{grid:e}=this,{store:n}=e,{count:r}=n;if(r&&!this.hidden){const n=e.element.querySelector(`.b-grid-cell[data-column-id="${this.id}"]`);if(n){const e=parseInt(Gn.getStyleValue(n,"padding-left")),i=Gn.measureText(r,n);return this.width=Math.max(this.minWidth,i+2*e),!0}}return!1}set flex(e){}internalHeaderRenderer({headerElement:e,column:n}){var r;return e.classList.add("b-rownumber-header"),(null==(r=n.externalHeaderRenderer)?void 0:r.call(this,...arguments))||n.headerText}};__publicField(Jd,"$name","RowNumberColumn"),__publicField(Jd,"type","rownumber"),qd.registerColumnType(Jd,!0),Jd._$name="RowNumberColumn";var eu=class extends Hd{static get defaults(){return{htmlEncode:!1}}constructor(e,n){super(...arguments);if(!this.template)throw new Error("TemplateColumn needs a template");if("function"!=typeof this.template)throw new Error("TemplateColumn.template must be a function")}renderer(e){if(!e.record.isSpecialRow)return this.template({value:e.value,record:e.record,field:e.column.field})}};__publicField(eu,"type","template"),__publicField(eu,"fields",["template"]),qd.registerColumnType(eu,!0),eu.exposeProperties(),eu._$name="TemplateColumn";var tu=class extends Hd{static get defaults(){return{format:"LT",minWidth:140,filterType:"time"}}defaultRenderer({value:e}){return e?this.formatValue(e):""}groupRenderer({cellElement:e,groupRowFor:n}){e.innerHTML=this.formatValue(n)}formatValue(e){return"string"==typeof e&&(e=Ct.parse(e,this.format)),Ct.format(e,this.format)}set format(e){const{editor:n}=this;this.set("format",e),n&&(n.format=e)}get format(){return this.get("format")}get defaultEditor(){return{name:this.field,type:"time",format:this.format}}};__publicField(tu,"type","time"),__publicField(tu,"fieldType","date"),__publicField(tu,"fields",["format"]),qd.registerColumnType(tu,!0),tu.exposeProperties(),tu._$name="TimeColumn";var nu=!1,ru=class extends Hd{static get defaults(){return{tree:!0,hideable:!1,minWidth:150}}static get fields(){return[{name:"expandIconCls",defaultValue:"b-icon b-icon-tree-expand"},{name:"collapseIconCls",defaultValue:"b-icon b-icon-tree-collapse"},{name:"collapsedFolderIconCls"},{name:"expandedFolderIconCls"},{name:"indentSize",defaultValue:1.7},{name:"leafIconCls",defaultValue:"b-icon b-icon-tree-leaf"},{name:"editTargetSelector",defaultValue:".b-tree-cell-value"},"renderer"]}constructor(e,n){super(...arguments);const r=this;r.shouldHtmlEncode=r.htmlEncode,r.setData("htmlEncode",!1),r.renderer&&(r.originalRenderer=r.renderer),r.renderer=r.treeRenderer.bind(r)}treeRenderer(e){var n,r,i,o;const s=this,{grid:a,column:l,cellElement:c,row:d,record:u,isExport:h}=e,g=u.instanceMeta(a.store),p=!u.isLeaf&&g.collapsed,m={className:"b-tree-cell-value"},f=[m],b={className:{"b-tree-cell-inner":1},tag:u.href?"a":"div",href:u.href,target:u.target,children:f},v={"b-tree-parent-row":0,"b-tree-collapsed":0,"b-tree-expanded":0,"b-loading-children":0};let y,w,{value:C}=e;if(s.originalRenderer){const r=s.originalRenderer(e),i=null==(n=a.hasFrameworkRenderer)?void 0:n.call(a,{cellContent:r,column:l});y="object"==typeof r&&!i,C=i?"":!1===r?c.innerHTML:r,e.rendererHtml=r}if(y||(C=String(null!=C?C:"")),h)return C;if(u.isLeaf)c.classList.add("b-tree-leaf-cell"),w=e.iconCls||u.iconCls||s.leafIconCls;else{const n=!u.isExpanded(a.store),i=n?s.expandIconCls:s.collapseIconCls,o=n?s.collapsedFolderIconCls:s.expandedFolderIconCls;v["b-tree-parent-row"]=1,v["b-tree-collapsed"]=n,v["b-tree-expanded"]=!n,v["b-loading-children"]=g.isLoadingChildren,c.classList.add("b-tree-parent-cell"),f.unshift({tag:"i",className:{"b-tree-expander":1,[i]:1,"b-empty-parent":!g.isLoadingChildren&&!0!==u.children&&!(null==(r=u.children)?void 0:r.length)}}),nu=w=e.iconCls||u.iconCls||o}if(w&&f.splice(f.length-1,0,{tag:"i",className:{"b-tree-icon":1,[w]:1}}),d.isRow&&(d.assignCls(v),!u.isLeaf))if(d.setAttribute("aria-expanded",!p),p)d.removeAttribute("aria-owns");else for(const e in a.subGrids){const n=d.elements[e];Gn.setAttributes(n,{"aria-owns":(null==(i=u.children)?void 0:i.length)?null==(o=u.children)?void 0:o.map((n=>`${a.id}-${e}-${n.id}`)).join(" "):null})}Array.isArray(C)?m.children=C:y?Object.assign(m,C):s.shouldHtmlEncode||!C.includes("<")?(b.className["b-text-value"]=1,m.text=C):m.html=C;const S=u.childLevel*s.indentSize+(u.isLeaf?nu?2:w?.5:.4:0);return b.style=`padding-inline-start:${S}em`,b}getCurrentConfig(e){const n=super.getCurrentConfig(e);return n.renderer=this.originalRenderer,n}};__publicField(ru,"$name","TreeColumn"),__publicField(ru,"type","tree"),qd.registerColumnType(ru,!0),ru.exposeProperties(),ru._$name="TreeColumn";var iu=class extends Ur{static get fields(){return[{name:"iconCls",internal:!0},{name:"cls",internal:!0},{name:"rowHeight",internal:!0},{name:"href",internal:!0},{name:"target",internal:!0}]}};iu.exposeProperties(),iu._$name="GridRowModel";var ou=new Map,su=new Map,au="Grid",lu={Grid:"GridBase",Scheduler:"SchedulerBase",SchedulerPro:"SchedulerProBase",Gantt:"GanttBase"},cu=/\$\d+$/,du=class{static registerFeature(e,n=!1,r=null,i=null){i=(i=w.uncapitalize(i||Object.prototype.hasOwnProperty.call(e,"$name")&&e.$$name||e.name)).replace(cu,""),Array.isArray(r)||(r=[r||au]),r.forEach((r=>{const o=lu[r]||r,s=ou.get(o)||new Map,a=su.get(o)||new Map;s.set(i,e),a.set(e,n),ou.set(o,s),su.set(o,a)}))}static getTypeNameFeatures(e=au){const n=lu[e]||e,r=ou.get(n),i={};return r&&r.forEach(((e,n)=>i[n]=e)),i}static getTypeNameDefaultFeatures(e=au){const n=lu[e]||e,r=ou.get(n),i=su.get(n),o={};return r&&i&&r.forEach(((e,n)=>{i.get(e)&&(o[n]=e)})),o}static getInstanceFeatures(e){return e.$meta.names.reduce(((e,n)=>Object.assign(e,this.getTypeNameFeatures(n))),{})}static getInstanceDefaultFeatures(e){return e.$meta.names.reduce(((e,n)=>Object.entries(this.getTypeNameFeatures(n)).reduce(((e,[r,i])=>(this.isDefaultFeatureForTypeName(i,n)?e[r]=i:delete e[r],e)),e)),{})}static isDefaultFeatureForTypeName(e,n=au){const r=lu[n]||n,i=su.get(r);return i&&i.get(e)||!1}static isDefaultFeatureForInstance(e,n){const r=n.$meta.names.slice().reverse();let i=null;for(let n=0,o=r.length;n<o&&null===i;++n){const o=su.get(r[n]);o&&o.has(e)&&(i=o.get(e))}return i||!1}static reset(){ou.clear(),su.clear()}},uu=class extends sr{constructor(){super(...arguments),__publicField(this,"entityName","cell")}afterConstruct(){super.afterConstruct(),this.afterSelectionModeChange()}afterSelectionModeChange(){const e=this;e.client.selectionMode.cell?e._disabledBySelectionMode&&(e.disabled=!1,delete e._disabledBySelectionMode):e.disabled=!0}get copyOnly(){var e;return null==this._copyOnly?!(null==(e=this.client.features.cellEdit)?void 0:e.enabled):Boolean(this._copyOnly)}get canCopy(){var e;const{client:n}=this;return Boolean(!this.disabled&&n.selectedCells.length&&(!n._selectedRows.length||(null==(e=n.features.rowCopyPaste)?void 0:e.disabled)||n.focusedCell&&n.isCellSelected(n.focusedCell)))}get canCutPaste(){var e;return this.canCopy&&!this.copyOnly&&!(null==(e=this.client.features.cellEdit)?void 0:e.isEditing)&&!this.client.readOnly}isActionAvailable({actionName:e}){return this.canCopy&&("copy"===e||this.canCutPaste)}async sendToClipboard(e){var n,r;const i=this;let o=0,s=0,a="";e.sort(((e,n)=>e.rowIndex===n.rowIndex?e.columnIndex-n.columnIndex:e.rowIndex-n.rowIndex));for(const l of e){const{record:e,column:c,rowIndex:d,columnIndex:u}=l;d>o?(a.length>0&&(a+="\n".repeat(d-o)),o=d,s=u):u>s&&(a.length>0&&(a+="\t".repeat(u-s)),s=u);let h=null==(n=c.toClipboardString)?void 0:n.call(c,l);void 0===h&&(h=null==(r=e.get(c.field))?void 0:r.toString()),i.toCopyString&&(h=i.toCopyString({currentValue:h,column:c,record:e})),h=null==h?void 0:h.replace(/[\n\t]/," "),a+=h||i.emptyValueChar}return await c.writeToClipboard(a,this.useNativeClipboard),a}async cut(){await this.copy(!0)}async copy(e){const n=this,{client:r,entityName:i}=n,o="boolean"==typeof e&&e,s=o?r.selectedCells.filter((e=>{var n;return!(null==(n=e.record)?void 0:n.readOnly)})):r.selectedCells;if(s){if((o?!n.canCutPaste:!n.canCopy)||!1===r.trigger("beforeCopy",{cells:s,isCut:o,entityName:i}))return;const e=await n.sendToClipboard(s);if(!0===o)for(const e of s)e.column.readOnly||e.record.set(e.column.field,null);r.trigger("copy",{cells:s,copiedDataString:e,isCut:o,entityName:i})}}async paste(){const e=this,{client:n,entityName:r}=e,i=await c.readFromClipboard(e.useNativeClipboard),o=n.selectedCells[0];if(!e.canCutPaste||!(null==i?void 0:i.length)||!o||!1===n.trigger("beforePaste",{clipboardData:i,targetCell:o,entityName:r}))return;const s=new Set,a=e.stringAs2dArray(i),l=[],{_shiftSelectRange:d}=n;if(null==a?void 0:a.length){if(null==d?void 0:d.some((e=>e.equals(o)))){const n=e.cellSelectorsAs2dArray(d);if((null==n?void 0:n.length)%a.length==0&&n.columnCount%a.columnCount==0)for(let e=0;e<n.length;e+=a.length)for(let r=0;r<n.columnCount;r+=a.columnCount)l.push(n[e][r])}l.length||l.push(o);for(const r of l)for(let i=0;i<a.length;i++){const o=a[i],l=n.store.getAt(r.rowIndex+i);if(l&&!l.readOnly)for(let i=0;i<o.length;i++){const a=n.columns.visibleColumns[r.columnIndex+i],c=null==a?void 0:a.field;let d=o[i];c&&d&&!a.readOnly&&(d===e.emptyValueChar&&(d=null),a.fromClipboardString&&(d=a.fromClipboardString({string:d,record:l})),e.toPasteValue&&(d=e.toPasteValue({currentValue:d,record:l,column:a,field:c})),l.set(c,d,!1,!1,!1,!0),s.add(l))}}n.trigger("paste",{clipboardData:i,targetCell:o,modifiedRecords:[...s],entityName:r})}}cellSelectorsAs2dArray(e){const n=[];let r,i=null;for(const o of e)o.id!==i&&(i=o.id,r=[],n.push(r)),r.push(o);return n.columnCount=n[0].length,!n.some((e=>e.length!==n.columnCount))&&n}stringAs2dArray(e){const n=[],r=e.split(/\r\n|(?!\r\n)[\n-\r\x85\u2028\u2029]/);for(const e of r){const r=e.split("\t");if(n.columnCount&&r.length!==n.columnCount)return!1;n.columnCount=r.length,n.push(r)}return n}populateCellMenu({record:e,items:n}){const r=this;r.canCopy&&(n.cutCell={text:r.cutText,localeClass:r,icon:"b-icon b-icon-cut",weight:115,disabled:e.readOnly||!r.canCutPaste,onItem:()=>r.cut()},n.pasteCell={text:r.pasteText,localeClass:r,icon:"b-icon b-icon-paste",weight:120,disabled:e.readOnly||!r.canCutPaste,onItem:()=>r.paste()},n.copyCell={text:r.copyText,localeClass:r,cls:"b-separator",icon:"b-icon b-icon-copy",weight:110,onItem:()=>r.copy()})}};__publicField(uu,"$name","CellCopyPaste"),__publicField(uu,"pluginConfig",{chain:["populateCellMenu","afterSelectionModeChange"]}),__publicField(uu,"configurable",{copyOnly:null,emptyValueChar:" ",keyMap:{"Ctrl+C":"copy","Ctrl+X":"cut","Ctrl+V":"paste"},useNativeClipboard:!A.isTestEnv,toCopyString:null,toPasteValue:null,copyText:"L{copy}",cutText:"L{cut}",pasteText:"L{paste}"}),uu._$name="CellCopyPaste",du.registerFeature(uu);var hu={finishAndEditNextRow:1,finishAndEditPrevRow:1,finishEditing:1,cancelEditing:1,finishAndEditNextCell:1,finishAndEditPrevCell:1},gu=class extends(Delayable_default(sr)){static get defaultConfig(){return{autoSelect:!0,blurAction:"complete",continueEditingOnCellClick:!0,addNewAtEnd:null,addToCurrentParent:!1,autoEdit:null,editNextOnEnterPress:!0,editorClass:Xc,triggerEvent:"celldblclick",touchEditDelay:300,focusCellAnimationDuration:!1,multiEdit:!0,keyMap:{Enter:["startEditing","finishAndEditNextRow"],"Ctrl+Enter":["finishAllSelected","finishEditing"],"Shift+Enter":"finishAndEditPrevRow","Alt+Enter":"finishEditing",F2:["startEditing","finishEditing"],Escape:"cancelEditing",Tab:"finishAndEditNextCell","Shift+Tab":"finishAndEditPrevCell"},ignoreCSSSelector:"button,.b-icon,.b-fa,svg"}}static get pluginConfig(){return{assign:["startEditing","finishEditing","cancelEditing"],before:["onElementKeyDown","onElementPointerUp"],chain:["onElementClick","bindStore"]}}construct(e,n){super.construct(e,n);const r=this,i={renderRows:"onGridRefreshed",cellClick:"onCellClick",thisObj:r};r.grid=e,"cellclick"!==r.triggerEvent&&(i[r.triggerEvent]="onTriggerEditEvent"),r.autoEdit&&!("editNextOnEnterPress"in n)&&(r.editNextOnEnterPress=!1),e.ion(i),e.rowManager.ion({changeTotalHeight:"onGridRefreshed",thisObj:r}),r.bindStore(e.store)}bindStore(e){this.detachListeners("store"),e.ion({name:"store",update:"onStoreUpdate",beforeSort:"onStoreBeforeSort",thisObj:this})}async confirm(e){let n=!0;return this.editorContext&&(dd.owner=this.editorContext.editor.inputField,e.rootElement=this.grid.rootElement,n=await dd.confirm(e),dd.owner=null),n===dd.yesButton}doDestroy(){this.grid.columns.allRecords.forEach((e=>{var n;null==(n=e._cellEditor)||n.destroy()})),super.doDestroy()}doDisable(e){e&&!this.isConfiguring&&this.cancelEditing(!0),super.doDisable(e)}set disabled(e){super.disabled=e}get disabled(){const{grid:e}=this;return Boolean(super.disabled||e.disabled||e.readOnly)}get isEditing(){return Boolean(this.editorContext)}get activeRecord(){var e;return(null==(e=this.editorContext)?void 0:e.record)||null}getEditorForCell({id:e,cell:n,column:r,columnId:i,editor:o}){const s=this,{grid:a,editorClass:l}=s;let c=r.cellEditor,d=0;if(r.editTargetSelector){d=n.querySelector(r.editTargetSelector).offsetLeft}return o.autoSelect=s.autoSelect,(null==c?void 0:c.isEditor)||(c=r.data.cellEditor=l.create(l.mergeConfigs({type:l.type,constrainTo:null,cls:"b-cell-editor",inputField:o,blurAction:"none",invalidAction:r.invalidAction,completeKey:!1,cancelKey:!1,owner:a,align:{align:"t0-t0",offset:[d,0]},internalListeners:s.getEditorListeners(),onInternalKeyDown:s.onEditorKeydown.bind(s),allowMouseEvents:o.allowMouseEvents},c))),c.minHeight=a.rowHeight,c.inputField!==o&&(c.remove(c.items[0]),c.add(o)),c.align.offset[0]=d,r.instantUpdate&&!o.cellEditValueSetter&&(Et.wrapProperty(o,"value",null,(e=>{const{editorContext:n}=s,r=null==n?void 0:n.editor.inputField;!(null==n?void 0:n.editor.isValid)||Et.isEqual(n.record[n.column.field],e)||(null==r?void 0:r.isDateField)&&!r._isPickerInput||(n.record[n.column.field]=e)})),o.cellEditValueSetter=!0),Object.assign(c.element.dataset,{rowId:e,columnId:i,field:r.field}),c.inputField.revertOnEscape=r.revertOnEscape,s.editor=c}getEditorListeners(){return{focusOut:"onEditorFocusOut",focusIn:"onEditorFocusIn",start:"onEditorStart",beforeComplete:"onEditorBeforeComplete",complete:"onEditorComplete",beforeCancel:"onEditorBeforeCancel",cancel:"onEditorCancel",beforeHide:"onBeforeEditorHide",finishEdit:"onEditorFinishEdit",thisObj:this}}onEditorStart({source:e}){var n;const r=this,i=r.editorContext=e.cellEditorContext;if(i){const{grid:e}=r;"cellclick"!==r.triggerEvent&&(r.detachListeners("cellClickWhileEditing"),e.ion({name:"cellClickWhileEditing",cellclick:"onCellClickWhileEditing",thisObj:r})),null==(n=r.removeEditingListeners)||n.call(r),r.removeEditingListeners=or.addListener({globaltap:"onTapOut",thisObj:r}),e.trigger("startCellEdit",{grid:e,editorContext:i})}}onEditorBeforeComplete(e){const{grid:n}=this,r=e.source.cellEditorContext;return e.grid=n,e.editorContext=r,n.trigger("beforeFinishCellEdit",e)}onEditorComplete({source:e}){const{grid:n}=this,r=e.cellEditorContext;r.value=e.inputField.value,n.trigger("finishCellEdit",{grid:n,editorContext:r})}onEditorBeforeCancel(){const{editorContext:e}=this;return this.grid.trigger("beforeCancelCellEdit",{editorContext:e})}onEditorCancel({event:e}){const{editorContext:n,muteEvents:r,grid:i}=this;r||i.trigger("cancelCellEdit",{grid:i,editorContext:n,event:e})}onBeforeEditorHide({source:e}){const{row:n,cell:r}=e.cellEditorContext;null==r||r.classList.remove("b-editing"),null==n||n.removeCls("b-editing"),this.detachListeners("cellClickWhileEditing"),this.removeEditingListeners()}onEditorFinishEdit({source:e}){e.cellEditorContext=this.editorContext=null}getAdjacentEditableCell(e,n){const{grid:r}=this,{store:i,columns:o}=r,{visibleColumns:s}=o;let a=e.id,l=o.getAdjacentVisibleLeafColumn(e.columnId,n);for(;a;)if(l){if(l.editor&&l.canEdit(i.getById(a)))return{id:a,columnId:l.id};l=o.getAdjacentVisibleLeafColumn(l,n)}else{const r=i.getAdjacent(e.id,n,!1,!0);a=null==r?void 0:r.id,r&&(l=n?s[0]:s[s.length-1])}return null}doAddNewAtEnd(){const e="object"==typeof this.addNewAtEnd?Et.clone(this.addNewAtEnd):{},{grid:{store:n,rowManager:r},addToCurrentParent:i}=this;let o;return o=n.tree&&i?n.last.parent.appendChild(e):n.add(e)[0],r.getRowFor(o)||r.displayRecordAtBottom(),o}getEditingContext(e){e=this.grid.normalizeCellContext(e);const{column:n,record:r}=e;if((null==n?void 0:n.isVisible)&&n.editor&&!n.readOnly&&r&&!r.isSpecialRow&&!r.readOnly&&n.canEdit(r)){const i=r?n.getRawValue(r):r;return Object.assign(e,{value:void 0===i?null:i,editor:n.editor}),e}return!1}async startEditing(e={}){var n,r,i;const o=this;if(!o.disabled){const{grid:s}=o;if((null==e?void 0:e.fromKeyMap)&&(e=o.grid.focusedCell),Et.isEmpty(e)&&(e.id=s.firstVisibleRow.id),s.store.isTree&&s.features.tree){const r=e.id?s.store.getById(e.id):null!=(n=e.record)?n:s.store.getAt(e.row);if(!r)return!1;await s.expandTo(r)}const a=o.getEditingContext(e);if(!a)return!1;if(o.editorContext&&o.cancelEditing(),(null==(r=s.focusedCell)?void 0:r.equals(a))||s.focusCell(a),!1===s.trigger("beforeCellEditStart",{grid:s,editorContext:a}))return!1;const l=a.editor=o.getEditorForCell(a),{row:c,cell:d,record:u}=a;return l.inputField.highlightExternalChange=!1,l.cellEditorContext=a,l.render(d),d.classList.add("b-editing"),c.addCls("b-editing"),await l.startEdit({target:d,field:l.inputField.name||a.column.field,value:a.value,record:u})||(d.classList.remove("b-editing"),c.removeCls("b-editing")),null==(i=o.onCellEditStart)||i.call(o),!0}return!1}cancelEditing(e=!1,n){var r;const i=this,{editor:o}=i;i.isEditing&&(e.fromKeyMap&&(n=e,e=!1),i.muteEvents=e,o.cancelEdit(n),i.muteEvents=!1,i.finishEditingPromise=!1,null==(r=i.afterCellEdit)||r.call(i))}async finishEditing(){var e;const n=this,{editorContext:r,grid:i}=n;let o=!1;if(n.finishEditingPromise)return n.finishEditingPromise;if(r){const{column:s}=r;n.finishEditingPromise=r.editor.completeEdit(s.bindCallback(s.finalizeCellEdit)),o=await n.finishEditingPromise,await i.waitForAnimations(),n.finishEditingPromise=null,null==(e=n.afterCellEdit)||e.call(n)}return o}async onCellClickWhileEditing({event:e,cellSelector:n}){const r=this;e.target.closest(".b-editor")||(Gn.isTouchEvent||e.target.matches(r.ignoreCSSSelector)?await r.finishEditing():r.finishEditingPromise||r.editorContext&&!r.editorContext.editor.owns(e.target)&&(r.getEditingContext(n)?await r.finishEditing()?r.continueEditingOnCellClick&&await r.startEditing(n):(r.grid.focusCell(r.editorContext),r.editor.inputField.focus()):await r.finishEditing()))}async onCellClick({source:e,cellSelector:n,target:r,event:i,column:o}){if(o.onCellClick)return;const s=this,{focusedCell:a}=s.client;if(r.closest(".b-tree-expander"))return!1;Gn.isTouchEvent&&s._lastCellClicked===(null==a?void 0:a.cell)&&i.timeStamp-s.touchEditDelay>s._lastCellClickedTime?await s.startEditing(n):"cellclick"===this.triggerEvent&&await s.onTriggerEditEvent({cellSelector:n,target:r}),s._lastCellClicked=null==a?void 0:a.cell,s._lastCellClickedTime=i.timeStamp}onElementPointerUp(e){e.target.closest(".b-tree-expander")&&this.cancelEditing(void 0,e)}async onTriggerEditEvent({cellSelector:e,target:n,event:r}){var i;const{editorContext:o,client:s}=this;n.closest(".b-tree-expander")||Gn.isTouchEvent&&"dblclick"===r.type||r&&(null==(i=s.features.cellMenu)?void 0:i.triggerEvent)===r.type||(!o||!o.equals(this.grid.normalizeCellContext(e))&&await this.finishEditing())&&await this.startEditing(e)}onStoreUpdate({changes:e,record:n}){const{editorContext:r}=this;(null==r?void 0:r.editor.isVisible)&&n===r.record&&r.editor.dataField in e&&r.editor.refreshEdit()}onStoreBeforeSort(){var e;const n=null==(e=this.editorContext)?void 0:e.editor;!this.isEditing||(null==n?void 0:n.isFinishing)||n.isValid||this.cancelEditing()}onGridRefreshed(){const e=this,{grid:n,editorContext:r}=e;if(r&&n.isVisible&&n.focusedCell){const i=n.getCell(n.focusedCell),{editor:o}=r;i&&Gn.isInView(i)&&!o.isFinishing?(r._cell=i,or.suspendFocusEvents(),o.render(i),o.showBy(i),o.focus(),or.resumeFocusEvents()):e.cancelEditing()}}get gridSelection(){return[...this.grid.selectedRows,...this.grid.selectedCells]}isActionAvailable({actionName:e,event:n}){const r=this;if(!r.disabled&&!n.target.closest(".b-grid-header"))if(r.isEditing){if("finishAllSelected"===e)return r.multiEdit&&r.gridSelection.length>1;if(hu[e])return!0}else if("startEditing"===e)return r.grid.focusedCell.cell===n.target;return!1}async finishAllSelected(){const e=this,{dataField:n,record:r}=e.editor;if(await e.finishEditing()&&!e.isDestroyed)for(const i of e.gridSelection)i.isModel?i!==r&&(i[n]=r[n]):i.record.set(i.column.field,r[n])}async finishAndEditNextRow(e,n=!1){const r=this,{grid:i}=r,{record:o}=r.editorContext;let s;if(await r.finishEditing()){if(r.isDestroyed)return;r.isEditing||(n?s=i.internalNextPrevRow(!1,!0,e,!1):(r.addNewAtEnd&&o===i.store.last&&await r.doAddNewAtEnd(),r.isDestroyed||(s=i.internalNextPrevRow(!0,!0,e))),s&&r.editNextOnEnterPress&&!i.touch&&r.startEditing(s))}}finishAndEditPrevRow(e){this.finishAndEditNextRow(e,!0)}async finishAndEditNextCell(e,n=!1){const r=this,{focusedCell:i}=r.grid;if(i){let o=r.getAdjacentEditableCell(i,!n);if(!o&&!n&&r.addNewAtEnd){!0===await r.finishEditing()&&(await this.doAddNewAtEnd(),o=!r.isDestroyed&&r.getAdjacentEditableCell(i,!n))}if(o){let i=!0;r.isEditing&&(i=await r.finishEditing()),!r.isDestroyed&&i&&(r.grid.focusCell(o,{animate:r.focusCellAnimationDuration}),await r.startEditing(o)||await r.finishAndEditNextCell(e,n))}}}finishAndEditPrevCell(e){this.finishAndEditNextCell(e,!0)}async onElementKeyDown(e){const n=this,{grid:r}=n,{focusedCell:i}=r;if(e.handled||!n.autoEdit||n.isEditing||!i||i.isActionable||e.ctrlKey)return;const{key:o}=e,s="Delete"===e.key||"Backspace"===e.key,{gridSelection:a}=s?n:{},l=n.multiEdit&&(null==a?void 0:a.length)>1;if((o.length<=1||s&&!l)&&await n.startEditing(i)){const{inputField:r}=n.editor,{input:i}=r;i&&(r.internalOnKeyEvent(e),e.defaultPrevented||(i.value=s?"":o,r.internalOnInput(e))),e.preventDefault()}else if(l&&!1!==r.trigger("beforeCellRangeDelete",{grid:r,gridSelection:a}))for(const e of a)e.isModel?r.columns.visibleColumns.forEach((n=>{!n.readOnly&&e.set(n.field,null)})):e.column.readOnly||e.record.set(e.column.field,null)}onEditorKeydown(e){if(1!==e.key.length&&this.grid.matchKeyMapEntry(e)&&!this.grid.matchKeyMapEntry(e,this.keyMap))return e.key.startsWith("Arrow")||"Backspace"!==!e.key||e.preventDefault(),e.handled=!0,e.stopPropagation(),!1}async onEditorFocusOut(e){const n=this,{grid:r,editor:i,editorContext:o}=n,s=new Bd(e.relatedTarget),a=s.grid===r&&n.getEditingContext(s);o&&!i.isFinishing&&i.owns(e._target)&&("cancel"===n.blurAction?n.cancelEditing(void 0,e):n.finishEditingPromise||"cellclick"!==n.triggerEvent&&("cellclick"===n.triggerEvent||a)||await n.finishEditing())}onEditorFocusIn(e){const n=e.toWidget;n===this.editor.inputField&&this.autoSelect&&n.selectAll&&!n.readOnly&&!n.disabled&&n.selectAll()}async onTapOut({event:e}){const n=this;n.grid.bodyContainer.contains(e.target)&&!e.button||n.editor.owns(e.target)||(n.editingStoppedByTapOutside=!0,"cancel"===n.blurAction?n.cancelEditing(void 0,e):await n.finishEditing(),delete n.editingStoppedByTapOutside)}async onElementClick(e){e.target.classList.contains("b-grid-body-container")&&this.editorContext&&await this.finishEditing()}};__publicField(gu,"$name","CellEdit"),gu._$name="CellEdit",du.registerFeature(gu,!0);var pu=class extends Na{static get $name(){return"CellMenu"}static get defaultConfig(){return{processItems:null,items:null,type:"cell"}}static get pluginConfig(){const e=super.pluginConfig;return e.chain.push("populateCellMenu"),e}showContextMenu(e){const{cellSelector:n,event:r}=e;this.client.focusCell(n,{doSelect:!this.client.isSelected(n),event:r}),super.showContextMenu(e)}shouldShowMenu({column:e}){return e&&!1!==e.enableCellContextMenu}getDataFromEvent(e){const n=this.client.getCellDataFromEvent(e);if(n)return Et.assign(super.getDataFromEvent(e),n)}beforeContextMenuShow({record:e,items:n,column:r}){if(!1===r.cellMenuItems)return!1;e&&!e.isSpecialRow||(n.removeRow=!1)}populateCellMenu({items:e,column:n,record:r}){const{client:i}=this;(null==n?void 0:n.cellMenuItems)&&Et.merge(e,n.cellMenuItems),i.readOnly||(e.removeRow={text:"L{removeRow}",localeClass:this,icon:"b-fw-icon b-icon-trash",cls:"b-separator",weight:100,disabled:r.readOnly,onItem:()=>i.store.remove(i.selectedRecords.filter((e=>!e.readOnly)))})}get showMenu(){return!0}};pu.featureClass="",pu._$name="CellMenu",du.registerFeature(pu,!0,["Grid","Scheduler"]),du.registerFeature(pu,!1,["Gantt"]);var mu=class extends sr{construct(e,n){super.construct(e,this.processConfig(n))}initTip(){const e=this;e.tip=fc.new({forElement:e.client.element,forSelector:".b-grid-row:not(.b-group-row) .b-grid-cell, .b-grid-merged-cells",hoverDelay:1e3,trackMouse:!1,cls:"b-celltooltip-tip",getHtml:e.getTooltipContent.bind(e),internalListeners:{pointerOver:"onPointerOver",thisObj:e},listeners:e.configuredListeners},e.initialConfig),e.relayEvents(e.tip,["beforeShow","show"])}onPointerOver({target:e}){const n=this.client.getColumnFromElement(e);return!1!==n.tooltipRenderer&&Boolean(n.tooltipRenderer||this.tooltipRenderer)}processConfig(e){return"function"==typeof e?{tooltipRenderer:e}:e}setConfig(e){super.setConfig(this.processConfig(e))}doDestroy(){this.tip&&this.tip.destroy(),super.doDestroy()}doDisable(e){e?this.tip&&(this.tip.destroy(),this.tip=null):this.initTip(),super.doDisable(e)}getTooltipContent({tip:e,activeTarget:n,event:r}){const i=this,o=i.client.getRecordFromElement(n),s=i.client.getColumnFromElement(n),a={cellElement:n,record:o,column:s,event:r,tip:e,cellTooltip:i};let l;return i.forSelector||o!==i.lastRecord||o.generation!==i.lastRecordGeneration||s!==i.lastColumn?(i.lastRecord=o,i.lastRecordGeneration=o.generation,i.lastColumn=s,s.tooltipRenderer?l=s.tooltipRenderer(a):i.tooltipRenderer&&!1!==s.tooltipRenderer&&(l=i.tooltipRenderer(a)),M.isPromise(l)&&(i.lastRecord=i.lastRecordGeneration=i.lastColumn=null),l||e.hide(),l):i.tip._html}};__publicField(mu,"$name","CellTooltip"),__publicField(mu,"configurable",{tooltipRenderer:null}),mu._$name="CellTooltip",du.registerFeature(mu);var fu="store",bu=class extends(Delayable_default(sr)){static get $name(){return"ColumnAutoWidth"}static get configurable(){return{default:null,delay:0}}static get pluginConfig(){return{after:{bindStore:"bindStore",unbindStore:"unbindStore",renderRows:"syncAutoWidthColumns",onInternalResize:"onInternalResize"},assign:["columnAutoWidthPending","syncAutoWidthColumns"]}}construct(e){super.construct(e);const{store:n}=this.client;n&&this.bindStore(n)}doDestroy(){this.unbindStore(),super.doDestroy()}bindStore(e){this.lastSync=null,e.ion({name:fu,[`change${this.client.asyncEventSuffix}`]:"onStoreChange",thisObj:this})}unbindStore(){this.detachListeners(fu)}get columnAutoWidthPending(){return null===this.lastSync||this.hasTimeout("syncAutoWidthColumns")}onStoreChange({action:e}){if("move"!==e){const e=this,{cellEdit:n}=e.client.features;++e.storeGeneration,(null==n?void 0:n.isEditing)&&!n.editingStoppedByTapOutside?e.syncAutoWidthColumns():e.hasTimeout("syncAutoWidthColumns")||e.setTimeout("syncAutoWidthColumns",e.delay)}}onInternalResize(e,n,r,i){0===i&&(this.lastSync=null,this.syncAutoWidthColumns())}syncAutoWidthColumns(){const e=this,n=e.client,r=e.storeGeneration;if(e.lastSync!==r){let i,o;e.lastSync=r;for(const r of n.columns.visibleColumns)i=r.autoWidth,i&&(!0===i&&(i=e.default),n.resizingColumns=o=!0,r.resizeToFitContent(i));o&&(n.resizingColumns=!1,n.afterColumnsResized())}e.hasTimeout("syncAutoWidthColumns")&&e.clearTimeout("syncAutoWidthColumns")}};bu.prototype.storeGeneration=0,bu._$name="ColumnAutoWidth",du.registerFeature(bu,!0);var vu=class extends(Delayable_default(sr)){static get $name(){return"ColumnDragToolbar"}static get pluginConfig(){return{after:["render"]}}construct(e,n){e.features.columnReorder&&e.features.columnReorder.ion({beforeDestroy:"onColumnReorderBeforeDestroy",thisObj:this}),this.grid=e,super.construct(e,n)}doDestroy(){const e=this;e.grid.features.columnReorder&&!e.grid.features.columnReorder.isDestroyed&&e.detachFromColumnReorder(),e.element&&e.element.remove(),e.element=null,super.doDestroy()}doDisable(e){this.initialized&&(e?this.detachFromColumnReorder():this.init()),super.doDisable(e)}init(){const e=this,n=e.grid;n.features.columnReorder&&(e.reorderDetacher=n.features.columnReorder.ion({gridheaderdragstart({context:r}){const i=n.columns.getById(r.element.dataset.columnId);e.showToolbar(i)},gridheaderdrag:({context:n})=>e.onDrag(n),gridheaderabort:()=>{e.hideToolbar()},gridheaderdrop:({context:n})=>{n.valid?e.hideToolbar():e.onDrop(n)},thisObj:e}),e.initialized=!0)}onColumnReorderBeforeDestroy(){this.detachFromColumnReorder()}detachFromColumnReorder(){const e=this;e.grid.features.columnReorder.un("beforedestroy",e.onColumnReorderBeforeDestroy,e),e.reorderDetacher&&e.reorderDetacher(),e.reorderDetacher=null}render(){this.initialized||this.init()}showToolbar(e){const n=this,r=n.grid.getColumnDragToolbarItems(e,[]),i=[];n.clearTimeout(n.buttonHideTimer),r.forEach((e=>{e.text=e.localeClass.L(e.text);let n=i.find((n=>n.text===e.group));n||(n={text:e.localeClass.L(e.group),buttons:[]},i.push(n)),n.buttons.push(e)})),n.element=Gn.append(n.grid.element,n.template(i)),n.groups=i,n.buttons=r,n.column=e}async hideToolbar(){const e=this,n=e.element;n&&(n.classList.add("b-remove"),await cn.waitForTransitionEnd({element:n,mode:"animation",thisObj:e.client}),n.remove(),e.element=null)}onDrag(e){var n;const r=this;if(e.dragProxy.getBoundingClientRect().top-r.grid.element.getBoundingClientRect().top>100?r.element.classList.add("b-closer"):r.element.classList.remove("b-closer"),r.hoveringButton&&(r.hoveringButton.classList.remove("b-hover"),r.hoveringButton=null),null==(n=e.targetElement)?void 0:n.closest(".b-columndragtoolbar")){r.element.classList.add("b-hover");const n=e.targetElement.closest(".b-columndragtoolbar  .b-target-button:not([data-disabled=true])");n&&(n.classList.add("b-hover"),r.hoveringButton=n)}else r.element.classList.remove("b-hover")}onDrop(e){const n=this;if(e.targetElement&&e.targetElement.matches(".b-columndragtoolbar .b-target-button:not([data-disabled=true])")){const r=e.targetElement,i=n.buttons.find((e=>e.ref===r.dataset.ref));i&&(r.classList.add("b-activate"),n.buttonHideTimer=n.setTimeout((()=>{n.hideToolbar(),i.onDrop({column:n.column})}),100))}else n.hideToolbar()}template(e){return rl.tpl`
            <div class="b-columndragtoolbar">     
            <div class="b-title"></div>          
            ${e.map((e=>rl.tpl`
                <div class="b-group">
                    <div class="b-buttons">
                    ${e.buttons.map((e=>rl.tpl`
                        <div class="b-target-button" data-ref="${e.ref}" data-disabled="${e.disabled}">
                            <i class="${e.icon}"></i>
                            ${e.text}
                        </div>
                    `))}
                    </div>
                    <div class="b-title">${e.text}</div>
                </div>
            `))}
            </div>`}};vu.featureClass="b-hascolumndragtoolbar",vu._$name="ColumnDragToolbar",du.registerFeature(vu,c.isTouchDevice);var yu=class extends sr{static get pluginConfig(){return{chain:["populateHeaderMenu","getColumnDragToolbarItems"]}}get grid(){return this.client}getColumnPickerItems(e){const n=this,{createColumnsFromModel:r}=n;let i;if(n.groupByRegion)i=n.grid.regions.map((e=>{const r=n.grid.getSubGrid(e).columns.topColumns;return{text:w.capitalize(e),menu:n.buildColumnMenu(r),disabled:0===r.length,region:e}})),r&&i.push({text:n.L("L{newColumns}"),menu:n.createAutoColumnItems()});else if(n.groupByTag){const o={};e.topColumns.forEach((e=>{e.tags&&Array.isArray(e.tags)&&!1!==e.hideable&&e.tags.forEach((e=>{o[e]||(o[e]=1)}))})),i=Object.keys(o).sort().map((e=>({text:w.capitalize(e),menu:n.buildColumnMenu(n.getColumnsForTag(e)),tag:e,onBeforeSubMenu:({item:e,itemEl:r})=>{n.refreshTagMenu(e,r)}}))),r&&i.push({text:n.L("L{newColumns}"),menu:n.createAutoColumnItems()})}else i=n.buildColumnMenu(e.topColumns),r&&i.items.push(...Et.transformNamedObjectToArray(n.createAutoColumnItems()));return i}createAutoColumnItems(){const e=this,{grid:n}=e,{columns:r,store:i}=n,{modelClass:o}=i,{allFields:s}=o,a={};for(let n=0,{length:i}=s;n<i;n++){const i=s[n],o=i.name;r.get(o)||i.internal||(a[o]={text:i.text||w.separate(i.name),checked:!1,onToggle:n=>{const s=r.get(o);s?s[n.checked?"show":"hide"]():r.add(r.generateColumnForField(i,{region:e.forColumn.region})),n.bubbles=!1}})}return a}getColumnsForTag(e){return this.grid.columns.records.filter((n=>n.tags&&Array.isArray(n.tags)&&n.tags.includes(e)&&!1!==n.hideable))}refreshTagMenu(e,n){this.getColumnsForTag(e.tag).forEach((n=>{const r=e.items.find((e=>e.column===n));r&&(r.checked=!0!==n.hidden)}))}buildColumnMenu(e){let n=e.length>0&&e[0].region;const{grid:r}=this,i=e.reduce(((e,i)=>{const o=r.columns.visibleColumns.filter((e=>e.region===i.region));if(!1!==i.hideable){const s={grid:r,column:i,text:i.headerText,checked:!0!==i.hidden,disabled:!0!==i.hidden&&1===o.length,cls:i.region!==n?"b-separator":""};n=i.region,i.children&&!i.isCollapsible&&(s.menu=this.buildColumnMenu(i.children)),e.push(s)}return e}),[]);return{cls:this.menuCls,items:i}}populateHeaderMenu({column:e,items:n}){const r=this,{columns:i}=r.grid;r.forColumn=e,!1!==e.showColumnPicker&&i.some((e=>e.hideable))&&(n.columnPicker={text:"L{columnsMenu}",localeClass:r,icon:"b-fw-icon b-icon-columns",cls:"b-separator",weight:200,menu:r.getColumnPickerItems(i),onToggle:r.onColumnToggle,disabled:r.disabled}),!1===e.hideable||e.parent.isCollapsible||(n.hideColumn={text:"L{hideColumn}",localeClass:r,icon:"b-fw-icon b-icon-hide-column",weight:210,disabled:!e.allowDrag||r.disabled,onItem:()=>e.hide()})}onColumnToggle({menu:e,item:n,checked:r}){var i,o;if(Boolean(n.column.hidden)!==!r){n.column[r?"show":"hide"]();const{grid:s,column:a}=n,{columns:l,features:c}=s,d=e.items,u=l.visibleColumns.filter((e=>e.region===n.column.region)),h=(null==(i=c.headerMenu)?void 0:i.enabled)&&c.headerMenu.menu.widgetMap.hideColumn;if(1===u.length){const e=d.find((e=>e.column===u[0]));e&&(e.disabled=!0),h&&a.region===n.column.region&&(h.disabled=!0)}else u.forEach((e=>{const n=d.find((n=>n.column===e));n&&(n.disabled=!1)})),h&&a.region===n.column.region&&(h.disabled=!1);null==(o=n.menu)||o.eachWidget((e=>{e.checked=r}));const g=e.owner;g&&g.column===a.parent&&(g.checked=d.some((e=>!0===e.checked)))}}getColumnDragToolbarItems(e,n){const r=this.grid.columns.visibleColumns.filter((n=>n.region===e.region));return!1!==e.hideable&&r.length>1&&n.push({text:"L{hideColumnShort}",ref:"hideColumn",group:"L{column}",localeClass:this,icon:"b-fw-icon b-icon-hide-column",weight:101,onDrop:({column:e})=>e.hide()}),n}};__publicField(yu,"$name","ColumnPicker"),__publicField(yu,"configurable",{groupByRegion:!1,groupByTag:!1,createColumnsFromModel:!1,menuCls:"b-column-picker-menu b-sub-menu"}),yu._$name="ColumnPicker",du.registerFeature(yu,!0);var wu=class extends sr{doDestroy(){var e;null==(e=this.editor)||e.destroy(),super.doDestroy()}static get pluginConfig(){return{after:["populateHeaderMenu"]}}populateHeaderMenu({items:e,column:n}){e.rename={weight:215,icon:"b-fw-icon b-icon-edit",text:this.L("L{rename}"),disabled:n.readOnly,onItem:()=>this.startEdit(n)}}startEdit(e){var n;if(e instanceof Event&&(e=null==(n=this.client.getHeaderDataFromEvent(e))?void 0:n.column),e){if(e.readOnly)return!1;const{textWrapper:n}=e;let{editor:r}=this;r||(this.editor=r=new Xc({owner:this.client,align:{align:"t0-t0"}})),r.render(n),r.startEdit({target:n,record:e,field:"text"})}}};__publicField(wu,"$name","ColumnRename"),__publicField(wu,"configurable",{keyMap:{F2:"startEdit"}}),wu._$name="ColumnRename",du.registerFeature(wu,!1);var Cu=class extends(Delayable_default(sr)){constructor(){super(...arguments),__publicField(this,"ignoreSelectors",[".b-grid-header-resize-handle",".b-field"])}doDestroy(){var e,n;null==(e=this.dragHelper)||e.scrollManager.destroy(),null==(n=this.dragHelper)||n.destroy(),super.doDestroy()}get grid(){return this.client}init(){const e=this,{grid:n}=e,r=n.element,i=Gn.children(r,".b-grid-headers");i.push(...Gn.children(r,".b-grid-header-children")),e.dragHelper?e.dragHelper.containers=i:(e.dragHelper=new Qa({name:"columnReorder",mode:"container",dragThreshold:10,targetSelector:".b-grid-header",floatRootOwner:n,rtlSource:n,outerElement:n.headerContainer,monitoringConfig:{scrollables:[{element:".b-grid-headers"}]},scrollManager:uc.new({direction:"horizontal",element:n.headerContainer}),containers:i,isElementDraggable(r){if(Boolean(r.closest(e.ignoreSelectors.join(",")))||e.disabled)return!1;const i=r.closest(this.targetSelector),o=i&&n.columns.getById(i.dataset.columnId),s=0===(null==o?void 0:o.childLevel)&&1===n.subGrids[o.region].columns.count;return Boolean(o)&&!1!==o.draggable&&!s},ignoreSelector:".b-filter-icon,.b-grid-header-resize-handle",internalListeners:{beforeDragStart:e.onBeforeDragStart,dragstart:e.onDragStart,drag:e.onDrag,drop:e.onDrop,thisObj:e}}),e.relayEvents(e.dragHelper,["dragStart","drag","drop","abort"],"gridHeader"))}static get pluginConfig(){return{after:["onPaint","renderContents"]}}onBeforeDragStart({context:e,event:n}){const{element:r}=e,i=e.column=this.client.columns.getById(r.dataset.columnId);return i.allowDrag&&this.client.trigger("beforeColumnDragStart",{column:i,event:n})}onDragStart({context:e,event:n}){const r=this,{grid:i}=r,{column:o}=e;if(!i.features.columnDragToolbar){const e=i.element.querySelector(".b-grid-header-container").getBoundingClientRect();r.dragHelper.minY=e.top,r.dragHelper.maxY=e.bottom}i.headerContainer.classList.add("b-dragging-header"),e.dragProxy.style.fontSize=Gn.getStyleValue(e.element,"fontSize"),i.trigger("columnDragStart",{column:o,event:n})}onDrag({context:e,event:n}){const r=this.client,{insertBefore:i,column:o}=e,s=bs.fromElement(n.target,"gridheader");r.trigger("columnDrag",{column:o,insertBefore:i,event:n,context:e}),(null==s?void 0:s.subGrid.sealedColumns)?e.valid=!1:e.valid&&!this.grid.features.columnDragToolbar&&(e.valid=Boolean(n.target.closest(".b-grid-headers")))}onDrop({context:e,event:n}){if(!e.valid)return this.onInvalidDrop({context:e});const{grid:r}=this,i=e.dragging,o=e.target.closest(".b-grid-header"),s=e.draggedTo.dataset.region,a=o?r.columns.get(o.dataset.column):r.subGrids[s].columns.last,l=s||a.region,c=e.insertBefore,d=r.columns.getById(i.dataset.columnId),u=d.parent,h=c?r.columns.getById(c.dataset.columnId):r.subGrids[l].columns.last.nextSibling;let g;if(h)g=h.parent;else{const e=null==o?void 0:o.parentElement.closest(".b-grid-header");g=e?r.columns.getById(e.dataset.columnId):r.columns.rootNode}r.headerContainer.classList.remove("b-dragging-header"),i.remove();let p=l===d.region&&u===g&&(a===d.previousSibling||h===d.nextSibling);p=p||!1===r.trigger("beforeColumnDropFinalize",{column:d,newParent:g,insertBefore:h,event:n}),p||(p=!g.insertChild(d,h)),e.valid=!p,p||(d.region=l,0===u.children.length&&u.parent.removeChild(u)),r.trigger("columnDrop",{column:d,newParent:g,insertBefore:h,valid:e.valid,event:n})}onInvalidDrop(){this.grid.headerContainer.classList.remove("b-dragging-header")}renderContents(){this.init()}onPaint(){this.init()}get isReordering(){var e;return Boolean(null==(e=this.dragHelper)?void 0:e.isDragging)}};__publicField(Cu,"$name","ColumnReorder"),Cu.featureClass="b-column-reorder",Cu._$name="ColumnReorder",du.registerFeature(Cu,!0);var Su=class extends sr{static get $name(){return"ColumnResize"}static get configurable(){return{liveResize:"auto"}}construct(e,n){const r=this;r.grid=e,super.construct(e,n),r.resizer=new el({name:"columnResize",targetSelector:".b-grid-header",handleSelector:".b-grid-header-resize-handle",outerElement:e.element,rtlSource:e,internalListeners:{beforeresizestart:r.onBeforeResizeStart,resizestart:r.onResizeStart,resizing:r.onResizing,resize:r.onResize,cancel:r.onCancel,thisObj:r}})}doDestroy(){var e;null==(e=this.resizer)||e.destroy(),super.doDestroy()}changeLiveResize(e){return"auto"===e?!c.isMobileSafari:e}onBeforeResizeStart(){return!this.disabled}onResizeStart({context:e}){const{grid:n,resizer:r}=this,i=e.column=n.columns.getById(e.element.dataset.columnId);r.minWidth=i.minWidth,n.element.classList.add("b-column-resizing")}onResizing({context:e}){e.valid&&this.liveResize&&(this.grid.resizingColumns=!0,e.column.width=e.newWidth)}onResize({context:e}){const{grid:n}=this,{column:r}=e;n.element.classList.remove("b-column-resizing"),e.valid&&(this.liveResize?(n.resizingColumns=!1,n.afterColumnsResized(r)):r.width=e.newWidth)}onCancel({context:e}){const{grid:n}=this;n.element.classList.remove("b-column-resizing"),e.column.width=e.elementWidth,n.resizingColumns=!1}};Su._$name="ColumnResize",du.registerFeature(Su,!0);var xu=class extends(sr.mixin(Delayable_default)){constructor(){super(...arguments),__publicField(this,"delayable",{handleSelection:"raf"})}afterConstruct(){super.afterConstruct(),this.client.selectionMode.cell||(this.disabled=!0),this._fillListeners={}}onContentChange(){this.handleSelection()}afterColumnsChange(){this.handleSelection()}fixElementHeights(){this.handleSelection()}getCellDataFromEvent(e,n){return n&&(n=!e.target.classList.contains("b-fill-handle")),this.overridden.getCellDataFromEvent(e,n)}findPatternsIn2dRange(e,n,r){const i={};for(const r of e){const e=n?r.id:r.columnId;let o=r.record[r.column.field];o&&"string"==typeof o&&!isNaN(o)&&(o=parseFloat(o)),i[e]||(i[e]=[]),i[e].push(o)}for(const e in i)i[e].pattern=this.findPatternsIn1dRange(i[e],r);return i}findPatternsIn1dRange(e,n){const r=e[n?0:e.length-1],i={next:()=>r,lastValue:r};if(e.every((e=>"number"==typeof e))||e.every((e=>e instanceof Date))){const r=e.map(((n,r)=>n-e[r-1]));r.shift(),1===new Set(r).size&&(i.increaseBy=r[0]*(n?-1:1),i.next=()=>(i.lastValue instanceof Date?i.lastValue=new Date(i.lastValue.getTime()+i.increaseBy):i.lastValue+=i.increaseBy,i.lastValue))}else e.length>1&&(i.stringPattern=[...e],i.next=()=>(void 0===i.currentIndex?i.currentIndex=0:(i.currentIndex+=1,i.currentIndex>=i.stringPattern.length&&(i.currentIndex=0)),i.stringPattern[i.currentIndex]));return i}afterSelectionChange(){const e=this;e.client.readOnly?e.removeElements():or.isMouseDown()?(e.client.delayUntilMouseUp((()=>e.handleSelection(!0))),e.removeElements()):e.handleSelection(!0)}handleSelection(){if(!this._isExtending){const e=this.rangeSelection;e?this.drawFillHandleAndBorder(e[0],e[e.length-1]):this.removeElements()}}onMouseDown(e){const{client:n}=this;n.readOnly||(this._fillListeners.mouseMoveOrUp=cn.on({element:globalThis,mouseover:{handler:"onMouseOver",element:n.selectionDragMouseEventListenerElement},mouseup:"onMouseUp",thisObj:this}),e.preventDefault(),e.stopImmediatePropagation(),e.handled=!0)}onMouseUp(){var e,n;const r=this,{client:i,currentRange:o,_isCropping:s}=r,a=r.rangeSelection,l=a&&o&&i.internalSelectRange(o.from,o.to),c=(null==l?void 0:l.selectedCells)||[],d=s?r.croppingCells:c.filter((e=>!a.some((n=>n.equals(e,!0)))));if(delete r._isCropping,r._isExtending&&(i.disableScrollingCloseToEdges(i.items),delete r._isExtending),null==d?void 0:d.length){if(i.suspendRefresh(),s)d.forEach((e=>e.record.set(e.column.field,null,!1,!1,!1,!0)));else{const[i]=d,o=a.some((e=>e.record===i.record)),s=o?i.columnIndex<a[0].columnIndex:i.rowIndex<a[0].rowIndex,l=r.findPatternsIn2dRange(a,o,s),c=new Map;s&&d.reverse();for(const i of d){const{column:s,record:d}=i;if(!s.readOnly&&s.canFillValue({range:a,record:d,cell:i})){let u=null==(e=r.calculateFillValue)?void 0:e.call(r,{range:a,column:s,record:d,cell:i}),h=c.get(d);if(h||(h={},c.set(d,h)),void 0===u){u=l[o?i.id:i.columnId].pattern.next()}h[s.field]=(null==(n=s.calculateFillValue)?void 0:n.call(s,{value:u,record:d,range:a}))||u}}for(const[e,n]of c)e.set(n,null,null,null,null,!0)}i.resumeRefresh(!0),i.performSelection(l),delete r.currentRange,r.handleSelection()}else r.handleSelection()}onMouseOver(e){var n;const r=this,{client:i,rangeSelection:o}=r,s=o[0],a=o[o.length-1],l=i.getCellDataFromEvent(e,!0);let c=l&&i.normalizeCellContext(l.cellSelector);if((null==(n=null==c?void 0:c._column)?void 0:n.region)===s._column.region){const e=o.some((e=>e.equals(c,!0)));let n;r._isExtending||i.enableScrollingCloseToEdges(i.items),e?r._isCropping=r.allowCropping&&(c.rowIndex<a.rowIndex||c.columnIndex<a.columnIndex):c.rowIndex>=s.rowIndex&&c.rowIndex<=a.rowIndex?(n=s.columnIndex>c.columnIndex,c=new Bd({grid:i,record:n?s.record:a.record,column:c.column})):(n=s.rowIndex>c.rowIndex,c=new Bd({grid:i,record:c.record,column:n?s.column:a.column}));const l=n?c:s,d=n||e&&!r._isCropping?a:c;r.currentRange={from:l,to:d},r._isExtending=!0,r.drawFillHandleAndBorder(l,d,!0)}}drawFillHandleAndBorder(e,n,r=!1){var i;const o=this,{client:s,currentRange:a,_fillListeners:l}=o,c=s.subGrids[e.column.region].element,{x:d}=Gt.from(e.cell||e.column.element,c),{right:u}=Gt.from(n.cell||n.column.element,c),{y:h}=s.getRecordCoords(e.record,!0),g=s.getRecordCoords(n.record,!0).bottom-1;let{borderElement:p,handleElement:m}=o;if(o.removeElements(r),p||(o.borderElement=p=Gn.createElement({className:"b-fill-selection-border"}),o.handleElement=m=Gn.createElement({className:"b-fill-handle"})),Gn.setRect(p,{y:h,x:d,width:u-d,height:g-h}),c.appendChild(p),Gn.setTopLeft(m,g,u>=c.scrollWidth?d:u),c.appendChild(m),o.toggleCroppingCls(!1),delete o.croppingCells,o._isCropping&&(null==(i=o.rangeSelection)?void 0:i.length)){const e=s.getRange(a.from,a.to);o.croppingCells=o.rangeSelection.filter((n=>!e.some((e=>e.equals(n,!0))))),o.toggleCroppingCls()}l.handleClick||(l.handleClick=cn.on({element:s.rootElement,delegate:".b-fill-handle",mousedown:"onMouseDown",thisObj:o})),o.hasFillElements=!0}toggleCroppingCls(e=!0){var n;null==(n=this.croppingCells)||n.forEach((n=>{var r;return null==(r=this.client.getCell(n))?void 0:r.classList.toggle("b-indicate-crop",e)}))}removeElements(e=!1){var n,r;const i=this;null==(n=i.handleElement)||n.remove(),null==(r=i.borderElement)||r.remove(),e||i.removeListeners(),i.hasFillElements=!1}removeListeners(){const e=this;for(const n in e._fillListeners)e._fillListeners[n]();e._fillListeners={}}get rangeSelection(){var e;const{client:n}=this,{selectedCells:r}=n,i=null!=(e=n._shiftSelectRange)?e:1===r.length&&r;return!n._selectedRows.length&&(null==i?void 0:i.length)&&i.length===r.length&&i.every((e=>r.some((n=>e.equals(n,!0)))&&e._column.parent&&e._column.region===i[0]._column.region&&n.store.isAvailable(e.id)))?i:null}};__publicField(xu,"$name","FillHandle"),__publicField(xu,"configurable",{calculateFillValue:null,allowCropping:!1}),__publicField(xu,"pluginConfig",{chain:["afterSelectionChange","onContentChange","afterColumnsChange","fixElementHeights"],override:["getCellDataFromEvent"]}),xu._$name="FillHandle",du.registerFeature(xu);var Du=class extends Jc{static get $name(){return"GridFieldFilterPicker"}static get type(){return"gridfieldfilterpicker"}afterConstruct(){var e;const n=this;if(!n.grid)throw new Error(`${n.constructor.$name} requires 'grid' to be configured.`);n.fields=null!=(e=n.fields)?e:{},super.afterConstruct()}updateGrid(e){var n;if(!(null==(n=e.store)?void 0:n.modelClass))throw new Error("Grid does not have a store with a modelClass defined.");if(!e.columns)throw new Error("Grid does not have a column store.")}static getModelClassFields(e){const n=new Set(e.fields.map((({name:e})=>e)));return(null==e?void 0:e.allFields.filter((e=>!e.internal&&(Zc.includes(e.type)||isSupportedDurationField(e))&&(e.definedBy!==Ur||n.has(e.name)))))||[]}static getColumnFields(e,n,r){var i;const o=oe.keyBy(Du.getModelClassFields(n),"name"),s=r&&new Set(r);return Object.fromEntries(null!=(i=null==e?void 0:e.records.filter((({field:e})=>e&&o[e]&&(!s||s.has(e)))).map((({field:e,text:n})=>[e,{title:n||e,type:isSupportedDurationField(o[e])?"duration":o[e].type}])))?i:[])}changeFields(e){var n;let r=e;return Array.isArray(e)&&(A.deprecate("Core","6.0.0","FieldOption[] deprecated, use Object<String, FieldOption[]> keyed by field name instead"),r=oe.keyBy(r,"name")),Et.merge({},Du.getColumnFields(this.grid.columns,null==(n=this.grid.store)?void 0:n.modelClass,this.allowedFieldNames),r)}},Eu=Du;__publicField(Eu,"configurable",{grid:null,allowedFieldNames:null}),Eu.initClass(),Eu._$name="GridFieldFilterPicker";var Ru=class extends nd{static get $name(){return"GridFieldFilterPickerGroup"}static get type(){return"gridfieldfilterpickergroup"}validateConfig(){if(!this.grid)throw new Error(`${this.constructor.$name} requires the 'grid' config property.`)}getFilterPickerConfig(e){const{grid:n,allowedFieldNames:r}=this;return{...super.getFilterPickerConfig(e),grid:n,allowedFieldNames:r}}updateGrid(e){this.store=this.grid.store}canManage(e){return super.canManage(e)&&(!this.allowedFieldNames||this.allowedFieldNames.includes(e.property))}};__publicField(Ru,"configurable",{grid:null,allowedFieldNames:null}),__publicField(Ru,"childPickerType","gridfieldfilterpicker"),Ru.initClass(),Ru._$name="GridFieldFilterPickerGroup";var ku={date:"date",int:"number",integer:"number",number:"number",string:"text",duration:"duration"},Tu=class extends sr{static get $name(){return"Filter"}static get configurable(){return{prioritizeColumns:!1,keyMap:{f:"showFilterEditorByKey"},isMulti:!1}}construct(e,n){if(e.features.filterBar)throw new Error("Grid.feature.Filter feature may not be used together with Grid.feature.FilterBar. These features are mutually exclusive.");const r=this;if(r.grid=e,r.closeFilterEditor=r.closeFilterEditor.bind(r),super.construct(e,n),r.bindStore(e.store),n&&"object"==typeof n){const r=Et.clone(n);delete r.prioritizeColumns,delete r.isMulti,delete r.dateFormat,Et.isEmpty(r)||e.store.filter(r,null,e.isConfiguring)}}doDestroy(){var e,n;null==(e=this.filterTip)||e.destroy(),null==(n=this.filterEditorPopup)||n.destroy(),super.doDestroy()}get store(){return this.grid.store}bindStore(e){this.detachListeners("store"),e.ion({name:"store",beforeFilter:"onStoreBeforeFilter",filter:"onStoreFilter",thisObj:this})}static get pluginConfig(){return{chain:["renderHeader","populateCellMenu","populateHeaderMenu","onElementClick","bindStore"]}}refreshHeaders(e){const n=this,r=n.grid,i=r.headerContainer;i&&(Gn.children(i,".b-filter-icon.b-latest").forEach((e=>e.classList.remove("b-latest"))),n.filterTip||(n.filterTip=new fc({forElement:i,forSelector:".b-filter-icon",getHtml:({activeTarget:e})=>e.dataset.filterText})),r.store.isFiltered||n.filterTip.hide(),r.columns.visibleColumns.forEach((e=>{if(!1!==e.filterable){const r=n.store.filters.allValues.filter((({property:n,disabled:r,internal:i})=>n===e.field&&!r&&!i)),i=r.length>0,o=e.element;if(o){const s=e.textWrapper;let a,l=null==s?void 0:s.querySelector(".b-filter-icon");if(i){const i="&#x2022 ";a=`${n.L("L{filter}")}: `+(r.length>1?"<br/><br/>":"")+r.map((o=>{var s,a,l,c;let d=null!=(s=o.value)?s:"";const u=Array.isArray(d),h=null==(l=null==(a=n.store)?void 0:a.modelRelations)?void 0:l.find((({foreignKey:e})=>e===o.property));if(o.displayValue)d=o.displayValue;else{if(n.isMulti&&h){const{relatedDisplayField:e}=null==(c=n.isMulti.fields)?void 0:c[o.property];if(e){const getDisplayValue=n=>{var r;return null==(r=h.foreignStore.getById(n))?void 0:r[e]};d=u?d.map(getDisplayValue).sort(((e,n)=>(null!=e?e:"").localeCompare(null!=n?n:""))):getDisplayValue(d)}}else e.formatValue&&d&&(d=u?d.map((n=>e.formatValue(n))):e.formatValue(d));u&&(d=`[ ${d.join(", ")} ]`)}return(r.length>1?i:"")+("string"==typeof o?o:`${o.operator} ${d}`)})).join("<br/><br/>")}else a=n.L("L{applyFilter}");l?l.dataset.filterText=a:l=Gn.createElement({parent:s,tag:"div",className:"b-filter-icon",dataset:{filterText:a}}),e.field===n.store.latestFilterField&&l.classList.add("b-latest"),o.classList.add("b-filterable"),o.classList.toggle("b-filter",i)}e.meta.isFiltered=i}})),e&&r.refreshRows())}applyFilter(e,n){const{store:r}=this,{filterFn:i}=e.filterable;e.$filter=r.addFilter({...e.filterable,...n,property:e.field,[i?"filterBy":"_"]:function(n){return i({value:this.value,record:n,operator:this.operator,property:this.property,column:e})}},!0),r.filter()}removeFilter(e){if(this.isMulti)for(const n of this.getCurrentMultiFilters(e))this.store.removeFilter(n);else this.store.removeFilter(e.field)}disableFilter(e){for(const n of this.getCurrentMultiFilters(e))n.disabled=!0,this.store.filter(n);this.store.filter()}getCurrentMultiFilters(e){return this.store.filters.values.filter((n=>n.property===e.field))}getPopupDateItems(e,n,r,i,o,s,a,l){const c=this,d=s;function onClear(){c.removeFilter(e)}function onKeydown({event:e}){"Enter"===e.key&&s()}function onChange({source:n,value:r}){null==r?onClear():(c.clearSiblingsFields(n),c.applyFilter(e,{operator:n.operator,value:r,displayValue:n._value,type:"date"}))}return[Et.assign({type:"date",ref:"on",placeholder:"L{on}",localeClass:c,clearable:!0,label:'<i class="b-fw-icon b-icon-filter-equal"></i>',value:"sameDay"===(null==r?void 0:r.operator)?r.value:i,operator:"sameDay",onKeydown,onChange,onClose:d,onClear},l),Et.assign({type:"date",ref:"before",placeholder:"L{before}",localeClass:c,clearable:!0,label:'<i class="b-fw-icon b-icon-filter-before"></i>',value:"<"===(null==r?void 0:r.operator)?r.value:null,operator:"<",onKeydown,onChange,onClose:d,onClear},l),Et.assign({type:"date",ref:"after",cls:"b-last-row",placeholder:"L{after}",localeClass:c,clearable:!0,label:'<i class="b-fw-icon b-icon-filter-after"></i>',value:">"===(null==r?void 0:r.operator)?r.value:null,operator:">",onKeydown,onChange,onClose:d,onClear},l)]}getPopupNumberItems(e,n,r,i,o,s,a,l){const c=this,d=s;function onClear(){c.removeFilter(e)}function onKeydown({event:e}){"Enter"===e.key&&s()}function onChange({source:n,value:r}){null==r?onClear():(c.clearSiblingsFields(n),c.applyFilter(e,{operator:n.operator,value:r}))}return[Et.assign({type:"number",placeholder:"L{Filter.equals}",localeClass:c,clearable:!0,label:'<i class="b-fw-icon b-icon-filter-equal"></i>',value:"="===(null==r?void 0:r.operator)?r.value:i,operator:"=",onKeydown,onChange,onEsc:d,onClear},l),Et.assign({type:"number",placeholder:"L{lessThan}",localeClass:c,clearable:!0,label:'<i class="b-fw-icon b-icon-filter-less"></i>',value:"<"===(null==r?void 0:r.operator)?r.value:null,operator:"<",onKeydown,onChange,onEsc:d,onClear},l),Et.assign({type:"number",cls:"b-last-row",placeholder:"L{moreThan}",localeClass:c,clearable:!0,label:'<i class="b-fw-icon b-icon-filter-more"></i>',value:">"===(null==r?void 0:r.operator)?r.value:null,operator:">",onKeydown,onChange,onEsc:d,onClear},l)]}clearSiblingsFields(e){var n;null==(n=this.filterEditorPopup)||n.items.forEach((n=>{n!==e&&(null==n||n.clear())}))}getPopupDurationItems(e,n,r,i,o,s,a,l){const c=this,d=s,onClear=()=>c.removeFilter(e);function onChange({source:n,value:r}){null==r?onClear():(c.clearSiblingsFields(n),c.applyFilter(e,{operator:n.operator,value:r}))}return[Et.assign({type:"duration",placeholder:"L{Filter.equals}",localeClass:c,clearable:!0,label:'<i class="b-fw-icon b-icon-filter-equal"></i>',value:"="===(null==r?void 0:r.operator)?r.value:i,operator:"=",onChange,onEsc:d,onClear},l),Et.assign({type:"duration",placeholder:"L{lessThan}",localeClass:c,clearable:!0,label:'<i class="b-fw-icon b-icon-filter-less"></i>',value:"<"===(null==r?void 0:r.operator)?r.value:null,operator:"<",onChange,onEsc:d,onClear},l),Et.assign({type:"duration",cls:"b-last-row",placeholder:"L{moreThan}",localeClass:c,clearable:!0,label:'<i class="b-fw-icon b-icon-filter-more"></i>',value:">"===(null==r?void 0:r.operator)?r.value:null,operator:">",onChange,onEsc:d,onClear},l)]}getPopupStringItems(e,n,r,i,o,s,a,l){const c=this;return[Et.assign({type:n,cls:"b-last-row",placeholder:"L{filter}",localeClass:c,clearable:!0,label:'<i class="b-fw-icon b-icon-filter-equal"></i>',value:r?r.value||r:i,operator:"*",onChange({source:n,value:r}){""===r?a():(c.applyFilter(e,{operator:n.operator,value:r,displayValue:n.displayField&&n.records?n.records.map((e=>e[n.displayField])).join(", "):void 0}),n.multiSelect||s())},onClose:s,onClear:a},l)]}getPopupItems(e,n,r,i,o,s,a,l){const c=this;if(c.isMulti)return c.getMultiFilterPopupItems(...arguments);switch(n){case"date":return c.getPopupDateItems(...arguments);case"number":return c.getPopupNumberItems(...arguments);case"duration":return c.getPopupDurationItems(...arguments);default:return c.getPopupStringItems(...arguments)}}getMultiFilterPopupItems(e){var n;const{grid:r,isMulti:i}=this,o=null==(n=r.store)?void 0:n.filters.find((n=>n.property===e.field));return[{..."object"==typeof i?i:void 0,type:"gridfieldfilterpickergroup",ref:"pickerGroup",limitToProperty:e.field,grid:r,filters:o?[]:[{property:e.field}],propertyFieldCls:"b-transparent property-field",operatorFieldCls:"b-transparent operator-field",valueFieldCls:"b-transparent value-field",width:"400px"}]}showFilterEditor(e,n){e=this.grid.columns.getById(e);const r=this,{store:i,isMulti:o}=r,s=e.element,a=i.filters.getBy("property",e.field),l=r.getFilterType(e);if(!1===e.filterable)return;r.closeFilterEditor();const c=r.getPopupItems(e,l,(null==a?void 0:a.internal)?null:a,n,i,r.closeFilterEditor,(()=>{r.removeFilter(e),r.closeFilterEditor()}),e.filterable.filterField,o);c.forEach((e=>e.placeholder=e.placeholder?this.L(e.placeholder):e.placeholder)),r.filterEditorPopup=dl.openPopup(s,{owner:r.grid,cls:"b-filter-popup",scrollAction:"realign",layout:{type:"vbox",align:"stretch"},items:c})}closeFilterEditor(){var e;null==(e=this.filterEditorPopup)||e.setTimeout(this.filterEditorPopup.destroy),this.filterEditorPopup=null}getFilterType(e){const n=e.field,r=this.client.store.modelClass.getFieldDefinition(n),i=e.filterType;return i?ku[i]:ku[e.type]||r&&ku[r.type]||"text"}populateCellMenuWithDateItems({column:e,record:n,items:r}){const i=e.field;if("date"===this.getFilterType(e)){const o=this,s=n[i],filter2=n=>{o.applyFilter(e,{operator:n,value:s,displayValue:e.formatValue?e.formatValue(s):s,type:"date"})};r.filterDateEquals={text:"L{on}",localeClass:o,icon:"b-fw-icon b-icon-filter-equal",cls:"b-separator",weight:300,disabled:o.disabled,onItem:()=>filter2("=")},r.filterDateBefore={text:"L{before}",localeClass:o,icon:"b-fw-icon b-icon-filter-before",weight:310,disabled:o.disabled,onItem:()=>filter2("<")},r.filterDateAfter={text:"L{after}",localeClass:o,icon:"b-fw-icon b-icon-filter-after",weight:320,disabled:o.disabled,onItem:()=>filter2(">")}}}populateCellMenuWithNumberItems({column:e,record:n,items:r}){const i=e.field;if("number"===this.getFilterType(e)){const o=this,s=n[i],filter2=n=>{o.applyFilter(e,{operator:n,value:s})};r.filterNumberEquals={text:"L{equals}",localeClass:o,icon:"b-fw-icon b-icon-filter-equal",cls:"b-separator",weight:300,disabled:o.disabled,onItem:()=>filter2("=")},r.filterNumberLess={text:"L{lessThan}",localeClass:o,icon:"b-fw-icon b-icon-filter-less",weight:310,disabled:o.disabled,onItem:()=>filter2("<")},r.filterNumberMore={text:"L{moreThan}",localeClass:o,icon:"b-fw-icon b-icon-filter-more",weight:320,disabled:o.disabled,onItem:()=>filter2(">")}}}populateCellMenuWithDurationItems({column:e,record:n,items:r}){if("duration"===this.getFilterType(e)){const i=this,o=e.getFilterableValue(n),filter2=n=>{i.applyFilter(e,{operator:n,value:o})};r.filterDurationEquals={text:"L{equals}",localeClass:i,icon:"b-fw-icon b-icon-filter-equal",cls:"b-separator",weight:300,disabled:i.disabled,onItem:()=>filter2("=")},r.filterDurationLess={text:"L{lessThan}",localeClass:i,icon:"b-fw-icon b-icon-filter-less",weight:310,disabled:i.disabled,onItem:()=>filter2("<")},r.filterDurationMore={text:"L{moreThan}",localeClass:i,icon:"b-fw-icon b-icon-filter-more",weight:320,disabled:i.disabled,onItem:()=>filter2(">")}}}populateCellMenuWithStringItems({column:e,record:n,items:r}){var i,o;const s=this.getFilterType(e);if(!/(date|number|duration)/.test(s)){const s=this,a=e.getFilterableValue(n),l=null!=(o=null==(i=e.filterable.filterField)?void 0:i.operator)?o:"*";r.filterStringEquals={text:"L{equals}",localeClass:s,icon:"b-fw-icon b-icon-filter-equal",cls:"b-separator",weight:300,disabled:s.disabled,onItem:()=>s.applyFilter(e,{value:a,operator:l})}}}populateCellMenu({column:e,record:n,items:r}){const i=this;!1===e.filterable||n.isSpecialRow||(i.populateCellMenuWithDateItems(...arguments),i.populateCellMenuWithNumberItems(...arguments),i.populateCellMenuWithDurationItems(...arguments),i.populateCellMenuWithStringItems(...arguments),e.meta.isFiltered&&(r.filterRemove={text:"L{removeFilter}",localeClass:i,icon:"b-fw-icon b-icon-remove",cls:"b-separator",weight:400,disabled:i.disabled||i.isMulti&&!i.columnHasRemovableFilters(e),onItem:()=>i.removeFilter(e)}),i.isMulti&&(r.filterDisable={text:"L{disableFilter}",localeClass:i,icon:"b-fw-icon b-icon-filter-disable",cls:"b-separator",weight:400,disabled:i.disabled||!i.columnHasEnabledFilters(e),onItem:()=>i.disableFilter(e)}))}columnHasRemovableFilters(e){const n=this;return Boolean(n.getCurrentMultiFilters(e).find((e=>!n.canDeleteFilter||!1!==n.callback(n.canDeleteFilter,n,[e]))))}columnHasEnabledFilters(e){return Boolean(this.getCurrentMultiFilters(e).find((e=>!e.disabled)))}populateHeaderMenu({column:e,items:n}){const r=this;e.meta.isFiltered?(n.editFilter={text:"L{editFilter}",localeClass:r,weight:100,icon:"b-fw-icon b-icon-filter",cls:"b-separator",disabled:r.disabled,onItem:()=>r.showFilterEditor(e)},n.removeFilter={text:"L{removeFilter}",localeClass:r,weight:110,icon:"b-fw-icon b-icon-remove",disabled:r.disabled||r.isMulti&&!r.columnHasRemovableFilters(e),onItem:()=>r.removeFilter(e)},r.isMulti&&(n.disableFilter={text:"L{disableFilter}",localeClass:r,icon:"b-fw-icon b-icon-filter-disable",weight:115,disabled:r.disabled||!r.columnHasEnabledFilters(e),onItem:()=>r.disableFilter(e)})):!1!==e.filterable&&(n.filter={text:"L{filter}",localeClass:r,weight:100,icon:"b-fw-icon b-icon-filter",cls:"b-separator",disabled:r.disabled,onItem:()=>r.showFilterEditor(e)})}onStoreBeforeFilter({filters:e}){var n;const{columns:r}=this.client;for(let i=0;i<e.count;i++){const o=e.getAt(i);if(!o.internal){const s=(o.columnOwned||this.prioritizeColumns)&&r.find((e=>!1!==e.filterable&&e.field===o.property));(null==(n=null==s?void 0:s.filterable)?void 0:n.filterFn)&&(s.$filter||(s.$filter=new Zr({columnOwned:!0,property:o.property,operator:o.operator,value:o.value,filterBy(e){return s.filterable.filterFn({value:this.value,record:e,operator:this.operator,property:this.property,column:s})}})),s.$filter.value=o.value,s.$filter.displayValue=o.displayValue,s.$filter.operator=o.operator,e.splice(i,1,s.$filter))}}}onStoreFilter(){this.refreshHeaders(!1)}renderHeader(){this.refreshHeaders(!1)}onElementClick({target:e}){if(this.filterEditorPopup&&this.closeFilterEditor(),e.classList.contains("b-filter-icon")){const n=e.closest(".b-grid-header");return this.showFilterEditor(n.dataset.columnId),!1}}showFilterEditorByKey({target:e}){const n=e.matches(".b-grid-header")&&e;return n&&this.showFilterEditor(n.dataset.columnId),Boolean(n)}isActionAvailable({event:e}){const n=e.target.closest(".b-grid-header"),r=n&&this.client.columns.find((e=>e.id===n.dataset.columnId));return Boolean(null==r?void 0:r.filterable)}};Tu._$name="Filter",du.registerFeature(Tu);var Mu={"*":null,isIncludedIn:null,startsWith:null,endsWidth:null},Au=class extends sr{static get $name(){return"FilterBar"}static get configurable(){return{prioritizeColumns:!1,keyStrokeFilterDelay:300,compactMode:!1,clearStoreFiltersOnHide:!0,keyMap:{ArrowUp:{handler:"disableGridNavigation",preventDefault:!1},ArrowRight:{handler:"disableGridNavigation",preventDefault:!1},ArrowDown:{handler:"disableGridNavigation",preventDefault:!1},ArrowLeft:{handler:"disableGridNavigation",preventDefault:!1},Enter:{handler:"disableGridNavigation",preventDefault:!1}}}}static get pluginConfig(){return{before:["renderContents"],chain:["afterColumnsChange","renderHeader","populateHeaderMenu","bindStore"]}}static get properties(){return{filterFieldCls:"b-filter-bar-field",filterFieldInputCls:"b-filter-bar-field-input",filterableColumnCls:"b-filter-bar-enabled",filterFieldInputSelector:".b-filter-bar-field-input",filterableColumnSelector:".b-filter-bar-enabled",filterParseRegExp:/^\s*([<>=*])?(.*)$/,storeTrackingSuspended:0}}construct(e,n){if(e.features.filter)throw new Error("Grid.feature.FilterBar feature may not be used together with Grid.feature.Filter, These features are mutually exclusive.");const r=this;r.grid=e,r.onColumnFilterFieldChange=r.onColumnFilterFieldChange.bind(r),super.construct(e,Array.isArray(n)?{filter:n}:n),r.bindStore(e.store),r.filter&&e.store.filter(r.filter),r.gridDetacher=e.ion({beforeElementClick:"onBeforeElementClick",thisObj:r})}bindStore(e){this.detachListeners("store"),e.ion({name:"store",beforeFilter:"onStoreBeforeFilter",filter:"onStoreFilter",thisObj:this})}doDestroy(){var e;this.destroyFilterBar(),null==(e=this.gridDetacher)||e.call(this),super.doDestroy()}doDisable(e){const{columns:n}=this.grid;null==n||n.forEach((n=>{const r=this.getColumnFilterField(n);r&&(r.disabled=e)})),super.doDisable(e)}updateCompactMode(e){this.client.headerContainer.classList[e?"add":"remove"]("b-filter-bar-compact");for(const n in this._columnFilters){const r=this._columnFilters[n];r.placeholder=e?r.column.headerText:null}}destroyFilterBar(){var e;null==(e=this.grid.columns)||e.forEach(this.destroyColumnFilterField,this)}hideFilterBar(){var e;const n=this;n.clearStoreFiltersOnHide&&n.suspendStoreTracking(),null==(e=n.grid.columns)||e.forEach((e=>n.hideColumnFilterField(e,!0))),n.grid.store.filter(),n.clearStoreFiltersOnHide&&n.resumeStoreTracking(),n.hidden=!0}showFilterBar(){this.suspendStoreTracking(),this.renderFilterBar(),this.resumeStoreTracking(),this.hidden=!1}toggleFilterBar(){this.hidden?this.showFilterBar():this.hideFilterBar()}renderFilterBar(){this.grid.hideHeaders||(this.grid.columns.visibleColumns.forEach((e=>this.renderColumnFilterField(e))),this.rendered=!0)}renderColumnFilterField(e){const n=this,{grid:r}=n,i=n.getColumnFilterable(e);if(i&&e.isVisible){const o=e.element,s=r.store.filters.get(e.id)||r.store.filters.getBy("property",e.field);let a=n.getColumnFilterField(e);if(a)n.onColumnFilterFieldChange({source:a,value:a.value}),a.render(o),a.show();else{const l=`${e.filterType||"text"}field`,{filterField:c}=i,d=null==c?void 0:c.cls;d&&delete i.filterField.cls,a=dl.append(Et.assign({type:l,cls:{[n.filterFieldCls]:1,[d]:d},dataset:{column:e.field},column:e,owner:r,clearable:!0,name:e.field,value:!s||s._filterBy||s.internal?"":n.buildFilterValue(s),inputCls:n.filterFieldInputCls,keyStrokeChangeDelay:n.keyStrokeFilterDelay,onChange:n.onColumnFilterFieldChange,onClear:n.onColumnFilterFieldChange,disabled:n.disabled,placeholder:n.compactMode?e.headerText:null,format:e.format},c),o)[0],(null==c?void 0:c.hasOwnProperty("min"))||Object.defineProperty(a,"min",{get:()=>{var n;return null==(n=e.editor)?void 0:n.min},set:()=>null}),(null==c?void 0:c.hasOwnProperty("max"))||Object.defineProperty(a,"max",{get:()=>{var n;return null==(n=e.editor)?void 0:n.max},set:()=>null}),(null==c?void 0:c.hasOwnProperty("strictParsing"))||Object.defineProperty(a,"strictParsing",{get:()=>{var n;return null==(n=e.editor)?void 0:n.strictParsing},set:()=>null}),a.element.retainElement=!0,n.setColumnFilterField(e,a);const u=(null==c?void 0:c.store)&&(c.store.readUrl||c.store.data||c.store.isChained);if(a.isCombo&&!u&&0===a.store.count){const n=a.value,refreshData=()=>{a.store.readUrl||a.store.isChained||(a.store.data=r.store.getDistinctValues(e.field,!0).map((n=>r.store.modelClass.new({id:n,[e.field]:n}))))};a.value=null,a.store.isSorted||a.store.sort({field:e.field,ascending:!0}),a.picker.ion({beforeShow:refreshData}),refreshData(),a.value=n}!n.filter&&a.value&&!1!==r.store.autoLoad&&n.onColumnFilterFieldChange({source:a,value:a.value})}o.classList.add(n.filterableColumnCls)}}updateColumnFilterFields(){const e=this,{columns:n,store:r}=e.grid;let i,o;e._updatingFields=!0;for(const s of n.visibleColumns)i=e.getColumnFilterField(s),i&&(o=r.filters.get(s.id)||r.filters.getBy("property",s.field),o&&!o.internal?o._filterBy?i.value=o.value:i.value=e.buildFilterValue(o):i.value="");e._updatingFields=!1}getColumnFilterable(e){if(!e.isRoot&&!1!==e.filterable&&e.field&&e.isLeaf)return"function"==typeof e.filterable&&(e.filterable={filterFn:e.filterable}),e.filterable}destroyColumnFilterField(e){const n=this.getColumnFilterField(e);n&&(this.hideColumnFilterField(e,!0),n.destroy(),this.setColumnFilterField(e,void 0))}hideColumnFilterField(e,n){const r=this,{store:i}=r.grid,o=e.element,s=r.getColumnFilterField(e);if(s){r.isDestroying||s.hide();const{$filter:a}=e;!i.isDestroyed&&r.clearStoreFiltersOnHide&&a&&i.removeFilter(a,n),null==o||o.classList.remove(r.filterableColumnCls)}}getColumnFilterField(e){var n;return null==(n=this._columnFilters)?void 0:n[e.id]}setColumnFilterField(e,n){this._columnFilters=this._columnFilters||{},this._columnFilters[e.data.id]=n}parseFilterValue(e,n,r){var i;if(Array.isArray(n))return{value:n};if(Et.isDate(n))return{operator:r.isDateField?"sameDay":r.isTimeField?"sameTime":"=",value:n};const o=String(n).match(this.filterParseRegExp);return{operator:o[1]||(null==(i=e.filterable)?void 0:i.operator)||"*",value:o[2]}}buildFilterValue({operator:e,value:n}){return n instanceof Date||Array.isArray(n)?n:(e in Mu?"":e)+n}onStoreBeforeFilter({filters:e}){var n;const{columns:r}=this.client;for(let i=0;i<e.count;i++){const o=e.getAt(i),s=(o.columnOwned||this.prioritizeColumns)&&r.find((e=>!1!==e.filterable&&e.field===o.property));(null==(n=null==s?void 0:s.filterable)?void 0:n.filterFn)&&(s.$filter||(s.$filter=new Zr({columnOwned:!0,property:o.property,id:s.id,filterBy(e){return s.filterable.filterFn({value:this.value,record:e,property:this.property,column:s})}})),s.$filter.value=o.value,e.splice(i,1,s.$filter))}}onStoreFilter(){!this.storeTrackingSuspended&&this.rendered&&this.updateColumnFilterFields()}afterColumnsChange({action:e,changes:n,column:r,columns:i}){if(!this.hidden&&(null==n?void 0:n.hidden)){n.hidden.value?this.destroyColumnFilterField(r):this.renderColumnFilterField(r)}"remove"===e&&i.forEach((e=>this.destroyColumnFilterField(e)))}suspendStoreTracking(){this.storeTrackingSuspended++}resumeStoreTracking(){this.storeTrackingSuspended--}renderHeader(){this.hidden||this.renderFilterBar()}renderContents(){if(this._columnFilters)for(const e of Object.values(this._columnFilters))null==e||e.element.remove()}disableGridNavigation(e){return e.target.matches(this.filterFieldInputSelector)}onBeforeElementClick({event:e}){if(e.target.closest(`.${this.filterFieldCls}`))return!1}onColumnFilterFieldChange({source:e,value:n}){var r,i;const o=this,{column:s}=e,{filterFn:a}=s.filterable,{store:l}=o.grid,c=s.$filter||l.filters.find((e=>(e.id===s.id||e.property===s.field)&&!e.internal));if(o._updatingFields)return;const d=null==n||""===n||Array.isArray(n)&&0===n.length;if(l.removeFilter(c,!0),s.$filter=null,d){if(!c)return}else s.$filter=l.addFilter({property:e.name,...o.parseFilterValue(s,n,e),["boolean"==typeof(null==(r=s.filterable)?void 0:r.caseSensitive)?"caseSensitive":void 0]:null==(i=s.filterable)?void 0:i.caseSensitive,[a?"filterBy":"_"]:function(e){return a({value:this.value,record:e,operator:this.operator,property:this.property,column:s})}},!0);l.filter()}populateHeaderMenu({items:e}){e.toggleFilterBar={text:this.hidden?"L{enableFilterBar}":"L{disableFilterBar}",localeClass:this,weight:120,icon:"b-fw-icon b-icon-filter",cls:"b-separator",onItem:()=>this.toggleFilterBar()}}};Au.featureClass="b-filter-bar",Au._$name="FilterBar",du.registerFeature(Au);var Iu=class extends sr{static get $name(){return"Group"}static get configurable(){return{field:null,groupSortFn:null,renderer:null,keyMap:{" ":"toggleGroup"},toggleOnRowClick:!0}}construct(e,n){const r=this;e.features.tree||(r._thisIsAUsedExpression(e.features.groupSummary),n=r.processConfig(n),r.grid=e,super.construct(e,n),r.bindStore(e.store),e.rowManager.ion({beforeRenderRow:"onBeforeRenderRow",renderCell:"renderCell",prio:1100,thisObj:r}))}processConfig(e){return"string"==typeof e?{field:e,ascending:null}:e}setConfig(e){null===e?this.store.clearGroupers():super.setConfig(this.processConfig(e))}bindStore(e){this.detachListeners("store"),e.ion({name:"store",group:"onStoreGroup",change:"onStoreChange",thisObj:this}),this.onStoreGroup({groupers:e.groupers})}updateRenderer(e){this.groupRenderer=e}updateField(e){this.store.group({field:e,ascending:this.ascending,fn:this.groupSortFn})}updateGroupSortFn(e){this.isConfiguring||this.store.group({field:this.field,ascending:this.ascending,fn:e})}doDestroy(){super.doDestroy()}doDisable(e){const{store:n}=this;if(e&&n.isGrouped){const{sorters:e}=n;e.unshift(...n.groupers),this.currentGroupers=n.groupers,n.clearGroupers(),n.sort(e)}else!e&&this.currentGroupers&&(n.group(this.currentGroupers[0]),this.currentGroupers=null);super.doDisable(e)}get store(){return this.grid.store}static get pluginConfig(){return{assign:["collapseAll","expandAll"],chain:["renderHeader","populateHeaderMenu","getColumnDragToolbarItems","onElementTouchStart","onElementClick","bindStore"]}}toggleCollapse(e,n){this.internalToggleCollapse(e,n)}internalToggleCollapse(e,n,r=!1,i){const{store:o,grid:s}=this,a=o.getById(e);a.isGroupHeader&&(n=void 0===n?!a.meta.collapsed:n,!1!==s.trigger("beforeToggleGroup",{groupRecord:a,collapse:n,domEvent:i})&&(n?o.collapse(a):o.expand(a),r||(s.rowManager.rowCount>s.store.count?s.rowManager.renderFromRow():s.rowManager.renderFromRecord(a)),s.trigger("toggleGroup",{groupRecord:a,collapse:n}),s.afterToggleGroup()))}collapseAll(){const e=this;e.store.isGrouped&&!e.disabled&&(e.store.groupRecords.forEach((n=>e.internalToggleCollapse(n,!0,!0))),e.grid.refreshRows(!0))}expandAll(){const e=this;e.store.isGrouped&&!e.disabled&&(e.store.groupRecords.forEach((n=>e.internalToggleCollapse(n,!1,!0))),e.grid.refreshRows())}onBeforeRenderRow({row:e}){const n=e.grid.store.getById(e.id);e.forceInnerHTML=e.forceInnerHTML||(null==n?void 0:n.isGroupHeader)}renderCell(e){var n;const r=this,{cellElement:i,row:o,column:s}=e,{meta:a}=e.record,l={"b-group-row":0,"b-grid-group-collapsed":0};if(!r.disabled&&r.store.isGrouped&&"groupRowFor"in a){if("action"===s.type)return;s.clearCell(i),l["b-grid-group-collapsed"]=a.collapsed,l["b-group-row"]=1,r.buildGroupHeader(e),s===r.groupHeaderColumn&&(Gn.createElement({parent:i,tag:"i",className:"b-group-state-icon",nextSibling:i.firstChild}),i.classList.add("b-group-title"),i.$groupHeader=i._hasHtml=!0)}else i.$groupHeader&&(null==(n=i.querySelector(".b-group-state-icon"))||n.remove(),i.classList.remove("b-group-title"),i.$groupHeader=!1);o.assignCls(l)}buildGroupHeader(e){const n=this,{record:r,cellElement:i,column:o,persist:s}=e,{grid:a}=n,l=r.meta,{groupRowFor:c}=l,{groupSummary:d}=a.features,u=l.childCount-(d&&"header"!==d.target?1:0);let h=null,g=!0;if(s||o){const s=a.columns.get(l.groupField),d=e.isFirstColumn=o===n.groupHeaderColumn;(null==s?void 0:s.groupRenderer)?d&&(h=s.groupRenderer({...e,groupRowFor:c,groupRecords:r.groupChildren,groupColumn:s,count:u}),g=!1):n.groupRenderer&&(h=n.groupRenderer({...e,groupRowFor:c,groupRecords:r.groupChildren,groupColumn:s,count:u,isFirstColumn:d})),d&&null==h&&g&&0===Gn.getChildElementCount(i)&&(h=w.encodeHtml(`${"__novalue__"===c?"":c} (${u})`))}else n.groupRenderer&&(h=n.groupRenderer(e));return"string"==typeof h?i.innerHTML=h:"object"==typeof h&&$o.sync({targetElement:i,domConfig:{onlyChildren:!0,children:oe.asArray(h)}}),Gn.getChildElementCount(i)>0&&(i._hasHtml=!0),i.innerHTML}get groupHeaderColumn(){return this.grid.columns.visibleColumns.find((e=>!e.groupHeaderReserved))}renderHeader(e){const{store:n,grid:r}=this;if(n.isGrouped)for(const e of n.groupers){const n=r.columns.get(e.field),i=n&&r.getHeaderElement(n.id);null==i||i.classList.add("b-group",e.ascending?"b-asc":"b-desc")}}populateHeaderMenu({column:e,items:n}){const r=this;!1!==e.groupable&&(n.groupAsc={text:"L{groupAscending}",localeClass:r,icon:"b-fw-icon b-icon-group-asc",cls:"b-separator",weight:400,disabled:r.disabled,onItem:()=>r.store.group(e.field,!0)},n.groupDesc={text:"L{groupDescending}",localeClass:r,icon:"b-fw-icon b-icon-group-desc",weight:410,disabled:r.disabled,onItem:()=>r.store.group(e.field,!1)}),r.store.isGrouped&&(n.groupRemove={text:"L{stopGrouping}",localeClass:r,icon:"b-fw-icon b-icon-clear",cls:e.groupable?"":"b-separator",weight:420,disabled:r.disabled,onItem:()=>r.store.clearGroupers()})}getColumnDragToolbarItems(e,n){var r;const i=this,{store:o,disabled:s}=i;n.push({text:"L{groupAscendingShort}",group:"L{group}",localeClass:i,icon:"b-icon b-icon-group-asc",ref:"groupAsc",cls:"b-separator",weight:110,disabled:s,onDrop:({column:e})=>o.group(e.field,!0)}),n.push({text:"L{groupDescendingShort}",group:"L{group}",localeClass:i,icon:"b-icon b-icon-group-desc",ref:"groupDesc",weight:110,disabled:s,onDrop:({column:e})=>o.group(e.field,!1)});const a=(null==(r=o.groupers)?void 0:r.some((n=>n.field===e.field)))&&!s;return n.push({text:"L{stopGroupingShort}",group:"L{group}",localeClass:i,icon:"b-icon b-icon-clear",ref:"groupRemove",disabled:!a,weight:110,onDrop:({column:e})=>o.removeGrouper(e.field)}),n}onStoreGroup({groupers:e}){const{grid:n}=this,{element:r}=n,i=r&&Gn.children(r,".b-grid-header.b-group");if(r){for(const e of i)e.classList.remove("b-group","b-asc","b-desc");if(e)for(const r of e){const e=n.getHeaderElementByField(r.field);e&&e.classList.add("b-group",r.ascending?"b-asc":"b-desc")}}}onStoreChange({action:e,records:n}){const{client:r}=this,{rowManager:i,store:o}=r;if(o.isGrouped&&"move"===e){const{field:e}=o.groupers[0],r=Math.min(...n.reduce(((n,r)=>{if(n.push(o.indexOf(r.instanceMeta(o).groupParent)),e in r.meta.modified){const i=o.groupRecords.find((n=>n.meta.groupRowFor===r.meta.modified[e]));i&&n.push(o.indexOf(i))}return n}),[]));i.renderFromRow(i.getRow(r))}}onElementTouchStart(e){const n=this,{target:r}=e,i=r.closest(".b-grid-header"),o=i&&n.grid.getColumnFromElement(i);e.touches.length>1&&o&&!1!==o.groupable&&!n.disabled&&n.store.group(o.field)}onElementClick(e){var n;const r=this,{store:i}=r,{target:o}=e,s=o.closest(".b-group-row"),a=o.closest(".b-grid-header"),l=null==a?void 0:a.dataset.column;if(!(o.classList.contains("b-resizer")||r.disabled||o.classList.contains("b-action-item")||e.handled)){if(a&&l){const o=null==(n=i.groupers)?void 0:n.find((e=>e.field===l));if(o&&!e.shiftKey)return o.ascending=!o.ascending,i.group(),!1;if(e.shiftKey){!1!==r.grid.columns.get(l).groupable&&(e.altKey?i.removeGrouper(l):i.group(l))}}return s&&(r.toggleOnRowClick||e.target.classList.contains("b-group-state-icon"))?(r.internalToggleCollapse(Si.get(s).id,void 0,void 0,e),!1):void 0}}toggleGroup(e){var n;const{grid:r}=this,{focusedCell:i}=r;return!(this.disabled||i.isActionable||!(null==(n=i.record)?void 0:n.isGroupHeader))&&(this.internalToggleCollapse(i.id),!0)}};Iu._$name="Group",du.registerFeature(Iu,!0,["Grid","Scheduler"]),du.registerFeature(Iu,!1,["TreeGrid"]);var SummaryFormatter_default=e=>class SummaryFormatter extends(e||re){static get $name(){return"SummaryFormatter"}generateHtml(e,n,r,i,o,s){const a=this.store,l=e.summaries||(e.sum?[{sum:e.sum,renderer:e.summaryRenderer}]:[]);let c=`<table class="${r}">`;return l.forEach((r=>{let i=r.sum,o=null;switch(!0===i&&(i="sum"),i){case"sum":case"add":o=a.sum(e.field,n);break;case"max":o=a.max(e.field,n);break;case"min":o=a.min(e.field,n);break;case"average":case"avg":o=a.average(e.field,n);break;case"count":o=n.length;break;case"countNotEmpty":o=n.reduce(((n,r)=>n+(null!=r[e.field]?1:0)),0)}if("function"==typeof i&&(o=n.reduce(i,"seed"in r?r.seed:0)),null!==o){const e="b-grid-summary-value",n=r.label?`<td class="b-grid-summary-label">${r.label}</td>`:"";let i,s=r.renderer?r.renderer({config:r,sum:o}):o;null==s&&(s=""),i=String(s).includes("<td>")?s:n?`${n}<td class="${e}">${s}</td>`:`<td colspan="2" class="${e}">${s}</td>`,c+=`<tr>${i}</tr>`}})),c+"</table>"}},Fu=class extends(SummaryFormatter_default(sr)){static get $name(){return"GroupSummary"}static get configurable(){return{collapseToHeader:null,target:"footer"}}construct(e,n){if(this.grid=e,super.construct(e,n),!e.features.group)throw new Error("Requires Group feature to work, please enable");this.bindStore(e.store),e.rowManager.ion({beforeRenderRow:"onBeforeRenderRow",renderCell:"renderCell",prio:1e3,thisObj:this})}bindStore(e){this.detachListeners("store"),e.ion({name:"store",update:"onStoreUpdate",prio:1,thisObj:this})}get store(){return this.grid.store}doDisable(e){this.updateTarget(this.target),super.doDisable(e)}changeTarget(e){return Et.assertString(e,"target"),e}updateTarget(e){this.store.useGroupFooters=!this.disabled&&"footer"===e,this.isConfiguring||this.store.group()}changeCollapseToHeader(e){return Et.assertBoolean(e,"collapseToHeader"),e}updateCollapseToHeader(){this.isConfiguring||this.store.group()}static get pluginConfig(){return{chain:["bindStore"]}}onBeforeRenderRow({row:e,record:n}){e.isGroupFooter&&!("groupFooterFor"in n.meta)?(e.isGroupFooter=!1,e.forceInnerHTML=!0):e.isGroupHeader&&!n.meta.collapsed&&e.eachElement(this.removeSummaryElements)}removeSummaryElements(e){}renderCell({column:e,cellElement:n,row:r,record:i,size:o,isFirstColumn:s}){const a=this,{meta:l}=i,{rowHeight:c}=a.grid,d="groupRowFor"in l,u="groupFooterFor"in l,h="header"===a.target,g={"b-group-footer":0,"b-header-summary":0},p=d&&(h||a.collapseToHeader&&l.collapsed)&&!s||u&&!h;if((d||u)&&(o.height=d&&o.height||c),a.store.isGrouped&&p&&!a.disabled){e.clearCell(n);const s=d?i:l.groupRecord;r.isGroupFooter=u,r.isGroupHeader=d,u?g["b-group-footer"]=1:g["b-header-summary"]=1;const p=a.updateSummaryHtml(n,e,s),m="number"==typeof p?p:p.count;m>1&&(o.height+=l.collapsed&&!h?0:m*c*.1),p.height&&(o.height+=p.height)}r.assignCls(g)}updateSummaryHtml(e,n,r){const i=r.groupChildren.slice();i[i.length-1].isGroupFooter&&i.pop();const o=this.generateHtml(n,i,"b-grid-group-summary",r,r.meta.groupField,r.meta.groupRowFor);return e.children.length?Gn.sync(o,e.firstElementChild):e.innerHTML=o,n.summaries?n.summaries.length:n.sum?1:0}onStoreUpdate({source:e,changes:n}){if(!this.disabled&&e.isGrouped){if(n&&e.groupers.find((e=>e.field in n)))return;Object.keys(n).some((e=>{const n=this.grid.columns.get(e);return Boolean(n)&&(Boolean(n.sum)||Boolean(n.summaries))}))&&(this.grid.forceFullRefresh=!0)}}refresh(){this.grid.columns.visibleColumns.forEach((e=>{this.hasSummary(e)&&this.grid.refreshColumn(e)}))}hasSummary(e){return e.sum||e.summaries}};Fu.featureClass="b-group-summary",Fu._$name="GroupSummary",du.registerFeature(Fu);var Pu=class extends Na{static get $name(){return"HeaderMenu"}static get configurable(){return{type:"header",items:null,moveColumns:null}}static get defaultConfig(){return{processItems:null}}static get pluginConfig(){const e=super.pluginConfig;return e.chain.push("populateHeaderMenu"),e}shouldShowMenu(e){const{column:n}=e;return n&&!1!==n.enableHeaderContextMenu&&n!==this.client.timeAxisColumn}getDataFromEvent(e){return Et.assign(super.getDataFromEvent(e),this.client.getHeaderDataFromEvent(e))}populateHeaderMenu({items:e,column:n}){const r=this;if(n){if(n.headerMenuItems&&Et.merge(e,n.headerMenuItems),n.isCollapsible){const{collapsed:i}=n,o=i?r.client.rtl?"left":"right":r.client.rtl?"right":"left";e.toggleCollapse={weight:215,icon:`b-fw-icon b-icon-collapse-${o}`,text:r.L(i?"L{expandColumn}":"L{collapseColumn}"),onItem:()=>n.collapsed=!i}}if(r.moveColumns){const i=r.getColumnToMoveBefore(n),o=r.getColumnToMoveAfter(n);i&&(e.movePrev={weight:220,icon:"b-fw-icon b-icon-column-move-left",text:r.L("L{moveBefore}",w.encodeHtml(i.text)),onItem:()=>{var e;const{parent:r}=n;i.parent.insertChild(n,i)&&(n.region=i.region,(null==(e=r.children)?void 0:e.length)||r.remove())}}),o&&(e.moveNext={weight:230,icon:"b-fw-icon b-icon-column-move-right",text:r.L("L{moveAfter}",w.encodeHtml(o.text)),onItem:()=>{var e;const{parent:r}=n;o.parent.insertChild(n,o.nextSibling)&&(n.region=o.region,(null==(e=r.children)?void 0:e.length)||r.remove())}})}}return e}getColumnToMoveBefore(e){const{previousSibling:n,parent:r}=e;return n?n.children&&!e.children?n.children[n.children.length-1]:n:r.isRoot?void 0:r}getColumnToMoveAfter(e){const{nextSibling:n,parent:r}=e;return n||(r.isRoot?void 0:r)}};Pu.featureClass="",Pu._$name="HeaderMenu",du.registerFeature(Pu,!0);var Ou={mousedown:"mouseDown",mousemove:"mouseMove",mouseup:"mouseUp",touchdown:"touchDown",touchmove:"touchMove",touchup:"touchUp",pointerover:"mouseOver",mouseout:"mouseOut",dblclick:"dblClick",keydown:"keyDown",keypress:"keyPress",keyup:"keyUp",contextmenu:"contextMenu"},Lu=class extends sr{constructor(){super(...arguments),__publicField(this,"mergedRanges",[]),__publicField(this,"mergedMap",{})}static get pluginConfig(){return{chain:["beforeRenderCell","afterRenderRow","bindStore","afterColumnsChange","afterRemove","afterToggleGroup","afterToggleSubGrid","handleEvent","populateHeaderMenu","afterSelectionChange"],before:["onInternalResize"],override:["getColumnFromElement","getRecordFromElement"]}}afterConstruct(){const e=this,{client:n}=e;n.eachSubGrid((n=>e.setupSubGrid(n))),n.rowManager.ion({renderDone:"onRenderDone",thisObj:e}),e.bindStore(n.store)}setupSubGrid(e){e.$mergedCellsElement=Gn.createElement({parent:e.element,className:{"b-grid-merged-cells-container":1}})}doDisable(e){this.isConfiguring||(this.isDisabling=!0,this.reset(),this.isDisabling=!1),super.doDisable(e)}updatePassthrough(e){this.client.element.classList.toggle("b-mergecells-passthrough",e)}bindStore(e){this.detachListeners("store"),e.ion({name:"store",change:"onStoreChange",refresh:{prio:1,fn:"onStoreRefresh"},thisObj:this})}onInternalResize(){this.refreshBounds()}beforeRenderCell(e){const{column:n,record:r,cellElement:i}=e,o=this.client.subGrids[n.region];if(!this.disabled&&n.mergeCells&&n.isSorted&&!r.isSpecialRow&&!o.collapsed){const o=this.getMergeRange(r,n);(null==o?void 0:o.use)&&(i.classList.add("b-merged-cell"),i.innerHTML="",e.cellElement=o.cellElement)}}afterRenderRow({row:e,oldId:n,oldHeight:r}){n===e.id&&r!==e.height&&(this.heightChanged=!0)}afterColumnsChange({action:e,changes:n,column:r}){if(!this.disabled)if("update"!==e||!n.mergeCells||r.mergeCells)this.refreshBounds();else{for(const e of this.mergedRanges.slice())e.column===r&&this.removeRange(e);this.syncDom()}}afterRemove(){!this.disabled&&this.reset()}afterToggleGroup(){!this.disabled&&this.reset()}afterToggleSubGrid(){!this.disabled&&this.reset()}afterSelectionChange(){if(!this.passthrough){const{client:e}=this,n=e.selectedRecords.map((n=>e.store.indexOf(n)));let r=!1;for(const e of this.mergedRanges){let i=!0;for(let r=e.fromIndex;r<=e.toIndex&&i;r++)i=n.includes(r);e.isSelected!==i&&(e.isSelected=i,r=!0)}r&&this.syncDom()}}getRecordFromElement(e){var n;return(null==(n=e.elementData)?void 0:n.range)?this.client.store.getAt(e.elementData.range.fromIndex):this.overridden.getRecordFromElement(e)}getColumnFromElement(e){var n;return(null==(n=e.elementData)?void 0:n.range)?e.elementData.range.column:this.overridden.getColumnFromElement(e)}populateHeaderMenu({column:e,items:n}){!1!==e.mergeable&&(n.mergeCells={text:"L{MergeCells.mergeCells}",icon:"b-fw-icon "+(e.mergeCells?"b-icon-checked":"b-icon-unchecked"),tooltip:"L{MergeCells.menuTooltip}",cls:"b-separator",weight:500,disabled:this.disabled,onItem:()=>e.mergeCells=!e.mergeCells})}async handleEvent(e){var n;if(!this.passthrough){const r=e.target.closest(".b-grid-merged-cells");if(r){const{client:i}=this,{range:o}=r.elementData,{cellEdit:s}=i.features,{column:a}=o,l=w.capitalize(null!=(n=Ou[e.type])?n:e.type),c={grid:i,records:[],column:a,cellElement:r.firstElementChild,target:e.target,event:e};for(let e=o.fromIndex;e<=o.toIndex;e++)c.records.push(i.store.getAt(e));if(i.trigger(`mergedCell${l}`,c),(null==s?void 0:s.triggerEvent.toLowerCase())===`cell${l}`.toLowerCase()){const n=i.rowManager.getRowAt(e.clientY);await s.startEditing({id:n.id,columnId:a.id})}else"click"===e.type&&this.onRangeClick({range:o})}}}onRangeClick({range:e}){const n=[];for(let r=e.fromIndex;r<=e.toIndex;r++)n.push(this.client.store.getAt(r));this.client.selectedRecords=n}onStoreChange(){!this.disabled&&this.reset()}onStoreRefresh({action:e}){"filter"!==e&&"dataset"!==e&&!this.disabled&&this.reset(!1)}createRangeElement(e){var n,r,i;const o=this.client.getSubGridFromColumn(e.column).$mergedCellsElement,s=`${e.fromIndex}-@-${e.column.id}`;let a=null!=(i=null==(n=o.syncIdMap)?void 0:n[s])?i:null==(r=o.releasedIdMap)?void 0:r[s];return o.releasedIdMap&&delete o.releasedIdMap[s],a||(a=Gn.createElement(this.createRangeDomConfig(e))),$o.addChild(o,a,s),e.element=a,e.cellElement=a.firstElementChild,a}createRangeDomConfig(e){var n;const{column:r,fromIndex:i,toIndex:o,top:s,left:a,width:l,height:c}=e,{type:d}=r,u=this.client.store.getAt(i),h={className:{"b-grid-merged-cells":1,"b-selected":e.isSelected},elementData:{range:e},style:{top:s,left:a,height:c,width:l},dataset:{syncId:`${i}-@-${r.id}`,fromIndex:i,toIndex:o,column:r.field,columnId:r.id},children:[{className:new Xt(this.client.cellCls).assign({[`b-${null==d?void 0:d.toLowerCase()}-cell`]:d,[r.cellCls]:r.cellCls,[r.internalCellCls]:r.internalCellCls}).assign(r.autoCls),keepChildren:!0,elementData:{range:e},dataset:{column:r.field,columnId:r.id},style:{height:this.client.rowManager.rowHeight}}]};return null==(n=r.mergedRenderer)||n.call(r,{domConfig:h,value:r.getRawValue(u),record:u,column:r,fromIndex:i,toIndex:o}),h}buildMergedCellsConfig(e,n,r){var i,o;const s=this,{client:a}=s,{rowManager:l}=a;e=null!=e?e:null==(i=l.topRow)?void 0:i.dataIndex,n=null!=n?n:null==(o=l.bottomRow)?void 0:o.dataIndex;const c=a.regions.reduce(((e,n)=>(e[n]={className:{"b-grid-merged-cells-container":1},children:[]},e)),{});for(const i of s.mergedRanges)i.use&&i.fromIndex<=n&&i.toIndex>=e&&(s.updateRange(i,s.heightChanged,r),c[i.column.region].children.push(s.createRangeDomConfig(i)));return c}syncDom(e=!1){const n=this,{client:r}=n,{rowManager:i}=r;if(!e&&!i.topRow||n.disabled&&!n.isDisabling)return;const o=this.buildMergedCellsConfig();r.eachSubGrid((e=>{$o.sync({targetElement:e.$mergedCellsElement,syncIdField:"syncId",domConfig:o[e.region]})})),n.heightChanged=!1}onRenderDone(){this.syncDom()}removeRange(e){oe.remove(this.mergedRanges,e);for(let n=e.fromIndex;n<=e.toIndex;n++)delete this.mergedMap[`${n}-@-${e.column.id}`]}reset(e=!0){const n=this,r=n.client.columns.visibleColumns.filter((e=>e.mergeCells&&e.isSorted),!0),i=n.mergedRanges.length;if(n.mergedRanges=[],n.mergedMap={},e&&!n.client.refreshSuspended){for(const e of n.client.rowManager.rows)for(const n of r)e.renderCell(e.getCell(n.id));n.syncDom(i&&!n.client.rowManager.rowCount)}}refreshBounds(){const{mergedRanges:e}=this,n=new Map;for(const r of e.slice()){const{column:e}=r,{element:i}=e;if(i){let o=n.get(e);o||n.set(e,o=Gt.from(i,i.parentElement)),r.left=o.left,r.width=o.width}else this.removeRange(r)}this.syncDom()}updateRange(e,n,r=null){const{store:i,rowManager:o}=this.client,{topRendered:s,bottomRendered:a}=e,{rowOffsetHeight:l}=o;let c,d,{fromIndex:u,toIndex:h}=e;if((n=r?r.length>0:n)||!s||!a){if(!s||n){if(r){const e=r.findIndex((e=>e.dataIndex>=u));c=r[e],u=c.dataIndex}else do{c=o.getRowById(i.getAt(u))}while(!c&&u++<h);e.topRendered=u===e.fromIndex;const n=u-e.fromIndex;e.top=c.top-n*(r?c.offsetHeight:l)}if(!a||n){if(r){const e=r.findIndex((e=>e.dataIndex===h));d=r[-1===e?r.length-1:e],u=d.dataIndex}else do{d=o.getRowById(i.getAt(h))}while(!d&&h-- >u);e.bottomRendered=h===e.toIndex;const n=e.toIndex-h;e.bottom=d.bottom+n*(r?d.offsetHeight:l)}e.height=e.bottom-e.top}}getMergeRange(e,n){if(e.isSpecialRow)return;const r=this,{mergedMap:i}=r,{store:o}=r.client,s=n.id,a=o.indexOf(e),l=`${a}-@-${s}`;let c=i[l];if(!c){const d=n.getRawValue(e);c=i[l]={column:n},r.mergedRanges.push(c);let u,h,g=a;do{u=o.getAt(--g),h=u&&n.getRawValue(u),h===d&&(i[`${g}-@-${s}`]=c)}while(u&&h===d);let p,m,f=a;do{p=o.getAt(++f),m=p&&n.getRawValue(p),m===d&&(i[`${f}-@-${s}`]=c)}while(p&&m===d);if(c.fromIndex=g+1,c.toIndex=f-1,c.toIndex-c.fromIndex>0){const e=Gt.from(n.element,n.element.parentElement);c.left=e.left,c.width=e.width,c.use=!0}}return!c.element&&c.use&&r.createRangeElement(c),c}};__publicField(Lu,"$name","MergeCells"),__publicField(Lu,"configurable",{passthrough:!0}),Lu._$name="MergeCells",du.registerFeature(Lu);var _u=class extends sr{static get $name(){return"QuickFind"}static get pluginConfig(){return{chain:["onElementKeyPress","onCellNavigate"]}}static get properties(){return{hitCls:"b-quick-hit",hitCellCls:"b-quick-hit-cell",hitCellBadgeCls:"b-quick-hit-cell-badge",hitTextCls:"b-quick-hit-text"}}construct(e,n){super.construct(e,n),Object.assign(this,{grid:e,treeWalker:e.setupTreeWalker(e.element,Gn.NodeFilter.SHOW_TEXT,(()=>Gn.NodeFilter.FILTER_ACCEPT))})}isActionAvailable(){const{focusedCell:e}=this.grid;return!this.disabled&&(null==e?void 0:e.record)&&!e.isActionable&&this.find.length>0}doDisable(e){e&&this.clear(),super.doDisable(e)}get store(){return this.grid.store}showQuickFind(){const e=this,n=e.grid.getHeaderElement(e.columnId);if(n){if(!e.headerField){const[r,i,o]=Gn.createElement({tag:"div",className:"b-quick-hit-header",children:[{tag:"div",className:"b-quick-hit-field"},{tag:"div",className:"b-quick-hit-badge"}]},{returnAll:!0});"header"===e.mode?n.appendChild(r):(r.className+=" b-quick-hit-mode-grid",e.grid.element.appendChild(r)),e.headerField={header:r,field:i,badge:o,colHeader:n}}e.headerField.field.innerHTML=e.find,e.headerField.badge.innerHTML=e.found.length,n.classList.add("b-quick-find-header"),e.renderListenerInitialized||(e.grid.rowManager.ion({rendercell:e.renderCell,thisObj:e}),e.renderListenerInitialized=!0)}}hideQuickFind(){const e=this,{grid:n,headerField:r}=e;for(const r of e.prevFound||e.found){const i=n.getRowById(r.id);if(i){i.forceInnerHTML=!0;const n=i.getCell(e.columnId);n._content=null,i.renderCell(n),i.forceInnerHTML=!1}}r&&(r.header.parentNode.removeChild(r.header),r.colHeader.classList.remove("b-quick-find-header"),e.headerField=null),e.renderListenerInitialized&&(n.rowManager.un({rendercell:e.renderCell},e),e.renderListenerInitialized=!1),n.trigger("hideQuickFind")}search(e,n=this.columnId){const r=this,{grid:i}=r,o=i.columns.getById(n)||i.columns.get(n),s=r.store.findByField(o.field,e,o.mergeCells&&o.isSorted);let a=1;Object.assign(r,{foundMap:{},prevFound:r.found,found:s,find:e,columnId:o.id,findRe:new RegExp(`(\\s+)?(${w.escapeRegExp(String(e))})(\\s+)?`,"ig")}),e?r.showQuickFind():r.hideQuickFind();for(const e of Gn.children(i.element,`.${r.hitCls}`))e.classList.remove(r.hitCls,r.hitCellCls),e._originalContent&&(e.innerHTML=e._originalContent,e._originalContent=null);if(s){s.length>0&&r.gotoClosestHit(i.focusedCell,s);for(const e of s){r.foundMap[e.id]=a++;const n=i.getRowById(e.data.id);if(null==n||n.renderCell(n.getCell(o.id)),a>1e3)break}i.trigger("quickFind",{find:e,found:s})}}clear(){var e;(this.find||(null==(e=this.found)?void 0:e.length))&&this.search("")}get foundCount(){var e,n;return null!=(n=null==(e=this.found)?void 0:e.length)?n:0}gotoHit(e){const n=this.found[e];return n&&this.grid.focusCell({columnId:this.columnId,id:n.id},{doSelect:!0}),!!n}gotoClosestHit(e,n){const r=e?this.grid.store.indexOf(e.id):0,i=n.slice().sort(((e,n)=>Math.abs(e.index-r)-Math.abs(n.index-r)));this.gotoHit(n.indexOf(i[0]))}gotoFirstHit(){this.gotoHit(0)}gotoLastHit(){this.gotoHit(this.found.length-1)}gotoNextHit(){var e,n,r;const i=this,{grid:o}=i,s=null!=(r=null==(e=o._focusedCell)?void 0:e.id)?r:null==(n=o.lastFocusedCell)?void 0:n.id,a=o.store.indexOf(s)||0,l=i.found.find((e=>e.index>a));l?o.focusCell({columnId:i.columnId,id:l.id},{doSelect:!0}):i.gotoFirstHit()}gotoPrevHit(){var e,n,r;const i=this,{grid:o,found:s}=i,a=null!=(r=null==(e=o._focusedCell)?void 0:e.id)?r:null==(n=o.lastFocusedCell)?void 0:n.id,l=o.store.indexOf(a)||0;let c;if(s.length){for(let e=s.length-1;e--;e>=0)if(s[e].index<l){c=s[e];break}c?o.focusCell({columnId:i.columnId,id:c.id},{doSelect:!0}):i.gotoLastHit()}}renderCell({cellElement:e,column:n,record:r}){var i;const o=this,{classList:s}=e,{treeWalker:a,findRe:l,hitTextCls:c}=o,d=o.columnId===n.id&&(null==(i=o.foundMap)?void 0:i[r.id]);if(d){s.add(o.hitCls),e.isQuickHit=!0,e._originalContent=e.innerHTML;const n=a.currentNode=Gn.down(e,".b-grid-cell-value,.b-tree-cell-value")||e;for(let e=a.nextNode();e&&n.contains(e);){const n=e,r=e.nodeValue,i=["<span>"];e=a.nextNode();let o=l.lastIndex;for(let e=l.exec(r);e;e=l.exec(r)){const n=r.substring(o,e.index),s=e[1]?" ":"",a=e[2],d=e[3]?" ":"";i.push(`${w.encodeHtml(n)}${s}<span class="${c}">${a}</span>${d}`),o=l.lastIndex}i.push(w.encodeHtml(r.substring(o)),"</span>"),n.parentNode.insertBefore(Gn.createElementFromTemplate(i.join(""),{fragment:!0}),n),n.remove()}Gn.createElement({parent:e,className:o.hitCellBadgeCls,text:d})}}onBackspace(e){const n=this;return!!n.find&&(n.find=n.find.substr(0,n.find.length-1),n.search(n.find),!0)}clearSearch(){return!!this.find&&(this.find="",this.search(this.find),!0)}showFilterEditor(){const e=this,{filter:n}=e.client.features;n&&e.columnId&&e.foundCount&&(e.clear(),n.showFilterEditor(e.client.columns.getById(e.columnId),e.find))}onElementKeyPress(e){var n;const r=this,{grid:i}=r,{focusedCell:o}=i;if(!e.handled&&!r.disabled&&(null==o?void 0:o.record)&&!o.isActionable&&1===(null==(n=e.key)?void 0:n.length)){const n=i.columns.getById(i._focusedCell.columnId);n&&!1!==n.searchable&&(r.columnId=i._focusedCell.columnId,r.find+=e.key,r.search(r.find))}}onCellNavigate(e,n,r){const i=this;!i.find||r&&r.columnId===i.columnId||i.clear()}};__publicField(_u,"configurable",{mode:"header",find:"",keyMap:{F3:"gotoNextHit","Shift+F3":"gotoPrevHit","Ctrl+g":"gotoNextHit","Ctrl+Shift+g":"gotoPrevHit","Ctrl+Shift+f":"showFilterEditor",Escape:"clearSearch",Backspace:"onBackspace"}}),_u._$name="QuickFind",du.registerFeature(_u);var $u=class extends sr{static get pluginConfig(){return{chain:["onElementPointerDown","onElementDblClick","onElementTouchMove","onSubGridCollapse","onSubGridExpand","render"]}}onElementDblClick(e){const n=this,{client:r}=n,i=e.target.closest(".b-grid-splitter-collapsed");if(i&&!n.expanding){n.expanding=!0;let e=i.dataset.region,o=r.getSubGrid(e);o.collapsed||(e=r.getLastRegions()[1],o=r.getSubGrid(e)),o.expand().then((()=>n.expanding=!1))}}startMove(e,n){const r=this,{client:i}=r,o=e.dataset.region,s=i.element,a=i.regions[i.regions.indexOf(o)+1],l=i.getSubGrid(a),c=i.getSubGrid(o);let d=c,u=1;if(null!=d.flex&&null==l.flex&&(d=l,u=-1),i.rtl&&(u*=-1),e.classList.contains("b-grid-splitter-collapsed"))return;const h=d.element.offsetWidth+l.element.offsetWidth;r.dragContext={element:e,headerEl:d.header.element,subGridEl:d.element,subGrid:d,splitterSubGrid:c,originalWidth:d.element.offsetWidth,originalX:n,minWidth:d.minWidth||0,maxWidth:Math.min(h,d.maxWidth||h),flip:u},s.classList.add("b-moving-splitter"),c.toggleSplitterCls("b-moving"),r.pointerDetacher=cn.on({element:document,pointermove:"onPointerMove",pointerup:"onPointerUp",thisObj:r})}endMove(){const e=this,{dragContext:n}=e;n&&(e.pointerDetacher(),e.client.element.classList.remove("b-moving-splitter"),n.splitterSubGrid.toggleSplitterCls("b-moving",!1),e.dragContext=null)}onCollapseClick(e,n,r){const{client:i}=this,o=n.dataset.region,s=i.getLastRegions();if(!1!==i.trigger("splitterCollapseClick",{subGrid:e,domEvent:r})){if(s[0]===o){const e=i.getSubGrid(s[1]);if(e.collapsed)return void e.expand()}e.collapse()}}onExpandClick(e,n,r){const{client:i}=this,o=n.dataset.region,s=i.getLastRegions();if(!1!==i.trigger("splitterExpandClick",{subGrid:e,domEvent:r}))if(s[0]!==o||e.collapsed)e.expand();else{i.getSubGrid(s[1]).collapse()}}updateMove(e){const{dragContext:n}=this;if(n){const r=e-n.originalX,i=Math.max(Math.min(n.maxWidth,n.originalWidth+r*n.flip),0);n.subGrid.width=Math.max(i,n.minWidth)}}onElementPointerDown(e){const n=this,{target:r}=e,i=0===e.button&&r.closest(":not(.b-row-reordering):not(.b-dragging-event):not(.b-dragging-task):not(.b-dragging-header):not(.b-dragselecting) .b-grid-splitter"),o=i&&n.client.getSubGrid(i.dataset.region);let s;i&&(r.closest(".b-grid-splitter-button-collapse")?n.onCollapseClick(o,i,e):r.closest(".b-grid-splitter-button-expand")?n.onExpandClick(o,i,e):(n.startMove(i,e.clientX),s=i)),"touch"===e.pointerType&&n.toggleTouchSplitter(s)}onPointerMove(e){this.dragContext&&(this.updateMove(e.clientX),e.preventDefault())}onElementTouchMove(e){this.dragContext&&e.preventDefault()}onPointerUp(e){this.dragContext&&(this.endMove(),e.preventDefault())}onSubGridCollapse({subGrid:e}){const n=this.client.resolveSplitter(e);this.client.getLastRegions()[1]===e.region&&n.classList.add("b-grid-splitter-allow-collapse")}onSubGridExpand({subGrid:e}){this.client.resolveSplitter(e).classList.remove("b-grid-splitter-allow-collapse")}toggleTouchSplitter(e){const n=this,{touchedSplitter:r}=n;e&&r&&e.dataset.region!==r.dataset.region&&n.toggleTouchSplitter();const i=n.client.getSubGrid(e?e.dataset.region:null==r?void 0:r.dataset.region);i&&(i.toggleSplitterCls("b-touching",Boolean(e)),e?i.startSplitterButtonSyncing():i.stopSplitterButtonSyncing()),n.touchedSplitter=e}render(){const{regions:e,subGrids:n}=this.client;e.length>2&&(n[e[0]].splitterElement.classList.add("b-left-only"),n[e[1]].splitterElement.classList.add("b-right-only"))}};__publicField($u,"$name","RegionResize"),$u.featureClass="b-split",$u._$name="RegionResize",du.registerFeature($u);var ju=class extends sr{constructor(){super(...arguments),__publicField(this,"clipboardRecords",[]),__publicField(this,"entityName","row")}construct(e,n){super.construct(e,n),e.rowManager.ion({beforeRenderRow:"onBeforeRenderRow",thisObj:this}),this.grid=e}onBeforeRenderRow({row:e,record:n}){e.cls["b-cut-row"]=this._isCut&&this.clipboardRecords.includes(n)}isActionAvailable({event:e}){var n;const{grid:r}=this,{cellEdit:i}=r.features,{target:o}=e;return!this.disabled&&0===globalThis.getSelection().toString().length&&(!i||!i.isEditing)&&(null==(n=r.selectedRecords)?void 0:n.length)>0&&(!o||Boolean(o.closest(".b-gridbase:not(.b-schedulerbase) .b-grid-subgrid,.b-grid-subgrid:not(.b-timeaxissubgrid)")))}copy(){this.copyRows()}cut(){this.copyRows(!0)}paste(e){this.pasteRows((null==e?void 0:e.isModel)?e:null)}copyRows(e=!1){const n=this,{client:r,entityName:i}=n,o=n.selectedRecords.filter((n=>!n.readOnly||!e));o.length&&!r.readOnly&&!1!==r.trigger("beforeCopy",{records:o,isCut:e,entityName:i})&&(n._isCut=e,n.clipboardRecords.forEach((e=>{var n;return null==(n=r.rowManager.getRowById(e))?void 0:n.removeCls("b-cut-row")})),n.clipboardRecords=o.slice(),r.store.forEach((e=>{e.meta.isCut=n._isCut&&n.clipboardRecords.includes(e)})),o.forEach((n=>this.onRowCutOrCopy(n,e))),r.trigger("copy",{records:o,isCut:e,entityName:i}))}onRowCutOrCopy(e,n){var r;null==(r=this.client.rowManager.getRowById(e))||r.toggleCls("b-cut-row",n)}pasteRows(e){var n,r;const i=this,o=i.clipboardRecords,{client:s,entityName:a}=i,{store:l}=s,c=e||s.selectedRecord;if(s.readOnly||s.isTreeGrouped||!o.length||l.tree&&i._isCut&&o.some((e=>e.contains(c,!0)))||!1===s.trigger("beforePaste",{records:o,referenceRecord:c,isCut:i._isCut,entityName:a}))return[];i.sortByIndex(o);const d=i.extractParents(o,{});return i.insertCopiedRecords(d,c),i._isCut?i.clearClipboard():s.selectedRecords=d,s.trigger("paste",{records:d,originalRecords:o,isCut:i._isCut,referenceRecord:c,entityName:a}),null==(r=null==(n=s.getRowFor(d[d.length-1]))?void 0:n.cells)||r[0].focus(),d}clearClipboard(){this._isCut&&this.clipboardRecords.forEach((e=>{var n;return null==(n=this.client.rowManager.getRowById(e))?void 0:n.removeCls("b-cut-row")})),this._isCut=!1,this.clipboardRecords=[]}generateNewName(e){const n=e[this.nameField];let r=2;for(;this.client.store.findRecord(this.nameField,`${n} - ${r}`);)r++;return`${n} - ${r}`}insertCopiedRecords(e,n){const{store:r}=this.client,i=r.indexOf(n)+1;return r.tree?n.parent.insertChild(e,n.nextSibling,!1,{orderedBeforeNode:n.nextOrderedSibling}):this._isCut?void r.move(e,r.getAt(i)):r.insert(i,e)}get selectedRecords(){const e=[...this.client.selectedRecords];return this.client.selectedCells.forEach((n=>{e.includes(n.record)||e.push(n.record)})),e}getMenuItemText(e,n=!1){const r=this;let i=r[e+"RecordText"];return n&&(i+=` (${r.selectedRecords.length>1?r.rowSpecifierTextPlural:r.rowSpecifierText})`),i}populateCellMenu({record:e,items:n,cellSelector:r}){var i;const o=this,{client:s,rowOptionsOnCellContextMenu:a}=o,l=!0===(null==(i=s.features.cellCopyPaste)?void 0:i.enabled),c=l&&s.isCellSelected(r);s.readOnly||s.isTreeGrouped||!1!==(null==e?void 0:e.isSpecialRow)||!(l?s.selectedRows.length:s.selectedRecords.length)||c&&!o.rowOptionsOnCellContextMenu||(n.cut={text:o.getMenuItemText("cut",c&&a),localeClass:o,icon:"b-icon b-icon-cut",weight:135,disabled:e.readOnly,onItem:()=>o.cut()},n.copy={text:o.getMenuItemText("copy",c&&a),localeClass:o,cls:"b-separator",icon:"b-icon b-icon-copy",weight:120,onItem:()=>o.copy()},n.paste={text:o.getMenuItemText("paste",c&&a),localeClass:o,icon:"b-icon b-icon-paste",weight:140,disabled:!o.clipboardRecords.length,onItem:()=>o.paste(e)})}sortByIndex(e){const{store:n}=this.client;return e.sort(((r,i)=>{const o=r.indexPath,s=i.indexPath;if(!e.includes(r.parent)&&!e.includes(i.parent))return n.indexOf(r)-n.indexOf(i);if(o.length===s.length){for(let e=0;e<o.length;e++){if(o[e]<s[e])return-1;if(o[e]>s[e])return 1}return 0}return o.length-s.length}))}extractParents(e,n){const r=this,{client:i,_isCut:o}=r;i.store.tree&&e.forEach((n=>{n.traverse((n=>{const r=n.getTopParent(!0);e.includes(n)||o&&e.some((e=>r.includes(e)))||e.push(n)}))}));const s=e.reduce(((e,s)=>{let a;const l=s.parentId||s.meta.modified;return o?(a=s,a.meta.isCut=!1):(a=s.copy(),a[r.nameField]=r.generateNewName(a),a.data.expanded=s.isExpanded(i.store)),n[s.id]=a,s.parent===i.store.rootNode?e.push(a):l in n?n[l].appendChild(a,!0):e.push(a),e}),[]);return s.forEach((e=>{e.sortOrderedChildren(!0,!0)})),s}};__publicField(ju,"$name","RowCopyPaste"),__publicField(ju,"type","rowCopyPaste"),__publicField(ju,"pluginConfig",{assign:["copyRows","pasteRows"],chain:["populateCellMenu"]}),__publicField(ju,"configurable",{nameField:"name",keyMap:{"Ctrl+C":{weight:10,handler:"copy"},"Ctrl+X":{weight:10,handler:"cut"},"Ctrl+V":{weight:10,handler:"paste"}},copyRecordText:"L{copyRecord}",cutRecordText:"L{cutRecord}",pasteRecordText:"L{pasteRecord}",rowSpecifierText:"L{row}",rowSpecifierTextPlural:"L{rows}",localizableProperties:["copyRecordText","cutRecordText","pasteRecordText","rowSpecifierText","rowSpecifierTextPlural"],rowOptionsOnCellContextMenu:!1}),ju.featureClass="b-row-copypaste",ju._$name="RowCopyPaste",du.registerFeature(ju,!0,"Grid"),du.registerFeature(ju,!1,"Gantt"),du.registerFeature(ju,!1,"SchedulerPro"),du.registerFeature(ju,!1,"ResourceHistogram");var zu={remove:1,filter:1,dataset:1,replace:1},Bu=class extends sr{static get properties(){return{expanderBodyClass:"b-rowexpander-body",expandedRowClass:"b-rowexpander-row-expanded",recordStateMap:new Map,collapsingRecords:new Set}}static get pluginConfig(){return{chain:["afterColumnsChange","beforeRenderRow","processRowHeight","bindStore"],override:["onGridBodyFocusIn"]}}afterConstruct(){const e=this,{client:n}=e;e.renderer?(n.isGanttBase&&!1!==n.fixedRowHeight&&console.warn("When using RowExpander on a Gantt, the Gantt`s fixedRowHeight config must be set to false."),e.bindStore(n.store),e.triggerEvent&&n.ion({[e.triggerEvent]:"onTriggerEvent",thisObj:e}),e.addColumn()):console.warn("RowExpander requires implementing the renderer function.")}bindStore(e){const n=this;n.recordStateMap.clear(),n.collapsingRecords.clear(),n.detachListeners("clientStoreChange"),e.ion({name:"clientStoreChange",change:n.onStoreChange,thisObj:n})}doDisable(e){const{client:n}=this;e&&(this.recordStateMap.clear(),this.collapsingRecords.clear()),n.isConfiguring||n.rowManager.renderFromRow(),super.doDisable(e)}changeLoadingIndicatorText(e){return e?this.L(e):e}onGridBodyFocusIn(e){var n,r;(null==(r=null==(n=this.client.lastMousedownEvent)?void 0:n.target)?void 0:r.closest(".b-rowexpander-body"))||this.overridden.onGridBodyFocusIn(e)}get isAnimating(){return this.client.isAnimating}set isAnimating(e){const{client:n}=this,r=n.isAnimating;n.isAnimating=e,n.isAnimating!==r&&n.element.classList.toggle("b-rowexpander-animating")}afterColumnsChange(){this.addColumn()}changeColumn(e){return null==e?e:{type:"action",actions:[{cls:"b-icon b-icon-collapse-down",tooltip:({record:e})=>this.L(this.recordStateMap.has(e)?"L{RowExpander.collapse}":"L{RowExpander.expand}"),onClick:({record:e})=>this.toggleExpand(e)}],width:40,hideable:!1,align:"center",region:this.client.regions[0],...e,field:"expanderActionColumn"}}addColumn(){const e=this,{column:n}=e,{columns:r}=e.client;e._isAddingExpanderColumn||!n||e._expander&&r.includes(e._expander)||(e._isAddingExpanderColumn=!0,"last"===e.columnPosition?[e._expander]=r.add(n):[e._expander]=r.insert(0,n),e._isAddingExpanderColumn=!1)}onTriggerEvent({target:e}){this.disabled||(null==e?void 0:e.closest(".b-action-cell"))||!e.closest(".b-grid-cell")||this.toggleExpand(this.client.getRecordFromElement(e))}toggleExpand(e){e&&(this.recordStateMap.has(e)?this.collapse(e):this.expand(e))}onStoreChange({action:e,source:n,records:r}){const i=this,{recordStateMap:o,collapsingRecords:s}=i;if(!i.disabled)if("removeAll"===e)o.clear(),s.clear();else if(zu[e])for(const[e]of o)n.includes(e)||(o.delete(e),s.delete(e));else if(i.refreshOnRecordChange&&(null==r?void 0:r.length))if("update"===e){const e=o.get(r[0]);(null==e?void 0:e.isCreated)&&(e.isCreated=!1,i.client.rowManager.renderFromRecord(r[0]))}else if("updatemultiple"===e){let e,s;for(const i of r){const r=o.get(i);if(null==r?void 0:r.isCreated){r.isCreated=!1;const o=n.records.indexOf(i);(!s||e>o)&&(e=o,s=i)}}s&&i.client.rowManager.renderFromRecord(s)}}processRowHeight(e,n){var r;const i=this.recordStateMap.get(e);if(i){if(!i.isCreated&&i.isRenderingAsync)return this.loadingIndicatorHeight+n;if(!i.expanderBodyHeight)for(const e of this.client.regions){const n=i.expandElements[e].offsetHeight;n>i.expanderBodyHeight&&(i.expanderBodyHeight=n)}}return(null!=(r=null==i?void 0:i.expanderBodyHeight)?r:0)+n}beforeRenderRow({row:e,record:n}){const r=this,{regions:i}=r.client,{expandedRowClass:o}=r;e.cls.toggle("b-rowexpander-disabled",r.disabled),e.cls[o]?r.enableAnimations&&r.isAnimating&&r.collapsingRecords.has(n)?r.waitForTransition(e,(()=>{r.collapsingRecords.has(n)&&r.removeExpander(e)})):r.removeExpander(e):r.collapsingRecords.delete(n);const s=r.recordStateMap.get(n);if(!r.disabled&&s){s.isCreated||r.renderExpander(n,e,s),e.cls.add(o);for(const n of i){const i=e.getElement(n);s.isCreated?i.appendChild(s.expandElements[n]):r.renderLoadingIndicator(i,s),r.lockCellHeight(i,s.cellHeight,!1)}r._shouldScrollIntoView&&(r._shouldScrollIntoView=!1,Gn.isInView(s.expandElements[i[0]],!0)||r.client.rowManager.ion({once:!0,thisObj:r,renderDone:()=>r.scrollRowIntoView(e,n)}))}}scrollRowIntoView(e,n){this.isAnimating?this.waitForTransition(e,(()=>this.client.scrollRowIntoView(n))):this.client.scrollRowIntoView(n)}waitForTransition(e,n){cn.onTransitionEnd({element:e.element,property:"height",handler:n,thisObj:this})}removeExpander(e){e.cls.remove(this.expandedRowClass);for(const n of this.client.regions){const r=e.getElement(n);r.classList.remove(this.expandedRowClass),Gn.removeEachSelector(r,"."+this.expanderBodyClass),this.lockCellHeight(r,null,!1)}}renderLoadingIndicator(e,n){Gn.createElement({parent:e,className:this.expanderBodyClass+" b-rowexpander-loading",style:{top:n.cellHeight,height:this.loadingIndicatorHeight},children:[{tag:"i",className:"b-icon b-icon-spinner"},this.loadingIndicatorText]})}renderExpander(e,n,r){var i;const o=this,s=null==(i=n.cells[0])?void 0:i.offsetHeight,a={},l=[],continueRendering=(e,n,r)=>{null!=e&&("string"==typeof e?n.innerHTML=e:(e=Gn.createElement(e),n.appendChild(e))),a[r]=n};if(!r.isRenderingAsync){Object.assign(r,{cellHeight:s,expandElements:a,expanderBodyHeight:0});for(const r of o.client.regions){const i=n.getElement(r);n.addCls(o.expandedRowClass);const a=Gn.createElement({parent:i,tabIndex:-1,className:o.expanderBodyClass,style:{top:s+"px"}}),c=o.renderer({record:e,expanderElement:a,rowElement:i,region:r});M.isPromise(c)?l.push(c.then((e=>continueRendering(e,a,r)))):continueRendering(c,a,r)}l.length?(r.isRenderingAsync=!0,Promise.all(l).then((()=>{var n;r.isCreated=!0,null==(n=o.renderRowsWithAnimation)||n.call(o,e),r.isRenderingAsync=!1}))):r.isCreated=!0}}renderRowsWithAnimation(e){const n=this;if(n.enableAnimations){const r=n.client.rowManager.getRowById(e);r&&(n.isAnimating=!0,n.collapsingRecords.has(e)&&r.addCls("b-row-is-collapsing"),n.waitForTransition(r,(()=>{var e;n.isAnimating=!1,r.isDestroyed||null==(e=r.removeCls)||e.call(r,"b-row-is-collapsing")})))}n.client.rowManager.renderFromRecord(e)}lockCellHeight(e,n,r){for(let i=0;i<e.children.length;i++){const o=e.children[i];o.classList.contains(this.expanderBodyClass)||(o.style.height=r?"":n+"px")}}async expand(e){const n=this;n.disabled||!1!==await n.trigger("beforeExpand",{record:e})&&(n.recordStateMap.set(e,{isCreated:!1}),n.collapsingRecords.delete(e),n._shouldScrollIntoView=!0,n.renderRowsWithAnimation(e))}async collapse(e){const n=this;n.disabled||!1!==await n.trigger("beforeCollapse",{record:e})&&(n.recordStateMap.delete(e),n.collapsingRecords.add(e),n.renderRowsWithAnimation(e))}};__publicField(Bu,"$name","RowExpander"),__publicField(Bu,"configurable",{renderer:null,triggerEvent:null,column:{},columnPosition:"first",refreshOnRecordChange:!1,loadingIndicatorHeight:100,loadingIndicatorText:"L{loading}",enableAnimations:!0}),Bu._$name="RowExpander",du.registerFeature(Bu);var Hu=class extends(Delayable_default(sr)){static get deprecatedEvents(){return{gridRowBeforeDragStart:{product:"Grid",invalidAsOfVersion:"6.0.0",message:"`gridRowBeforeDragStart` event is deprecated, listen on this event on the Grid instead."},gridRowDragStart:{product:"Grid",invalidAsOfVersion:"6.0.0",message:"`gridRowDragStart` event is deprecated, listen on this event on the Grid instead."},gridRowDrag:{product:"Grid",invalidAsOfVersion:"6.0.0",message:"`gridRowDrag` event is deprecated, listen on this event on the Grid instead."},gridRowBeforeDropFinalize:{product:"Grid",invalidAsOfVersion:"6.0.0",message:"`gridRowBeforeDropFinalize` event is deprecated, listen on this event on the Grid instead."},gridRowDrop:{product:"Grid",invalidAsOfVersion:"6.0.0",message:"`gridRowDrop` event is deprecated, listen on this event on the Grid instead."},gridRowAbort:{product:"Grid",invalidAsOfVersion:"6.0.0",message:"`gridRowAbort` event is deprecated, listen on this event on the Grid instead."}}}construct(e,n){this.grid=e,super.construct(...arguments)}doDestroy(){var e;null==(e=this.dragHelper)||e.destroy(),super.doDestroy()}init(){const e=this,{grid:n}=e;e.dragHelper=Qa.new({name:"rowReorder",cloneTarget:!0,dragThreshold:10,proxyTopOffset:10,targetSelector:".b-grid-row",lockX:!0,dragWithin:n.bodyContainer,allowDropOutside:!0,scrollManager:n.scrollManager,outerElement:e.targetSubGridElement,touchStartDelay:e.touchStartDelay,isElementDraggable:e.isElementDraggable.bind(e),monitoringConfig:{scrollables:[{element:n.scrollable.element,direction:"vertical"}]},setXY(e,n,r){const{context:i}=this;if(!i.started){const e=Gt.from(i.element,this.dragWithin),n=i.startPageY-globalThis.pageYOffset-i.element.getBoundingClientRect().top;r=e.top+n+this.proxyTopOffset}Gn.setTranslateXY(e,n,r)},ignoreSamePositionDrop:!1,createProxy(e){const r=e.cloneNode(!0),i=document.createElement("div");if(i.classList.add("b-row-reorder-proxy"),r.removeAttribute("id"),r.style.transform="",r.style.width="",i.appendChild(r),n.selectedRecords.length>1){const e=r.cloneNode(!0);e.classList.add("b-row-dragging-multiple"),i.appendChild(e)}return Gn.removeClsGlobally(i,"b-selected","b-hover","b-focused"),i},internalListeners:{beforedragstart:"onBeforeDragStart",dragstart:"onDragStart",drag:"onDrag",drop:"onDrop",reset:"onReset",prio:1e4,thisObj:e}},e.dragHelperConfig),e.relayEvents(e.dragHelper,["beforeDragStart","dragStart","drag","abort"],"gridRow"),n.relayEvents(e.dragHelper,["beforeDragStart","dragStart","drag","abort"],"gridRow"),e.dropIndicator=Gn.createElement({className:"b-row-drop-indicator"}),e.dropOverTargetCls=["b-row-reordering-target","b-hover"]}get targetSubGridElement(){const e=this.grid.regions[0];return this.grid.subGrids[e].element}isElementDraggable(e,n){if(!e.closest(".b-grid-cell .b-widget")){if(!this.gripOnly)return!0;{const r=e.closest(".b-grid-cell:first-child");if(r){const e=getComputedStyle(r,":before"),i=this.grid.rtl?r.getBoundingClientRect().width-n.borderOffsetX:n.borderOffsetX,o=Gn.roundPx(i)<=Gn.roundPx(parseFloat(e.width));return o&&(this.client.preventDragSelect=!0),o}}}}onBeforeDragStart({event:e,source:n,context:r}){const i=this,{grid:o}=i,s=i.targetSubGridElement;if(i.disabled||o.readOnly||o.isTreeGrouped||!s.contains(r.element))return!1;const a=r.startRecord=o.getRecordFromElement(r.element);if(a.readOnly||a.isSpecialRow)return!1;r.originalRowTop=o.rowManager.getRowFor(a).top,o.selectionMode.checkboxOnly||("touch"===n.startEvent.pointerType?o.isSelected(a)||o.selectRow({record:a,addToSelection:!1}):o.isSelected(a)||e.shiftKey||e.ctrlKey||o.selectRow({record:a}));const l=o.selectedRecords.filter((e=>!e.readOnly));return r.records=[a],l.includes(a)&&(r.records.push(...l.filter((e=>e!==a))),r.records.sort(((e,n)=>o.store.indexOf(e)-o.store.indexOf(n)))),!0}onDragStart({context:e}){var n,r;const i=this,{grid:o}=i,{cellEdit:s,cellMenu:a,headerMenu:l}=o.features;s&&(i.cellEditDisabledState=s.disabled,s.disabled=!0),null==(n=null==a?void 0:a.hideContextMenu)||n.call(a,!1),null==(r=null==l?void 0:l.hideContextMenu)||r.call(l,!1),o.element.classList.add("b-row-reordering");const c=e.element.querySelector(".b-focused");null==c||c.classList.remove("b-focused"),e.element.firstElementChild.classList.remove("b-selected","b-hover"),o.bodyContainer.appendChild(i.dropIndicator)}onDrag({context:e,event:n}){var r;const i=this,{grid:o}=i,{store:s,rowManager:a}=o,{clientY:l}=n;let c,d,u,h,g,p=!0,m=a.getRowAt(l);if(m){const e=m.top+o.scrollable.element.getBoundingClientRect().top-o.scrollable.y,r=m.height/4,a=e+r,g=e+m.height/2,p=e+3*r;d=m.dataIndex,c=s.getAt(d),s.tree?h=(c.isParent||i.dropOnLeaf)&&l>a&&l<p:s.isGrouped&&(h=c.isGroupHeader&&c.meta.collapsed),u=!h&&n.clientY>=g}else n.pageY<o._bodyRectangle.y?(d=0,c=s.first,u=!1):(d=s.count-1,c=s.last,u=!0),m=o.rowManager.getRow(d);c!==i.overRecord||i.after!==u||i.over!==h?(i.overRecord!==c&&(null==(r=a.getRowById(i.overRecord))||r.removeCls(i.dropOverTargetCls)),i.overRecord=c,i.after=u,i.over=h,(c===e.startRecord||!u&&!h&&0===d&&s.isGrouped||u&&c.isGroupHeader&&c.meta.collapsed&&s.indexOf(c)===s.count-1)&&(p=!1),s.tree?(g=u?c.nextSibling:c,e.records.some((e=>e.contains(c)))&&(p=!1),e.parent=p&&h?c:c.parent,i.clearTimeout(i.hoverTimer),c&&c.isParent&&!c.isExpanded(s)&&(i.hoverTimer=i.setTimeout((()=>o.expand(c)),i.hoverExpandTimeout))):g=u?s.getAt(d+1):c,m.toggleCls(i.dropOverTargetCls,p&&h),!h&&d===s.indexOf(e.startRecord)+(u?-1:1)&&e.parent&&e.startRecord.parent===e.parent&&(p=!1),m&&Gn.setTranslateY(i.dropIndicator,Math.max(m.top+(u?m.element.getBoundingClientRect().height:0),1)),i.dropIndicator.style.visibility=h?"hidden":"visible",i.dropIndicator.classList.toggle("b-drag-invalid",!p),e.insertBefore=g,e.valid=i.reorderValid=p):e.valid=i.reorderValid}async onDrop(e){const n=this,{client:r}=n,{context:i}=e;if(i.valid=i.valid&&n.reorderValid,i.valid){i.async=!0,r.store.tree&&(i.oldPositionContext=i.records.map((e=>{var n;return{record:e,parentId:null==(n=e.parent)?void 0:n.id,parentIndex:e.parentIndex}})));let o=await n.trigger("gridRowBeforeDropFinalize",e);!1===o&&(i.valid=!1),o=await r.trigger("gridRowBeforeDropFinalize",e),!1===o&&(i.valid=!1),await n.dragHelper.animateProxyTo(n.dropIndicator,{align:"l0-l0"}),await n.finalizeReorder(i)}n.clearTimeout(n.hoverTimer),n.overRecord=n.after=n.over=null,n.trigger("gridRowDrop",e),r.trigger("gridRowDrop",e)}async finalizeReorder(e){var n,r;const i=this,{grid:o}=i,{store:s,focusedCell:a}=o;let{records:l}=e;if(e.valid=e.valid&&!l.some((e=>!s.includes(e))),e.valid){let c;s.tree?(l=l.filter((e=>!e.parent||e.bubbleWhile((e=>!l.includes(e)),!0))),c=await e.parent.tryInsertChild(l,i.over?null==(n=e.parent.children)?void 0:n[0]:e.insertBefore),o.rowManager.forEach((e=>e.removeCls(i.dropOverTargetCls))),!e.parent.isExpanded()&&(null==(r=e.parent.children)?void 0:r.length)&&o.expand(e.parent),e.valid=!1!==c):s.isGrouped&&i.over?s.move(l,s.getAt(s.indexOf(e.insertBefore)+1)):s.move(l,e.insertBefore),(null==a?void 0:a._rowIndex)>=0&&(o._focusedCell=null,o.focusCell({grid:o,record:a.record,columnId:a.columnId})),s.clearSorters()}e.finalize(e.valid),o.element.classList.remove("b-row-reordering")}onReset(){const e=this,{grid:n}=e,r=n.features.cellEdit;n.element.classList.remove("b-row-reordering"),r&&(r.disabled=e.cellEditDisabledState),e.dropIndicator.remove(),Gn.removeClsGlobally(n.element,...e.dropOverTargetCls)}onPaint({firstPaint:e}){e&&this.init()}updateShowGrip(e){this.grid.element.classList.toggle("b-row-reorder-with-grip",e)}};__publicField(Hu,"$name","RowReorder"),__publicField(Hu,"configurable",{showGrip:null,gripOnly:null,hoverExpandTimeout:1e3,touchStartDelay:300,dropOnLeaf:!1,dragHelperConfig:null}),__publicField(Hu,"pluginConfig",{after:["onPaint"]}),Hu.featureClass="",Hu._$name="RowReorder",du.registerFeature(Hu,!1),du.registerFeature(Hu,!0,"Gantt");var Vu=class extends(Delayable_default(sr)){static get $name(){return"Search"}static get configurable(){return{limit:1e3,showHitIndex:!0,keyMap:{F3:"gotoNextHit","Ctrl+g":"gotoNextHit","Shift+F3":"gotoPrevHit","Ctrl+Shift+g":"gotoPrevHit"}}}static get properties(){return{hitCls:"b-search-hit",hitCellCls:"b-search-hit-cell",hitCellBadgeCls:"b-search-hit-cell-badge",hitTextCls:"b-search-hit-text"}}construct(e,n){super.construct(e,n),Object.assign(this,{grid:e,text:"",hitEls:[],treeWalker:e.setupTreeWalker(e.element,Gn.NodeFilter.SHOW_TEXT,(()=>Gn.NodeFilter.FILTER_ACCEPT))}),e.ion({expandNode:"onTreeNodeExpand",thisObj:this})}isActionAvailable(){return Boolean(this.text)}onTreeNodeExpand(){this.text&&this.requestAnimationFrame(this.search,[this.text,!1,!0])}doDestroy(){this.clear(!0),super.doDestroy()}doDisable(e){e&&this.clear(),super.doDisable(e)}get store(){return this.grid.store}static get pluginConfig(){return{chain:["populateCellMenu"]}}async search(e,n=!0,r=!1,i){const o=this;if(!e)return o.clear();if(!r&&e===o.text||o.disabled)return;const{grid:s,store:a}=o,l=s.columns.visibleColumns.filter((e=>!1!==e.searchable)),c=[];i=i||l.map((e=>{var n;return c.push(null==(n=e.formatValue)?void 0:n.bind(e)),e.field}));const d=a.search(e,i,c);a.isTree&&d.length&&await s.expandTo(d.map((e=>e.id)));for(const e of l)if(e.mergeCells&&e.isSorted){let n=null,r=null;for(const i of d)if(i.field===e.field){const e=i.data[i.field];e===n&&(i.belongsTo=r),n=e,r=`${i.field}-${i.id}`}}let u=1;if(Object.assign(o,{foundMap:{},prevFound:o.found,found:d,text:e,findRe:new RegExp(`(\\s+)?(${w.escapeRegExp(String(e))})(\\s+)?`,"ig")}),o.clearHits(),d){for(const e of d)if(o.foundMap[`${e.field}-${e.id}`]=e.belongsTo?o.foundMap[e.belongsTo]:u++,u>o.limit)break;return o.listenersInitialized||(s.rowManager.ion({name:"renderCell",renderCell:"renderCell",thisObj:o}),a.ion({name:"storeRefresh",[`refresh${s.asyncEventSuffix}`]:"onStoreRefresh",thisObj:o}),o.listenersInitialized=!0),s.refreshRows(),s.trigger("search",{grid:s,find:e,found:d}),n&&!o.isHitFocused&&o.gotoNextHit(!0),d}}clearHits(){for(const e of Gn.children(this.grid.element,"."+this.hitCls)){e.classList.remove(this.hitCls,this.hitCellCls);const n=Si.get(e).row;n&&(n.forceInnerHTML=!0,n.renderCell(e),n.forceInnerHTML=!1)}}clear(e=!1){const n=this,{grid:r}=n;n.foundMap&&delete n.foundMap,n.text=null,n.clearHits(),n.listenersInitialized&&(this.detachListeners("renderCell"),this.detachListeners("storeRefresh"),n.listenersInitialized=!1),e||r.trigger("clearSearch",{grid:r})}get foundCount(){var e,n;return null!=(n=null==(e=this.found)?void 0:e.length)?n:0}get isHitFocused(){var e;const n=this,{grid:r}=n,{focusedCell:i}=r;if(null==(e=null==i?void 0:i.cell)?void 0:e.contains(Gn.getActiveElement(r.element))){const{rowIndex:e,column:r}=i;return-1!==e&&n.found.some((n=>n.index===e&&r&&n.field===r.field))}}gotoNextHit(e=!1){var n;const r=this;if(!(null==(n=r.found)?void 0:n.length))return;const{grid:i,store:o}=r,s=i.focusedCell||i.lastFocusedCell,a=s&&!0!==e?o.indexOf(s.record,void 0,!0):-1,l=r.found.findIndex((e=>e.index>a));-1!==l&&r.gotoHit(l)}gotoPrevHit(){var e;const n=this,{store:r}=n;if(!(null==(e=n.found)?void 0:e.length))return;const{grid:i,found:o}=n,s=i.focusedCell||i.lastFocusedCell,a=s?r.indexOf(s.record,void 0,!0):0;for(let e=o.length-1;e--;e>=0){if(o[e].index<a){n.gotoHit(e);break}}}gotoHit(e){const{grid:n}=this,r=this.found[e];return r&&n.focusCell({field:r.field,id:r.id}),Boolean(r)}gotoFirstHit(){this.gotoHit(0)}gotoLastHit(){this.gotoHit(this.found.length-1)}renderCell({cellElement:e,column:n,record:r,value:i}){var o,s;const a=this,{treeWalker:l,findRe:c,hitTextCls:d,showHitIndex:u}=a,h=null==(o=a.foundMap)?void 0:o[n.field+"-"+r.id];if(h){e.classList.add(a.hitCls),u&&(null==(s=e.querySelector(`.${a.hitCellBadgeCls}`))||s.remove());const n=Gn.down(e,".b-grid-cell-value,.b-tree-cell-value")||e;if(String(i).toLowerCase()===String(a.text).toLowerCase())n.innerHTML=`<span class="${a.hitTextCls}">${n.innerHTML}</span>${u?`<div class="${a.hitCellBadgeCls}">${h}</div>`:""}`;else{l.currentNode=n;for(let e=l.nextNode();e&&n.contains(e);){const n=e,r=e.nodeValue,i=["<span>"];e=l.nextNode();let o=c.lastIndex;for(let e=c.exec(r);e;e=c.exec(r)){const n=r.substring(o,e.index),s=e[1]?" ":"",a=e[2],l=e[3]?" ":"";i.push(`${w.encodeHtml(n)}${s}<span class="${d}">${a}</span>${l}`),o=c.lastIndex}i.push(w.encodeHtml(r.substring(o)),"<span>"),n.parentNode.insertBefore(Gn.createElementFromTemplate(i.join(""),{fragment:!0}),n),n.remove()}u&&Gn.createElement({parent:e,className:a.hitCellBadgeCls,text:h})}a.hitEls.push(e)}}populateCellMenu({column:e,record:n,items:r,cellElement:i}){const o=this;e.searchable&&(r.search={text:"L{searchForValue}",localeClass:o,icon:"b-fw-icon b-icon-search",cls:"b-separator",weight:200,disabled:o.disabled,onItem:()=>{let e=globalThis.getSelection().toString();e||(e=i.innerText),o.search(e)}})}onStoreRefresh(){this.search(this.text,!1,!0)}};Vu.featureClass="b-search",Vu._$name="Search",du.registerFeature(Vu);var Nu=class extends sr{static get $name(){return"Sort"}static get configurable(){return{multiSort:!0,prioritizeColumns:!1,toggleOnHeaderClick:!0}}static get properties(){return{ignoreRe:new RegExp(["b-grid-header-resize-handle","b-filter-icon"].join("|")),sortableCls:"b-sortable",sortedCls:"b-sort",sortedAscCls:"b-asc",sortedDescCls:"b-desc"}}construct(e,n){n=this.processConfig(n),this.grid=e,this.bindStore(this.store),super.construct(e,n)}processConfig(e){return"string"==typeof e||Array.isArray(e)?{field:e,ascending:null}:e}setConfig(e){super.setConfig(this.processConfig(e))}bindStore(e){this.detachListeners("store"),e.ion({name:"store",beforeSort:"onStoreBeforeSort",sort:"syncHeaderSortState",thisObj:this})}set field(e){const n=this.grid.columns.get(e);n&&"object"==typeof n.sortable&&(n.sortable.field=n.sortable.property||e,e=n.sortable),this.store.sort(e,this.ascending)}get store(){return this.grid[this.grid.sortFeatureStore]}static get pluginConfig(){return{chain:["onElementClick","populateHeaderMenu","getColumnDragToolbarItems","renderHeader","onPaint","bindStore"]}}syncHeaderSortState(){var e;const n=this,{grid:r}=n;if(!r.hideHeaders&&r.isPainted){const i=n.store.sorters,o=i.length,s=new Xt;let a;for(const l of r.columns.visibleColumns){if(!l.sortable)continue;const r=l.element,c=l.textWrapper,d=null==c?void 0:c.dataset;let u="none";(null==d?void 0:d.sortIndex)&&delete d.sortIndex,s.value=r.classList,!1===l.sortable?(s.remove(n.sortableCls),null==(e=null==c?void 0:c.querySelector(".b-sort-icon"))||e.remove()):((null==c?void 0:c.querySelector(".b-sort-icon"))||Gn.createElement({parent:c,className:"b-sort-icon"}),s.add(n.sortableCls),a=i.find((e=>e.field===l.field||e.sortFn&&e.sortFn===l.sortable.sortFn)),a?(o>1&&d&&(d.sortIndex=i.indexOf(a)+1),s.add(n.sortedCls),a.ascending?(s.add(n.sortedAscCls),s.remove(n.sortedDescCls),u="ascending"):(s.add(n.sortedDescCls),s.remove(n.sortedAscCls),u="descending")):(s.remove(n.sortedCls),s["b-group"]||(s.remove(n.sortedAscCls),s.remove(n.sortedDescCls)))),Gn.syncClassList(r,s),Gn.setAttributes(r,{"aria-sort":u})}}}populateHeaderMenu({column:e,items:n}){const r=this,{store:i}=r,o={...e.sortable,field:e.field,columnOwned:!0};if(!1!==e.sortable&&(n.sortAsc={text:"L{sortAscending}",localeClass:r,icon:"b-fw-icon b-icon-sort-asc",cls:"b-separator",weight:300,disabled:r.disabled,onItem:()=>i.sort(o,!0)},n.sortDesc={text:"L{sortDescending}",localeClass:r,icon:"b-fw-icon b-icon-sort-desc",weight:310,disabled:r.disabled,onItem:()=>i.sort(o,!1)},r.multiSort&&r.grid.columns.records.some((e=>e.sortable)))){const s=i.sorters.find((n=>n.field===e.field||e.sortable.sortFn&&e.sortable.sortFn===n.sortFn));n.multiSort={text:"L{multiSort}",localeClass:r,icon:"b-fw-icon b-icon-sort",weight:320,disabled:r.disabled,menu:{addSortAsc:{text:s?"L{toggleSortAscending}":"L{addSortAscending}",localeClass:r,icon:"b-fw-icon b-icon-sort-asc",disabled:s&&(null==s?void 0:s.ascending),weight:330,onItem:()=>i.addSorter(o,!0)},addSortDesc:{text:s?"L{toggleSortDescending}":"L{addSortDescending}",localeClass:r,icon:"b-fw-icon b-icon-sort-desc",disabled:s&&!s.ascending,weight:340,onItem:()=>i.addSorter(o,!1)},removeSorter:{text:"L{removeSorter}",localeClass:r,icon:"b-fw-icon b-icon-remove",weight:350,disabled:!s,onItem:()=>{i.removeSorter(o.field)}}}}}}getColumnDragToolbarItems(e,n){const r=this,{store:i,disabled:o}=r;if(!1!==e.sortable){const s=i.sorters.find((n=>n.field===e.field));n.push({text:"L{sortAscendingShort}",group:"L{sort}",localeClass:r,icon:"b-icon b-icon-sort-asc",ref:"sortAsc",cls:"b-separator",weight:105,disabled:o,onDrop:({column:e})=>i.sort(e.field,!0)},{text:"L{sortDescendingShort}",group:"L{sort}",localeClass:r,icon:"b-icon b-icon-sort-desc",ref:"sortDesc",weight:105,disabled:o,onDrop:({column:e})=>i.sort(e.field,!1)},{text:"L{addSortAscendingShort}",group:"L{multiSort}",localeClass:r,icon:"b-icon b-icon-sort-asc",ref:"multisortAddAsc",disabled:o||s&&s.ascending,weight:105,onDrop:({column:e})=>i.addSorter(e.field,!0)},{text:"L{addSortDescendingShort}",group:"L{multiSort}",localeClass:r,icon:"b-icon b-icon-sort-desc",ref:"multisortAddDesc",disabled:o||s&&!s.ascending,weight:105,onDrop:({column:e})=>i.addSorter(e.field,!1)},{text:"L{removeSorterShort}",group:"L{multiSort}",localeClass:r,icon:"b-icon b-icon-remove",ref:"multisortRemove",weight:105,disabled:o||!s,onDrop:({column:e})=>i.removeSorter(e.field)})}return n}onStoreBeforeSort({sorters:e}){var n;const{columns:r}=this.client;for(let i=0;i<e.length;i++){const o=e[i],s=(o.columnOwned||this.prioritizeColumns)&&r.get(o.field);(null==(n=null==s?void 0:s.sortable)?void 0:n.sortFn)&&(e[i]={...o,...s.sortable,columnOwned:!0})}}onElementClick(e){const n=this,{store:r}=n,{target:i}=e,o=i.closest(".b-grid-header.b-sortable"),s=null==o?void 0:o.dataset.column;if(!(n.ignoreRe.test(i.className)||n.disabled||e.handled)&&o&&s&&(n.toggleOnHeaderClick||i.closest(".b-sort-icon"))){const i=n.grid.columns.getById(o.dataset.columnId);if(r.isGrouped&&r.groupers.find((e=>e.field===s))&&!e.shiftKey)return;if(i.sortable&&!e.shiftKey)if(e.ctrlKey&&e.altKey)r.removeSorter(i.field);else{const n={columnOwned:!0,field:i.field};"object"==typeof i.sortable&&Et.assign(n,i.sortable),r.sort(n,null,e.ctrlKey)}}}renderHeader(){this.syncHeaderSortState()}onPaint(){this.syncHeaderSortState()}};Nu.featureClass="b-sort",Nu._$name="Sort",du.registerFeature(Nu,!0);var qu=class extends sr{static get $name(){return"StickyCells"}static get defaultConfig(){return{contentSelector:null,currentTopRowCls:"b-sticky-cells-current-top-row"}}static get pluginConfig(){return{before:["renderRows"]}}construct(e,n){super.construct(e,n),e.ion({scroll:"onGridScroll",thisObj:this}),Object.assign(this,Gn.createElement({reference:"element",parent:e.element,className:"b-grid-sticky-row",children:[{reference:"contentElement",className:"b-grid-cell"}]})),this.removeClasses={"b-focused":!1,"b-hover":!1,"b-selected":!1,[this.currentTopRowCls]:!1}}renderRows(){this.element.classList.add("b-hide-visibility")}onGridScroll(){const e=this,{client:n,element:r,contentElement:i}=e,o=Gt.client(n.bodyContainer).roundPx(),s=n.rowManager.getRowAt(o.y),a=s!==e.currentTopRow;if(s){a&&(e.currentTopRow&&(e.currentTopRow.removeCls(e.currentTopRowCls),e.currentTopRow.removeCls("b-not-enough-height")),e.currentTopRow=s,s.addCls(e.currentTopRowCls),i.innerHTML="",i.appendChild(e.updateStickyContent()));const n=e.currentTopRow.bottom-e.client.scrollable.y<=e.stickyContentHeight;e.element.classList[n?"add":"remove"]("b-hide-visibility"),e.currentTopRow[n?"addCls":"removeCls"]("b-not-enough-height"),o.y+=e.stickyContentTop,Gn.alignTo(r,e.stickyEls[0],{align:"t0-t0",constrainTo:o},!0)}e.lastProcessedTopRow=s}updateStickyContent(){const e=this,{currentTopRow:n,removeClasses:r}=e,i={"b-grid-sticky-row":1},o={},s=e.stickyContent||(e.stickyContent=document.createDocumentFragment()),a=e.stickyEls||(e.stickyEls=[]);for(a.forEach((e=>{e.classList.remove("b-sticky-content-el")})),a.length=0,n.eachElement((n=>{a.push(...n.querySelectorAll(e.contentSelector))}));s.firstChild;)s.remove(s.firstChild);return e.stickyContentHeight=0,e.stickyContentTop=0,a.map((n=>{n.closest(".b-grid-cell").classList.forEach((e=>o[e]=1)),n.closest(".b-grid-row").classList.forEach((e=>i[e]=1)),Object.assign(o,r),Object.assign(i,r);const a=n.offsetTop;e.stickyContentTop=Math.max(e.stickyContentTop,a),n.style.alignSelf="flex-end",e.stickyContentHeight=Math.max(e.stickyContentHeight,e.currentTopRow.height-n.offsetTop+a),n.style.alignSelf="";const l=n.cloneNode(!0);return n.classList.add("b-sticky-content-el"),s.appendChild(l),l})),o["b-focused"]=!1,Gn.syncClassList(e.contentElement,o),Gn.syncClassList(e.element,i),s}};qu._$name="StickyCells",du.registerFeature(qu,!1);var Wu=class extends sr{static get $name(){return"Stripe"}construct(e,n){super.construct(e,n),e.ion({renderrow:"onRenderRow",thisObj:this})}doDisable(e){this.isConfiguring||this.client.refreshRows(),super.doDisable(e)}onRenderRow({row:e}){const{disabled:n}=this,r=e.dataIndex%2==0;e.assignCls({"b-even":!n&&r,"b-odd":!n&&!r})}};Wu._$name="Stripe",du.registerFeature(Wu);var Uu=class extends(SummaryFormatter_default(sr)){static get configurable(){return{selectedOnly:null,hideFooters:!1}}static get pluginConfig(){return{chain:["renderRows","bindStore"]}}static get $name(){return"Summary"}construct(e,n){this.grid=e,super.construct(e,n),this.bindStore(e.store),e.hideFooters=this.hideFooters}bindStore(e){this.detachListeners("store"),e.ion({name:"store",change:"onStoreChange",thisObj:this})}get store(){return this.grid.store}doDestroy(){super.doDestroy()}doDisable(e){super.doDisable(e);const{client:n}=this;e?n.element.classList.add("b-summary-disabled"):(this.updateSummaries(),n.element.classList.remove("b-summary-disabled"),n.eachSubGrid((e=>e.scrollable.syncPartners())))}renderRows(){this.updateSummaries()}updateSummaries(){const e=this,{grid:n,store:r}=e,i=Gn.children(n.element,".b-grid-footer"),o=e.selectedOnly&&n.selectedRecords.length>0,s=(r.isFiltered?r.storage.values:r.allRecords).filter((e=>!e.isSpecialRow&&(!o||n.isSelected(e))));n.columns.forEach((e=>{var n;null==(n=e.summaries)||n.forEach((e=>{"seed"in e&&("initialSeed"in e||(e.initialSeed=e.seed),["number","string","date"].includes(typeof e.initialSeed)?e.seed=e.initialSeed:e.seed=Object.assign({},e.initialSeed))}))})),i.forEach((r=>{if(!r.dataset.column)return;const i=n.columns.get(r.dataset.column),o=e.generateHtml(i,s,"b-grid-footer-summary");(i.summaries?i.summaries.length:!!i.sum)&&(r.children.length?Gn.sync(o,r.firstElementChild):r.innerHTML=o)}))}onStoreChange({action:e,changes:n}){let r=!0;this.disabled||("update"===e&&(r=Object.keys(n).some((e=>{const n=this.grid.columns.get(e);return Boolean(n)&&(Boolean(n.sum)||Boolean(n.summaries))}))),r&&this.updateSummaries())}updateSelectedOnly(e){const n=this;n.detachListeners("selectionChange"),e&&n.grid.ion({name:"selectionChange",selectionChange:n.refresh,thisObj:n}),n.refresh()}refresh(){this.updateSummaries()}};Uu.featureClass="b-summary",Uu._$name="Summary",du.registerFeature(Uu);var Gu=Promise.resolve(),Yu=class extends(sr.mixin(Delayable_default)){static get pluginConfig(){return{assign:["collapseAll","expandAll","collapse","expand","expandTo","toggleCollapse"],chain:["onElementPointerUp","onElementClick","bindStore"]}}construct(e,n){super.construct(e,n),this.treeColumn||console.info("To use the tree feature, one column should be configured with `type: 'tree'`"),e.store&&this.bindStore(e.store)}doDisable(e){if(e)throw new Error("Tree feature cannot be disabled")}get store(){return this.client.store}get treeColumn(){const e=this,{columns:n}=e.client;return e._treeColumn&&n.includes(e._treeColumn)||(e._treeColumn=n.find((e=>e.isTreeColumn))),e._treeColumn}bindStore(e){this.detachListeners("store"),e.ion({name:"store",beforeLoadChildren:"onBeforeLoadChildren",loadChildren:"onLoadChildren",loadChildrenException:"onLoadChildrenException",beforeToggleNode:"onBeforeToggleNode",thisObj:this})}async toggleCollapse(e,n){if(null==e)throw new Error("Tree#toggleCollapse must be passed a record");const r=this,{store:i,client:o}=r,{rowManager:s}=o,a=i.getById(e),l=a.instanceMeta(i);if(await i.toggleCollapse(a,n)){const e=s.getRowFor(a);if(e&&a.ancestorsExpanded()){const n=r.treeColumn&&!r.treeColumn.subGrid.collapsed&&e.getCell(r.treeColumn.id);n&&e.renderCell(n)}r.isTogglingNode||(o.element.classList.add("b-toggling-node"),r.isTogglingNode=!0,r.requestAnimationFrame((()=>{o.element.classList.remove("b-toggling-node"),r.isTogglingNode=!1}))),o.trigger(l.collapsed?"collapseNode":"expandNode",{record:a}),o.trigger("toggleNode",{record:a,collapse:l.collapsed})}}async collapse(e){return this.toggleCollapse(e,!0)}async expand(e){return this.toggleCollapse(e,!1)}onBeforeToggleNode({record:e,collapse:n}){this.client.trigger("beforeToggleNode",{record:e,collapse:n})}onBeforeLoadChildren({source:e,params:n}){const r=e.getById(n[e.modelClass.idField]),i=this.client.rowManager.getRowFor(r);null==i||i.addCls("b-loading-children")}onLoadChildren({source:e,params:n}){const r=e.getById(n[e.modelClass.idField]),i=this.client.rowManager.getRowFor(r);null==i||i.removeCls("b-loading-children")}onLoadChildrenException({record:e}){const n=this.client.rowManager.getRowFor(e);null==n||n.removeCls("b-loading-children")}async expandOrCollapseAll(e=!0,n=this.store.rootNode){const{client:r,store:i}=this,o=[],s=[];return r.trigger("beforeToggleAllNodes",{collapse:e}),i.suspendEvents(),i.traverse((n=>{const r=n.instanceMeta(i);n.isLeaf||(e&&!r.collapsed?(this.toggleCollapse(n,!0),s.push(...n.children)):!e&&r.collapsed&&(Array.isArray(n.children)&&s.push(...n.children),o.push(this.toggleCollapse(n,!1))))}),n,n===i.rootNode),i.resumeEvents(),(e?Gu:Promise.all(o)).then((()=>{r.refreshRows(e),s.length&&(e?i.trigger("remove",{records:s,isCollapse:!0,isCollapseAll:!0}):i.trigger("add",{records:s,isExpand:!0,isExpandAll:!0})),r.trigger("toggleAllNodes",{collapse:e})}))}async collapseAll(){return this.expandOrCollapseAll(!0)}async expandAll(){return this.expandOrCollapseAll(!1)}async expandTo(e,n=!0){var r,i,o,s;const a=this,{store:l,client:c}=a;if(Array.isArray(e)){if(e.length>0){c.suspendRefresh();for(let n=e.length-1;n>=0;n--){const o=l.getById(e[n]);0===n&&(null==(r=c.resumeRefresh)||r.call(c),c.rowManager.refresh()),await(null==(i=a.expandTo)?void 0:i.call(a,o,0===n))}}return}const d=l.getById(e);if(!1!==d.instanceMeta(a.store).hiddenByCollapse){if(!d.ancestorsExpanded()){const e=[];for(let n=d.parent;n&&!n.isRoot;n=n.parent)n.isExpanded(l)||e.unshift(n);c.suspendRefresh();for(const n of e)a.isDestroyed||await a.toggleCollapse(n,!1);null==(o=c.resumeRefresh)||o.call(c),null==(s=c.refreshRows)||s.call(c)}!a.isDestroyed&&n&&await c.scrollRowIntoView(d)}}onElementPointerUp(e){const n=this,r=e.target,i=n.client.getCellDataFromEvent(e);(r.closest(".b-tree-expander")||n.expandOnCellClick&&(null==i?void 0:i.record.isParent))&&n.toggleCollapse(i.record)}onElementClick(e){e.target.closest(".b-tree-expander")&&e.preventDefault()}toggleCollapseByKey(){const{focusedCell:e}=this.client;return(null==e?void 0:e.rowIndex)>-1&&!e.isActionable&&(this.toggleCollapse(e.id),!0)}expandIfSingleColumn(){return 1===this.client.columns.count&&this.expandByKey()}expandByKey(){const e=this,{client:n}=e,{focusedCell:r}=n,i=null==r?void 0:r.record;return!!(i&&(null==r?void 0:r.column.tree)&&i.isParent&&i.instanceMeta(n.store).collapsed)&&(e.expand(i),!0)}collapseIfSingleColumn(){return 1===this.client.columns.count&&this.collapseByKey()}collapseByKey(){const e=this,{client:n}=e,{focusedCell:r}=n,i=null==r?void 0:r.record;if((null==r?void 0:r.column.tree)&&i){if(i.isParent&&!i.instanceMeta(n.store).collapsed)return e.collapse(i),!0;if(i.parent&&!i.parent.isRoot)return n.deselectAll(),n.focusCell({record:i.parent,column:r.column}),!0}return!1}};__publicField(Yu,"$name","Tree"),__publicField(Yu,"configurable",{expandOnCellClick:!1,keyMap:{" ":"toggleCollapseByKey",ArrowRight:"expandIfSingleColumn","Shift+ArrowRight":"expandByKey",ArrowLeft:"collapseIfSingleColumn","Shift+ArrowLeft":"collapseByKey"}}),Yu.featureClass="b-tree",Yu._$name="Tree",du.registerFeature(Yu,!1,"Grid"),du.registerFeature(Yu,!0,"TreeGrid");var Ku=class extends sr{construct(e,n){if(super.construct(e,n),!e.hasFeature("tree"))throw new Error("The TreeGroup feature requires the Tree feature to be enabled")}processParentData(e){this.parentCls&&(e.cls=this.parentCls)}processTransformedData(e){}async waitForReadiness(){if(this.originalStore.isLoading&&(await this.originalStore.await("load",!1),this.isDestroyed))return;const{crudManager:e}=this.client;if(e){if((e.isLoadingOrSyncing||e._autoLoadPromise)&&(await e.await("requestDone"),this.isDestroyed))return;await this.client.project.commitAsync()}}async applyLevels(e){var n;const r=this,{client:i}=r,o=i.columns.find((e=>e instanceof ru));let{store:s}=i,a=null;if(r._levels=e,r.isApplying++,i.suspendRefresh(),e&&!r.originalStore&&(r.originalStore=s,s=new s.constructor({tree:!0,modelClass:s.modelClass,load:null==(n=s.load)?void 0:n.bind(s),commit:s.commit.bind(s)}),i.store=s,r.originalStore.ion({name:"originalStore",refresh:r.onOriginalStoreRefresh,add:r.onOriginalStoreChanged,remove:r.onOriginalStoreChanged,removeAll:r.onOriginalStoreChanged,thisObj:r})),await r.waitForReadiness(),!r.isDestroyed)return e?(s.data=r.originalStore.allRecords.flatMap((e=>e.isLeaf?[e.link()]:[])),a=s.treeify(e,(e=>{Et.setPath(e,s.modelClass.getFieldDataSource(o.field),e.key),r.processParentData(e)})),r.processTransformedData(a),s.data=a.children):(i.store=r.originalStore,r.detachListeners("originalStore"),r.originalStore=null),r.isApplying--,i.resumeRefresh(),i.rowManager.reinitialize(),a}onOriginalStoreChanged(){this.applyLevels(this._levels)}onOriginalStoreRefresh({action:e}){"dataset"===e&&this.applyLevels(this.levels)}updateLevels(e){!e&&this.isConfiguring||this.applyLevels(e)}async group(e){Et.assertArray(e,"group()"),await this.applyLevels(e)}async clearGroups(){this.isGrouped&&await this.applyLevels(null)}get isGrouped(){return Boolean(this._levels)}};__publicField(Ku,"$name","TreeGroup"),__publicField(Ku,"configurable",{levels:null,parentCls:"b-generated-parent"}),__publicField(Ku,"pluginConfig",{assign:["group","clearGroups"]}),__publicField(Ku,"properties",{isApplying:0,originalStore:null}),Ku._$name="TreeGroup",du.registerFeature(Ku);var Xu={all:"all",visible:"visible"},Zu={A6:{width:4.11,height:5.81},A5:{width:5.81,height:8.25},A4:{width:8.25,height:11.69},A3:{width:11.69,height:16.49},Legal:{width:8.5,height:14},Letter:{width:8.5,height:11}},Qu={portrait:"portrait",landscape:"landscape"},Ju={pdf:"pdf",png:"png"},eh={pdf:"application/pdf",png:"image/png"},th=class extends Mc{static get $name(){return"ExportRowsCombo"}static get type(){return"exportrowscombo"}static get defaultConfig(){return{editable:!1}}buildItems(){return[{id:Xu.all,text:this.L("L{all}")},{id:Xu.visible,text:this.L("L{visible}")}]}};th.initClass(),th._$name="ExportRowsCombo";var nh=class extends Mc{static get $name(){return"ExportOrientationCombo"}static get type(){return"exportorientationcombo"}static get defaultConfig(){return{editable:!1}}buildItems(){return[{id:Qu.portrait,text:this.L("L{portrait}")},{id:Qu.landscape,text:this.L("L{landscape}")}]}};function buildComboItems(e,n=(e=>e)){return Object.keys(e).map((e=>({id:e,text:n(e)})))}nh.initClass(),nh._$name="ExportOrientationCombo";var rh=class extends _a{static get $name(){return"ExportDialog"}static get type(){return"exportdialog"}static get configurable(){return{autoShow:!1,autoClose:!1,closable:!0,centered:!0,client:null,autoSelectVisibleColumns:!0,hidePNGMultipageOption:!0,title:"L{exportSettings}",maxHeight:"80%",scrollable:{overflowY:!0},defaults:{localeClass:this},items:{columnsField:{type:"combo",label:"L{ExportDialog.columns}",store:{},valueField:"id",displayField:"text",multiSelect:!0,weight:100,maxHeight:100},rowsRangeField:{type:"exportrowscombo",label:"L{ExportDialog.rows}",value:"all",weight:200},exporterTypeField:{type:"combo",label:"L{ExportDialog.exporterType}",editable:!1,value:"singlepage",displayField:"text",buildItems(){const e=this.parent;return e.exporters.map((n=>({id:n.type,text:e.optionalL(n.title,this)})))},onChange({value:e}){this.owner.widgetMap.alignRowsField.hidden="singlepage"===e,this.owner.widgetMap.repeatHeaderField.hidden="multipagevertical"!==e},weight:300},alignRowsField:{type:"checkbox",label:"L{ExportDialog.alignRows}",checked:!1,hidden:!0,weight:400},repeatHeaderField:{type:"checkbox",label:"L{ExportDialog.repeatHeader}",localeClass:this,hidden:!0,weight:500},fileFormatField:{type:"combo",label:"L{ExportDialog.fileFormat}",localeClass:this,editable:!1,value:"pdf",items:[],onChange({value:e,oldValue:n}){const r=this.parent;if(r.hidePNGMultipageOption){const i=r.widgetMap.exporterTypeField,o=i.store.find((e=>"singlepage"===e.id));e===Ju.png&&o?(this._previousDisabled=i.disabled,i.disabled=!0,this._previousValue=i.value,i.value="singlepage"):n===Ju.png&&this._previousValue&&(i.disabled=this._previousDisabled,i.value=this._previousValue)}},weight:600},paperFormatField:{type:"combo",label:"L{ExportDialog.paperFormat}",editable:!1,value:"A4",items:[],weight:700},orientationField:{type:"exportorientationcombo",label:"L{ExportDialog.orientation}",value:"portrait",weight:800}},bbar:{defaults:{localeClass:this},items:{exportButton:{color:"b-green",text:"L{ExportDialog.export}",weight:100,onClick:"up.onExportClick"},cancelButton:{color:"b-gray",text:"L{ExportDialog.cancel}",weight:200,onClick:"up.onCancelClick"}}}}}construct(e={}){const n=this,{client:r}=e;if(!r)throw new Error("`client` config is required");n.columnsStore=r.columns.chain((e=>e.isLeaf&&e.exportable),null,{excludeCollapsedRecords:!1}),n.applyInitialValues(e),super.construct(e),Le.ion({locale:"onLocaleChange",prio:-1,thisObj:n})}applyInitialValues(e){const n=this,r=e.items=e.items||{};e.width=e.width||n.L("L{width}"),e.defaults=e.defaults||{},e.defaults.labelWidth=e.defaults.labelWidth||n.L("L{ExportDialog.labelWidth}"),r.columnsField=r.columnsField||{},r.fileFormatField=r.fileFormatField||{},r.paperFormatField=r.paperFormatField||{},r.fileFormatField.items=buildComboItems(Ju,(e=>e.toUpperCase())),r.paperFormatField.items=buildComboItems(Zu),r.columnsField.store=n.columnsStore}onBeforeShow(){var e;const{columnsField:n,alignRowsField:r,exporterTypeField:i,repeatHeaderField:o}=this.widgetMap;this.autoSelectVisibleColumns&&(n.value=this.columnsStore.query((e=>!e.hidden))),r.hidden="singlepage"===i.value,o.hidden="multipagevertical"!==i.value,null==(e=super.onBeforeShow)||e.call(this,...arguments)}onLocaleChange(){const e=this.L("L{labelWidth}");this.width=this.L("L{width}"),this.eachWidget((n=>{n instanceof Cc&&(n.labelWidth=e)}))}onExportClick(){const e=this.values;this.trigger("export",{values:e})}onCancelClick(){this.trigger("cancel"),this.hide()}get values(){const e=/field/i,n={};return this.eachWidget((r=>{e.test(r.ref)&&(n[r.ref.replace(e,"")]=r instanceof _c?r.checked:r.value)})),n}};rh.initClass(),rh._$name="ExportDialog";var ih=document.createRange(),oh=class extends re{static get configurable(){return{cls:{$config:{equal:(e,n)=>(null==e?void 0:e.isDomClassList)&&(null==n?void 0:n.isDomClassList)&&e.isEqual(n)}}}}construct(e){Object.assign(this,{_elements:{},_elementsArray:[],_cells:{},_allCells:[],_regions:[],lastHeight:0,lastTop:-1,_dataIndex:0,_top:0,_height:0,_id:null,forceInnerHTML:!1,isGroupFooter:!1,cellContext:new Bd({grid:e.grid,id:null,columnIndex:0})}),super.construct(e),"position"===this.grid.positionMode&&(this.translateElements=this.positionElements)}doDestroy(){const e=this;e.rowManager.isDestroying||(e.removeElements(),e.rowManager.idMap[e.id]===e&&delete e.rowManager.idMap[e.id]),super.doDestroy()}get index(){return this._index}set index(e){this._index=e}get dataIndex(){return this._dataIndex}set dataIndex(e){this._dataIndex!==e&&(this._dataIndex=e,this.eachElement((n=>{n.dataset.index=e,n.ariaRowIndex=this.grid.hideHeaders?e+1:e+2})))}get id(){return this._id}set id(e){const n=this,r={id:e},i=n.rowManager.idMap;n._id===e&&i[e]===n||(i[n._id]===n&&delete i[n._id],i[e]=n,n._id=e,n.eachElement((n=>{Si.assign(n,r),n.dataset.id=e})),n.eachCell((e=>Si.assign(e,r))))}addElement(e,n){const r=this;let i=n.firstElementChild;for(r._elements[e]=n,r._elementsArray.push(n),r._regions.push(e),Si.assign(n,{index:r.index}),r._cells[e]=[];i;)r._cells[e].push(i),r._allCells.push(i),Si.set(i,{column:i.dataset.column,columnId:i.dataset.columnId,rowElement:i.parentNode,row:r}),i=i.nextElementSibling;n.dataset.index=r.index,n.ariaRowIndex=r.grid.hideHeaders?r.index+1:r.index+2}getElement(e){return this._elements[e]}getRectangle(e){return Gt.from(this.getElement(e))}eachElement(e){this._elementsArray.forEach(e)}eachCell(e){this._allCells.forEach(e)}get elements(){return this._elements}get element(){const e=Object.keys(this._elements)[0];return this._elements[e]}get cells(){return this._allCells}getCells(e){return this._cells[e]}getCell(e,n=!1){return this._allCells.find((r=>{const i=Si.get(r);return i.columnId==e||!n&&i.column==e}))}removeElements(e=!1){const n=this;n.rowManager.trigger("removeRow",{row:n}),e||n.eachElement((e=>e.remove())),n._elements={},n._cells={},n._elementsArray.length=n._regions.length=n._allCells.length=n.lastHeight=n.height=0,n.lastTop=-1}get height(){return this._height}set height(e){this._height=e}get offsetHeight(){return this.height+this.grid._rowBorderHeight}updateElementsHeight(e){const n=this;e||n.rowManager.storeKnownHeight(n.id,n.height),n.lastHeight!==n.height&&(this.eachElement((e=>e.style.height=`${n.offsetHeight}px`)),n.lastHeight=n.height)}addCls(e){this.updateCls(this.cls.add(e))}removeCls(e){this.updateCls(this.cls.remove(e))}toggleCls(e,n){this.updateCls(this.cls[n?"add":"remove"](e))}assignCls(e){this.updateCls(this.cls.assign(e))}changeCls(e){return(null==e?void 0:e.isDomClassList)?e:new Xt(e)}updateCls(e){this.eachElement((n=>Gn.syncClassList(n,e)))}setAttribute(e,n){this.eachElement((r=>r.setAttribute(e,n)))}removeAttribute(e){this.eachElement((n=>n.removeAttribute(e)))}get isFirst(){return 0===this.dataIndex}get top(){return this._top}get bottom(){return this._top+this._height+this.grid._rowBorderHeight}setTop(e,n){this._top!==e&&(this._top=e,this.translateElements(n))}setBottom(e,n){this.setTop(e-this.offsetHeight,n)}translate(e,n=!1){return this.setTop(e,n),e+this.offsetHeight}translateElements(e){const n=this,{top:r,_elementsArray:i}=n;if(n.lastTop!==r){for(let e=0,{length:n}=i;e<n;e++)i[e].style.transform=`translate(0,${r}px)`;!e&&n.rowManager.trigger("translateRow",{row:n}),n.lastTop=r}}positionElements(e){const n=this,{top:r,_elementsArray:i}=n;if(n.lastTop!==r){for(let e=0,{length:n}=i;e<n;e++)i[e].style.top=`${r}px`;!e&&n.rowManager.trigger("translateRow",{row:n}),n.lastTop=r}}offset(e){let n=this._top+e;return n<0&&(e-=n,n=0),this.setTop(n),e}render(e,n,r=!0,i=!1,o=!1){var s,a,l;const c=this,{cellContext:d,cls:u,elements:h,grid:g,rowManager:p,height:m,_id:f}=c,b=Si.get(c._elementsArray[0]),v=p._rowHeight,{store:y}=g,{isTree:w}=y;let C,S=0;if(n||!1===n||(n=g.store.getById(b.id),e=g.store.indexOf(n)),!n)return;const x=null==n?void 0:n.cls,D=x?x.isDomClassList?x:new Xt(x):null;u.assign({"b-grid-row-updating":r&&g.transitionDuration&&!o,"b-selected":g.isSelected(null==n?void 0:n.id),"b-readonly":n.readOnly,"b-linked":n.isLinked,"b-original":n.hasLinks}),c.lastRecordCls&&u.remove(c.lastRecordCls),D?(u.add(D),c.lastRecordCls=Object.assign({},D)):c.lastRecordCls=null,p.trigger("beforeRenderRow",{row:c,record:n,recordIndex:e,oldId:f}),g.beforeRenderRow({row:c,record:n,recordIndex:e,oldId:f}),c.updateCls(u),r&&g.transitionDuration&&!o&&g.setTimeout((()=>{c.isDestroyed||(u.remove("b-grid-row-updating"),c.updateCls(u))}),g.transitionDuration),c.id=n.id,c.dataIndex=e;const E=!g.fixedRowHeight&&g.getRowHeight(n)||v;let R=c.maxRequestedHeight=null;if(w)for(const e in h){const r=h[e];r.id=`${g.id}-${e}-${c.id}`,Gn.setAttributes(r,{"aria-level":n.childLevel+1,"aria-setsize":n.parent.children.length,"aria-posinset":n.parentIndex+1}),n.isExpanded(y)?Gn.setAttributes(r,{"aria-expanded":!0,"aria-owns":(null==(s=n.children)?void 0:s.length)?null==(a=n.children)?void 0:a.map((n=>`${g.id}-${e}-${n.id}`)).join(" "):null}):(n.isLeaf?r.removeAttribute("aria-expanded"):r.setAttribute("aria-expanded",!1),r.removeAttribute("aria-owns"))}for(d._record=n,d._id=n.id,d._rowIndex=e,S=0;S<g.columns.visibleColumns.length;S++){const e=g.columns.visibleColumns[S];d._columnId=e.id,d._column=e,d._columnIndex=S,d._cell=c.getCell(e.id,!0),d.height=E,d.maxRequestedHeight=R,d.updatingSingleRow=r,C=c.renderCell(d),p.fixedRowHeight||null!=C.height&&(R=Math.max(R,C.height),C.transient||(c.maxRequestedHeight=R))}const k=null!=R?R:E;c.height=null!=(l=g.processRowHeight(n,k))?l:k,c.updateElementsHeight(o),r&&!o&&(m!==c.height&&p.translateFromRow(c,i),p.trigger("updateRow",{row:c,record:n,recordIndex:e,oldId:f}),p.trigger("renderDone")),g.afterRenderRow({row:c,record:n,recordIndex:e,oldId:f,oldHeight:m,isExport:o}),p.trigger("renderRow",{row:c,record:n,recordIndex:e,oldId:f,isExport:o}),m&&c.height!==m&&p.trigger("rowRowHeight",{row:c,record:n,height:c.height,oldHeight:m}),c.forceInnerHTML=!1}renderCell(e){var n,r,i,o;e.isLocation||(e=new Bd(e));let{cell:s,record:a}=e;const l=this,{grid:c,column:d,height:u,maxRequestedHeight:h,updatingSingleRow:g=!0,isMeasuring:p=!1}=e,m=null==(n=c.features)?void 0:n.cellEdit,f=Si.get(s),b=f.rowElement,v=Si.get(b);if(!a&&(a=e._record=c.store.getById(v.id),!a))return;let y=d.getRawValue(a);const w=a.fieldMap[d.field],C={configuredHeight:u,height:null,maxRequestedHeight:h},S=d.getCellClass(e),x={cellElement:s,dataField:w,rowElement:b,value:y,record:a,column:d,size:C,grid:c,row:f.row,updatingSingleRow:g,isMeasuring:p},D=d.renderer||d.defaultRenderer;c.beforeRenderCell(x),x.cellElement!==s&&(s=x.cellElement),Gn.syncClassList(s,S);let E=!0;D?(y=d.callback(D,d,[x]),void 0===y&&!1===d.alwaysClearCell&&(E=!1)):w&&(y=w.print(y));const R=null==(r=c.hasFrameworkRenderer)?void 0:r.call(c,{cellContent:y,column:d});R&&a.isSpecialRow&&(y="");const k=R&&!d.data.tree&&!a.isSpecialRow;if(E&&!k){let n=s;(null==(i=null==m?void 0:m.editorContext)?void 0:i.equals(e))&&!m.editor.isFinishing&&(n=l.moveContentFromCell(s,m.editor.element));const r=null!=y&&"object"==typeof y,o="string"==typeof y,a=r||null==y?"":String(y);if(l.forceInnerHTML&&(n.innerHTML="",delete n._content,s.lastDomConfig=null),r||!d.htmlEncode||d.disableHtmlEncode?!d.autoSyncHtml||o&&!Gn.getChildElementCount(n)?r?$o.sync({targetElement:n,domConfig:{onlyChildren:!0,children:oe.asArray(y)}}):n._content!==a&&(n.innerHTML=n._content=a):o?Gn.sync(a,n.firstElementChild):r&&$o.sync({domConfig:y,targetElement:n}):s._hasHtml?(n.innerText=a,s._hasHtml=!1):Gn.setInnerText(n,a),n!==s){const{firstChild:e}=s;for(const r of n.childNodes)s.insertBefore(r,e)}}return a.isSpecialRow||null==(o=c.processCellContent)||o.call(c,{cellElementData:f,rendererData:x,rendererHtml:x.rendererHtml||y}),d.autoHeight&&null==C.height&&(s.classList.add("b-measuring-auto-height"),C.height=Math.max(s.offsetHeight,c.rowHeight),s.classList.remove("b-measuring-auto-height")),p||l.rowManager.trigger("renderCell",x),C}moveContentFromCell(e,n){ih.setStart(e,0),ih.setEndBefore(n);const r=document.createElement("div");return r.appendChild(ih.extractContents()),r}};__publicField(oh,"$name","Row"),oh.initClass(),oh._$name="Row";var sh=class extends(Delayable_default(Events_default(Localizable_default(re)))){static get defaultConfig(){return{translateURLsToAbsolute:!0,keepPathName:!0,filterStyles:e=>e}}pageTpl(e){const{title:n,header:r,footer:i,styles:o,htmlClasses:s,bodyStyle:a,bodyClasses:l=[],paperHeight:d,paperWidth:u,html:h}=e;return l.push(`b-${this.constructor.type}`),Gn.scrollBarWidth?l.push("b-visible-scrollbar"):l.push("b-overlay-scrollbar"),c.isChrome?l.push("b-chrome"):c.isSafari?l.push("b-safari"):c.isFirefox&&l.push("b-firefox"),rl.tpl`
            <!DOCTYPE html>
            <html class="${s}" style="width: ${u}in; height: ${d}in;">
                <head>
                    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
                    <title>${n}</title>
                    ${o.join("")}
                </head>
                <body class="b-export ${l.join(" ")}" style="width: ${u}in; height: ${d}in; ${a}">
                    <div class="b-export-content">
                        ${r&&`<div class="b-export-header" style="width: 100%">${r}</div>`}
                        <div class="b-export-body"><div class="b-export-viewport">${h}</div></div>
                        ${i&&`<div class="b-export-footer" style="width: 100%">${i}</div>`}
                    </div>
                </body>
            </html>`}get stylesheets(){const e=this;if(e._stylesheets)return e._stylesheets;const n=e.translateURLsToAbsolute,r=globalThis.origin,i=Array.from(document.querySelectorAll('link[rel="stylesheet"], style')),o=[];return i.forEach((i=>{if(i=i.cloneNode(!0),n&&i.href){let e;e=!0===n?i.href:this.keepPathName?i.href.replace(r,n):new URL(i.getAttribute("href"),n),i.setAttribute("href",e)}let s=i.outerHTML;if(n&&/style/i.test(i.tagName)){const r=e.getStyleTagURLConverter(n);s=s.replace(/url\(['"]?(.+?)['"]?\)/g,r)}o.push(s)})),o.push("<style>\n                body, html {\n                    overflow: auto;\n                }\n                body {\n                    position: relative;\n                    margin: 0;\n                }\n            </style>"),e._stylesheets=e.filterStyles(o)}set stylesheets(e){this._stylesheets=e?this.filterStyles(e):e}getStyleTagURLConverter(e){return function(n,r){let i;try{let o;/^#/.test(r)?i=n:(o=!0===e?globalThis.location.href:this.keepPathName?globalThis.location.href.replace(globalThis.location.origin,e):e,i=`url('${new URL(r,o).href}')`)}catch(e){i=n}return i}.bind(this)}saveState({client:e}){this.state=e.state}async restoreState({client:e}){const n=[],r=new Set;r.add(e.scrollable.ion({scroll(){n.push(e.scrollable.await("scrollEnd"))}})),e.eachSubGrid((({header:e,scrollable:i})=>{r.add(i.ion({scroll(){n.push(i.await("scrollEnd"))}})),r.add(e.scrollable.ion({scroll(){n.push(e.scrollable.await("scrollEnd"))}}))})),e.state=this.state,await Promise.all(n),r.forEach((e=>e()))}beforeExport(){this.element=document.createElement("div")}cloneElement(e,n=this.element,r=!0){r&&(n.innerHTML=""),n.appendChild(e.cloneNode(!0)),Gn.removeEachSelector(n,".b-grid-row,.b-grid-merged-cells-container");const i=n.querySelector(".b-gridbase > .b-mask");i&&i.remove()}createPlaceholder(e,n=!0,r={}){return n&&(e.innerHTML=""),Gn.createElement(Object.assign({parent:e,id:Jr.generateId("export")},r))}prepareElement({client:e}){const{tbar:n,bbar:r}=e;n&&this.element.querySelector(`#${n.id}`).remove(),r&&this.element.querySelector(`#${r.id}`).remove()}measureElement(e=""){e instanceof HTMLElement&&(e=e.outerHTML);const n=Gn.createElement({parent:document.body,style:{visibility:"hidden",position:"absolute"},html:`<div style="height: 1px"></div>${e}<div style="height: 1px"></div>`}),r=n.offsetHeight-2;return n.remove(),r}prepareHTML(e){e instanceof HTMLElement&&(e=e.outerHTML);const n=Gn.createElement({parent:document.body,style:{visibility:"hidden",position:"absolute"},html:e}),r=n.querySelectorAll("img");for(let e=0,n=r.length;e<n;e++)r[e].setAttribute("src",r[e].src);const i=n.innerHTML;return n.remove(),i}getVirtualScrollerHeight(e){let n=0;return e.eachSubGrid((e=>{e.overflowingHorizontally&&(n=Gn.scrollBarWidth)})),0===n?n:n+1}inchToPx(e){return 96*e}getScaleValue(e,n){return Math.floor(1e4*e/n)/1e4}getVisibleRowsCount(e){const n=e.rowManager,r=n.rows.indexOf(n.firstVisibleRow),i=n.rows.indexOf(n.lastVisibleRow);let o;return o=-1!==r?-1===i?e.store.count-r:i-r+1:e.store.count,o}async export(e){const n=this;let r;n.beforeExport(),n.saveState(e),await n.prepareComponent(e);try{r=await n.getPages(e)}finally{await n.restoreComponent(e),n.stylesheets=null,await new Promise((e=>n.requestAnimationFrame(e))),await n.restoreState(e)}return r}async getPages(e){const n=this.pagesExtractor(e),r=[];let i;for(;(i=await n.next())&&!i.done;)r.push(i.value);return r}adjustRowBuffer(e){const{contentHeight:n}=this.exportMeta,{rowManager:r}=e;this.oldRowManagerConfig={prependRowBuffer:r.prependRowBuffer,appendRowBuffer:r.appendRowBuffer};const i=Math.ceil(n/r.rowOffsetHeight);r.prependRowBuffer=i,r.appendRowBuffer=i,e.renderRows(),e.rowManager.jumpToPosition(e.scrollable.y)}restoreRowBuffer(e){e.rowManager.prependRowBuffer=this.oldRowManagerConfig.prependRowBuffer,e.rowManager.appendRowBuffer=this.oldRowManagerConfig.appendRowBuffer}async prepareComponent(e){const n=this,{client:r,columns:i,rowsRange:o,keepRegionSizes:s,enableDirectRendering:a}=e,{rowManager:l}=r,c=n.exportMeta={enableDirectRendering:a,totalWidth:0,totalHeight:0-(a?0:n.getVirtualScrollerHeight(r)),subGrids:{}};r.columns.forEach((e=>{i.includes(e.id)?e.show():e.hide()})),await new Promise((e=>r.requestAnimationFrame(e))),r.rowManager.rowCount>0&&(o===Xu.all?c.firstVisibleDataIndex=l.rows[0].dataIndex:(c.firstVisibleDataIndex=l.firstVisibleRow.dataIndex,e.alignRows=!0),a||await r.scrollRowIntoView(r.store.getAt(c.firstVisibleDataIndex),{block:"start"}));const{element:d}=n;let u;n.cloneElement(r.element),n.prepareElement(e),a&&(c.fakeRow=u=new oh({cls:r.rowCls,rowManager:r.rowManager,grid:r,index:-10,dataIndex:-10})),r.eachSubGrid((e=>{var i,o,a;u&&(e.onAddRow({rows:[u],isExport:!0}),u.element.dataset.ownerCmp=r.id);const l=n.createPlaceholder(d.querySelector(`[id="${e.id}"]`),!1);let h;h=(null==s?void 0:s[e.region])?e.element.offsetWidth:e.columns.visibleColumns.reduce(((e,n)=>("number"==typeof n.width?e+=n.width:e+=(r.hideHeaders?r.rowManager.rows[0].getCell(n.id):n.element).offsetWidth,e)),0),c.totalWidth+=h;const g=(null==(i=e.splitterElement)?void 0:i.offsetWidth)||0;c.totalWidth+=g,c.subGrids[e.region]={id:e.id,headerId:(null==(o=e.header)?void 0:o.id)||null,footerId:(null==(a=e.footer)?void 0:a.id)||null,rows:[],splitterWidth:g,placeHolder:l,width:h}}))}prepareExportElement(){const{element:e,exportMeta:n}=this;return Object.values(n.subGrids).forEach((({width:n,id:r,headerId:i,footerId:o})=>{[r,i,o].forEach((r=>{if(r){const i=e.querySelector(`[id="${r}"]`);i&&(i.style.width=`${n}px`,i.style.flex="")}}))})),e.innerHTML}async restoreComponent(e){this.exportMeta.fakeRow&&(this.exportMeta.fakeRow.destroy(),delete this.exportMeta.fakeRow)}async scrollRowIntoView(e,n){await e.scrollRowIntoView(e.store.getAt(n),{block:"start"}),await new Promise((e=>this.requestAnimationFrame(e)))}collectRow(e){const n=this.exportMeta.subGrids,r=/data-owner-cmp=".+?"/;Object.entries(e.elements).forEach((([i,o])=>{n[i].rows.push([o.outerHTML.replace(r,""),e.top,e.offsetHeight,new Map])}))}renderMergedCells(e,n,r,i){const{client:o}=e,{subGrids:s}=this.exportMeta,a=o.features.mergeCells.buildMergedCellsConfig(n,r,i);for(const e in s){const n=s[e],r=document.createElement("div");$o.sync({targetElement:r,domConfig:{children:a[e].children}}),r.childNodes.length&&(r.childNodes.forEach((e=>{const{syncId:n}=e.dataset,r=o.features.mergeCells.mergedRanges.find((e=>{var r;return(null==(r=e.cellElement)?void 0:r.parentNode.dataset.syncId)===n}));r&&(e.innerHTML=r.cellElement.outerHTML)})),n.mergedCellsHtml=[r.innerHTML])}}};sh.prototype.pagesExtractor=async function*pagesExtractor(){throw new Error("Implement this method in a subclass")},sh._$name="Exporter";var ah=class extends sh{static get $name(){return"MultiPageExporter"}static get type(){return"multipage"}static get title(){return this.L("L{multipage}")}static get exportingPageText(){return"L{exportingPage}"}async stateNextPage({client:e,rowsRange:n,enableDirectRendering:r}){const{exportMeta:i}=this;++i.currentPage,++i.verticalPosition,delete i.lastExportedRowBottom,i.verticalPosition>=i.verticalPages&&(Object.assign(i,{verticalPosition:0,horizontalPosition:i.horizontalPosition+1,currentPageTopMargin:0,lastTop:0,lastRowIndex:n===Xu.visible?e.rowManager.firstVisibleRow.dataIndex:0}),delete i.lastRowDataIndex,r||await this.scrollRowIntoView(e,i.firstVisibleDataIndex,{block:"start"}))}async prepareComponent(e){await super.prepareComponent(e);const n=this,{exportMeta:r}=n,{client:i,headerTpl:o,footerTpl:s,alignRows:a,rowsRange:l,enableDirectRendering:c}=e,d=Zu[e.paperFormat],u=e.orientation===Qu.portrait,h=u?d.width:d.height,g=u?d.height:d.width,p=n.inchToPx(h),m=n.inchToPx(g),f=l===Xu.visible,b=Math.ceil(r.totalWidth/p);let v=m;o&&(v-=n.measureElement(o({totalWidth:r.totalWidth,totalPages:-1,currentPage:-1}))),s&&(v-=n.measureElement(s({totalWidth:r.totalWidth,totalPages:-1,currentPage:-1})));let y,w,C=i.store.count;if(f?(C=n.getVisibleRowsCount(i),y=r.totalHeight+i.headerHeight+i.footerHeight+i.bodyHeight):y=r.totalHeight+i.headerHeight+i.footerHeight+i.scrollable.scrollHeight,a&&!f){const e=i.rowManager.rowOffsetHeight,n=Math.floor((v-i.headerHeight)/e),r=Math.floor(v/e),o=C-n;w=1+Math.ceil(o/r)}else w=Math.ceil(y/v);Object.assign(r,{paperWidth:h,paperHeight:g,pageWidth:p,pageHeight:m,horizontalPages:b,verticalPages:w,totalHeight:y,contentHeight:v,totalRows:C,totalPages:b*w,currentPage:0,verticalPosition:0,horizontalPosition:0,currentPageTopMargin:0,lastTop:0,lastRowIndex:f?i.rowManager.firstVisibleRow.dataIndex:0}),c||this.adjustRowBuffer(i)}async restoreComponent(e){await super.restoreComponent(e),e.enableDirectRendering||this.restoreRowBuffer(e.client)}async collectRows(e){const n=this,{exportMeta:r}=n,{client:i,alignRows:o,rowsRange:s}=e,{subGrids:a,currentPageTopMargin:l,verticalPosition:c,contentHeight:d,totalRows:u,lastRowDataIndex:h}=r,{rowManager:g}=i,{rows:p}=g,m=s===Xu.visible,f=i.hasActiveFeature("mergeCells");let b,v;v=m&&null!=h?h===p[p.length-1].dataIndex?p.length-1:p.findIndex((e=>e.dataIndex===h)):m?p.findIndex((e=>e.bottom>Math.ceil(i.scrollable.y))):p.findIndex((e=>e.bottom+l+i.headerHeight>0));const y=v;b=d-(m||0===c?0:p[v].top+l+i.headerHeight),0===c&&(b-=i.headerHeight);let w,C=0;for(;b>0;){const e=p[v];o&&b<e.offsetHeight?(C=-b,b=0,n.exportMeta.lastExportedRowBottom=p[v-1].bottom):(n.collectRow(e),b-=e.offsetHeight,w=e.dataIndex,(++v===p.length&&b>0||m&&v-y===u)&&(b=0))}if(f)for(const e in a){const n=a[e],r=i.subGrids[e].element.querySelectorAll(".b-grid-merged-cells");n.mergedCellsHtml=[];for(const e of r)n.mergedCellsHtml.push(e.outerHTML)}const S=p[v-1];if(S&&(r.exactGridHeight=S.bottom+i.footerContainer.offsetHeight+i.headerContainer.offsetHeight,r.lastRowDataIndex=S.dataIndex+1),await n.onRowsCollected(p.slice(y,v),e),m)r.exactGridHeight-=r.scrollableTopMargin=i.scrollable.y;else{const e=g.ion({offsetRows:({offset:e})=>C+=e});await n.scrollRowIntoView(i,w+1),e()}return C}async renderRows(e){const n=this,{exportMeta:r}=n,{client:i,alignRows:o,rowsRange:s}=e,{currentPageTopMargin:a,verticalPosition:l,contentHeight:c,totalRows:d,lastRowIndex:u,fakeRow:h}=r,{store:g}=i,p=i.hasActiveFeature("mergeCells"),m=s===Xu.visible;let f,b=u,{lastTop:v}=r;const y=b,w=[];f=c-(m||0===l?0:v+a+i.headerHeight),0===l&&(f-=i.headerHeight);let C,S,x=0;for(;f>0;)h.render(b,g.getAt(b),!0,!1,!0),o&&f<h.offsetHeight?(x=-f,f=0,n.exportMeta.lastExportedRowBottom=v):(S=v,C=b,v=h.translate(v),f-=h.offsetHeight,n.collectRow(h),w.push({top:h.top,bottom:h.bottom,offsetHeight:h.offsetHeight,dataIndex:h.dataIndex}),(++b===g.count&&f>0||m&&b-y===d)&&(f=0));return p&&n.renderMergedCells(e,y,b,w),r.lastRowIndex=o?b:C,r.lastTop=o?v:S,h&&(r.exactGridHeight=h.bottom+i.footerContainer.offsetHeight+i.headerContainer.offsetHeight),await n.onRowsCollected(w,e),x}async buildPage(e){const n=this,{exportMeta:r}=n,{client:i,headerTpl:o,footerTpl:s,enableDirectRendering:a}=e,{totalWidth:l,totalPages:c,currentPage:d,subGrids:u}=r;let h,g,p;Object.values(u).forEach((e=>e.rows=[])),e.rowsRange===Xu.all&&(r.totalHeight=i.height-i.bodyHeight+i.scrollable.scrollHeight-n.getVirtualScrollerHeight(i)),o&&(h=n.prepareHTML(o({totalWidth:l,totalPages:c,currentPage:d}))),s&&(g=n.prepareHTML(s({totalWidth:l,totalPages:c,currentPage:d}))),p=a?await n.renderRows(e):await n.collectRows(e);return{html:n.buildPageHtml(e),header:h,footer:g,offset:p}}async onRowsCollected(){}buildPageHtml(){const{subGrids:e}=this.exportMeta;let n=this.prepareExportElement();return Object.values(e).forEach((({placeHolder:e,rows:r,mergedCellsHtml:i})=>{const o=e.outerHTML;let s=r.reduce(((e,n)=>e+=n[0]),"");(null==i?void 0:i.length)&&(s+=`<div class="b-grid-merged-cells-container">${i.join("")}</div>`),n=n.replace(o,s)})),n}prepareExportElement(){const{element:e,exportMeta:n}=this;return n.scrollableTopMargin&&(e.querySelector(".b-grid-vertical-scroller").style.marginTop=`-${n.scrollableTopMargin}px`),super.prepareExportElement()}};ah.prototype.pagesExtractor=async function*pagesExtractor2(e){const n=this,{exportMeta:r,stylesheets:i}=n,{totalWidth:o,totalPages:s,paperWidth:a,paperHeight:l,contentHeight:c}=r;let d;for(;(d=r.currentPage)<s;){n.trigger("exportStep",{text:n.L(ah.exportingPageText,{currentPage:d,totalPages:s}),progress:Math.round((d+1)/s*90)});const{html:u,header:h,footer:g,offset:p}=await n.buildPage(e),m=[...i,`\n                <style>\n                    #${e.client.id} {\n                        height: ${r.exactGridHeight}px !important;\n                        width: ${o}px !important;\n                    }\n                    .b-export-body .b-export-viewport {\n                        margin-inline-start : ${-a*r.horizontalPosition}in;\n                        margin-top  : ${r.currentPageTopMargin}px;\n                    }\n                </style>\n            `];r.currentPageTopMargin-=c+p,await n.stateNextPage(e),yield{html:n.pageTpl({html:u,header:h,footer:g,styles:m,paperWidth:a,paperHeight:l})}}},ah._$name="MultiPageExporter";var lh=class extends sh{static get $name(){return"MultiPageVerticalExporter"}static get type(){return"multipagevertical"}static get title(){return this.L("L{multipagevertical}")}static get exportingPageText(){return"L{exportingPage}"}async stateNextPage({client:e}){const{exportMeta:n}=this,{totalRows:r,processedRows:i,totalPages:o}=n;++n.currentPage,++n.verticalPosition,n.currentPage===o&&i.size!==r&&(++n.totalPages,++n.verticalPages)}estimateTotalPages(e){const n=this,{exportMeta:r}=n,{client:i,headerTpl:o,footerTpl:s,alignRows:a,rowsRange:l,repeatHeader:c,enableDirectRendering:d}=e,{pageWidth:u,pageHeight:h,totalWidth:g}=r,p=n.getScaleValue(u,g);let m,f=0-n.getVirtualScrollerHeight(i)+i.height-i.bodyElement.offsetHeight+i.scrollable.scrollHeight,b=h/p,v=i.store.count,y=0,w=f;if(o&&(b-=n.measureElement(o({totalWidth:g,totalPages:-1,currentPage:-1}))),s&&(b-=n.measureElement(s({totalWidth:g,totalPages:-1,currentPage:-1}))),c&&(b-=i.headerHeight+i.footerHeight,f-=i.headerHeight+i.footerHeight),l===Xu.visible){const e=i.rowManager,o=e.firstVisibleRow,s=e.lastVisibleRow;d||(y=o.top),v=n.getVisibleRowsCount(i),d?(f=i.headerHeight+i.footerHeight+s.bottom-o.top,w=s.bottom-o.top):w=f=f-i.scrollable.scrollHeight+s.bottom-o.top,r.lastRowIndex=o.dataIndex,r.finishRowIndex=s.dataIndex}else r.finishRowIndex=i.store.count-1;if(a&&!c&&l!==Xu.visible){const e=i.rowManager.rowOffsetHeight,n=Math.floor((b-i.headerHeight)/e),r=Math.floor(b/e),o=v-n;m=1+Math.ceil(o/r)}else m=Math.ceil(w/b);Object.assign(r,{scale:p,contentHeight:b,totalRows:v,totalHeight:f,verticalPages:m,initialScroll:y,horizontalPages:1,totalPages:m})}async prepareComponent(e){await super.prepareComponent(e);const n=this,{exportMeta:r}=n,{client:i}=e,o=Zu[e.paperFormat],s=e.orientation===Qu.portrait,a=s?o.width:o.height,l=s?o.height:o.width,c=n.inchToPx(a),d=n.inchToPx(l);Object.assign(r,{paperWidth:a,paperHeight:l,pageWidth:c,pageHeight:d,horizontalPages:1,currentPage:0,verticalPosition:0,horizontalPosition:0,currentPageTopMargin:0,lastTop:0,lastRowIndex:0,processedRows:new Set}),n.estimateTotalPages(e),e.enableDirectRendering||n.adjustRowBuffer(i)}async restoreComponent(e){await super.restoreComponent(e),e.enableDirectRendering||this.restoreRowBuffer(e.client)}async collectRows(e){const n=this,{exportMeta:r}=n,{client:i,alignRows:o,repeatHeader:s}=e,{subGrids:a,currentPageTopMargin:l,verticalPosition:c,totalRows:d,contentHeight:u}=r,h=s?0:i.headerHeight,{rowManager:g}=i,{rows:p}=g,m=e.rowsRange===Xu.visible,f=i.hasActiveFeature("mergeCells");let b,v=m?p.findIndex((e=>e.bottom>i.scrollable.y)):p.findIndex((e=>e.bottom+l+h>0));const y=v;b=u-(0===c?0:p[v].top+l+h),0===c&&(b-=h);let w,C=0;for(;b>0;){const e=p[v];o&&b<e.offsetHeight?(C=-b,b=0):(n.collectRow(e),b-=e.offsetHeight,b>0&&r.processedRows.add(e.dataIndex),w=e.dataIndex,(++v===p.length&&b>0||m&&v-y===d)&&(b=0))}if(f)for(const e in a){const n=a[e],r=i.subGrids[e].element.querySelectorAll(".b-grid-merged-cells");n.mergedCellsHtml=[];for(const e of r)n.mergedCellsHtml.push(e.outerHTML)}const S=p[v-1];if(S&&(r.exactGridHeight=S.bottom+i.footerContainer.offsetHeight+i.headerContainer.offsetHeight),await n.onRowsCollected(p.slice(y,v),e),m)r.scrollableTopMargin=i.scrollable.y;else{const e=g.ion({offsetRows:({offset:e})=>C+=e});await n.scrollRowIntoView(i,w+1),e()}return C}async renderRows(e){const n=this,{exportMeta:r}=n,{client:i,alignRows:o,repeatHeader:s}=e,{currentPageTopMargin:a,verticalPosition:l,totalRows:c,contentHeight:d,lastRowIndex:u,finishRowIndex:h,fakeRow:g}=r,p=s?0:i.headerHeight,{store:m}=i,f=i.hasActiveFeature("mergeCells"),b=e.rowsRange===Xu.visible;let v,y=u,{lastTop:w}=r;const C=y,S=[];v=d-(0===l?0:w+a+p),0===l&&(v-=p);let x,D,E=0;for(;v>0;)g.render(y,m.getAt(y),!0,!1,!0),o&&v<g.offsetHeight?(E=-v,v=0):(D=w,x=y,w=g.translate(w),v-=g.offsetHeight,n.collectRow(g),S.push({top:g.top,bottom:g.bottom,offsetHeight:g.offsetHeight,dataIndex:g.dataIndex}),v>0&&r.processedRows.add(y),(y===h||++y-C===c&&b)&&(v=0));return f&&n.renderMergedCells(e,C,y,S),r.lastRowIndex=x,r.lastTop=D,g&&(r.exactGridHeight=g.bottom+i.footerContainer.offsetHeight+i.headerContainer.offsetHeight),await n.onRowsCollected(S,e),E}async buildPage(e){const n=this,{exportMeta:r}=n,{client:i,headerTpl:o,footerTpl:s,enableDirectRendering:a}=e,{totalWidth:l,totalPages:c,currentPage:d,subGrids:u}=r;let h,g,p;Object.values(u).forEach((e=>e.rows=[])),e.rowsRange===Xu.all&&(r.totalHeight=i.headerHeight+i.footerHeight+i.scrollable.scrollHeight,a||(r.totalHeight-=n.getVirtualScrollerHeight(i))),o&&(h=n.prepareHTML(o({totalWidth:l,totalPages:c,currentPage:d}))),s&&(g=n.prepareHTML(s({totalWidth:l,totalPages:c,currentPage:d}))),p=a?await n.renderRows(e):await n.collectRows(e);return{html:n.buildPageHtml(e),header:h,footer:g,offset:p}}async onRowsCollected(){}buildPageHtml(){const{subGrids:e}=this.exportMeta;let n=this.prepareExportElement();return Object.values(e).forEach((({placeHolder:e,rows:r,mergedCellsHtml:i})=>{const o=e.outerHTML;let s=r.reduce(((e,n)=>e+=n[0]),"");(null==i?void 0:i.length)&&(s+=`<div class="b-grid-merged-cells-container">${i.join("")}</div>`),n=n.replace(o,s)})),n}};lh.prototype.pagesExtractor=async function*pagesExtractor3(e){const n=this,{exportMeta:r,stylesheets:i}=n,{totalWidth:o,paperWidth:s,paperHeight:a,contentHeight:l,scale:c,initialScroll:d}=r;let u,{totalPages:h}=r;for(;(u=r.currentPage)<h;){n.trigger("exportStep",{text:n.L(lh.exportingPageText,{currentPage:u,totalPages:h}),progress:Math.round((u+1)/h*90)});const{html:g,header:p,footer:m,offset:f}=await n.buildPage(e),b=[...i,`\n                <style>\n                    #${e.client.id} {\n                        width: ${o}px !important;\n                    }\n                    .b-export .b-export-content {\n                        transform: scale(${c});\n                        transform-origin: top left;\n                        height: auto;\n                    }\n                </style>\n            `];if(e.repeatHeader){const n=r.exactGridHeight?`${r.exactGridHeight+r.currentPageTopMargin}px`:"100%";b.push(`\n                <style>\n                    #${e.client.id} {\n                        height: ${n} !important;\n                    }\n                    .b-export .b-export-content {\n                        height: ${100/c}%;\n                    }\n                    .b-export-body {\n                        height: 100%;\n                        display: flex;\n                    }\n                    .b-export-viewport {\n                        height: 100%;\n                    }\n                    .b-grid-vertical-scroller {\n                        margin-top: ${r.currentPageTopMargin-d}px;\n                    }\n                </style>\n                `)}else{const n=r.exactGridHeight||l-r.currentPageTopMargin;b.push(`\n                <style>\n                    #${e.client.id} {\n                        height: ${n}px !important;\n                    }\n                    .b-export-body {\n                        overflow: hidden;\n                    }\n                    .b-export .b-export-content {\n                        height: ${100/c}%;\n                    }\n                    .b-export-body .b-export-viewport {\n                        margin-top: ${r.currentPageTopMargin}px;\n                    }\n                    .b-grid-vertical-scroller {\n                        margin-top: -${d}px;\n                    }\n                </style>\n                `)}r.currentPageTopMargin-=l+f,await n.stateNextPage(e),({totalPages:h}=r),yield{html:n.pageTpl({html:g,header:p,footer:m,styles:b,paperWidth:s,paperHeight:a})}}},lh._$name="MultiPageVerticalExporter";var ch=class extends sh{static get $name(){return"SinglePageExporter"}static get type(){return"singlepage"}static get title(){return this.localize("L{singlepage}")}static get defaultConfig(){return{centerContentHorizontally:!1}}async prepareComponent(e){await super.prepareComponent(e),Object.assign(this.exportMeta,{verticalPages:1,horizontalPages:1,totalPages:1,currentPage:0,verticalPosition:0,horizontalPosition:0})}async onRowsCollected(){}positionRows(e,n){if(n.enableDirectRendering)return e.map((e=>e[0]));{let n=0;return e.map((([e,,r])=>{const i=e.replace(/translate\(\d+px, \d+px\)/,`translate(0px, ${n}px)`);return n+=r,i}))}}async collectRows(e){const n=this,{client:r}=e,{rowManager:i,store:o}=r,s=r.hasActiveFeature("mergeCells"),{subGrids:a}=n.exportMeta,l=e.rowsRange===Xu.visible&&o.count?n.getVisibleRowsCount(r):o.count;let{totalHeight:c}=n.exportMeta,d=0,u=-1;if(i.rows.length>0){if(e.rowsRange===Xu.visible&&(u=i.firstVisibleRow.dataIndex-1),s)for(const e of Object.values(a))e.mergedCellsHtml=[];for(;d<l;){const o=i.rows,h=o[o.length-1],g=d;if(o.forEach((e=>{e.dataIndex>u&&d<l&&(++d,c+=e.offsetHeight,n.collectRow(e))})),s)for(const e in a){const n=a[e],i=r.subGrids[e].element.querySelectorAll(".b-grid-merged-cells");for(const e of i)n.mergedCellsHtml.push(e.outerHTML)}const p=o.findIndex((e=>e.dataIndex===u+1)),m=p+(d-g);await n.onRowsCollected(o.slice(p,m),e),d<l&&(u=h.dataIndex,await n.scrollRowIntoView(r,u+1))}}return c}async renderRows(e){const n=this,{client:r,rowsRange:i}=e,{rowManager:o,store:s}=r,a=r.hasActiveFeature("mergeCells"),l=i===Xu.visible;let{totalHeight:c}=n.exportMeta;if(s.count){const{fakeRow:r}=n.exportMeta,{firstVisibleRow:i}=o,d=l?i.dataIndex:0,u=l?o.lastVisibleRow.dataIndex:s.count-1,h=[];let g=0;if(r.cells.length){for(let e=d;e<=u;e++)r.render(e,s.getAt(e),!0,!1,!0),g=r.translate(g),n.collectRow(r),h.push({top:r.top,bottom:r.bottom,offsetHeight:r.offsetHeight,dataIndex:r.dataIndex});await n.onRowsCollected(h,e)}c+=g,a&&n.renderMergedCells(e,d,u,h)}return c}buildPageHtml(e){const n=this,{subGrids:r}=n.exportMeta;let i=n.prepareExportElement();return Object.values(r).forEach((({placeHolder:r,rows:o,mergedCellsHtml:s})=>{const a=r.outerHTML;let l=n.positionRows(o,e).join("");(null==s?void 0:s.length)&&(l+=`<div class="b-grid-merged-cells-container">${s.join("")}</div>`),i=i.replace(a,l)})),i}};ch.prototype.pagesExtractor=async function*pagesExtractor4(e){const n=this,{client:r}=e,{totalWidth:i}=n.exportMeta,o=n.stylesheets,s=e.orientation===Qu.portrait,a=Zu[e.paperFormat],l=s?a.width:a.height,d=s?a.height:a.width;let u,h,g;e.enableDirectRendering?(u=await n.renderRows(e),u+=r.headerHeight+r.footerHeight):(u=await n.collectRows(e),u+=r.height-r.bodyHeight);const p=n.buildPageHtml(e),m=u;if(e.headerTpl){h=n.prepareHTML(e.headerTpl({totalWidth:i}));u+=n.measureElement(h)}if(e.footerTpl){g=n.prepareHTML(e.footerTpl({totalWidth:i}));u+=n.measureElement(g)}const f=Math.min(1,n.getScaleValue(n.inchToPx(l),i)),b=Math.min(1,n.getScaleValue(n.inchToPx(d),u)),v=Math.min(f,b);o.push(`<style>\n                #${r.id} {\n                    height: ${m}px !important;\n                    width: ${i}px !important;\n                }\n                .b-export-content {\n                    ${n.centerContentHorizontally?"left: 50%;":""}\n                    transform: scale(${v}) ${n.centerContentHorizontally?"translateX(-50%)":""};\n                    transform-origin: top left;\n                    height: ${1===v?"inherit":"auto !important"};\n                }\n            </style>`),c.isIE11&&o.push(`<style>\n                .b-export-body {\n                   min-height: ${m}px !important;\n                }\n         </style>`),yield{html:n.pageTpl({html:p,header:h,footer:g,styles:o,paperWidth:l,paperHeight:d})}},ch._$name="SinglePageExporter";var dh=class extends sr{static get $name(){return"PdfExport"}static get configurable(){return{dialogClass:rh,exportServer:void 0,exportDialog:{value:!0,$config:["lazy"]},fileName:null,fileFormat:"pdf",clientURL:null,paperFormat:"A4",orientation:"portrait",rowsRange:"all",alignRows:!1,repeatHeader:!1,keepRegionSizes:null,pagesPerRequest:0,exporterConfig:null,exporterType:"singlepage",exporters:[ch,ah,lh],translateURLsToAbsolute:!0,keepPathName:!0,openAfterExport:!0,sendAsBinary:!1,openInNewTab:!1,headerTpl:null,footerTpl:null,fetchOptions:null,exportMask:"L{Generating pages}",exportProgressMask:"L{Waiting for response from server}",showErrorToast:!0,localizableProperties:["exportMask","exportProgressMask"],filterStyles:e=>e,enableDirectRendering:!0}}updateEnableDirectRendering(e){e||A.deprecate("Grid","6.0.0","Indirect rendering is deprecated")}doDestroy(){var e;null==(e=this.exportDialog)||e.destroy(),this.exportersMap.forEach((e=>e.destroy())),super.doDestroy()}get currentExportPromise(){return this._currentExportPromise}set currentExportPromise(e){this._currentExportPromise=e}get exportersMap(){return this._exportersMap||(this._exportersMap=new Map)}getExporter(e={}){const n=this,{exportersMap:r}=n,{type:i}=e;let o;if(r.has(i))o=r.get(i),Object.assign(o,e);else{const s=this.exporters.find((e=>e.type===i));if(!s)throw new Error(`Exporter type ${i} is not found. Make sure you've configured it`);delete(e=Et.clone(e)).type,o=new s(e),o.relayAll(n),r.set(i,o)}return o}buildExportConfig(e={}){const{client:n,exportServer:r,clientURL:i,fileFormat:o,fileName:s,paperFormat:a,rowsRange:l,alignRows:c,repeatHeader:d,keepRegionSizes:u,orientation:h,translateURLsToAbsolute:g,keepPathName:p,sendAsBinary:m,headerTpl:f,footerTpl:b,filterStyles:v,enableDirectRendering:y}=this;e.columns||(e.columns=n.columns.visibleColumns.filter((e=>e.exportable)).map((e=>e.id)));const w=Et.assign({client:n,exportServer:r,clientURL:i,fileFormat:o,paperFormat:a,rowsRange:l,alignRows:c,repeatHeader:d,keepRegionSizes:u,orientation:h,translateURLsToAbsolute:g,keepPathName:p,sendAsBinary:m,headerTpl:f,footerTpl:b,enableDirectRendering:y,exporterType:this.exporterType,fileName:s||n.$$name},e);return w.columns=e.columns.slice(),"multipagevertical"!==w.exporterType&&(w.repeatHeader=!1),!("alignRows"in e)&&e.repeatHeader&&(w.alignRows=!0),w.exporterConfig=Et.assign({type:w.exporterType,translateURLsToAbsolute:w.translateURLsToAbsolute,keepPathName:w.keepPathName,filterStyles:v},w.exporterConfig||{}),delete w.exporterType,delete w.translateURLsToAbsolute,delete w.keepPathName,w}async export(e={}){var n,r;const i=this,{client:o,pagesPerRequest:s}=i;let a;if(e=i.buildExportConfig(e),!1!==o.trigger("beforePdfExport",{config:e})){o.isExporting=!0,o.mask(i.exportMask);try{const r=i.getExporter(e.exporterConfig);if(0===s){const s=await r.export(e);if(i.isDestroying)return;null==(n=i.exportDialog)||n.close(),o.unmask(),i.trigger("exportStep",{progress:90,text:i.exportProgressMask,contentGenerated:!0});const l=i.receiveExportContent(s,e);i.toast=i.showLoadingToast(l);const c=await l;a={response:c},await i.processExportContent(c,e)}}catch(e){throw a=e instanceof Response?{response:e}:{error:e},e}finally{i.toast&&!i.toast.isDestroying&&i.toast.hide(),i.isDestroying||(null==(r=i.exportDialog)||r.close(),o.unmask(),i.showErrorToast&&(a.error?"AbortError"!==a.error.name&&cl.show({html:i.L("L{Export failed}"),rootElement:i.rootElement}):a.response.ok||cl.show({html:i.L("L{Server error}"),rootElement:i.rootElement})),o.trigger("pdfExport",a),o.isExporting=!1)}}return a}receiveExportContent(e,n){return Fe.fetch(n.exportServer,Object.assign({method:"POST",credentials:"omit",headers:{"Content-Type":"application/json"},body:JSON.stringify({html:e,orientation:n.orientation,format:n.paperFormat,fileFormat:n.fileFormat,fileName:n.fileName,clientURL:n.clientURL,sendAsBinary:n.sendAsBinary})},this.fetchOptions))}async processExportContent(e,n){const r=this;if(e.ok&&r.openAfterExport){const i=(e=e.clone()).headers.get("content-type");if(i.match(/application\/octet-stream/)){const i=eh[n.fileFormat],o=await r.responseBlobToObjectURL(e,i);r.getDownloadLink(n.fileName,o).click()}else if(i.match(/application\/json/)){const i=await e.json();if(i.success){r.getDownloadLink(n.fileName,i.url).click()}else cl.show({html:i.msg,rootElement:this.rootElement})}}}async responseBlobToObjectURL(e,n){const r=await e.blob();return URL.createObjectURL(r.slice(0,r.size,n))}getDownloadLink(e,n){const r=document.createElement("a");return r.download=e,r.href=n,this.openInNewTab&&(r.target="_blank"),r}get defaultExportDialogConfig(){return Et.copyProperties({},this,["client","exporters","exporterType","orientation","fileFormat","paperFormat","alignRows","rowsRange","repeatHeader"])}changeExportDialog(e,n){const r=this;if(null==n||n.destroy(),e){const n=r.dialogClass.mergeConfigs({rootElement:r.rootElement,client:r.client,items:{rowsRangeField:{value:r.rowsRange},exporterTypeField:{value:r.exporterType},orientationField:{value:r.orientation},paperFormatField:{value:r.paperFormat},repeatHeaderField:{value:r.repeatHeader},fileFormatField:{value:r.fileFormat},alignRowsField:{checked:r.alignRows}}},r.defaultExportDialogConfig,e);(e=r.dialogClass.new(n)).ion({export:r.onExportButtonClick,thisObj:r})}return e}async showExportDialog(){return this.exportDialog.show()}onExportButtonClick({values:e}){const n=this,r=n.exportDialog.mask({progress:0,maxProgress:100,text:n.exportMask}),i=n.ion({exportstep({progress:e,text:o,contentGenerated:s}){s?(n.exportDialog.unmask(),i()):(r.progress=e,null!=o&&(r.text=o))}});n.currentExportPromise=n.export(e),n.currentExportPromise.catch((()=>{})).finally((()=>{var e;i(),null==(e=n.exportDialog)||e.unmask(),n.currentExportPromise=null}))}showLoadingToast(e){const n=cl.show({timeout:0,showProgress:!1,rootElement:this.rootElement,html:`\n    <span class="b-mask-icon b-icon b-icon-spinner"></span>\n    <span>${this.L("L{Waiting for response from server}")}</span>\n    <button class="b-button">${this.L("L{Click to abort}")}</button>`});return cn.on({element:n.element,click(){var n;null==(n=e.abort)||n.call(e)}}),n}};dh._$name="PdfExport",du.registerFeature(dh,!1,"Grid");var uh=class extends re{static get defaultConfig(){return{target:null,defaultColumnWidth:100,exportDateAsInstance:!0,showGroupHeader:!0,columns:null,indent:!0,indentationSymbol:"    "}}export(e={}){const n=this;return e=Et.assign({},n.config,e),n.normalizeColumns(e),n.generateExportData(e)}generateExportData(e){const n=this.generateColumns(e);return{rows:this.generateRows(e),columns:n}}normalizeColumns(e){const n=e.columns||this.target.columns.visibleColumns.filter((e=>!1!==e.exportable));e.columns=n.map((e=>"string"==typeof e?this.target.columns.find((n=>n.field===e))||{field:e}:e))}generateColumns(e){return e.columns.map((n=>this.processColumn(n,e)))}generateRows(e){const{columns:n,rows:r}=e;if(0===n.length||0===(null==r?void 0:r.length))return[];const i=this,{target:o}=i;return(r||o.store).map((r=>i.processRecord(r,n,e))).filter((e=>null==e?void 0:e.length))}getColumnType(e,n=this.target.store){let r=e.exportedType||"object";if(void 0===e.exportedType&&e.field){const i=n.modelClass.getFieldDefinition(e.field);i&&"auto"!==i.type&&(r=i.type)}return r}processColumn(e,n){const{target:r}=this,{defaultColumnWidth:i}=n;let{field:o,text:s,width:a,minWidth:l}=e;if(o in r.store.modelClass.fieldMap||(o=""),!s||!a){const e=r.columns.find((e=>e.field===o));s||(s=e&&e.text||o),null==a&&(a=e&&e.width||i)}return a=Math.max(a||i,l||i),{field:o,value:s,width:a,type:this.getColumnType(e)}}processRecord(e,n,r){const{target:i}=this,{showGroupHeader:o,indent:s,indentationSymbol:a}=r;let l;return e?e.isSpecialRow?o&&e.meta.groupRowFor&&(l=n.map((n=>i.features.group.buildGroupHeader({cellElement:Gn.createElement(),grid:i,record:e,column:n})))):l=n.map((n=>{var o;let l=(null==(o=n.field)?void 0:o.includes("."))?e.get(n.field):e[n.field];const c=n.renderer||n.defaultRenderer;return!c||l&&n.isDateColumn&&r.exportDateAsInstance||(l=c.call(n,{value:l,record:e,column:n,grid:i,isExport:!0})),s&&n.tree&&(l=`${a.repeat(e.childLevel)}${l}`),l})):l=n.map((()=>"")),l}};uh._$name="TableExporter";var hh=class{constructor(e){this._value=e}get value(){return this._value}toString(){return Boolean(this.value)?"✓":""}};hh._$name="BooleanUnicodeSymbol";var gh=class extends sr{static get $name(){return"ExcelExporter"}static get defaultConfig(){return{filename:null,dateFormat:"YYYY-MM-DD",exporterClass:uh,exporterConfig:null,zipcelx:null,convertEmptyValueToEmptyString:!0}}processValue(e){return null==e||Number.isNaN(e)||"function"==typeof e||"object"==typeof e&&"[object Object]"===String(e)?"":e}generateExportData(e){const n=this,{rows:r,columns:i}=n.exporter.export(e.exporterConfig);return{rows:r.map((r=>r.map(((r,o)=>{var s;r instanceof Date?r=Ct.format(r,e.dateFormat):"boolean"==typeof r&&(r=new hh(r)),n.convertEmptyValueToEmptyString&&(r=n.processValue(r));return{value:r,type:"number"===(null==(s=i[o])?void 0:s.type)?"number":"string"}})))),columns:i.map((e=>{let{field:n,value:r,width:i,type:o}=e;return o="string",{field:n,value:r,width:i,type:o}}))}}export(e={}){const n=this,r=n.zipcelx||globalThis.zipcelx;if(!r)throw new Error('ExcelExporter: "zipcelx" library is required');if(n.disabled)return;(e=Et.assign({},n.config,e)).filename||(e.filename=n.client.$$name);const{filename:i}=e,{rows:o,columns:s}=n.generateExportData(e);return r({filename:i,sheet:{data:[s].concat(o),cols:s}})}construct(e,n){super.construct(e,n),this.zipcelx||"undefined"!=typeof zipcelx&&(this.zipcelx=globalThis.zipcelx)}get exporter(){const e=this;return e._exporter||(e._exporter=e.exporterClass.new({target:e.client},e.exporterConfig))}};gh._$name="ExcelExporter",du.registerFeature(gh,!1,"Grid");var ph=class extends bs{static get $name(){return"Bar"}static get type(){return"gridbar"}static get defaultConfig(){return{htmlCls:"",scrollable:{overflowX:"hidden-scroll"}}}get columns(){return this._columns||this.subGrid.columns}set columns(e){this._columns=e}fixCellWidths(){const e=this,{hasFlex:n}=e.columns;let r;e.columns.traverse((n=>{const i=e.getBarCellElement(n.id),o=Gn.setLength(n.width),s=Gn.setLength(n.minWidth),a=Gn.setLength(n.maxWidth);if(i){if(r=o,i.style.maxWidth=a,n.isParent&&null==n.width&&null==n.flex){const e=n.children.reduce(((e,n)=>e+(!n.hidden&&n.flex||0)),0);i.style.flex=e>0?`${e} 0 auto`:"",i.style.minWidth=null,e>0&&n.traverse((e=>e.data.minWidth=null))}else if(parseInt(n.minWidth)>=0&&(i.style.minWidth=s),i.style.flex=i.style.flexBasis=i.style.width="",n.flex)!isNaN(parseInt(n.flex))&&n.children?i.style.flex=`${n.flex} 0 auto`:i.style.flex=n.flex;else if(parseInt(n.width)>=0){const s=n.parent;!e.isHeader||s.isRoot||s.width?i.style.flexBasis=r:i.style.width=o}n.height>=0&&(i.style.height=Gn.setLength(n.height))}})),e.scrollable.element.classList.toggle("b-has-flex",n)}getLrPadding(e){if(!this.cellLrPadding){const n=e.ownerDocument.defaultView.getComputedStyle(e);this.cellLrPadding=parseInt(n.getPropertyValue("padding-left"))+parseInt(n.getPropertyValue("padding-right"))+parseInt(n.getPropertyValue("border-left-width"))+parseInt(n.getPropertyValue("border-right-width"))}return this.cellLrPadding}getBarCellElement(e){return this.element.querySelector(`[data-column-id="${e}"]`)}};ph.initClass(),ph._$name="Bar";var mh=class extends ph{static get $name(){return"Footer"}static get type(){return"gridfooter"}get subGrid(){return this._subGrid}set subGrid(e){this._subGrid=this.owner=e}refreshContent(){this.element.firstElementChild.innerHTML=this.contentTemplate(),this.fixFooterWidths()}onPaint({firstPaint:e}){e&&this.refreshContent()}template(){const e=this.subGrid.region;return rl.tpl`
            <div class="b-grid-footer-scroller b-grid-footer-scroller-${e}" role="presentation">
                <div data-reference="footersElement" class="b-grid-footers b-grid-footers-${e}" data-region="${e}" role="presentation"></div>
            </div>
        `}get overflowElement(){return this.footersElement}getFooter(e){return this.getBarCellElement(e)}contentTemplate(){return this.columns.visibleColumns.map((e=>rl.tpl`
                <div
                    class="b-grid-footer ${e.align?`b-grid-footer-align-${e.align}`:""} ${e.cls||""}"
                    data-column="${e.field||""}" data-column-id="${e.id}" data-all-index="${e.allIndex}"
                    role="presentation">
                    ${e.footerText||""}
                </div>`)).join("")}fixFooterWidths(){this.fixCellWidths()}};mh.initClass(),mh._$name="Footer";var fh=class extends sr{static get pluginConfig(){return{chain:["destroy"],assign:["rowHeight","topRow","bottomRow","firstVisibleRow","lastVisibleRow","firstFullyVisibleRow","lastFullyVisibleRow","getRowById","getRecordCoords","getRow","getRowFor","getRowFromElement"]}}static get defaultConfig(){return{prependRowBuffer:5,appendRowBuffer:5,rowHeight:null,fixedRowHeight:null,autoHeight:!1}}static get properties(){return{idMap:{},topIndex:0,lastScrollTop:0,_rows:[],heightMap:new Map,totalKnownHeight:0,_totalHeight:0,averageRowHeight:0,scrollTargetRecordId:null,refreshDetails:{topRowIndex:0,topRowTop:0}}}construct(e){e.grid._rowManager=this,super.construct(e.grid,e)}doDestroy(){this._rows.forEach((e=>e.destroy())),super.doDestroy()}initWithHeight(e,n=!1){const r=this;return r.autoHeight&&(e=r.store.allCount*r.preciseRowOffsetHeight),r.viewHeight=e,r.calculateRowCount(n),e}reinitialize(e=!1){const n=this;n.calculateRowCount(!1,!0,!0),n.topIndex+n.rowCount-1>n.store.count&&(e=!0);const r=n.topRow&&!e?n.topRow.top:0;n.scrollTargetRecordId=null,e&&(n.topIndex=n.lastScrollTop=0);const{topRow:i}=n;i&&(i.dataIndex=n.topIndex,i.setTop(r,!0)),n.estimateTotalHeight(),n.renderFromRow(i)}matchRowCount(e=!1){var n,r;const i=this,{rows:o,grid:s}=i,a=o.length,l=a-i.rowCount;if(l)if(l<0){const n=[];for(let e=a,r=a?o[a-1].dataIndex+1:0;e<i.rowCount;e++,r++)n.push(new oh({cls:s.rowCls,rowManager:i,grid:s,index:e,dataIndex:r}));o.push.apply(o,n),i.trigger("addRows",{rows:n}),e||i.renderFromRow(o[Math.max(0,a-1)])}else{const{focusedCell:e}=s,c=null!=(null==e?void 0:e.id)&&(null==(n=null==e?void 0:e.cell)?void 0:n.contains(Gn.getActiveElement(s))),d=o.splice(a-l,l);c&&(l===a?s.onFocusedRowDerender():(null==(r=i.getRowFor(e._record))?void 0:r.index)>=o.length&&o[o.length-1].cells[e.columnIndex].focus()),i.trigger("removeRows",{rows:d}),d.forEach((e=>e.destroy()))}}calculateRowCount(e=!1,n=!0,r=!1){var i,o;const s=this,{store:a}=s,l=Math.ceil(s.viewHeight/s.minRowOffsetHeight),c=l+s.prependRowBuffer+s.appendRowBuffer;if(!(null==(i=s.grid.columns)?void 0:i.count)||isNaN(l))return s.rowCount=0,0;if(c<s.rowCount&&!n)return s.rowCount;if(s.visibleRowCount=l,s.rowCount=Math.min(a.count,c),!e){if(s.rows&&s.rowCount!==s.rows.length){if(s.matchRowCount(r),(null==(o=s.bottomRow)?void 0:o.dataIndex)>=a.count&&0!==s.topRow.dataIndex){const e=s.bottomRow.dataIndex-a.count+1;for(const n of s.rows)n.dataIndex-=e;s.topIndex-=e}}else s.rowCount||s.trigger("changeTotalHeight",{totalHeight:s.totalHeight});s.grid.toggleEmptyText()}return s.rowCount}removeAllRows(){const e=this,{topRow:n}=e,r=n?e.refreshDetails={topRowIndex:n.dataIndex,topRowTop:n.top}:e.refreshDetails,i=e.rows.slice();return e.trigger("removeRows",{rows:i}),e.rows.forEach((e=>e.destroy())),e.rows.length=0,e.idMap={},r}setPosition(e){const{topRow:n}=this,{topRowIndex:r,topRowTop:i}=e;n.setTop(i),n.dataIndex=r}get store(){return this.client.store}get rows(){return this._rows}getRow(e){if(this.rowCount)return this.rows[e-this.topIndex]}getRowById(e){return e&&e.isModel&&(e=e.id),this.idMap[e]}getRowFromElement(e){return(e=e.closest(".b-grid-row"))&&this.getRow(e.dataset.index)}getRowAt(e,n=!1){return n||(e-=Gt.from(this.grid.bodyContainer,null,!0).roundPx(1).top,e+=this.grid.scrollable.y),e=Gn.roundPx(e),this.rows.find((n=>e>=n.top&&e<n.bottom))}getRowFor(e){return e instanceof HTMLElement?this.getRowFromElement(e):this.getRowById(e)}getNextRow(e){const n="number"==typeof e?e:e.index;return this.getRow((n+1)%this.rowCount)}get topRow(){return this.rows[0]}get bottomRow(){const e=Math.min(this.rowCount,this.store.count);return this.rows[e-1]}get firstVisibleRow(){return this.rows.find((e=>e.bottom>Math.ceil(this.grid.scrollable.y)))}get firstFullyVisibleRow(){return this.rows.find((e=>e.top>=Math.ceil(this.grid.scrollable.y)))}get lastVisibleRow(){const{grid:e}=this;return oe.findLast(this.rows,(n=>n.top<e.scrollable.y+e.bodyHeight))}get lastFullyVisibleRow(){const{grid:e}=this;return oe.findLast(this.rows,(n=>n.bottom<e.scrollable.y+e.bodyHeight))}offsetRows(e){if(0!==e){const{rows:n}=this,{length:r}=n;for(let i=0;i<r;i++)n[i].offset(e)}this.trigger("offsetRows",{offset:e})}get prependBufferHeight(){return this.prependRowBuffer*this.rowOffsetHeight}get appendBufferHeight(){return this.appendRowBuffer*this.rowOffsetHeight}get rowHeight(){return this._rowHeight}set rowHeight(e){const n=this,{grid:r,fixedRowHeight:i}=n,o=n.rowHeight;if(o!==e){if(Et.assertNumber(e,"rowHeight"),e<10&&(e=10),n.trigger("beforeRowHeight",{height:e}),n.minRowHeight=n._rowHeight=e,i&&(n.averageRowHeight=e),n.rows.length){const s=r.scrollable.y,a=n.getRowAt(s,!0),l=a?a.top-s:0;let c,d;i?(c=e,d=o):(d=c=n.averageRowHeight,n.clearKnownHeights(),c*=e/o),n.calculateRowCount(!1,!0,!0),n.topRow.setTop(n.topRow.dataIndex*(c+r._rowBorderHeight),!0),n.refresh();s*(c/d)!==s&&r.scrollRowIntoView(a.id,{block:"start",edgeOffset:l})}n.trigger("rowHeight",{height:e,oldHeight:o})}}get rowOffsetHeight(){return Math.floor(this.preciseRowOffsetHeight)}get preciseRowOffsetHeight(){return(this.averageRowHeight||this._rowHeight)+this.grid._rowBorderHeight}get minRowOffsetHeight(){return(this.minRowHeight||this._rowHeight)+this.grid._rowBorderHeight}get allHeightsKnown(){return this.fixedRowHeight||this.heightMap.size>=this.store.count}storeKnownHeight(e,n){const r=this,{heightMap:i}=r;r.fixedRowHeight||(i.has(e)&&(r.totalKnownHeight-=i.get(e)),i.set(e,n),r.totalKnownHeight+=n,n<r.minRowHeight&&(r.minRowHeight=n),r.averageRowHeight=r.totalKnownHeight/i.size)}getOffsetHeight(e){const n=this;return(e&&n.heightMap.get(e.id)||e&&n.grid.getRowHeight(e)||n.averageRowHeight||n.rowHeight)+n.grid._rowBorderHeight}invalidateKnownHeight(e){const n=this;if(!n.fixedRowHeight){const{heightMap:r}=n;(e=oe.asArray(e)).forEach((e=>{e&&r.has(e.id)&&(n.totalKnownHeight-=r.get(e.id),r.delete(e.id))})),n.averageRowHeight=n.totalKnownHeight/r.size}}clearKnownHeights(){this.heightMap.clear(),this.averageRowHeight=this.totalKnownHeight=0}calculateTop(e){if(this.fixedRowHeight)return e*this.rowOffsetHeight;const{store:n}=this;let r=0;for(let i=0;i<e;i++){const e=n.getAt(i);r+=this.getOffsetHeight(e)}return Math.floor(r)}getRecordCoords(e,n=!1,r=!1){const i=this,o=i.getRowById(e);let s=i.client._bodyRectangle;return n||(s=i.client.refreshBodyRectangle()),o?new Gt(s.x,n?Math.round(o.top):Math.round(o.top+s.y-i.client.scrollable.y),s.width,o.offsetHeight):i.getRecordCoordsByIndex(i.store.indexOf(e),n,r)}getRecordCoordsByIndex(e,n=!1,r=!1){const i=this,{topRow:o,bottomRow:s}=i,a=i.client._bodyRectangle,{id:l}=i.store.getAt(e),c=i.preciseRowOffsetHeight,d=o.dataIndex,u=s.dataIndex,h=e>u?{index:e-u-1,y:s.bottom,from:"bottomRow"}:e>d/2?{index:e-d,y:o.top,from:"topRow"}:{index:e,y:0,from:"top"},g=i.allHeightsKnown&&!r?i.calculateTop(e):Math.floor(h.y+h.index*c),p=new Gt(a.x,n?g:g+a.y-i.client.scrollable.y,a.width,Math.floor(i.heightMap.get(l)||c));return p.virtual=!0,p.block=p.bottom<a.y?"start":p.y>a.bottom?"end":"nearest",p}get totalHeight(){return this._totalHeight}forEach(e){this.rows.forEach(e)}[Symbol.iterator](){return this.rows[Symbol.iterator]()}refreshCell(e,n){const r=new Bd({grid:this.grid,record:e,columnId:n});return Boolean(r.cell&&r.row.renderCell(r))}returnToTop(){const e=this;e.topIndex=0,e.lastScrollTop=0,e.topRow&&(e.topRow.dataIndex=0,e.topRow.setTop(0,!0)),e.refresh(),e.grid.scrollable.y=0}renderFromRecord(e){const n=this.getRowById(e.id);n&&this.renderFromRow(n)}renderFromRow(e=null){const n=this,{rows:r,store:i}=n,o=i.count;if(0===n.calculateRowCount(!1,o<r.length,!0))return void n.estimateTotalHeight(!0);const s=e?r.indexOf(e):0;let a=e?e.dataIndex:r[0].dataIndex;const l=o-a-1,c=Math.min(r.length-1,s+l);let d,u=r.length-c-1,h=s>0?r[s-1].bottom:r[s].top;for(let e=s;e<=c;e++)d=r[e],d.dataIndex=a,d.setTop(h,!0),d.render(a,i.getAt(a++),!1),h+=d.offsetHeight;for(;u-- >0;)n.displayRecordAtTop();n.bottomRow.bottom<n.viewHeight&&n.calculateRowCount(),n.estimateTotalHeight(!0),n.trigger("renderDone")}renderRows(e){let n,r=!1;(e=Array.from(e)).sort(((e,n)=>e.dataIndex-n.dataIndex));for(const i of e)n=i.height,i.render(null,null,!1),r|=i.height!==n;r&&this.translateFromRow(e[0]),this.trigger("renderDone")}translateFromRow(e,n=!1){const r=this;let i,o,s=e.bottom;for(o=e.dataIndex+1,i=r.getRow(o);i;i=r.getRow(++o))s=i.translate(s);n||r.estimateTotalHeight(!0)}refresh(){const e=this,{topRow:n}=e;n&&!e.grid.refreshSuspended&&(e.idMap={},e.renderFromRow(n),e.trigger("refresh"))}jumpToPosition(e,n){const r=this,{store:i,heightMap:o}=r,s=i.count;if(r.allHeightsKnown&&!r.fixedRowHeight){const n=e-r.prependBufferHeight,a=r.grid._rowBorderHeight;let l=0,c=0;for(;l<n;){const e=i.getAt(c);l+=o.get(e.id)+a,c++}const d=Math.max(Math.min(c,s-r.rowCount),0);r.lastScrollTop=e,r.topRow.dataIndex=r.topIndex=d,r.topRow.setTop(r.calculateTop(d),!1),r.refresh()}else{const i=r.preciseRowOffsetHeight,o=null==n?Math.floor(e/i)-r.prependRowBuffer:n-Math.floor(r.rowCount/2),a=Math.max(Math.min(o,s-r.rowCount),0),l=r.client.scrollable.y,c=Math.min(r.client._bodyRectangle.height+l+r.appendBufferHeight,r.totalHeight);if(r.lastScrollTop=e,r.topRow.dataIndex=r.topIndex=a,r.topRow.setTop(Math.floor(a*i),!1),r.refresh(),r.bottomRow.bottom<c)for(r.calculateRowCount(!1,!1,!1);r.bottomRow.bottom<c&&r._rows[r.prependRowBuffer].top<l&&r.bottomRow.dataIndex<s-1;)r.displayRecordAtBottom();r.estimateTotalHeight()}if(null!=n){const{scrollable:i}=r.grid,o=r.getRow(n),s=o&&Gt.from(o._elementsArray[0]).center.y,a=i.viewport.center.y;o&&(i.y=e=Math.floor(i.y+(s-a)))}return e}warpIfNeeded(e){const n=this,r={newScrollTop:e,deltaTop:e-n.lastScrollTop};if(Math.abs(r.deltaTop)>n.rowCount*n.rowOffsetHeight*3){let i;n.scrollTargetRecordId&&(i=n.store.indexOf(n.scrollTargetRecordId)),n.grid.onFocusedRowDerender(),r.newScrollTop=n.jumpToPosition(e,i),r.deltaTop=0}return r}updateRenderedRows(e,n,r=!1){const i=this,o=i.client._bodyRectangle;if(0===i.rowCount)return 0;let s=i.totalHeight;if(n||Math.abs(e-i.lastScrollTop)>=i.rowOffsetHeight||i.topRow.top>e||i.bottomRow.bottom<e+o.height){const n=i.warpIfNeeded(e);i.scrollTargetRecordId=null,i.lastScrollTop=n.newScrollTop,n.deltaTop>0?i.fillBelow(n.newScrollTop):n.deltaTop<0&&i.fillAbove(n.newScrollTop),i.fixedRowHeight||r||i.correctError(n,o,e),s=i.estimateTotalHeight()}return s}correctError(e,n,r){const i=this;let o=0;(i.allHeightsKnown||e.deltaTop<0&&r<2*n.height||e.deltaTop>0&&r>i.totalHeight-2*n.height-3)&&(o=i.topRow.top-i.calculateTop(i.topRow.dataIndex)),o&&(i.offsetRows(-o),i.grid.scrollable.y=i.lastScrollTop=i.grid.scrollable.y-o)}fillAbove(e){const n=this,r=e-n.topRow.top-n.prependBufferHeight;let i=0;for(;i>r&&n.topIndex>0;)i-=n.displayRecordAtTop();n.trigger("renderDone")}fillBelow(e){const n=this,r=e-n.topRow.top-n.prependBufferHeight,i=n.store.count,o=n.rowCount;let s=0;for(;s<r&&n.topIndex+o<i&&n.topRow.top+n.topRow.offsetHeight<e;)s+=n.displayRecordAtBottom();n.trigger("renderDone")}estimateTotalHeight(e=!1){const n=this;if(n.grid.renderingRows)return;const r=n.store.count,i=r-n.heightMap.size,{bottomRow:o}=n;let s;if(n.fixedRowHeight)s=r*n.rowOffsetHeight;else{if(s=n.totalKnownHeight+n.heightMap.size*n.grid._rowBorderHeight+i*n.preciseRowOffsetHeight,o&&i){const e=o.bottom;(e>s||n.topIndex+n.rowCount>=r&&s>e&&e>0)&&(s=e,o.dataIndex<r-1&&(s+=(r-1-o.dataIndex)*n.preciseRowOffsetHeight))}s=Math.floor(s)}return s!==n.totalHeight&&!1!==n.trigger("changeTotalHeight",{totalHeight:s,immediate:e})&&(n._totalHeight=s),s}displayRecordAtTop(){var e;const n=this,{grid:r}=n,i=n.topIndex-1,o=n.store.getAt(i),s=n.bottomRow,a=s.top;return n.trigger("beforeTranslateRow",{row:s,newRecord:o}),s.dataIndex===(null==(e=r.focusedCell)?void 0:e.rowIndex)&&r.onFocusedRowDerender(),s._top=n.topRow.top-n.getOffsetHeight(o),s.estimatedTop=!n.fixedRowHeight,s.render(i,o,!1),s._top=a,s.setBottom(n.topRow.top),s.estimatedTop=!1,n.topIndex--,n._rows.unshift(n._rows.pop()),s.offsetHeight}displayRecordAtBottom(){var e;const n=this,{grid:r}=n,i=n.topIndex+n.rowCount,o=n.store.getAt(i),s=n.topRow;return n.trigger("beforeTranslateRow",{row:s,newRecord:o}),s.dataIndex===(null==(e=r.focusedCell)?void 0:e.rowIndex)&&r.onFocusedRowDerender(),s.dataIndex=i,s.setTop(n.bottomRow.bottom),s.render(i,o,!1),n.topIndex++,n._rows.push(n._rows.shift()),s.offsetHeight}};fh.featureClass="",fh._$name="RowManager";var bh={x:1},subGridFilter=e=>e.isSubGrid,vh=class extends Xo{addScroller(e){(this.xScrollers||(this.xScrollers=[])).push(e)}addPartner(e,n=bh){if("string"==typeof n&&(n={[n]:1}),n.x){e.owner.initScroll();const n=this.widget.items.filter(subGridFilter),r=e.widget.items.filter(subGridFilter);for(let e=0,{length:i}=n;e<i;e++)n[e].scrollable.addPartner(r[e].scrollable,"x")}n.y&&super.addPartner(e,"y")}removePartner(e){this.xScrollers.forEach(((n,r)=>{n.isDestroyed||n.removePartner(e.xScrollers[r])})),super.removePartner(e)}updateOverflowX(e){var n;const r=!1===e;null==(n=this.xScrollers)||n.forEach((e=>e.overflowX=r?"hidden":"hidden-scroll")),this.widget.virtualScrollers.classList.toggle("b-hide-display",r)}scrollIntoView(e,n){if(e.nodeType!==Element.ELEMENT_NODE||!this.element.contains(e))return super.scrollIntoView(e,n);for(const r of this.xScrollers)if(r.element.contains(e))return r.scrollIntoView(e,n)}hasOverflow(e="y"){return"y"===e&&this.scrollHeight>this.clientHeight}set x(e){this.xScrollers&&(this.xScrollers[0].x=e)}get x(){return this.xScrollers?this.xScrollers[0].x:0}};vh._$name="GridScroller";var yh=class extends ph{get subGrid(){return this._subGrid}set subGrid(e){this._subGrid=this.owner=e}get region(){var e;return null==(e=this.subGrid)?void 0:e.region}changeElement(e,n){const{region:r}=this;return this.getConfig("columns"),super.changeElement({className:{"b-grid-header-scroller":1,[`b-grid-header-scroller-${r}`]:r},children:[{reference:"headersElement",className:{"b-grid-headers":1,[`b-grid-headers-${r}`]:r},dataset:{region:r,reference:"headersElement",maxDepth:this.maxDepth}}]},n)}get overflowElement(){return this.headersElement}getColumnConfig(e){const{id:n,align:r,resizable:i,isLeaf:o,isParent:s,isLastInSubGrid:a,cls:l,childLevel:c,field:d,tooltip:u,children:h,isFocusable:g,grid:p}=e,m=null==p?void 0:p.focusedCell,f=-1===(null==m?void 0:m.rowIndex)&&(null==m?void 0:m.column)===e;if(e.isVisible)return{className:{"b-grid-header":1,"b-grid-header-parent":s,[`b-level-${c}`]:1,[`b-depth-${e.meta.depth}`]:1,[`b-grid-header-align-${r}`]:r,"b-grid-header-resizable":i&&o,[l]:l,"b-collapsible":e.collapsible,"b-last-parent":s&&a,"b-last-leaf":o&&a},role:g?"columnheader":"presentation","aria-sort":"none","aria-label":e.ariaLabel,[g?"tabIndex":""]:f?0:-1,dataset:{...fc.encodeConfig(u),columnId:n,[d?"column":""]:d},children:[{className:"b-grid-header-text",children:[{[p&&g?"id":""]:`${null==p?void 0:p.id}-column-${e.id}`,className:"b-grid-header-text-content"}]},h?{className:"b-grid-header-children",children:h.map((e=>this.getColumnConfig(e))),syncOptions:{syncIdField:"columnId"}}:null,{className:"b-grid-header-resize-handle"}]}}calculateMinWidthForSafari(){let e=0;return this.columns.visibleColumns.forEach((n=>{e+=n.calculateMinWidth()})),e}fixHeaderWidths(){this.fixCellWidths()}refreshHeaders(){const e=this;e.columns.traverse((n=>{const r=e.getBarCellElement(n.id);if(r){let i=n.headerText;n.headerRenderer&&(i=n.headerRenderer.call(n.thisObj||e,{column:n,headerElement:r})),n.headerWidgetMap&&Object.values(n.headerWidgetMap).forEach((e=>{e.render(n.textWrapper)})),n.icon&&(i=`<i class="${w.encodeHtml(n.icon)}"></i>`+(i||""));const o=r.querySelector(".b-grid-header-text-content");o&&(o.innerHTML=i||"")}})),e.fixHeaderWidths()}get columns(){const e=this,n=super.columns;return e.columnsDetacher||(e.columnsDetacher=n.ion({change(){e.initDepths()},thisObj:e}),e.initDepths()),n}set columns(e){super.columns=e}initDepths(e=this.columns.topColumns,n=null){const r=this;let i=0;(null==n?void 0:n.meta)&&n.meta.depth++;for(const o of e){const{meta:e}=o;e.depth=0,o.children&&(r.initDepths(o.children.filter(r.columns.chainedFilterFn),o),e.depth&&n&&(n.meta.depth+=e.depth)),e.depth>i&&(i=e.depth)}return n||(r.maxDepth=i),i}getHeader(e){return this.getBarCellElement(e)}get contentElement(){return this.element.firstElementChild}refreshContent(){const e=this;$o.sync({domConfig:{children:e.columns.topColumns.map((n=>e.getColumnConfig(n))),onlyChildren:!0},targetElement:e.contentElement,strict:!0,syncIdField:"columnId",releaseThreshold:0}),e.refreshHeaders()}onPaint({firstPaint:e}){e&&this.refreshContent()}};__publicField(yh,"$name","Header"),__publicField(yh,"type","gridheader"),yh.initClass(),yh._$name="Header";var wh={touchstart:"onElementTouchStart",touchmove:"onElementTouchMove",touchend:"onElementTouchEnd",pointerover:"onElementMouseOver",mouseout:"onElementMouseOut",mousedown:"onElementMouseDown",mousemove:"onElementMouseMove",mouseup:"onElementMouseUp",click:"onHandleElementClick",dblclick:"onElementDblClick",keyup:"onElementKeyUp",keypress:"onElementKeyPress",contextmenu:"onElementContextMenu",pointerdown:"onElementPointerDown",pointerup:"onElementPointerUp"},Ch=["pageX","pageY","clientX","clientY","screenX","screenY"];function toggleHover(e,n=!0){null==e||e.classList.toggle("b-hover",n)}function setCellHover(e,n,r=!0){n&&e&&toggleHover(n.getCell(e),r)}var GridElementEvents_default=e=>class GridElementEvents extends(e||re){static get $name(){return"GridElementEvents"}static get configurable(){return{hoveredCell:null,longPressTime:400,enableUndoRedoKeys:!0,keyMap:{"Ctrl+z":"undoRedoKeyPress","Ctrl+Shift+z":"undoRedoKeyPress"," ":{handler:"clickCellByKey",weight:1e3}}}}initInternalEvents(){const e=Object.keys(wh),n=e.length,r={element:this.bodyElement,thisObj:this};for(let i=0;i<n;i++){const n=e[i];r[n]={handler:"handleEvent"},n.startsWith("touch")&&(r[n].passive=!1)}cn.on(r),cn.on({focusin:"onGridBodyFocusIn",element:this.bodyElement,thisObj:this,capture:!0})}getCellDataFromEvent(e,n=!1){var r;const i=this,{columns:o}=i,{target:s}=e;let a=s.closest(".b-grid-cell");if(!a&&n&&!s.classList.contains("b-grid-row")&&!s.classList.contains("b-grid-subgrid")){const{top:n,left:s,right:l,bottom:c}=i.bodyContainer.getBoundingClientRect();let d,{x:u,y:h}=e;u>=s&&u<=l?h=d=Math.ceil(i[(h<n?"first":"last")+"FullyVisibleRow"].element.getBoundingClientRect().y):h>=n&&h<=c&&(u=d=Math.ceil(o.visibleColumns[u<s?0:o.visibleColumns.length-1].element.getBoundingClientRect().x)),void 0!==d&&(a=null==(r=Gn.childFromPoint(e.target,e.offsetX,e.offsetY))?void 0:r.closest(".b-grid-cell"))}if(a){const e=Si.get(a),{id:n,columnId:r}=e,s=i.store.getById(n),l=o.getById(r);return s?{cellElement:a,cellData:e,columnId:r,id:n,record:s,column:l,cellSelector:{id:n,columnId:r}}:null}}getHeaderDataFromEvent(e){const n=e.target.closest(".b-grid-header");if(n){const e=Et.assign({},n.dataset),{columnId:r}=e,i=this.columns.getById(r);return i?{headerElement:n,headerData:e,columnId:r,column:i}:null}}handleEvent(e){!this.disabled&&wh[e.type]&&this[wh[e.type]](e)}onElementTouchStart(e){const n=this,r=n.getCellDataFromEvent(e);Gn.isTouchEvent=!0,1===e.touches.length&&(n.longPressTimeout=n.setTimeout((()=>{n.onElementLongPress(e),e.preventDefault(),n.longPressPerformed=!0}),n.longPressTime)),r&&!e.defaultPrevented&&n.onFocusGesture(e)}onElementTouchMove(e){const n=this,{lastTouchTarget:r}=n,i=e.changedTouches[0],{pageX:o,pageY:s}=i,a=document.elementFromPoint(o,s);if(n.longPressTimeout&&(n.clearTimeout(n.longPressTimeout),n.longPressTimeout=null),a!==r){if(r){const n=new MouseEvent("mouseout",Et.copyProperties({relatedTarget:a,pointerType:"touch",bubbles:!0},i,Ch));n.preventDefault=()=>e.preventDefault(),null==r||r.dispatchEvent(n)}if(a){const n=new MouseEvent("mouseover",Et.copyProperties({relatedTarget:r,pointerType:"touch",bubbles:!0},i,Ch));n.preventDefault=()=>e.preventDefault(),null==a||a.dispatchEvent(n)}}n.lastTouchTarget=a}onElementTouchEnd(e){const n=this;n.longPressPerformed&&(e.cancelable&&e.preventDefault(),n.longPressPerformed=!1),n.longPressTimeout&&(n.clearTimeout(n.longPressTimeout),n.longPressTimeout=null)}onElementLongPress(e){}triggerCellMouseEvent(e,n,r=this.getCellDataFromEvent(n)){var i;const o=this;if(r){const s=o.columns.getById(r.columnId),a={grid:o,record:r.record,column:s,cellSelector:r.cellSelector,cellElement:r.cellElement,target:n.target,event:n};o.trigger("cell"+w.capitalize(e),a),"click"===e&&(null==(i=s.onCellClick)||i.call(s,a))}}onElementMouseDown(e){const n=this,r=n.getCellDataFromEvent(e);n.skipFocusSelection=!0,n.isScrollbarOrRowBorderOrSplitterClick(e)?e.preventDefault():(n.triggerCellMouseEvent("mousedown",e,r),r&&!e.defaultPrevented&&n.onFocusGesture(e))}isScrollbarOrRowBorderOrSplitterClick({target:e,x:n,y:r}){if(e.closest(".b-grid-splitter")||e.matches(".b-grid-row, .b-virtual-width"))return!0;if(e.matches(".b-vertical-overflow")){return n>e.getBoundingClientRect().right-Gn.scrollBarWidth}if(e.matches(".b-horizontal-overflow")){return r>e.getBoundingClientRect().bottom-Gn.scrollBarWidth-1}}onElementMouseMove(e){this.mouseMoveEvent=e}onElementMouseUp(e){}onElementPointerDown(e){}onElementPointerUp(e){}onHandleElementClick(e){!1!==this.trigger("beforeElementClick",{event:e})&&this.onElementClick(e)}onElementClick(e){const n=this,r=n.getCellDataFromEvent(e);r&&n.triggerCellMouseEvent("click",e,r)}onFocusGesture(e){var n;const r=this,{navigationEvent:i}=r,{target:o}=e,s=2===e.button,a=!s&&o.matches(".b-icon-tree-expand, .b-icon-tree-collapse"),l=!document.hasFocus()&&c.isMac&&s;if(a||l)e.preventDefault();else{r.navigationEvent=e;const a=new Bd(o);if(s||(null==(n=r.focusedCell)?void 0:n.equals(a))){let n;globalThis.TouchEvent&&e instanceof MouseEvent&&i instanceof TouchEvent&&o===i.target&&(n={doSelect:!1}),r.focusCell(a,n)}}}onElementDblClick(e){const{target:n}=e;if(this.triggerCellMouseEvent("dblClick",e),n.classList.contains("b-grid-header-resize-handle")){const e=n.closest(".b-grid-header");this.columns.getById(e.dataset.columnId).resizeToFitContent()}}onElementMouseOver(e){var n;if(!this.scrolling){const r=this,{hoveredCell:i}=r,o=("number"!=typeof e.buttons||0===e.buttons)&&"touch"!==e.pointerType;let s=e.target.closest(".b-grid-cell");!s&&e.target.classList.contains("b-grid-row")&&(s=null==(n=Gn.childFromPoint(e.target,e.offsetX,e.offsetY-2))?void 0:n.closest(".b-grid-cell")),s&&(o&&(r.hoveredCell=s),!i&&r.hoveredCell&&r.triggerCellMouseEvent("mouseOver",e)),r.trigger("mouseOver",{event:e})}}onElementMouseOut(e){var n;const r=this,{hoveredCell:i}=r,{target:o,relatedTarget:s}=e;(null==s?void 0:s.closest(".b-grid-cell"))&&o.matches(".b-grid-row")||(s&&o.matches(".b-grid-cell")&&!o.contains(s)?(null==s?void 0:s.matches(".b-grid-row"))||(r.hoveredCell=s.closest(".b-grid-cell")):(null==s?void 0:s.matches(".b-grid-row,.b-grid-cell"))||(null==(n=r.hoveredCell)?void 0:n.contains(s))||(r.hoveredCell=null)),r.scrolling||(i&&!r.hoveredCell&&r.triggerCellMouseEvent("mouseOut",e),r.trigger("mouseOut",{event:e}))}updateHoveredCell(e,n){var r,i,o,s;const a=this,{selectionMode:l}=a,c=l.rowNumber&&(null==(r=a.columns.find((e=>"rownumber"==e.type)))?void 0:r.id),d=l.checkbox&&(null==(i=a.checkboxSelectionColumn)?void 0:i.id);if(n){toggleHover(n,!1);const e=Si.get(n),{row:r}=e;r&&!r.isDestroyed&&(setCellHover(c,r,!1),setCellHover(d,r,!1)),(null==e?void 0:e.columnId)&&toggleHover(null==(o=a.columns.getById(e.columnId))?void 0:o.element,!1)}if(a._hoveredRow&&!a._hoveredRow.isDestroyed&&a._hoveredRow.removeCls("b-hover"),a._hoveredRow=null,e&&!a.scrolling){const n=Si.get(e),{row:r}=n;r?l.cell&&n.columnId!==c&&n.columnId!==d?(toggleHover(e),setCellHover(d,r),setCellHover(c,r),toggleHover(null==(s=a.columns.getById(n.columnId))?void 0:s.element)):(a._hoveredRow=r,r.addCls("b-hover")):a.hoveredCell=null}}keyMapOnKeyDown(e){this.onElementKeyDown(e),super.keyMapOnKeyDown(e)}onElementKeyDown(e){var n,r;if(e.handled)return;const i=this,o=i.focusedCell;if((null==o?void 0:o.isCell)&&!o.isActionable){const s=o.cell;null==(r=(n=i.columns.getById(s.dataset.columnId)).onCellKeyDown)||r.call(n,{event:e,cellElement:s})}}undoRedoKeyPress(e){var n;const{stm:r}=this.store;return!(!r||!this.enableUndoRedoKeys||(null==(n=this.features.cellEdit)?void 0:n.isEditing))&&(r.onUndoKeyPress(e),!0)}clickCellByKey(e){const n=this,r=n.focusedCell,i=null==r?void 0:r.cell,o=n.columns.getById(i.dataset.columnId);return!(!(null==r?void 0:r.isCell)||r.isActionable||!o.onCellClick)&&(o.onCellClick({grid:n,column:o,record:n.store.getById(r.id),cellElement:i,target:e.target,event:e}),!0)}onElementKeyPress(e){}onElementKeyUp(e){}onElementContextMenu(e){const n=this,r=n.getCellDataFromEvent(e);r&&(n.triggerCellMouseEvent("contextMenu",e,r),Gn.isTouchEvent&&n.onFocusGesture(e))}onInternalResize(e,n,r,i,o){const s=this;s._devicePixelRatio&&s._devicePixelRatio!==globalThis.devicePixelRatio&&Gn.resetScrollBarWidth(),s._devicePixelRatio=globalThis.devicePixelRatio,s._bodyRectangle=Gt.client(s.bodyContainer),super.onInternalResize(...arguments),r!==o&&(s._bodyHeight=s.bodyContainer.offsetHeight,s.isPainted&&s.rowManager.initWithHeight(s._bodyHeight)),s.refreshVirtualScrollbars(),n!==i&&s.setTimeout((()=>{s.isDestroyed||s.updateResponsive(n,i)}),0)}get widgetClass(){}},Sh={string:1,object:1,function:1},GridFeatures_default=e=>class GridFeatures extends(e||re){static get $name(){return"GridFeatures"}set features(e){const n=this,r=du.getInstanceDefaultFeatures(this);e=n._features=Et.assign({},e),r&&Object.keys(r).forEach((n=>{n in e||(e[n]=!0)}));const i=du.getInstanceFeatures(this);for(const r of Object.keys(e)){const o=e[r];if(o){const s=!globalThis.__bryntum_code_editor_changed;if(w.uncapitalize(r)!==r){const e=`Invalid feature name '${r}', must start with a lowercase letter`;if(s)throw new Error(e);console.error(e),n._errorDuringConfiguration=e}const a=i[r];if(!a){const e=`Feature '${r}' not available, make sure you have imported it`;if(s)throw new Error(e);return console.error(e),void(n._errorDuringConfiguration=e)}Reflect.defineProperty(e,r,n.createFeatureInitializer(e,r,a,o))}}}get features(){return this._features}createFeatureInitializer(e,n,r,i){const o=[this],s=r.prototype.construct;return!0===i&&(i={}),Sh[typeof i]&&(o[1]=i),{configurable:!0,get:()=>(delete e[n],r.prototype.construct=function(...i){e[n]=this,s.apply(this,i),r.prototype.construct=s},new r(...o))}}hasFeature(e){const{features:n}=this;if(n){const n=Object.getOwnPropertyDescriptor(this.features,e);if(n)return Boolean(n.value||n.get)}return!1}hasActiveFeature(e){var n,r;return Boolean((null==(n=this.features)?void 0:n[e])&&!(null==(r=this.features)?void 0:r[e].disabled))}getConfigValue(e,n){var r,i;if("features"===e){const e={};for(const o in this.features){const s=null==(i=null==(r=this.features[o])?void 0:r.getCurrentConfig)?void 0:i.call(r,n);s?Et.isEmpty(s)?du.isDefaultFeatureForInstance(this.features[o].constructor,this)||(e[o]=!0):e[o]=s:e[o]=!1}return e}return super.getConfigValue(e,n)}get widgetClass(){}},xh=Object.freeze({}),Dh=Object.freeze({x:!1,y:!1}),containedFocusable=function(e){return this.focusableFinderCell.contains(e)?Gn.isFocusable(e)&&!e.disabled?Gn.NodeFilter.FILTER_ACCEPT:Gn.NodeFilter.FILTER_SKIP:Gn.NodeFilter.FILTER_REJECT},GridNavigation_default=e=>{var n;return __publicField(n=class extends(e||re){static get $name(){return"GridNavigation"}onStoreRecordIdChange(e){var n;null==(n=super.onStoreRecordIdChange)||n.call(this,e);const{focusedCell:r}=this,{oldValue:i,value:o}=e;r&&r.id===i&&(r._id=o)}onFocusedRowDerender(){const e=this,{focusedCell:n}=e;if(null!=(null==n?void 0:n.id)&&n.cell){const r=n.cell.contains(Gn.getActiveElement(e));if(e.hideHeaders)r&&e.revertFocus();else{const i=e.normalizeCellContext({rowIndex:-1,columnIndex:r?n.columnIndex:0});r?e.focusCell(i):i.cell.tabIndex=0}n.cell.tabIndex=-1}}navigateFirstCell(){this.focusCell(Bd.FIRST_CELL)}navigateFirstColumn(){this.focusCell(Bd.FIRST_COLUMN)}navigateLastCell(){this.focusCell(Bd.LAST_CELL)}navigateLastColumn(){this.focusCell(Bd.LAST_COLUMN)}navigatePrevPage(){this.focusCell(Bd.PREV_PAGE)}navigateNextPage(){this.focusCell(Bd.NEXT_PAGE)}activateHeader(e){var n;if(e.target.classList.contains("b-grid-header")&&this.focusedCell.isColumnHeader){const{column:r}=this.focusedCell;null==(n=r.onKeyDown)||n.call(r,e),this.getHeaderElement(r.id).click()}return!1}onEscape(e){const{focusedCell:n}=this;!e.target.closest(".b-dragging")&&(null==n?void 0:n.isActionable)&&(e.stopImmediatePropagation(),this._focusedCell=null,this.focusCell({rowIndex:n.rowIndex,column:n.column},{disableActionable:!0}))}onTab(e){const{target:n}=e,{focusedCell:r,bodyElement:i}=this,{isActionable:o,actionTargets:s}=r;if(o&&Gn.isEditable(n)&&!n.readOnly&&n===s[s.length-1])e.preventDefault(),this.navigateRight(e);else if(!o||n===s[s.length-1])return i.style.display="none",this.requestAnimationFrame((()=>i.style.display="")),!1}onShiftTab(e){const n=this,{target:r}=e,{focusedCell:i,bodyElement:o}=n,{cell:s,isActionable:a,actionTargets:l}=i,c=a&&Gn.isEditable(r)&&!r.readOnly,d=0===i.columnIndex&&i.rowIndex===(n.hideHeaders?0:-1);if(!d&&c&&r===l[0])e.preventDefault(),n.navigateLeft(e);else if(!a||r===l[0]){const e=!d&&!n.hideHeaders&&n.focusCell({rowIndex:-1,column:0},{disableActionable:!0});return e?(e.cell.tabIndex=-1,s.tabIndex=0,n._focusedCell=i):(o.style.display="none",n.requestAnimationFrame((()=>o.style.display=""))),!1}}onSpace(e){return this.focusedCell.isActionable||e.preventDefault(),!1}get focusedCell(){return this._focusedCell}get isActionableLocation(){var e;return null==(e=this._focusedCell)?void 0:e.isActionable}set focusedCell(e){this.focusCell(e)}get focusedRecord(){var e;return null==(e=this._focusedCell)?void 0:e.record}get cellCSSSelector(){const e=this._focusedCell;return e?`[data-index=${e.rowIndex}] [data-column-id=${e.columnId}]`:""}afterHide(){super.afterHide(...arguments),this.lastFocusedCell=null}isFocused(e){var n;return Boolean(null==(n=this._focusedCell)?void 0:n.equals(this.normalizeCellContext(e)))}get focusElement(){var e;if(!this.isDestroying){let n;n=this.store.count&&this._focusedCell?this._focusedCell.target:this.normalizeCellContext({rowIndex:-1,columnIndex:(null==(e=this._focusedCell)?void 0:e.columnIndex)||0}).target;const r=super.focusElement;return!r||n&&n.compareDocumentPosition(r)!==Node.DOCUMENT_POSITION_PRECEDING?n:r}}onPaint({firstPaint:e}){var n;const r=this;null==(n=super.onPaint)||n.call(this,...arguments);const i=this.normalizeCellContext({rowIndex:r.hideHeaders?0:-1,column:r.hideHeaders?0:r.columns.find((e=>!e.hidden&&e.isFocusable))});if(i.cell){r._focusedCell=i;const{target:e}=i;e===i.cell&&(i.cell.tabIndex=0)}}onGridBodyFocusIn(e){var n,r,i;const o=this,{bodyElement:s}=o,a=o.focusedCell,l=(null==a?void 0:a.initialTarget)||(null==a?void 0:a.target),{target:c,relatedTarget:d}=e,u=c.closest(o.focusableSelector);if(u&&(!or.currentMouseDown||or.isMouseDown(0)||or.isMouseDown(2))){const h=new Bd(c),{cell:g}=h,p=null==a?void 0:a.cell,m=h.actionTargets=o.findFocusables(u),f=(!o._fromFocusCell||o.selectOnFocus)&&(c===g||o._selectActionCell)&&!(null==c?void 0:c._isRevertingFocus);if(!o.store.getById(u.parentNode.dataset.id)&&g!==u)return void g.focus({preventScroll:!0});if(c.matches(o.focusableSelector)){if(o.disableActionable)h._target=g;else if(m.length)return o._selectActionCell=(null==(n=or.currentMouseDown)?void 0:n.target)===c,m[0].focus(),void delete o._selectActionCell}else{if((null==a?void 0:a.target)&&d&&(!or.isMouseDown()||!s.contains(null==(r=or.currentMouseDown)?void 0:r.target))&&!s.contains(d)&&!h.equals(a))return void l.focus();h._target=c}if(p&&(p.classList.remove("b-focused"),p.tabIndex=-1),g&&(g.classList.add("b-focused"),h.column.onCellFocus(h),g===c&&(g.tabIndex=0),g.contains(e.relatedTarget)&&l===c))return;o._focusedCell=h,null==(i=o.onCellNavigate)||i.call(o,o,a,h,f),o.trigger("navigate",{lastFocusedCell:a,focusedCell:h,event:e})}else c.closest(".b-rowexpander-body")||null==l||l.focus()}findFocusables(e){const{focusableFinder:n}=this,r=[];n.currentNode=this.focusableFinderCell=e;for(let e=n.nextNode();e;e=n.nextNode())r.push(e);return r}get focusableFinder(){const e=this;return e._focusableFinder||(e._focusableFinder=e.setupTreeWalker(e.bodyElement,Gn.NodeFilter.SHOW_ELEMENT,{acceptNode:containedFocusable.bind(e)})),e._focusableFinder}restoreActiveItem(e=this._focusedCell){if(this.rowManager.count)return isNaN(e)?e.isModel||(e=this.store.getById(e)):e=this.store.getAt(e),this.focusCell(e)}focusCell(e,n=xh){var r,i;const o=this,{_focusedCell:s}=o,{scroll:a,disableActionable:l}=n;if(-1===(null==e?void 0:e.rowIndex)&&o.hideHeaders)return void o.revertFocus();e="number"==typeof e&&(null==s?void 0:s.isLocation)?s.move(e):o.normalizeCellContext(e);const c="doSelect"in n?n.doSelect:!e.isActionable||e.initialTarget===e.cell;if(e.equals(s))return null==(r=o.onCellNavigate)||r.call(o,o,s,e,c),s;const d=o.getSubGridFromColumn(e.columnId),{cell:u}=e,h=u||o.getCell({rowIndex:o.rowManager.topIndex,columnId:e.columnId}),g=Gt.from(d.element),p=Gt.from(o.bodyElement),m=Gt.from(h).moveTo(null,g.y);return!1===a||-1===e.rowIndex?n=Object.assign({},n,Dh):(n=Object.assign({},n,a),m.width>g.width||m.height>p.height?n.x=n.y=!1:n.column=e.columnId,o.scrollRowIntoView(e.id,n)),(o._hoveredRow||o.hoveredCell)&&(o.hoveredCell=null),o.disableActionable=l,o.selectOnFocus=c,o._fromFocusCell=!0,null==(i=e[l?"cell":"target"])||i.focus({preventScroll:!0}),o.disableActionable=o.selectOnFocus=!1,delete o._fromFocusCell,e}blurCell(e){const n=this.getCell(e);n&&n.classList.remove("b-focused")}clearFocus(e){const n=this;n._focusedCell&&(n.lastFocusedCell=e?null:n._focusedCell,n.blurCell(n._focusedCell),n._focusedCell=null)}internalNextPrevCell(e=!0){const n=this,r=n._focusedCell;return r?n.focusCell({id:r.id,columnId:n.columns.getAdjacentVisibleLeafColumn(r.columnId,e,!0).id}):null}navigateRight(){var e;return(null==(e=arguments[0])?void 0:e.fromKeyMap)?this.focusCell(this.rtl?Bd.PREV_CELL:Bd.NEXT_CELL):(arguments[0]&&A.deprecate("Grid","6.0.0","Event argument removed, unused param"),this.internalNextPrevCell(!this.rtl))}navigateLeft(){var e;return(null==(e=arguments[0])?void 0:e.fromKeyMap)?this.focusCell(this.rtl?Bd.NEXT_CELL:Bd.PREV_CELL):(arguments[0]&&A.deprecate("Grid","6.0.0","Event argument removed, unused param"),this.internalNextPrevCell(Boolean(this.rtl)))}internalNextPrevRow(e,n=!0,r=!0){const i=this,o=i._focusedCell;if(!o)return!1;const s=i.store["get"+(e?"Next":"Prev")](o.id,!1,n);return s?i.focusCell({id:s.id,columnId:o.columnId,scroll:{x:!1}}):e||!r||o.isColumnHeader?void 0:(this.clearFocus(),this.getHeaderElement(o.columnId).focus())}navigateDown(){var e;return(null==(e=arguments[0])?void 0:e.fromKeyMap)?this.focusCell(Bd.DOWN):(arguments[0]&&A.deprecate("Grid","6.0.0","Event argument removed, unused param"),this.internalNextPrevRow(!0,!1))}navigateUp(){var e;return(null==(e=arguments[0])?void 0:e.fromKeyMap)?this.focusCell(Bd.UP):(arguments[0]&&A.deprecate("Grid","6.0.0","Event argument removed, unused param"),this.internalNextPrevRow(!1,!1))}get widgetClass(){}},"configurable",{focusable:!1,focusableSelector:".b-grid-cell,.b-grid-header.b-depth-0",keyMap:{ArrowUp:{handler:"navigateUp",weight:10},ArrowRight:{handler:"navigateRight",weight:10},ArrowDown:{handler:"navigateDown",weight:10},ArrowLeft:{handler:"navigateLeft",weight:10},"Ctrl+Home":"navigateFirstCell",Home:"navigateFirstColumn","Ctrl+End":"navigateLastCell",End:"navigateLastColumn",PageUp:"navigatePrevPage",PageDown:"navigateNextPage",Enter:"activateHeader",Escape:{handler:"onEscape",weight:10},"Shift+Tab":{handler:"onShiftTab",preventDefault:!1},Tab:{handler:"onTab",preventDefault:!1}," ":{handler:"onSpace",preventDefault:!1}}}),n},GridResponsive_default=e=>class GridResponsive extends(e||re){static get $name(){return"GridResponsive"}static get defaultConfig(){return{responsiveLevels:Object.freeze({small:400,medium:600,large:"*"})}}getClosestBiggerLevel(e){const n=this,r=Object.keys(Et.assign({},n.responsiveLevels));let i=null,o=99995,s=null;return r.forEach((r=>{let a=n.responsiveLevels[r];if(["number","string"].includes(typeof a)||(a=a.levelWidth),"*"===a)s=r;else if(e<a){const n=a-e;n<o&&(o=n,i=r)}})),i||s}get responsiveLevel(){return this.getClosestBiggerLevel(this.width)}updateResponsive(e,n){const r=this,i=r.getClosestBiggerLevel(n),o=r.getClosestBiggerLevel(e);if(0===n||i!==o){const s=r.responsiveLevels[o];["number","string"].includes(typeof s)||r.applyState(s),r.columns.forEach((e=>{const n=e.responsiveLevels;n&&(n[o]?e.applyState(n[o]):n["*"]&&e.applyState(n["*"]))})),r.element.classList.remove("b-responsive-"+i),r.element.classList.add("b-responsive-"+o),r.trigger("responsive",{level:o,width:e,oldLevel:i,oldWidth:n})}}get widgetClass(){}},Eh={string:1,number:1},Rh={dataset:1,batch:1},GridSelection_default=e=>{var n;return __publicField(n=class extends(e||re){static get $name(){return"GridSelection"}construct(e){this._selectedCells=[],this._selectedRows=[],super.construct(e),(null==e?void 0:e.selectedRecords)&&(this.selectedRecords=e.selectedRecords)}getDefaultGridSelection(e){return"GridSelection"===e.$name?e.configurable.selectionMode:e.superclass?this.getDefaultGridSelection(e.superclass):void 0}changeSelectionMode(e){const n=this;return n.selectionMode?(Et.assign(n.selectionMode,e),n.selectionMode):(n.$defaultGridSelection=n.getDefaultGridSelection(n.constructor),new Proxy(e,{set(e,r,i){const o=Et.assign({},e);return e[r]=i,n.updateSelectionMode(e,o),!0}}))}updateSelectionMode(e,n=this.$defaultGridSelection){var r,i;const o=this,{columns:s,checkboxSelectionColumn:a}=o,l={},{rowReorder:c}=o.features;for(const r in e)e[r]!=n[r]&&(l[r]=e[r]);e.rowCheckboxSelection&&!e.checkboxOnly&&(e.checkboxOnly=!0,delete e.rowCheckboxSelection),l.column&&(e.cell=!0,e.multiSelect=!0),l.cell&&(e.checkboxOnly=!1),!1===l.cell&&(e.column=!1),l.checkboxOnly&&(e.checkbox||(e.checkbox=!0),e.cell=!1),!1===l.checkbox&&(l.checkboxOnly=!1,l.showCheckAll=!1),l.showCheckAll&&(e.checkbox=e.checkbox||!0,e.multiSelect=!0),(l.includeChildren||l.includeParents)&&(e.multiSelect=!0),!1===l.multiSelect&&(e.column=e.showCheckAll=e.dragSelect=e.includeChildren=e.includeParents=!1),l.dragSelect&&((null==c?void 0:c.enabled)&&!0!==c.gripOnly&&(c.showGrip=c.gripOnly=!0),e.multiSelect=!0,o._selectionListenersDetachers={}),!1===l.dragSelect&&o._selectionListenersDetachers&&(null==(i=(r=o._selectionListenersDetachers).selectiondrag)||i.call(r),delete o._selectionListenersDetachers.selectiondrag),!n||void 0===l.cell&&void 0===l.deselectFilteredOutRecords&&void 0===l.multiSelect||o.deselectAll(),l.rowNumber?s.findRecord("type","rownumber")||(s.insert(0,{..."object"==typeof e.rowNumber?e.rowNumber:{},type:"rownumber"}),o._selectionAddedRowNumberColumn=!0):!1===l.rowNumber&&o._selectionAddedRowNumberColumn&&(s.remove(s.findRecord("type","rownumber")),delete o._selectionAddedRowNumberColumn),(e.checkbox!==(null==n?void 0:n.checkbox)||e.checkbox&&e.showCheckAll!==(null==n?void 0:n.showCheckAll))&&(n&&o.deselectAll(),o.isConfiguring?o.shouldInitCheckboxSelection=!0:o.initCheckboxSelection()),n&&e.checkbox&&n.checkbox&&e.checkboxIndex!==n.checkboxIndex&&a&&a.parent.insertChild(a,s.getAt(o.checkboxSelectionColumnInsertIndex)),o.trigger("selectionModeChange",Et.clone(e)),o.afterSelectionModeChange(e)}afterConfigure(){this.shouldInitCheckboxSelection&&(this.shouldInitCheckboxSelection=!1,this.initCheckboxSelection()),super.afterConfigure()}initCheckboxSelection(){var e,n;const r=this,{selectionMode:i,columns:o,checkboxSelectionColumn:s}=r,{checkbox:a}=i;if(s&&(r.checkboxSelectionColumn=null,o.remove(s)),a){const s=qd.getColumnClass("check"),l=!0===a?null:a;if(!s)throw new Error("CheckColumn must be imported for checkbox selection mode to work");const c=r.checkboxSelectionColumn=new s(Et.assign({id:`${r.id}-selection-column`,width:"4em",minWidth:"4em",field:null,sortable:!1,filterable:!1,hideable:!1,cellCls:"b-checkbox-selection",region:null==(n=null==(e=r.items)?void 0:e[0])?void 0:n.region,showCheckAll:i.showCheckAll,draggable:!1,resizable:!1,widgets:[{type:"checkbox",valueProperty:"checked",ariaLabel:"L{Checkbox.toggleRowSelect}"}]},l),o,{isSelectionColumn:!0});c.meta.depth=0,c._grid=r;const d=c.renderer;c.renderer=e=>{e.value=r.isSelected(e.record),d.call(c,e)},c.ion({toggle:"onCheckChange",toggleAll:"onCheckAllChange",thisObj:r}),o.insert(r.checkboxSelectionColumnInsertIndex,c)}}get checkboxSelectionColumnInsertIndex(){const{columns:e}=this;let{checkboxIndex:n}=this.selectionMode;return n?"string"==typeof n&&(n=e.indexOf(e.getById(n))):n=e.indexOf(e.findRecord("type","rownumber"))+1,n}afterSelectionChange(){}afterSelectionModeChange(){}changeSelectedRecordCollection(e){return e instanceof si?e:new si(e)}updateSelectedRecordCollection(e){e.ion({change:"onSelectedRecordCollectionChange",thisObj:this})}onSelectedRecordCollectionChange({added:e=[],removed:n}){this.selectedRecordCollection._fromSelection||(e=e.filter((e=>this.isSelectable(e))),this.performSelection({selectedCells:[],deselectedCells:[],selectedRecords:e,deselectedRecords:n}))}changeSelectedRecordCollectionSilent(e){this.selectedRecordCollection._fromSelection=!0;const n=e(this.selectedRecordCollection);return delete this.selectedRecordCollection._fromSelection,n}bindStore(e){var n;this.detachListeners("selectionStoreFilter"),e.ion({name:"selectionStoreFilter",filter:"onStoreFilter",thisObj:this}),null==(n=super.bindStore)||n.call(this,e)}unbindStore(e){this.detachListeners("selectionStoreFilter"),super.unbindStore(e)}onStoreFilter({source:e}){const n=this,r=[];for(const i of n.selectedRows)e.includes(i)||r.push(i);const i=n.prepareSelection(n.selectionMode.deselectFilteredOutRecords?r:[]);if(n.isCellSelectionMode){const{deselectedCells:e}=n.prepareSelection(n.getSelectedCellsForRecords(r));(null==e?void 0:e.length)&&(i.deselectedCells=(i.deselectedCells||[]).concat(e))}(i.deselectedCells.length||i.deselectedRecords.length)&&(n.performSelection(i,!1),n.updateCheckboxHeader())}onStoreRecordIdChange({record:e,oldValue:n}){var r;null==(r=super.onStoreRecordIdChange)||r.call(this,...arguments);this.selectedRecordCollection.get(n)===e&&this.selectedRecordCollection.rebuildIndices()}onStoreRemove(e){var n;if(null==(n=super.onStoreRemove)||n.call(this,e),!e.isCollapse){const n=this,r=e.records.filter((e=>this.isSelected(e)));if(r.length){const e=n.prepareSelection(r);if(n.isCellSelectionMode){const{deselectedCells:i}=n.prepareSelection(n.getSelectedCellsForRecords(r));(null==i?void 0:i.length)&&(e.deselectedCells=(e.deselectedCells||[]).concat(i))}n.performSelection(e)}}}onStoreDataChange({action:e,source:n}){var r;const i=this,{selectionMode:o}=i;let s;if(null==(r=super.onStoreDataChange)||r.call(this,...arguments),"pageLoad"===e)o.preserveSelectionOnPageChange||(s=i.prepareSelection(null,null,!0)),i.updateCheckboxHeader();else if(Rh[e]){const e=[];if(!1===o.preserveSelectionOnDatasetChange)s=i.prepareSelection(null,null,!0);else{e.push(...i.changeSelectedRecordCollectionSilent((e=>e.match(n.storage))));for(const r of i._selectedCells)n.getById(r.id)||e.push(r);s=i.prepareSelection(e)}}s&&(s.deselectAll||s.deselectedCells.length||s.deselectedRecords.length||s.selectedCells.length||s.selectedRecords.length)&&(i.performSelection(s,!1),i.updateCheckboxHeader())}onStoreRemoveAll(){var e;null==(e=super.onStoreRemoveAll)||e.call(this),this.performSelection(this.prepareSelection(null,null,!0),!1)}onCheckChange({checked:e,record:n}){const r=this,i=!r.selectionMode.multiSelect&&e,o=i||e?null:[n],s=e?[n]:null;e&&!or.shiftKeyDown&&(r._lastSelectionChecked=n),e&&r._lastSelectionChecked&&or.shiftKeyDown?r.performSelection(r.internalSelectRange(r._lastSelectionChecked,n,!0)):r.performSelection(r.prepareSelection(o,s,i,!0))}updateCheckboxHeader(){const{selectionMode:e,checkboxSelectionColumn:n,store:r}=this;if(e.checkbox&&e.showCheckAll&&(null==n?void 0:n.headerCheckbox)){const e=r.count&&!r.some((e=>!this.isSelected(e)));n.headerCheckbox.checked!==e&&(n.suspendEvents(),n.headerCheckbox.checked=e,n.resumeEvents())}}onCheckAllChange({checked:e}){this[e?"selectAll":"deselectAll"](this.store.isPaged&&this.selectionMode.preserveSelectionOnPageChange)}get selectionDragMouseEventListenerElement(){return globalThis}onSelectionDrag(e){var n,r;const i=this,{_selectionStartCell:o}=i;if(or.isMouseDown()||i.onSelectionEnd(),!o)return;const{items:s,_lastSelectionDragRegion:a}=i,l=i.getCellDataFromEvent(e,!0),c=null==l?void 0:l.column.region,d=(null==l?void 0:l.cellSelector)&&i.normalizeCellContext(l.cellSelector);if(d&&!d.equals(i._lastSelectionDragCell,!0)){if(i._isSelectionDragging||i.enableScrollingCloseToEdges(s),i._clearSelectionOnSelectionDrag&&!o.equals(d,!0)&&(i.deselectAll(),delete i._clearSelectionOnSelectionDrag),a&&c!==a){const e=i.subGrids[a],o=i.subGrids[c],l=e.scrollable,d=o.scrollable,u=s.indexOf(e)-s.indexOf(o)<0;if(d.x=u?0:d.maxX,u?l.x<l.maxX-1:l.x>1)return;null==(r=null==(n=i.scrollManager._activeScroll)?void 0:n.horizontal)||r.stopScroll()}i._lastSelectionDragRegion=c,i._lastSelectionDragCell=d,i._isSelectionDragging=!0;const e=i._lastSelectionDragChange=i.internalSelectRange(o,d,i.isRowNumberSelecting(d)||i.isRowNumberSelecting(o));e.deselectedCells=e.deselectedCells.filter((e=>!i.isCellSelected(e))),e.deselectedRecords=e.deselectedRecords.filter((e=>!i.isSelected(e))),i.refreshGridSelectionUI(e),i.trigger("dragSelecting",e)}}onSelectionEnd(){var e,n;const r=this,i=r._lastSelectionDragChange;r._isSelectionDragging&&!r._selectionStartCell.equals(r._lastSelectionDragCell,!0)&&i&&r.performSelection(i,!1),r.disableScrollingCloseToEdges(r.items),r._isSelectionDragging=!1,r._lastSelectionDragChange=r._lastSelectionDragCell=r._lastSelectionDragRegion=null,null==(n=(e=r._selectionListenersDetachers).selectiondrag)||n.call(e),delete r._selectionListenersDetachers.selectiondrag}onHandleElementClick(e){const n=this;n.selectionMode.rowNumber&&e.target.closest(".b-rownumber-header")?(e.handled=!0,n.store.count&&n.store.some((e=>!n.isSelected(e)))?n.selectAll():n.deselectAll()):n.selectionMode.column&&e.target.closest(".b-grid-header")&&(e.handled=!0,n.selectColumn(e,e.ctrlKey)),super.onHandleElementClick(e)}selectColumn(e,n=!1){const r=this,{store:i}=r,{columnId:o}=r.getHeaderDataFromEvent(e);r._shiftSelectRange=null,e.shiftKey||(r._shiftSelectColumn=o);const s=e.shiftKey&&r._shiftSelectColumn||o,a=r.internalSelectRange(r.normalizeCellContext({id:i.first.id,columnId:s}),r.normalizeCellContext({id:i.last.id,columnId:o}));n&&!a.selectedCells.some((e=>!r.isCellSelected(e)))&&(a.deselectedCells=a.selectedCells,a.selectedCells=[]),n||(a.deselectedCells=r._selectedCells),r.cleanSelectionChange(a),r.performSelection(a)}isSelected(e){return(null==e?void 0:e.id)&&(e=e.id),!!Eh[typeof e]&&this.selectedRows.some((n=>n.id===e))}isCellSelected(e,n){return e=this.normalizeCellContext(e),this.isCellSelectionMode&&this._selectedCells.some((n=>e.equals(n,!0)))||n&&this.isSelected(e)}isSelectable(e){return this.normalizeCellContext({id:e.id||e}).isSelectable}get selectedRecord(){return this.selectedRecords[this.selectedRecords.length-1]||null}set selectedRecord(e){this.selectRow({record:e})}get selectedRecords(){return this.selectedRecordCollection.values}set selectedRecords(e){this.selectRows(e)}get selectedRows(){return[...this._selectedRows]}set selectedRows(e){this.selectRows(e)}spliceSelectedRecords(e,n,r){const i=this;if("number"==typeof n){const o=[...i.selectedRecords];o.splice(e,n,...oe.asArray(r)),i.performSelection(i.prepareSelection(null,o,!0,!0))}else i.performSelection(i.prepareSelection(n,r,!1,!0))}selectRow(e){"number"!=typeof e&&!e.isModel&&"record"in e||(e={records:[e]}),Et.assignIf(e,{scrollIntoView:!0}),this.selectRows(e)}selectRows(e){(!e||Array.isArray(e)||e.isModel||"number"==typeof e||!("records"in e)&&!("record"in e))&&(e={records:oe.asArray(e)||[]});const n=this,{store:r}=n,i=[],{records:o=(e.record?[e.record]:[]),column:s=n.columns.visibleColumns[0],scrollIntoView:a,addToSelection:l=arguments[1]}=e;for(let e of o)e=r.getById(e),e&&i.push(e);l||(n._shiftSelectRange=null),n.performSelection(n.prepareSelection(null,i,!l,!0)),i.length&&a&&n.scrollRowIntoView(i[0].id,{column:s})}selectAll(e=!1){const{store:n}=this,r=(n.isGrouped?n.allRecords:n.records).filter((e=>!e.isSpecialRow));this.performSelection(this.prepareSelection(null,r,!1,!0),!0,e)}deselectAll(e=!1,n=!1){const{store:r}=this,i=e?(r.isGrouped?r.allRecords:r.records).filter((e=>!e.isSpecialRow)):null;this.performSelection(this.prepareSelection(i,null,!e),!0,n)}deselectRow(e){this.deselectRows(e)}deselectRows(e){const{store:n}=this,r=oe.asArray(e).map((e=>n.getById(e))).filter((e=>e));this.performSelection(this.prepareSelection(r))}selectRange(e,n,r=!1){const i=this,{store:o}=i,s=i.internalSelectRange(o.getById(e),o.getById(n),!0);i._shiftSelectRange=null,i.performSelection(s)}get selectedCell(){return this._selectedCells[this._selectedCells.length-1]}set selectedCell(e){this.selectCells([e])}get selectedCells(){return[...this._selectedCells]}set selectedCells(e){this.selectCells(e)}get selectedCellCSSSelector(){const e=this.selectedCell,n=e&&this.getRowById(e.id);return e&&n?`[data-index=${n.dataIndex}] [data-column-id=${e.columnId}]`:""}selectCell(e){var n;return"id"in e&&(e={cell:e},e=Object.assign({scrollIntoView:arguments[1],addToSelection:arguments[2],silent:arguments[3]},e)),null==(n=this.selectCells(e))?void 0:n[0]}selectCells(e){Array.isArray(e)&&(e={cells:e});const n=this,{cells:r=(e.cell?[e.cell]:[]),scrollIntoView:i=!0,addToSelection:o=!1,silent:s=!1}=e,a=n.prepareSelection(null,r,!o);return o||(n._shiftSelectRange=null),n.performSelection(a,!0,s),i&&n.scrollRowIntoView(r[0].id,{column:r[0].columnId}),n.isCellSelectionMode?a.selectedCells:a.selectedRecords}deselectCell(e){var n;return null==(n=this.deselectCells([e]))?void 0:n[0]}deselectCells(e){const n=this.prepareSelection(e);return this.performSelection(n),this.isCellSelectionMode?n.deselectedCells:n.deselectedRecords}toggleSelection(e){const n=this,{_focusedCell:r,selectionMode:i}=n,o=n.isRowNumberSelecting(r),s=n.isCellSelected(r,!0);if(!0===i.selectOnKeyboardNavigation||r.isActionable)return!1;n.performSelection(n.prepareSelection(s?r:null,s?null:r,!i.multiSelect,o)),e.preventDefault()}selectCellRange(e,n){this.performSelection(this.internalSelectRange(e,n))}getSelection(){return this.isRowSelectionMode?this.selectedRecords:this.selectedCells}cleanSelectionChange(e){const{deselectedRecords:n,selectedRecords:r,deselectedCells:i,selectedCells:o,deselectedCellRecords:s,selectedCellRecords:a}=e;return(null==n?void 0:n.length)&&(null==r?void 0:r.length)&&(e.deselectedRecords=n.filter((e=>!r.some((n=>e===n))))),(null==i?void 0:i.length)&&(null==o?void 0:o.length)&&(e.deselectedCells=i.filter((e=>!o.some((n=>e.equals(n,!0)))))),s.length&&((null==a?void 0:a.length)||(null==r?void 0:r.length))&&(e.deselectedCellRecords=s.filter((e=>!a.some((n=>e.id===n.id))&&!r.some((n=>e.id===n.id))))),e}getSelectedCellsForRecords(e){return this._selectedCells.filter((n=>n.id&&e.some((e=>e.id===n.id))))}delayUntilMouseUp(e){const n=cn.on({element:globalThis,blur:r=>e(r,n),mouseup:r=>e(r,n),thisObj:this,once:!0})}get isRowSelectionMode(){return!this.isCellSelectionMode}get isCellSelectionMode(){return!0===this.selectionMode.cell}isRowNumberSelecting(...e){return this.selectionMode.rowNumber&&!e.some((e=>"rownumber"!==e.column.type))}extendSelectionLeft(){this.extendSelection("Left")}extendSelectionRight(){this.extendSelection("Right")}extendSelectionUp(){this.extendSelection("Up")}extendSelectionDown(){this.extendSelection("Down")}extendSelection(e){this._isKeyboardRangeSelecting=!0,this["navigate"+e](),this._isKeyboardRangeSelecting=!1}onCellNavigate(e,n,r,i){var o;const{selectionMode:s,_selectionListenersDetachers:a}=e,{multiSelect:l,deselectOnClick:c,dragSelect:d}=s,{ctrlKeyDown:u,shiftKeyDown:h}=or,g=or.isMouseDown(),p=or.isMouseDown(2),m=or.currentMouseDown||or.currentKeyDown;if(r=e.normalizeCellContext(r),!i||-1===r.rowIndex||(null==(o=r.record)?void 0:o.isGroupHeader)||(null==m?void 0:m.fromKeyMap)&&!s.selectOnKeyboardNavigation||e.columns.getById(r.columnId)===e.checkboxSelectionColumn||s.checkboxOnly||!0===(null==m?void 0:m.handled))return;h||(e._isAddingToSelection=u&&l,e._selectionStartCell=r),l&&d&&g&&!a.selectiondrag&&!e.preventDragSelect&&(a.selectiondrag=cn.on({name:"selectiondrag",element:e.selectionDragMouseEventListenerElement,blur:"onSelectionEnd",mouseup:{handler:"onSelectionEnd",element:globalThis},mousemove:"onSelectionDrag",thisObj:e})),e.preventDragSelect=!1;const f=e._selectionStartCell,b=e._isAddingToSelection;if((h&&g||e._isKeyboardRangeSelecting)&&f&&l)e.performSelection(e.internalSelectRange(f,r,e.isRowNumberSelecting(f,r)));else{let n,i=!1,o=!0;if(e.isCellSelected(r,!0)){if(p)return;if(b||c)n=c?null:[r],o=!1;else if(e.selectedRecords.length+(e.isCellSelectionMode?e._selectedCells.length:0)<=1)return;i=c||l}n||b||(n=null,d&&i&&a.selectiondrag&&(e._clearSelectionOnSelectionDrag=!0));const finishSelection=(i,s)=>{var a;if(null==s||s(),(null==(a=null==i?void 0:i.target)?void 0:a.nodeType)===Node.ELEMENT_NODE){const e=new Bd(i.target);if((null==e?void 0:e.grid)&&!e.equals(r,!0))return}h||(e._shiftSelectRange=null),e.performSelection(e.prepareSelection(n,o&&[r],null===n,o&&e.isRowNumberSelecting(r)))};i?e.delayUntilMouseUp(finishSelection):finishSelection()}}prepareSelection(e,n,r=!1,i=!1){var o,s;const a=this,l=a._isSelectionDragging,{includeParents:c,selectRecordOnCell:d}=a.selectionMode,u=[],h=[];let g=[],p=[],m=[],f=[];if(r)g=a._selectedCells,p=a._selectedRows,f=a.selectedRecords.filter((e=>!p.some((n=>n.id===e.id))));else if(e)for(const n of oe.asArray(e)){const e=a.normalizeCellContext(n),r=(null==e?void 0:e.record)||(n.isModel?n:a.store.getById(e.id));if(!e.isSpecialRow&&(g.push(e),r&&!p.some((e=>e.id===r.id))&&(l||a.isSelected(r)?p.push(r):d&&a.selectedRecordCollection.get(r.id)&&!f.some((e=>e.id===r.id))&&f.push(r),a.selectionMode.includeChildren&&a.selectionMode.multiSelect&&!r.isLeaf&&(null==(o=r.allChildren)?void 0:o.length))))for(const e of r.allChildren)p.some((n=>n.id===e.id))||!l&&!a.isSelected(e)||p.push(e)}if(n){for(const e of oe.asArray(n)){const n=a.normalizeCellContext(e),r=(null==n?void 0:n.record)||(e.isModel?e:a.store.getById(n.id));if(r&&!n.isSpecialRow&&(a.isCellSelectionMode&&!i&&h.push(n),(a.isRowSelectionMode||i)&&!u.some((e=>e.id===r.id))&&(u.push(r),a.selectionMode.includeChildren&&a.selectionMode.multiSelect&&!r.isLeaf&&(null==(s=r.allChildren)?void 0:s.length))))for(const e of r.allChildren)u.some((n=>n.id===e.id))||u.push(e)}d&&h.length&&(m=oe.unique(h.map((e=>e.record))).filter((e=>!u.some((n=>n.id===e.id)))))}if(c&&(p.length||u.length)){const e=[...p,...u];oe.unique(e.filter((n=>n.parent&&!n.allChildren.some((n=>e.includes(n))))).map((e=>e.parent))).forEach((e=>a.toggleParentSelection(e,u,p)))}return a.cleanSelectionChange({selectedCells:h,selectedRecords:u,deselectedCells:g,deselectedRecords:p,deselectAll:r,action:(null==u?void 0:u.length)||(null==h?void 0:h.length)?"select":"deselect",selectedCellRecords:m,deselectedCellRecords:f})}toggleParentSelection(e,n,r){if(!e||e.isRoot)return;const i=this.isSelected(e),o=n.includes(e),s=r.includes(e),childIsSelected=e=>this.isSelected(e)&&!r.includes(e)||n.includes(e);"some"===this.selectionMode.includeParents?e.allChildren.some(childIsSelected)?i&&!s||o||n.push(e):i&&!s&&r.push(e):i?s||o||!e.allChildren.some((e=>r.includes(e)))||r.push(e):o||e.allChildren.every(childIsSelected)&&n.push(e),e.parent&&this.toggleParentSelection(e.parent,n,r)}internalSelectRange(e,n,r=!1){const i=this,o=i.isRowSelectionMode||r,s=i.prepareSelection(i._shiftSelectRange,i.getRange(e,n,o),!1,r);return i._shiftSelectRange=s["selected"+(o?"Records":"Cells")],s}getRange(e,n,r=!1){const i=this,{store:o}=i,s=i.normalizeCellContext(e),a=i.normalizeCellContext(n),l=Math.min(s.rowIndex,a.rowIndex),c=Math.max(s.rowIndex,a.rowIndex),d=[],u=Math.min(s.columnIndex,a.columnIndex),h=Math.max(s.columnIndex,a.columnIndex);if(-1===l||-1===c)throw new Error("Record not found in selectRange");if(r){const e=o.getRange(l,c+1,!1);a.rowIndex<s.rowIndex&&e.reverse(),d.push(...e)}else for(let e=l;e<=c;e++)for(let n=u;n<=h;n++)d.push({rowIndex:e,columnIndex:n});return d.map((e=>i.normalizeCellContext(e)))}performSelection(e,n=!0,r=!1){const i=this,{selectedRecords:o=[],selectedCells:s=[],selectedCellRecords:a=[],deselectedRecords:l=[],deselectedCells:c=[],deselectedCellRecords:d=[],action:u}=e,h=[...o,...a],g=[...l,...d],p=i.isRowSelectionMode;if(!1!==i.trigger("beforeSelectionChange",{mode:p?"row":"cell",action:u,selected:h,deselected:g,selection:i.selectedRecords,selectedCells:s,deselectedCells:c,cellSelection:i.selectedCells})){if(i._selectedCells===c)i._selectedCells=[];else{const e=[];for(const n of i._selectedCells)c.some((e=>n.equals(e,!0)))||e.push(n);i._selectedCells=e}if(e.deselectedRecords=[...e.deselectedRecords],l===i._selectedRows)i.changeSelectedRecordCollectionSilent((e=>e.clear())),i._selectedRows.length=0;else{const e=[],n=[];for(const r of i.selectedRecords)g.some((e=>r.id===e.id))||(i.isSelected(r)?e.push(r):n.push(r));i.changeSelectedRecordCollectionSilent((r=>r.values=[...e,...n])),i._selectedRows=e}if(s.length)for(const e of s)i._selectedCells.some((n=>n.equals(e,!0)))||i._selectedCells.push(e);o.length&&(i.changeSelectedRecordCollectionSilent((e=>e.add(...o))),i._selectedRows.push(...o.filter((e=>!i._selectedRows.some((n=>n.id===e.id)))))),a.length&&i.changeSelectedRecordCollectionSilent((e=>e.add(...a))),n&&i.refreshGridSelectionUI(e),i.afterSelectionChange(e),r||i.triggerSelectionChangeEvent(e)}}refreshGridSelectionUI({selectedRecords:e,selectedCells:n,deselectedRecords:r,deselectedCells:i}){const o=this,{checkboxSelectionColumn:s}=o;null==s||s.suspendEvents(),o.updateGridSelectionRecords(e,!0),o.updateGridSelectionRecords(r,!1),o.updateCheckboxHeader(),null==s||s.resumeEvents(),o.isCellSelectionMode&&(o.updateGridSelectionCells(n,!0),o.selectionMode.column&&o.updateGridSelectionColumns(n)),o.updateGridSelectionCells(i,!1)}updateGridSelectionRecords(e,n){const{checkboxSelectionColumn:r}=this;if(null==e?void 0:e.length)for(let i=0;i<e.length;i++){const o=this.getRowFor(e[i]);o&&(o.toggleCls("b-selected",n),o.setAttribute("aria-selected",n),!r||r.hidden||e[i].isSpecialRow||(o.getCell(r.id).widget.checked=n))}}updateGridSelectionCells(e,n){if(null==e?void 0:e.length)for(let r=0;r<e.length;r++){const i=this.getCell(e[r]);i&&(i.setAttribute("aria-selected",n),i.classList.toggle("b-selected",n))}}updateGridSelectionColumns(e){var n;const{count:r}=this.store;for(const i of this.columns.visibleColumns)null==(n=i.element)||n.classList.toggle("b-selected",(null==e?void 0:e.filter((e=>e.columnId===i.id)).length)===r)}triggerSelectionChangeEvent(e){const{selectedRecords:n=[],selectedCells:r=[],selectedCellRecords:i=[],deselectedRecords:o=[],deselectedCells:s=[],deselectedCellRecords:a=[]}=e,l=[...n,...i],c=[...o,...a],d=this.isRowSelectionMode;this.trigger("selectionChange",{mode:d?"row":"cell",action:e.action,selected:l,deselected:c,selection:this.selectedRecords,selectedCells:r,deselectedCells:s,cellSelection:this.selectedCells})}doDestroy(){var e;null==(e=this.selectedRecordCollection)||e.destroy(),this._selectedCells.length=0,this._selectedRows.length=0;for(const e in this._selectionListenersDetachers)this._selectionListenersDetachers[e]();super.doDestroy()}get widgetClass(){}},"configurable",{selectionMode:{cell:!1,multiSelect:!0,checkboxOnly:!1,checkbox:!1,checkboxPosition:null,showCheckAll:!1,deselectFilteredOutRecords:!1,includeChildren:!1,includeParents:!1,preserveSelectionOnPageChange:!1,preserveSelectionOnDatasetChange:!0,deselectOnClick:!1,dragSelect:!1,selectOnKeyboardNavigation:!0,column:!1,rowNumber:!1,selectRecordOnCell:!0},keyMap:{"Shift+ArrowUp":"extendSelectionUp","Shift+ArrowDown":"extendSelectionDown","Shift+ArrowLeft":"extendSelectionLeft","Shift+ArrowRight":"extendSelectionRight"," ":{handler:"toggleSelection",weight:10}},selectedRecordCollection:{}}),n},suspendStoreEvents=e=>e.columns.suspendEvents(),resumeStoreEvents=e=>e.columns.resumeEvents(),fillSubGridColumns=e=>{e.columns.clearCaches(),e.columns.fillFromMaster()},compareStateSortIndex=(e,n)=>e.stateSortIndex-n.stateSortIndex,GridState_default=e=>class GridState extends(e||re){static get $name(){return"GridState"}static get configurable(){return{statefulEvents:["subGridCollapse","subGridExpand","horizontalScroll","stateChange"]}}updateStore(e,n){var r;null==(r=super.updateStore)||r.call(this,e,n),this.detachListeners("stateStoreListeners"),null==e||e.ion({name:"stateStoreListeners",filter:"triggerUpdate",group:"triggerUpdate",sort:"triggerUpdate",thisObj:this})}updateColumns(e,n){var r;null==(r=super.updateColumns)||r.call(this,e,n),this.detachListeners("stateColumnListeners"),e.ion({name:"stateColumnListeners",change:"triggerUpdate",thisObj:this})}updateRowManager(e,n){var r;null==(r=super.updateRowManager)||r.call(this,e,n),this.detachListeners("stateRowManagerListeners"),e.ion({name:"stateRowManagerListeners",rowHeight:"triggerUpdate",thisObj:this})}triggerUpdate(){this.trigger("stateChange")}finalizeInit(){super.finalizeInit(),this.ion({selectionChange:"triggerUpdate",thisObj:this})}getState(){const e=this,n=e.element.style.cssText,r={rowHeight:e.rowHeight};if(n&&(r.style=n),e.selectedCell){const{id:n,columnId:i}=e.selectedCell;r.selectedCell={id:n,columnId:i}}return r.selectedRecords=e.selectedRecords.map((e=>e.id)),r.columns=e.columns.allRecords.map((e=>e.getState())),r.store=e.store.state,r.scroll=e.storeScroll(),r.subGrids={},e.eachSubGrid((e=>{var n;const i=r.subGrids[e.region]=r.subGrids[e.region]||{};e.isPainted?null==e.flex&&(i.width=e.width):null!=e.config.width?i.width=e.config.width:i.flex=e.config.flex,i.collapsed=null!=(n=e.collapsed)&&n,i.collapsed&&(i._beforeCollapseState=e._beforeCollapseState)})),r}applyState(e){const n=this;if(n.suspendRefresh(),"columns"in e){let r=!1,i=!1;n.columns.suspendEvents(),n.eachSubGrid(suspendStoreEvents),e.columns.forEach(((e,o)=>{const s=n.columns.getById(e.id);if(s){const a=s.generation;"region"in e&&!(e.region in n.subGrids)&&(delete e.region,delete e.locked),s.applyState(e),r=r||s.generation!==a,s.stateSortIndex=o,s.allIndex!==o&&(i=r=!0)}})),r&&n.eachSubGrid(fillSubGridColumns),i&&(n.eachSubGrid((e=>{e.columns.records.sort(compareStateSortIndex),e.columns.allRecords.sort(compareStateSortIndex)})),n.columns.sort({fn:compareStateSortIndex,ascending:!0})),n.isPainted&&r&&n.renderContents(),n.columns.resumeEvents(),n.eachSubGrid(resumeStoreEvents)}"subGrids"in e&&n.eachSubGrid((n=>{if(n.region in e.subGrids){const r=e.subGrids[n.region];"width"in r?n.width=r.width:"flex"in r&&(n.flex=r.flex),"collapsed"in r&&(n.collapsed=r.collapsed,n._beforeCollapseState=r._beforeCollapseState)}n.clearWidthCache()})),"rowHeight"in e&&(n.rowHeight=e.rowHeight),"style"in e&&(n.style=e.style),"selectedCell"in e&&(n.selectedCell=e.selectedCell),"store"in e&&(n.store.state=e.store),"selectedRecords"in e&&(n.selectedRecords=e.selectedRecords),n.resumeRefresh(!0),n.whenVisible((()=>n.applyScrollState(e)))}applyScrollState(e){const n=this;n.eachSubGrid((e=>e.refreshFakeScroll())),"scroll"in e&&(n.restoreScroll(e.scroll),e.scroll.scrollTop&&n.element.querySelectorAll(".b-resize-monitored").forEach((e=>{const n=dl.fromElement(e);n&&n.onElementResize(e)})))}get widgetClass(){}},kh=Promise.resolve(),Th={block:"nearest"},Mh=class extends Xo{updateYScroller(e){null==e||e.addScroller(this)}scrollIntoView(e,n=Th){const{xDelta:r,yDelta:i}=this.getDeltaTo(e,n),o=r||i?this.scrollBy(r,i,n):kh;return(n.highlight||n.focus)&&o.then((()=>{n.highlight&&(e instanceof Gt?e.translate(-r,-i).highlight():Gn.highlight(e)),n.focus&&e.focus&&e.focus()})),o}scrollBy(e,n,r){const i=n&&this.yScroller.scrollBy(0,n,r),o=e&&super.scrollBy(e,0,r);if(o&&o.cancel&&i&&i.cancel){const e=o.cancel,n=i.cancel;return o.cancel=i.cancel=()=>{e(),n()},Promise.all([o,i])}return o||i||kh}scrollTo(e,n,r){const i=null!=n&&this.yScroller.scrollTo(null,n,r),o=null!=e&&super.scrollTo(e,null,r);if(r&&r.animate||this.syncPartners(),o&&o.cancel&&i&&i.cancel){const e=o.cancel,n=i.cancel;return o.cancel=i.cancel=()=>{e(),n()},Promise.all([o,i])}return o||i||kh}get viewport(){const e=Gt.from(this.element);return e.intersect(Gt.from(this.yScroller.element))||new Gt(e.x,e.y,e.width,0)}set y(e){this.yScroller&&(this.yScroller.y=e)}get y(){return this.yScroller?this.yScroller.y:0}get maxY(){return this.yScroller?this.yScroller.maxY:0}get scrollHeight(){return this.yScroller?this.yScroller.scrollHeight:0}get clientHeight(){return this.yScroller?this.yScroller.clientHeight:0}};__publicField(Mh,"configurable",{propagate:!1,overflowX:"hidden-scroll",yScroller:null}),Mh._$name="SubGridScroller";var sumWidths=(e,n)=>e+n.getBoundingClientRect().width,Ah=class extends bs{static get $name(){return"SubGrid"}static get type(){return"subgrid"}static get defaultConfig(){return{insertRowsBefore:null,appendTo:null,monitorResize:!0,headerClass:null,footerClass:null,weight:null,collapsed:null,scrollable:{overflowX:"hidden-scroll"},scrollerClass:Mh,hasCalculatedWidth:null,sealedColumns:null}}static get configurable(){return{element:!0,header:{},footer:{},virtualScrollerElement:!0,splitterElement:!0,headerSplitter:!0,scrollerSplitter:!0,footerSplitter:!0,resizable:null,role:"presentation"}}construct(e){const n=this;if(super.construct(e),this.rowManager.ion({addRows:"onAddRow",thisObj:this}),c.isFirefox){const{element:e}=n,r=n.grid.scrollable;let i=0;e.addEventListener("wheel",(({ctrlKey:o,deltaY:s,deltaX:a})=>{const l=Math.abs(s)>Math.abs(a);o||!l||n.scrollEndDetacher||r.y===i||(e.style.pointerEvents="none",i=r.y,n.scrollEndDetacher=r.ion({scrollEnd:async()=>{i=r.y,e.style.pointerEvents="",n.scrollEndDetacher=null},once:!0}))}))}A.isTestEnv&&(n.hideOverlayScroller.delay=50)}doDestroy(){var e;const n=this;n.header.destroy(),n.footer.destroy(),null==(e=n.fakeScroller)||e.destroy(),n.virtualScrollerElement.remove(),n.splitterElements.forEach((e=>e.remove())),super.doDestroy()}get barConfig(){const e=this,{width:n,flex:r}=e.element.style,i={subGrid:e,parent:e,maxWidth:e.maxWidth||void 0,minWidth:e.minWidth||void 0};return r?i.flex=r:n&&(i.width=n),i}changeHeader(e){return new this.headerClass(Et.assign({id:this.id+"-header"},this.barConfig,e))}changeFooter(e){return new this.footerClass(Et.assign({id:this.id+"-footer"},this.barConfig,e))}get splitterElements(){return[this.splitterElement,this.headerSplitter,this.scrollerSplitter,this.footerSplitter]}toggleSplitterCls(e,n=!0){this.splitterElements.forEach((r=>null==r?void 0:r.classList[n?"add":"remove"](e)))}hideSplitter(){this.splitterElements.forEach((e=>e.classList.add("b-hide-display"))),this.$showingSplitter=!1}showSplitter(){this.splitterElements.forEach((e=>e.classList.remove("b-hide-display"))),this.$showingSplitter=!0}changeElement(e,n){const{region:r}=this;return super.changeElement({"aria-label":r,className:{"b-grid-subgrid":1,[`b-grid-subgrid-${r}`]:r,"b-grid-subgrid-collapsed":this.collapsed},dataset:{region:r}},n)}get rowElementConfig(){const{grid:e}=this;return{role:"row",className:e.rowCls,children:this.columns.visibleColumns.map(((n,r)=>({role:"gridcell","aria-colindex":r+1,tabIndex:e.cellTabIndex,className:"b-grid-cell",dataset:{column:n.field||"",columnId:n.id}})))}}changeVirtualScrollerElement(){const e=Gn.createElement({role:"presentation",reference:"virtualScrollerElement",className:"b-virtual-scroller",tabIndex:-1,dataset:{region:this.region},children:[{reference:"virtualScrollerWidth",className:"b-virtual-width"}]});return this.virtualScrollerWidth=e.virtualScrollerWidth,e.virtualScrollerElement}changeSplitterElement(){const e=Gn.createElement({reference:"splitterElement",className:{"b-grid-splitter":1,"b-grid-splitter-collapsed":this.collapsed,"b-hide-display":1},dataset:{region:this.region},children:[c.isTouchDevice?{className:"b-splitter-touch-area"}:null,{className:"b-grid-splitter-inner b-grid-splitter-main",children:[{className:"b-grid-splitter-buttons",reference:"splitterButtons",children:[{className:"b-grid-splitter-button-collapse",children:[c.isTouchDevice?{className:"b-splitter-button-touch-area"}:null,{tag:"svg",ns:"http://www.w3.org/2000/svg",version:"1.1",className:"b-grid-splitter-button-icon b-gridregion-collapse-arrow",viewBox:"0 0 256 512",children:[{tag:"path",d:"M192 448c-8.188 0-16.38-3.125-22.62-9.375l-160-160c-12.5-12.5-12.5-32.75 0-45.25l160-160c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25L77.25 256l137.4 137.4c12.5 12.5 12.5 32.75 0 45.25C208.4 444.9 200.2 448 192 448z"}]}]},{className:"b-grid-splitter-button-expand",children:[c.isTouchDevice?{className:"b-splitter-button-touch-area"}:null,{tag:"svg",ns:"http://www.w3.org/2000/svg",version:"1.1",className:"b-grid-splitter-button-icon b-gridregion-expand-arrow",viewBox:"0 0 256 512",children:[{tag:"path",d:"M64 448c-8.188 0-16.38-3.125-22.62-9.375c-12.5-12.5-12.5-32.75 0-45.25L178.8 256L41.38 118.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0l160 160c12.5 12.5 12.5 32.75 0 45.25l-160 160C80.38 444.9 72.19 448 64 448z"}]}]}]}]}]});return this.splitterButtons=e.splitterButtons,e.splitterElement}get splitterConfig(){return{className:this.splitterElement.className.trim(),children:[c.isTouchDevice?{className:"b-splitter-touch-area"}:null,{className:"b-grid-splitter-inner"}],dataset:{region:this.region}}}changeHeaderSplitter(){return Gn.createElement(this.splitterConfig)}changeScrollerSplitter(){return Gn.createElement(this.splitterConfig)}changeFooterSplitter(){return Gn.createElement(this.splitterConfig)}render(...e){const n=this;super.render(...e),n.grid&&(n.updateHasFlex(),n.element.parentNode.insertBefore(n.splitterElement,n.element.nextElementSibling),n.splitterElements.forEach((e=>cn.on({element:e,mouseenter:"onSplitterMouseEnter",mouseleave:"onSplitterMouseLeave",thisObj:n}))),n._collapsed&&n.collapse())}refreshHeader(){this.header.refreshContent()}refreshFooter(){var e;null==(e=this.footer)||e.refreshContent()}eachWidget(e,n=!0){const r=[this.header,this.footer];for(let i=0;i<r.length;i++){const o=r[i];if(!1===e(o))return;n&&o.eachWidget&&o.eachWidget(e,n)}}fixCellWidths(e){const{visibleColumns:n}=this.columns;let r=e.firstElementChild,i=0;for(;r;){const e=n[i],{element:o}=e;e.minWidth&&(r.style.minWidth=Gn.setLength(e.minWidth)),e.maxWidth&&(r.style.maxWidth=Gn.setLength(e.maxWidth)),e.flex?e.childLevel&&o?(r.style.flex=`0 0 ${o.getBoundingClientRect().width}px`,r.style.width=""):(r.style.flex=e.flex,r.style.width=""):e.width?r.style.width=Gn.setLength(e.width):r.style.flex=r.style.width=r.style.minWidth="",r=r.nextElementSibling,i++}}get totalFixedWidth(){return this.columns.totalFixedWidth}fixWidths(){const e=this,{element:n,header:r,footer:i}=e;if(!e.collapsed){if(e.flex)r.flex=e.flex,i&&(i.flex=e.flex),n.style.flex=e.flex;else{if(e.hasCalculatedWidth&&!e.columns.some((e=>!e.hidden&&e.flex))&&e.totalFixedWidth!==e.width)return e.width=e.totalFixedWidth,void(e.hasCalculatedWidth=!0);let o=e.width;if(!o&&e.hasCalculatedWidth){o=0;for(const n of e.columns)n.flex||n.hidden||(o+=n.width)}n.style.width=`${o}px`,r.width=o,i&&(i.width=o)}e.syncScrollingPartners(!1)}}fixRowWidthsInSafariEdge(){if(c.isSafari){const e=this,{region:n,header:r}=e,i=r.calculateMinWidthForSafari();e.rowManager.forEach((e=>{const r=e.getElement(n);r&&(r.style.width=`${i}px`)})),r.headersElement.style.width=`${i}px`}}set width(e){const n=this;n.hasCalculatedWidth=!1,super.width=e,n.header.width=e,n.footer.width=e,n.isPainted&&n.onElementResize()}get width(){return super.width}set flex(e){const n=this;n.hasCalculatedWidth=!1,n.header.flex=e,n.footer.flex=e,super.flex=e,n.isPainted&&n.onElementResize()}get flex(){return super.flex}onInternalResize(e,n,r,i,o){const s=this,{grid:a}=s;super.onInternalResize(...arguments),(null==a?void 0:a.isPainted)&&(s.syncSplitterButtonPosition(),n!==i&&(a.trigger("horizontalScroll",{grid:a,subGrid:s,scrollLeft:s.scrollable.element.scrollLeft,scrollX:s.scrollable.x}),s.fakeScroller&&s.refreshFakeScroll(),a.syncFlexedSubCols(),s.fixRowWidthsInSafariEdge()),r!==o&&a.onHeightChange(),s.trigger("afterInternalResize",s))}syncParallelSplitters(e){const n=this,{grid:r}=n;if(n.splitterElement&&n.$showingSplitter)n.toggleSplitterCls("b-grid-splitter-collapsed",e);else{const i=r.getSubGrid(r.getPreviousRegion(n.region));i&&i.splitterElement&&i.syncParallelSplitters(e)}}onSplitterMouseEnter(){const e=this,{nextSibling:n}=e;e.collapsed||n&&n.collapsed||e.toggleSplitterCls("b-hover"),e.startSplitterButtonSyncing()}onSplitterMouseLeave(){const e=this,{nextSibling:n}=e;e.toggleSplitterCls("b-hover",!1),e.collapsed||n&&n.collapsed||e.stopSplitterButtonSyncing()}startSplitterButtonSyncing(){const e=this;e.splitterElement&&(e.syncSplitterButtonPosition(),e.splitterSyncScrollListener||(e.splitterSyncScrollListener=e.grid.scrollable.ion({scroll:"syncSplitterButtonPosition",thisObj:e})))}stopSplitterButtonSyncing(){this.splitterSyncScrollListener&&(this.splitterSyncScrollListener(),this.splitterSyncScrollListener=null)}syncSplitterButtonPosition(){const{grid:e}=this;this.splitterButtons.style.top=`${e.scrollable.y+(e.bodyHeight-(this.headerSplitter?e.headerHeight:0))/2}px`}get viewRectangle(){const{scrollable:e}=this;return new Gt(e.x,e.y,this.width||0,this.rowManager.viewHeight)}updateHasFlex(){this.scrollable.element.classList.toggle("b-has-flex",this.columns.hasFlex)}updateResizable(e){this.splitterElements.forEach((n=>Gn.toggleClasses(n,["b-disabled"],!e)))}resizeColumnsToFitContent(){this.grid.beginGridMeasuring(),this.columns.visibleColumns.forEach((e=>{e.resizeToFitContent(null,null,!0)})),this.grid.endGridMeasuring()}get overflowingHorizontally(){return!this.collapsed&&this.scrollable.hasOverflow("x")}get overflowingVertically(){return!1}refreshFakeScroll(){const e=this,{element:n,virtualScrollerElement:r,virtualScrollerWidth:i,header:o,footer:s,scrollable:a}=e,l=[...o.contentElement.children].reduce(sumWidths,0);a.scrollWidth=l,r.style.width=n.style.width,r.style.flex=n.style.flex,r.style.minWidth=n.style.minWidth,r.style.maxWidth=n.style.maxWidth,o.scrollable.syncOverflowState(),s.scrollable.syncOverflowState(),e.collapsed||(e.overflowingHorizontally?(i.style.width=`${a.scrollWidth||0}px`,e.grid.virtualScrollers.classList.remove("b-hide-display")):i.style.width=0)}initScroll(){const e=this,{scrollable:n,virtualScrollerElement:r}=e;e.syncPartnersOnFrame=e.createOnFrame(e.syncScrollingPartners),c.isFirefox&&n.element.addEventListener("wheel",(e=>{e.deltaX&&(n.x+=e.deltaX,e.preventDefault())})),e.fakeScroller=new Xo({element:r,overflowX:!0,widget:e}),n.ion({scroll:"onSubGridScroll",scrollend:"onSubGridScrollEnd",thisObj:e}),n.addPartner(e.fakeScroller,"x"),n.addPartner(e.header.scrollable,"x"),n.addPartner(e.footer.scrollable,"x"),e.refreshFakeScroll()}onSubGridScrollEnd(){const e=this;e.forceScrollUpdate||e.syncScrollingPartners(),e.scrolling=!1,Gn.scrollBarWidth||(e.grid.virtualScrollers.classList.remove("b-scrolling"),e.hideOverlayScroller())}onSubGridScroll(){this.forceScrollUpdate?(this.syncScrollingPartners(),this.forceScrollUpdate=!1):this.syncPartnersOnFrame()}showOverlayScroller(){this.hideOverlayScroller.cancel(),this.virtualScrollerElement.classList.add("b-show-virtual-scroller")}hideOverlayScroller(){this.virtualScrollerElement.classList.remove("b-show-virtual-scroller")}set scrolling(e){this._scrolling=e}get scrolling(){return this._scrolling}syncScrollingPartners(e=!0){const n=this,{grid:r}=n;!n.scrolling&&e&&(n.scrolling=!0,Gn.scrollBarWidth||(r.virtualScrollers.classList.add("b-scrolling"),n.showOverlayScroller())),r.trigger("horizontalScroll",{subGrid:n,grid:r,scrollLeft:n.scrollable.element.scrollLeft,scrollX:n.scrollable.x})}scrollColumnIntoView(e,n){const{columns:r,header:i}=this,o=i.scrollable;if(e=e instanceof Hd?e:r.get(e)||r.getById(e)||r.getAt(e)){const r=i.getHeader(e.id);if(r)return o.scrollIntoView(Gt.from(r,null,!0),n)}}onAddRow({rows:e,isExport:n}){const r=this,i=r.rowElementConfig,o=document.createDocumentFragment();e.forEach((e=>{const n=Gn.createElement(i);o.appendChild(n),e.addElement(r.region,n),r.fixCellWidths(n)})),n||(r.fixRowWidthsInSafariEdge(),r.element.insertBefore(o,r.insertRowsBefore))}get rowElements(){return this.fromCache(".b-grid-row",!0)}clearRows(){this.emptyCache();const e=this.element.querySelectorAll(".b-grid-row"),n=document.createRange();e.length&&(n.setStartBefore(e[0]),n.setEndAfter(e[e.length-1]),n.deleteContents())}addNewRowElement(){const e=Gn.append(this.element,this.rowElementConfig);return this.fixCellWidths(e),e}get store(){return this.grid.store}get rowManager(){var e;return null==(e=this.grid)?void 0:e.rowManager}toggleTransitionClasses(e=!1){const n=this,r=n.grid,i=r.getSubGrid(r.getNextRegion(n.region)),o=r.resolveSplitter(i);i.element.classList[e?"remove":"add"]("b-grid-subgrid-animate-collapse"),i.header.element.classList[e?"remove":"add"]("b-grid-subgrid-animate-collapse"),n.element.classList[e?"remove":"add"]("b-grid-subgrid-animate-collapse"),n.header.element.classList[e?"remove":"add"]("b-grid-subgrid-animate-collapse"),o.classList[e?"remove":"add"]("b-grid-splitter-animate")}get collapsed(){return this._collapsed}set collapsed(e){this.isConfiguring?this._collapsed=e:e?this.collapse():this.expand()}async collapse(){const e=this,{grid:n,element:r}=e,i=n.getSubGrid(n.getNextRegion(e.region)),o=e.splitterElement?e:e.previousSibling;let{_beforeCollapseState:s}=e,a=0;if(!n.rendered||!0!==e._collapsed)return n.eachSubGrid((n=>{n!==e&&!n._collapsed&&++a})),0===a&&await i.expand(),new Promise((o=>{if(s)o();else{s=e._beforeCollapseState={};let n=!1;e.width&&(n=!0,e.ion({afterinternalresize:()=>{o(e)},thisObj:e,once:!0})),s.width=e.width,s.elementWidth=r.style.width,""===i.element.style.flex&&(s.nextRegionWidth=i.width,i.width="",i.flex="1"),""!==r.style.flex&&(s.flex=r.style.flex,e.header.element.style.flex=r.style.flex=""),r.classList.add("b-grid-subgrid-collapsed"),e.virtualScrollerElement.classList.add("b-collapsed"),e.header.element.classList.add("b-collapsed"),e.footer.element.classList.add("b-collapsed"),e._collapsed=!0,e.width="",n||(e.syncParallelSplitters(!0),o(!1))}n.trigger("subGridCollapse",{subGrid:e}),n.afterToggleSubGrid({subGrid:e,collapsed:!0})})).then((r=>{var i;e.isDestroyed||!1!==r&&(n.refreshVirtualScrollbars(),e.syncParallelSplitters(!0),null==(i=o.startSplitterButtonSyncing)||i.call(o))}))}async expand(){const e=this,{grid:n,_beforeCollapseState:r}=e,i=n.getSubGrid(n.getNextRegion(e.region)),o=e.splitterElement?e:e.previousSibling;if(!n.rendered||!0===e._collapsed)return new Promise((s=>{if(null!=r){let n=!1;e.width!==r.elementWidth&&(n=!0,e.ion({afterinternalresize(){e.setTimeout((()=>s(e)),10)},thisObj:e,once:!0})),r.nextRegionWidth&&(i.width=r.nextRegionWidth,i.flex=null),e.element.classList.remove("b-grid-subgrid-collapsed"),e._collapsed=!1,e.virtualScrollerElement.classList.remove("b-collapsed"),e.header.element.classList.remove("b-collapsed"),e.footer.element.classList.remove("b-collapsed"),r.flex?(e.width=r.width,e.header.flex=e.flex=r.flex,e.footer.flex=r.flex,e._width=null):e.width=r.elementWidth,e.element.classList.remove("b-grid-subgrid-collapsed"),e._collapsed=!1,n?(o.stopSplitterButtonSyncing(),e.syncParallelSplitters(!1)):s(!1),delete e._beforeCollapseState}else s();n.trigger("subGridExpand",{subGrid:e}),n.afterToggleSubGrid({subGrid:e,collapsed:!1})}))}hide(){var e,n;return null==(e=this.header)||e.hide(),null==(n=this.footer)||n.hide(),this.hideSplitter(),super.hide()}show(){var e,n;return null==(e=this.header)||e.show(),null==(n=this.footer)||n.show(),this.showSplitter(),super.show()}};__publicField(Ah,"delayable",{hideOverlayScroller:1e3}),Ah.initClass(),Ah._$name="SubGrid";var GridSubGrids_default=e=>class GridSubGrids extends(e||re){static get $name(){return"GridSubGrids"}static get properties(){return{subGrids:{}}}changeSubGridConfigs(e){const n=this,r=new Set;for(const i of n.columns){const{region:n}=i;n&&(e[n]||(e[n]={}),r.add(n))}e.normal&&Et.isEmpty(e.normal)&&(e.normal=_h.defaultConfig.subGridConfigs.normal);for(const i of r)n.createSubGrid(i,e[i]);return n.items=n.subGrids,e}createSubGrid(e,n=null){const r=this,i=r.columns.makeChained((n=>n.region===e),["region"]),o=Et.assign({type:"subgrid",id:`${r.id}-${e}Subgrid`,parent:r,grid:r,region:e,headerClass:r.headerClass,footerClass:r.footerClass,columns:i,weight:e,scrollable:{yScroller:r.scrollable}},n||r.subGridConfigs[e]);let s=!1;o.flex||o.width||(o.width=i.totalFixedWidth,s=!0);const a=r.subGrids[e]=Ah.create(o);return a.hasCalculatedWidth=s,e===r.regions[0]&&(a.isFirstRegion=!0),a}onChildAdd(e){if(e.isSubGrid){const n=this,{items:r,headerContainer:i,virtualScrollers:o,footerContainer:s}=n,a=2*r.indexOf(e);n.hideHeaders||(Gn.insertAt(i,e.headerSplitter,a),Gn.insertAt(i,e.header.element,a)),Gn.insertAt(o,e.scrollerSplitter,a),Gn.insertAt(o,e.virtualScrollerElement,a),Gn.insertAt(s,e.footerSplitter,a),Gn.insertAt(s,e.footer.element,a),r.forEach(((e,n)=>{n<r.length-1&&e.showSplitter()})),0===a&&n.emptyTextEl&&e.element.appendChild(n.emptyTextEl)}return super.onChildAdd(e)}onChildRemove(e){if(super.onChildRemove(e),e.isSubGrid){const{items:n}=this;delete this.subGrids[e.region],oe.remove(this.regions,e.region),e.destroy(),n.length&&n[n.length-1].hideSplitter()}}doDestroy(){this.eachSubGrid((e=>e.destroy())),super.doDestroy()}eachSubGrid(e,n=null){this.items.forEach(((r,i)=>{r.isSubGrid&&e.call(n||r,r,i++)}))}callEachSubGrid(e,...n){let r=null;return this.items.forEach(((i,o)=>{if(i.isSubGrid&&i[e]){const s=i[e](...n);0===o&&(r=s)}})),r}get regions(){return this.items.map((e=>e.region))}getLastRegions(){const e=this.regions.slice(-2);return 2===e.length?e:[e[0],e[0]]}getNextRegion(e){const n=this.regions;return n[n.indexOf(e)+1]||n[n.length-2]}getPreviousRegion(e){return this.regions[this.regions.indexOf(e)-1]}getSubGrid(e){return this.subGrids[e]}getSubGridFromColumn(e){return e=e instanceof Hd?e:this.columns.getById(e)||this.columns.get(e),this.getSubGrid(e.region)}resolveSplitter(e){const n=this.getLastRegions();let r=e instanceof Ah?e.region:e;return n[1]===r&&(r=n[0]),this.subGrids[r].splitterElement}get widgetClass(){}},Ih={localeName:"En",localeDesc:"English (US)",localeCode:"en-US",ColumnPicker:{column:"Column",columnsMenu:"Columns",hideColumn:"Hide column",hideColumnShort:"Hide",newColumns:"New columns"},Filter:{applyFilter:"Apply filter",filter:"Filter",editFilter:"Edit filter",on:"On",before:"Before",after:"After",equals:"Equals",lessThan:"Less than",moreThan:"More than",removeFilter:"Remove filter",disableFilter:"Disable filter"},FilterBar:{enableFilterBar:"Show filter bar",disableFilterBar:"Hide filter bar"},Group:{group:"Group",groupAscending:"Group ascending",groupDescending:"Group descending",groupAscendingShort:"Ascending",groupDescendingShort:"Descending",stopGrouping:"Stop grouping",stopGroupingShort:"Stop"},HeaderMenu:{moveBefore:e=>`Move before "${e}"`,moveAfter:e=>`Move after "${e}"`,collapseColumn:"Collapse column",expandColumn:"Expand column"},ColumnRename:{rename:"Rename"},MergeCells:{mergeCells:"Merge cells",menuTooltip:"Merge cells with same value when sorted by this column"},Search:{searchForValue:"Search for value"},Sort:{sort:"Sort",sortAscending:"Sort ascending",sortDescending:"Sort descending",multiSort:"Multi sort",removeSorter:"Remove sorter",addSortAscending:"Add ascending sorter",addSortDescending:"Add descending sorter",toggleSortAscending:"Change to ascending",toggleSortDescending:"Change to descending",sortAscendingShort:"Ascending",sortDescendingShort:"Descending",removeSorterShort:"Remove",addSortAscendingShort:"+ Ascending",addSortDescendingShort:"+ Descending"},Column:{columnLabel:e=>`${e.text?`${e.text} column. `:""}SPACE for context menu${e.sortable?", ENTER to sort":""}`,cellLabel:new String},Checkbox:{toggleRowSelect:"Toggle row selection",toggleSelection:"Toggle selection of entire dataset"},RatingColumn:{cellLabel:e=>{var n;return`${e.text?e.text:""} ${(null==(n=e.location)?void 0:n.record)?`rating : ${e.location.record[e.field]||0}`:""}`}},GridBase:{loadFailedMessage:"Data loading failed!",syncFailedMessage:"Data synchronization failed!",unspecifiedFailure:"Unspecified failure",networkFailure:"Network error",parseFailure:"Failed to parse server response",serverResponse:"Server response:",noRows:"No records to display",moveColumnLeft:"Move to left section",moveColumnRight:"Move to right section",moveColumnTo:e=>`Move column to ${e}`},CellMenu:{removeRow:"Delete"},RowCopyPaste:{copyRecord:"Copy",cutRecord:"Cut",pasteRecord:"Paste",rows:"rows",row:"row"},CellCopyPaste:{copy:"Copy",cut:"Cut",paste:"Paste"},PdfExport:{"Waiting for response from server":"Waiting for response from server...","Export failed":"Export failed","Server error":"Server error","Generating pages":"Generating pages...","Click to abort":"Cancel"},ExportDialog:{width:"40em",labelWidth:"12em",exportSettings:"Export settings",export:"Export",exporterType:"Control pagination",cancel:"Cancel",fileFormat:"File format",rows:"Rows",alignRows:"Align rows",columns:"Columns",paperFormat:"Paper format",orientation:"Orientation",repeatHeader:"Repeat header"},ExportRowsCombo:{all:"All rows",visible:"Visible rows"},ExportOrientationCombo:{portrait:"Portrait",landscape:"Landscape"},SinglePageExporter:{singlepage:"Single page"},MultiPageExporter:{multipage:"Multiple pages",exportingPage:({currentPage:e,totalPages:n})=>`Exporting page ${e}/${n}`},MultiPageVerticalExporter:{multipagevertical:"Multiple pages (vertical)",exportingPage:({currentPage:e,totalPages:n})=>`Exporting page ${e}/${n}`},RowExpander:{loading:"Loading",expand:"Expand",collapse:"Collapse"}},Fh=(Oe.publishLocale(Ih),new Promise((e=>e()))),Ph="GridBase:store",Oh={block:"nearest",inline:"nearest"},Lh={dataset:1,pageLoad:1,filter:1},_h=class extends(La.mixin(Pluggable_default,State_default,GridElementEvents_default,GridFeatures_default,GridNavigation_default,GridResponsive_default,GridSelection_default,GridState_default,GridSubGrids_default,LoadMaskable_default)){static get $name(){return"GridBase"}static get type(){return"gridbase"}static get delayable(){return{onGridVerticalScroll:{type:"raf"},bufferedAfterColumnsResized:250,bufferedElementResize:250}}static get configurable(){return{autoHeight:null,enableSticky:null,enableTextSelection:null,fillLastColumn:!0,positionMode:"translate",showDirty:null,subGridConfigs:{normal:{flex:1}},store:{value:{},$config:"nullify"},rowManager:{value:{},$config:["nullify","lazy"]},scrollManager:{value:{},$config:["nullify","lazy"]},columns:{value:[],$config:"nullify"},minHeight:"10em",hideFooters:!0,contentElMutationObserver:!1,trapFocus:!1,ariaElement:"bodyElement",cellTabIndex:-1,rowCls:{value:"b-grid-row",$config:{merge:this.mergeCls}},cellCls:{value:"b-grid-cell",$config:{merge:this.mergeCls}},emptyText:"L{noRows}",sortFeatureStore:"store"}}static get defaultConfig(){return{rowHeight:null,fixedRowHeight:null,defaultRowHeight:45,fullRowRefresh:!0,hideHeaders:null,preserveScrollOnDatasetChange:null,preserveFocusOnDatasetChange:!0,data:null,defaultRegion:"normal",destroyStore:null,maskDefaults:{cover:"body",target:"element"},columnLines:!0,resizeToFitIncludesHeader:!0,animateRemovingRows:!0,disableGridRowModelWarning:null,headerClass:yh,footerClass:mh,testPerformance:!1,rowScrollMode:"move",monitorResize:!0,features:!0,scrollable:{overflowY:!0},scrollerClass:vh,refreshSuspended:0,transitionDuration:500,contextMenuTriggerEvent:"contextmenu",localizableProperties:["emptyText"],asyncEventSuffix:"",fixElementHeightsBuffer:350,testConfig:{transitionDuration:50,fixElementHeightsBuffer:50}}}static get properties(){return{_selectedRecords:[],_verticalScrollHeight:0,virtualScrollHeight:0,_scrollTop:null}}finishConfigure(e){const n=this,{initScroll:r}=n;n.initScroll=()=>!n.scrollInitialized&&r.call(n),A.isTestEnv&&(n.bufferedAfterColumnsResized.delay=50,n.bufferedElementResize.delay=50),super.finishConfigure(e),Le.ion({locale:"onBeforeLocaleChange",prio:1,thisObj:n}),Le.ion({locale:"onLocaleChange",prio:-1,thisObj:n}),or.ion({theme:"onThemeChange",thisObj:n}),n.ion({subGridExpand:"onSubGridExpand",prio:-1,thisObj:n}),n.bufferedFixElementHeights=n.buffer("fixElementHeights",n.fixElementHeightsBuffer,n),n.setGridClassList(n.element.classList)}onSubGridExpand(){this.renderContents()}onBeforeLocaleChange(){this._suspendRenderContentsOnColumnsChanged=!0}onLocaleChange(){this._suspendRenderContentsOnColumnsChanged=!1,this.isPainted&&this.renderContents()}finalizeInit(){super.finalizeInit(),this.store.isLoading&&this.onStoreBeforeRequest()}changeScrollManager(e,n){return null==n||n.destroy(),e?uc.new({element:this.element,owner:this},e):null}doDestroy(){var e,n;const r=this;r.detachListeners(Ph),null==(e=r.scrollManager)||e.destroy();for(const e of Object.values(r.features))null==(n=e.destroy)||n.call(e);r._focusedCell=null,r.columns.destroy(),super.doDestroy()}setGridClassList(e){Object.values(this.features).forEach((n=>{if(n.disabled)return;let r;r=Object.prototype.hasOwnProperty.call(n.constructor,"featureClass")?n.constructor.featureClass:`b-${n instanceof re?n.$$name:n.constructor.name}`,r&&e.add(r.toLowerCase())}))}compose(){const{autoHeight:e,enableSticky:n,enableTextSelection:r,fillLastColumn:i,positionMode:o,showDirty:s}=this;return{class:{[`b-grid-${o}`]:1,"b-enable-sticky":n,"b-grid-notextselection":!r,"b-autoheight":e,"b-fill-last-column":i,"b-show-dirty":s}}}get cellCls(){const{_cellCls:e}=this;return e.value||e}get bodyConfig(){const{autoHeight:e,hideFooters:n,hideHeaders:r}=this;return{reference:"bodyElement",className:{"b-autoheight":e,"b-grid-panel-body":1},[this.hasHeader?"ariaLabelledBy":""]:`${this.id}-panel-title`,children:{headerContainer:{tag:"header",role:"row","aria-rowindex":1,className:{"b-grid-header-container":1,"b-hidden":r}},bodyContainer:{className:"b-grid-body-container",tabIndex:-1,role:"presentation",children:{verticalScroller:{className:"b-grid-vertical-scroller"}}},virtualScrollers:{className:"b-virtual-scrollers b-hide-display",style:c.isFirefox&&Gn.scrollBarWidth?{height:`${Gn.scrollBarWidth}px`}:void 0},footerContainer:{tag:"footer",className:{"b-grid-footer-container":1,"b-hidden":n}}}}}get contentElement(){return this.verticalScroller}get overflowElement(){return this.bodyContainer}updateHideFooters(e){var n;null==(n=this.footerContainer)||n.classList[e?"add":"remove"]("b-hidden")}changeColumns(e,n){const r=this;if(!e&&n)return r.isDestroying?n.owner===r&&n.destroy():n.removeAll(),n;if(e.isStore)return(null==n?void 0:n.owner)===r&&n.destroy(),e.grid=r,e;if(Array.isArray(e)){if(n){const r=n.allRecords.slice();n.data=e;for(const e of r)n.includes(e)||e.destroy();return n}e={data:e}}if(n)throw new Error("Replacing ColumnStore is not supported");return qd.new({grid:r,owner:r},e)}updateColumns(e,n){var r,i;const o=this;var s,a;null==(r=super.updateColumns)||r.call(this,e,n),e.ion({refresh:o.onColumnsChanged,change:o.onColumnsChanged,sort:o.onColumnsChanged,thisObj:o}),e.ion((s=o.onColumnsResized,a=o,{update:({store:e,record:n,changes:r})=>{let i=!0;return("width"in r||"minWidth"in r||"maxWidth"in r||"flex"in r)&&(i=s.call(a,{store:e,record:n,changes:r})),i}})),c.isTouchDevice&&(o.touch=!0,e.forEach((e=>{const{touchConfig:n}=e;n&&e.applyState(n)}))),null==(i=o.bodyElement)||i.setAttribute("aria-colcount",e.visibleColumns.length)}onColumnsChanged({type:e,action:n,changes:r,record:i,records:o,isMove:s}){var a;const l=this,{columns:c,checkboxSelectionColumn:d}=l,u=r&&1===Object.keys(r).length;if("refresh"===e&&"batch"!==n||"update"===n&&u&&"parentIndex"in r||"sort"===n&&c.isSyncingDataOnLoad)return;const h="add"===n&&o.some((e=>e.region&&!l.subGrids[e.region]));if(!l.isConfiguring&&(h||l.isPainted&&(!s||"remove"!==n))){if("add"===n)for(const e of o){const{region:n}=e;l.subGrids[n]||l.add(l.createSubGrid(n,null==(a=l.subGridConfigs)?void 0:a[n]))}if("update"===n){if(("width"in r||"minWidth"in r||"maxWidth"in r||"flex"in r)&&!("region"in r)){const{region:e}=i;return c.visibleColumns.forEach((n=>{n.region===e&&n.repaintOnResize&&l.refreshColumn(n)})),void l.afterColumnsChange({action:n,changes:r,column:i})}if("text"in r&&u)return void i.subGrid.refreshHeader();if("hidden"in r){const e=l.getSubGridFromColumn(i.id);e.header.fixHeaderWidths(),e.footer.fixFooterWidths(),e.updateHasFlex()}}if("dataset"===n||"batch"===n||"update"===n&&"region"in r){const e=c.getDistinctValues("region",!0),{toRemove:n,toAdd:r}=oe.delta(e,l.regions,!0);l.remove(n.map((e=>l.getSubGrid(e)))),l.add(r.map((e=>l.createSubGrid(e,l.subGridConfigs[e]))))}if(d&&!c.includes(d)){const e=c.indexOf(c.findRecord("type","rownumber"))+1;c.insert(e,d,!0)}l._suspendRenderContentsOnColumnsChanged||l.renderContents(),l.syncFlexedSubCols(),l.bodyElement.setAttribute("aria-colcount",c.visibleColumns.length),l.afterColumnsChange({action:n,changes:r,column:i,columns:o})}}onColumnsResized({changes:e,record:n}){var r;const i=this;if(i.isConfiguring)return;const o=Gn.setLength(n.width),s=Gn.setLength(n.minWidth),a=Gn.setLength(n.maxWidth),l=i.getSubGridFromColumn(n.id);if(l.header.fixHeaderWidths(),l.footer.fixFooterWidths(),l.updateHasFlex(),!n.flex||!n.childLevel){i.cellEls&&n===i.lastColumnResized||(i.cellEls=Gn.children(i.element,`.b-grid-cell[data-column-id="${n.id}"]`),i.lastColumnResized=n);for(const l of i.cellEls)"width"in e&&(l.style.width=o),"minWidth"in e&&(l.style.minWidth=s),"maxWidth"in e&&(l.style.maxWidth=a),"flex"in e&&(l.style.flex=null!=(r=n.flex)?r:null)}i.resizingColumns||i.afterColumnsResized(n),i.syncFlexedSubCols()}afterColumnsResized(e){const n=this;n.eachSubGrid((n=>{n.collapsed||e&&e.region!==n.region||(n.fixWidths(),n.fixRowWidthsInSafariEdge())})),n.lastColumnResized=n.cellEls=null,n.bufferedAfterColumnsResized(e),n.onHeightChange()}syncFlexedSubCols(){const e=this.columns.query((e=>e.flex&&e.childLevel&&e.element));if(e)for(const n of e){const e=n.element.getBoundingClientRect().width,r=Gn.children(this.element,`.b-grid-cell[data-column-id="${n.id}"]`);for(const n of r)n.style.flex=`0 0 ${e}px`}}bufferedAfterColumnsResized(e){this.columns.usesAutoHeight&&this.refreshRows(),this.refreshVirtualScrollbars(),this.eachSubGrid((n=>{n.collapsed||e&&e.region!==n.region||n.refreshFakeScroll()}))}bufferedElementResize(){this.refreshRows()}onInternalResize(e,n,r,i,o){Gn.scrollBarWidth&&n<i&&this.eachSubGrid((e=>{e.flex&&e.onElementResize(e.element)})),super.onInternalResize(...arguments),this.isPainted&&n!==i&&this.columns.usesFlexAutoHeight&&this.bufferedElementResize()}changeRowManager(e,n){const r=this;if(r._isRowMeasured||r.measureRowHeight(),null==n||n.destroy(),e){const n=fh.new({grid:r,rowHeight:r.rowHeight,rowScrollMode:r.rowScrollMode||"move",autoHeight:r.autoHeight,fixedRowHeight:r.fixedRowHeight,internalListeners:{changeTotalHeight:"onRowManagerChangeTotalHeight",requestScrollChange:"onRowManagerRequestScrollChange",thisObj:r}},e);return r.relayEvents(n,["beforeRenderRow","renderRow"]),r._rowManager=null,n}}getRowHeight(e){return e.rowHeight}processRowHeight(e,n){}bindStore(e){const n=this.asyncEventSuffix;e.ion({name:Ph,[`refresh${n}`]:"onStoreDataChange",[`add${n}`]:"onStoreAdd",[`remove${n}`]:"onStoreRemove",[`replace${n}`]:"onStoreReplace",[`removeAll${n}`]:"onStoreRemoveAll",[`move${n}`]:e.tree?null:"onFlatStoreMove",change:"relayStoreDataChange",idChange:"onStoreRecordIdChange",update:"onStoreUpdateRecord",beforeRequest:"onStoreBeforeRequest",afterRequest:"onStoreAfterRequest",exception:"onStoreException",commit:"onStoreCommit",loadSync:"onStoreLoadSync",thisObj:this}),super.bindStore(e)}unbindStore(e){this.detachListeners(Ph),this.destroyStore&&e.destroy()}changeStore(e){var n;return null==e?null:("string"==typeof e&&(e=yi.getStore(e)),e.isStore||((e=Et.assign({data:this.data,tree:Boolean(null==(n=this.initialConfig.features)?void 0:n.tree)},e)).data||delete e.data,e.modelClass||(e.modelClass=iu),e=new(e.readUrl?Ci:yi)(e)),e)}updateStore(e,n){var r,i;const o=this;null==(r=super.updateStore)||r.call(this,e,n),n&&o.unbindStore(n),e&&(n&&o.deselectAll(),o.bindStore(e)),o.trigger("bindStore",{store:e,oldStore:n}),o.isDestroying||!o.isPainted||o.refreshSuspended||null==(i=o._rowManager)||i.reinitialize()}onStoreLoadSync(){this.rowManager.renderFromRow(this.topRow)}onStoreUpdateRecord({source:e,record:n,changes:r}){const i=this;if(!i.refreshSuspended&&!e.isSyncingDataOnLoad)if(i.forceFullRefresh)i.rowManager.refresh(),i.forceFullRefresh=!1;else{let o;if(n.isFieldModified("id")&&(o=i.getRowFor(n.meta.modified.id)),o=o||i.getRowFor(n),!o)return;if(i.fullRowRefresh||n.isSpecialRow){const r=e.indexOf(n);-1!==r&&o.render(r,n)}else i.columns.visibleColumns.forEach((e=>{const n=e.field;if(!(e.constructor.simpleRenderer&&!Object.prototype.hasOwnProperty.call(e.data,"renderer"))||r[n]){const e=o.getCell(n);e&&o.renderCell(e)}}))}}refreshFromRowOnStoreAdd(e,n){const r=this,{rowManager:i}=r;i.renderFromRow(e),i.trigger("changeTotalHeight",{totalHeight:i.totalHeight}),1===r.store.count&&r.callEachSubGrid("refreshFakeScroll")}onMaskAutoClose(e){super.onMaskAutoClose(e),this.toggleEmptyText()}onStoreAdd({source:e,records:n,index:r,oldIndex:i,isChild:o,oldParent:s,parent:a,isMove:l,isExpandAll:c}){var d;const u=this,{rowManager:h}=u;if(!u.isPainted||c||u.refreshSuspended||e.isSyncingDataOnLoad||(null==(d=e.project)?void 0:d.applyingChangeset))return;const g=l&&n.some((n=>{if(l[n.id]){const r=e.getById(n.meta.modified.parentId);return(null==r?void 0:r.isExpanded(e))&&(null==r?void 0:r.ancestorsExpanded(e))}}));if(o&&!n[0].ancestorsExpanded(e)&&!g){if(!a.isLeaf){const e=h.getRowById(a);e&&h.renderRows([e])}return}h.calculateRowCount(!1,!0,!0),e.isFiltered&&(r=e.indexOf(n[0]));const{topIndex:p,rows:m,rowCount:f}=h,b=h.topIndex+h.rowCount-1,v=r,y=r+n.length-1,w=b>=e.count-n.length-1;s||i>-1||o&&l&&Object.values(l).some((e=>e))?h.refresh():v>=p&&v<p+f?u.refreshFromRowOnStoreAdd(m[v-p],...arguments):y>=p&&y<p+f?h.refresh():(w&&r>b&&h.fillBelow(u._scrollTop||0),h.estimateTotalHeight(!0))}onStoreException({action:e,type:n,response:r,exceptionType:i,error:o}){var s;const a=this;let l;switch(n){case"server":l=r.message||a.L("L{unspecifiedFailure}");break;case"exception":l="network"===i?a.L("L{networkFailure}"):(null==o?void 0:o.message)||(null==(s=null==r?void 0:r.parsedJson)?void 0:s.message)||a.L("L{parseFailure}")}a.applyMaskError(`<div class="b-grid-load-failure">\n                <div class="b-grid-load-fail">${a.L("read"===e?"L{loadFailedMessage}":"L{syncFailedMessage}")}</div>\n                ${(null==r?void 0:r.url)?`<div class="b-grid-load-fail">${r.url}</div>`:""}\n                <div class="b-grid-load-fail">${a.L("L{serverResponse}")}</div>\n                <div class="b-grid-load-fail">${l}</div>\n            </div>`)}onStoreDataChange({action:e,changes:n,source:r,syncInfo:i}){var o;null==(o=super.onStoreDataChange)||o.call(this,...arguments);const s=this;if(s.refreshSuspended||!s.rowManager||r.isSyncingDataOnLoad)return;if("dataset"===e&&(s.rowManager.clearKnownHeights(),r.isTree&&r.isFiltered))return;const a=r.isGrouped&&n&&r.groupers.some((e=>e.field in n));s.isPainted&&!a&&s.renderRows(Boolean(!(e in Lh)||s.preserveScrollOnDatasetChange)),s.toggleEmptyText()}onStoreRecordIdChange(){var e;null==(e=super.onStoreRecordIdChange)||e.call(this,...arguments)}onStoreBeforeRequest(){this.applyLoadMask()}onStoreAfterRequest(e){this.loadMask&&!e.exception&&(this.masked=null,this.toggleEmptyText())}needsFullRefreshOnStoreRemove({isCollapse:e}){const n=this._features;return(null==n?void 0:n.group)&&!n.group.disabled||(null==n?void 0:n.groupSummary)&&!n.groupSummary.disabled||this.store.tree&&!e&&this.store.modelClass.convertEmptyParentToLeaf}onStoreRemove({source:e,records:n,isCollapse:r,isChild:i,isMove:o,isCollapseAll:s}){var a;if(!this.isPainted||o||s)return;null==(a=super.onStoreRemove)||a.call(this,...arguments);const l=this,{rowManager:c}=l;if(c.invalidateKnownHeight(n),!e.isSyncingDataOnLoad){if(l.animateRemovingRows&&!r&&!i){const e=n.reduce(((e,n)=>{const r=c.getRowById(n.id);return r&&e.push(r),e}),[]);if(e.length){const n=e[0];return l.isAnimating=!0,cn.onTransitionEnd({element:n._elementsArray[0],property:"left",duration:l.transitionDuration,thisObj:l,handler:()=>{l.isAnimating=!1,e.forEach((e=>!e.isDestroyed&&e.removeCls("b-removing"))),c.refresh(),l.trigger("rowRemove"),l.afterRemove(arguments[0])}}),void e.forEach((e=>e.addCls("b-removing")))}}if(l.needsFullRefreshOnStoreRemove(...arguments))c.refresh(),l.afterRemove(arguments[0]);else{const e=c.topIndex;if(c.calculateRowCount(!1,!0,!0),c.topIndex!==e)c.renderFromRow(c.topRow);else{const{rows:e}=c,r=n.reduce(((n,r)=>{const i=c.getRowById(r.id);return i&&(n=Math.min(n,e.indexOf(i))),n}),e.length);e[r]?!l.refreshSuspended&&c.renderFromRow(e[r]):c.trigger("changeTotalHeight",{totalHeight:c.totalHeight})}l.trigger("rowRemove",{isCollapse:r}),l.afterRemove(arguments[0])}}}onFlatStoreMove({from:e,to:n}){const{rowManager:r,store:i}=this,{topIndex:o,rowCount:s}=r,[a,l]=[e,n].sort(((e,n)=>e-n)),c=i.indexOf(i.getAt(a,!0)),d=i.indexOf(i.getAt(l,!0));c>=o&&c<o+s?r.renderFromRow(r.rows[c-o]):d>=o&&d<o+s&&r.refresh()}onStoreReplace({records:e,all:n}){const{rowManager:r}=this;if(n)r.clearKnownHeights(),r.refresh();else{const n=e.reduce(((e,[,n])=>{const r=this.getRowFor(n);return r&&e.push(r),e}),[]);r.invalidateKnownHeight(e),r.renderRows(n)}}relayStoreDataChange(e){if(this.ariaElement.setAttribute("aria-rowcount",this.store.count+1),!this.project)return this.trigger("dataChange",{...e,store:e.source,source:this})}onStoreRemoveAll(){var e;null==(e=super.onStoreRemoveAll)||e.call(this,...arguments),this.isPainted&&(this.rowManager.clearKnownHeights(),this.renderRows(!1),this.toggleEmptyText())}onStoreCommit({changes:e}){if(this.showDirty&&e.modified.length){const n=[];e.modified.forEach((e=>{const r=this.rowManager.getRowFor(e);r&&n.push(r)})),this.rowManager.renderRows(n)}}get data(){return this._store?this._store.records:this._data}set data(e){this._store?this._store.data=e:this._data=e}populateHeaderMenu({column:e,items:n}){const r=this,{subGrids:i,regions:o}=r,{parent:s}=e;let a=!0;Object.entries(i).forEach((([l,c])=>{if(!c.sealedColumns&&e.draggable&&l!==e.region&&(!s&&i[e.region].columns.count>1||s&&s.children.length>1)){const s=c.element.compareDocumentPosition(i[e.region].element)===document.DOCUMENT_POSITION_PRECEDING,d=r.rtl?!s:s,u=o.length>2?r.L("L{moveColumnTo}",r.optionalL(l)):r.L(d?"L{moveColumnRight}":"L{moveColumnLeft}");n[`${l}Region`]={targetSubGrid:l,text:u,icon:"b-fw-icon b-icon-column-move-"+(d?"right":"left"),separator:a,disabled:!e.allowDrag,onItem:({item:n})=>{e.traverse((e=>e.region=l)),r.columns.insert(r.columns.indexOf(i[n.targetSubGrid].columns.last)+1,e),r.scrollColumnIntoView(e)}},a=!1}}))}populateCellMenu({record:e,items:n}){}getColumnDragToolbarItems(e,n){return n}normalizeCellContext(e){const n=this,{columns:r}=n;return e.isLocation?e:e.isModel?new Bd({grid:n,id:e.id,columnId:r.visibleColumns[0].id}):new Bd(Et.assign({grid:n},e))}getCell(e){const{store:n,columns:r}=this,{visibleColumns:i}=this.columns,o=isNaN(e.row)?isNaN(e.rowIndex)?n.indexOf(e.record||e.id):e.rowIndex:e.row,s=isNaN(e.column)?isNaN(e.columnIndex)?i.indexOf(e.column||r.getById(e.columnId)||r.get(e.field)||i[0]):e.columnIndex:e.column;return o>-1&&o<n.count&&s>-1&&s<i.length&&this.normalizeCellContext(e).cell||null}getHeaderElement(e){return e.isModel&&(e=e.id),this.fromCache(`.b-grid-header[data-column-id="${e}"]`)}getHeaderElementByField(e){const n=this.columns.get(e);return n?this.getHeaderElement(n):null}get bodyHeight(){return this._bodyHeight}get headerHeight(){const e=this;return e.isPainted&&!e._headerHeight&&(e._headerHeight=e.headerContainer.offsetHeight),e._headerHeight}get footerHeight(){const e=this;return e.isPainted&&!e._footerHeight&&(e._footerHeight=e.footerContainer.offsetHeight),e._footerHeight}get isTreeGrouped(){var e;return Boolean(null==(e=this.features.treeGroup)?void 0:e.isGrouped)}getRecordFromElement(e){const n=e.closest(".b-grid-row");return n?this.store.getAt(n.dataset.index):null}getColumnFromElement(e){const n=e.closest(".b-grid-cell, .b-grid-header");if(!n)return null;if(n.matches(".b-grid-header"))return this.columns.getById(n.dataset.columnId);const r=Si.get(n);return this.columns.getById(r.columnId)}updateAutoHeight(e){Et.assertBoolean(e,"autoHeight")}get columnLines(){return this._columnLines}set columnLines(e){Et.assertBoolean(e,"columnLines"),Gn.toggleClasses(this.element,"b-no-column-lines",!e),this._columnLines=e}get keyMapElement(){return this.bodyElement}fixSizes(){this.callEachSubGrid("fixWidths");const e=this.headerContainer.querySelectorAll(".b-grid-header.b-depth-0");for(let n=0,{length:r}=e;n<r;n++)e[n].setAttribute("aria-colindex",n+1)}onRowManagerChangeTotalHeight({totalHeight:e,immediate:n}){return this.refreshTotalHeight(e,n)}refreshTotalHeight(e=this.rowManager.totalHeight,n=!1){const r=this;if(r.renderingRows||!r.isVisible)return!1;const i=r.scrollable,o=Math.abs(r.virtualScrollHeight-e),s=r._bodyRectangle.height;if(o){const a=e-s-r._scrollTop<2*s||r._verticalScrollHeight&&r._verticalScrollHeight-s<r._scrollTop;i.scrollHeight=r.virtualScrollHeight=e,r.isPainted&&(r.scrolling&&!a||o<100)&&!n?r.bufferedFixElementHeights():(r.virtualScrollHeightDirty&&r.virtualScrollHeightDirty(),r.bufferedFixElementHeights.cancel(),r.fixElementHeights())}}fixElementHeights(){const e=this,n=e.virtualScrollHeight,r=`${n}px`;e._verticalScrollHeight=n,e.verticalScroller.style.height=r,e.virtualScrollHeightDirty=!1,e.autoHeight&&(e.bodyContainer.style.height=r,e._bodyHeight=n,e.refreshBodyRectangle()),e.refreshVirtualScrollbars()}refreshBodyRectangle(){return this._bodyRectangle=Gt.client(this.bodyContainer)}set scrolling(e){this._scrolling=e}get scrolling(){return this._scrolling}enableScrollingCloseToEdges(e){this.scrollManager.startMonitoring({scrollables:[{element:this.scrollable.element,direction:"vertical"},...oe.asArray(e||[]).map((e=>({element:("string"==typeof e?this.subGrids[e]:e).scrollable.element})))],direction:"horizontal"})}disableScrollingCloseToEdges(e){this.scrollManager.stopMonitoring([this.scrollable.element,...oe.asArray(e||[]).map((e=>("string"==typeof e?this.subGrids[e]:e).element))])}onRowManagerRequestScrollChange({bottom:e}){this.scrollable.y=e-this.bodyHeight}initScroll(){const e=this,{scrollable:n}=e;e.scrollInitialized||(e.scrollInitialized=!0,n.contentElement=e.contentElement,n.ion({scroll:"onGridVerticalScroll",scrollend:"onGridVerticalScrollEnd",thisObj:e}),e.callEachSubGrid("initScroll"),c.isMobileSafari&&(n.element.style.transform="translate3d(0, 0, 0)"))}onGridVerticalScroll({source:e}){const n=this,{y:r}=e;r!==n._scrollTop&&(n._scrollTop=r,n.scrolling||(n.scrolling=!0,n.eachSubGrid((e=>e.suspendResizeMonitor=!0))),n.rowManager.updateRenderedRows(r),n.afterScroll({scrollTop:r}),n.trigger("scroll",{scrollTop:r}))}onGridVerticalScrollEnd(){this.scrolling=!1,this.eachSubGrid((e=>e.suspendResizeMonitor=!1))}async scrollRowIntoView(e,n=Oh){var r;const i=this,o=n.block||"nearest",{rowManager:s}=i,a=i.store.getById(e);if(a){let e;if(-1===i.store.indexOf(a))return Fh;let l=i.scrollable,c=i.getRecordCoords(a);const d=Gt.from(l.element);if(!c.virtual){let{column:e}=n;if(e){if(e.isModel||(e=i.columns.getById(e)||i.columns.get(e)),e){l=i.getSubGridFromColumn(e).scrollable;const n=Gt.from(s.getRowFor(a).getCell(e.id));c.x=n.x,c.width=n.width}}else n.x=!1;return l.scrollIntoView(c,n)}{const u=c.block,h="nearest"!==o?n:{block:u};if(e=l.scrollIntoView(c,{block:"center"}),s.scrollTargetRecordId=a,s.updateRenderedRows(l.y,!0),c=i.getRecordCoords(a),s.lastScrollTop=l.y,c.virtual)return Fh;n.animate?(l.suspendEvents(),"end"===o||"nearest"===o&&"end"===u?l.y-=d.bottom-c.bottom:("start"===o||"nearest"===o&&"start"===u)&&(l.y+=c.y-d.y),s.updateRenderedRows(l.y,!1,!0),"end"===u?l.y-=s.appendRowBuffer*s.rowHeight-1:l.y+=s.prependRowBuffer*s.rowHeight-1,l.scrollIntoView(i.getRecordCoords(a),Object.assign({},n,h)),l.resumeEvents()):(n.recursive||await e,await(null==(r=i.scrollRowIntoView)?void 0:r.call(i,a,Object.assign({recursive:!0},n,h))))}}}scrollColumnIntoView(e,n){return e=e instanceof Hd?e:this.columns.get(e)||this.columns.getById(e)||this.columns.getAt(e),this.getSubGridFromColumn(e).scrollColumnIntoView(e,n)}scrollCellIntoView(e,n){return this.scrollRowIntoView(e.id,Object.assign({column:e.columnId},"boolean"==typeof n?{animate:n}:n))}scrollToBottom(e){return this.scrollRowIntoView(this.store.last,e)}scrollToTop(e){return this.scrollable.scrollBy(0,-this.scrollable.y,e)}storeScroll(){const e=this,n=e.storedScrollState={scrollTop:e.scrollable.y,scrollLeft:{}};return e.eachSubGrid((e=>{n.scrollLeft[e.region]=e.scrollable.x})),n}restoreScroll(e=this.storedScrollState){this.eachSubGrid((n=>{var r;const i=e.scrollLeft[n.region];null!=i&&(n.scrollable.updateX(i),n.header.scrollable.updateX(i),n.footer.scrollable.updateX(i),null==(r=n.fakeScroller)||r.updateX(i))})),this.scrollable.updateY(e.scrollTop)}beginGridMeasuring(){const e=this;if(e.$measureCellElements||(e.$measureCellElements=Gn.createElement({className:"b-grid-subgrid "+(!e._isRowMeasured&&e.hasFeature("stripe")?"b-stripe":""),reference:"subGridElement",style:{position:"absolute",top:"-10000px",left:"-100000px",visibility:"hidden",contain:"strict"},children:[{className:"b-grid-row",reference:"rowElement",children:[{className:"b-grid-cell",reference:"cellElement",style:{width:"auto",contain:c.isFirefox?"layout paint":"layout style paint"}}]}]})),e.getConfig("element"),e.verticalScroller.appendChild(e.$measureCellElements.subGridElement),!e.rendered){const n=e.appendTo||e.insertBefore||document.body,r=Gn.getRootElement("string"==typeof n?document.getElementById(n):n)||document.body;e.adopt&&r.contains(e.element)||(r.appendChild(e.element),e.$removeAfterMeasuring=!0)}return e.$measureCellElements}endGridMeasuring(){this.$removeAfterMeasuring&&(this.element.remove(),this.$removeAfterMeasuring=!1),this.$measureCellElements.subGridElement.remove()}measureRowHeight(){const e=this,{rowElement:n}=e.beginGridMeasuring(),r=Gn.getStyleValue(n,["height","border-top-width","border-bottom-width"]),i=parseInt(r.height),o=c.isFirefox?globalThis.devicePixelRatio/Math.max(Math.trunc(globalThis.devicePixelRatio),1):1,s=r["border-top-width"]?Math.round(o*parseFloat(r["border-top-width"])):0,a=r["border-bottom-width"]?Math.round(o*parseFloat(r["border-bottom-width"])):0;null!=e.rowHeight&&e.rowHeight!==e._rowHeightFromStyle||(e.rowHeight=!isNaN(i)&&i?i:e.defaultRowHeight,e._rowHeightFromStyle=e.rowHeight),e._rowBorderHeight=s+a,e._isRowMeasured=!0,e.endGridMeasuring()}onThemeChange({theme:e}){this.whenVisible("measureRowHeight"),this.trigger("theme",{theme:e})}refreshRows(e=!1){const{element:n,rowManager:r}=this;n.classList.add("b-notransition"),e?r.returnToTop():r.refresh(),n.classList.remove("b-notransition")}refreshColumn(e){e.isVisible&&(e.isLeaf?this.rowManager.forEach((n=>n.renderCell(n.getCell(e.id)))):e.children.forEach((e=>this.refreshColumn(e))))}refreshVirtualScrollbars(){const e=this,{headerContainer:n,footerContainer:r,virtualScrollers:i,scrollable:o,hasVerticalOverflow:s}=e,{classList:a}=i,l=!a.contains("b-hide-display"),c=Object.values(e.subGrids).some((e=>e.overflowingHorizontally)),d=c!==l;if(d&&i.classList.toggle("b-hide-display",!c),Gn.scrollBarWidth){const a=s||"scroll"===o.overflowY;n.classList.toggle("b-show-yscroll-padding",a),r.classList.toggle("b-show-yscroll-padding",a),i.classList.toggle("b-show-yscroll-padding",a),d&&(c&&e.callEachSubGrid("refreshFakeScroll"),e.onHeightChange())}}get hasVerticalOverflow(){return this.scrollable.hasOverflow("y")}get contentHeight(){const e=this.rowManager;return Math.max(e.totalHeight,e.bottomRow?e.bottomRow.bottom:0)}onContentChange(){const e=this,n=e.rowManager;e.isVisible?(n.estimateTotalHeight(),e.paintListener=null,e.refreshTotalHeight(e.contentHeight),e.callEachSubGrid("refreshFakeScroll"),e.onHeightChange()):e.paintListener||(e.paintListener=e.ion({paint:"onContentChange",once:!0,thisObj:e}))}triggerPaint(){this.isPainted||this.refreshBodyRectangle(),super.triggerPaint()}onHeightChange(){const e=this;e.refreshBodyRectangle(),e._bodyHeight=e.autoHeight?e.contentHeight:e.bodyContainer.offsetHeight}suspendRefresh(){this.refreshSuspended++}resumeRefresh(e){this.refreshSuspended&&! --this.refreshSuspended&&(e&&this.refreshRows(),this.trigger("resumeRefresh",{trigger:e}))}renderRows(e=!0){const n=this,r=e&&n.storeScroll();n.refreshSuspended||(n.trigger("beforeRenderRows"),n.renderingRows=!0,n.element.classList.add("b-grid-refreshing"),e||(n.scrollable.y=n._scrollTop=0),n.rowManager.reinitialize(!e),n.trigger("renderRows"),n.renderingRows=!1,n.onContentChange(),e&&n.restoreScroll(r),n.element.classList.remove("b-grid-refreshing"))}renderContents(){const e=this,{element:n,headerContainer:r,footerContainer:i,rowManager:o}=e;if(e.emptyCache(),e.isPainted){e._headerHeight=null,e.callEachSubGrid("refreshHeader",r),e.callEachSubGrid("refreshFooter",i),e.renderHeader(r,n),e.renderFooter(i,n),e.fixSizes();const s=o.removeAllRows();o.calculateRowCount(!1,!0,!0),o.rowCount&&(o.setPosition(s),e.renderRows())}}onPaintOverride(){}onPaint({firstPaint:e}){var n;const r=this;if(r.ariaElement.setAttribute("aria-rowcount",r.store.count+1),null==(n=super.onPaint)||n.call(this,...arguments),r.onPaintOverride()||!e)return;const{rowManager:i,store:o,element:s,headerContainer:a,bodyContainer:l,footerContainer:c}=r,d=Gn.scrollBarPadElement;let u,h=0;r.role=(null==o?void 0:o.isTree)?"treegrid":"grid",r.columns.ion({change:()=>u=!0,once:!0}),r.updateResponsive(r.width,0),u&&(r.callEachSubGrid("refreshHeader",a),r.callEachSubGrid("refreshFooter",c)),r.renderHeader(a,s),r.renderFooter(c,s),Gn.append(a,d),Gn.append(c,d),Gn.append(r.virtualScrollers,d),r.refreshBodyRectangle();const g=r.bodyContainer.offsetHeight;if(r.autoHeight?(r._bodyHeight=i.initWithHeight(s.offsetHeight-a.offsetHeight-c.offsetHeight,!0),l.style.height=r.bodyHeight+"px"):(r._bodyHeight=g,i.initWithHeight(r._bodyHeight,!0)),r.eachSubGrid((e=>{e.header.maxDepth>h&&(h=e.header.maxDepth)})),a.dataset.maxDepth=h,r.fixSizes(),!o.count&&o.isLoading||r.renderRows(),r.columns.usesAutoHeight){const{fonts:e}=document;"loaded"!==(null==e?void 0:e.status)&&e.ready.then((()=>!r.isDestroyed&&r.refreshRows()))}r.initScroll(),r.initInternalEvents()}render(){const e=this;e.requireSize=Boolean(e.owner),super.render(...arguments),e.autoHeight||(e.headerContainer.offsetHeight&&!e.bodyContainer.offsetHeight&&console.warn("Grid element not sized correctly, please check your CSS styles and review how you size the widget"),"minHeight"in e.initialConfig||"height"in e.initialConfig||parseInt(globalThis.getComputedStyle(e.element).minHeight)!==e.height||console.warn(`The ${e.$$name} is sized by its predefined minHeight, likely this is not intended. Please check your CSS and review how you size the widget, or assign a fixed height in the config. For more information, see the "Basics/Sizing the component" guide in docs.`))}renderHeader(e,n){}renderFooter(e,n){}beforeRenderCell(){}beforeRenderRow(){}afterRenderRow(){}afterScroll(){}processCellEditor(e){}afterColumnsChange(){}afterRemove(e){}afterToggleGroup(){}afterToggleSubGrid(){}syncMaskCover(e=this.masked){if(e){const n="body"===e.cover&&this.rectangleOf("bodyContainer"),r=n&&this.rectangleOf("virtualScrollers"),{style:i}=e.element;i.marginTop=n?`${n.y}px`:"",i.height=n?`${n.height+((null==r?void 0:r.height)||0)}px`:""}}maskBody(e){let n;return this.bodyContainer&&(this.masked=ts.mergeConfigs(this.loadMaskDefaults,e),n=this.masked),n}unmaskBody(){this.masked=null}updateEmptyText(e){var n,r;null==(n=this.emptyTextEl)||n.remove(),this.emptyTextEl=Gn.createElement({parent:null==(r=this.firstItem)?void 0:r.element,className:"b-empty-text",[(null==e?void 0:e.includes("<"))?"html":"text"]:e})}toggleEmptyText(){const{bodyContainer:e,store:n}=this;null==e||e.classList.toggle("b-grid-empty",!(n.count>0||n.isLoading||n.isCommitting))}updateReadOnly(e,n){var r;if(super.updateReadOnly(e,n),!this.isConfiguring)for(const n of this.columns.bottomColumns)null==(r=n.updateReadOnly)||r.call(n,e)}getCurrentConfig(e){const n=super.getCurrentConfig(e),{store:r}=this,i=r.getInlineData(e),o=r.getCurrentConfig(e)||n.store;return i.length&&(n.data=i),o&&r.originalModelClass===iu&&delete o.modelClass,Et.isEmpty(o)||(n.store=o),n.store&&delete n.store.data,n}};_h.initClass(),A.setVersion("grid","5.3.7"),_h._$name="GridBase";var $h=class extends _h{static get $name(){return"Grid"}static get type(){return"grid"}};$h.initClass(),$h._$name="Grid";var jh=class extends $h{static get $name(){return"TreeGrid"}static get type(){return"treegrid"}static get configurable(){return{store:{tree:!0}}}updateStore(e,n){if(e&&!e.tree)throw new Error("TreeGrid requires a Store configured with tree : true");super.updateStore(e,n)}};jh.initClass(),jh._$name="TreeGrid";var zh=class extends Mc{configure(e){super.configure(e);const n=this;n.ion({change(){n.picker.selectedRecords=n.value}})}changePicker(e,n){const r=this;return super.changePicker(Et.assign({},e,{type:"treegrid",minWidth:"35em",readOnly:r.readOnly,disableGridRowModelWarning:!0,selectedRecords:r.value.map((e=>r.store.getById(e))),selectionMode:{row:!0,multiSelect:r.multiSelect,rowCheckboxSelection:!0},internalListeners:{selectionChange({selection:e}){r.value=e}}}),n)}};__publicField(zh,"$name","TreeCombo"),__publicField(zh,"type","treecombo"),__publicField(zh,"configurable",{multiSelect:!0,chipView:{itemTpl:e=>w.xss`${e.name}`,scrollable:{overflowX:"hidden-scroll"}}}),zh.initClass(),zh._$name="TreeCombo";var Bh,diffSecond=(e,n)=>new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()+n,e.getMilliseconds()),Hh=(Bh={version:"1.2.0"},Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null==this)throw new TypeError;var n=Object(this),r=n.length>>>0;if(0===r)return-1;var i=0;if(arguments.length>1&&((i=Number(arguments[1]))!=i?i=0:0!=i&&i!=1/0&&i!=-1/0&&(i=(i>0||-1)*Math.floor(Math.abs(i)))),i>=r)return-1;for(var o=i>=0?i:Math.max(r-Math.abs(i),0);o<r;o++)if(o in n&&n[o]===e)return o;return-1}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Bh.array={},Bh.array.sort=function(e,n){e.sort((function(e,n){return+e-+n})),n&&0===e[0]&&e.push(e.shift())},Bh.array.next=function(e,n,r){for(var i,o=0!==r[0],s=0,a=n.length-1;a>-1;--a){if((i=n[a])===e)return i;if(!(i>e||0===i&&o&&r[1]>e))break;s=a}return n[s]},Bh.array.nextInvalid=function(e,n,r){for(var i=r[0],o=r[1],s=n.length,a=0===n[s-1]&&0!==i?o:0,l=e,c=n.indexOf(e),d=l;l===(n[c]||a);)if(++l>o&&(l=i),++c===s&&(c=0),l===d)return;return l},Bh.array.prev=function(e,n,r){for(var i,o=n.length,s=0!==r[0],a=o-1,l=0;l<o;l++){if((i=n[l])===e)return i;if(!(i<e||0===i&&s&&r[1]<e))break;a=l}return n[a]},Bh.array.prevInvalid=function(e,n,r){for(var i=r[0],o=r[1],s=n.length,a=0===n[s-1]&&0!==i?o:0,l=e,c=n.indexOf(e),d=l;l===(n[c]||a);)if(--l<i&&(l=o),-1==--c&&(c=s-1),l===d)return;return l},Bh.day=Bh.D={name:"day",range:86400,val:function(e){return e.D||(e.D=Bh.date.getDate.call(e))},isValid:function(e,n){return Bh.D.val(e)===(n||Bh.D.extent(e)[1])},extent:function(e){if(e.DExtent)return e.DExtent;var n=Bh.M.val(e),r=Bh.DAYS_IN_MONTH[n-1];return 2===n&&366===Bh.dy.extent(e)[1]&&(r+=1),e.DExtent=[1,r]},start:function(e){return e.DStart||(e.DStart=Bh.date.next(Bh.Y.val(e),Bh.M.val(e),Bh.D.val(e)))},end:function(e){return e.DEnd||(e.DEnd=Bh.date.prev(Bh.Y.val(e),Bh.M.val(e),Bh.D.val(e)))},next:function(e,n){n=n>Bh.D.extent(e)[1]?1:n;var r=Bh.date.nextRollover(e,n,Bh.D,Bh.M),i=Bh.D.extent(r)[1];return n=n>i?1:n||i,Bh.date.next(Bh.Y.val(r),Bh.M.val(r),n)},prev:function(e,n){var r=Bh.date.prevRollover(e,n,Bh.D,Bh.M),i=Bh.D.extent(r)[1];return Bh.date.prev(Bh.Y.val(r),Bh.M.val(r),n>i?i:n||i)}},Bh.dayOfWeekCount=Bh.dc={name:"day of week count",range:604800,val:function(e){return e.dc||(e.dc=Math.floor((Bh.D.val(e)-1)/7)+1)},isValid:function(e,n){return Bh.dc.val(e)===n||0===n&&Bh.D.val(e)>Bh.D.extent(e)[1]-7},extent:function(e){return e.dcExtent||(e.dcExtent=[1,Math.ceil(Bh.D.extent(e)[1]/7)])},start:function(e){return e.dcStart||(e.dcStart=Bh.date.next(Bh.Y.val(e),Bh.M.val(e),Math.max(1,7*(Bh.dc.val(e)-1)+1||1)))},end:function(e){return e.dcEnd||(e.dcEnd=Bh.date.prev(Bh.Y.val(e),Bh.M.val(e),Math.min(7*Bh.dc.val(e),Bh.D.extent(e)[1])))},next:function(e,n){n=n>Bh.dc.extent(e)[1]?1:n;var r=Bh.date.nextRollover(e,n,Bh.dc,Bh.M);n=n>Bh.dc.extent(r)[1]?1:n;var i=Bh.date.next(Bh.Y.val(r),Bh.M.val(r),0===n?Bh.D.extent(r)[1]-6:1+7*(n-1));return i.getTime()<=e.getTime()?(r=Bh.M.next(e,Bh.M.val(e)+1),Bh.date.next(Bh.Y.val(r),Bh.M.val(r),0===n?Bh.D.extent(r)[1]-6:1+7*(n-1))):i},prev:function(e,n){var r=Bh.date.prevRollover(e,n,Bh.dc,Bh.M),i=Bh.dc.extent(r)[1];return n=n>i?i:n||i,Bh.dc.end(Bh.date.prev(Bh.Y.val(r),Bh.M.val(r),1+7*(n-1)))}},Bh.dayOfWeek=Bh.dw=Bh.d={name:"day of week",range:86400,val:function(e){return e.dw||(e.dw=Bh.date.getDay.call(e)+1)},isValid:function(e,n){return Bh.dw.val(e)===(n||7)},extent:function(){return[1,7]},start:function(e){return Bh.D.start(e)},end:function(e){return Bh.D.end(e)},next:function(e,n){return n=n>7?1:n||7,Bh.date.next(Bh.Y.val(e),Bh.M.val(e),Bh.D.val(e)+(n-Bh.dw.val(e))+(n<=Bh.dw.val(e)?7:0))},prev:function(e,n){return n=n>7?7:n||7,Bh.date.prev(Bh.Y.val(e),Bh.M.val(e),Bh.D.val(e)+(n-Bh.dw.val(e))+(n>=Bh.dw.val(e)?-7:0))}},Bh.dayOfYear=Bh.dy={name:"day of year",range:86400,val:function(e){return e.dy||(e.dy=Math.ceil(1+(Bh.D.start(e).getTime()-Bh.Y.start(e).getTime())/Bh.DAY))},isValid:function(e,n){return Bh.dy.val(e)===(n||Bh.dy.extent(e)[1])},extent:function(e){var n=Bh.Y.val(e);return e.dyExtent||(e.dyExtent=[1,n%4?365:366])},start:function(e){return Bh.D.start(e)},end:function(e){return Bh.D.end(e)},next:function(e,n){n=n>Bh.dy.extent(e)[1]?1:n;var r=Bh.date.nextRollover(e,n,Bh.dy,Bh.Y),i=Bh.dy.extent(r)[1];return n=n>i?1:n||i,Bh.date.next(Bh.Y.val(r),Bh.M.val(r),n)},prev:function(e,n){var r=Bh.date.prevRollover(e,n,Bh.dy,Bh.Y),i=Bh.dy.extent(r)[1];return n=n>i?i:n||i,Bh.date.prev(Bh.Y.val(r),Bh.M.val(r),n)}},Bh.hour=Bh.h={name:"hour",range:3600,val:function(e){return e.h||(e.h=Bh.date.getHour.call(e))},isValid:function(e,n){return Bh.h.val(e)===n},extent:function(){return[0,23]},start:function(e){return e.hStart||(e.hStart=Bh.date.next(Bh.Y.val(e),Bh.M.val(e),Bh.D.val(e),Bh.h.val(e)))},end:function(e){return e.hEnd||(e.hEnd=Bh.date.prev(Bh.Y.val(e),Bh.M.val(e),Bh.D.val(e),Bh.h.val(e)))},next:function(e,n){n=n>23?0:n;var r=Bh.date.next(Bh.Y.val(e),Bh.M.val(e),Bh.D.val(e)+(n<=Bh.h.val(e)?1:0),n);return!Bh.date.isUTC&&r.getTime()<=e.getTime()&&(r=Bh.date.next(Bh.Y.val(r),Bh.M.val(r),Bh.D.val(r),n+1)),r},prev:function(e,n){return n=n>23?23:n,Bh.date.prev(Bh.Y.val(e),Bh.M.val(e),Bh.D.val(e)+(n>=Bh.h.val(e)?-1:0),n)}},Bh.minute=Bh.m={name:"minute",range:60,val:function(e){return e.m||(e.m=Bh.date.getMin.call(e))},isValid:function(e,n){return Bh.m.val(e)===n},extent:function(e){return[0,59]},start:function(e){return e.mStart||(e.mStart=Bh.date.next(Bh.Y.val(e),Bh.M.val(e),Bh.D.val(e),Bh.h.val(e),Bh.m.val(e)))},end:function(e){return e.mEnd||(e.mEnd=Bh.date.prev(Bh.Y.val(e),Bh.M.val(e),Bh.D.val(e),Bh.h.val(e),Bh.m.val(e)))},next:function(e,n){var r=Bh.m.val(e),i=Bh.s.val(e),o=n>59?60-r:n<=r?60-r+n:n-r,s=new Date(e.getTime()+o*Bh.MIN-i*Bh.SEC);return!Bh.date.isUTC&&s.getTime()<=e.getTime()&&(s=new Date(e.getTime()+(o+120)*Bh.MIN-i*Bh.SEC)),s},prev:function(e,n){return n=n>59?59:n,Bh.date.prev(Bh.Y.val(e),Bh.M.val(e),Bh.D.val(e),Bh.h.val(e)+(n>=Bh.m.val(e)?-1:0),n)}},Bh.month=Bh.M={name:"month",range:2629740,val:function(e){return e.M||(e.M=Bh.date.getMonth.call(e)+1)},isValid:function(e,n){return Bh.M.val(e)===(n||12)},extent:function(){return[1,12]},start:function(e){return e.MStart||(e.MStart=Bh.date.next(Bh.Y.val(e),Bh.M.val(e)))},end:function(e){return e.MEnd||(e.MEnd=Bh.date.prev(Bh.Y.val(e),Bh.M.val(e)))},next:function(e,n){return n=n>12?1:n||12,Bh.date.next(Bh.Y.val(e)+(n>Bh.M.val(e)?0:1),n)},prev:function(e,n){return n=n>12?12:n||12,Bh.date.prev(Bh.Y.val(e)-(n>=Bh.M.val(e)?1:0),n)}},Bh.second=Bh.s={name:"second",range:1,val:function(e){return e.s||(e.s=Bh.date.getSec.call(e))},isValid:function(e,n){return Bh.s.val(e)===n},extent:function(){return[0,59]},start:function(e){return e},end:function(e){return e},next:function(e,n){var r=Bh.s.val(e),i=n>59?60-r:n<=r?60-r+n:n-r,o=new Date(e.getTime()+i*Bh.SEC);return!Bh.date.isUTC&&o.getTime()<=e.getTime()&&(o=new Date(e.getTime()+(i+7200)*Bh.SEC)),o},prev:function(e,n,r){return n=n>59?59:n,Bh.date.prev(Bh.Y.val(e),Bh.M.val(e),Bh.D.val(e),Bh.h.val(e),Bh.m.val(e)+(n>=Bh.s.val(e)?-1:0),n)}},Bh.time=Bh.t={name:"time",range:1,val:function(e){return e.t||(e.t=3600*Bh.h.val(e)+60*Bh.m.val(e)+Bh.s.val(e))},isValid:function(e,n){return Bh.t.val(e)===n},extent:function(){return[0,86399]},start:function(e){return e},end:function(e){return e},next:function(e,n){n=n>86399?0:n;var r=Bh.date.next(Bh.Y.val(e),Bh.M.val(e),Bh.D.val(e)+(n<=Bh.t.val(e)?1:0),0,0,n);return!Bh.date.isUTC&&r.getTime()<e.getTime()&&(r=Bh.date.next(Bh.Y.val(r),Bh.M.val(r),Bh.D.val(r),Bh.h.val(r),Bh.m.val(r),n+7200)),r},prev:function(e,n){return n=n>86399?86399:n,Bh.date.next(Bh.Y.val(e),Bh.M.val(e),Bh.D.val(e)+(n>=Bh.t.val(e)?-1:0),0,0,n)}},Bh.weekOfMonth=Bh.wm={name:"week of month",range:604800,val:function(e){return e.wm||(e.wm=(Bh.D.val(e)+(Bh.dw.val(Bh.M.start(e))-1)+(7-Bh.dw.val(e)))/7)},isValid:function(e,n){return Bh.wm.val(e)===(n||Bh.wm.extent(e)[1])},extent:function(e){return e.wmExtent||(e.wmExtent=[1,(Bh.D.extent(e)[1]+(Bh.dw.val(Bh.M.start(e))-1)+(7-Bh.dw.val(Bh.M.end(e))))/7])},start:function(e){return e.wmStart||(e.wmStart=Bh.date.next(Bh.Y.val(e),Bh.M.val(e),Math.max(Bh.D.val(e)-Bh.dw.val(e)+1,1)))},end:function(e){return e.wmEnd||(e.wmEnd=Bh.date.prev(Bh.Y.val(e),Bh.M.val(e),Math.min(Bh.D.val(e)+(7-Bh.dw.val(e)),Bh.D.extent(e)[1])))},next:function(e,n){n=n>Bh.wm.extent(e)[1]?1:n;var r=Bh.date.nextRollover(e,n,Bh.wm,Bh.M),i=Bh.wm.extent(r)[1];return n=n>i?1:n||i,Bh.date.next(Bh.Y.val(r),Bh.M.val(r),Math.max(1,7*(n-1)-(Bh.dw.val(r)-2)))},prev:function(e,n){var r=Bh.date.prevRollover(e,n,Bh.wm,Bh.M),i=Bh.wm.extent(r)[1];return n=n>i?i:n||i,Bh.wm.end(Bh.date.next(Bh.Y.val(r),Bh.M.val(r),Math.max(1,7*(n-1)-(Bh.dw.val(r)-2))))}},Bh.weekOfYear=Bh.wy={name:"week of year (ISO)",range:604800,val:function(e){if(e.wy)return e.wy;var n=Bh.dw.next(Bh.wy.start(e),5),r=Bh.dw.next(Bh.Y.prev(n,Bh.Y.val(n)-1),5);return e.wy=1+Math.ceil((n.getTime()-r.getTime())/Bh.WEEK)},isValid:function(e,n){return Bh.wy.val(e)===(n||Bh.wy.extent(e)[1])},extent:function(e){if(e.wyExtent)return e.wyExtent;var n=Bh.dw.next(Bh.wy.start(e),5),r=Bh.dw.val(Bh.Y.start(n)),i=Bh.dw.val(Bh.Y.end(n));return e.wyExtent=[1,5===r||5===i?53:52]},start:function(e){return e.wyStart||(e.wyStart=Bh.date.next(Bh.Y.val(e),Bh.M.val(e),Bh.D.val(e)-(Bh.dw.val(e)>1?Bh.dw.val(e)-2:6)))},end:function(e){return e.wyEnd||(e.wyEnd=Bh.date.prev(Bh.Y.val(e),Bh.M.val(e),Bh.D.val(e)+(Bh.dw.val(e)>1?8-Bh.dw.val(e):0)))},next:function(e,n){n=n>Bh.wy.extent(e)[1]?1:n;var r=Bh.dw.next(Bh.wy.start(e),5),i=Bh.date.nextRollover(r,n,Bh.wy,Bh.Y);1!==Bh.wy.val(i)&&(i=Bh.dw.next(i,2));var o=Bh.wy.extent(i)[1],s=Bh.wy.start(i);return n=n>o?1:n||o,Bh.date.next(Bh.Y.val(s),Bh.M.val(s),Bh.D.val(s)+7*(n-1))},prev:function(e,n){var r=Bh.dw.next(Bh.wy.start(e),5),i=Bh.date.prevRollover(r,n,Bh.wy,Bh.Y);1!==Bh.wy.val(i)&&(i=Bh.dw.next(i,2));var o=Bh.wy.extent(i)[1],s=Bh.wy.end(i);return n=n>o?o:n||o,Bh.wy.end(Bh.date.next(Bh.Y.val(s),Bh.M.val(s),Bh.D.val(s)+7*(n-1)))}},Bh.year=Bh.Y={name:"year",range:31556900,val:function(e){return e.Y||(e.Y=Bh.date.getYear.call(e))},isValid:function(e,n){return Bh.Y.val(e)===n},extent:function(){return[1970,2099]},start:function(e){return e.YStart||(e.YStart=Bh.date.next(Bh.Y.val(e)))},end:function(e){return e.YEnd||(e.YEnd=Bh.date.prev(Bh.Y.val(e)))},next:function(e,n){return n>Bh.Y.val(e)&&n<=Bh.Y.extent()[1]?Bh.date.next(n):Bh.NEVER},prev:function(e,n){return n<Bh.Y.val(e)&&n>=Bh.Y.extent()[0]?Bh.date.prev(n):Bh.NEVER}},Bh.fullDate=Bh.fd={name:"full date",range:1,val:function(e){return e.fd||(e.fd=e.getTime())},isValid:function(e,n){return Bh.fd.val(e)===n},extent:function(){return[0,3250368e7]},start:function(e){return e},end:function(e){return e},next:function(e,n){return Bh.fd.val(e)<n?new Date(n):Bh.NEVER},prev:function(e,n){return Bh.fd.val(e)>n?new Date(n):Bh.NEVER}},Bh.modifier={},Bh.modifier.after=Bh.modifier.a=function(e,n){var r=n[0];return{name:"after "+e.name,range:(e.extent(new Date)[1]-r)*e.range,val:e.val,isValid:function(e,n){return this.val(e)>=r},extent:e.extent,start:e.start,end:e.end,next:function(n,i){return i!=r&&(i=e.extent(n)[0]),e.next(n,i)},prev:function(n,i){return i=i===r?e.extent(n)[1]:r-1,e.prev(n,i)}}},Bh.modifier.before=Bh.modifier.b=function(e,n){var r=n[n.length-1];return{name:"before "+e.name,range:e.range*(r-1),val:e.val,isValid:function(e,n){return this.val(e)<r},extent:e.extent,start:e.start,end:e.end,next:function(n,i){return i=i===r?e.extent(n)[0]:r,e.next(n,i)},prev:function(n,i){return i=i===r?r-1:e.extent(n)[1],e.prev(n,i)}}},Bh.compile=function(e){var n,r=[],i=0;for(var o in e){var s=o.split("_"),a=s[0],l=s[1],c=e[o],d=l?Bh.modifier[l](Bh[a],c):Bh[a];r.push({constraint:d,vals:c}),i++}return r.sort((function(e,n){var r=e.constraint.range,i=n.constraint.range;return i<r?-1:i>r?1:0})),n=r[i-1].constraint,{start:function(e,o){for(var s,a=o,l=Bh.array[e],c=1e3;c--&&!s&&a;){s=!0;for(var d=0;d<i;d++){var u=r[d].constraint,h=u.val(a),g=u.extent(a),p=l(h,r[d].vals,g);if(!u.isValid(a,p)){a=u[e](a,p),s=!1;break}}}return a!==Bh.NEVER&&(a="next"===e?n.start(a):n.end(a)),a},end:function(e,n){for(var o,s=Bh.array[e+"Invalid"],a=function compareFn(e){return"next"===e?function(e,n){return e.getTime()>n.getTime()}:function(e,n){return n.getTime()>e.getTime()}}(e),l=i-1;l>=0;l--){var c,d=r[l].constraint,u=d.val(n),h=d.extent(n),g=s(u,r[l].vals,h);void 0!==g&&(!(c=d[e](n,g))||o&&!a(o,c)||(o=c))}return o},tick:function(e,r){return new Date("next"===e?n.end(r).getTime()+Bh.SEC:n.start(r).getTime()-Bh.SEC)},tickSafe:function(e,r){return"next"===e?diffSecond(n.end(r),1):diffSecond(n.start(r),-1)},tickStart:function(e){return n.start(e)}}},Bh.schedule=function(e){if(!e)throw new Error("Missing schedule definition.");if(!e.schedules)throw new Error("Definition must include at least one schedule.");for(var n=[],r=e.schedules.length,i=[],o=e.exceptions?e.exceptions.length:0,s=0;s<r;s++)n.push(Bh.compile(e.schedules[s]));for(var a=0;a<o;a++)i.push(Bh.compile(e.exceptions[a]));function getInstances(e,r,s,a,l){var c,d,u,h=compareFn(e),g=r,p=1e6,m=[],f=[],b=[],v="next"===e,y=v?0:1,w=v?1:0;if(!(s=s?new Date(s):new Date)||!s.getTime())throw new Error("Invalid start date.");for(function setNextStarts(e,n,r,i){for(var o=0,s=n.length;o<s;o++)r[o]=n[o].start(e,i)}(e,n,m,s),function setRangeStarts(e,n,r,i){compareFn(e);for(var o=0,s=n.length;o<s;o++){var a=n[o].start(e,i);r[o]=a?[a,n[o].end(e,a)]:Bh.NEVER}}(e,i,f,s);p--&&g&&(c=findNext(m,h))&&(!a||!h(c,a));)if(o&&(updateRangeStarts(e,i,f,c),d=calcRangeOverlap(e,f,c)))updateNextStarts(e,n,m,d);else{if(l){var C=calcMaxEndDate(f,h);d=calcEnd(e,n,m,c,C);var S=v?[new Date(Math.max(s,c)),d?new Date(a?Math.min(d,a):d):void 0]:[d?new Date(a?Math.max(a,d.getTime()+Bh.SEC):d.getTime()+Bh.SEC):void 0,new Date(Math.min(s,c.getTime()+Bh.SEC))];if(u&&S[y].getTime()===u[w].getTime()?(u[w]=S[w],g++):(u=S,b.push(u)),!d)break;updateNextStarts(e,n,m,d)}else b.push(v?new Date(Math.max(s,c)):getStart(n,m,c,a)),tickStarts(e,n,m,c);g--}for(var x=0,D=b.length;x<D;x++){var E=b[x];b[x]="[object Array]"===Object.prototype.toString.call(E)?[cleanDate(E[0]),cleanDate(E[1])]:cleanDate(E)}return 0===b.length?Bh.NEVER:1===r?b[0]:b}function cleanDate(e){if(e instanceof Date&&!isNaN(e.valueOf()))return new Date(e)}function updateNextStarts(e,n,r,i){for(var o=compareFn(e),s=0,a=n.length;s<a;s++)r[s]&&!o(r[s],i)&&(r[s]=n[s].start(e,i))}function updateRangeStarts(e,n,r,i){for(var o=compareFn(e),s=0,a=n.length;s<a;s++)if(r[s]&&!o(r[s][0],i)){var l=n[s].start(e,i);r[s]=l?[l,n[s].end(e,l)]:Bh.NEVER}}function tickStarts(e,n,r,i){for(var o=0,s=n.length;o<s;o++)if(r[o]&&r[o].getTime()===i.getTime()){const s=n[o].start(e,n[o].tick(e,i));s!==Bh.NEVER&&s.getTime()===r[o].getTime()?r[o]=n[o].start(e,n[o].tickSafe(e,i)):r[o]=s}}function getStart(e,n,r,i){for(var o,s=0,a=n.length;s<a;s++)if(n[s]&&n[s].getTime()===r.getTime()){var l=e[s].tickStart(r);if(i&&l<i)return i;(!o||l>o)&&(o=l)}return o}function calcRangeOverlap(e,n,r){for(var i,o=compareFn(e),s=0,a=n.length;s<a;s++){var l=n[s];!l||o(l[0],r)||l[1]&&!o(l[1],r)||i&&!o(l[1],i)||(i=l[1])}return i}function calcMaxEndDate(e,n){for(var r,i=0,o=e.length;i<o;i++)!e[i]||r&&!n(r,e[i][0])||(r=e[i][0]);return r}function calcEnd(e,n,r,i,o){for(var s,a=compareFn(e),l=0,c=n.length;l<c;l++){var d=r[l];if(d&&d.getTime()===i.getTime()){var u=n[l].end(e,d);if(o&&(!u||a(u,o)))return o;s&&!a(u,s)||(s=u)}}return s}function compareFn(e){return"next"===e?function(e,n){return!n||e.getTime()>n.getTime()}:function(e,n){return!e||n.getTime()>e.getTime()}}function findNext(e,n){for(var r=e[0],i=1,o=e.length;i<o;i++)e[i]&&n(r,e[i])&&(r=e[i]);return r}return{isValid:function(e){return getInstances("next",1,e,e)!==Bh.NEVER},next:function(e,n,r){return getInstances("next",e||1,n,r)},prev:function(e,n,r){return getInstances("prev",e||1,n,r)},nextRange:function(e,n,r){return getInstances("next",e||1,n,r,!0)},prevRange:function(e,n,r){return getInstances("prev",e||1,n,r,!0)}}},Bh.setTimeout=function(e,n){var r,i=Bh.schedule(n);return e&&function scheduleTimeout(){var n=Date.now(),o=i.next(2,n);if(o[0]){var s=o[0].getTime()-n;s<1e3&&(s=o[1]?o[1].getTime()-n:1e3),r=s<2147483647?setTimeout(e,s):setTimeout(scheduleTimeout,2147483647)}else r=void 0}(),{isDone:function(){return!r},clear:function(){clearTimeout(r)}}},Bh.setInterval=function(e,n){if(e){var r=Bh.setTimeout((function scheduleTimeout(){i||(e(),r=Bh.setTimeout(scheduleTimeout,n))}),n),i=r.isDone();return{isDone:function(){return r.isDone()},clear:function(){i=!0,r.clear()}}}},Bh.date={},Bh.date.timezone=function(e){Bh.date.build=e?function(e,n,r,i,o,s){return new Date(e,n,r,i,o,s)}:function(e,n,r,i,o,s){return new Date(Date.UTC(e,n,r,i,o,s))};var n=e?"get":"getUTC",r=Date.prototype;Bh.date.getYear=r[n+"FullYear"],Bh.date.getMonth=r[n+"Month"],Bh.date.getDate=r[n+"Date"],Bh.date.getDay=r[n+"Day"],Bh.date.getHour=r[n+"Hours"],Bh.date.getMin=r[n+"Minutes"],Bh.date.getSec=r[n+"Seconds"],Bh.date.isUTC=!e},Bh.date.UTC=function(){Bh.date.timezone(!1)},Bh.date.localTime=function(){Bh.date.timezone(!0)},Bh.date.UTC(),Bh.SEC=1e3,Bh.MIN=60*Bh.SEC,Bh.HOUR=60*Bh.MIN,Bh.DAY=24*Bh.HOUR,Bh.WEEK=7*Bh.DAY,Bh.DAYS_IN_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31],Bh.NEVER=0,Bh.date.next=function(e,n,r,i,o,s){return Bh.date.build(e,void 0!==n?n-1:0,void 0!==r?r:1,i||0,o||0,s||0)},Bh.date.nextRollover=function(e,n,r,i){var o=r.val(e),s=r.extent(e)[1];return(n||s)<=o||n>s?new Date(i.end(e).getTime()+Bh.SEC):i.start(e)},Bh.date.prev=function(e,n,r,i,o,s){var a=arguments.length;return n=a<2?11:n-1,r=a<3?Bh.D.extent(Bh.date.next(e,n+1))[1]:r,i=a<4?23:i,o=a<5?59:o,s=a<6?59:s,Bh.date.build(e,n,r,i,o,s)},Bh.date.prevRollover=function(e,n,r,i){return n>=r.val(e)||!n?i.start(i.prev(e,i.val(e)-1)):i.start(e)},Bh.parse={},Bh.parse.cron=function(e,n){var r={JAN:1,FEB:2,MAR:3,APR:4,MAY:5,JUN:6,JUL:7,AUG:8,SEP:9,OCT:10,NOV:11,DEC:12,SUN:1,MON:2,TUE:3,WED:4,THU:5,FRI:6,SAT:7},i={"* * * * * *":"0/1 * * * * *","@YEARLY":"0 0 1 1 *","@ANNUALLY":"0 0 1 1 *","@MONTHLY":"0 0 1 * *","@WEEKLY":"0 0 * * 0","@DAILY":"0 0 * * *","@HOURLY":"0 * * * *"},o={s:[0,0,59],m:[1,0,59],h:[2,0,23],D:[3,1,31],M:[4,1,12],Y:[6,1970,2099],d:[5,1,7,1]};function getValue(e,n,i){return isNaN(e)?r[e]||null:Math.min(+e+(n||0),i||9999)}function add(e,n,r,i,o){var s=r;for(e[n]||(e[n]=[]);s<=i;)e[n].indexOf(s)<0&&e[n].push(s),s+=o||1;e[n].sort((function(e,n){return e-n}))}function addHash(e,n,r,i){(n.d&&!n.dc||n.dc&&n.dc.indexOf(i)<0)&&(e.push(function cloneSchedule(e){var n,r={};for(n in e)"dc"!==n&&"d"!==n&&(r[n]=e[n].slice(0));return r}(n)),n=e[e.length-1]),add(n,"d",r,r),add(n,"dc",i,i)}function parse(e,n,i,o,s,a){var l,c,d=n.schedules,u=d[d.length-1];"L"===e&&(e=o-1),null!==(l=getValue(e,a,s))?add(u,i,l,l):null!==(l=getValue(e.replace("W",""),a,s))?function addWeekday(e,n,i){var o={},s={};1===i?(add(n,"D",1,3),add(n,"d",r.MON,r.FRI),add(o,"D",2,2),add(o,"d",r.TUE,r.FRI),add(s,"D",3,3),add(s,"d",r.TUE,r.FRI)):(add(n,"D",i-1,i+1),add(n,"d",r.MON,r.FRI),add(o,"D",i-1,i-1),add(o,"d",r.MON,r.THU),add(s,"D",i+1,i+1),add(s,"d",r.TUE,r.FRI)),e.exceptions.push(o),e.exceptions.push(s)}(n,u,l):null!==(l=getValue(e.replace("L",""),a,s))?addHash(d,u,l,o-1):2===(c=e.split("#")).length?addHash(d,u,l=getValue(c[0],a,s),getValue(c[1])):function addRange(e,n,r,i,o,s){var a=e.split("/"),l=+a[1],c=a[0];if("*"!==c&&"0"!==c){var d=c.split("-");i=getValue(d[0],s,o),o=getValue(d[1],s,o)||o}add(n,r,i,o,l)}(e,u,i,o,s,a)}function isHash(e){return e.indexOf("#")>-1||e.indexOf("L")>0}function itemSorter(e,n){return isHash(e)&&!isHash(n)?1:e-n}var s=function prepareExpr(e){var n=e.toUpperCase();return i[n]||n}(e);return function parseExpr(e){var n,r,i,s,a={schedules:[{}],exceptions:[]},l=e.replace(/(\s)+/g," ").split(" ");for(n in o)if((i=l[(r=o[n])[0]])&&"*"!==i&&"?"!==i){var c,d=(s=i.split(",").sort(itemSorter)).length;for(c=0;c<d;c++)parse(s[c],a,n,r[1],r[2],r[3])}return a}(n?s:"0 "+s)},Bh.parse.recur=function(){var e,n,r,i,o,s,a,l,c,d=[],u=[],h=d;function add(d,u,g){if(d=o?d+"_"+o:d,e||(h.push({}),e=h[0]),e[d]||(e[d]=[]),n=e[d],i){for(r=[],l=u;l<=g;l+=i)r.push(l);c={n:d,x:i,c:n.length,m:g}}var p=(r=s?[u]:a?[g]:r).length;for(l=0;l<p;l+=1){var m=r[l];n.indexOf(m)<0&&n.push(m)}r=i=o=s=a=0}return{schedules:d,exceptions:u,on:function(){return r=arguments[0]instanceof Array?arguments[0]:arguments,this},every:function(e){return i=e||1,this},after:function(e){return o="a",r=[e],this},before:function(e){return o="b",r=[e],this},first:function(){return s=1,this},last:function(){return a=1,this},time:function(){for(var e=0,n=r.length;e<n;e++){var i=r[e].split(":");i.length<3&&i.push(0),r[e]=3600*+i[0]+60*+i[1]+ +i[2]}return add("t"),this},second:function(){return add("s",0,59),this},minute:function(){return add("m",0,59),this},hour:function(){return add("h",0,23),this},dayOfMonth:function(){return add("D",1,a?0:31),this},dayOfWeek:function(){return add("d",1,7),this},onWeekend:function(){return r=[1,7],this.dayOfWeek()},onWeekday:function(){return r=[2,3,4,5,6],this.dayOfWeek()},dayOfWeekCount:function(){return add("dc",1,a?0:5),this},dayOfYear:function(){return add("dy",1,a?0:366),this},weekOfMonth:function(){return add("wm",1,a?0:5),this},weekOfYear:function(){return add("wy",1,a?0:53),this},month:function(){return add("M",1,12),this},year:function(){return add("Y",1970,2450),this},fullDate:function(){for(var e=0,n=r.length;e<n;e++)r[e]=r[e].getTime();return add("fd"),this},customModifier:function(e,n){if(!Bh.modifier[e])throw new Error("Custom modifier "+e+" not recognized!");return o=e,r=arguments[1]instanceof Array?arguments[1]:[arguments[1]],this},customPeriod:function(e){var n=Bh[e];if(!n)throw new Error("Custom time period "+e+" not recognized!");return add(e,n.extent(new Date)[0],n.extent(new Date)[1]),this},startingOn:function(e){return this.between(e,c.m)},between:function(n,r){return e[c.n]=e[c.n].splice(0,c.c),i=c.x,add(c.n,n,r),this},and:function(){return e=h[h.push({})-1],this},except:function(){return h=u,e=null,this}}},Bh.parse.text=function(e){var n,r=Bh.parse.recur,i=0,o="",s={eof:/^$/,fullDate:/^(\d\d\d\d-\d\d-\d\dt\d\d:\d\d:\d\d)\b/,rank:/^((\d\d\d\d)|([2-5]?1(st)?|[2-5]?2(nd)?|[2-5]?3(rd)?|(0|[1-5]?[4-9]|[1-5]0|1[1-3])(th)?))\b/,time:/^((([0]?[1-9]|1[0-2]):[0-5]\d(\s)?(am|pm))|(([0]?\d|1\d|2[0-3]):[0-5]\d))\b/,dayName:/^((sun|mon|tue(s)?|wed(nes)?|thu(r(s)?)?|fri|sat(ur)?)(day)?)\b/,monthName:/^(jan(uary)?|feb(ruary)?|ma((r(ch)?)?|y)|apr(il)?|ju(ly|ne)|aug(ust)?|oct(ober)?|(sept|nov|dec)(ember)?)\b/,yearIndex:/^(\d\d\d\d)\b/,every:/^every\b/,after:/^after\b/,before:/^before\b/,second:/^(s|sec(ond)?(s)?)\b/,minute:/^(m|min(ute)?(s)?)\b/,hour:/^(h|hour(s)?)\b/,day:/^(day(s)?( of the month)?)\b/,dayInstance:/^day instance\b/,dayOfWeek:/^day(s)? of the week\b/,dayOfYear:/^day(s)? of the year\b/,weekOfYear:/^week(s)?( of the year)?\b/,weekOfMonth:/^week(s)? of the month\b/,weekday:/^weekday\b/,weekend:/^weekend\b/,month:/^month(s)?\b/,year:/^year(s)?\b/,between:/^between (the)?\b/,start:/^(start(ing)? (at|on( the)?)?)\b/,at:/^(at|@)\b/,and:/^(,|and\b)/,except:/^(except\b)/,also:/(also)\b/,first:/^(first)\b/,last:/^last\b/,in:/^in\b/,of:/^of\b/,onthe:/^on the\b/,on:/^on\b/,through:/(-|^(to|through)\b)/},a={jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12,sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7,"1st":1,fir:1,"2nd":2,sec:2,"3rd":3,thi:3,"4th":4,for:4};function t(e,n,r,i){return{startPos:e,endPos:n,text:r,type:i}}function peek(e){var n,r,s,a,l,c,d=e instanceof Array?e:[e],u=/\s+/;for(d.push(u),l=i;!n||n.type===u;){c=-1,r=o.substring(l),n=t(l,l,o.split(u)[0]);var h,g=d.length;for(h=0;h<g;h++)(s=(a=d[h]).exec(r))&&0===s.index&&s[0].length>c&&(n=t(l,l+(c=s[0].length),r.substring(0,c),a));n.type===u&&(l=n.endPos)}return n}function scan(e){var n=peek(e);return i=n.endPos,n}function parseThroughExpr(e){for(var n=+parseTokenValue(e),r=checkAndParse(s.through)?+parseTokenValue(e):n,i=[],o=n;o<=r;o++)i.push(o);return i}function parseRanges(e){for(var n=parseThroughExpr(e);checkAndParse(s.and);)n=n.concat(parseThroughExpr(e));return n}function parseEvery(e){var n,r,i,o;checkAndParse(s.weekend)?e.on(a.sun,a.sat).dayOfWeek():checkAndParse(s.weekday)?e.on(a.mon,a.tue,a.wed,a.thu,a.fri).dayOfWeek():(n=parseTokenValue(s.rank),e.every(n),r=parseTimePeriod(e),checkAndParse(s.start)?(n=parseTokenValue(s.rank),e.startingOn(n),parseToken(r.type)):checkAndParse(s.between)&&(i=parseTokenValue(s.rank),checkAndParse(s.and)&&(o=parseTokenValue(s.rank),e.between(i,o))))}function parseOnThe(e){checkAndParse(s.first)?e.first():checkAndParse(s.last)?e.last():e.on(parseRanges(s.rank)),parseTimePeriod(e)}function parseTimePeriod(e){var r=parseToken([s.second,s.minute,s.hour,s.dayOfYear,s.dayOfWeek,s.dayInstance,s.day,s.month,s.year,s.weekOfMonth,s.weekOfYear]);switch(r.type){case s.second:e.second();break;case s.minute:e.minute();break;case s.hour:e.hour();break;case s.dayOfYear:e.dayOfYear();break;case s.dayOfWeek:e.dayOfWeek();break;case s.dayInstance:e.dayOfWeekCount();break;case s.day:e.dayOfMonth();break;case s.weekOfMonth:e.weekOfMonth();break;case s.weekOfYear:e.weekOfYear();break;case s.month:e.month();break;case s.year:e.year();break;default:n=i}return r}function checkAndParse(e){var n=peek(e).type===e;return n&&scan(e),n}function parseToken(e){var r=scan(e);return r.type?r.text=function convertString(e,n){var r=e;switch(n){case s.time:var i=e.split(/(:|am|pm)/),o="pm"===i[3]&&i[0]<12?parseInt(i[0],10)+12:i[0],l=i[2].trim();r=(1===o.length?"0":"")+o+":"+l;break;case s.rank:r=parseInt(/^\d+/.exec(e)[0],10);break;case s.monthName:case s.dayName:r=a[e.substring(0,3)];break;case s.fullDate:r=new Date(e.toUpperCase())}return r}(r.text,e):n=i,r}function parseTokenValue(e){return parseToken(e).text}return function parseScheduleExpr(e){i=0,o=e,n=-1;for(var a=r();i<o.length&&n<0;)switch(parseToken([s.every,s.after,s.before,s.onthe,s.on,s.of,s.in,s.at,s.and,s.except,s.also]).type){case s.every:parseEvery(a);break;case s.after:void 0!==peek(s.time).type?(a.after(parseTokenValue(s.time)),a.time()):void 0!==peek(s.fullDate).type?(a.after(parseTokenValue(s.fullDate)),a.fullDate()):(a.after(parseTokenValue(s.rank)),parseTimePeriod(a));break;case s.before:void 0!==peek(s.time).type?(a.before(parseTokenValue(s.time)),a.time()):void 0!==peek(s.fullDate).type?(a.before(parseTokenValue(s.fullDate)),a.fullDate()):(a.before(parseTokenValue(s.rank)),parseTimePeriod(a));break;case s.onthe:parseOnThe(a);break;case s.on:a.on(parseRanges(s.dayName)).dayOfWeek();break;case s.of:a.on(parseRanges(s.monthName)).month();break;case s.in:a.on(parseRanges(s.yearIndex)).year();break;case s.at:for(a.on(parseTokenValue(s.time)).time();checkAndParse(s.and);)a.on(parseTokenValue(s.time)).time();break;case s.and:break;case s.also:a.and();break;case s.except:a.except();break;default:n=i}return{schedules:a.schedules,exceptions:a.exceptions,error:n}}(e.toLowerCase())},Bh);Hh.date.localTime();var Vh=Hh;function split(e){const n=[],r=[];let i;return[function*(){for(i||(i=e[Symbol.iterator]());n.length&&(yield*n,n.length=0),i;){const{value:n,done:o}=i.next();if(o){i=null,e=null;break}r.push(n),yield n}}(),function*(){for(i||(i=e[Symbol.iterator]());r.length&&(yield*r,r.length=0),i;){const{value:r,done:o}=i.next();if(o){i=null,e=null;break}n.push(r),yield r}}()]}function*map(e,n){let r=0;for(const i of e)yield n(i,r++)}function*uniqueOnly(e){const n=new Set;for(const r of e)n.has(r)||(n.add(r),yield r)}function*concat(...e){for(let n=0;n<e.length;n++)yield*e[n]}function*concatIterable(e){for(const n of e)yield*n}var Nh=class{constructor(e){if(this.iterable=void 0,!e)throw new Error("Require an iterable instance for chaining");this.iterable=e}derive(e){return this.iterable=void 0,new Nh(e)}copy(){const[e,n]=split(this.iterable);return this.iterable=n,new Nh(e)}split(){const[e,n]=split(this.iterable);return[new Nh(e),this.derive(n)]}inBatchesBySize(e){return this.derive(function*inBatchesBySize(e,n){if(n<0)throw new Error("Batch size needs to a natural number");n|=0;const r=[];for(const i of e)r.length===n&&(yield r,r.length=0),r.push(i);r.length>0&&(yield r)}(this.iterable,e))}filter(e){return this.derive(function*filter(e,n){let r=0;for(const i of e)n(i,r++)&&(yield i)}(this.iterable,e))}drop(e){return this.derive(function*drop(e,n){let r=0;for(const i of e)++r>n&&(yield i)}(this.iterable,e))}map(e){return this.derive(map(this.iterable,e))}reduce(e,n){return function reduce(e,n,r){let i=0,o=r;for(const r of e)o=n(o,r,i++);return o}(this,e,n)}concat(){return this.derive(concatIterable(this.iterable))}uniqueOnly(){return this.derive(uniqueOnly(this.iterable))}uniqueOnlyBy(e){return this.derive(function*uniqueOnlyBy(e,n){const r=new Set;for(const i of e){const e=n(i);r.has(e)||(r.add(e),yield i)}}(this.iterable,e))}every(e){return function every(e,n){let r=0;for(const i of e)if(!n(i,r++))return!1;return!0}(this,e)}some(e){return function some(e,n){let r=0;for(const i of e)if(n(i,r++))return!0;return!1}(this,e)}takeWhile(e){return this.derive(function*takeWhile(e,n){let r=0;for(const i of e){if(!n(i,r++))return;yield i}}(this.iterable,e))}*[Symbol.iterator](){let e=this.iterable;if(!e)throw new Error("Chained iterator already exhausted or used to derive the new one");this.iterable=void 0,yield*e,e=void 0}toArray(){return Array.from(this)}sort(e){return Array.from(this).sort(e)}toSet(){return new Set(this)}toMap(){return new Map(this)}flush(){for(const e of this);}memoize(){return new qh(this)}},CI=e=>new Nh(e),qh=class extends Nh{constructor(){super(...arguments),this.elements=[],this.$iterator=void 0}set iterable(e){this.$iterable=e}get iterable(){return this}derive(e){return new Nh(e)}*[Symbol.iterator](){const e=this.elements;if(this.$iterable){this.$iterator||(this.$iterator=this.$iterable[Symbol.iterator]());let n=this.$iterator,r=e.length;for(r>0&&(yield*e);;){if(e.length>r){for(let n=r;n<e.length;n++)yield e[n];r=e.length}if(!n)break;const{value:i,done:o}=n.next();o?(n=this.$iterator=null,this.$iterable=null):(e.push(i),r++,yield i)}}else yield*e}},MI=e=>new qh(e),Wh=Symbol("MixinIdentity"),Uh=Symbol("MixinStateProperty"),Gh=class{constructor(){this.baseEl=void 0,this.sourceEl=void 0,this.$elementsByTopoLevel=void 0,this.$topoLevels=void 0,this.linearizedByTopoLevelsSource=MI(this.linearizedByTopoLevels())}static new(e){const n=new this;return e&&Object.assign(n,e),n}get topoLevels(){return void 0!==this.$topoLevels?this.$topoLevels:this.$topoLevels=this.buildTopoLevels()}buildTopoLevels(){return Array.from(this.elementsByTopoLevel.keys()).sort(((e,n)=>e-n))}get elementsByTopoLevel(){return void 0!==this.$elementsByTopoLevel?this.$elementsByTopoLevel:this.$elementsByTopoLevel=this.buildElementsByTopoLevel()}getOrCreateLevel(e,n){let r=e.get(n);return r||(r=[],e.set(n,r)),r}buildElementsByTopoLevel(){let e=0;const n=this.baseEl?CI(this.baseEl.walkDepthState.elementsByTopoLevel.values()).concat().toSet():new Set,r=CI(this.sourceEl.requirements).map((e=>e.walkDepthState.elementsByTopoLevel)).concat().reduce(((n,[r,i])=>(r>e&&(e=r),this.getOrCreateLevel(n,r).push(i),n)),new Map);return this.getOrCreateLevel(r,e+1).push([this.sourceEl]),CI(r).map((([e,r])=>[e,CI(r).concat().uniqueOnly().filter((e=>!n.has(e))).sort(((e,n)=>e.id-n.id))])).toMap()}*linearizedByTopoLevels(){yield*CI(this.topoLevels).map((e=>this.elementsByTopoLevel.get(e))).concat()}},Yh=1,identity=e=>class extends e{},Kh=class{},Xh=class{constructor(){this.id=Yh++,this.requirements=[],this.baseClass=Kh,this.identitySymbol=void 0,this.mixinLambda=identity,this.walkDepthState=void 0,this.$minimalClass=void 0,this.name=""}static new(e){const n=new this;e&&Object.assign(n,e),n.walkDepthState=Gh.new({sourceEl:n,baseEl:getMixinState(n.baseClass)});const r=n.mixinLambda,i=n.identitySymbol=Symbol(r.name),o=Object.assign((function(e){const n=r(e);return n.prototype[i]=!0,n}),{[Wh]:i,[Uh]:n});return Object.defineProperty(o,Symbol.hasInstance,{value:isInstanceOfStatic}),n.mixinLambda=o,n}get minimalClass(){return void 0!==this.$minimalClass?this.$minimalClass:this.$minimalClass=this.buildMinimalClass()}getBaseClassMixinId(e){const n=this.constructor,r=n.baseClassesIds.get(e);if(void 0!==r)return r;const i=Yh++;return n.baseClassesIds.set(e,i),i}buildMinimalClass(){const e=this.constructor;let n=this.baseClass;const r=this.walkDepthState.linearizedByTopoLevelsSource.reduce(((n,r)=>{const{cls:i,hash:o}=n,s=o+String.fromCharCode(r.id);let a=e.minimalClassesByLinearHash.get(s);return a||(a=r.mixinLambda(i),r.name=a.name,e.minimalClassesByLinearHash.set(s,a)),n.cls=a,n.hash=s,n}),{cls:n,hash:String.fromCharCode(this.getBaseClassMixinId(n))}).cls,i=Object.assign(r,{[Wh]:this.identitySymbol,[Uh]:this,mix:this.mixinLambda,derive:e=>mg([i,e],(e=>class extends e{})),$:this,toString:this.toString.bind(this)});return Object.defineProperty(i,Symbol.hasInstance,{value:isInstanceOfStatic}),i}toString(){return this.walkDepthState.linearizedByTopoLevelsSource.reduce(((e,n)=>`${n.name}(${e})`),this.baseClass.name)}};Xh.minimalClassesByLinearHash=new Map,Xh.baseClassesIds=new Map;var Zh,Qh,Jh,eg,tg,ng,rg,ig,og,sg,ag,lg,cg,dg,ug,hg,gg,pg,getMixinState=e=>Object.getPrototypeOf(e.prototype).constructor[Uh],mixin=(e,n)=>{let r;if(e.length>0){const n=e[e.length-1];i=n,Object.getPrototypeOf(i.prototype).constructor.hasOwnProperty(Uh)||n===Kh||(r=n)}var i;const o=[];e.forEach(((n,i)=>{const s=n[Uh];if(void 0!==s){const e=s.baseClass;if(e!==Kh)if(r){if(r!==e){const n=e.prototype.isPrototypeOf(r.prototype),i=r.prototype.isPrototypeOf(e.prototype);if(!n&&!i)throw new Error("Base class mismatch");r=i?e:r}}else r=e;o.push(s)}else if(i!==e.length-1)throw new Error("Base class should be provided as the last element of the requirements array")}));return Xh.new({requirements:o,mixinLambda:n,baseClass:r||Kh}).minimalClass},isInstanceOfStatic=function(e){return Boolean(e&&e[this[Wh]])},isInstanceOf=(e,n)=>Boolean(e&&e[n[Wh]]),mg=mixin,fg=mixin,bg=class{initialize(e){e&&Object.assign(this,e)}static new(e){const n=new this;return n.initialize(e),n}};(Qh=Zh||(Zh={})).Millisecond="millisecond",Qh.Second="second",Qh.Minute="minute",Qh.Hour="hour",Qh.Day="day",Qh.Week="week",Qh.Month="month",Qh.Quarter="quarter",Qh.Year="year",(eg=Jh||(Jh={})).MustStartOn="muststarton",eg.MustFinishOn="mustfinishon",eg.StartNoEarlierThan="startnoearlierthan",eg.StartNoLaterThan="startnolaterthan",eg.FinishNoEarlierThan="finishnoearlierthan",eg.FinishNoLaterThan="finishnolaterthan",(ng=tg||(tg={})).Normal="Normal",ng.FixedDuration="FixedDuration",ng.FixedEffort="FixedEffort",ng.FixedUnits="FixedUnits",(ig=rg||(rg={}))[ig.NoError=0]="NoError",ig[ig.CyclicDependency=1]="CyclicDependency",ig[ig.DuplicatingDependency=2]="DuplicatingDependency",(sg=og||(og={}))[sg.StartToStart=0]="StartToStart",sg[sg.StartToEnd=1]="StartToEnd",sg[sg.EndToStart=2]="EndToStart",sg[sg.EndToEnd=3]="EndToEnd",(lg=ag||(ag={})).Project="Project",lg.FromEvent="FromEvent",lg.ToEvent="ToEvent",(dg=cg||(cg={}))[dg.SchedulerBasic=1]="SchedulerBasic",dg[dg.SchedulerPro=2]="SchedulerPro",dg[dg.Gantt=3]="Gantt",(hg=ug||(ug={})).Forward="Forward",hg.Backward="Backward",hg.None="None",(pg=gg||(gg={})).Start="Start",pg.End="End";var vg,yg,wg,Cg,Sg=new Date(-864e13),xg=new Date(864e13),isDateFinite=e=>{if(!e)return!1;const n=e.getTime();return n!==Sg.getTime()&&n!==xg.getTime()};(yg=vg||(vg={}))[yg.Left=0]="Left",yg[yg.Right=1]="Right",(Cg=wg||(wg={}))[Cg.FullRangeIterated=0]="FullRangeIterated",Cg[Cg.StoppedByIterator=1]="StoppedByIterator",Cg[Cg.MaxCacheExtendCyclesReached=2]="MaxCacheExtendCyclesReached",Cg[Cg.MaxRangeReached=3]="MaxRangeReached";var Dg,Eg,Rg=class{constructor(e){this.cacheFilledStartDate=xg,this.cacheFilledEndDate=Sg,this.intervalsCachingChunkDuration=30,this.intervalsCachingChunkUnit=Zh.Day,this.maxCacheExtendCycles=1e3,this.maxRange=15768e7,e&&Object.assign(this,e)}includeWrappingRangeFrom(e,n,r){e.ensureCacheFilledForInterval(n,r),this.intervalCache.includeWrappingRange(e.intervalCache,n,r)}ensureCacheFilledForInterval(e,n){const r=this.cacheFilledStartDate.getTime(),i=this.cacheFilledEndDate.getTime();if(r!==xg.getTime()){const o=e.getTime(),s=n.getTime();if(r<=o&&s<=i)return;if(s<=r)n=new Date(r-1);else if(o>=i)e=new Date(i);else if(r<=o&&o<=i)e=new Date(i+1);else{if(!(r<=s&&s<=i))return this.ensureCacheFilledForInterval(e,new Date(r-1)),void this.ensureCacheFilledForInterval(new Date(i+1),n);n=new Date(r-1)}}(r===xg.getTime()||e.getTime()<i)&&(this.cacheFilledStartDate=e),(i===Sg.getTime()||i<n.getTime())&&(this.cacheFilledEndDate=n),this.fillCache(e,n)}fillCache(e,n){throw new Error("Abstract method")}clear(){this.cacheFilledStartDate=xg,this.cacheFilledEndDate=Sg,this.intervalCache.clear()}forEachAvailabilityInterval(e,n,r){var i;r=r||this;const o=e.startDate,s=e.endDate,a=o&&o.getTime(),l=s&&s.getTime(),c=null!=(i=e.maxRange)?i:this.maxRange,d=!1!==e.isForward;if(d?!o:!s)throw new Error("At least `startDate` or `endDate` is required, depending from the `isForward` option");const u=this.intervalCache;let h=d?o:s,g=d?o:s;const p=g.getTime();for(let e=1;e<this.maxCacheExtendCycles;e++){d?this.ensureCacheFilledForInterval(h,s||Ct.add(h,this.intervalsCachingChunkDuration,this.intervalsCachingChunkUnit)):this.ensureCacheFilledForInterval(o||Ct.add(h,-this.intervalsCachingChunkDuration,this.intervalsCachingChunkUnit),h);let e=u.getIntervalOf(g,d?vg.Left:vg.Right);for(;e;){const i=e.startDate,h=e.endDate;if(d&&l&&i.getTime()>=l||!d&&a&&h.getTime()<=a)return wg.FullRangeIterated;if(d&&i.getTime()-p>=c||!d&&p-h.getTime()>=c)return wg.MaxRangeReached;if(d&&i.getTime()>=this.cacheFilledEndDate.getTime()||!d&&h.getTime()<=this.cacheFilledStartDate.getTime())break;g=d?h:i;const m=a&&i.getTime()<a?o:i,f=l&&h.getTime()>l?s:h;if(!1===n.call(r,m,f,e.cacheInterval))return wg.StoppedByIterator;e=d?u.getNextInterval(e):u.getPrevInterval(e)}if(d&&g.getTime()===xg.getTime()||!d&&g.getTime()===Sg.getTime())return wg.FullRangeIterated;h=d?this.cacheFilledEndDate:this.cacheFilledStartDate}return wg.MaxCacheExtendCyclesReached}},stripDuplicates=e=>Array.from(new Set(e)),kg=class{constructor(e){if(this.intervals=[],e&&Object.assign(this,e),!this.calendar)throw new Error("Required attribute `calendar` is missing")}includeInterval(e){if(-1==this.intervals.indexOf(e)){const n=this.intervals.slice();return n.push(e),new kg({intervals:n,calendar:this.calendar})}return this}combineWith(e){return new kg({intervals:this.intervals.concat(e.intervals),calendar:this.calendar})}getIsWorking(){if(null!=this.isWorking)return this.isWorking;const e=this.intervals=this.normalizeIntervals(this.intervals);return this.isWorking=e[0].isWorking}normalizeIntervals(e){const n=stripDuplicates(e);return n.sort(((e,n)=>n.getPriorityField()-e.getPriorityField())),n}},Tg=class{constructor(e){this.intervalGroups=[],e&&Object.assign(this,e)}combineWith(e){const n=this.intervalGroups.slice();return n.push([e.calendar,e]),new Tg({intervalGroups:n})}getIsWorkingForEvery(){if(null!=this.isWorkingForEvery)return this.isWorkingForEvery;for(let[e,n]of this.getGroups())if(!n[0].isWorking)return this.isWorkingForEvery=!1;return this.isWorkingForEvery=!0}getIsWorkingForSome(){if(null!=this.isWorkingForSome)return this.isWorkingForSome;for(let[e,n]of this.getGroups())if(n[0].isWorking)return this.isWorkingForSome=!0;return this.isWorkingForSome=!1}getCalendars(){return this.getGroups(),this.calendars}isCalendarWorking(e){return this.getCalendarsWorkStatus().get(e)}getCalendarsWorkStatus(){if(this.calendarsWorkStatus)return this.calendarsWorkStatus;const e=new Map;for(let[n,r]of this.getGroups())e.set(n,r[0].isWorking);return this.calendarsWorkStatus=e}getCalendarsWorking(){if(this.calendarsWorking)return this.calendarsWorking;const e=[];for(let[n,r]of this.getGroups())r[0].isWorking&&e.push(n);return this.calendarsWorking=e}getCalendarsNonWorking(){if(this.calendarsNonWorking)return this.calendarsNonWorking;const e=[];for(let[n,r]of this.getGroups())r[0].isWorking||e.push(n);return this.calendarsNonWorking=e}getGroups(){if(this.intervalsByCalendar)return this.intervalsByCalendar;const e=this.calendars=[],n=new Map;return this.intervalGroups.forEach((([r,i])=>{let o=n.get(r);o||(e.push(r),o=[],n.set(r,o)),o.push.apply(o,i.intervals)})),n.forEach(((e,r)=>{const i=stripDuplicates(e);i.sort(((e,n)=>n.getPriorityField()-e.getPriorityField())),n.set(r,i)})),this.intervalsByCalendar=n}},binarySearch=(e,n,r=((e,n)=>e-n))=>{let i=0,o=n.length;for(;i<o;){const s=(i+o)/2|0,a=r(e,n[s]);if(0===a)return{found:!0,index:s};a<0?o=s:i=s+1}return{found:!1,index:o}};(Eg=Dg||(Dg={}))[Eg.Exact=0]="Exact",Eg[Eg.Next=1]="Next";var Mg=class{constructor(e){this.keys=[],this.values=[],this.comparator=e||((e,n)=>e-n)}set(e,n){const r=binarySearch(e,this.keys,this.comparator);return r.found?this.values[r.index]=n:(this.keys.splice(r.index,0,e),this.values.splice(r.index,0,n)),r.index}insertAt(e,n,r){this.keys.splice(e,0,n),this.values.splice(e,0,r)}setValueAt(e,n){this.values[e]=n}get(e){const n=binarySearch(e,this.keys,this.comparator);return n.found?this.values[n.index]:void 0}getEntryAt(e){return e<this.keys.length?{key:this.keys[e],value:this.values[e]}:void 0}getKeyAt(e){return this.keys[e]}getValueAt(e){return this.values[e]}delete(e){const n=binarySearch(e,this.keys,this.comparator);n.found&&this.deleteAt(n.index)}size(){return this.keys.length}deleteAt(e){this.keys.splice(e,1),this.values.splice(e,1)}indexOfKey(e){const n=binarySearch(e,this.keys,this.comparator);return{found:n.found?Dg.Exact:Dg.Next,index:n.index}}map(e){const n=this.keys,r=this.values,i=[];for(let o=0;o<n.length;o++)i.push(e(r[o],n[o],o));return i}getAllEntries(){return this.map(((e,n)=>({value:e,key:n})))}clear(){this.keys.length=0,this.values.length=0}},Ag=class{constructor(e){if(this.points=new Mg(((e,n)=>e.getTime()-n.getTime())),this.leftInfinityKey=Sg,this.rightInfinityKey=xg,Object.assign(this,e),void 0===this.emptyInterval||!this.combineIntervalsFn)throw new Error("All of `emptyPoint`, `combineIntervalsFn` are required");this.points.set(this.leftInfinityKey,this.emptyInterval)}size(){return this.points.size()}indexOf(e){return this.points.indexOfKey(e)}getDateAt(e){return this.points.getKeyAt(e)}getPointAt(e){return this.points.getValueAt(e)}getIntervalOf(e,n=vg.Left){let r,{found:i,index:o}=this.indexOf(e);return r=n===vg.Left&&i===Dg.Exact?o:o-1,this.getIntervalWithStartDateIndex(r)}getPrevInterval(e){return 0===e.startDateIndex?null:this.getIntervalWithStartDateIndex(e.startDateIndex-1)}getNextInterval(e){return e.startDateIndex>=this.size()-1?null:this.getIntervalWithStartDateIndex(e.startDateIndex+1)}getIntervalWithStartDateIndex(e){return{startDateIndex:e,startDate:this.getDateAt(e),endDate:e+1<this.size()?this.getDateAt(e+1):this.rightInfinityKey,cacheInterval:this.getPointAt(e)}}addInterval(e,n,r){const i=this.points,{found:o,index:s}=i.indexOfKey(e);let a,l;if(o==Dg.Exact){const e=r(l=i.getValueAt(s));i.setValueAt(s,e),a=s+1}else{const n=r(l=i.getValueAt(s-1));i.insertAt(s,e,n),a=s+1}for(;a<i.size();){if(i.getKeyAt(a).getTime()>=n.getTime())break;const e=r(l=i.getValueAt(a));i.setValueAt(a,e),a++}if(a===i.size())i.insertAt(i.size(),n,this.emptyInterval);else{i.getKeyAt(a).getTime()===n.getTime()||i.insertAt(a,n,l)}}includeWrappingRange(e,n,r){let i=e.getIntervalOf(n);for(;i&&(this.addInterval(i.startDate,i.endDate,(e=>this.combineIntervalsFn(e,i.cacheInterval))),!(i.endDate.getTime()>r.getTime()));)i=e.getNextInterval(i)}getSummary(){return this.points.map(((e,n)=>({label:e,date:n})))}clear(){this.points.clear(),this.points.set(this.leftInfinityKey,this.emptyInterval)}},Ig=class extends Rg{constructor(e){super(e),this.calendarCaches=stripDuplicates(this.calendarCaches),this.intervalCache=new Ag({emptyInterval:new Tg,combineIntervalsFn:(e,n)=>e.combineWith(n)})}fillCache(e,n){this.calendarCaches.forEach((r=>{r.fillCache(e,n),this.includeWrappingRangeFrom(r,e,n)}))}},Fg=new Map,combineCalendars=e=>{const n=stripDuplicates(e);if(0===n.length)throw new Error("No calendars to combine");n.sort(((e,n)=>e.internalId<n.internalId?-1:1));const r=n.map((e=>e.internalId+"/")).join(""),i=n.map((e=>e.version+"/")).join("");let o,s=Fg.get(r);return o=s&&s.versionsHash===i?s.cache:new Ig({calendarCaches:n.map((e=>e.calendarCache))}),o},Pg=class extends Rg{constructor(e){if(super(e),this.staticIntervalsCached=!1,!this.unspecifiedTimeInterval)throw new Error("Required attribute `unspecifiedTimeInterval` is missing");this.intervalCache=new Ag({emptyInterval:new kg({intervals:[this.unspecifiedTimeInterval],calendar:this.calendar}),combineIntervalsFn:(e,n)=>e.combineWith(n)})}fillCache(e,n){var r;this.staticIntervalsCached||(this.cacheStaticIntervals(),this.staticIntervalsCached=!0),this.parentCache&&this.includeWrappingRangeFrom(this.parentCache,e,n);const i=e.getTime(),o=n.getTime(),s=null==(r=this.calendar.project)?void 0:r.timeZone;if(i>o)throw new Error("Invalid cache fill interval");this.forEachRecurrentInterval((r=>{const a=r.getStartDateSchedule(),l=r.getEndDateSchedule();let c,d=a.prev(1,e);if("EOD"===l){const e=a.next(1,n);c=e!==Vh.NEVER?Ct.getStartOfNextDay(e,!0):Vh.NEVER}else c=l.next(1,n);if(d!==Vh.NEVER&&d.getTime()===i){const n=a.prev(2,e);n!==Vh.NEVER&&2===n.length&&(d=n[1])}if(c!==Vh.NEVER&&c.getTime()===o){const e=l.next(2,n);e!==Vh.NEVER&&2===e.length&&(c=e[1])}const u=a.next(1/0,d!==Vh.NEVER?d:e,c!==Vh.NEVER?new Date(c.getTime()-1):n);if(u===Vh.NEVER)return;const h="EOD"===l?u.map((e=>Ct.getStartOfNextDay(e,!0))):l.next(1/0,new Date(u[0].getTime()+1),c!==Vh.NEVER?c:n);h!==Vh.NEVER&&(h.length>u.length?h.length=u.length:h.length<u.length&&(u.length=h.length),u.forEach(((e,n)=>{let i=e,o=h[n];null!=s&&(i=ll.toTimeZone(i,s),o=ll.toTimeZone(o,s)),this.intervalCache.addInterval(i,o,(e=>e.includeInterval(r)))})))}))}clear(){this.staticIntervalsCached=!1,super.clear()}cacheStaticIntervals(){this.forEachStaticInterval((e=>{var n;const r=null==(n=this.calendar.project)?void 0:n.timeZone;let{startDate:i,endDate:o}=e;null!=r&&(i=ll.toTimeZone(i,r),o=ll.toTimeZone(o,r)),this.intervalCache.addInterval(i,o,(n=>n.includeInterval(e)))}))}forEachStaticInterval(e){this.intervalStore.forEach((n=>{n.isStatic()&&e(n)}))}forEachRecurrentInterval(e){this.intervalStore.forEach((n=>{n.isRecurrent()&&e(n)}))}},Og=class extends(mg([],(e=>{e.prototype;return class AbstractPartOfProjectGenericMixin2 extends e{async commitAsync(){return this.project.commitAsync()}set project(e){this.$project=e}get project(){return this.$project}calculateProject(){throw new Error("Implement me")}setProject(e){return this.project=e}getProject(){return this.project?this.project:this.setProject(this.calculateProject())}getAssignmentStore(){const e=this.getProject();return null==e?void 0:e.assignmentStore}getDependencyStore(){const e=this.getProject();return null==e?void 0:e.dependencyStore}getEventStore(){const e=this.getProject();return null==e?void 0:e.eventStore}getResourceStore(){const e=this.getProject();return null==e?void 0:e.resourceStore}getCalendarManagerStore(){const e=this.getProject();return null==e?void 0:e.calendarManagerStore}}}))){},Lg=class extends(mg([Og,yi],(e=>{const n=e.prototype;return class AbstractPartOfProjectStoreMixin2 extends e{constructor(){super(...arguments),this.isLoadingData=!1,this.disableHasLoadedDataToCommitFlag=!1}construct(e={}){return e.asyncEvents={add:!0,remove:!0,removeAll:!0,change:!0,refresh:!0,replace:!0,move:!0,update:!0},n.construct.call(this,e)}trigger(e,r){const i=this,{asyncEvents:o,project:s}=i,a=null==o?void 0:o[e];return a&&(!0===a||a[r.action])?(n.trigger.call(i,`${e}PreCommit`,{...r}),!s||s.isEngineReady()&&!s.isWritingData?n.trigger.call(i,e,r):!i.eventsSuspended&&s&&(s.dataReadyDetacher||(s.queuedDataReadyEvents=[],s.dataReadyDetacher=s.ion({dataReady(){this.queuedDataReadyEvents.forEach((([e,n,r,i])=>{e.trigger.call(n,r,i)})),s.queuedDataReadyEvents=null,s.dataReadyDetacher(),s.dataReadyDetacher=null},once:!0})),s.queuedDataReadyEvents.push([n,i,e,r])),!0):n.trigger.call(i,e,r)}calculateProject(){return this.project}setStoreData(e){var r;!this.project||this.syncDataOnLoad||this.disableHasLoadedDataToCommitFlag||(this.project.hasLoadedDataToCommit=!0),this.isLoadingData=!0,n.setStoreData.call(this,e),this.isLoadingData=!1,null==(r=this.project)||r.trigger("storeRefresh",{store:this})}async doAutoCommit(){this.suspendCount<=0&&this.project&&!this.project.isEngineReady()&&await this.project.commitAsync(),n.doAutoCommit.call(this)}async addAsync(e,n){const r=this.add(e,n);return await this.project.commitAsync(),r}async insertAsync(e,n,r){const i=this.insert(e,n,r);return await this.project.commitAsync(),i}async loadDataAsync(e){this.data=e,await this.project.commitAsync()}performFilter(){var e;return this.project&&(this.isLoadingData||(null==(e=this.rootNode)?void 0:e.isLoading))&&this.project.commitAsync().then((()=>this.filter())),super.performFilter(...arguments)}}}))){},_g=class extends(mg([Og,Ur],(e=>{const n=e.prototype;return class AbstractPartOfProjectModelMixin2 extends e{joinStore(e){let r=null;if(isInstanceOf(e,Lg)){const n=e.getProject();n&&!this.getProject()&&(this.setProject(n),r=n)}n.joinStore.call(this,e),r&&!r.isRepopulatingStores&&this.joinProject()}unjoinStore(e,r=!1){n.unjoinStore.call(this,e,r);const{project:i}=this,o=isInstanceOf(e,Lg)&&!e.isFillingFromMaster&&i===(e.isChained&&e.project?e.masterStore.project:e.project);i&&!i.isDestroying&&!i.isRepopulatingStores&&o&&(this.leaveProject(r),this.setProject(null)),o&&(this.graph=null)}joinProject(){}leaveProject(e=!1){}calculateProject(){const e=this.stores.find((e=>isInstanceOf(e,Lg)&&!!e.getProject()));return null==e?void 0:e.getProject()}async setAsync(e,n,r){var i;const o=this.set(e,n,r);return await(null==(i=this.project)?void 0:i.commitAsync()),o}async getAsync(e){var n;return await(null==(n=this.project)?void 0:n.commitAsync()),this.get(e)}get isStmRestoring(){const e=this.getProject();return(null==e?void 0:e.isRestoringData)||(null==e?void 0:e.stm.isRestoring)||!1}}}))){},$g=class extends(mg([_g],(e=>{e.prototype;return class CalendarIntervalMixin2 extends e{static get fields(){return["name",{name:"startDate",type:"date"},{name:"endDate",type:"date"},"recurrentStartDate","recurrentEndDate","cls","iconCls",{name:"isWorking",type:"boolean",defaultValue:!1},{name:"priority",type:"number"}]}getCalendar(){return this.stores[0].calendar}resetPriority(){this.priorityField=null,this.getCalendar().getDepth()}getPriorityField(){if(null!=this.priorityField)return this.priorityField;let e=1e4+100*this.getCalendar().getDepth(),n=this.priority;return null==n&&(n=this.isRecurrent()?20:30),this.priorityField=e+n}isRecurrent(){return Boolean(this.recurrentStartDate&&this.recurrentEndDate&&this.getStartDateSchedule()&&this.getEndDateSchedule())}isStatic(){return Boolean(this.startDate&&this.endDate)}parseDateSchedule(e){let n=e;if(e&&e!==Object(e)&&(n=Vh.parse.text(e),n!==Object(n)||n.error>=0))try{n=JSON.parse(e)}catch(e){return null}return n}getStartDateSchedule(){if(this.startDateSchedule)return this.startDateSchedule;const e=this.parseDateSchedule(this.recurrentStartDate);return this.startDateSchedule=Vh.schedule(e)}getEndDateSchedule(){if(this.endDateSchedule)return this.endDateSchedule;if("EOD"===this.recurrentEndDate)return"EOD";const e=this.parseDateSchedule(this.recurrentEndDate);return this.endDateSchedule=Vh.schedule(e)}}}))){},jg=class extends(mg([Lg],(e=>{e.prototype;return class CalendarIntervalStore2 extends e{constructor(){super(...arguments),this.disableHasLoadedDataToCommitFlag=!0}static get defaultConfig(){return{modelClass:$g}}}}))){},zg=class extends(mg([$g],(e=>{e.prototype;return class UnspecifiedTimeIntervalModel2 extends e{getCalendar(){return this.calendar}getPriorityField(){return null!=this.priorityField?this.priorityField:this.priorityField=this.getCalendar().getDepth()}}}))){},Bg=class extends(mg([Og],(e=>{e.prototype;return class CorePartOfProjectGenericMixin2 extends e{get eventStore(){var e;return null==(e=this.project)?void 0:e.eventStore}get resourceStore(){var e;return null==(e=this.project)?void 0:e.resourceStore}get assignmentStore(){var e;return null==(e=this.project)?void 0:e.assignmentStore}get dependencyStore(){var e;return null==(e=this.project)?void 0:e.dependencyStore}get calendarManagerStore(){var e;return null==(e=this.project)?void 0:e.calendarManagerStore}getEventById(e){var n;return null==(n=this.eventStore)?void 0:n.getById(e)}getDependencyById(e){var n;return null==(n=this.dependencyStore)?void 0:n.getById(e)}getResourceById(e){var n;return null==(n=this.resourceStore)?void 0:n.getById(e)}getAssignmentById(e){var n;return null==(n=this.assignmentStore)?void 0:n.getById(e)}getCalendarById(e){var n;return null==(n=this.calendarManagerStore)?void 0:n.getById(e)}}}))){},Hg=class extends(mg([_g],(e=>{const n=e.prototype;return class CalendarMixin extends e{constructor(){super(...arguments),this.version=1}static get fields(){return[{name:"version",type:"number"},"name",{name:"unspecifiedTimeIsWorking",type:"boolean",defaultValue:!0},{name:"intervals",type:"store",subStore:!0},"cls","iconCls"]}get intervalStoreClass(){return jg}get intervalStore(){return this.meta.intervalsStore}initIntervalsStore(e){e.storeClass=this.intervalStoreClass,e.modelClass=this.getDefaultConfiguration().calendarIntervalModelClass||this.intervalStoreClass.defaultConfig.modelClass,e.calendar=this}processIntervalsStoreData(e){this.bumpVersion()}isDefault(){const e=this.getProject();return!!e&&this===e.defaultCalendar}getDepth(){return this.childLevel+1}forEachAvailabilityInterval(e,n,r){var i;const o=null==(i=this.getProject())?void 0:i.maxCalendarRange;return o&&(e=Object.assign({maxRange:o},e)),this.calendarCache.forEachAvailabilityInterval(e,n,r)}accumulateWorkingTime(e,n,r){var i,o;if(0===n)return{finalDate:new Date(e),remainingDurationInMs:0};if(isNaN(n))throw new Error("Invalid duration");let s=e;const a=null!=(o=null==(i=this.getProject())?void 0:i.adjustDurationToDST)&&o;return this.forEachAvailabilityInterval(r?{startDate:e,isForward:!0}:{endDate:e,isForward:!1},((e,i,o)=>{let l=!0;if(o.getIsWorking()){let o=i.getTime()-e.getTime();if(n<=o){if(a){const o=r?e.getTimezoneOffset()-new Date(e.getTime()+n).getTimezoneOffset():new Date(i.getTime()-n).getTimezoneOffset()-i.getTimezoneOffset();n-=60*o*1e3}s=r?new Date(e.getTime()+n):new Date(i.getTime()-n),n=0,l=!1}else{if(a){o+=60*(e.getTimezoneOffset()-i.getTimezoneOffset())*1e3}s=r?i:e,n-=o}}return l})),{finalDate:new Date(s),remainingDurationInMs:n}}calculateDurationMs(e,n,r=!1){let i=0;const o=e.getTime()<=n.getTime()||!r?1:-1;o<0&&([e,n]=[n,e]);const s=this.getProject().adjustDurationToDST;return this.forEachAvailabilityInterval({startDate:e,endDate:n},((e,n,r)=>{if(r.getIsWorking()&&(i+=n.getTime()-e.getTime(),s)){const r=e.getTimezoneOffset()-n.getTimezoneOffset();i+=60*r*1e3}})),i*o}calculateEndDate(e,n){const r=n>=0,i=this.accumulateWorkingTime(e,Math.abs(n),r);return 0===i.remainingDurationInMs?i.finalDate:null}calculateStartDate(e,n){const r=n<=0,i=this.accumulateWorkingTime(e,Math.abs(n),r);return 0===i.remainingDurationInMs?i.finalDate:null}skipNonWorkingTime(e,n=!0){let r;const i=this.forEachAvailabilityInterval(n?{startDate:e,isForward:!0}:{endDate:e,isForward:!1},((e,i,o)=>{if(o.getIsWorking())return r=n?e:i,!1}));return i===wg.MaxRangeReached||i===wg.FullRangeIterated?"empty_calendar":r?new Date(r):new Date(e)}addInterval(e){return this.addIntervals([e])}addIntervals(e){return this.bumpVersion(),this.intervalStore.add(e)}removeInterval(e){return this.removeIntervals([e])}removeIntervals(e){return this.bumpVersion(),this.intervalStore.remove(e)}clearIntervals(e){return e||this.bumpVersion(),this.intervalStore.removeAll(e)}bumpVersion(){this.clearCache(),this.version++}get calendarCache(){if(void 0!==this.$calendarCache)return this.$calendarCache;const e=new zg({isWorking:this.unspecifiedTimeIsWorking});return e.calendar=this,this.$calendarCache=new Pg({calendar:this,unspecifiedTimeInterval:e,intervalStore:this.intervalStore,parentCache:this.parent&&!this.parent.isRoot?this.parent.calendarCache:null})}clearCache(){this.$calendarCache&&this.$calendarCache.clear(),this.$calendarCache=void 0}resetPriorityOfAllIntervals(){this.traverse((e=>{e.intervalStore.forEach((e=>e.resetPriority()))}))}insertChild(e,r,i){let o=n.insertChild.call(this,...arguments);return Array.isArray(o)||(o=[o]),o.forEach((e=>{e.bumpVersion(),e.resetPriorityOfAllIntervals()})),o}joinProject(){n.joinProject.call(this),this.intervalStore.setProject(this.getProject())}leaveProject(){n.leaveProject.call(this),this.intervalStore.setProject(null),this.clearCache()}doDestroy(){this.leaveProject(),this.intervalStore.destroy(),super.doDestroy()}isDayHoliday(e){const n=Ct.clearTime(e),r=Ct.getNext(e,Zh.Day);let i=!1;return this.forEachAvailabilityInterval({startDate:n,endDate:r,isForward:!0},((e,n,r)=>(i=r.getIsWorking(),!i))),!i}getDailyHolidaysRanges(e,n){const r=[];for(e=Ct.clearTime(e);e<n;)this.isDayHoliday(e)&&r.push({startDate:e,endDate:Ct.getStartOfNextDay(e,!0,!0)}),e=Ct.getNext(e,Zh.Day);return r}getWorkingTimeRanges(e,n){const r=[];return this.forEachAvailabilityInterval({startDate:e,endDate:n,isForward:!0},((e,n,i)=>{if(i.getIsWorking()){const o=i.intervals[0];r.push({name:o.name,startDate:e,endDate:n})}})),r}getNonWorkingTimeRanges(e,n){const r=[];return this.forEachAvailabilityInterval({startDate:e,endDate:n,isForward:!0},((e,n,i)=>{if(!i.getIsWorking()){const o=i.intervals[0];r.push({name:o.name,iconCls:o.iconCls,cls:o.cls,startDate:e,endDate:n})}})),r}isWorkingTime(e,n,r){if(r){let r;const i=this.forEachAvailabilityInterval({startDate:e,endDate:n,isForward:!0},((i,o,s)=>{if(s.getIsWorking()&&i<=e&&o>=n)return r=!0,!1}));return i!==wg.MaxRangeReached&&i!==wg.FullRangeIterated&&r}{const r=this.skipNonWorkingTime(e);return!(!r||"empty_calendar"===r)&&(n?r<n:r.getTime()===e.getTime())}}}}))){},Vg=class extends(mg([_g],(e=>{const n=e.prototype;return class HasAssignmentsMixin extends e{getAssignmentFor(e){var n;for(const r of null!=(n=this.assigned)?n:[])if(r.resource===e)return r;return null}isAssignedTo(e){return Boolean(this.getAssignmentFor(e))}async assign(e){const n=this.project.assignmentStore.modelClass;return this.addAssignment(new n({event:this,resource:e})),this.commitAsync()}async unassign(e){const n=this.getAssignmentFor(e);return this.removeAssignment(n),this.commitAsync()}leaveProject(){if(this.isInActiveTransaction&&this.assigned){const e=this.getEventStore();this.assigned.forEach((n=>e.assignmentsForRemoval.add(n)))}n.leaveProject.call(this,...arguments)}remove(){if(!this.parent)return n.remove.call(this);{const e=this.getEventStore();n.remove.call(this),e&&e.afterEventRemoval()}}addAssignment(e){return this.getProject().assignmentStore.add(e),e}removeAssignment(e){return this.getProject().assignmentStore.remove(e),e}}}))){},Ng=class extends(mg([_g,Bg,Ur],(e=>{const n=e.prototype;return class CorePartOfProjectModelMixin2 extends e{constructor(){super(...arguments),this.$isCalculating=!1,this.$changed={},this.$beforeChange={}}get isInActiveTransaction(){return!0}joinProject(){this.invalidate()}leaveProject(e=!1){var r;n.leaveProject.call(this,e),null==(r=this.project)||r.bufferedCommitAsync()}invalidate(){var e;null==(e=this.project)||e.invalidate(this)}getCurrentOrProposed(e){var n;return e in this.$changed&&!0!==this.$changed[e]?this.$changed[e]:null!=(n=this.get(e))?n:null}hasCurrentOrProposed(e){return e in this.$changed&&1!=this.$changed[e]||null!=this.get(e)}propose(e){var n;if(this.project||(null==(n=this.recurringTimeSpan)?void 0:n.project)){const n=Object.keys(e);for(let r=0;r<n.length;r++){const i=n[r];this.$changed[i]=e[i]}this.invalidate()}else this.set(e)}setChanged(e,n,r=!0,i=!1){const o=this;o.$changed[e]=n,i&&(e in o.$beforeChange||(o.$beforeChange[e]=o.get(e)),o.setData(e,n)),r&&o.invalidate()}calculateInvalidated(){}finalizeInvalidated(e=!1){const n=this;n.$isCalculating=!0,e?n.setData(n.$changed):(n.setData(n.$beforeChange),n.set(n.$changed)),n.$changed={},n.$beforeChange={},n.$isCalculating=!1}}}))){},isNotNumber=e=>Number(e)!==e,CIFromSetOrArrayOrValue=e=>e instanceof Set||e instanceof Array?CI(e):CI([e]),delay=e=>new Promise((n=>setTimeout(n,e))),format=(e,...n)=>e.replace(/{(\d+)}/g,((e,r)=>void 0!==n[r]?n[r]:e)),qg=class extends(mg([Lg],(e=>{const n=e.prototype;return class AbstractAssignmentStoreMixin2 extends e{constructor(){super(...arguments),this.assignmentsForRemoval=new Set,this.allAssignmentsForRemoval=!1}remove(e,r){this.assignmentsForRemoval=CIFromSetOrArrayOrValue(e).toSet();const i=n.remove.call(this,e,r);return this.assignmentsForRemoval.clear(),i}removeAll(e){this.allAssignmentsForRemoval=!0;const r=n.removeAll.call(this,e);return this.allAssignmentsForRemoval=!1,r}}}))){},Wg=class extends(mg([Lg],(e=>{e.prototype;return class AbstractCalendarManagerStoreMixin2 extends e{doDestroy(){var e;const n=[];(null==(e=this.rootNode)?void 0:e.isDestroyed)||this.traverse((e=>n.push(e))),super.doDestroy(),n.forEach((e=>e.destroy()))}}}))){},Ug=class extends(mg([Lg],(e=>{const n=e.prototype;return class AbstractDependencyStoreMixin2 extends e{constructor(){super(...arguments),this.dependenciesForRemoval=new Set,this.allDependenciesForRemoval=!1}remove(e,r){this.dependenciesForRemoval=CIFromSetOrArrayOrValue(e).toSet();const i=n.remove.call(this,e,r);return this.dependenciesForRemoval.clear(),i}removeAll(e){this.allDependenciesForRemoval=!0;const r=n.removeAll.call(this,e);return this.allDependenciesForRemoval=!1,r}}}))){},Gg={splice:1,clear:1},Yg=class extends(mg([Lg],(e=>{const n=e.prototype;return class AbstractEventStoreMixin2 extends e{constructor(){super(...arguments),this.assignmentsForRemoval=new Set,this.dependenciesForRemoval=new Set}onDataChange(e){var n;const r=Gg[e.action];super.onDataChange(e),r&&(null==(n=e.removed)?void 0:n.length)&&this.afterEventRemoval()}remove(e,r){const i=n.remove.call(this,e,r);return this.afterEventRemoval(),i}removeAll(e){const r=n.removeAll.call(this,e);return this.afterEventRemoval(),r}onNodeRemoveChild(e,r,i,o){const s=n.onNodeRemoveChild.call(this,...arguments);return this.afterEventRemoval(),s}afterEventRemoval(){const{assignmentsForRemoval:e,dependenciesForRemoval:n}=this;if(!e)return;const r=this.getAssignmentStore();if(r&&!r.allAssignmentsForRemoval&&e.size){const n=[...e].filter((e=>!r.assignmentsForRemoval.has(e)));n.length>0&&r.remove(n)}e.clear();const i=this.getDependencyStore();if(i&&!i.allDependenciesForRemoval&&n.size){const e=[...n].filter((e=>!i.dependenciesForRemoval.has(e)));e.length>0&&i.remove(e)}n.clear()}processRecord(e,n=!1){var r;if(!(null==(r=this.project)?void 0:r.isRepopulatingStores)){const n=this.getById(e.id);if(n&&n!==e&&n.assigned)for(const r of n.assigned)r.event=e}return e}}}))){},Kg={splice:1,clear:1},Xg=class extends(mg([Lg],(e=>{const n=e.prototype;return class AbstractResourceStoreMixin2 extends e{constructor(){super(...arguments),this.assignmentsForRemoval=new Set}onDataChange(e){var n;const r=Kg[e.action];super.onDataChange(e),r&&(null==(n=e.removed)?void 0:n.length)&&this.afterResourceRemoval()}remove(e,r){const i=n.remove.call(this,e,r);return this.afterResourceRemoval(),i}removeAll(e){const r=n.removeAll.call(this,e);return this.afterResourceRemoval(),r}afterResourceRemoval(){const e=this.getAssignmentStore();if(e&&!e.allAssignmentsForRemoval){const n=[...this.assignmentsForRemoval].filter((n=>!e.assignmentsForRemoval.has(n)));n.length>0&&e.remove(n)}this.assignmentsForRemoval.clear()}processRecord(e,n=!1){const r=this.getById(e.id);if(r&&r!==e)for(const n of r.assigned||[])n.resource=e;return e}}}))){},Zg=class extends(mg([Ng],(e=>{const n=e.prototype;return class CoreEventMixin2 extends e{constructor(){super(...arguments),this._startDate=null,this._endDate=null,this._duration=null}static get fields(){return[{name:"startDate",type:"date"},{name:"endDate",type:"date"},{name:"duration",type:"number"},{name:"durationUnit",type:"durationunit",defaultValue:"day"}]}get startDate(){var e,n;return null!=(n=null!=(e=this._startDate)?e:this.get("startDate"))?n:null}get endDate(){var e,n;return null!=(n=null!=(e=this._endDate)?e:this.get("endDate"))?n:null}get duration(){var e,n;return null!=(n=null!=(e=this._duration)?e:this.get("duration"))?n:null}set startDate(e){this.proposeStartDate(e)}set endDate(e){this.proposeEndDate(e)}set duration(e){this.proposeDuration(e)}inSet(e,r,i,o,s){const a=this;return!a.project||a.project.isWritingData||"string"==typeof e||s||("startDate"in e&&!("startDate"in a.$changed)&&(a.$changed.startDate=!0,a.invalidate()),"endDate"in e&&!("endDate"in a.$changed)&&(a.$changed.endDate=!0,a.invalidate())),n.inSet.call(a,e,r,i,o,s)}getStartDate(){return this.startDate}proposeStartDate(e,n=!("endDate"in this.$changed)){var r;(this.inSetting||(null==e?void 0:e.getTime())!==(null==(r=this.startDate)?void 0:r.getTime()))&&(this._startDate=e,this.propose({startDate:e,keepDuration:n}))}async setStartDate(e,n=!0){var r;return this.proposeStartDate(e,n),null==(r=this.project)?void 0:r.commitAsync()}getEndDate(){return this.endDate}proposeEndDate(e,n=!1){var r;(this.inSetting||(null==e?void 0:e.getTime())!==(null==(r=this.endDate)?void 0:r.getTime()))&&(this._endDate=e,this.propose({endDate:e,keepDuration:n}))}async setEndDate(e,n=!1){var r;return this.proposeEndDate(e,n),null==(r=this.project)?void 0:r.commitAsync()}getDuration(){return this.duration}proposeDuration(e,n,r=!0){this._duration=e,this.propose({duration:e,keepStart:r}),n&&this.propose({durationUnit:n})}async setDuration(e,n,r=!0){var i;return this.proposeDuration(e,n,r),null==(i=this.project)?void 0:i.commitAsync()}getDurationUnit(){return this.durationUnit}joinProject(){var e,r;const i=this,o=i.$changed,s=i.getCurrentOrProposed("startDate"),a=i.getCurrentOrProposed("endDate"),l=i.getCurrentOrProposed("duration");if(null!=s&&(o.startDate=i._startDate=s),null!=a&&(o.endDate=i._endDate=a),null!=l&&(o.duration=i._duration=l),i.eventStore&&!i.eventStore.isLoadingData){const n=null==(e=i.assignmentStore)?void 0:e.storage.findItem("event",null);if(n){const e=null==(r=i.assignmentStore)?void 0:r.storage.findItem("eventId",i.id);if(e)for(const n of e)n.setChanged("event",i);else for(const e of n)e.getCurrentOrProposed("event")===i.id&&e.setChanged("event",i)}}n.joinProject.call(i)}applyValue(e,r,i,o,s){var a;if((this.project||(null==(a=this.recurringTimeSpan)?void 0:a.project))&&s){const{name:n}=s;"startDate"!==n&&"duration"!=n&&"endDate"!==n||(e=!0,this["_"+n]=i),o&&(e=!1)}n.applyValue.call(this,e,r,i,o,s)}afterChange(e,r,i,o,s){this.$isCalculating||s||this.setData({startDate:this.getCurrentOrProposed("startDate"),endDate:this.getCurrentOrProposed("endDate"),duration:this.getCurrentOrProposed("duration"),durationUnit:this.getCurrentOrProposed("durationUnit")}),n.afterChange.call(this,e,r,i,o,s)}calculateInvalidated(){const e=this,n=e.$changed,r="startDate"in n,i="endDate"in n,o="duration"in n,{startDate:s,endDate:a,duration:l,keepDuration:c,keepStart:d}=n;let u=null;!r||i||o?r||!i||o?r||i||!o?r&&i&&!o?null===s&&null===a?n.duration=null:u="duration":r&&!i&&o?u="endDate":!r&&i&&o?u="startDate":r&&i&&o&&(u=null==l?"duration":null==s?"startDate":"endDate"):null===l?n.endDate=null:!e.hasCurrentOrProposed("startDate")||!d&&e.hasCurrentOrProposed("endDate")?e.hasCurrentOrProposed("endDate")&&(u="startDate"):(d&&n.duration<0&&(n.duration=0),u="endDate"):null===a?n.startDate=null:e.hasCurrentOrProposed("startDate")&&!c&&!0!==a&&a<e.getCurrentOrProposed("startDate")?(n.startDate=a,n.duration=0):!e.hasCurrentOrProposed("duration")||!c&&e.hasCurrentOrProposed("startDate")?e.hasCurrentOrProposed("startDate")&&(u="duration"):u="startDate":null===s?n.endDate=null:e.hasCurrentOrProposed("endDate")&&s>e.getCurrentOrProposed("endDate")&&!c?(n.endDate=s,n.duration=0):!e.hasCurrentOrProposed("duration")||!c&&e.hasCurrentOrProposed("endDate")?e.hasCurrentOrProposed("endDate")&&(u="duration"):u="endDate";const h=e.getCurrentOrProposed("startDate"),g=e.getCurrentOrProposed("endDate"),p=e.getCurrentOrProposed("duration"),m=e.getCurrentOrProposed("durationUnit");let f,b;switch(u){case"startDate":n.startDate=Ct.add(g,-p,m);break;case"endDate":f=Ct.as("hour",p,m),b=Ct.as(m,f,"h"),n.endDate=Ct.add(h,b,m);break;case"duration":f=Ct.diff(h,g,"h"),n.duration=Ct.as(m,f,"h")}"startDate"in n&&!0!==n.startDate&&(this._startDate=n.startDate),"endDate"in n&&!0!==n.endDate&&(this._endDate=n.endDate),"duration"in n&&!0!==n.duration&&(this._duration=n.duration),!0===n.startDate&&delete n.startDate,!0===n.endDate&&delete n.endDate,delete n.keepDuration,delete n.keepStart}}}))){},Qg=class extends(mg([Ng],(e=>{const n=e.prototype;return class CoreResourceMixin2 extends e{get assigned(){var e;return null==(e=this.project)?void 0:e.assignmentStore.getResourcesAssignments(this)}joinProject(){var e;this.resourceStore&&!this.resourceStore.isLoadingData&&(null==(e=this.assignmentStore)||e.query((e=>e.get("resource")===this.id)).forEach((e=>e.setChanged("resource",this)))),n.joinProject.call(this)}leaveProject(e=!1){var r;if(this.assigned&&!e&&!(null==(r=this.resourceStore)?void 0:r.isLoadingData)){const e=this.resourceStore;this.assigned.forEach((n=>e.assignmentsForRemoval.add(n)))}n.leaveProject.call(this)}applyValue(e,r,i,o,s){"id"===(null==s?void 0:s.name)&&this.assigned.forEach((e=>{e.set("resourceId",i)})),n.applyValue.call(this,e,r,i,o,s)}}}))){};function asId(e){return(null==e?void 0:e.isModel)?e.id:e}var Jg=class extends(mg([Ng],(e=>{const n=e.prototype;return class CoreAssignmentMixin2 extends e{static get fields(){return[{name:"resource",isEqual:(e,n)=>e===n,persist:!1},{name:"event",isEqual:(e,n)=>e===n,persist:!1}]}setChanged(e,r,i){const{assignmentStore:o,eventStore:s,resourceStore:a,project:l}=this;let c=!1;if("event"===e){const e=isInstanceOf(r,Zg)?r:null==s?void 0:s.$master.getById(r);e&&(c=!0),r=e||r}if("resource"===e){const e=isInstanceOf(r,Qg)?r:null==a?void 0:a.$master.getById(r);e&&(c=!0),r=e||r}n.setChanged.call(this,e,r,i,!0),!o||!c||l.isPerformingCommit||o.isLoadingData||a.isLoadingData||o.skipInvalidateIndices||o.invalidateIndices()}joinProject(){n.joinProject.call(this),this.setChanged("event",this.get("event")),this.setChanged("resource",this.get("resource"))}calculateInvalidated(){var e,n;let{event:r=this.event,resource:i=this.resource}=this.$changed;if(null!==r&&!isInstanceOf(r,Zg)){const n=null==(e=this.eventStore)?void 0:e.getById(r);n&&this.setChanged("event",n,!1)}if(null!==i&&!isInstanceOf(i,Qg)){const e=null==(n=this.resourceStore)?void 0:n.getById(i);e&&this.setChanged("resource",e,!1)}}finalizeInvalidated(e){const r=this.$changed;"resource"in r&&(r.resourceId=asId(r.resource)),"event"in r&&(r.eventId=asId(r.event)),n.finalizeInvalidated.call(this,e)}set event(e){this.setChanged("event",e),this.setChanged("eventId",asId(e))}get event(){const e=this.get("event");return null!=(null==e?void 0:e.id)?e:null}set resource(e){this.setChanged("resource",e),this.setChanged("resourceId",asId(e))}get resource(){const e=this.get("resource");return null!=(null==e?void 0:e.id)?e:null}}}))){},ep=class extends(mg([Lg,Bg,yi],(e=>{const n=e.prototype;return class CorePartOfProjectStoreMixin2 extends e{setProject(e){const r=n.setProject.call(this,e);return e&&this.joinProject(e),r}joinProject(e){}onCommitAsync(){}}}))){},tp=new Set,np=class extends(mg([qg,ep],(e=>{e.prototype;return class CoreAssignmentStoreMixin2 extends e{constructor(){super(...arguments),this.skipInvalidateIndices=!1}static get defaultConfig(){return{modelClass:Jg,storage:{extraKeys:[{property:"event",unique:!1},{property:"resource",unique:!1},{property:"eventId",unique:!1}]}}}set data(e){this.allAssignmentsForRemoval=!0,super.data=e,this.allAssignmentsForRemoval=!1}getEventsAssignments(e){return this.storage.findItem("event",e,!0)||tp}getResourcesAssignments(e){return this.storage.findItem("resource",e.$original,!0)||tp}updateIndices(){this.storage.rebuildIndices()}invalidateIndices(){this.storage.invalidateIndices()}afterLoadData(){this.eventStore&&this.linkAssignments(this.eventStore,"event"),this.resourceStore&&this.linkAssignments(this.resourceStore,"resource")}linkAssignments(e,n){e=e.masterStore||e;const r=this.count&&this.storage.findItem(n,null,!0);if(r){for(const i of r){const r=e.getById(i.getCurrentOrProposed(n));r&&i.setChanged(n,r)}this.invalidateIndices()}}unlinkAssignments(e){this.forEach((n=>{var r,i,o;return n.setChanged(e,null!=(o=null!=(i=null==(r=n[e])?void 0:r.id)?i:null==n?void 0:n.getData(e))?o:n[e+"Id"])})),this.invalidateIndices()}onCommitAsync(){this.updateIndices()}}}))){},rp=class extends(mg([Hg,Ng],(e=>{e.prototype;return class CoreCalendarMixin2 extends e{}}))){},ip=class extends(mg([Wg,ep],(e=>{e.prototype;return class CoreCalendarManagerStoreMixin2 extends e{static get defaultConfig(){return{tree:!0,modelClass:rp}}}}))){},op=class extends(mg([Ng],(e=>{const n=e.prototype;return class CoreDependencyMixin2 extends e{static get fields(){return[{name:"fromEvent",isEqual:(e,n)=>e===n,persist:!1},{name:"toEvent",isEqual:(e,n)=>e===n,persist:!1}]}setChanged(e,r,i){var o,s,a;let l=!1;if("fromEvent"===e||"toEvent"===e){const e=isInstanceOf(r,Zg)?r:null==(o=this.eventStore)?void 0:o.getById(r);e&&(l=!0),r=e||r}n.setChanged.call(this,e,r,i,!0),!l||this.project.isPerformingCommit||(null==(s=this.dependencyStore)?void 0:s.isLoadingData)||null==(a=this.dependencyStore)||a.invalidateIndices()}joinProject(){n.joinProject.call(this),this.setChanged("fromEvent",this.get("fromEvent")),this.setChanged("toEvent",this.get("toEvent"))}calculateInvalidated(){var e,n;let{fromEvent:r,toEvent:i}=this.$changed;if(null!==r&&!isInstanceOf(r,Zg)){const n=null==(e=this.eventStore)?void 0:e.getById(r);n&&(this.$changed.fromEvent=n)}if(null!==i&&!isInstanceOf(i,Zg)){const e=null==(n=this.eventStore)?void 0:n.getById(i);e&&(this.$changed.toEvent=e)}}set fromEvent(e){this.setChanged("fromEvent",e)}get fromEvent(){const e=this.get("fromEvent");return null!=(null==e?void 0:e.id)?e:null}set toEvent(e){this.setChanged("toEvent",e)}get toEvent(){const e=this.get("toEvent");return null!=(null==e?void 0:e.id)?e:null}}}))){},sp=new Set,ap=class extends(mg([Ug,ep],(e=>{e.prototype;return class CoreDependencyStoreMixin2 extends e{constructor(){super(...arguments),this.dependenciesForRemoval=new Set,this.allDependenciesForRemoval=!1}static get defaultConfig(){return{modelClass:op,storage:{extraKeys:[{property:"fromEvent",unique:!1},{property:"toEvent",unique:!1}]}}}getIncomingDepsForEvent(e){return this.storage.findItem("toEvent",e)||sp}getOutgoingDepsForEvent(e){return this.storage.findItem("fromEvent",e)||sp}set data(e){this.allDependenciesForRemoval=!0,super.data=e,this.allDependenciesForRemoval=!1}updateIndices(){this.storage.rebuildIndices()}invalidateIndices(){this.storage.invalidateIndices()}onCommitAsync(){this.updateIndices()}}}))){},lp=class extends(mg([Zg,Vg],(e=>{const n=e.prototype;return class CoreHasAssignmentsMixin2 extends e{get assigned(){var e,n;return null!=(n=null==(e=this.project)?void 0:e.assignmentStore.getEventsAssignments(this))?n:this.$cachedAssignments}leaveProject(e=!1){this.$cachedAssignments=this.assigned,super.leaveProject(e)}applyValue(e,r,i,o,s){var a;"id"===r&&(null==(a=this.assigned)||a.forEach((e=>e.set("eventId",i)))),n.applyValue.call(this,e,r,i,o,s)}copy(e=null,r=null){const i=n.copy.call(this,e,r);return(Et.isObject(r)&&!r.skipFieldIdentifiers||!Et.isObject(r))&&(i.$cachedAssignments=this.assigned),i}}}))){},cp=class extends(mg([Zg],(e=>{const n=e.prototype;return class CoreHasDependenciesMixin2 extends e{get outgoingDeps(){return this.project.dependencyStore.getOutgoingDepsForEvent(this)}get incomingDeps(){return this.project.dependencyStore.getIncomingDepsForEvent(this)}leaveProject(){const e=this.eventStore;this.outgoingDeps&&this.outgoingDeps.forEach((n=>e.dependenciesForRemoval.add(n))),this.incomingDeps&&this.incomingDeps.forEach((n=>e.dependenciesForRemoval.add(n))),n.leaveProject.call(this)}}}))){},dp=class extends(mg([Zg,lp,cp],(e=>{e.prototype;return class SchedulerCoreEvent2 extends e{}}))){},up=class extends(mg([Yg,ep],(e=>{e.prototype;return class CoreEventStoreMixin2 extends e{static get defaultConfig(){return{modelClass:dp}}joinProject(){var e;null==(e=this.assignmentStore)||e.linkAssignments(this,"event")}afterLoadData(){var e;this.afterEventRemoval(),null==(e=this.assignmentStore)||e.linkAssignments(this,"event")}}}))){},hp=class extends(mg([Xg,ep],(e=>{const n=e.prototype;return class CoreResourceStoreMixin2 extends e{static get defaultConfig(){return{modelClass:Qg}}joinProject(){var e;null==(e=this.assignmentStore)||e.linkAssignments(this,"resource")}afterLoadData(){var e;null==(e=this.assignmentStore)||e.linkAssignments(this,"resource")}clear(e){var r;n.clear.call(this,e),null==(r=this.assignmentStore)||r.unlinkAssignments("resource")}}}))){},gp=class extends(mg([],Events_default)){},pp=class extends(mg([],Delayable_default)){},mp=class extends(mg([gp,pp,Ur],(e=>{const n=e.prototype;return class AbstractProjectMixin2 extends e{constructor(){super(...arguments),this.isRestoringData=!1}get isRepopulatingStores(){return!1}get isInitialCommit(){return!this.isInitialCommitPerformed||this.hasLoadedDataToCommit}construct(e={}){this.isInitialCommitPerformed=!1,this.isLoadingInlineData=!1,this.isWritingData=!1,this.hasLoadedDataToCommit=!1;const r=!("silenceInitialCommit"in e)||e.silenceInitialCommit,i="adjustDurationToDST"in e&&e.adjustDurationToDST;this.maxCalendarRange="maxCalendarRange"in e?e.maxCalendarRange:15768e7,delete e.maxCalendarRange,delete e.silenceInitialCommit,delete e.adjustDurationToDST,n.construct.call(this,e),this.silenceInitialCommit=r,this.adjustDurationToDST=i}repopulateStore(e){}repopulateReplica(){}deferUntilRepopulationIfNeeded(e,n,r){n(...r)}attachStore(e){}detachStore(e){}async commitAsync(){throw new Error("Abstract method called")}isEngineReady(){throw new Error("Abstract method called")}getStm(){throw new Error("Abstract method called")}}}))){},fp=class extends(mg([],Delayable_default)){},bp=class extends(mg([mp,Bg,fp,Ur],(e=>{const n=e.prototype;class SchedulerCoreProjectMixin2 extends e{static get configurable(){return{stm:{},eventStore:{},assignmentStore:{},resourceStore:{},dependencyStore:{},calendarManagerStore:{},eventModelClass:dp,assignmentModelClass:Jg,resourceModelClass:Qg,dependencyModelClass:op,calendarModelClass:rp,eventStoreClass:up,assignmentStoreClass:np,resourceStoreClass:hp,dependencyStoreClass:ap,calendarManagerStoreClass:ip,assignmentsData:null,calendarsData:null,dependenciesData:null,eventsData:null,resourcesData:null}}construct(e={}){var r;const i=this;if(i.$invalidated=new Set,i.isPerformingCommit=!1,i.silenceInitialCommit=!0,i.ongoing=Promise.resolve(),e.eventStore&&!e.assignmentStore){const n=e.eventStore.masterStore||e.eventStore,o=n.assignmentStore||(null==(r=n.crudManager)?void 0:r.assignmentStore);(null==o?void 0:o.isAssignmentStore)&&(e.assignmentStore=o,i.isSharingAssignmentStore=!0)}n.construct.call(i,e),i.defaultCalendar=new i.calendarManagerStore.modelClass({unspecifiedTimeIsWorking:i.unspecifiedTimeIsWorking}),i.defaultCalendar.project=i;const{calendarsData:o,eventsData:s,dependenciesData:a,resourcesData:l,assignmentsData:c}=i;Boolean(o||s||a||l||c)?(i.loadInlineData({calendarsData:o,eventsData:s,dependenciesData:a,resourcesData:l,assignmentsData:c}),delete i.calendarsData,delete i.eventsData,delete i.dependenciesData,delete i.resourcesData,delete i.assignmentsData):i.bufferedCommitAsync()}doDestroy(){var e,r,i,o,s,a;const l=this;null==(e=l.eventStore)||e.destroy(),null==(r=l.dependencyStore)||r.destroy(),null==(i=l.assignmentStore)||i.destroy(),null==(o=l.resourceStore)||o.destroy(),null==(s=l.calendarManagerStore)||s.destroy(),l.defaultCalendar.destroy(),null==(a=l.stm)||a.destroy(),n.doDestroy.call(this)}async loadInlineData(e){const n=this;n.isLoadingInlineData=!0,e.calendarsData&&(n.calendarManagerStore.data=e.calendarsData),e.resourcesData&&(n.resourceStore.data=e.resourcesData),e.assignmentsData&&(n.assignmentStore.data=e.assignmentsData),e.eventsData&&(n.eventStore.data=e.eventsData),e.tasksData&&(n.eventStore.data=e.tasksData),e.dependenciesData&&(n.dependencyStore.data=e.dependenciesData),await n.commitLoad(),n.isLoadingInlineData=!1}async commitLoad(){await this.commitAsync(),this.isDestroyed||this.trigger("load")}joinStoreRecords(e){const fn2=e=>{e.setProject(this),e.joinProject()};e.rootNode?e.rootNode.traverse(fn2):e.forEach(fn2)}unJoinStoreRecords(e){const fn2=e=>{e.leaveProject(),e.setProject(this)};e.rootNode?e.rootNode.traverse((n=>{n!==e.rootNode&&fn2(n)})):e.forEach(fn2)}resolveStoreAndModelClass(e,n){const r=(null==n?void 0:n.storeClass)||this[`${e}StoreClass`];let i=null==n?void 0:n.modelClass;return i||(i=this.getDefaultConfiguration()[`${e}ModelClass`]!==r.getDefaultConfiguration().modelClass?r.getDefaultConfiguration().modelClass:this[`${e}ModelClass`]),{storeClass:r,modelClass:i}}setEventStore(e){this.eventStore=e}changeEventStore(e,n){const r=this,{stm:i}=r;if(r.detachStore(n),e instanceof yi)e.project=r,i.addStore(e),r.joinStoreRecords(e);else{const{storeClass:n,modelClass:o}=r.resolveStoreAndModelClass("event",e);e=new n(Et.assign({modelClass:o,project:r,stm:i},e))}if(n&&i.hasStore(n)){i.removeStore(n),r.unJoinStoreRecords(n);const{assignmentsForRemoval:o}=n;o.forEach((n=>{const r=n.event;if(r){const i=e.getById(r.id);i&&(n.event=i,o.delete(n))}})),n.afterEventRemoval()}return e.setProject(r),e}updateEventStore(e,n){this.attachStore(e),this.trigger("eventStoreChange",{store:e})}setAssignmentStore(e){this.assignmentStore=e}changeAssignmentStore(e,n){const r=this,{stm:i}=r;if(r.detachStore(n),n&&i.hasStore(n)&&(i.removeStore(n),r.unJoinStoreRecords(n)),e instanceof yi)e.project=r,i.addStore(e),r.joinStoreRecords(e);else{const{storeClass:n,modelClass:o}=r.resolveStoreAndModelClass("assignment",e);e=new n(Et.assign({modelClass:o,project:r,stm:i},e))}return e.setProject(r),e}updateAssignmentStore(e,n){this.attachStore(e),this.trigger("assignmentStoreChange",{store:e})}setResourceStore(e){this.resourceStore=e}changeResourceStore(e,n){const r=this,{stm:i}=r;if(r.detachStore(n),e instanceof yi)e.project=r,i.addStore(e),r.joinStoreRecords(e);else{const{storeClass:n,modelClass:o}=r.resolveStoreAndModelClass("resource",e);e=new n(Et.assign({modelClass:o,project:r,stm:i},e))}if(n&&i.hasStore(n)){i.removeStore(n),r.unJoinStoreRecords(n);const{assignmentsForRemoval:o}=n;o.forEach((n=>{const r=n.resource;if(r){const i=e.getById(r.id);i&&(n.resource=i,o.delete(n))}})),n.afterResourceRemoval()}return e.setProject(r),e}updateResourceStore(e,n){this.attachStore(e),this.trigger("resourceStoreChange",{store:e})}setDependencyStore(e){this.dependencyStore=e}changeDependencyStore(e,n){const r=this;if(r.detachStore(n),e instanceof yi)e.project=r,r.stm.addStore(e),r.joinStoreRecords(e);else{const{storeClass:n,modelClass:i}=r.resolveStoreAndModelClass("dependency",e);e=new n(Et.assign({modelClass:i,project:r,stm:r.stm},e))}return e}updateDependencyStore(e,n){this.attachStore(e),this.trigger("dependencyStoreChange",{store:e})}setCalendarManagerStore(e){this.calendarManagerStore=e}changeCalendarManagerStore(e,n){const r=this;if(r.detachStore(n),e instanceof yi)r.stm.addStore(e);else{const n=(null==e?void 0:e.storeClass)||r.calendarManagerStoreClass,i=(null==e?void 0:e.modelClass)||n.getDefaultConfiguration().modelClass||r.calendarModelClass;e=new n(Et.assign({modelClass:i,project:r,stm:r.stm},e))}return e.setProject(r),e}updateCalendarManagerStore(e,n){this.attachStore(e),this.trigger("calendarManagerStoreChange",{store:e})}get calendar(){return this.$calendar||this.defaultCalendar}set calendar(e){this.$calendar=e}get effectiveCalendar(){return this.calendar}async addEvent(e){return this.eventStore.add(e),this.commitAsync()}async addAssignment(e){return this.assignmentStore.add(e),this.commitAsync()}async addResource(e){return this.resourceStore.add(e),this.commitAsync()}async addDependency(e){return this.dependencyStore.add(e),this.commitAsync()}bufferedCommitAsync(){this.hasPendingAutoCommit||this.setTimeout({fn:"commitAsync",delay:10})}get hasPendingAutoCommit(){return this.hasTimeout("commitAsync")}unScheduleAutoCommit(){this.clearTimeout("commitAsync")}async commitAsync(){return this.isPerformingCommit?this.ongoing:this.ongoing=this.doCommitAsync()}async doCommitAsync(){const e=this;if(e.isPerformingCommit=!0,e.unScheduleAutoCommit(),await delay(0),!e.isDestroyed){for(const n of e.$invalidated)n.calculateInvalidated();const{isInitialCommit:n,silenceInitialCommit:r}=e,i=n&&r;e.assignmentStore.onCommitAsync(),e.dependencyStore.onCommitAsync(),e.isInitialCommitPerformed=!0,e.hasLoadedDataToCommit=!1,e.isPerformingCommit=!1;const o=[e.assignmentStore,e.dependencyStore,e.eventStore,e.resourceStore,e.calendarManagerStore];if(o.forEach((e=>{var n;return null==(n=e.suspendAutoCommit)?void 0:n.call(e)})),e.isWritingData=!0,e.trigger("refresh",{isInitialCommit:n,isCalculated:!0}),i)for(const n of e.$invalidated)n.finalizeInvalidated(!0);else{for(const n of e.$invalidated)n.beginBatch(!0),n.finalizeInvalidated();for(const n of e.$invalidated)n.endBatch(!1,!0)}return e.isWritingData=!1,e.$invalidated.clear(),e.trigger("dataReady"),o.forEach((e=>{var n;return null==(n=e.resumeAutoCommit)?void 0:n.call(e)})),e.trigger("commitFinalized"),!0}}async propagateAsync(){return this.commitAsync()}invalidate(e){this.$invalidated.add(e),this.bufferedCommitAsync()}async isValidDependency(){return!0}getStm(){return this.stm}set stm(e){(e=this.$stm=new Do(Et.assign({disabled:!0},e))).ion({restoringStop:async()=>{e.disable(),await this.commitAsync(),this.isDestroyed||(e.enable(),this.trigger("stateRestoringDone"))}})}get stm(){return this.$stm}isEngineReady(){return!this.hasPendingAutoCommit&&!this.isPerformingCommit&&this.isInitialCommitPerformed}}return SchedulerCoreProjectMixin2.applyConfigs=!0,SchedulerCoreProjectMixin2}))){},vp=class extends Ud{constructor(){super(...arguments),__publicField(this,"compositeField",!0)}static get $name(){return"DurationColumn"}static get type(){return"duration"}static get isGanttColumn(){return!0}static get fields(){return[{name:"decimalPrecision",defaultValue:1}]}static get defaults(){return{min:null,max:null,step:1,largeStep:0,field:"fullDuration",text:"L{Duration}",instantUpdate:!0,filterType:"duration",sortable(e,n){return e[this.field]-n[this.field]}}}construct(){super.construct(...arguments);const e=this.sortable;this.sortable=(...n)=>e.call(this,...n)}get defaultEditor(){const{max:e,min:n,step:r,largeStep:i}=this;return Et.cleanupProperties({type:"duration",name:this.field,max:e,min:n,step:r,largeStep:i})}get durationUnitField(){return`${this.field}Unit`}roundValue(e){const n="number"==typeof this.grid.durationDisplayPrecision?this.grid.durationDisplayPrecision:this.decimalPrecision,r=Math.pow(10,n);return Math.round(e*r)/r}formatValue(e,n){return e instanceof Gr&&(n=e.unit,e=e.magnitude),(e=this.roundValue(e))+" "+Ct.getLocalizedNameOfUnit(n,1!==e)}defaultRenderer({record:e,isExport:n}){const r=e[this.field],i=typeof r,o="number"===i?r:null==r?void 0:r.magnitude,s="number"===i?e[this.durationUnitField]:null==r?void 0:r.unit;return"number"!=typeof o?n?"":null:this.formatValue(o,s)}toClipboardString({record:e}){return e[this.field].toString()}fromClipboardString({string:e,record:n}){const r=Ct.parseDuration(e,!0,this.durationUnit);return r&&"magnitude"in r?r:n.fullDuration}calculateFillValue({value:e,record:n}){return this.fromClipboardString({string:e,record:n})}};qd.registerColumnType(vp),vp._$name="DurationColumn";var yp=class extends Hd{static get $name(){return"ResourceCollapseColumn"}static get type(){return"resourceCollapse"}static get defaults(){return{width:"3em",align:"center",sortable:!1,groupable:!1,editor:!1,minWidth:0,cellCls:"b-resourcecollapse-cell",renderer:({record:e})=>({tag:"i",class:{"b-icon":1,"b-icon-expand-resource":1,"b-flip":"none"!==e.eventLayout}})}}onCellClick({record:e,event:n}){n.preventDefault(),e.eventLayout="none"!==e.eventLayout?"none":"stack"}};qd.registerColumnType(yp),yp._$name="ResourceCollapseColumn";var wp=class extends Hd{static get $name(){return"ResourceInfoColumn"}static get type(){return"resourceInfo"}static get fields(){return["showEventCount","showRole","showMeta","showImage","validNames","autoScaleThreshold","useNameAsImageName"]}static get defaults(){return{showImage:!0,showEventCount:!0,showMeta:null,showRole:!1,validNames:null,autoScaleThreshold:40,useNameAsImageName:!0,field:"name",htmlEncode:!1,width:140,cellCls:"b-resourceinfo-cell",editor:!A.isTestEnv&&"text"}}construct(...e){super.construct(...e),this.avatarRendering=new zd({element:this.grid.element})}doDestroy(){super.doDestroy(),this.avatarRendering.destroy()}getImageURL(e){const n=this.grid.resourceImagePath||"",r=n.split("//"),i=r.length>1?r[1]:n,o=w.joinPaths([i||"",e||""]);return r.length>1?r[0]+"//"+o:o}template(e,n){const r=this,{showImage:i,showRole:o,showMeta:s,showEventCount:a,grid:l}=r,{timeAxis:c,resourceImageExtension:d="",defaultResourceImageName:u}=l,h="string"==typeof o?o:"role",g=a&&e.eventStore.getEvents({includeOccurrences:l.enableRecurringEvents,resourceRecord:e,startDate:c.startDate,endDate:c.endDate}).length;let p;if(i&&!1!==e.image)if(e.imageUrl)p=e.imageUrl;else{const o="string"==typeof i?i:e.image||n&&r.useNameAsImageName&&n.toLowerCase()+d||u||"";p=o&&r.getImageURL(o),p&&!o.includes(".")&&(r.validNames&&!r.validNames.includes(o)||(p+=d))}return{class:"b-resource-info",children:[i&&r.avatarRendering.getResourceAvatar({resourceRecord:e,initials:e.initials,color:e.eventColor,iconCls:e.iconCls,imageUrl:p,defaultImageUrl:u&&this.getImageURL(u)}),o||a||s?{tag:"dl",children:[{tag:"dt",text:n},o?{tag:"dd",class:"b-resource-role",text:e[h]}:null,a?{tag:"dd",class:"b-resource-events",html:r.L("L{eventCountText}",g)}:null,s?{tag:"dd",class:"b-resource-meta",html:r.showMeta(e)}:null]}:n]}}defaultRenderer({grid:e,record:n,cellElement:r,value:i,isExport:o}){let s;return n.isSpecialRow?s="":o?s=i:(this.autoScaleThreshold&&e.rowHeight<this.autoScaleThreshold?r.style.fontSize=e.rowHeight/40+"em":r.style.fontSize="",s=this.template(n,i)),s}};function isLastLevel(e,n){return e===n.length-1}function isLastCell(e,n){return n===e.cells[e.cells.length-1]}qd.registerColumnType(wp),wp._$name="ResourceInfoColumn";var Cp=class extends bs{constructor(){super(...arguments),__publicField(this,"startDate",null),__publicField(this,"endDate",null),__publicField(this,"levels",[]),__publicField(this,"size",null)}set range({startDate:e,endDate:n}){const r=this;(r.startDate-e||r.endDate-n)&&(r.startDate=e,r.endDate=n,r.refresh())}buildCells(e=this.startDate,n=this.endDate){var r;const i=this,{sizeProperty:o}=i,{stickyHeaders:s,isVertical:a}=i.client||{},l=[],{length:c}=i.levels,d=i.levels.map(((r,l)=>{var d;const u=s&&(a||l<c-1);return{className:{"b-sch-header-row":1,[`b-sch-header-row-${r.position}`]:1,"b-sch-header-row-main":l===i.model.viewPreset.mainHeaderLevel,"b-lowest":isLastLevel(l,i.levels),"b-sticky-header":u},syncOptions:{releaseThreshold:5,syncIdField:"tickIndex"},dataset:{headerFeature:`headerRow${l}`,headerPosition:r.position},children:null==(d=r.cells)?void 0:d.filter((r=>r.start<n&&r.end>e)).map(((e,n)=>({role:"presentation",className:{"b-sch-header-timeaxis-cell":1,[e.headerCellCls]:e.headerCellCls,[`b-align-${e.align}`]:e.align,"b-last":isLastCell(r,e)},dataset:{tickIndex:e.index,...globalThis.DEBUG&&{date:e.start.getTime()}},style:{[i.positionProperty]:e.coord,[o]:e.width,[`min-${o}`]:e.width},children:[{tag:"span",role:"presentation",className:{"b-sch-header-text":1,"b-sticky-header":u},html:e.value}]})))}}));return null==(r=i.client)||r.getHeaderDomConfigs(l),d.push(...l),{className:i.widgetClassList,syncOptions:{releaseThreshold:0},children:d}}render(e){super.render(e),this.refresh(!0)}refresh(e=!this.levels.length){const n=this,{columnConfig:r}=n.model,{levels:i}=n,o=i.length;if(e){i.length=0,r.forEach(((e,n)=>i[n]={position:n,cells:e})),n.size=i[0].cells.reduce(((e,n)=>e+n.width),0);const{parentElement:s}=n.element;s&&(i.length!==o||e)&&(s.classList.remove(`b-sch-timeaxiscolumn-levels-${o}`),s.classList.add(`b-sch-timeaxiscolumn-levels-${i.length}`))}n.startDate&&n.endDate&&($o.sync({domConfig:n.buildCells(),targetElement:n.element,syncIdField:"headerFeature"}),n.trigger("refresh"))}get widgetClass(){return"b-timeaxis"}};__publicField(Cp,"$name","TimeAxisBase"),__publicField(Cp,"configurable",{compactCellWidthThreshold:15,model:null,cls:null,sizeProperty:null,positionProperty:null}),Cp._$name="TimeAxisBase";var Sp=class extends Cp{get positionProperty(){var e;return(null==(e=this.owner)?void 0:e.rtl)?"right":"left"}get width(){return this.size}onModelUpdate(){this.model.availableSpace>0&&this.model.availableSpace!==this.width&&this.refresh(!0)}updateModel(e){this.detachListeners("tavm"),null==e||e.ion({name:"tavm",update:"onModelUpdate",thisObj:this})}};__publicField(Sp,"$name","HorizontalTimeAxis"),__publicField(Sp,"type","horizontaltimeaxis"),__publicField(Sp,"configurable",{model:null,sizeProperty:"width"}),Sp._$name="HorizontalTimeAxis";var xp=class extends bs{constructor(){super(...arguments),__publicField(this,"firstResource",-1),__publicField(this,"lastResource",-1)}construct(e){const n=this;e.scheduler._resourceColumns=n,super.construct(e),null!=n.imagePath&&n.element.classList.add("b-has-images"),cn.on({element:n.element,delegate:".b-resourceheader-cell",capture:!0,click:"onResourceMouseEvent",dblclick:"onResourceMouseEvent",contextmenu:"onResourceMouseEvent",thisObj:n})}changeShowAvatars(e){var n;return null==(n=this.avatarRendering)||n.destroy(),e&&(this.avatarRendering=new zd({element:this.element})),e}updateShowAvatars(){this.isConfiguring||this.refresh()}updateResourceStore(e){const n=this;n.detachListeners("resourceStore"),e&&(e.ion({name:"resourceStore",changePreCommit:"onResourceStoreDataChange",thisObj:n}),e.count&&n.onResourceStoreDataChange({}))}onResourceStoreDataChange({action:e}){const n=this;n.getConfig("fillWidth"),n.getConfig("fitWidth"),n.updateWidthCache();const{element:r}=n,i=n.totalWidth;n.scheduler.variableColumnWidths?n._fillWidth=n._fitWidth=!1:(n._fillWidth=n.configuredFillWidth,n._fitWidth=n.configuredFitWidth),i!==n.width&&(Gn.setLength(r,"width",i),n.column.set("width",i,n.column.grid.isConfiguring)),"removeall"===e&&(r.innerHTML=""),("remove"===e||"add"===e||"filter"===e||n.fitWidth||n.fillWidth)&&n.refreshWidths(),n.column.grid.toggleEmptyText()}get totalWidth(){return this.updateWidthCache()}updateWidthCache(){let e=0;const{scheduler:n}=this;return n.variableColumnWidths=!1,n.resourceStore.forEach((r=>{r.instanceMeta(n).insetStart=e,r.instanceMeta(n).insetEnd=e+(r.columnWidth||n.resourceColumnWidth),null==r.columnWidth?e+=n.resourceColumnWidth:(e+=r.columnWidth,n.variableColumnWidths=!0)})),e}changeColumnWidth(e){return this.refreshingWidths||(this.configuredColumnWidth=e),e}updateColumnWidth(e,n){const r=this;r.refreshingWidths||r.refreshWidths(),r.isConfiguring||(r.resourceStore.isGrouped&&r.updateWidthCache(),r.refresh(),r.trigger("columnWidthChange",{width:e,oldWidth:n}))}changeFillWidth(e){return this.configuredFillWidth=e}updateFillWidth(){this.isConfiguring||this.refreshWidths()}changeFitWidth(e){return this.configuredFitWidth=e}updateFitWidth(){this.isConfiguring||this.refreshWidths()}getImageURL(e){return w.joinPaths([this.imagePath||"",e||""])}updateImagePath(){this.isConfiguring||this.refresh()}updateAvailableWidth(e){this.refreshWidths()}refreshWidths(){var e;const n=this,{availableWidth:r,configuredColumnWidth:i}=n,o=null==(e=n.resourceStore)?void 0:e.count;if(!r||!o||n.scheduler.variableColumnWidths)return;n.refreshingWidths=!0;const s=n.fitWidth||n.fillWidth&&i*o<r?Math.floor(r/o):i,a=n.column.grid.enableEventAnimations&&Math.abs(n._columnWidth-s)>30;Gn.addTemporaryClass(n.element,"b-animating",a?300:0,n),n.columnWidth=s,n.refreshingWidths=!1}set visibleResources({firstResource:e,lastResource:n}){this.firstResource=e,this.lastResource=n,this.updateWidthCache(),this.refresh()}refresh(){var e;const n=this,{firstResource:r,scheduler:i,resourceStore:o,lastResource:s}=n,{variableColumnWidths:a}=i,l=o.isGrouped&&o.groupers[0].field,c=[];if(n.element.classList.toggle("b-grouped",Boolean(l)),!n.column.grid.isConfiguring&&r>-1&&s>-1&&s<o.count){let d;for(let u=r;u<=s;u++){const r=o.allResourceRecords[u],s=r.instanceMeta(o).groupParent,h=null==s?void 0:s.groupChildren;if(l&&s.id!==(null==d?void 0:d.dataset.resourceId)){const e=h[0].instanceMeta(i).insetStart,n=h[h.length-1].instanceMeta(i).insetEnd-e;d={className:"b-resourceheader-group-cell",dataset:{resourceId:s.id},style:{left:e,width:n},children:[{tag:"span",html:w.encodeHtml(h[0][l])},{className:"b-resourceheader-group-children",children:[]}]},c.push(d)}const g=r.instanceMeta(i),p=r.columnWidth||n.columnWidth,m=l?g.insetStart-d.style.left:a?g.insetStart:u*n.columnWidth,f={className:new Xt({"b-resourceheader-cell":1}),dataset:{resourceId:r.id},style:{[i.rtl?"right":"left"]:m,width:p},children:[]};if(n.headerRenderer){const e=n.headerRenderer({elementConfig:f,resourceRecord:r});null!=e&&(f.html=e)}else{let i;if(r.imageUrl)i=r.imageUrl;else if(null!=n.imagePath&&!1!==r.image){const o=r.image||(null==(e=r.name)?void 0:e.toLowerCase())+n.imageExtension;i=n.getImageURL(o)}f.children.push(n.showAvatars&&n.avatarRendering.getResourceAvatar({resourceRecord:r,initials:r.initials,color:r.eventColor,iconCls:r.iconCls,defaultImageUrl:n.defaultImageName&&n.getImageURL(n.defaultImageName),imageUrl:i}),{tag:"span",className:"b-resource-name",html:w.encodeHtml(r.name)})}l?d.children[1].children.push(f):c.push(f)}}$o.sync({domConfig:{onlyChildren:!0,children:c},targetElement:n.element,syncIdField:"resourceId"})}onResourceMouseEvent(e){const n=e.target.closest(".b-resourceheader-cell"),r=this.resourceStore.getById(n.dataset.resourceId);this.trigger("resourceHeader"+w.capitalize(e.type),{resourceRecord:r,event:e})}getCurrentConfig(e){const n=super.getCurrentConfig(e);return delete n.resourceStore,delete n.column,delete n.type,n}};__publicField(xp,"$name","ResourceHeader"),__publicField(xp,"type","resourceheader"),__publicField(xp,"configurable",{resourceStore:null,headerRenderer:null,showAvatars:{value:!0,$config:"nullify"},fillWidth:!0,fitWidth:!1,columnWidth:150,imagePath:null,imageExtension:null,defaultImageName:null,availableWidth:null}),xp._$name="ResourceHeader";var Dp=class extends(Events_default(Yd)){static get fields(){return[{name:"locked",persist:!1},{name:"flex",persist:!1},{name:"width",persist:!1},{name:"cellCls",persist:!1},{name:"field",persist:!1},"mode"]}static get defaults(){return{draggable:!1,groupable:!1,hideable:!1,showColumnPicker:!1,filterable:!1,sortable:!1,resizable:!1,searchable:!1,editor:!1,enableCellContextMenu:!1,tooltipRenderer:!1,cls:"b-sch-timeaxiscolumn",needWidth:!0,mode:null,region:"normal",exportable:!1,htmlEncode:!1}}static get type(){return"timeAxis"}construct(e){const n=this;super.construct(...arguments),n.thisObj=n,n.timeAxisViewModel=n.grid.timeAxisViewModel,n.mode=n.mode,n.grid.ion({paint:"onTimelinePaint",thisObj:n,once:!0})}static get autoExposeFields(){return!0}doDestroy(){var e,n;null==(e=this.resourceColumns)||e.destroy(),null==(n=this.timeAxisView)||n.destroy(),super.doDestroy()}set mode(e){const n=this,{grid:r}=n;n.set("mode",e),"horizontal"===e?n.timeAxisView=new Sp({model:n.timeAxisViewModel,compactCellWidthThreshold:n.compactCellWidthThreshold,owner:r,client:r}):"vertical"===e&&(n.resourceColumns=xp.new({column:n,scheduler:r,resourceStore:r.resourceStore,imagePath:r.resourceImagePath,imageExtension:r.resourceImageExtension,defaultImageName:r.defaultResourceImageName},r.resourceColumns||{}),n.relayEvents(n.resourceColumns,["resourceheaderclick","resourceheaderdblclick","resourceheadercontextmenu"]))}get mode(){return this.get("mode")}onViewModelUpdate({source:e}){const n=this;n.grid.timeAxisSubGrid.collapsed||("horizontal"===n.mode?(n.refreshHeader(!0),n.width=e.totalSize,n.grid.refresh(),n.subGrid.refreshFakeScroll()):"vertical"===n.mode&&n.grid.refreshRows())}onTimelinePaint({firstPaint:e}){var n;const r=this;r.subGrid.insertRowsBefore&&e&&(r.subGridElement.classList.add("b-timeline-subgrid"),"vertical"===r.mode&&(r.refreshHeader(),null==(n=r.grid)||n.onHeightChange()))}refreshHeader(e){const n=this,{element:r}=n;r&&("horizontal"===n.mode?(!e&&n.timeAxisViewModel.update(void 0,void 0,!0),n.timeAxisView.rendered?n.timeAxisView.refresh(!0):(r.innerHTML="",n.timeAxisView.render(r))):"vertical"===n.mode&&(n.resourceColumns.currentElement||(r.innerHTML="",n.resourceColumns.render(r))))}internalRenderer(e){const{grid:n}=this;if(n.project.isInitialCommitPerformed||n.project.isDelayingCalculation)return n.currentOrientation.renderer(e),super.internalRenderer(e)}get timeAxisViewModel(){return this._timeAxisViewModel}set timeAxisViewModel(e){const n=this;n.detachListeners("tavm"),null==e||e.ion({name:"tavm",update:"onViewModelUpdate",prio:-1e4,thisObj:n}),n._timeAxisViewModel=e,n.timeAxisView&&(n.timeAxisView.model=e)}getState(){const e=super.getState();return delete e.width,delete e.flex,e}};__publicField(Dp,"$name","TimeAxisColumn"),qd.registerColumnType(Dp),Dp._$name="TimeAxisColumn";var Ep=class extends Cp{static get $name(){return"VerticalTimeAxis"}static get configurable(){return{cls:"b-verticaltimeaxis",sizeProperty:"height",positionProperty:"top",wrapText:!0}}buildHorizontalCells(){const e=this,{client:n}=e,r=null==n?void 0:n.stickyHeaders,i=[],o=e.levels.reduce(((n,i,o)=>{var s;return i.cells&&n.push(...null==(s=i.cells)?void 0:s.filter((n=>n.start<e.endDate&&n.end>e.startDate)).map(((n,i,s)=>({role:"presentation",className:{"b-sch-header-timeaxis-cell":1,[n.headerCellCls]:n.headerCellCls,[`b-align-${n.align}`]:n.align,"b-last":i===s.length-1,"b-lowest":o===e.levels.length-1},dataset:{tickIndex:n.index,cellId:`${o}-${n.index}`,headerPosition:o,...globalThis.DEBUG&&{date:n.start.getTime()}},style:{top:n.coord,height:n.width,minHeight:n.width},children:[{role:"presentation",className:{"b-sch-header-text":1,"b-sticky-header":r},html:n.value}]})))),n}),[]);return null==n||n.getHeaderDomConfigs(i),o.push(...i),{className:e.widgetClassList,dataset:{headerFeature:"headerRow0",headerPosition:0},syncOptions:{releaseThreshold:5,syncIdField:"cellId"},children:o}}get height(){return this.size}};Ep._$name="VerticalTimeAxis";var Rp=class extends Hd{static get type(){return"verticalTimeAxis"}static get defaults(){return{draggable:!1,groupable:!1,hideable:!1,showColumnPicker:!1,filterable:!1,sortable:!1,searchable:!1,editor:!1,enableCellContextMenu:!1,tooltipRenderer:!1,minWidth:0,resizable:!1,cellCls:"b-verticaltimeaxiscolumn",locked:!0,flex:1,alwaysClearCell:!1}}get isFocusable(){return!1}construct(e){super.construct(...arguments),this.view=new Ep({model:this.grid.timeAxisViewModel,client:this.grid})}renderer({cellElement:e,size:n}){this.view.render(e),n.height=this.view.height}getCurrentConfig(e){const n=super.getCurrentConfig(e);return delete n.id,delete n.region,delete n.type,delete n.field,delete n.ariaLabel,delete n.cellAriaLabel,n}};__publicField(Rp,"$name","VerticalTimeAxisColumn"),qd.registerColumnType(Rp),Rp._$name="VerticalTimeAxisColumn";var AbstractCrudManagerValidation_default=e=>class AbstractCrudManagerValidation extends e{static get $name(){return"AbstractCrudManagerValidation"}static get configurable(){return{validateResponse:!0,skipSuccessProperty:!0,crudLoadValidationWarningPrefix:"CrudManager load response error(s):",crudSyncValidationWarningPrefix:"CrudManager sync response error(s):",supportShortSyncResponseNote:'Note: Please consider enabling "supportShortSyncResponse" option to allow less detailed sync responses (https://bryntum.com/products/scheduler/docs/api/Scheduler/crud/AbstractCrudManagerMixin#config-supportShortSyncResponse)',disableValidationNote:'Note: To disable this validation please set the "validateResponse" config to false'}}get crudLoadValidationMandatoryStores(){return[]}getStoreLoadResponseWarnings(e,n,r){const i=[],{storeId:o}=e,s=this.crudLoadValidationMandatoryStores,a={[o]:{}};return n?n.rows||(i.push(`- "${o}" store section should have a "rows" property with an array of the store records.`),a[o].rows=["..."]):(null==s?void 0:s.includes(o))&&(i.push(`- No "${o}" store section found. It should contain the store data.`),a[o].rows=["..."]),i.length&&Object.assign(r,a),i}getLoadResponseWarnings(e){const n=[],r={};return this.skipSuccessProperty||(r.success=!0),this.forEachCrudStore(((i,o,s)=>{n.push(...this.getStoreLoadResponseWarnings(s,null==e?void 0:e[o],r))})),n.length&&(n.push("Please adjust your response to look like this:\n"+JSON.stringify(r,null,4).replace(/"\.\.\."/g,"...")),n.push(this.disableValidationNote)),n}validateLoadResponse(e){const n=this.getLoadResponseWarnings(e);n.length&&console.warn(this.crudLoadValidationWarningPrefix+"\n"+n.join("\n"))}getStoreSyncResponseWarnings(e,n,r,i){const o=[],s=[],a=[],{storeId:l}=e,c={[l]:{}},d=e.phantomIdField||this.phantomIdField,{modelClass:u}=e.store,{idField:h}=u,g=(null==r?void 0:r.rows)||[],p=(null==r?void 0:r.removed)||[];let m=!1;if((null==n?void 0:n.added)&&(s.push(...n.added.filter((e=>!g.find((n=>n[d]==e[d]))&&!p.find((n=>n[d]==e[d]||n[h]==e[d])))).map((e=>({[d]:e[d],[h]:"..."})))),s.length)){const e=s.map((e=>"#"+e[d])).join(", ");o.push(`- "${l}" store "rows" section should mention added record(s) ${e} sent in the request. It should contain the added records identifiers (both phantom and "real" ones assigned by the backend).`)}if(this.supportShortSyncResponse)!s.length&&r&&(("object"!=typeof r||Array.isArray(r))&&(o.push(`- "${l}" store section should be an Object.`),c[l]["..."]="..."),r.rows&&!Array.isArray(r.rows)&&(o.push(`- "${l}" store "rows" section should be an array`),s.push("...")),r.removed&&!Array.isArray(r.removed)&&(o.push(`- "${l}" store "removed" section should be an array:`),a.push("...")));else{if(null==n?void 0:n.updated){const e=n.updated.filter((e=>!g.find((n=>n[h]==e[h])))).map((e=>({[h]:e[h]})));if(s.push(...e),e.length){const n=e.map((e=>"#"+e[h])).join(", ");o.push(`- "${l}" store "rows" section should mention updated record(s) ${n} sent in the request. It should contain the updated record identifiers.`),m=!0}}if(s.length&&s.push("..."),(null==n?void 0:n.removed)&&(a.push(...n.removed.filter((e=>!g.find((n=>n[h]==e[h])))).map((e=>({[h]:e[h]})))),a.length)){const e=a.map((e=>"#"+e[h])).join(", ");o.push(`- "${l}" store "removed" section should mention removed record(s) ${e} sent in the request. It should contain the removed record identifiers.`),c[l].removed=a,a.push("..."),m=!0}}return s.length&&(c[l].rows=s),o.length||delete c[l],Object.assign(i,c),{messages:o,showSupportShortSyncResponseNote:m}}getSyncResponseWarnings(e,n){const r=[],i={},o=n.pack;this.skipSuccessProperty||(i.success=!0);let s=!1;return this.forEachCrudStore(((n,a,l)=>{const c=this.getStoreSyncResponseWarnings(l,null==o?void 0:o[a],e[a],i);s=s||c.showSupportShortSyncResponseNote,r.push(...c.messages)})),r.length&&(r.push("Please adjust your response to look like this:\n"+JSON.stringify(i,null,4).replace(/"\.\.\.":\s*"\.\.\."/g,",,,").replace(/"\.\.\."/g,"...")),s&&r.push(this.supportShortSyncResponseNote),r.push(this.disableValidationNote)),r}validateSyncResponse(e,n){const r=this.getSyncResponseWarnings(e,n);r.length&&console.warn(this.crudSyncValidationWarningPrefix+"\n"+r.join("\n"))}},kp=class extends Error{},Tp=class extends kp{constructor(e={}){var n,r;super(e.message||e.request&&w.capitalize(null==(n=e.request)?void 0:n.type)+" failed"||"Crud Manager request failed"),Object.assign(this,e),this.action=null==(r=this.request)?void 0:r.type}},storeSortFn=function(e,n,r){return e.store&&(e=e.store),n.store&&(n=n.store),(e=e[r]||0)<(n=n[r]||0)?-1:e>n?1:0},storeLoadSortFn=function(e,n){return storeSortFn(e,n,"loadPriority")},storeSyncSortFn=function(e,n){return storeSortFn(e,n,"syncPriority")},AbstractCrudManagerMixin_default=e=>{var n;e.$$meta=e.$meta;const r=[];return e.isEvents||r.push(Events_default),e.isDelayable||r.push(Delayable_default),r.push(AbstractCrudManagerValidation_default),n=class extends((e||re).mixin(...r)){static get $name(){return"AbstractCrudManagerMixin"}static get defaultConfig(){return{crudRevision:null,crudStores:[],storeIdProperty:"storeId",crudFilterParam:"filter",transport:{},trackResponseType:!1,supportShortSyncResponse:!0,phantomIdField:"$PhantomId",phantomParentIdField:"$PhantomParentId",autoLoad:!1,autoSyncTimeout:100,autoSync:!1,resetIdsBeforeSync:!0,syncApplySequence:[],orderedCrudStores:[],writeAllFields:!1,crudIgnoreUpdates:0,autoSyncSuspendCounter:0,crudLoaded:!1,applyingLoadResponse:!1,applyingSyncResponse:!1,callOnFunctions:!0}}get isCrudManager(){return!0}construct(e={}){this._requestId=0,this.activeRequests={},this.crudStoresIndex={},super.construct(e)}afterConstruct(){super.afterConstruct(),this.autoLoad&&(this._autoLoadPromise=this.doAutoLoad())}get loadUrl(){var e,n;return null==(n=null==(e=this.transport)?void 0:e.load)?void 0:n.url}updateLoadUrl(e){Et.setPath(this,"transport.load.url",e)}get syncUrl(){var e,n;return null==(n=null==(e=this.transport)?void 0:e.sync)?void 0:n.url}updateSyncUrl(e){Et.setPath(this,"transport.sync.url",e)}getStoreDescriptor(e){return e?e instanceof yi?this.crudStores.find((n=>n.store===e)):"object"==typeof e?this.crudStoresIndex[e.storeId]:this.crudStoresIndex[e]||this.getStoreDescriptor(yi.getStore(e)):null}fillStoreDescriptor(e){const{store:n}=e,{storeIdProperty:r=this.storeIdProperty,modelClass:i}=n;return e.storeId||(e.storeId=n[r]||n.id),e.idField||(e.idField=i.idField),e.phantomIdField||(e.phantomIdField=i.phantomIdField),e.phantomParentIdField||(e.phantomParentIdField=i.phantomParentIdField),"writeAllFields"in e||(e.writeAllFields=n.writeAllFields),e}updateCrudStoreIndex(){const e=this.crudStoresIndex={};this.crudStores.forEach((n=>n.storeId&&(e[n.storeId]=n)))}getCrudStore(e){const n=this.getStoreDescriptor(e);return null==n?void 0:n.store}forEachCrudStore(e,n=this){if(!e)throw new Error("Iterator function must be provided");this.crudStores.every((r=>!1!==e.call(n,r.store,r.storeId,r)))}set crudStores(e){this._crudStores=[],this.addCrudStore(e);for(const e of this._crudStores)e.loadPriority=e.syncPriority=0}get crudStores(){return this._crudStores}get orderedCrudStores(){return this._orderedCrudStores}set orderedCrudStores(e){return this._orderedCrudStores=e}set syncApplySequence(e){this._syncApplySequence=[],this.addStoreToApplySequence(e)}get syncApplySequence(){return this._syncApplySequence}internalAddCrudStore(e){const n=this;let r;return e instanceof yi?r={store:e}:"object"==typeof e?(e.store||(e={storeId:e.id,store:new yi(e)}),r=e):r={store:yi.getStore(e)},n.fillStoreDescriptor(r),(e=r.store).setCrudManager?e.setCrudManager(n):e.crudManager=n,e.pageSize=null,(n.loadUrl||n.syncUrl)&&(e.autoCommit=!1,e.autoLoad=!1,(e.createUrl||e.updateUrl||e.deleteUrl||e.readUrl)&&console.warn("You have configured an URL on a Store that is handled by a CrudManager that is also configured with an URL. The Store URL's should be removed.")),n.bindCrudStoreListeners(e),r}addCrudStore(e,n,r){if(!(null==(e=oe.asArray(e))?void 0:e.length))return;const i=this,o=e.map(i.internalAddCrudStore,i);void 0===n?i.crudStores.push(...o):(r&&((r instanceof yi||"object"!=typeof r)&&(r=i.getStoreDescriptor(r)),n+=i.crudStores.indexOf(r)),i.crudStores.splice(n,0,...o)),i.orderedCrudStores.push(...o),i.updateCrudStoreIndex()}addPrioritizedStore(e){const n=this;n.hasCrudStore(e)||n.addCrudStore(e,oe.findInsertionIndex(e,n.crudStores,storeLoadSortFn)),n.hasApplySequenceStore(e)||n.addStoreToApplySequence(e,oe.findInsertionIndex(e,n.syncApplySequence,storeSyncSortFn))}hasCrudStore(e){var n;return null==(n=this.crudStores)?void 0:n.some((n=>n===e||n.store===e||n.storeId===e))}removeCrudStore(e){const n=this,r=n.crudStores,i=r.find((n=>n===e||n.store===e||n.storeId===e));if(!i)throw new Error("Store not found in stores collection");n.unbindCrudStoreListeners(i.store),delete n.crudStoresIndex[i.storeId],oe.remove(r,i),n.syncApplySequence&&n.removeStoreFromApplySequence(e)}bindCrudStoreListeners(e){e.ion({name:e.id,addConfirmed:"onCrudStoreChange",change:"onCrudStoreChange",destroy:"onCrudStoreDestroy",thisObj:this})}unbindCrudStoreListeners(e){this.detachListeners(e.id)}addStoreToApplySequence(e,n,r){if(!e)return;e=oe.asArray(e);const i=this,o=e.reduce(((e,n)=>{const r=i.getStoreDescriptor(n);return r&&e.push(r),e}),[]);if(void 0===n)i.syncApplySequence.push(...o);else{let e=n;r&&((r instanceof yi||"object"!=typeof r)&&(r=i.getStoreDescriptor(r)),e+=i.syncApplySequence.indexOf(r)),i.syncApplySequence.splice(e,0,...o)}const s=i.syncApplySequence.map((({storeId:e})=>e));i.orderedCrudStores=[...i.syncApplySequence],i.crudStores.forEach((e=>{s.includes(e.storeId)||i.orderedCrudStores.push(e)}))}removeStoreFromApplySequence(e){const n=this.syncApplySequence.findIndex((n=>n===e||n.store===e||n.storeId===e));n>-1&&(this.syncApplySequence.splice(n,1),this.orderedCrudStores.splice(n,1))}hasApplySequenceStore(e){return this.syncApplySequence.some((n=>n===e||n.store===e||n.storeId===e))}onCrudStoreDestroy({source:e}){this.removeCrudStore(e)}onCrudStoreChange(e){const n=this;n.crudIgnoreUpdates||(n.crudStoreHasChanges(null==e?void 0:e.source)?(n.trigger("hasChanges"),n.autoSync&&n.scheduleAutoSync()):n.trigger("noChanges"))}suspendAutoSync(){this.autoSyncSuspendCounter++}resumeAutoSync(e=!0){const n=this;n.autoSyncSuspendCounter--,n.autoSyncSuspendCounter<=0&&(n.autoSyncSuspendCounter=0,e&&n.autoSync&&n.crudStoreHasChanges()&&n.scheduleAutoSync())}get isAutoSyncSuspended(){return this.autoSyncSuspendCounter>0}scheduleAutoSync(){const e=this;e.hasTimeout("autoSync")||e.isAutoSyncSuspended||e.setTimeout({name:"autoSync",fn:()=>{e.sync().catch((e=>{}))},delay:e.autoSyncTimeout})}async triggerFailedRequestEvents(e,n,r,i){const{options:o,type:s}=e;this.trigger("requestFail",{requestType:s,response:n,responseText:r,responseOptions:i}),this.trigger(s+"Fail",{response:n,responseOptions:i,responseText:r,options:o})}async internalOnResponse(e,n,r){const i=this,o=n?i.decode(n):null,{options:s,type:a}=e;if(n&&!o&&console.error("Failed to parse response: "+n),o&&(i.skipSuccessProperty?!1!==o.success:o.success)){if(!1!==i.trigger("beforeResponseApply",{requestType:a,response:o})&&!1!==i.trigger(`before${w.capitalize(a)}Apply`,{response:o,options:s})){if(i.crudRevision=o.revision,await i.applyResponse(e,o,s),i.isDestroyed)return;i.trigger("requestDone",{requestType:a,response:o,responseOptions:r}),i.trigger(a,{response:o,responseOptions:r,options:s}),"load"!==a&&i.crudStoreHasChanges()||(i.trigger("noChanges"),"load"===a&&i.emitCrudStoreEvents(e.pack.stores,"afterRequest"))}}else i.triggerFailedRequestEvents(e,o,n,r);return o}suspendChangesTracking(){this.crudIgnoreUpdates++}resumeChangesTracking(e){!this.crudIgnoreUpdates||--this.crudIgnoreUpdates||e||this.onCrudStoreChange()}get isBatchingChanges(){return this.crudIgnoreUpdates>0}crudStoreHasChanges(e){return e?this.isCrudStoreDirty(this.getCrudStore(e)):this.crudStores.some((e=>this.isCrudStoreDirty(e.store)))}isCrudStoreDirty(e){return Boolean(e.changes)}doAutoLoad(){return this.load().catch((e=>{}))}emitCrudStoreEvents(e,n,r){const i={action:"read"+n,...r};for(const r of this.crudStores)e.includes(r.storeId)&&r.store.trigger(n,i)}getLoadPackage(e){const n={type:"load",requestId:this.requestId},r=this.crudStores,i=Object.assign({},e);return delete i.request,n.stores=r.map((e=>{var n;const r=null==i?void 0:i[e.storeId],o=e.pageSize||(null==(n=e.store)?void 0:n.pageSize);if(r||o){const n=Object.assign({storeId:e.storeId,page:1},r);return o&&(n.pageSize=o),e.currentPage=n.page,r&&delete i[e.storeId],n}return e.storeId})),Object.assign(n,i),n}loadCrudStore(e,n,r){const i=null==n?void 0:n.rows;(null==r?void 0:r.append)||(null==n?void 0:n.append)?e.add(i):e.data=i,e.trigger("load",{data:i})}loadDataToCrudStore(e,n,r){const i=e.store,o=null==n?void 0:n.rows;i.__loading=!0,o&&this.loadCrudStore(i,n,r,e),i.__loading=!1}loadCrudManagerData(e,n={}){this.suspendChangesTracking(),this.crudStores.forEach((r=>{const i=r.storeId,o=e[i];o&&this.loadDataToCrudStore(r,o,n[i])})),this.resumeChangesTracking(!0)}get isCrudManagerLoading(){return Boolean(this.activeRequests.load||this.applyingLoadResponse)}get isCrudManagerSyncing(){return Boolean(this.activeRequests.sync||this.applyingSyncResponse)}get isLoadingOrSyncing(){return Boolean(this.isCrudManagerLoading||this.isCrudManagerSyncing)}load(e){"string"==typeof e&&(e={request:{url:e}});const n=this,r=n.getLoadPackage(e);return n._autoLoadPromise=null,new Promise(((i,o)=>{if(!1!==n.trigger("beforeLoad",{pack:r})){const{load:s}=n.activeRequests;s&&(n.cancelRequest(s.desc,s.reject),n.trigger("loadCanceled",{pack:r}));const a=M.assign({id:r.requestId,data:n.encode(r),type:"load",success:n.onCrudRequestSuccess,failure:n.onCrudRequestFailure,thisObj:n},null==e?void 0:e.request);n.activeRequests.load={type:"load",options:e,pack:r,resolve:i,reject(...e){a.success=a.failure=null,o(...e)},id:r.requestId,desc:n.sendRequest(a)},n.emitCrudStoreEvents(r.stores,"loadStart"),n.trigger("loadStart",{pack:r})}else n.trigger("loadCanceled",{pack:r}),o({cancelled:!0})}))}getActiveCrudManagerRequest(e){let n=this.activeRequests[e];return!n&&this.trackResponseType&&(n=Object.values(this.activeRequests)[0]),n}prepareAddedRecordData(e,n){const r=this,{store:i}=n,{isTree:o}=i,s=n.phantomIdField||r.phantomIdField,a=n.phantomParentIdField||r.phantomParentIdField,l=i.modelClass.allFields.filter((e=>e.subStore)),c=e.constructor,d=Object.assign(e.persistableData,{[s]:e.id});if(o){const{parent:n}=e;n&&!n.isRoot&&n.isPhantom&&(d[a]=n.id)}return r.resetIdsBeforeSync&&Et.deletePath(d,c.idField),l.forEach((n=>{const i=e.get(n.name);i.allCount&&(d[n.dataSource]={added:i.getRange().map((e=>r.prepareAddedRecordData(e,{store:i})))})})),d}prepareAdded(e,n){return e.filter((e=>e.isValid)).map((e=>this.prepareAddedRecordData(e,n)))}prepareUpdated(e,n){const{store:r}=n,{isTree:i}=r,o=n.writeAllFields||!1!==n.writeAllFields&&this.writeAllFields,s=n.phantomParentIdField||this.phantomParentIdField,a=r.modelClass.allFields.filter((e=>e.subStore));if(n.store.tree){const r=n.store.rootNode;e=e.filter((e=>e!==r))}return e.filter((e=>e.isValid)).reduce(((e,n)=>{let r;if(r=o?n.persistableData:n.modificationDataToWrite,i){const{parent:e}=n;e&&!e.isRoot&&e.isPhantom&&(r[s]=e.id)}return a.forEach((e=>{const i=n.get(e.name);r[e.dataSource]=this.getCrudStoreChanges({store:i})})),Et.isEmpty(r)||e.push(r),e}),[])}prepareRemoved(e){return e.map((e=>{const n=e.constructor;return Et.setPath({},n.idField,e.id)}))}getCrudStoreChanges(e){const{store:n}=e;let r,{added:i=[],modified:o=[],removed:s=[]}=n.changes||{};return i.length&&(i=this.prepareAdded(i,e)),o.length&&(o=this.prepareUpdated(o,e)),s.length&&(s=this.prepareRemoved(s)),(i.length||o.length||s.length)&&(r={},i.length&&(r.added=i),o.length&&(r.updated=o),s.length&&(r.removed=s)),r}getChangesetPackage(){const{changes:e}=this;return e||this.forceSync?{type:"sync",requestId:this.requestId,revision:this.crudRevision,...e}:null}get changes(){const e={};return this.crudStores.forEach((n=>{const r=this.getCrudStoreChanges(n);r&&(e[n.storeId]=r)})),Object.keys(e).length>0?e:null}getRowsToApplyChangesTo({store:e,storeId:n},r,i){var o,s;const a=this,{modelClass:l}=e,c=l.idField,{updated:d,removed:u}=i||{};let h,g,p;if(r){p=!0;const e={};h=(null==(o=r.rows)?void 0:o.slice())||[],g=(null==(s=r.removed)?void 0:s.slice())||[],[...h,...g].forEach((n=>{const r=Et.getPath(n,c);e[r]=!0})),a.supportShortSyncResponse&&(null==d||d.forEach((n=>{const r=Et.getPath(n,c);e[r]||h.push({[c]:r})})),null==u||u.forEach((n=>{const r=Et.getPath(n,c);e[r]||g.push({[c]:r})})))}else(d||u)&&(p=!1,h=d,g=u);return h=(null==h?void 0:h.length)?h:null,g=(null==g?void 0:g.length)?g:null,{rows:h,removed:g,remote:p}}applyChangesToStore(e,n,r){var i;const o=this,s=e.phantomIdField||o.phantomIdField,{store:a}=e,l=a.modelClass.getFieldDataSource("id"),c=a.modelClass.allFields.filter((e=>e.subStore)),{rows:d,removed:u,remote:h}=o.getRowsToApplyChangesTo(e,n,r),g=[],p=[];if(d)for(const e of d)a.getById(null!=(i=e[s])?i:e[l])?p.push(e):g.push(e);const m=[];p.length&&c.length&&p.forEach((e=>{var n,i,d;const u=a.getById(null!=(n=e[s])?n:e[l]),h=(null==(i=r.added)?void 0:i.find((n=>n[s]==e[s])))||(null==(d=r.updated)?void 0:d.find((n=>n[l]==e[l]))),g={};c.forEach((n=>{const r=u.get(n.name);o.applyChangesToStore({store:r},e[n.dataSource],null==h?void 0:h[n.dataSource]),g[n.dataSource]="foo",delete e[n.dataSource]})),m.push([u,g])}));const f=a.applyChangeset({removed:u,added:g,updated:p},null,s,h,!0);return m.forEach((([e,n])=>Object.assign(f.get(e.id),n))),f}applySyncResponse(e,n){var r;const i=this,o=i.orderedCrudStores;i.applyingChangeset=i.applyingSyncResponse=!0,i.suspendChangesTracking();for(const s of o)i.applyChangesToStore(s,e[s.storeId],null==(r=null==n?void 0:n.pack)?void 0:r[s.storeId]);i.resumeChangesTracking(!0),i.applyingChangeset=i.applyingSyncResponse=!1}applyLoadResponse(e,n){this.applyingLoadResponse=!0,this.loadCrudManagerData(e,n),this.applyingLoadResponse=!1}async applyResponse(e,n,r){const i=this;switch(i.trackResponseType&&n.type||e.type){case"load":i.validateResponse&&i.validateLoadResponse(n),i.applyLoadResponse(n,r);break;case"sync":i.validateResponse&&i.validateSyncResponse(n,e),i.applySyncResponse(n,e)}}applyChangeset(e,n=null,r,i=!1){const o=this,s=i?new Map:void 0;o.suspendAutoSync(),o.suspendChangesTracking();for(const{store:r,phantomIdField:a}of o.orderedCrudStores)if(e[r.id]){const l=r.applyChangeset(e[r.id],n,a||o.phantomIdField,!0,i);l&&s.set(r.id,l)}return o.resumeChangesTracking(!0),o.resumeAutoSync(!1),s}get requestId(){return Number.parseInt(`${Date.now()}${this._requestId++}`)}sync(){const e=this;return e.clearTimeout("autoSync"),e.activeRequests.sync?(e.trigger("syncDelayed"),e.activeSyncPromise=e.activeSyncPromise.finally((()=>e.sync()))):e.activeSyncPromise=new Promise(((n,r)=>{const i=e.getChangesetPackage();i?!1!==e.trigger("beforeSync",{pack:i})?(e.trigger("syncStart",{pack:i}),e.activeRequests.sync={type:"sync",pack:i,resolve:n,reject:r,id:i.requestId,desc:e.sendRequest({id:i.requestId,data:e.encode(i),type:"sync",success:e.onCrudRequestSuccess,failure:e.onCrudRequestFailure,thisObj:e})}):(e.trigger("syncCanceled",{pack:i}),r({cancelled:!0})):n(null)})).catch((e=>{if(e&&!e.cancelled)throw e;return e}))}async onCrudRequestSuccess(e,n,r){const i=this,{type:o,id:s}=r;if(i.isDestroyed)return;let a="";r=i.activeRequests[o];try{a=await e.text()}catch(e){}if(i.isDestroyed)return;if((null==r?void 0:r.id)!==s)throw new Error(`Interleaved ${o} operation detected`);i.activeRequests[o]=null;const l=await i.internalOnResponse(r,a,n);if(!i.isDestroyed){if(!l||(i.skipSuccessProperty?!1===(null==l?void 0:l.success):!(null==l?void 0:l.success))){const n={rawResponse:e,response:l,request:r};(null==l?void 0:l.message)&&(n.message=l.message),r.reject(new Tp(n))}i["crud"+w.capitalize(r.type)+"ed"]=!0,r.resolve({response:l,rawResponse:e,responseText:a,request:r})}}async onCrudRequestFailure(e,n,r){var i;const o=this;if(o.isDestroyed)return;r=o.activeRequests[r.type];const s=null==(i=null==n?void 0:n.abortController)?void 0:i.signal;if(!Boolean(null==s?void 0:s.aborted)){let i,s="";try{s=await e.text(),i=o.decode(s)}catch(e){}if(o.isDestroyed)return;if(o.triggerFailedRequestEvents(r,i,s,n),o.isDestroyed)return;r.reject(new Tp({rawResponse:e,request:r}))}o.activeRequests[r.type]=null}acceptChanges(){this.crudStores.forEach((e=>e.store.acceptChanges()))}revertChanges(){this.revertCrudStoreChanges()}revertCrudStoreChanges(){const{usesSingleAssignment:e}=this.eventStore;this.orderedCrudStores.forEach((({store:n})=>(!n.isAssignmentStore||!e)&&n.revertChanges()))}doDestroy(){const e=this,{load:n,sync:r}=e.activeRequests;for(n&&e.cancelRequest(n.desc,n.reject),r&&e.cancelRequest(r.desc,r.reject);e.crudStores.length>0;)e.removeCrudStore(e.crudStores[0]);super.doDestroy&&super.doDestroy()}},__publicField(n,"configurable",{loadUrl:null,syncUrl:null,forceSync:null}),__publicField(n,"delayable",{doAutoLoad:"raf"}),n},Mp=class extends(re.mixin(AbstractCrudManagerMixin_default)){get revision(){return this.crudRevision}set revision(e){this.crudRevision=e}get json(){return w.safeJsonStringify(this)}set json(e){"string"==typeof e&&(e=w.safeJsonParse(e)),this.forEachCrudStore((n=>{const r=`${n.storeId}Data`;e[r]&&(n.data=e[r])}))}static get defaultConfig(){return{stores:null}}construct(e={}){e.stores&&(e.crudStores=e.stores,delete e.stores),super.construct(e)}toJSON(){const e={};return this.forEachCrudStore(((n,r)=>e[`${r}Data`]=n.toJSON())),e}get inlineData(){return this.toJSON()}set inlineData(e){this.json=e}set stores(e){e!==this.crudStores&&(this.crudStores=e)}get stores(){return this.crudStores}get isLoading(){return this.isCrudManagerLoading}addStore(...e){return this.addCrudStore(...e)}removeStore(...e){return this.removeCrudStore(...e)}getStore(...e){return this.getCrudStore(...e)}hasChanges(...e){return this.crudStoreHasChanges(...e)}loadData(...e){return this.loadCrudManagerData(...e)}};Mp._$name="AbstractCrudManager";var AjaxTransport_default=e=>class AjaxTransport extends(e||re){static get $name(){return"AjaxTransport"}static get defaultMethod(){return{load:"GET",sync:"POST"}}cancelRequest(e,n){var r;null==(r=e.abort)||r.call(e),this.isDestroying||n({cancelled:!0})}shouldUseBodyForRequestData(e,n,r){return!("HEAD"===n||"GET"===n||r)}sendRequest(e){const n=this,{data:r}=e,i=n.transport[e.type]||{},o=M.assign({},i,i.requestConfig);e.url&&(o.url=e.url),o.method=o.method||AjaxTransport.defaultMethod[e.type],o.params=M.assign(o.params||{},e.params);let s,a,{paramName:l}=o;if(n.shouldUseBodyForRequestData(i,o.method,l)?(o.body=r,o.headers=o.headers||{},o.headers["Content-Type"]=o.headers["Content-Type"]||"application/json"):(l=l||"data",o.params[l]=r),!o.url)throw new Error("Trying to request without URL specified");function performSend(){o.queryParams=o.params,delete o.params;let r=!1;const i=M.assign({},o,o.fetchOptions);return s=Fe.fetch(o.url,i),s.catch((e=>{var o,a;s.done=!0,null==(o=n.trigger)||o.call(n,"responseReceived",{success:!1});const l=null==(a=i.abortController)?void 0:a.signal;return l&&(r=l.aborted,r||console.warn(e)),{error:e,cancelled:r}})).then((r=>{var o;s.done=!0,null==(o=n.trigger)||o.call(n,"responseReceived",{success:Boolean(null==r?void 0:r.ok)});const a=(null==r?void 0:r.ok)?e.success:e.failure;return null==a?void 0:a.call(e.thisObj||n,r,i,e)}))}delete o.requestConfig,delete o.paramName;const c=n.trigger("beforeSend",{params:o.params,requestType:e.type,requestConfig:o,config:e});return a=M.isPromise(c)?c.then(performSend):performSend(),a.abort=()=>{var e;s.done||null==(e=s.abort)||e.call(s)},a}},JsonEncoder_default=e=>class JsonEncoder extends(e||re){static get $name(){return"JsonEncoder"}static get defaultConfig(){return{encoder:{}}}encode(e){var n;return e=Object.assign({},null==(n=this.encoder)?void 0:n.requestData,e),w.safeJsonStringify(e)}decode(e){return w.safeJsonParse(e)}},CrudManagerView_default=e=>{var n;return n=class extends(e.mixin(LoadMaskable_default)){static get $name(){return"CrudManagerView"}afterConstruct(){super.afterConstruct();const{crudManager:e,project:n}=this;this.loadMask&&(e||n).isCrudManagerLoading&&this.onCrudManagerLoadStart()}applySyncMask(){const{syncMask:e}=this;e&&(this.masked=ts.mergeConfigs(this.loadMaskDefaults,e))}bindCrudManager(e){this.detachListeners("crudManager"),null==e||e.ion({name:"crudManager",loadStart:"onCrudManagerLoadStart",beforeSend:"onCrudManagerBeforeSend",load:"onCrudManagerLoad",loadCanceled:"onCrudManagerLoadCanceled",syncStart:"onCrudManagerSyncStart",beforeApplyResponse:"onCrudManagerBeforeApplyResponse",applyResponse:"onCrudManagerApplyResponse",sync:"onCrudManagerSync",syncCanceled:"onCrudManagerSyncCanceled",requestFail:"onCrudManagerRequestFail",responseReceived:"onAjaxTransportResponseReceived",thisObj:this})}onCrudManagerBeforeSend({params:e}){var n;null==(n=this.applyStartEndParameters)||n.call(this,e)}onCrudManagerLoadStart(){var e;this.applyLoadMask(),null==(e=this.toggleEmptyText)||e.call(this)}onCrudManagerSyncStart(){this.applySyncMask()}onCrudManagerBeforeApplyResponse(){var e;null==(e=this.suspendRefresh)||e.call(this)}onCrudManagerApplyResponse(){var e;null==(e=this.resumeRefresh)||e.call(this,!0)}onCrudManagerRequestFinalize(e=!0,n,r){var i;const o=this;e?null==(i=o.toggleEmptyText)||i.call(o):(o.masked||o.applyLoadMask(),o.applyMaskError(`<div class="b-grid-load-failure">\n                    <div class="b-grid-load-fail">${o.L(`L{GridBase.${n}FailedMessage}`)}</div>\n                    ${r&&r.message?`<div class="b-grid-load-fail">${o.L("L{CrudManagerView.serverResponseLabel}")} ${r.message}</div>`:""}\n                </div>`))}onCrudManagerLoadCanceled(){this.onCrudManagerRequestFinalize(!0,"load")}onCrudManagerSyncCanceled(){this.onCrudManagerRequestFinalize(!0,"sync")}onCrudManagerLoad(){this.onCrudManagerRequestFinalize(!0,"load")}onCrudManagerSync(){this.onCrudManagerRequestFinalize(!0,"sync")}onCrudManagerRequestFail({requestType:e,response:n}){this.onCrudManagerRequestFinalize(!1,e,n)}onAjaxTransportResponseReceived(){const e=this;null!=e.clearMaskDelay?e.setTimeout((()=>e.masked=null),e.clearMaskDelay):e.masked=null}get widgetClass(){}},__publicField(n,"config",{clearMaskDelay:null,testConfig:{clearMaskDelay:0}}),n},PartOfProject_default=e=>class PartOfProject extends(e||re){static get $name(){return"PartOfProject"}},AssignmentModelMixin_default=e=>class AssignmentModelMixin extends e{static get $name(){return"AssignmentModelMixin"}static get fields(){return["resourceId","eventId",{name:"drawDependencies",type:"boolean"},"event","resource"]}construct(e,...n){e=e||{};const{fieldMap:r}=this,i=r.eventId.dataSource,o=r.resourceId.dataSource,s=r.event.dataSource,a=r.resource.dataSource,l=e[i],c=e[o],d=e[s],u=e[a];null!=l?e[s]=l:null!=d&&(e[i]=d.isModel?d.id:d),null!=c?e[a]=c:null!=u&&(e[o]=u.isModel?u.id:u),super.construct(e,...n)}get eventResourceKey(){return this.buildEventResourceKey(this.event,this.resource)}buildEventResourceKey(e,n){let r,i;return r=e?e.isModel?e.id:e:this.internalId,i=n?n.isModel?n.id:n:this.internalId,`${r}-${i}`}buildIndexKey({event:e,resource:n}){return this.buildEventResourceKey(e,n)}set(e,n,...r){var i,o;const s=this.fieldToKeys(e,n);return"resource"in s?void 0!==(null==(i=s.resource)?void 0:i.id)&&(s.resourceId=s.resource.id):"resourceId"in s&&this.constructor.isProAssignmentModel&&(s.resource=s.resourceId),"event"in s?void 0!==(null==(o=s.event)?void 0:o.id)&&(s.eventId=s.event.id):"eventId"in s&&this.constructor.isProAssignmentModel&&(s.event=s.eventId),super.set(s,null,...r)}afterChange(e,n,r,i,o){var s,a;const l=this;return!l.constructor.isProAssignmentModel&&(null==n?void 0:n.resourceId)&&(null==(s=l.resource)?void 0:s.id)!==n.resourceId.value?l.resource=n.resourceId.value:l.constructor.isProAssignmentModel&&(null==(a=l.project)?void 0:a.propagatingSyncChanges)&&(null==n?void 0:n.eventId)&&!(null==n?void 0:n.event)&&(e.event.value===n.eventId.value||e.event.value.id===n.eventId.value)&&(delete n.eventId,delete l.meta.modified.eventId),super.afterChange(...arguments)}set resourceId(e){const{resource:n}=this;(null==n?void 0:n.isModel)&&n.id===e?this.set("resourceId",e):this.resource=e}get resourceId(){var e,n;return null!=(n=null==(e=this.resource)?void 0:e.id)?n:this.get("resourceId")}set eventId(e){const{event:n}=this;(null==n?void 0:n.isModel)&&n.id===e?this.set("eventId",e):this.event=e}get eventId(){var e,n;return null!=(n=null==(e=this.event)?void 0:e.id)?n:this.get("eventId")}get eventName(){var e;return null==(e=this.event)?void 0:e.name}get resourceName(){var e;return null==(e=this.resource)?void 0:e.name}getResource(){return this.resource}get isAssignment(){return!0}get isPersistable(){var e;const{event:n,resource:r,unjoinedStores:i,assignmentStore:o}=this,s=null==o?void 0:o.crudManager;let a;return a=o?this.isValid&&n.isPersistable&&(s||!n.hasGeneratedId&&!r.hasGeneratedId):!this.isPhantom&&Boolean(i[0]),a&&super.isPersistable&&!(null==(e=this.event)?void 0:e.isCreating)}get isValid(){return null!=this.resource&&null!=this.event}toString(){return this.resourceName?`${this.resourceName} ${Math.round(this.units)}%`:""}shouldRecordFieldChange(e,n,r){var i,o;if(!super.shouldRecordFieldChange(e,n,r))return!1;if("event"===e||"eventId"===e){const e=null==(i=this.project)?void 0:i.eventStore;if(e&&e.oldIdMap[n]===e.getById(r))return!1}if("resource"===e||"resourceId"===e){const e=null==(o=this.project)?void 0:o.resourceStore;if(e&&e.oldIdMap[n]===e.getById(r))return!1}return!0}},Ap=Jg,Ip=class extends(AssignmentModelMixin_default(PartOfProject_default(Ap.derive(Ur)))){static get $name(){return"AssignmentModel"}};Ip.exposeProperties(),Ip._$name="AssignmentModel";var PartOfBaseProject_default=e=>class PartOfBaseProject extends e{static get $name(){return"PartOfBaseProject"}get assignmentStore(){return this.project.assignmentStore}get calendarManagerStore(){return this.project.calendarManagerStore}get dependencyStore(){return this.project.dependencyStore}get eventStore(){return this.project.eventStore}get resourceStore(){return this.project.resourceStore}},AssignmentStoreMixin_default=e=>class AssignmentStoreMixin extends e{static get $name(){return"AssignmentStoreMixin"}static get defaultConfig(){return{loadPriority:300,syncPriority:300,storeId:"assignments"}}add(e,...n){var r;e=oe.asArray(e);for(let n=0;n<e.length;n++){let i=e[n];if(i instanceof Ur||(e[n]=i=this.createRecord(i)),!this.isSyncingDataOnLoad&&-1!==this.storage.findIndex("eventResourceKey",i.eventResourceKey,!0))throw new Error(`Duplicate assignment Event: ${i.eventId} to resource: ${i.resourceId}`);(null==(r=i.event)?void 0:r.isCreating)&&(i.isCreating=!0)}return super.add(e,...n)}includesAssignment(e,n){return-1!==this.storage.findIndex("eventResourceKey",`${e}-${n}`,!0)}setStoreData(e){if(this.usesSingleAssignment)throw new Error("Data loading into AssignmentStore (multi-assignment mode) cannot be combined EventStore data containing resourceId (single-assignment mode)");super.setStoreData(e)}set storage(e){super.storage=e,this.storage.addIndex({property:"eventResourceKey",dependentOn:{event:!0,resource:!0}})}get storage(){return this._storage||super.storage}get isAssignmentStore(){return!0}getOccurrence(e,n){if(!e||!(null==n?void 0:n.isOccurrence))return e;const r=this;return{id:`${n.id}:a${e.id}`,event:n,resource:e.resource,eventId:n.id,resourceId:e.resource.id,isAssignment:!0,isOccurrenceAssignment:!0,instanceMeta(e){return r.occurrenceInstanceMeta(this,e)}}}occurrenceInstanceMeta(e,n){const r=this,i=n.id||n,{id:o}=e;let{occurrenceMeta:s}=r;return s||(s=r.occurrenceMeta={}),s[o]||(s[o]={}),s[o][i]||(s[o][i]={})}mapAssignmentsForEvent(e,n,r){e=this.eventStore.getById(e);const i=Boolean(n),o=Boolean(r);return i||o?e.assignments.reduce(((e,s)=>{const a=i?n(s):s;return o&&!r(a)||e.push(a),e}),[]):e.assignments}mapAssignmentsForResource(e,n,r){e=this.resourceStore.getById(e);const i=Boolean(n),o=Boolean(r);return i||o?e.assignments.reduce(((e,s)=>{const a=i?n(s):s;return o&&!r(a)||e.push(a),e}),[]):e.assignments}getAssignmentsForEvent(e){return e.assignments}removeAssignmentsForEvent(e){return this.remove(e.assignments)}getAssignmentsForResource(e){return(e=this.resourceStore.getById(e)).assignments}removeAssignmentsForResource(e){this.remove(this.getAssignmentsForResource(e))}getResourcesForEvent(e){return e.resources}getEventsForResource(e){return null==(e=this.resourceStore.getById(e))?void 0:e.events}assignEventToResource(e,n,r=null,i=!1){var o,s;const a=this,l=i?new Set(e.assignments):null;if(n=oe.asArray(n).map((e=>{var n;return null!=(n=e.$original)?n:e})),null==(o=a.eventStore)?void 0:o.usesSingleAssignment){if(null==(s=e.assignments)?void 0:s.length)return a.isEventAssignedToResource(e,n[0])||(e.resource=n[0]),[];e.resourceId=n[0].id}let c=[];return a.suspendAutoCommit(),n.forEach((n=>{var o;const s=a.getAssignmentForEventAndResource(e,n);if(s)i&&l.delete(s);else{const i={event:e,resource:n};c.push(null!=(o=null==r?void 0:r(i))?o:i)}})),c=a.add(c),i&&a.remove(Array.from(l)),a.resumeAutoCommit(),c}unassignEventFromResource(e,n){const r=this,i=[];if(!n)return r.removeAssignmentsForEvent(e);n=oe.asArray(n);for(let o=0;o<n.length;o++)r.isEventAssignedToResource(e,n[o])&&i.push(r.getAssignmentForEventAndResource(e,n[o]));return r.remove(i)}isEventAssignedToResource(e,n){return Boolean(this.getAssignmentForEventAndResource(e,n))}getAssignmentForEventAndResource(e,n){let r;return(e=this.eventStore.getById(e))&&(r=e.assignments)&&(n=this.resourceStore.$master.getById(n))?this.getOccurrence(r.find((e=>{var r;return(null==(r=e.resource)?void 0:r.$original)===n.$original})),e):null}},Fp=PartOfProject_default(np.derive(Ci)),Pp=class extends(AssignmentStoreMixin_default(Fp)){static get defaultConfig(){return{modelClass:Ip}}};__publicField(Pp,"$name","AssignmentStore"),Pp._$name="AssignmentStore";var ResourceStoreMixin_default=e=>class ResourceStoreMixin extends(e||re){static get $name(){return"ResourceStoreMixin"}get isResourceStore(){return!0}static get defaultConfig(){return{loadPriority:200,syncPriority:100,storeId:"resources",autoTree:!0}}construct(e){if(super.construct(e),!this.modelClass.isResourceModel)throw new Error("Model for ResourceStore must subclass ResourceModel")}removeAll(){const e=super.removeAll(...arguments);return e&&this.assignmentStore.removeAll(),e}onRecordIdChange({record:e,oldValue:n,value:r}){super.onRecordIdChange({record:e,oldValue:n,value:r}),e.isFieldModified("id")&&(this.isChangingId=!0,e.updateAssignmentResourceIds(),this.isChangingId=!1)}get allResourceRecords(){return this._allResourceRecords||(this._allResourceRecords=this.getAllDataRecords())}getAvailableResources({startDate:e,endDate:n}){return this.query((r=>this.eventStore.isDateRangeAvailable(e,n,null,r)))}},ResourceModelMixin_default=e=>class ResourceModelMixin extends e{static get $name(){return"ResourceModelMixin"}static get isResourceModel(){return!0}static get fields(){return[{name:"name",type:"string",persist:!0},"eventColor","eventStyle","imageUrl","image",{name:"resourceMargin",type:"number"},{name:"barMargin",type:"number"},"eventLayout"]}updateAssignmentResourceIds(){this.assigned.forEach((e=>{e.resourceId=this.id}))}syncId(e){super.syncId(e),this.updateAssignmentResourceIds()}get events(){return this.assignments.reduce(((e,n)=>(n.event&&e.push(n.event),e)),[])}get assignments(){return this.assigned?[...this.assigned]:[]}set assignments(e){e.forEach((e=>{e.resource=this}))}getEvents(){return A.deprecate("scheduler","6.0.0","getEvents() is deprecated, use the events property instead"),this.events}get isPersistable(){return super.isPersistable&&(!this.parent||this.parent.isPersistable)}unassignAll(){this.assignments&&this.assignmentStore.remove(this.assignments)}get initials(){const{name:e=""}=this;if(!e)return"";const n=e.split(" ");return n[0][0]+(n.length>1?n[n.length-1][0]:"")}isWorkingTime(e){var n,r;const i=this.effectiveCalendar||(null==(n=this.project)?void 0:n.calendar);return!i||(null==(r=i.isWorkingTime)?void 0:r.call(i,e))}},Op=Qg,Lp=class extends(ResourceModelMixin_default(PartOfProject_default(Op.derive(iu)))){};__publicField(Lp,"$name","ResourceModel"),Lp.exposeProperties(),Lp._$name="ResourceModel";var _p=PartOfProject_default(hp.derive(Ci)),$p=class extends(ResourceStoreMixin_default(_p)){static get defaultConfig(){return{modelClass:Lp}}};$p._$name="ResourceStore";var EventStoreMixin_default=e=>class EventStoreMixin extends(e||re){static get $name(){return"EventStoreMixin"}construct(e){super.construct(e),this.autoTree=!0}set filtersFunction(e){super.filtersFunction=e}get filtersFunction(){const e=super.filtersFunction;return e&&e!==he.returnTrue?n=>n.isCreating||e(n):e}getEventCounts(e){const n=this,{filtersFunction:r,added:i}=n,o=n.getEvents({...e,storeFilterFn:n.isFiltered?n.reapplyFilterOnAdd?r:e=>i.includes(e)?n.indexOf(e)>-1:r(e):null,dateMap:e.dateMap||!0});return o.forEach(((e,n)=>o.set(n,e.length))),o}forEachScheduledEvent(e,n=this){this.forEach((r=>{const{startDate:i,endDate:o}=r;if(i&&o)return e.call(n,r,i,o)}))}getTotalTimeSpan(){let e=new Date(9999,0,1),n=new Date(0);return this.forEach((r=>{r.startDate&&(e=Ct.min(r.startDate,e)),r.endDate&&(n=Ct.max(r.endDate,n))})),e=e<new Date(9999,0,1)?e:null,n=n>new Date(0)?n:null,this.lastTotalTimeSpan={startDate:e||null,endDate:n||e||null}}isEventPersistable(e){return e.isPersistable}isDateRangeAvailable(e,n,r,i){if(i.data.generatedParent)return!1;const o=new Set(this.getEventsForResource(i));if(null==r?void 0:r.isAssignment){r.event.resources.forEach((e=>{e.id!==r.resourceId&&this.getEventsForResource(e).forEach((e=>o.add(e)))}))}if(r){const e=r.isAssignment?r.event:r;o.delete(e)}return!Array.from(o).some((r=>r.isScheduled&&Ct.intersectSpans(e,n,r.startDate,r.endDate)))}filterEventsForResource(e,n,r=this){return e.getEvents(this).filter(n.bind(r))}getResourcesForEvent(e){return e.isOccurrence&&(e=e.recurringTimeSpan),this.assignmentStore.getResourcesForEvent(e)}getEventsForResource(e){return this.assignmentStore.getEventsForResource(e)}getAssignmentsForEvent(e){return this.assignmentStore.getAssignmentsForEvent(e)||[]}getAssignmentsForResource(e){return this.assignmentStore.getAssignmentsForResource(e)||[]}assignEventToResource(e,n,r=!1){return this.assignmentStore.assignEventToResource(e,n,void 0,r)}unassignEventFromResource(e,n){this.assignmentStore.unassignEventFromResource(e,n)}reassignEventFromResourceToResource(e,n,r){const i=this,o=Ur.asId(r),s=i.assignmentStore.getAssignmentForEventAndResource(e,n);s?s.resourceId=o:i.assignmentStore.assignEventToResource(e,r)}isEventAssignedToResource(e,n){return this.assignmentStore.isEventAssignedToResource(e,n)}removeAssignmentsForEvent(e){this.assignmentStore.removeAssignmentsForEvent(e)}removeAssignmentsForResource(e){this.assignmentStore.removeAssignmentsForResource(e)}},returnTrue2=()=>!0,GetEventsMixin_default=e=>{var n;return __publicField(n=class extends e{getEvents({filter:e,date:n,startDate:r,endDate:i,startOnly:o,includeOccurrences:s,allowPartial:a,onlyAssigned:l=!1,dateMap:c=!1,dayTime:d=null,getDateIndex:u}){const h=this,g=arguments[0],{lastDateRange:p,added:m,filtersFunction:f}=h,b=e;if(l&&(g.filter=b?e=>b(e)&&e.resources.length:e=>e.resources.length),"startDate"in g||(r=g.startDate=n),"includeOccurrences"in g||(s=g.includeOccurrences=!0),"allowPartial"in g||(a=g.allowPartial=!o),g.storeFilterFn=h.isFiltered&&!g.ignoreFilters?h.reapplyFilterOnAdd?f:e=>m.includes(e)?h.indexOf(e)>-1:f(e):null,!i)if(r)(i=g.endDate=Ct.clearTime(r)).setDate(i.getDate()+1);else{if(s)throw new Error("getEvents MUST be passed startDate and endDate if recurring occurrences are requested");g.dateFilter=returnTrue2}g.dateFilter||(g.dateFilter=o?e=>{const n=e.hasBatchedChange("startDate")?e.get("startDate"):e.startDate;return n&&!(Ct.clearTime(n)-r)}:a?e=>{const n=e.hasBatchedChange("startDate")?e.get("startDate"):e.startDate,o=e.hasBatchedChange("endDate")?e.get("endDate"):e.endDate||n;return n&&(!(n-o)?Ct.betweenLesserEqual(n,r,i):Ct.intersectSpans(n,o,r,i))}:e=>{const n=e.hasBatchedChange("startDate")?e.get("startDate"):e.startDate,o=e.hasBatchedChange("endDate")?e.get("endDate"):e.endDate||n;return n&&n>=r&&o<=i});const v={startDate:r,endDate:i};return h.processConfiguredListeners(),h.trigger("loadDateRange",{old:p||{},new:M.clone(v),changed:Boolean(!p||p.startDate-v.startDate||p.endDate-v.endDate)}),h.lastDateRange=M.clone(v),c?h.getEventsAsMap(g):h.getEventsAsArray(g)}getEventsAsArray({filter:e,date:n,resourceRecord:r,startDate:i=n,endDate:o,startOnly:s,includeOccurrences:a=!0,dayTime:l=null,dateFilter:c,storeFilterFn:d,getDateIndex:u}){const h=this,g=[];if(d?h.count:h.allCount){let e=r?h.getEventsForResource(r):null;if(!r){const n=h.useDayIndex(l),r=new Set,a=s?"startDate":"date";h.recurringEvents.forEach((e=>{n.dayTime.startOfDay(e.startDate)<=i&&r.add(e)}));for(const e=new Date(i);e<o;e.setDate(e.getDate()+1)){const i=n.get(u?u(e):a,e);null==i||i.forEach((e=>r.add(e)))}e=[...r]}d&&(e=e.filter(d));for(let n=0,{length:r}=e;n<r;n++){const r=e[n];a&&r.isRecurring?g.push.apply(g,r.getOccurrencesForDateRange(i,o).filter(c)):c(r)&&g.push(r)}}return e?g.filter(e):g}getEventsAsMap({filter:e,date:n,resourceRecord:r,startDate:i=n,endDate:o,startOnly:s,includeOccurrences:a=!0,dateMap:l,dayTime:c=null,storeFilterFn:d,getDateIndex:u}){var h;const g=this;if((null==l?void 0:l.clear)?l.clear():l=new Map,g.count){const n=g.useDayIndex(c),p=s?"startDate":"date",m=[],filter2=n=>(!e||e(n))&&(!d||d(n)),baseEventFilter=e=>!e.isRecurring&&filter2(e);if(c=n.dayTime,r)throw new Error("Querying for events for a resource and returning a date-keyed Map is not supported");null==(h=g.recurringEvents)||h.forEach((e=>{c.startOfDay(e.startDate)<o&&m.push(e)}));for(const e=new Date(i);e<o;e.setDate(e.getDate()+1)){let[r,i]=n.get(u?u(e):p,e,!0);(null==r?void 0:r.size)&&(r=[...r].filter(baseEventFilter),r.length&&(l.get(i)||l.set(i,[]).get(i)).push(...r))}for(let e=0,{length:n}=m;e<n;e++){const n=m[e],r=(a?n.getOccurrencesForDateRange(i,o):[n]).filter(filter2),d=Ct.add(o,1,"day");for(let e,n=0,{length:i}=r;n<i;n++){const i=r[n],o=c.startOfDay(i.startDate),a="startDate"!==(u?u(o):s?"startDate":"date")&&i.durationMS?Ct.min(i.endDate||Ct.add(i.startDate,i.duration,i.durationUnit),d):Ct.add(o,1,"day");for(;o<a;o.setDate(o.getDate()+1)){const n=c.dateKey(o);(e=l.get(n))||l.set(n,e=[]),e.push(i)}}}}return l}},"$name","GetEventsMixin"),n},jp={date:"_dateIndex",startDate:"_startDateIndex"},zp=Object.values(jp),Bp=Object.freeze([]),{MILLIS_PER_DAY:Hp}=Xl,Vp=class{constructor(e,n){this.dayTime=n||Xl.MIDNIGHT,this.store=e,this.users=[this.dayTime]}add(e,n,r){const i=this[jp[e]],o=this.dayTime.dateKey(n);(i[o]||(i[o]=new Set)).add(r)}addEvent(e){var n,r,i;let o,s=null==(n=this.dayTime.startOfDay(e.startDate))?void 0:n.getTime();if(s){o=null!=(i=null==(r=e.endDate)?void 0:r.getTime())?i:s,this.add("startDate",s,e);do{this.add("date",s,e),s+=Hp}while(s<o)}}clear(){zp.forEach((e=>this[e]=Object.create(null)))}get(e,n,r){!this.initialized&&this.initialize();let i,o=this[jp[e]];return n&&(i=this.dayTime.dateKey(n),o=r?[o[i],i]:o[i]),o}initialize(){this.initialized=!0,this.clear(),this.sync("splice",this.store.storage.allValues)}invalidate(){this.initialized=!1,zp.forEach((e=>this[e]=null))}matches(e){return this.dayTime.startShift===e.startShift}remove(e,n,r){const i=this[jp[e]][this.dayTime.dateKey(n)];i&&i.delete(r)}removeEvent(e,n,r){var i,o;let s,a=null==(i=this.dayTime.startOfDay(n))?void 0:i.getTime();if(a){s=null!=(o=null==r?void 0:r.getTime())?o:a,this.remove("startDate",a,e);do{this.remove("date",a,e),a+=Hp}while(a<s)}}sync(e,n,r,i,o){var s,a;r=r||Bp;const l=this,c=(n=n||Bp).length,d=r.length,u=null==i?void 0:i.length;let h,g,p;if(l.initialized)switch(e){case"clear":l.clear();break;case"splice":if(u)for(n=n.slice(),r=r.slice(),h=0;h<u;h++)r.push(i[h][0]),n.push(i[h][1]);if(d)for(h=0;h<d;h++)p=r[h],l.removeEvent(p,p.startDate,p.endDate);if(c)for(h=0;h<c;h++)g=n[h],g.isScheduled&&!g.isParent&&l.addEvent(g);break;case"reschedule":p=n[0],l.removeEvent(p,(null==(s=o.startDate)?void 0:s.oldValue)||p.startDate,(null==(a=o.endDate)?void 0:a.oldValue)||p.endDate),l.sync("splice",n)}}register(e){this.users.push(e)}unregister(e){const{users:n}=this,r=n.indexOf(e);return r>-1&&n.splice(r,1),!n.length}},Np=Vp.prototype;zp.forEach((e=>Np[e]=null)),Np.initialized=!1,Vp._$name="EventDayIndex";var{MIDNIGHT:qp}=Xl,DayIndexMixin_default=e=>{var n;return __publicField(n=class extends e{construct(e){super.construct(e),this.dayIndices=null}afterLoadData(){var e;this.syncIndices("splice",this.storage.allValues),null==(e=super.afterLoadData)||e.call(this)}onDataChange({action:e,added:n,removed:r,replaced:i}){this.syncIndices(e,n,r,i),super.onDataChange(...arguments)}onDataReplaced(e,n){this.syncIndices("clear"),this.syncIndices("splice",this.storage.values),super.onDataReplaced(e,n)}onModelChange(e,n,r,i,o){("startDate"in r||"endDate"in r)&&this.syncIndices("reschedule",[e],null,null,r),super.onModelChange(...arguments)}invalidateDayIndices(){var e;null==(e=this.dayIndices)||e.forEach((e=>e.invalidate()))}registerDayIndex(e){const n=this,r=n.dayIndices||(n.dayIndices=[]);let i,o;for(o=0;!i&&o<r.length;++o)r[o].matches(e)&&(i=r[o]).register(e);return!i&&r.push(i=new Vp(n,e)),i}syncIndices(...e){var n;null==(n=this.dayIndices)||n.forEach((n=>n.sync(...e)))}unregisterDayIndex(e){const{dayIndices:n}=this;for(let r=null==n?void 0:n.length;r-- >0;)if(n[r].matches(e)){n[r].unregister(e)&&n.splice(r,1);break}}useDayIndex(e){const n=this,{dayIndices:r}=n;e=e||qp;for(let n=0;r&&n<r.length;++n)if(r[n].matches(e))return r[n];if(e.startShift)throw new Error(`No day index registered for ${e} on ${n.id}`);return n.registerDayIndex(qp)}},"$name","DayIndexMixin"),n},SharedEventStoreMixin_default=e=>class SharedEventStoreMixin extends e{static get $name(){return"SharedEventStoreMixin"}static get defaultConfig(){return{loadPriority:100,syncPriority:200,storeId:"events",removeUnassignedEvent:!0,singleAssignment:null}}construct(e){if(super.construct(e,!0),this.singleAssignment&&(this.usesSingleAssignment=!0),!this.modelClass.isEventModel)throw new Error("The model for the EventStore must subclass EventModel")}append(e){return this.add(e)}get project(){return super.project}set project(e){var n;super.project=e,this.detachListeners("project"),e&&((null==(n=e.assignmentStore)?void 0:n.isAssignmentStore)&&this.attachToAssignmentStore(e.assignmentStore),e.ion({name:"project",assignmentStoreChange:"onProjectAssignmentStoreChange",thisObj:this,prio:200}))}get usesSingleAssignment(){return this.isChained?this.masterStore.usesSingleAssignment:this._usesSingleAssignment}set usesSingleAssignment(e){this._usesSingleAssignment=e}processRecords(e){var n;const{assignmentStore:r}=this,i=[];return r&&(r.skipInvalidateIndices=!0),e=super.processRecords(e,r&&!(null==(n=this.stm)?void 0:n.isRestoring)&&(e=>{const n=e.get("resourceId");e.reassignedFromReplace||null==n||r.includesAssignment(e.id,n)||i.push({id:r.modelClass.generateId(""),resourceId:n,eventId:e.id}),e.reassignedFromReplace=!1})||void 0),r&&(r.storage.invalidateIndices(),r.skipInvalidateIndices=!1,r.add(i)),e}joinRecordsToStore(e){const{assignmentStore:n}=this;n?(n.skipInvalidateIndices=!0,super.joinRecordsToStore(e),n.storage.invalidateIndices(),n.skipInvalidateIndices=!1):super.joinRecordsToStore(e)}processRecord(e,n=!1){const r=(e=super.processRecord(e,n)).get("resourceId");if(null!=r&&!e.meta.skipEnforcingSingleAssignment){const i=this,{assignmentStore:o}=i,s=i.getById(e.id);if(s&&s!==e&&!n){const n=o.find((n=>n.eventId===e.id));n&&(n.resource=r,e.reassignedFromReplace=!0)}else i.$processResourceIds=!0;i.usesSingleAssignment=!0}return e}processResourceIds(){var e,n,r;const i=this,o=null!=(n=i.assignmentStore)?n:null==(e=i.crudManager)?void 0:e.assignmentStore;if(i.$processResourceIds&&(null==o?void 0:o.isAssignmentStore)&&(!(null==(r=i.project)?void 0:r.isSharingAssignmentStore)||!i.isChained)){const e=[];i.forEach((n=>{const{resourceId:r,id:i}=n;null!=r&&e.push({id:o.modelClass.generateId(""),resourceId:r,eventId:i})})),o.useRawData={disableDefaultValue:!0,disableDuplicateIdCheck:!0,disableTypeConversion:!0},o.usesSingleAssignment=!1,o.verifyNoGeneratedIds=!1,o.data=e,o.usesSingleAssignment=!0,i.$processResourceIds=!1}}loadData(){super.loadData(...arguments),this.processResourceIds()}onBeforeRemoveAssignment({records:e}){var n;const r=this;if(r.removeUnassignedEvent&&!r.isRemoving&&!r.isSettingData&&!(null==(n=r.stm)?void 0:n.isRestoring)&&!r.usesSingleAssignment&&!r.assignmentStore.isSyncingDataOnLoad&&!r.resourceStore.isSyncingDataOnLoad){const n=new Set;e.forEach((r=>{const{event:i}=r;i&&!i.isRemoved&&i.assignments.every((n=>e.includes(n)))&&n.add(i)})),n.size&&r.remove([...n])}}onProjectAssignmentStoreChange({store:e}){this.attachToAssignmentStore(e)}attachToAssignmentStore(e){const n=this;n.detachListeners("assignmentStore"),e&&(n.processResourceIds(),e.ion({name:"assignmentStore",addPreCommit({records:e}){!n.usesSingleAssignment||n.isSettingData||n.isAssigning||e.forEach((e=>{const{event:n}=e;(null==n?void 0:n.isEvent)&&n.resourceId!==e.resourceId&&(n.meta.isAssigning=!0,n.set("resourceId",e.resourceId),n.meta.isAssigning=!1)}))},beforeRemove:"onBeforeRemoveAssignment",removePreCommit({records:e}){n.usesSingleAssignment&&e.forEach((e=>{var r;null==(r=n.getById(e.eventId))||r.set("resourceId",null)}))},removeAllPreCommit(){n.usesSingleAssignment&&!n.isSettingData&&n.allRecords.forEach((e=>e.set("resourceId",null)))},update({record:e,changes:r}){if(n.usesSingleAssignment&&"resourceId"in r){const{event:n}=e;n.meta.isAssigning=!0,n.set("resourceId",r.resourceId.value),n.meta.isAssigning=!1}},thisObj:n}))}set data(e){this.isSettingData=!0,!this.usesSingleAssignment||this.syncDataOnLoad||this.isChained||this.assignmentStore.removeAll(!0),super.data=e,this.isSettingData=!1}trigger(e,n){var r;const{changes:i}=n||{};return i&&"resourceId"in i&&1===Object.keys(i).length&&!(null==(r=this.stm)?void 0:r.isRestoring)&&(n.isAssign=!0),super.trigger(...arguments)}remove(e,...n){var r,i;const o=super.remove(e,...n);if(o.length&&this.usesSingleAssignment)for(const e of o)e.isOccurrence||null==(i=this.assignmentStore||(null==(r=this.crudManager)?void 0:r.assignmentStore))||i.remove(e.assignments,!0);return o}},Wp=Object.freeze([]),RecurringTimeSpansMixin_default=e=>class RecurringTimeSpansMixin extends(e||re){static get $name(){return"RecurringTimeSpansMixin"}construct(...e){this.globalOccurrences=new Map,this.recurringEvents=new Set,super.construct(...e)}afterLoadData(){this.globalOccurrences.clear(),this.refreshRecurringEventsCache("clear"),this.refreshRecurringEventsCache("splice",this.storage.allValues),super.afterLoadData&&super.afterLoadData()}onDataChange({action:e,added:n,removed:r,replaced:i}){this.refreshRecurringEventsCache(e,n,r,i),super.onDataChange(...arguments)}refreshRecurringEventsCache(e,n=Wp,r=Wp,i){const{recurringEvents:o}=this,s=null==i?void 0:i.length;switch(e){case"clear":o.clear();break;case"splice":{if(s){n=n.slice(),r=r.slice();for(let e=0;e<s;e++)r.push(i[e][0]),n.push(i[e][1])}const e=n.length,a=r.length;if(a&&o.size)for(let e=0;e<a;e++)o.delete(r[e]);if(e)for(let r=0;r<e;r++){const e=n[r];e.isRecurring&&o.add(e)}break}}}getById(e){let n=super.getById(e);return n||(n=this.globalOccurrences.get(this.modelClass.asId(e))),n}onModelChange(e,n,r,i,o){const s=!i&&this.isRecurrenceRelatedFieldChange(e,r);if(s&&e.removeOccurrences(),super.onModelChange(...arguments),s){const e={action:"batch",records:this.storage.values};this.trigger("refresh",e),this.trigger("change",e)}}isRecurrenceRelatedFieldChange(e,n){return e.isRecurring||"recurrenceRule"in n}getOccurrencesForTimeSpan(e,n,r){const i=[];return e.isRecurring&&e.recurrence.forEachOccurrence(n,r,(e=>i.push(e))),i}set data(e){this.globalOccurrences.clear(),super.data=e}getRecurringTimeSpans(){return[...this.recurringEvents]}},RecurringEventsMixin_default=e=>class RecurringEventsMixin extends(RecurringTimeSpansMixin_default(e||re)){static get $name(){return"RecurringEventsMixin"}getRecurringEvents(){return this.getRecurringTimeSpans()}isEventPersistable(e){return super.isEventPersistable(e)&&(!e.supportsRecurring||!e.isOccurrence)}},Up={startDate:1,endDate:1,constraintDate:1,deadlineDate:1},TimeZonedDatesMixin_default=e=>{var n;return __publicField(n=class extends(e||Gp){get timeZone(){return this.getData("timeZone")}set timeZone(e){this.setData("timeZone",e)}setLocalDate(e,n){this.set(e,null!=this.timeZone?ll.toTimeZone(n,this.timeZone):n,!0),this.data[e]=this[e]}getLocalDate(e){return null!=this.timeZone&&this[e]?ll.fromTimeZone(this[e],this.timeZone):this[e]}applyChangeset(e){if(null!=this.timeZone)for(const n in Up)e[n]&&(this.setLocalDate(n,new Date(e[n])),delete e[n]);return super.applyChangeset(...arguments)}getFieldPersistentValue(e){var n,r;if(null!=this.timeZone){const i=null!=(r=null!=(n=null==e?void 0:e.field)?n:null==e?void 0:e.name)?r:e;if(Up[i])return this.getLocalDate(i)}return super.getFieldPersistentValue(e)}convertToTimeZone(e){const n=this,r={...n.meta.modified},i={...Up};n.isTask&&!n.manuallyScheduled&&(delete i.startDate,delete i.endDate);for(const e in i)null!=n[e]?(i[e]=n[e],null!=n.timeZone&&(i[e]=n.getLocalDate(e),r[e]&&(r[e]=ll.fromTimeZone(r[e],n.timeZone)))):delete i[e];n.timeZone=e;for(const e in i)n.setLocalDate(e,i[e],!1),i[e]=1,null!=n.timeZone&&r[e]&&(r[e]=ll.toTimeZone(r[e],n.timeZone));n.clearChanges(!0,!0,i),Et.isEmpty(r)||(n.meta.modified=r,n.stores.forEach((e=>e.modified.add(n))))}},"$name","TimeZonedDatesMixin"),__publicField(n,"fields",[{name:"timeZone",persist:!1}]),n},Gp=class extends(Ur.mixin(TimeZonedDatesMixin_default)){static get $name(){return"TimeSpan"}static get fields(){return[{name:"startDate",type:"date"},{name:"endDate",type:"date"},{name:"duration",type:"number",allowNull:!0,internal:!0},{type:"durationunit",name:"durationUnit",defaultValue:"d",internal:!0},{name:"fullDuration",persist:!1,column:{type:"duration"}},{name:"cls",defaultValue:"",internal:!0},{name:"iconCls",internal:!0},{name:"style",type:"object",internal:!0},{name:"name",type:"string",defaultValue:""}]}construct(e,...n){if(null==e?void 0:e.fullDuration){const{magnitude:n,unit:r}=e.fullDuration;e.duration=n,e.unit=r,delete e.fullDuration}super.construct(e,...n),this.normalize()}get eventStore(){var e;const n=this;return n.isOccurrence?n.recurringTimeSpan.eventStore:(n._eventStore||(n._eventStore=null==(e=n.stores)?void 0:e.find((e=>e.isEventStore))),n._eventStore)}normalize(){const e=this,{startDate:n,endDate:r,duration:i,durationUnit:o}=e,s=null!=i;n&&r&&!s?e.setData("duration",Ct.diff(n,r,o,!0)):n&&!r&&s?e.setData("endDate",Ct.add(n,i,o)):!n&&r&&s&&e.setData("startDate",Ct.add(r,-i,o))}updateInternalCls(e){this._cls?this._cls.value=e:this._cls=new Xt(e)}set internalCls(e){this.updateInternalCls(e),this.set("cls",this._cls.value)}get internalCls(){const{cls:e}=this;return(null==e?void 0:e.isDomClassList)?e:(this.internalCls=e,this._cls)}get cls(){return this._cls||(this._cls=new Xt(super.get("cls"))),this._cls}set cls(e){this.internalCls=e}get startDate(){return this.get("startDate")}set startDate(e){this.setStartDate(e)}get endDate(){return this.get("endDate")}set endDate(e){this.setEndDate(e)}get endingDate(){const e=this,{endDate:n,startDate:r}=e;return n||Ct.add(r,e.duration,e.durationUnit)}get duration(){return this.get("duration")}set duration(e){this.setDuration(e,this.durationUnit)}get durationUnit(){return this.get("durationUnit")}setDuration(e,n=this.durationUnit){e=parseFloat(e),this.set({duration:e,durationUnit:n,...this.updateDatesFromDuration(e,n)})}updateDatesFromDuration(e,n,r=this.startDate,i=this.endDate){const o={};return r?o.endDate=Ct.add(r,e,n):i&&(o.startDate=Ct.add(i,-e,n)),o}getDurationInUnit(e,n){const r=this;return r.startDate&&r.endDate?Ct.getDurationInUnit(r.startDate,r.endDate,e,n):Ct.as(e,r.duration,r.durationUnit)}get fullDuration(){return new Gr({unit:this.durationUnit,magnitude:this.duration})}set fullDuration(e){"string"==typeof e&&(e=Ct.parseDuration(e,!0,this.durationUnit)),this.setDuration(e.magnitude,e.unit)}setStartDate(e,n=!0){const r=this,i={startDate:e};if(e){let o;if(n)o=null!=r.duration;else if(r.endDate){if(i.duration=Ct.diff(e,r.endDate,r.durationUnit,!0),i.duration<0)throw new Error("Negative duration")}else o=null!=this.duration;o&&(i.endDate=Ct.add(e,r.getDurationInUnit("h"),"h"))}else i.duration=null;r.set(i)}setEndDate(e,n=!1){const r=this,i={endDate:e};if(e){let o;if(!0===n)o=null!=r.duration;else if(r.startDate){if(i.duration=Ct.diff(r.startDate,e,r.durationUnit,!0),i.duration<0)throw new Error("Negative duration")}else o=null!=this.duration;o&&(i.startDate=Ct.add(e,-r.duration,r.durationUnit))}r.set(i)}setStartEndDate(e,n,r){this.set({startDate:e,endDate:n},null,r)}get dates(){const e=[],n=Ct.startOf(this.startDate,"day"),r=this.endDate;for(let i=n;i<r;i=Ct.add(i,1,"day"))e.push(i);return e}get startDateMS(){var e;return null==(e=this.batching&&this.hasBatchedChange("startDate")?this.get("startDate"):this.startDate)?void 0:e.getTime()}get endDateMS(){var e;return null==(e=this.batching&&this.hasBatchedChange("endDate")?this.get("endDate"):this.endDate)?void 0:e.getTime()}get durationMS(){const{endDateMS:e,startDateMS:n}=this;return e&&n?e-n:Ct.asMilliseconds(this.duration||0,this.durationUnit)}get isMilestone(){return 0===this.duration}inSetNormalize(e){if("string"!=typeof e){let{startDate:n,endDate:r,duration:i,durationUnit:o=this.durationUnit}=e;"string"==typeof n&&(n=this.getFieldDefinition("startDate").convert(n)),"string"==typeof r&&(r=this.getFieldDefinition("endDate").convert(r)),"duration"in e?(n&&!r&&(r=Ct.add(n,i,o,!0,!0)),!n&&r&&(n=Ct.add(r,-i,o,!0,!0))):n&&r&&(i=Ct.as(o,Ct.diff(n,r,"h",!0),"h"));const s=Object.isFrozen(e)?Et.clone(e):e;return n&&(s.startDate=n),r&&(s.endDate=r),null!=i&&(s.duration=i),s}}fieldToKeys(e,n){var r,i;const o=super.fieldToKeys(e,n);if(o.fullDuration){const{magnitude:e,unit:n}=o.fullDuration;o.duration=e,o.durationUnit=n}return this.isEventModel||this.isTaskModel||!("duration"in o)&&!o.durationUnit||o.startDate&&o.endDate||Object.assign(o,this.updateDatesFromDuration(null!=(r=o.duration)?r:this.duration,null!=(i=o.durationUnit)?i:this.durationUnit,o.startDate,o.endDate)),o}inSet(e,n,r,i,o,s){return o||(e=this.inSetNormalize(e)||e),super.inSet(e,n,r,i,o,s)}applyValue(e,n,r,i,o){"cls"===n&&this.updateInternalCls(r),"fullDuration"===n&&(this[n]=r),super.applyValue(e,n,r,i,o)}forEachDate(e,n){return this.dates.forEach(e.bind(n))}get isScheduled(){const{startDateMS:e,endDateMS:n}=this;return n-e>=0}get isValid(){const{startDate:e,endDate:n}=this;return!e||!n||n-e>=0}shift(e,n=this.durationUnit){if("string"==typeof e){const r=e;e=n,n=r}return this.setStartDate(Ct.add(this.startDate,e,n,!0),!0)}get wbsCode(){return this._wbsCode||this.indexPath.join(".")}set wbsCode(e){this._wbsCode=e}fullCopy(){return this.copy.apply(this,arguments)}intersects(e){return this.intersectsRange(e.startDate,e.endDate)}intersectsRange(e,n){const r=this.startDate,i=this.endDate;return r&&i&&Ct.intersectSpans(r,i,e,n)}split(e=.5){const n=this,r=n.copy(),{fullDuration:i,eventStore:o,assignmentStore:s}=n,a=new Gr(i),l=new Gr(i);let c,d;return"string"==typeof e?(c=new Gr(e),c.unit===a.unit?l.magnitude-=c.magnitude:(l.magnitude=Ct.as(c.unit,a)-c.magnitude,l.unit=c.unit,d=!0)):(c=new Gr(e>1?e:n.duration*e,n.durationUnit),l.magnitude-=c.magnitude),r.startDate=Ct.add(n.startDate,c.magnitude,c.unit),d?(r.fullDuration=l,n.fullDuration=c):(r.duration=l.magnitude,n.duration=c.magnitude),o&&(o.add(r),s&&!o.usesSingleAssignment&&s.add(n.assignments.map((e=>{const n=Object.assign({},e.data,{eventId:r.id,event:null,resource:null});return delete n.id,n})))),r}toICSString(e={}){if(!this.isScheduled)return"";const{startDate:n,endDate:r}=this,i=e.DTSTAMP||Ct.format(new Date,"uu");delete e.DTSTAMP;let o={};o=this.allDay?{"DTSTART;VALUE=DATE":Ct.format(n,"u"),"DTEND;VALUE=DATE":Ct.format(r,"u")}:{DTSTART:Ct.format(n,"uu"),DTEND:Ct.format(r,"uu")};const s={BEGIN:"VCALENDAR",VERSION:"2.0",CALSCALE:"GREGORIAN",PRODID:`-//Bryntum AB//Bryntum Scheduler ${A.scheduler&&A.getVersion("scheduler")||A.calendar&&A.getVersion("calendar")||""} //EN`,END:"VCALENDAR"},a={BEGIN:"VEVENT",UID:this.id+"@bryntum.com",CLASS:"PUBLIC",SUMMARY:this.name,DTSTAMP:i,...o,...this.recurrenceRule?{RRULE:this.recurrenceRule}:{},...e,END:"VEVENT"},l=Object.keys(s).map((e=>`${e}:${s[e]}`)),c=Object.keys(a).map((e=>`${e}:${a[e]}`));return l.splice(l.length-1,0,...c),l.join("\n")}exportToICS(e){if(this.isScheduled){const n=new Blob([this.toICSString(e)],{type:"text/calendar"});c.downloadBlob(n,(this.name||"Event")+".ics")}}isEditable(e){return!!this.getFieldDefinition(e)||void 0}isFieldModified(e){return"fullDuration"===e?super.isFieldModified("duration")||super.isFieldModified("durationUnit"):super.isFieldModified(e)}};Gp._$name="TimeSpan";var Yp=/^([+-]?[0-9])?(SU|MO|TU|WE|TH|FR|SA)$/,Kp=["SU","MO","TU","WE","TH","FR","SA"],Xp=class extends re{static decodeDay(e){let n,r;return(n=Yp.exec(e))&&(r=[Kp.indexOf(n[2])],n[1]&&(n[1]=parseInt(n[1],10),r.push(n[1]))),r}static encodeDay(e){let n;return Array.isArray(e)&&([e,n]=e),(n?n.toString():"")+Kp[e]}static decode(e){const n=[];let r;if(e)for(let i=0;i<e.length;i++)(r=this.decodeDay(e[i]))&&n.push(r);return n}static encode(e){const n=[];let r;if(e)for(let i=0;i<e.length;i++)(r=this.encodeDay(e[i]))&&n.push(r);return n}};Xp._$name="RecurrenceDayRuleEncoder";var Zp,Qp=/ly$/i,frequencyToUnit=e=>{const n=e.replace(Qp,"");return"DAI"===n?"DAY":n},fn=(e,n,r,i)=>i.buildOccurrence(e,r),captureLastOccurrence=e=>Zp=e,Jp=class extends re{static processIterationConfig(e){const{recurrence:n}=e,{frequency:r,interval:i,timeSpan:o,endDate:s,count:a}=n;if(!e.syncingStartDate&&!o.meta.isSyncedWithRule){const s=Ct.add(o.startDate,i,frequencyToUnit(r)),a=Ct.min(s,e.endDate||s);this.forEachDate({syncingStartDate:!0,startDate:o.startDate,endDate:a,recurrence:n,fn})}const l=o.startDate;let{startDate:c=l,endDate:d=s}=e;c<l&&(c=l),s?(!d||d>s)&&(d=s):a&&c>l&&(this.forEachDate({recurrence:n,fn:captureLastOccurrence}),(!d||d>Zp)&&(d=new Date(Zp.getTime()+1)));const u=c;return e.startOnly||(c=new Date(Ct.max(Ct.add(c,-i,frequencyToUnit(r)),l))),Object.assign({extraArgs:[],startOnly:!Boolean(o.durationMS)},e,{startDate:c,endDate:d,timeSpan:o,timeSpanStart:l,earliestVisibleDate:u,endDateMS:null==d?void 0:d.getTime(),timeSpanStartMS:l.getTime(),earliestVisibleDateMS:u.getTime(),durationMS:o.durationMS,spansStart:c<=l&&d>l})}static getOccurrenceIndex(e){if(e.isOccurrence)return Ct.diff(e.recurringTimeSpan.startDate,e.startDate,frequencyToUnit(e.recurringTimeSpan.recurrence.frequency))}static getNthDayInPeriod(e,n,r,i){let o,s,a;if(i){i>0?(s=1,a=e):(s=-1,a=n);const l=r-a.getDay();s*l<0&&(i+=s),o=new Date(a),o.setDate(a.getDate()+7*(i-s)+l),(o<e||o>n)&&(o=null)}return o}static buildDate(e,n,r){const i=new Date(e,n,r);if(i.getFullYear()===e&&i.getMonth()===n&&i.getDate()===r)return i}static isValidPosition(e){return Boolean(e)}static forEachDateAtPositions(e,n,r,i){const o=e.length,s={};for(let a=0;a<n.length;a++){const l=n[a];if(this.isValidPosition(l)){const n=l>0?e[l-1]:e[o+l];if(n&&!s[n.getTime()]&&(s[n.getTime()]=!0,!1===r.call(i,n)))return!1}}}static isInView(e,n,r,i,o){return(e?n>=r:n.valueOf()+i>r)&&!o.hasException(n)}static isInViewMS(e,n,r,i,o,s){return(e?r>=i:r+o>i)&&!s.hasException(n)}};__publicField(Jp,"frequency","NONE"),__publicField(Jp,"MAX_OCCURRENCES_COUNT",1e6),Jp._$name="AbstractRecurrenceIterator";var em=class extends Jp{static forEachDate(e){const{startOnly:n,startDate:r,endDate:i,endDateMS:o,timeSpan:s,timeSpanStart:a,earliestVisibleDateMS:l,durationMS:c,spansStart:d,recurrence:u,fn:h,extraArgs:g,scope:p=this}=this.processIterationConfig(e),{interval:m}=u,f=r-a,b=864e5*m,v=Math.floor(f/b);let{count:y}=u,w=0,C=Ct.add(a,v*m,"day"),S=C.getTime();for(i||y||(y=this.MAX_OCCURRENCES_COUNT);!o||S<o;){if(w++,this.isInViewMS(n,C,S,l,c,s)&&(o&&S>o||!1===h.apply(p,[C,w,1===w&&d,s,...g])||y&&w>=y))break;C=Ct.add(C,m,"day"),S=C.getTime()}}};__publicField(em,"frequency","DAILY"),em._$name="DailyRecurrenceIterator";var tm=class extends Jp{static forEachDate(e){const{startOnly:n,startDate:r,endDateMS:i,timeSpan:o,timeSpanStart:s,timeSpanStartMS:a,earliestVisibleDateMS:l,durationMS:c,spansStart:d,recurrence:u,fn:h,extraArgs:g,scope:p=this}=this.processIterationConfig(e),{interval:m,days:f}=u,{weekStartDay:b}=Ct,v=s.getHours(),y=s.getMinutes(),w=s.getSeconds(),C=s.getMilliseconds();let S,x,D=0,{count:E}=u,R=Xp.decode(f);if((null==R?void 0:R.length)||(R=[[s.getDay()]]),b>0)for(let e=0;e<R.length;e++)b>R[e][0]?R[e][0]=7-b-R[e][0]:R[e][0]-=b;for(R.sort(((e,n)=>e[0]-n[0])),S=Ct.getNext(E||m>1?s:r,"week",0),i||E||(E=this.MAX_OCCURRENCES_COUNT);!i||S.getTime()<i;){for(let e=0;e<R.length;e++){x=new Date(S.getFullYear(),S.getMonth(),S.getDate()+R[e][0],v,y,w,C);const r=x.getTime();if(r>=a){if(D++,this.isInViewMS(n,x,r,l,c,o)&&(i&&r>=i||!1===h.apply(p,[x,D,1===D&&d,o,...g])||E&&D>=E))return}}S=Ct.getNext(S,"week",m)}}};__publicField(tm,"frequency","WEEKLY"),tm._$name="WeeklyRecurrenceIterator";var nm=class extends Jp{static getNthDayOfMonth(e,n){const r=Ct.daysInMonth(e);let i=null;return n&&Math.abs(n)<=r&&(i=new Date(e.getFullYear(),e.getMonth(),n<0?r+n+1:n)),i}static isValidPosition(e){return e&&Math.abs(e)>0&&Math.abs(e)<=31}static forEachDate(e){const{startOnly:n,startDate:r,endDate:i,timeSpan:o,timeSpanStart:s,earliestVisibleDate:a,durationMS:l,spansStart:c,recurrence:d,fn:u,extraArgs:h,scope:g=this}=this.processIterationConfig(e),{interval:p,days:m,count:f,positions:b}=d,v=Xp.decode(m),y=b&&b.length,w={};let C,S,x,D,E,R,{monthDays:k}=d,T=0;for(S=Ct.startOf(f||p>1?s:r,"month"),x=new Date(Ct.getNext(S,"month",1)-1),k&&k.length||v&&v.length||(k=[s.getDate()]),v&&v.length&&v.forEach((e=>{e[1]&&(C=C||{},C[e[0]]=e[1])}));(!i||i>S)&&(!f||T<f);){if(D=[],v&&v.length){if(v.forEach((e=>{const n=e[0];let r=1,i=53;for(e[1]&&(r=i=e[1]),R=r;R<=i;R++)(E=this.getNthDayInPeriod(S,x,n,R))&&(E=Ct.copyTimeValues(E,s),w[E.getTime()]||(w[E.getTime()]=!0,D.push(E)))})),D.sort(((e,n)=>e-n)),!y)for(R=0;R<D.length;R++)if(E=D[R],E>=s){const e=this.isInView(n,E,a,l,o);if(T++,e&&(i&&E>=i||!1===u.apply(g,[E,T,1===T&&c,o,...h])||f&&T>=f))return!1}}else{const e=[];for(R=0;R<k.length;R++)(E=this.getNthDayOfMonth(S,k[R]))&&!w[E.getTime()]&&(w[E.getTime()]=!0,e.push(E));for(e.sort(((e,n)=>e-n)),R=0;R<e.length;R++)if(E=Ct.copyTimeValues(e[R],s),y)D.push(E);else if(E>=s){const e=this.isInView(n,E,a,l,o);if(T++,e&&(i&&E>i||!1===u.apply(g,[E,T,1===T&&c,o,...h])||f&&T>=f))return}}y&&D.length&&this.forEachDateAtPositions(D,b,(e=>{if(e>=s){const r=n?e>=a:e.valueOf()+l>a&&!o.hasException(e);if(T++,r&&(!i||e<=i)&&(!1===u.apply(g,[e,T,1===T&&c,o,...h])||f&&T>=f))return!1}})),S=Ct.getNext(S,"month",p),x=new Date(Ct.getNext(S,"month",1)-1)}}};__publicField(nm,"frequency","MONTHLY"),nm._$name="MonthlyRecurrenceIterator";var rm=class extends Jp{static forEachDate(e){const{startOnly:n,startDate:r,endDate:i,timeSpan:o,timeSpanStart:s,earliestVisibleDate:a,durationMS:l,spansStart:c,recurrence:d,fn:u,extraArgs:h,scope:g=this}=this.processIterationConfig(e),{interval:p,days:m,count:f,positions:b}=d,v=Xp.decode(m),y=b&&b.length,w={};let C,S,x,D,E,R,{months:k}=d,T=0;for(D=Ct.startOf(f||p>1?s:r,"year"),E=new Date(Ct.getNext(D,"year",1)-1),k&&k.sort(((e,n)=>e-n)),k&&k.length||v&&v.length||(k=[s.getMonth()+1]),v&&v.length&&v.forEach((e=>{e[1]&&(R=R||{},R[e[0]]=e[1])}));(!i||i>D)&&(!f||T<f);){if(x=[],v&&v.length){if(v.forEach((e=>{const n=e[0];let r=1,i=53;for(e[1]&&(r=i=e[1]),C=r;C<=i;C++)(S=this.getNthDayInPeriod(D,E,n,C))&&(S=Ct.copyTimeValues(S,s),w[S.getTime()]||(w[S.getTime()]=!0,x.push(S)))})),x.sort(((e,n)=>e-n)),!y)for(C=0;C<x.length;C++)if(S=x[C],S>=s){const e=this.isInView(n,S,a,l,o);if(T++,e&&(i&&S>=i||!1===u.apply(g,[S,T,1===T&&c,o,...h])||f&&T>=f))return}}else for(C=0;C<k.length;C++)if((S=this.buildDate(D.getFullYear(),k[C]-1,s.getDate()))&&(S=Ct.copyTimeValues(S,s),!w[S.getTime()]))if(w[S.getTime()]=!0,y)x.push(S);else if(S>=s){const e=n?S>=a:S.valueOf()+l>a&&!o.hasException(S);if(T++,e&&(i&&S>=i||!1===u.apply(g,[S,T,1===T&&c,o,...h])||f&&T>=f))return}y&&x.length&&this.forEachDateAtPositions(x,b,(e=>{if(e>=s){const r=n?e>=a:e.valueOf()+l>a&&!o.hasException(e);if(T++,r&&(!i||e<i)&&(!1===u.apply(g,[e,T,1===T&&c,o,...h])||f&&T>=f))return!1}})),D=Ct.getNext(D,"year",p),E=new Date(Ct.getNext(D,"year",1)-1)}}};__publicField(rm,"frequency","YEARLY"),rm._$name="YearlyRecurrenceIterator";var im={};function convertStringOfIntegerItemsValue(e){return e?"string"==typeof e&&(e=e.split(",").map((e=>parseInt(e,10)))):e=null,e}function convertStringOfItemsValue(e){return e?"string"==typeof e&&(e=e.split(",")):e=null,e}function isEqualAsString(e,n){return String(e)===String(n)}function convertInteger(e){return this.defaultValue&&void 0===e?this.defaultValue:this.allowNull&&null==e?null:(e=parseInt(e),isNaN(e)?void 0:e)}[em,tm,nm,rm].forEach((e=>{im[e.frequency]=e}));var om=class extends Ur{static get $name(){return"RecurrenceModel"}get isRecurrenceModel(){return!0}static get fields(){return[{name:"frequency",defaultValue:"DAILY"},{name:"interval",defaultValue:1,convert:convertInteger},{name:"endDate",type:"date"},{name:"count",allowNull:!0,convert:convertInteger},{name:"days",convert:convertStringOfItemsValue,isEqual:isEqualAsString},{name:"monthDays",convert:convertStringOfIntegerItemsValue,isEqual:isEqualAsString},{name:"months",convert:convertStringOfIntegerItemsValue,isEqual:isEqualAsString},{name:"positions",convert:convertStringOfIntegerItemsValue,isEqual:isEqualAsString}]}get dateFormat(){return this._dateFormat||"YYYYMMDDTHHmmss"}set dateFormat(e){this._dateFormat=e}get recurrenceIterator(){return im[this.frequency]}get timeSpan(){return this._timeSpan}set timeSpan(e){this._timeSpan=e}get rule(){const e=this,n=[];return e.frequency&&(n.push(`FREQ=${e.frequency}`),e.interval>1&&n.push(`INTERVAL=${e.interval}`),e.days&&e.days.length&&n.push("BYDAY="+e.days.join(",")),e.monthDays&&e.monthDays.length&&n.push("BYMONTHDAY="+e.monthDays.join(",")),e.months&&e.months.length&&n.push("BYMONTH="+e.months.join(",")),e.count&&n.push(`COUNT=${e.count}`),e.endDate&&n.push("UNTIL="+Ct.format(e.endDate,e.dateFormat)),e.positions&&e.positions.length&&n.push("BYSETPOS="+e.positions.join(","))),n.join(";")}set rule(e){const n=this,r={frequency:null,interval:null,count:null,endDate:null,days:null,monthDays:null,months:null,positions:null};if(n.beginBatch(),e){const i=e.split(";");for(let e=0,o=i.length;e<o;e++){const o=i[e].split("="),s=o[1];switch(o[0]){case"FREQ":r.frequency=s;break;case"INTERVAL":r.interval=s;break;case"COUNT":r.count=s,r.until=null;break;case"UNTIL":r.endDate=s?Ct.parse(s,n.dateFormat):null,r.count=null;break;case"BYDAY":r.days=s;break;case"BYMONTHDAY":r.monthDays=s;break;case"BYMONTH":r.months=s;break;case"BYSETPOS":r.positions=s}}}n.set(r),e&&n.sanitize(),n.endBatch()}construct(e={}){const n=this,{rule:r,timeSpan:i}=e;n._suspendedTimeSpanNotifying=0,delete e.timeSpan,delete e.rule,super.construct(...arguments),r&&(n.suspendTimeSpanNotifying(),n.rule=r,n.resumeTimeSpanNotifying()),n.timeSpan=i}forEachOccurrence(e,n,r){this.timeSpan.startDate&&this.recurrenceIterator.forEachDate({recurrence:this,startDate:e,endDate:n,fn:(e,n,i,o)=>r(o.buildOccurrence(e,i),i,n,e)})}sanitize(){var e,n;const r=this,i=null==(e=r.timeSpan)?void 0:e.startDate,o={};switch(r.isSanitizing=!0,r.frequency){case"DAILY":o.positions=null,o.days=null,o.monthDays=null,o.months=null;break;case"WEEKLY":{o.positions=null,o.monthDays=null,o.months=null;const{days:e}=r;i&&1===(null==e?void 0:e.length)&&e[0]===Xp.encodeDay(i.getDay())&&(o.days=null);break}case"MONTHLY":{(null==(n=r.monthDays)?void 0:n.length)&&(o.positions=null,o.days=null),o.months=null;const{monthDays:e}=r;i&&1===(null==e?void 0:e.length)&&e[0]===i.getDate()&&(o.monthDays=null);break}case"YEARLY":{o.monthDays=null;const{months:e}=r;i&&1===(null==e?void 0:e.length)&&e[0]===i.getMonth()+1&&(o.months=null);break}}r.set(o),r.isSanitizing=!1}copy(...e){const n=super.copy(...e);return n.dateFormat=this.dateFormat,n.timeSpan=this.timeSpan,n}afterChange(e,n,r){const i=super.afterChange(e,n,r),{timeSpan:o}=this;return this.isSanitizing||this.sanitize(),o&&(o.sanitizeRecurrenceData(this),this.isTimeSpanNotifyingSuspended||o.onRecurrenceChanged()),i}set(e,n,...r){const i="object"==typeof e?e:{[e]:n};i.count?i.endDate=null:i.endDate&&(i.count=null),super.set(i,void 0,...r)}get isTimeSpanNotifyingSuspended(){return Boolean(this._suspendedTimeSpanNotifying)}suspendTimeSpanNotifying(){this._suspendedTimeSpanNotifying++}resumeTimeSpanNotifying(){this._suspendedTimeSpanNotifying&&this._suspendedTimeSpanNotifying--}};function convertExceptionDatesValue(e){const n={},{dateFormat:r}=this;return e&&(e="string"==typeof e?e.split(","):oe.asArray(e)).forEach((e=>{"string"==typeof e&&(e=Ct.parse(e,r)),isNaN(e)||(n[Ct.makeKey(e)]=1)})),n}function serializeExceptionDatesValue(e){const n=[],{dateFormat:r}=this;for(const i in e)e[i]&&n.push(Ct.format(Ct.parseKey(i),r));return n}om._$name="RecurrenceModel";var sm=[],RecurringTimeSpan_default=e=>class RecurringTimeSpan extends(e||Gp){static get $name(){return"RecurringTimeSpan"}get supportsRecurring(){return!0}static get fields(){return[{name:"recurrenceRule",internal:!0},{name:"exceptionDates",convert:convertExceptionDatesValue,serialize:serializeExceptionDatesValue,internal:!0}]}remove(){if(!this.isOccurrence)return super.remove(...arguments);{const e=this,{recurringTimeSpan:n}=e;e.cancelBatch(),n.beginBatch(),e.detachFromRecurringEvent(),n.endBatch()}}get eventStore(){var e;let n=this.isOccurrence?this.recurringEvent.eventStore:super.eventStore;return!n&&(null==(e=this.firstStore)?void 0:e.isRecurringTimeSpansMixin)&&(n=this.firstStore),n}get recurrenceModel(){return this._recurrenceModel||om}set recurrenceModel(e){this._recurrenceModel=e}setRecurrence(e,n,r){const i=this;let o;e&&(e.isRecurrenceModel||("string"==typeof e&&(e={frequency:e},n&&(e.interval=n),r&&(r instanceof Date?e.endDate=r:e.count=r)),e=new i.recurrenceModel(e)),e.timeSpan=i,o=e.rule),i.recurrence=e,i.recurrenceRule=o}get recurrence(){const e=this,n=e.recurrenceRule;return!e._recurrence&&n&&(e._recurrence=new e.recurrenceModel({rule:n,timeSpan:e,id:`${e.id}-recurrence`})),e._recurrence}set recurrence(e){const n=this;n._recurrence=e,e?(e.timeSpan=n,n.recurrenceRule=e.rule):n.isOccurrence?n.setData("recurrenceRule",null):n.recurrenceRule=null}get isRecurring(){return Boolean(!this.isOccurrence&&this.recurrence)}get isOccurrence(){return Boolean(this.recurringTimeSpan)}get recurringTimeSpan(){return this._recurringTimeSpan}get isPersistable(){return super.isPersistable&&(!this.supportsRecurring||!this.isOccurrence)}set recurringTimeSpan(e){this._recurringTimeSpan=e}getOccurrencesForDateRange(e,n=e){return this.eventStore.getOccurrencesForTimeSpan(this,e,n)}get occurrences(){if(this.isRecurring){const e=[];return this.occurrenceMap.forEach((n=>{n!==this&&e.push(n)})),e}return sm}get occurrenceMap(){return this._occurrencesMap||(this._occurrencesMap=new Map)}removeOccurrence(e){var n;const r=e.isTimeSpan?e.occurrenceDate:e;null==(n=this.eventStore)||n.globalOccurrences.delete(this.createRecurrenceKey(r)),this.occurrenceMap.delete(Ct.makeKey(r))}removeOccurrencesFrom(e){this.occurrenceMap.forEach(((n,r)=>{Ct.parseKey(r)>=e&&this.removeOccurrence(n)}))}removeOccurrences(){[this,...this.occurrences].forEach((e=>this.removeOccurrence(e)))}onRecurrenceChanged(){var e;this.recurrenceRule=(null==(e=this.recurrence)?void 0:e.rule)||null}sanitizeRecurrenceData(e=this.recurrence){if(e.endDate){const n=Ct.clearTime(e.endDate),{exceptionDates:r}=this;if(this.removeOccurrencesFrom(n),r)for(const e in r){Ct.parseKey(e)>=n&&delete r[e]}}}get occurrenceDate(){var e;return(null==(e=this.meta.modified)?void 0:e.startDate)||this.startDate}get occurrenceIndex(){return Jp.getOccurrenceIndex(this)}buildOccurrence(e,n){var r;const i=this,{occurrenceMap:o,recurrence:s,meta:a}=i,l=null==(r=i.eventStore)?void 0:r.globalOccurrences,c=Ct.makeKey(e),d=i.createRecurrenceKey(e,c),u=!(e-i.startDate),{fieldMap:h}=i.constructor;let g=null==l?void 0:l.get(d),{duration:p}=i;!i.endDate||!i.allDay&&p||(p=Ct.as(i.durationUnit,i.endDate.getTime()-i.startDate.getTime()));const m=void 0!==p?Ct.add(e,p,i.durationUnit):void 0;return g||(n||u?(g=i,u||(i.setStartEndDate(e,m,!0),s.suspendTimeSpanNotifying(),s.sanitize(),s.resumeTimeSpanNotifying()),a.isSyncedWithRule=!0):(g=i.copy({[h.id.dataSource]:d,[h.startDate.dataSource]:e,[h.endDate.dataSource]:m,[h.duration.dataSource]:p,constraintDate:null,constraintType:null},{creatingOccurrence:!0}),g.recurringTimeSpan=i),null==l||l.set(d,g),o.set(c,g)),g}createRecurrenceKey(e=this.startDate,n=null){return`_generated:${this.id}:${n||Ct.makeKey(e)}`}convertToRealEvent(e,n){var r;if(!this.isOccurrence)return;const i=this,{recurringTimeSpan:o,resource:s,occurrenceIndex:a,recurrence:l}=i,c=l&&o.recurrence.count,d=(null==(r=null==e?void 0:e.resourceRecords)?void 0:r.value)||i.data.newResource;o.beginBatch(),i.detachFromRecurringEvent(),i.clearChanges(),i.setData("id",i.generateId(o.eventStore)),d&&delete i.data.resourceId,o.eventStore.add(i,n),c&&(i.recurrence.count=c-a),(d||s)&&i.assign(d||s),d&&delete i.data.resourceRecords,e&&delete e.resourceRecords,o.endBatch()}afterChange(e,n,r,...i){const o=this,{eventStore:s}=o;return"recurrenceRule"in n&&(o._recurrence=null,null==s||s.recurringEvents[n.recurrenceRule.value?"add":"delete"](o)),o.isOccurrence?o.convertToRealEvent(n,r):"newExceptionDate"in n&&(o.meta.modified.exceptionDates=!0,delete o.meta.modified.newExceptionDate,o.removeOccurrence(n.newExceptionDate.value)),super.afterChange(e,n,r,...i)}detachFromRecurringEvent(){const e=this,{recurringTimeSpan:n,occurrenceDate:r,startDate:i}=e;e.recurringTimeSpan=null,n.addExceptionDate(r),e.recurrenceRule&&(n.recurrence.endDate=Ct.add(i,-1,"minute"))}set newExceptionDate(e){if(e){(this.exceptionDates||(this.exceptionDates={}))[Ct.makeKey(e)]=1}}addExceptionDate(e){return this.set({newExceptionDate:e})}hasException(e){var n;return null==(n=this.exceptionDates)?void 0:n[Ct.makeKey(e)]}},EventModelMixin_default=e=>class EventModelMixin extends e{static get $name(){return"EventModelMixin"}static get isEventModel(){return!0}static get fields(){return[{name:"resourceId",internal:!0},{name:"resources",column:{type:"resourceassignment"},persist:!1,internal:!0},{name:"draggable",type:"boolean",persist:!1,defaultValue:!0,internal:!0},{name:"resizable",persist:!1,defaultValue:!0,internal:!0},{name:"allDay",type:"boolean",defaultValue:!1},{name:"eventStyle",internal:!0},{name:"eventColor",internal:!0},{name:"milestoneWidth",internal:!0},{name:"stickyContents",internal:!0}]}updateAssignmentEventIds(){this.assigned.forEach((e=>{e.eventId=this.id}))}syncId(e){super.syncId(e),this.updateAssignmentEventIds()}get resources(){return this.assignments.reduce(((e,{resource:n})=>(n&&e.push(n.$original),e)),[])}set resources(e){e=oe.asArray(e);const n=this,r=e.map(n.constructor.asId);if(n.usesSingleAssignment)n.set("resourceId",r[0]);else{const e=n.assignments.map((e=>e.resource.id)),{onlyInA:i,onlyInB:o}=oe.delta(r,e);n.assignmentStore.add(i.map((e=>({resource:e,event:n})))),n.assignmentStore.remove(o.map((e=>n.assignments.find((n=>n.resource.id===e)))))}}forEachResource(e,n=this){for(const r of this.resources)if(!1===e.call(n,r))return}getResource(e){return null==e?this.resource:this.resourceStore?this.resourceStore.getById(e):null}get startDate(){var e;let n;return n=this.isOccurrence?this.get("startDate"):null!=(e=this._startDate)?e:super.startDate,this.allDay&&(n=this.constructor.getAllDayStartDate(n)),n}set startDate(e){this.batching?(this._startDate=e,this.set({startDate:e})):super.startDate=e}get endDate(){var e;let n;return n=this.isOccurrence?this.get("endDate"):null!=(e=this._endDate)?e:super.endDate,this.allDay&&(n=this.constructor.getAllDayEndDate(n)),n}set endDate(e){this.batching?(this._endDate=e,this.set({endDate:e})):super.endDate=e}get wrapStartDate(){return this.startDate}set wrapStartDate(e){}get wrapEndDate(){return this.endDate}set wrapEndDate(e){}get isEvent(){return!0}get isDraggable(){return!this.readOnly&&this.draggable}get isResizable(){return!this.isMilestone&&(!this.isParent||this.manuallyScheduled)&&this.resizable}get isPersistable(){return super.isPersistable&&!this.isCreating}endBatch(){const e=this,{isPersistable:n,meta:{batchChanges:r}}=e;if(r&&("endDate"in r&&(delete e._endDate,e.postamble&&(e.wrapEndDate=null)),"startDate"in r&&(delete e._startDate,e.preamble&&(e.wrapStartDate=null))),super.endBatch(...arguments),e.isPersistable&&!n&&!e.ignoreBag&&e.assigned)for(const n of e.assigned)n.stores.forEach((e=>e.updateModifiedBagForRecord(n)))}get isCreating(){return super.isCreating}set isCreating(e){super.isCreating=e,this.assignments.forEach((n=>n.isCreating=e))}get usesSingleAssignment(){return!this.eventStore||this.eventStore.usesSingleAssignment}copy(...e){const n=super.copy(...e);return this.usesSingleAssignment||(n.resourceId=null),n}get persistableData(){const e=super.persistableData;return this.usesSingleAssignment||delete e.resourceId,e}get resource(){const{resources:e}=this;return e.length?e[0]:null}set resource(e){this.resourceId=this.constructor.asId(e)}get resourceId(){var e;return this.usesSingleAssignment?this.get("resourceId"):null==(e=this.resource)?void 0:e.id}set resourceId(e){this.applyResourceId(e)}get $linkedResources(){var e,n;return null!=(n=null==(e=this.resources)?void 0:e.flatMap((e=>[e,...e.$links])))?n:[]}applyResourceId(e,n=!1){var r;const i=this,{eventStore:o,assignments:s}=i;if(o){const n=o.assignmentStore||(null==(r=o.crudManager)?void 0:r.assignmentStore);if(null!=e)if(i.meta.skipEnforcingSingleAssignment||(o.usesSingleAssignment=!0),(null==s?void 0:s.length)&&e!==s[0].resourceId){const r=Boolean(o.eventsSuspended);r&&n.suspendEvents(),s[0].resource=e,r&&n.resumeEvents()}else n.assignEventToResource(i,e);else n.remove(s)}else n||i.set({resourceId:e})}applyValue(e,n,r,i,o){if(o&&"resourceId"===o.name&&!this.meta.isAssigning){const{eventStore:e}=this;e&&(e.isAssigning=!0),this.applyResourceId(r,!0),e&&(e.isAssigning=!1)}super.applyValue(e,n,r,i,o)}get assignments(){return[...this.assigned||[]]}assign(e,n=!1){const{eventStore:r}=this;r&&!r.usesSingleAssignment?r.assignEventToResource(this,e,n):(this.resourceId=this.constructor.asId(e),r||(this.meta.skipEnforcingSingleAssignment=!0))}unassign(e,n=!1){var r;const i=this;e=i.constructor.asId(e),i.meta.removingResource=n,null==(r=i.eventStore)||r.unassignEventFromResource(i,e),i.meta.removingResource=null}reassign(e,n){this.eventStore&&this.eventStore.reassignEventFromResourceToResource(this,e,n)}isAssignedTo(e){const n=this.constructor.asId(e);return this.assignments.some((e=>e.resourceId===n))}get predecessors(){var e;return[...null!=(e=this.incomingDeps)?e:[]]}get successors(){var e;return[...null!=(e=this.outgoingDeps)?e:[]]}get dependencies(){var e,n;return[...null!=(e=this.incomingDeps)?e:[],...null!=(n=this.outgoingDeps)?n:[]]}normalize(){}inSetNormalize(){}get recurringEvent(){return this.recurringTimeSpan}get isInterDay(){const{durationMS:e}=this;if(e>=864e5||!e&&this.allDay)return!0;const{endDate:n,startDate:r}=this,i=Ct.clearTime(r);return r&&n?(i.setDate(i.getDate()+1),(n||Ct.add(r,e))>i):void 0}static getAllDayStartDate(e){return e&&e.isEvent&&(e=e.get("startDate")),e&&(e=Ct.clearTime(e,!0)),e}static getAllDayEndDate(e){return e&&e.isEvent&&(e=e.get("endDate")),e&&(e.getHours()>0||e.getMinutes()>0||e.getSeconds()>0||e.getMilliseconds()>0)&&(e=Ct.getNext(e,"d",1)),e}static getAllDayDisplayStartDate(e){return e&&e.isEvent&&(e=e.get("startDate")),Ct.clearTime(e,!0)}static getAllDayDisplayEndDate(e,n){return e&&e.isEvent&&(n=e.get("endDate"),e=e.get("startDate")),n&&(e=this.constructor.getAllDayDisplayStartDate(e),Ct.clearTime(n,!0).valueOf()===n.valueOf()?n=Ct.add(n,Ct.DAY,-1):e.valueOf()!==n.valueOf()&&(n=Ct.clearTime(n,!0))),n}isEditable(e){switch(e){case"endDate":case"duration":case"fullDuration":return this.isLeaf}return super.isEditable(e)}},am=dp,lm=class extends(am.derive(Gp).mixin(RecurringTimeSpan_default,PartOfProject_default,EventModelMixin_default)){static get $name(){return"EventModel"}};lm.exposeProperties(),lm._$name="EventModel";var cm=PartOfProject_default(up.derive(Ci)),dm=class extends(cm.mixin(SharedEventStoreMixin_default,RecurringEventsMixin_default,EventStoreMixin_default,DayIndexMixin_default,GetEventsMixin_default)){static get defaultConfig(){return{modelClass:lm}}};__publicField(dm,"$name","EventStore"),dm._$name="EventStore";var um=["SS","SF","FS","FF"],hm=class extends Ur{static get $name(){return"DependencyBaseModel"}static get Type(){return{StartToStart:0,StartToEnd:1,EndToStart:2,EndToEnd:3}}static get fields(){return[{name:"from"},{name:"to"},{name:"type",type:"int",defaultValue:2},{name:"cls",defaultValue:""},{name:"bidirectional",type:"boolean"},{name:"fromSide",type:"string"},{name:"toSide",type:"string"},{name:"lag",type:"number",allowNull:!0,defaultValue:0},{name:"lagUnit",type:"string",defaultValue:"d"},{name:"highlighted",persist:!1,internal:!0}]}construct(e){const n=e[this.fieldMap.from.dataSource],r=e[this.fieldMap.to.dataSource];null!=n&&(e.fromEvent=n),null!=r&&(e.toEvent=r),super.construct(...arguments)}get eventStore(){var e;return this.eventStore||(null==(e=this.unjoinedStores[0])?void 0:e.eventStore)}set from(e){const{fromEvent:n}=this;(null==n?void 0:n.isModel)&&n.id===e?this.set("from",e):this.fromEvent=e}get from(){return this.get("from")}set to(e){const{toEvent:n}=this;(null==n?void 0:n.isModel)&&n.id===e?this.set("to",e):this.toEvent=e}get to(){return this.get("to")}get hardType(){return this.getHardType()}set hardType(e){this.setHardType(e)}getHardType(){return this.get("type")}setHardType(e){let n;return e!==this.hardType&&(n=this.set({type:e,fromSide:null,toSide:null})),n}get lag(){return this.get("lag")}set lag(e){this.setLag(e)}setLag(e,n=this.lagUnit){1!==arguments.length?(e=parseFloat(e),this.set({lag:e,lagUnit:n})):"number"==typeof e?this.lag=e:(e=Ct.parseDuration(e),this.set({lag:e.magnitude,lagUnit:e.unit}))}getLag(){return this.lag?`${this.lag<0?"-":"+"}${Math.abs(this.lag)}${Ct.getShortNameOfUnit(this.lagUnit)}`:""}get fullLag(){return new Gr({unit:this.lagUnit,magnitude:this.lag})}set fullLag(e){"string"==typeof e?this.setLag(e):this.setLag(e.magnitude,e.unit)}get isPersistable(){const e=this,{stores:n,unjoinedStores:r}=e,i=n[0];let o;if(i){const{fromEvent:n,toEvent:r}=e,s=i.crudManager;o=n&&(s||!n.hasGeneratedId)&&r&&(s||!r.hasGeneratedId)}else o=Boolean(r[0]);return o&&super.isPersistable}getDateRange(){const{fromEvent:e,toEvent:n}=this;if((null==e?void 0:e.isScheduled)&&(null==n?void 0:n.isScheduled)){const r=hm.Type;let i,o;switch(this.type){case r.StartToStart:i=e.startDateMS,o=n.startDateMS;break;case r.StartToEnd:i=e.startDateMS,o=n.endDateMS;break;case r.EndToEnd:i=e.endDateMS,o=n.endDateMS;break;case r.EndToStart:i=e.endDateMS,o=n.startDateMS;break;default:throw new Error("Invalid dependency type: "+this.type)}return{start:Math.min(i,o),end:Math.max(i,o)}}return null}highlight(e){var n,r;const i=null!=(r=null==(n=this.highlighted)?void 0:n.split(" "))?r:[];i.includes(e)||(this.highlighted=i.concat(e).join(" "))}unhighlight(e){const{highlighted:n}=this;if(n){const r=n.split(" "),i=r.indexOf(e);i>=0&&(r.splice(i,1),this.highlighted=r.join(" "))}}isHighlightedWith(e){return this.highlighted&&this.highlighted.split(" ").includes(e)}getConnectorString(e){const n=um[this.type];return e?n:this.type===hm.Type.EndToStart?"":n}toString(){return`${this.from}${this.getConnectorString()}${this.getLag()}`}get isValid(){const{fromEvent:e,toEvent:n,type:r}=this;return"number"==typeof r&&e&&n&&e!==n}get fromEventName(){var e;return(null==(e=this.fromEvent)?void 0:e.name)||""}get toEventName(){var e;return(null==(e=this.toEvent)?void 0:e.name)||""}shouldRecordFieldChange(e,n,r){var i;if(!super.shouldRecordFieldChange(e,n,r))return!1;if("from"===e||"to"===e||"fromEvent"===e||"toEvent"===e){const e=null==(i=this.project)?void 0:i.eventStore;if(e&&e.oldIdMap[n]===e.getById(r))return!1}return!0}};hm.exposeProperties(),hm._$name="DependencyBaseModel";var gm=op,pm=class extends(PartOfProject_default(gm.derive(hm))){static get $name(){return"DependencyModel"}getTypeFromSides(e,n,r){const i=hm.Type,o=r?"right":"left",s=r?"left":"right";return e===o?n===o?i.StartToStart:i.StartToEnd:n===s?i.EndToEnd:i.EndToStart}};pm.exposeProperties(),pm._$name="DependencyModel";var DependencyStoreMixin_default=e=>class DependencyStoreMixin extends e{static get $name(){return"DependencyStoreMixin"}static get defaultConfig(){return{loadPriority:400,syncPriority:400,storeId:"dependencies"}}reduceEventDependencies(e,n,r,i=!0,o){return o=o||(e=>this.getEventDependencies(e)),(e=oe.asArray(e)).reduce(((e,r)=>{r.children&&!i?r.traverse((r=>{e=o(r).reduce(n,e)})):e=o(r).reduce(n,e)}),r),r}mapEventDependencies(e,n,r,i,o){return this.reduceEventDependencies(e,((e,n)=>(r(n)&&e.push(n),e)),[],i,o)}mapEventPredecessors(e,n,r,i){return this.reduceEventPredecessors(e,((e,n)=>(r(n)&&e.push(n),e)),[],i)}mapEventSuccessors(e,n,r,i){return this.reduceEventSuccessors(e,((e,n)=>(r(n)&&e.push(n),e)),[],i)}getEventDependencies(e){return[].concat(e.predecessors||[],e.successors||[])}removeEventDependencies(e){this.remove(this.getEventDependencies(e))}removeEventPredecessors(e){this.remove(e.predecessors)}removeEventSuccessors(e,n){this.remove(e.successors)}getBySourceTargetId(e){return this.records.find((n=>e==this.constructor.makeDependencySourceTargetCompositeKey(n.from,n.to)))}getDependencyForSourceAndTargetEvents(e,n){return e=Ur.asId(e),n=Ur.asId(n),this.getBySourceTargetId(this.constructor.makeDependencySourceTargetCompositeKey(e,n))}getEventsLinkingDependency(e,n){return this.getDependencyForSourceAndTargetEvents(e,n)||this.getDependencyForSourceAndTargetEvents(n,e)}async isValidDependency(e,n,r){let i=e,o=n;return null!=e&&(e.isDependencyModel&&({fromEvent:i,toEvent:o}=e),i=this.eventStore.getById(i),o=this.eventStore.getById(o),i&&o?!(!i.project||!o.project)&&this.project.isValidDependency(i,o,r):e!==n)}isValidDependencyToCreate(e,n,r){return this.isValidDependency(e,n,r)}getHighlightedDependencies(e){return this.records.reduce(((n,r)=>(r.isHighlightedWith(e)&&n.push(r),n)),[])}static makeDependencySourceTargetCompositeKey(e,n){return`source(${e})-target(${n})`}getTimeSpanDependencies(e){return this.getEventDependencies(e)}},mm=PartOfProject_default(ap.derive(Ci)),fm=class extends(DependencyStoreMixin_default(mm.derive(Ci))){static get defaultConfig(){return{modelClass:pm}}};fm._$name="DependencyStore";var ProjectCrudManager_default=e=>class ProjectCrudManager extends((e||re).mixin(AbstractCrudManagerMixin_default,AjaxTransport_default,JsonEncoder_default)){static get defaultConfig(){return{project:null}}startConfigure(e){this.getConfig("project"),super.startConfigure(e),this._changesToClear=new Map}async doAutoLoad(){const{project:e}=this;return e&&await e.commitAsync(),super.doAutoLoad()}applyProjectResponse(e){const n=this,{project:r}=n;n.applyingProjectResponse=!0;const i=r.fieldMap.startDate,o=r.fieldMap.endDate,s=Et.getPath(e,i.dataSource),a=Et.getPath(e,o.dataSource);"string"==typeof s&&Et.setPath(e,i.dataSource,i.convert(s)),"string"==typeof a&&Et.setPath(e,o.dataSource,o.convert(a)),Object.assign(r,e),n._changesToClear.set(n,e),n.applyingProjectResponse=!1}loadCrudManagerData(e,n={}){const r=this,{project:i}=r;r.suspendChangesTracking(),super.loadCrudManagerData(...arguments),(null==e?void 0:e.project)&&(i.delayEnteringReplica?i.ion({recordsUnlinked:()=>{r.suspendChangesTracking(),r.applyProjectResponse(e.project),r.resumeChangesTracking()},once:!0}):r.applyProjectResponse(e.project)),r.resumeChangesTracking()}async sync(){const{project:e}=this;if(this.suspendAutoSync(),e&&await e.commitAsync(),!this.isDestroying)return this.resumeAutoSync(!1),super.sync()}async applyResponse(e,n,r){var i,o,s,a,l,c;const d=this;if(!d.isDestroyed&&!(null==(i=d.project)?void 0:i.isDestroyed)){if(d.trigger("beforeApplyResponse"),await super.applyResponse(e,n,r),((null==n?void 0:n.project)||d.supportShortSyncResponse&&(null==(o=null==e?void 0:e.pack)?void 0:o.project))&&d.applyProjectResponse(n.project||(null==(s=null==e?void 0:e.pack)?void 0:s.project)),d.project){let r=e.type;d.trackResponseType&&(r=n.type||r);const i=`propagating${w.capitalize(r)}Changes`;d.suspendAutoSync(),d[i]=!0;const o=d.project.isInitialCommit&&!d.project.silenceInitialCommit;await d.project.commitAsync(),d[i]=!1,null==(a=d.resumeAutoSync)||a.call(d,o),null==(l=d.commitRespondedChanges)||l.call(d)}null==(c=d.trigger)||c.call(d,"applyResponse")}}applySyncResponse(...e){var n;const r=this,i=null==(n=r.project)?void 0:n.stm.disabled;!1===i&&r.ignoreRemoteChangesInSTM&&r.project.stm.disable(),super.applySyncResponse(...e),!1===i&&r.project.stm.enable()}shouldClearRecordFieldChange(e,n,r){const i=e[n];return(null==(n=e.getFieldDefinition(n))?void 0:n.isEqual)?n.isEqual(i,r):Et.isEqual(i,r)}commitRespondedChanges(){this._changesToClear.forEach(((e,n)=>{Object.entries(e).forEach((([e,r])=>{this.shouldClearRecordFieldChange(n,e,r)&&delete n.meta.modified[e]}))})),this._changesToClear.clear()}applyChangesToStore(e,n,r,...i){const o=super.applyChangesToStore(e,n,r,...i);if(o.size&&this.project)for(const[n,r]of o){const i=e.store.getById(n);i&&this._changesToClear.set(i,r)}return o}},ProjectModelCommon_default=e=>{var n;return __publicField(n=class extends(e||Ur){static get configurable(){return{assignments:null,dependencies:null,resources:null,timeRanges:null}}get assignments(){return this.assignmentStore.allRecords}updateAssignments(e){this.assignmentStore.data=e}get dependencies(){return this.dependencyStore.allRecords}updateDependencies(e){this.dependencyStore.data=e}get resources(){return this.resourceStore.allRecords}updateResources(e){this.resourceStore.data=e}get timeRanges(){return this.timeRangeStore.allRecords}getTimeRanges(e,n){const r=this.timeRangeStore,i=[];for(const o of r)o.isRecurring?i.push(...o.getOccurrencesForDateRange(e,n)):o.startDate<n&&e<o.endDate&&i.push(o);return i}updateTimeRanges(e){this.timeRangeStore.data=e}getResourceTimeRanges(e,n){const r=this.resourceTimeRangeStore,i=[];for(const o of r)o.isRecurring?i.push(...o.getOccurrencesForDateRange(e,n)):o.startDate<n&&e<o.endDate&&i.push(o);return i}},"$name","ProjectModelCommon"),n},bm=class extends(Gp.mixin(RecurringTimeSpan_default)){get domId(){return`${this.constructor.domIdPrefix}-${this.id}`}get isResourceTimeRange(){return!0}get resources(){return this.resource?[this.resource]:[]}get $linkedResources(){return this.resources}};__publicField(bm,"$name","ResourceTimeRangeModel"),__publicField(bm,"fields",["resourceId","timeRangeColor"]),__publicField(bm,"relations",{resource:{foreignKey:"resourceId",foreignStore:"resourceStore",relatedCollectionName:"timeRanges",nullFieldOnRemove:!0}}),__publicField(bm,"domIdPrefix","resourcetimerange"),bm._$name="ResourceTimeRangeModel";var vm=class extends(Ci.mixin(RecurringTimeSpansMixin_default)){static get defaultConfig(){return{loadPriority:500,syncPriority:500,resourceStore:null,modelClass:bm,storeId:"resourceTimeRanges"}}set resourceStore(e){this._resourceStore=e,this.isConfiguring||this.initRelations(!0)}get resourceStore(){return this._resourceStore}getResourcesForEvent(e){return[e.resource]}getRanges({resourceRecord:e,startDate:n,endDate:r}){return e.timeRanges.flatMap((e=>e.supportsRecurring?e.getOccurrencesForDateRange(n,r):e.intersectsRange(n,r)?e:[])).sort(((e,n)=>e.startDate-n.startDate))}};__publicField(vm,"$name","ResourceTimeRangeStore"),vm._$name="ResourceTimeRangeStore";var ProjectModelTimeZoneMixin_default=e=>{var n;return __publicField(n=class extends(e||Ur){get _storesWithDates(){return[this.taskStore,this.timeRangeStore,this.resourceTimeRangeStore].filter((e=>e))}overrideStoreProcessRecord(e){this._storesWithDates.includes(e)&&!e.$originalProcessRecord&&(e.$originalProcessRecord=he.before(e,"processRecord",((n,r)=>{(r||e.isLoadingData)&&this.convertRecordToTimeZone(n)})))}attachStore(e){super.attachStore(e),e&&null!=this.timeZone&&this._storesWithDates.includes(e)&&(this.convertStoresToTimeZone([e]),this.overrideStoreProcessRecord())}detachStore(e){if(super.detachStore(e),e&&!e.isDestroyed){const{$originalProcessRecord:n}=e;n&&(n(),e.$originalProcessRecord=null,this.convertStoresToTimeZone([e],null))}}relayStoreChange({source:e,action:n,records:r,replaced:i}){const o=this;null!=o.timeZone&&o._storesWithDates.includes(e)&&["add","replace"].includes(n)&&(!(null==r?void 0:r.length)&&(null==i?void 0:i.length)&&(r=i),r.length&&r.forEach((e=>e.timeZone=o.timeZone)))}convertStoresToTimeZone(e,n=this.timeZone){var r;const i=this,o=null==(r=i.stm)?void 0:r.autoRecord;o&&(i.stm.autoRecord=!1);for(const r of e)null==r||r.forEach((e=>i.convertRecordToTimeZone(e,n)));o&&(i.stmAutoRecord=o)}convertRecordToTimeZone(e,n=this.timeZone){var r;if(e.timeZone!==n){if(e.$ignoreChange=!0,null==(r=e.baselines)?void 0:r.count)for(const r of e.baselines)e.timeZone!==r.timeZone&&(r.timeZone=e.timeZone),r.convertToTimeZone(n);e.convertToTimeZone(n),e.$ignoreChange=!1}}updateTimeZone(e,n){const r=this,i=r._isConfiguringTimeZone||r.isConfiguring;if(r.trigger("beforeTimeZoneChange",{timeZone:e,oldTimeZone:n,isConfiguring:i}),r.calendarManagerStore.forEach((e=>e.bumpVersion())),r.convertStoresToTimeZone(r._storesWithDates),r._storesWithDates.forEach((e=>r.overrideStoreProcessRecord(e))),r.startDate){const i=null!=n?ll.fromTimeZone(r.startDate,n):r.startDate;r.startDate=null!=e?ll.toTimeZone(i,e):i}r.ignoreRecordChanges=!0,r.commitAsync().then((()=>{r.isDestroyed||r.trigger("timeZoneChange",{timeZone:e,oldTimeZone:n,isConfiguring:i}),delete r._isConfiguringTimeZone}))}},"$name","ProjectModelTimeZoneMixin"),__publicField(n,"configurable",{timeZone:{$config:"lazy",value:null}}),n},ProjectModelMixin_default=e=>{var n;return n=class extends((e||Ur).mixin(ProjectModelCommon_default,ProjectModelTimeZoneMixin_default)){static get $name(){return"ProjectModelMixin"}static get defaultConfig(){return{stm:{},timeRangeModelClass:Gp,resourceTimeRangeModelClass:bm,timeRangeStoreClass:yi,resourceTimeRangeStoreClass:vm,eventStore:{},assignmentStore:{},dependencyStore:{},resourceStore:{},timeRangesData:null}}get inlineData(){return w.safeJsonParse(super.json)}set inlineData(e){this.json=e}construct(e={}){super.construct(...arguments),e.timeRangesData&&(this.timeRangeStore.data=e.timeRangesData),e.resourceTimeRangesData&&(this.resourceTimeRangeStore.data=e.resourceTimeRangesData)}afterConstruct(){super.afterConstruct();const e=this;!e.timeRangeStore.stm&&e.stm.addStore(e.timeRangeStore),!e.resourceTimeRangeStore.stm&&e.stm.addStore(e.resourceTimeRangeStore)}attachStore(e){e&&e.ion({name:e.$$name,change:"relayStoreChange",thisObj:this}),super.attachStore(e)}detachStore(e){e&&(this.detachListeners(e.$$name),super.detachStore(e))}relayStoreChange(e){return super.relayStoreChange(e),this.trigger("change",{store:e.source,...e,source:this})}updateTimeRangeStore(e,n){this.detachStore(n),this.attachStore(e)}setTimeRangeStore(e){this.timeRangeStore=e}changeTimeRangeStore(e){return e&&!e.isStore&&(e=this.timeRangeStoreClass.new({modelClass:this.timeRangeModelClass},e)),e}updateResourceTimeRangeStore(e,n){this.detachStore(n),this.attachStore(e)}changeResourceTimeRangeStore(e){return e&&!e.isStore&&(e=this.resourceTimeRangeStoreClass.new({modelClass:this.resourceTimeRangeModelClass},e)),e}setResourceTimeRangeStore(e){this.resourceTimeRangeStore=e}get events(){return this.eventStore.allRecords}updateEvents(e){this.eventStore.data=e}get resourceTimeRanges(){return this.resourceTimeRangeStore.allRecords}updateResourceTimeRanges(e){this.resourceTimeRangeStore.data=e}async loadInlineData(e){return this.isLoadingInlineData=!0,e.resourceTimeRangesData&&(this.resourceTimeRangeStore.data=e.resourceTimeRangesData),e.timeRangesData&&(this.timeRangeStore.data=e.timeRangesData),super.loadInlineData(e)}toJSON(){const e=this,n={eventsData:e.eventStore.toJSON(),resourcesData:e.resourceStore.toJSON(),dependenciesData:e.dependencyStore.toJSON(),timeRangesData:e.timeRangeStore.toJSON(),resourceTimeRangesData:e.resourceTimeRangeStore.toJSON()};return e.eventStore.usesSingleAssignment||(n.assignmentsData=e.assignmentStore.toJSON()),n}get json(){return super.json}changeJson(e){return"string"==typeof e&&(e=w.safeJsonParse(e)),e}updateJson(e){e&&this.loadInlineData(e)}afterChange(e,n){super.afterChange(...arguments),n.calendar&&this.trigger("calendarChange")}doDestroy(){this.timeRangeStore.destroy(),this.resourceTimeRangeStore.destroy(),super.doDestroy()}},__publicField(n,"configurable",{json:null,timeRangeStore:{value:{id:"timeRanges",modelClass:Gp},$config:"nullify"},resourceTimeRangeStore:{value:{},$config:"nullify"},events:null,resourceTimeRanges:null}),n},ProjectCurrentConfig_default=e=>class ProjectCurrentConfig extends e{getCurrentConfig(e){const n=this,r=super.getCurrentConfig(e);if(r){for(const i of["eventStore","resourceStore","assignmentStore","dependencyStore","timeRangeStore","resourceTimeRangeStore"]){const o=n[i];if(o){o.count&&(r[o.id+"Data"]=o.getInlineData(e));const n=o.getCurrentConfig(e);n&&Object.keys(n).length>0?r[i]=Object.assign(r[i]||{},n):r[i]&&0===Object.keys(r[i]).length&&delete r[i]}}return r.timeRangeStore&&(n.timeRangeStore.originalModelClass!==n.timeRangeModelClass&&"TimeSpan"!==n.timeRangeStore.originalModelClass.$name||delete r.timeRangeStore.modelClass,"timeRanges"===r.timeRangeStore.storeId&&delete r.timeRangeStore.storeId,1===Object.keys(r.timeRangeStore).length&&delete r.timeRangeStore),n.taskStore.isTaskStore&&(delete r.eventModelClass,delete r.eventStoreClass,delete r.children),r}}},ym=class extends re{set eventStore(e){const n=this;n.eventStoreDetacher&&n.eventStoreDetacher(),n._eventStore=e,e&&e.autoCommit&&(n.eventStoreDetacher=e.ion({beforecommit:n.onEventStoreBeforeSync,thisObj:n,detachable:!0,prio:100}))}get eventStore(){return this._eventStore}set resourceStore(e){const n=this;n.resourceStoreDetacher&&n.resourceStoreDetacher(),n._resourceStore=e,e&&e.autoCommit&&(n.resourceStoreDetacher=e.ion({beforecommit:n.onResourceStoreBeforeSync,thisObj:n,detachable:!0,prio:100}))}get resourceStore(){return this._resourceStore}set assignmentStore(e){const n=this;n.assignmentStoreDetacher&&n.assignmentStoreDetacher(),n._assignmentStore=e,e&&e.autoSync&&(n.assignmentStoreDetacher=e.ion({beforecommit:n.onAssignmentStoreBeforeSync,thisObj:n,detachable:!0,prio:100}))}get assignmentStore(){return this._assignmentStore}set dependencyStore(e){const n=this;n.dependencyStoreDetacher&&n.dependencyStoreDetacher(),n._dependencyStore=e,e&&e.autoSync&&(n.dependencyStoreDetacher=e.ion({beforecommit:n.onDependencyStoreBeforeSync,thisObj:n,detachable:!0,prio:100}))}get dependencyStore(){return this._dependencyStore}onEventStoreBeforeSync({changes:e}){return this.removeNonPersistableRecordsToCreate(e),this.shallContinueSync(e)}onResourceStoreBeforeSync({changes:e}){return this.removeNonPersistableRecordsToCreate(e),this.shallContinueSync(e)}onAssignmentStoreBeforeSync({changes:e}){return this.removeNonPersistableRecordsToCreate(e),this.shallContinueSync(e)}onDependencyStoreBeforeSync({changes:e}){return this.removeNonPersistableRecordsToCreate(e),this.shallContinueSync(e)}removeNonPersistableRecordsToCreate(e){const n=e.added||[];let r,i;for(i=n.length-1;i>=0;--i)r=n[i],r.isPersistable||n.splice(n.indexOf(r),1);0===n.length&&(e.added.length=0)}shallContinueSync(e){return Boolean(e.added&&e.added.length>0||e.modified&&e.modified.length>0||e.removed&&e.removed.length>0)}};ym._$name="ModelPersistencyManager";var wm=bp,Cm=class extends(ProjectCurrentConfig_default(ProjectModelMixin_default(wm))){static get $name(){return"ProjectModel"}static get defaultConfig(){return{eventModelClass:lm,dependencyModelClass:pm,resourceModelClass:Lp,assignmentModelClass:Ip,eventStoreClass:dm,dependencyStoreClass:fm,resourceStoreClass:$p,assignmentStoreClass:Pp}}construct(...e){super.construct(...e),A.isTestEnv&&(globalThis.bryntum.testProject=this),this.modelPersistencyManager=this.createModelPersistencyManager()}createModelPersistencyManager(){return new ym({eventStore:this,resourceStore:this.resourceStore,assignmentStore:this.assignmentStore,dependencyStore:this.dependencyStore})}doDestroy(){this.modelPersistencyManager.destroy(),super.doDestroy()}get taskStore(){return this.eventStore}};Cm.applyConfigs=!0,Cm.initClass(),Cm._$name="ProjectModel";var Sm=class extends(Mp.mixin(ProjectCrudManager_default,AjaxTransport_default,JsonEncoder_default)){static get defaultConfig(){return{projectClass:Cm,resourceStoreClass:$p,eventStoreClass:dm,assignmentStoreClass:Pp,dependencyStoreClass:fm,resourceStore:{},eventStore:{},assignmentStore:{},dependencyStore:{},project:null}}buildProject(){return new this.projectClass(this.buildProjectConfig())}buildProjectConfig(){return Et.cleanupProperties({eventStore:this.eventStore,resourceStore:this.resourceStore,assignmentStore:this.assignmentStore,dependencyStore:this.dependencyStore,resourceTimeRangeStore:this.resourceTimeRangeStore})}set project(e){const n=this;e!==n._project&&(n.detachListeners("beforeDataReady"),n.detachListeners("afterDataReady"),n._project=e,e&&(n.eventStore=e.eventStore,n.resourceStore=e.resourceStore,n.assignmentStore=e.assignmentStore,n.dependencyStore=e.dependencyStore,n.timeRangeStore=e.timeRangeStore,n.resourceTimeRangeStore=e.resourceTimeRangeStore,e.ion({name:"beforeDataReady",dataReady:()=>n.suspendChangesTracking(),prio:100,thisObj:n}),e.ion({name:"afterDataReady",dataReady:()=>n.resumeChangesTracking(),prio:-100,thisObj:n})),n.eventStore||(n.eventStore={}),n.resourceStore||(n.resourceStore={}),n.assignmentStore||(n.assignmentStore={}),n.dependencyStore||(n.dependencyStore={}))}get project(){return this._project}get timeRangeStore(){var e;return null==(e=this._timeRangeStore)?void 0:e.store}set timeRangeStore(e){var n;this.setFeaturedStore("_timeRangeStore",e,null==(n=this.project)?void 0:n.timeRangeStoreClass)}get resourceTimeRangeStore(){var e;return null==(e=this._resourceTimeRangeStore)?void 0:e.store}set resourceTimeRangeStore(e){var n;this.setFeaturedStore("_resourceTimeRangeStore",e,null==(n=this.project)?void 0:n.resourceTimeRangeStoreClass)}get resourceStore(){var e;return null==(e=this._resourceStore)?void 0:e.store}set resourceStore(e){this.setFeaturedStore("_resourceStore",e,this.resourceStoreClass)}get eventStore(){var e;return null==(e=this._eventStore)?void 0:e.store}set eventStore(e){this.setFeaturedStore("_eventStore",e,this.eventStoreClass)}get assignmentStore(){var e;return null==(e=this._assignmentStore)?void 0:e.store}set assignmentStore(e){this.setFeaturedStore("_assignmentStore",e,this.assignmentStoreClass)}get dependencyStore(){var e;return null==(e=this._dependencyStore)?void 0:e.store}set dependencyStore(e){this.setFeaturedStore("_dependencyStore",e,this.dependencyStoreClass)}setFeaturedStore(e,n,r){var i;const o=this,s=null==(i=o[e])?void 0:i.store;return s!==n&&(n=yi.getStore(n,(null==n?void 0:n.storeClass)||r),s&&o.removeStore(s),o[e]=n&&{store:n}||null,o.addPrioritizedStore(o[e])),o[e]}getChangesetPackage(){const e=super.getChangesetPackage();return e&&this.eventStore.usesSingleAssignment&&(delete e[this.assignmentStore.storeId],!this.crudStores.some((n=>e[n.storeId])))?null:e}get crudLoadValidationMandatoryStores(){return[this._eventStore.storeId,this._resourceStore.storeId]}};__publicField(Sm,"$name","CrudManager"),Sm._$name="CrudManager";var xm=class extends Ur{static get fields(){return[{name:"base",type:"string"},{name:"name",type:"string"},{name:"rowHeight",defaultValue:24},{name:"tickWidth",defaultValue:50},{name:"tickHeight",defaultValue:50},{name:"displayDateFormat",defaultValue:"HH:mm"},{name:"shiftUnit",defaultValue:"hour"},{name:"shiftIncrement",defaultValue:1},{name:"defaultSpan",defaultValue:12},{name:"mainUnit"},{name:"start"},"timeResolution","headers","mainHeaderLevel","columnLinesFor"]}construct(){super.construct(...arguments),this.normalizeUnits()}generateId(e){const n=this,{headers:r}=n,i=[];let o=Object.getPrototypeOf(n.data).id;if(!o){for(let{length:e}=r,n=e-1;n>=0;n--){const{unit:e,increment:o}=r[n],s=o>1;i.push(`${s?o:""}${n?e:w.capitalize(e)}${s?"s":""}`)}o=i.join("And")}return e.count&&e.includes(o)&&(o+=`-${n.tickWidth}by${n.tickHeight||n.tickWidth}`,e.includes(o)&&(o+=`-${n.bottomHeader.increment}`,e.includes(o)&&(o=Jr.generateId(`${o}-`)))),o}normalizeUnits(){const e=this,{timeResolution:n,headers:r,shiftUnit:i}=e;if(r)for(let e=0,{length:n}=r;e<n;e++){const n=r[e];n.unit=Ct.normalizeUnit(n.unit),n.splitUnit&&(n.splitUnit=Ct.normalizeUnit(n.splitUnit)),"increment"in n||(r[e]=Object.assign({increment:1},n))}n&&(n.unit=Ct.normalizeUnit(n.unit)),i&&(e.shiftUnit=Ct.normalizeUnit(i))}static normalizeHeaderConfig(e){const{headerConfig:n,columnLinesFor:r,mainHeaderLevel:i}=e,o=e.headers=[];if(n.top&&("top"===r&&(e.columnLinesFor=0),"top"===i&&(e.mainHeaderLevel=0),o[0]=n.top),!n.middle)throw new Error("ViewPreset.headerConfig must be configured with a middle");"middle"===r&&(e.columnLinesFor=o.length),"middle"===i&&(e.mainHeaderLevel=o.length),o.push(n.middle),n.bottom&&(e.mainHeaderLevel=o.length-1,null==r?e.columnLinesFor=o.length-1:"bottom"===r&&(e.columnLinesFor=o.length),null==i&&(e.mainHeaderLevel=o.length-1),"bottom"===i&&(e.mainHeaderLevel=o.length),o.push(n.bottom))}set(){}inSet(){}get columnLinesFor(){return"columnLinesFor"in this.data?this.data.columnLinesFor:this.headers.length-1}get tickSize(){return this._tickSize||this.tickWidth}get tickWidth(){return"tickWidth"in this.data?this.data.tickWidth:50}get tickHeight(){return"tickHeight"in this.data?this.data.tickHeight:50}get headerConfig(){if(this.data.headerConfig)return this.data.headerConfig;const e={},{headers:n}=this,{length:r}=n;switch(r){case 1:e.middle=n[0];break;case 2:0===this.mainHeaderLevel?(e.middle=n[0],e.bottom=n[1]):(e.top=n[0],e.middle=n[1]);break;case 3:e.top=n[0],e.middle=n[1],e.bottom=n[2];break;default:throw new Error("headerConfig object not supported for >3 header levels")}return e}set mainHeaderLevel(e){this.data.mainHeaderLevel=e}get mainHeaderLevel(){return"mainHeaderLevel"in this.data?this.data.mainHeaderLevel:3===this.data.headers.length?1:this.headers.length-1}get mainHeader(){return this.headers[this.mainHeaderLevel]}get topHeader(){return this.headers[0]}get topUnit(){return this.topHeader.unit}get topIncrement(){return this.topHeader.increment}get bottomHeader(){return this.headers[this.headers.length-1]}get leafUnit(){return this.bottomHeader.unit}get leafIncrement(){return this.bottomHeader.increment}get mainUnit(){return"mainUnit"in this.data?this.data.mainUnit:this.mainHeader.unit}get msPerPixel(){const{bottomHeader:e}=this;return Math.round(Ct.asMilliseconds(e.increment||1,e.unit)/this.tickWidth)}get isValid(){const e=this;let n=!0;for(const r of e.headers)n=n&&Boolean(Ct.normalizeUnit(r.unit));return e.timeResolution&&(n=n&&Ct.normalizeUnit(e.timeResolution.unit)),e.shiftUnit&&(n=n&&Ct.normalizeUnit(e.shiftUnit)),n}};__publicField(xm,"$name","ViewPreset"),xm._$name="ViewPreset";Oe.publishLocale({localeName:"En",localeDesc:"English (US)",localeCode:"en-US",Object:{newEvent:"New event"},ResourceInfoColumn:{eventCountText:e=>e+" event"+(1!==e?"s":"")},Dependencies:{from:"From",to:"To",valid:"Valid",invalid:"Invalid"},DependencyType:{SS:"SS",SF:"SF",FS:"FS",FF:"FF",StartToStart:"Start-to-Start",StartToEnd:"Start-to-Finish",EndToStart:"Finish-to-Start",EndToEnd:"Finish-to-Finish",short:["SS","SF","FS","FF"],long:["Start-to-Start","Start-to-Finish","Finish-to-Start","Finish-to-Finish"]},DependencyEdit:{From:"From",To:"To",Type:"Type",Lag:"Lag","Edit dependency":"Edit dependency",Save:"Save",Delete:"Delete",Cancel:"Cancel",StartToStart:"Start to Start",StartToEnd:"Start to End",EndToStart:"End to Start",EndToEnd:"End to End"},EventEdit:{Name:"Name",Resource:"Resource",Start:"Start",End:"End",Save:"Save",Delete:"Delete",Cancel:"Cancel","Edit event":"Edit event",Repeat:"Repeat"},EventDrag:{eventOverlapsExisting:"Event overlaps existing event for this resource",noDropOutsideTimeline:"Event may not be dropped completely outside the timeline"},SchedulerBase:{"Add event":"Add event","Delete event":"Delete event","Unassign event":"Unassign event"},TimeAxisHeaderMenu:{pickZoomLevel:"Zoom",activeDateRange:"Date range",startText:"Start date",endText:"End date",todayText:"Today"},EventCopyPaste:{copyEvent:"Copy event",cutEvent:"Cut event",pasteEvent:"Paste event"},EventFilter:{filterEvents:"Filter tasks",byName:"By name"},TimeRanges:{showCurrentTimeLine:"Show current timeline"},PresetManager:{secondAndMinute:{displayDateFormat:"ll LTS",name:"Seconds"},minuteAndHour:{topDateFormat:"ddd MM/DD, hA",displayDateFormat:"ll LST"},hourAndDay:{topDateFormat:"ddd MM/DD",middleDateFormat:"LST",displayDateFormat:"ll LST",name:"Day"},day:{name:"Day/hours"},week:{name:"Week/hours"},dayAndWeek:{displayDateFormat:"ll LST",name:"Week/days"},dayAndMonth:{name:"Month"},weekAndDay:{displayDateFormat:"ll LST",name:"Week"},weekAndMonth:{name:"Weeks"},weekAndDayLetter:{name:"Weeks/weekdays"},weekDateAndMonth:{name:"Months/weeks"},monthAndYear:{name:"Months"},year:{name:"Years"},manyYears:{name:"Multiple years"}},RecurrenceConfirmationPopup:{"delete-title":"You are deleting an event","delete-all-message":"Do you want to delete all occurrences of this event?","delete-further-message":"Do you want to delete this and all future occurrences of this event, or only the selected occurrence?","delete-further-btn-text":"Delete All Future Events","delete-only-this-btn-text":"Delete Only This Event","update-title":"You are changing a repeating event","update-all-message":"Do you want to change all occurrences of this event?","update-further-message":"Do you want to change only this occurrence of the event, or this and all future occurrences?","update-further-btn-text":"All Future Events","update-only-this-btn-text":"Only This Event",Yes:"Yes",Cancel:"Cancel",width:600},RecurrenceLegend:{" and ":" and ",Daily:"Daily","Weekly on {1}":({days:e})=>`Weekly on ${e}`,"Monthly on {1}":({days:e})=>`Monthly on ${e}`,"Yearly on {1} of {2}":({days:e,months:n})=>`Yearly on ${e} of ${n}`,"Every {0} days":({interval:e})=>`Every ${e} days`,"Every {0} weeks on {1}":({interval:e,days:n})=>`Every ${e} weeks on ${n}`,"Every {0} months on {1}":({interval:e,days:n})=>`Every ${e} months on ${n}`,"Every {0} years on {1} of {2}":({interval:e,days:n,months:r})=>`Every ${e} years on ${n} of ${r}`,position1:"the first",position2:"the second",position3:"the third",position4:"the fourth",position5:"the fifth","position-1":"the last",day:"day",weekday:"weekday","weekend day":"weekend day",daysFormat:({position:e,days:n})=>`${e} ${n}`},RecurrenceEditor:{"Repeat event":"Repeat event",Cancel:"Cancel",Save:"Save",Frequency:"Frequency",Every:"Every",DAILYintervalUnit:"day(s)",WEEKLYintervalUnit:"week(s)",MONTHLYintervalUnit:"month(s)",YEARLYintervalUnit:"year(s)",Each:"Each","On the":"On the","End repeat":"End repeat","time(s)":"time(s)"},RecurrenceDaysCombo:{day:"day",weekday:"weekday","weekend day":"weekend day"},RecurrencePositionsCombo:{position1:"first",position2:"second",position3:"third",position4:"fourth",position5:"fifth","position-1":"last"},RecurrenceStopConditionCombo:{Never:"Never",After:"After","On date":"On date"},RecurrenceFrequencyCombo:{None:"No repeat",Daily:"Daily",Weekly:"Weekly",Monthly:"Monthly",Yearly:"Yearly"},RecurrenceCombo:{None:"None",Custom:"Custom..."},Summary:{"Summary for":e=>`Summary for ${e}`},ScheduleRangeCombo:{completeview:"Complete schedule",currentview:"Visible schedule",daterange:"Date range",completedata:"Complete schedule (for all events)"},SchedulerExportDialog:{"Schedule range":"Schedule range","Export from":"From","Export to":"To"},ExcelExporter:{"No resource assigned":"No resource assigned"},CrudManagerView:{serverResponseLabel:"Server response:"},DurationColumn:{Duration:"Duration"}});var Dm=class extends(Localizable_default(yi)){static get $name(){return"PresetStore"}static get defaultConfig(){return{useRawData:!0,modelClass:xm,zoomOrder:1}}set storage(e){super.storage=e,this.storage.addSorter(((e,n)=>{const r=e.bottomHeader,i=n.bottomHeader;return(n.msPerPixel-e.msPerPixel||bt[r.unit]-bt[i.unit]||r.increment-i.increment)*this.zoomOrder}))}get storage(){return super.storage}getById(e){return super.getById(e)||!this.isPresetManager&&Em.getById(e)}createRecord(e,...n){let r;if(e.isViewPreset)return e;if("string"==typeof e)r=this.getById(e);else{if("number"!=typeof e)return e.base&&(e=this.copyBaseValues(e)),super.createRecord(e,...n);r=this.getAt(e)}if(!r)throw new Error(`ViewPreset ${e} does not exist`);return r}updateLocalization(){super.updateLocalization();const e=this;let n=e.allRecords;e.isPresetManager&&(n=new Set(n.concat(Object.values(e.basePresets)))),n.forEach((n=>{let r=e.optionalL(`L{PresetManager.${n.id}}`,null,!0);"string"==typeof r&&n.baseId&&(r=e.optionalL(`L{PresetManager.${n.baseId}}`,null,!0)),r&&"object"==typeof r&&(n.originalDisplayDateFormat||(n.originalDisplayDateFormat=n.displayDateFormat),0===n.mainHeaderLevel&&r.topDateFormat&&(r.middleDateFormat=r.middleDateFormat||r.topDateFormat),n.setData("displayDateFormat",r.displayDateFormat||n.originalDisplayDateFormat),["top","middle","bottom"].forEach((e=>{const i=n.headerConfig[e],o=r[e+"DateFormat"];i&&(i.originalDateFormat||(i.originalDateFormat=i.dateFormat),o&&i.renderer&&(i.renderer=null),i.dateFormat=o||i.originalDateFormat)})),r.name?(n.unlocalizedName||(n.unlocalizedName=n.name),n.setData("name",r.name)):n.unlocalizedName&&n.unlocalizedName!==n.name&&(n.name=n.unlocalizedName,n.unlocalizedName=null))}))}getCurrentConfig(e){return super.getCurrentConfig(e).data}copyBaseValues(e){let n=this.getById(e.base);if(!n)throw new Error(`ViewPreset base '${e.base}' does not exist.`);return n=Et.clone(n.data),delete n.id,delete n.name,Et.merge(n,e)}add(e){return(e=Array.isArray(e)?e:[e]).forEach((e=>{e.isViewPreset&&e.base&&(e.data=this.copyBaseValues(e.originalData))})),super.add(...arguments)}};Dm._$name="PresetStore";var Em=new class extends Dm{static get $name(){return"PresetManager"}static get defaultConfig(){return{preventSubClassingModel:!0,basePresets:{secondAndMinute:{name:"Seconds",tickWidth:30,tickHeight:40,displayDateFormat:"ll LTS",shiftIncrement:10,shiftUnit:"minute",defaultSpan:24,timeResolution:{unit:"second",increment:5},headers:[{unit:"minute",dateFormat:"lll"},{unit:"second",increment:10,dateFormat:"ss"}]},minuteAndHour:{name:"Minutes",tickWidth:60,tickHeight:60,displayDateFormat:"ll LT",shiftIncrement:1,shiftUnit:"hour",defaultSpan:24,timeResolution:{unit:"minute",increment:15},headers:[{unit:"hour",dateFormat:"ddd MM/DD, hA"},{unit:"minute",increment:30,dateFormat:"mm"}]},hourAndDay:{name:"Day",tickWidth:70,tickHeight:40,displayDateFormat:"ll LT",shiftIncrement:1,shiftUnit:"day",defaultSpan:24,timeResolution:{unit:"minute",increment:30},headers:[{unit:"day",dateFormat:"ddd DD/MM"},{unit:"hour",dateFormat:"LT"}]},day:{name:"Day/hours",displayDateFormat:"LT",shiftIncrement:1,shiftUnit:"day",defaultSpan:1,timeResolution:{unit:"minute",increment:30},mainHeaderLevel:0,headers:[{unit:"day",dateFormat:"ddd DD/MM",splitUnit:"day"},{unit:"hour",renderer:e=>`\n                                    <div class="b-sch-calendarcolumn-ct"><span class="b-sch-calendarcolumn-hours">${Ct.format(e,"HH")}</span>\n                                    <span class="b-sch-calendarcolumn-minutes">${Ct.format(e,"mm")}</span></div>\n                                `}]},week:{name:"Week/hours",displayDateFormat:"LT",shiftIncrement:1,shiftUnit:"week",defaultSpan:24,timeResolution:{unit:"minute",increment:30},mainHeaderLevel:0,headers:[{unit:"week",dateFormat:"D d",splitUnit:"day"},{unit:"hour",dateFormat:"LT",renderer:e=>`\n                                    <div class="sch-calendarcolumn-ct">\n                                    <span class="sch-calendarcolumn-hours">${Ct.format(e,"HH")}</span>\n                                    <span class="sch-calendarcolumn-minutes">${Ct.format(e,"mm")}</span>\n                                    </div>\n                                `}]},dayAndWeek:{name:"Days & Weeks",tickWidth:100,tickHeight:80,displayDateFormat:"ll LT",shiftUnit:"day",shiftIncrement:1,defaultSpan:5,timeResolution:{unit:"hour",increment:1},headers:[{unit:"week",renderer:e=>Ct.getShortNameOfUnit("week")+"."+Ct.format(e,"WW MMM YYYY")},{unit:"day",dateFormat:"dd DD"}]},dayAndMonth:{name:"Month",tickWidth:100,tickHeight:80,displayDateFormat:"ll LT",shiftUnit:"month",shiftIncrement:1,defaultSpan:1,mainUnit:"month",timeResolution:{unit:"hour",increment:1},headers:[{unit:"month",dateFormat:"MMMM YYYY"},{unit:"day",dateFormat:"DD"}]},weekAndDay:{name:"Week",tickWidth:100,tickHeight:80,displayDateFormat:"ll hh:mm A",shiftUnit:"week",shiftIncrement:1,defaultSpan:1,timeResolution:{unit:"day",increment:1},mainHeaderLevel:0,headers:[{unit:"week",dateFormat:"YYYY MMMM DD"},{unit:"day",increment:1,dateFormat:"DD MMM"}]},weekAndMonth:{name:"Weeks",tickWidth:100,tickHeight:105,displayDateFormat:"ll",shiftUnit:"week",shiftIncrement:5,defaultSpan:6,timeResolution:{unit:"day",increment:1},headers:[{unit:"month",dateFormat:"MMM YYYY"},{unit:"week",dateFormat:"DD MMM"}]},weekAndDayLetter:{name:"Weeks/weekdays",tickWidth:20,tickHeight:50,displayDateFormat:"ll",shiftUnit:"week",shiftIncrement:1,defaultSpan:10,timeResolution:{unit:"day",increment:1},mainHeaderLevel:0,headers:[{unit:"week",dateFormat:"ddd DD MMM YYYY",verticalColumnWidth:115},{unit:"day",dateFormat:"d1",verticalColumnWidth:25}]},weekDateAndMonth:{name:"Months/weeks",tickWidth:30,tickHeight:40,displayDateFormat:"ll",shiftUnit:"week",shiftIncrement:1,defaultSpan:10,timeResolution:{unit:"day",increment:1},headers:[{unit:"month",dateFormat:"YYYY MMMM"},{unit:"week",dateFormat:"DD"}]},monthAndYear:{name:"Months",tickWidth:110,tickHeight:110,displayDateFormat:"ll",shiftIncrement:3,shiftUnit:"month",defaultSpan:12,timeResolution:{unit:"day",increment:1},headers:[{unit:"year",dateFormat:"YYYY"},{unit:"month",dateFormat:"MMM YYYY"}]},year:{name:"Years",tickWidth:100,tickHeight:100,resourceColumnWidth:100,displayDateFormat:"ll",shiftUnit:"year",shiftIncrement:1,defaultSpan:1,timeResolution:{unit:"month",increment:1},headers:[{unit:"year",dateFormat:"YYYY"},{unit:"quarter",renderer:(e,n,r)=>Ct.getShortNameOfUnit("quarter").toUpperCase()+(Math.floor(e.getMonth()/3)+1)}]},manyYears:{name:"Multiple years",tickWidth:40,tickHeight:50,displayDateFormat:"ll",shiftUnit:"year",shiftIncrement:1,defaultSpan:10,timeResolution:{unit:"year",increment:1},mainHeaderLevel:0,headers:[{unit:"year",increment:5,renderer:(e,n)=>e.getFullYear()+" - "+n.getFullYear()},{unit:"year",dateFormat:"YY",increment:1}]}},defaultPresets:["manyYears",{width:80,increment:1,resolution:1,base:"manyYears",resolutionUnit:"YEAR"},"year",{width:30,increment:1,resolution:1,base:"year",resolutionUnit:"MONTH"},{width:50,increment:1,resolution:1,base:"year",resolutionUnit:"MONTH"},{width:200,increment:1,resolution:1,base:"year",resolutionUnit:"MONTH"},"monthAndYear","weekDateAndMonth","weekAndMonth","weekAndDayLetter","dayAndMonth","weekAndDay",{width:54,increment:1,resolution:1,base:"weekAndDay",resolutionUnit:"HOUR"},"hourAndDay",{width:64,increment:6,resolution:30,base:"hourAndDay",resolutionUnit:"MINUTE"},{width:100,increment:6,resolution:30,base:"hourAndDay",resolutionUnit:"MINUTE"},{width:64,increment:2,resolution:30,base:"hourAndDay",resolutionUnit:"MINUTE"},"minuteAndHour",{width:60,increment:15,resolution:5,base:"minuteAndHour"},{width:130,increment:15,resolution:5,base:"minuteAndHour"},{width:60,increment:5,resolution:5,base:"minuteAndHour"},{width:100,increment:5,resolution:5,base:"minuteAndHour"},"secondAndMinute",{width:60,increment:10,resolution:5,base:"secondAndMinute"},{width:130,increment:5,resolution:5,base:"secondAndMinute"}],internalListeners:{locale:"updateLocalization"}}}set basePresets(e){const n=this._basePresets={};for(const r in e)e[r].id=r,n[r]=this.createRecord(e[r])}get basePresets(){return this._basePresets}set defaultPresets(e){for(let n=0,{length:r}=e;n<r;n++){const r=e[n],i="string"==typeof r,o=i?r:r.base;let s;if(i)s=this.basePresets[o];else{const e=Object.setPrototypeOf(Et.clone(this.basePresets[o].data),{id:o}),{timeResolution:n}=e,i=e.headers[e.headers.length-1];e.id=void 0,"width"in r&&(e.tickWidth=r.width),"height"in r&&(e.tickHeight=r.height),"increment"in r&&(i.increment=r.increment),"resolution"in r&&(n.increment=r.resolution),"resolutionUnit"in r&&(n.unit=Ct.getUnitByName(r.resolutionUnit)),s=this.createRecord(e),s.baseId=o}this.add(s)}}getById(e){return super.getById(e)||this.basePresets[e]}registerPreset(e,n){const r=this.createRecord(Object.assign({id:e},n)),i=this.find((e=>e.equals(r)));if(i)return i;if(!r.isValid)throw new Error("Invalid preset, please check your configuration");return this.add(r),r}getPreset(e){return"number"==typeof e&&(e=this.getAt(e)),"string"==typeof e?e=this.getById(e):e instanceof xm||(e=this.createRecord(e)),e}normalizePreset(e){const n=this;if(!(e instanceof xm))if("string"==typeof e){if(!(e=n.getPreset(e)))throw new Error("You must define a valid view preset. See PresetManager for reference")}else if("object"==typeof e){if(e.base){const n=this.getById(e.base);if(!n)throw new Error(`ViewPreset base '${e.base}' does not exist`);e=Et.merge(Et.clone(n.data),e)}e.id?e=n.createRecord(e):(e=n.createRecord(Et.assign({},e))).id=e.generateId(e)}return e}deletePreset(e){"string"==typeof e?e=this.getById(e):"number"==typeof e&&(e=this.getAt(e)),e&&(this.remove(e),delete this.basePresets[e.id])}},Rm=class extends Gp{get startDate(){return this.data.startDate}get endDate(){return this.data.endDate}},km=class extends yi{static get defaultConfig(){return{modelClass:Rm,continuous:!0,originalContinuous:null,include:null,autoAdjust:!0,adjustedStart:null,adjustedEnd:null,visibleTickStart:null,visibleTickEnd:null,tickCache:{},viewPreset:null,maxTraverseTries:100,useRawData:{disableDuplicateIdCheck:!0,disableDefaultValue:!0,disableTypeConversion:!0}}}static get configurable(){return{generateTicks:null,unit:null,increment:null,resolutionUnit:null,resolutionIncrement:null,mainUnit:null,shiftUnit:null,shiftIncrement:1,defaultSpan:1,weekStartDay:null,forceFullTicks:null}}construct(e){const n=this;if(super.construct(e),n.originalContinuous=n.continuous,n.ion({change:({action:e})=>{"filter"!==e&&n.trigger("reconfigure",{supressRefresh:!1})},refresh:()=>n.trigger("reconfigure",{supressRefresh:!1}),endreconfigure:e=>n.trigger("reconfigure",e)}),n.startDate)n.internalOnReconfigure(),n.trigger("reconfigure");else if(n.viewPreset){const e=n.getAdjustedDates(new Date);n.startDate=e.startDate,n.endDate=e.endDate}}get isTimeAxis(){return!0}reconfigure(e,n=!1,r=!1){const i=this,o=i.getAdjustedDates(e.startDate,e.endDate),s={};if(!1!==i.trigger("beforeReconfigure",{startDate:o.startDate,endDate:o.endDate,config:e})){i.trigger("beginReconfigure"),i._configuredStartDate=e.startDate,i._configuredEndDate=e.endDate;for(const n in e)s[n]=i[n];const o=e.viewPreset&&e.viewPreset!==i.viewPreset;if(o&&(r=i.isFiltered,i.filters.forEach((e=>e.disabled=!1))),Object.assign(i,e),!1===i.internalOnReconfigure(r,o))return!1;i.trigger("endReconfigure",{suppressRefresh:n,config:e,oldConfig:s})}}internalOnReconfigure(e=!1,n){const r=this;r.isConfigured=!0;const i=r.getAdjustedDates(r.startDate,r.endDate,!0),o=r.getAdjustedDates(r.startDate,r.endDate),s=o.startDate,a=o.endDate;if(s>=a)throw new Error(`Invalid start/end dates. Start date must be less than end date. Start date: ${s}. End date: ${a}.`);const{unit:l,increment:c=1}=r,d=r.generateTicks(s,a,l,c);r.suspendEvents(),r.maintainFilter=e,r.data=d,r.maintainFilter=!1;const{count:u}=r;if(0===u){if(e)return n&&r.disableFilters(),r.resumeEvents(),!1;throw new Error("Invalid time axis configuration or filter, please check your input data.")}r.startDate=r.first.startDate,r.endDate=r.last.endDate,r.resumeEvents(),r.isContinuous?(r.adjustedStart=i.startDate,r.adjustedEnd=Ct.getNext(u>1?d[u-1].startDate:i.startDate,l,c,r.weekStartDay)):(r.adjustedStart=r.startDate,r.adjustedEnd=r.endDate),r.updateVisibleTickBoundaries(),r.updateTickCache(!0)}updateVisibleTickBoundaries(){const e=this,{count:n,unit:r,startDate:i,endDate:o,weekStartDay:s,increment:a=1}=e,l=Ct.getNormalizedUnitDuration(i,r)*a,c=Ct.getNormalizedUnitDuration(o,r)*a;do{e.visibleTickStart=(i-e.adjustedStart)/l,e.autoAdjust&&(e.visibleTickStart=Math.floor(e.visibleTickStart)),e.visibleTickStart>=1&&(e.adjustedStart=Ct.getNext(e.adjustedStart,r,a,s))}while(e.visibleTickStart>=1);do{e.visibleTickEnd=n-(e.adjustedEnd-o)/c,n-e.visibleTickEnd>=1&&(e.adjustedEnd=Ct.getNext(e.adjustedEnd,r,-1,s))}while(n-e.visibleTickEnd>=1);e.fullTicks=!e.visibleTickStart&&e.visibleTickEnd===n}get viewPreset(){return this._viewPreset}set viewPreset(e){if(!((e=Em.getPreset(e))instanceof xm))throw new Error("TimeAxis must be configured with the ViewPreset instance that the Scheduler is using");this._viewPreset=e,Object.assign(this,{unit:e.bottomHeader.unit,increment:e.bottomHeader.increment||1,resolutionUnit:e.timeResolution.unit,resolutionIncrement:e.timeResolution.increment,mainUnit:e.mainHeader.unit,shiftUnit:e.shiftUnit||e.mainHeader.unit,shiftIncrement:e.shiftIncrement||1,defaultSpan:e.defaultSpan||1,presetName:e.id,headers:e.headers})}get weekStartDay(){var e;return null!=(e=this._weekStartDay)?e:Ct.weekStartDay}get resolution(){return{unit:this.resolutionUnit,increment:this.resolutionIncrement}}set resolution(e){this.resolutionUnit=e.unit,this.resolutionIncrement=e.increment}get resolutionUnit(){return this.forceFullTicks?this.unit:this._resolutionUnit}get resolutionIncrement(){return this.forceFullTicks?this.increment:this._resolutionIncrement}setTimeSpan(e,n,r=!1){n&&e-n==0&&(n=null);const i=this,{startDate:o,endDate:s}=i.getAdjustedDates(e,n);if(i.startDate-o!=0||i.endDate-s!=0)return i.reconfigure({startDate:o,endDate:s},!1,r)}shift(e,n=this.shiftUnit){const r=this;let{startDate:i,endDate:o}=r;r.isFiltered&&(i=r.allRecords[0].startDate,o=r.allRecords[r.allCount-1].endDate);let s=0;do{i=Ct.add(i,e,n),o=Ct.add(o,e,n)}while(s++<r.maxTraverseTries&&!1===r.setTimeSpan(i,o,{preventThrow:!0}))}shiftNext(e=this.shiftIncrement){this.shift(e)}shiftPrevious(e=this.shiftIncrement){this.shift(-e)}filterBy(e,n=this){this.filters.clear(),super.filterBy(((r,i)=>e.call(n,r.data,i)))}filter(){const e=this,n=super.filter(...arguments);return e.maintainFilter||0!==e.count||(e.resumeEvents(),e.trigger("invalidFilter"),e.disableFilters()),n}disableFilters(){this.filters.forEach((e=>e.disabled=!0)),this.filter()}triggerFilterEvent(e){const n=this;e.filters.count?n.continuous=!1:n.continuous=n.originalContinuous,n.updateTickCache(),super.triggerFilterEvent(e)}get isContinuous(){return!1!==this.continuous&&!this.isFiltered}getAdjustedDates(e,n,r=!1){const i=this;return n&&e-n==0&&(n=null),e=e||i.startDate,n=n||Ct.add(e,i.defaultSpan,i.mainUnit),i.autoAdjust||r?{startDate:i.floorDate(e,!1,i.autoAdjust?i.mainUnit:i.unit,1),endDate:i.ceilDate(n,!1,i.autoAdjust?i.mainUnit:i.unit,1)}:{startDate:e,endDate:n}}get startDate(){return this._start||(this.first?new Date(this.first.startDate):null)}set startDate(e){this._start=Ct.parse(e)}get endDate(){return this._end||(this.last?new Date(this.last.endDate):null)}set endDate(e){e&&(this._end=Ct.parse(e))}get startMS(){return this._startMS}get endMS(){return this._endMS}floorDate(e,n,r,i){const o=this,s=(n=!1!==n)?Ct.clone(o.startDate):null,a=i||o.resolutionIncrement,l=r||(n?o.resolutionUnit:o.mainUnit),snap=(e,n)=>Math.floor(e/n)*n;if(n){const n=snap(Ct.diff(s,e,l),a);return Ct.add(s,n,l,!1)}const c=Ct.clone(e);if("week"===l){const e=c.getDay()||7,n=o.weekStartDay||7;Ct.add(Ct.startOf(c,"day",!1),e>=n?n-e:-(7-n+e),"day",!1),c.getDay()!==n&&23===c.getHours()&&Ct.add(c,1,"hour",!1)}else{Ct.startOf(c,l,!1);const e=["day","year"].includes(l)?1:0,n="day"===l?"date":l,r=snap(Ct.get(c,n)-e,a)+e;Ct.set(c,n,r)}return c}roundDate(e,n,r=this.resolutionUnit,i=this.resolutionIncrement||1){const o=this,s=Ct.clone(e);switch(n=Ct.clone(n||o.startDate),r){case"week":{Ct.startOf(s,"day",!1);let e,n=s.getDay()-o.weekStartDay;return n<0&&(n=7+n),e=1===Math.round(n/7)?7-n:-n,Ct.add(s,e,"day",!1)}case"month":{const e=Ct.diff(n,s,"month")+Ct.as("month",s.getDay()/Ct.daysInMonth(s)),r=Math.round(e/i)*i;return Ct.add(n,r,"month",!1)}case"quarter":return Ct.startOf(s,"month",!1),Ct.add(s,3-s.getMonth()%3,"month",!1);default:{const e=Ct.as(r,Ct.diff(n,s)),o=Ct.as(r,n.getTimezoneOffset()-s.getTimezoneOffset(),"minute"),a=Math.round((e+o)/i)*i;return Ct.add(n,a-o,r,!1)}}}ceilDate(e,n,r,i){const o=this;n=!1!==n,i=i||(n?o.resolutionIncrement:1);const s=r||(n?o.resolutionUnit:o.mainUnit),a=Ct.clone(e);let l=!1;switch(s){case"minute":l=!Ct.isStartOf(a,"minute");break;case"hour":l=!Ct.isStartOf(a,"hour");break;case"day":case"date":l=!Ct.isStartOf(a,"day");break;case"week":Ct.startOf(a,"day",!1),l=a.getDay()!==o.weekStartDay||!Ct.isEqual(a,e);break;case"month":Ct.startOf(a,"day",!1),l=1!==a.getDate()||!Ct.isEqual(a,e);break;case"quarter":Ct.startOf(a,"day",!1),l=a.getMonth()%3!=0||1!==a.getDate()||!Ct.isEqual(a,e);break;case"year":Ct.startOf(a,"day",!1),l=0!==a.getMonth()||1!==a.getDate()||!Ct.isEqual(a,e)}return l?Ct.getNext(a,s,i,o.weekStartDay):a}get include(){return this._include}set include(e){const n=this;n._include=e,n.continuous=!e,n.isConfiguring||(n.startDate=n._configuredStartDate,n.endDate=n._configuredEndDate,n.internalOnReconfigure(),n.trigger("includeChange"))}processExclusion(e,n,r){const{include:i}=this;return!!i&&Object.entries(i).some((([i,o])=>{if(!o)return!1;const{from:s,to:a}=o;if(Ct.compareUnits("day",r)>=0&&Ct.getLargerUnit(i)===r&&(s&&Ct.set(e,i,s),a)){let e=r;"day"===r&&(e="date"),Ct.set(n,{[e]:Ct.get(n,e)-1,[i]:a})}if(Ct.compareUnits(i,r)>=0){const n="day"===i?e.getDay():Ct.get(e,i);if(s&&n<s||a&&n>=a)return!0}}))}initExclusion(){Object.entries(this.include).forEach((([e,n])=>{if(n){const{from:r,to:i}=n;n.lengthFactor=Ct.getUnitToBaseUnitRatio(e,Ct.getLargerUnit(e))/(i-r),n.lengthFactorExcl=Ct.getUnitToBaseUnitRatio(e,Ct.getLargerUnit(e))/(i-r-1),n.center=r+r/(n.lengthFactor-1)}}))}updateGenerateTicks(){this.isConfiguring||this.reconfigure(this)}_generateTicks(e,n,r=this.unit,i=this.increment){const o=this,s=[],a=Boolean(o.include);let l,c,d,u=0,{startDate:h,endDate:g}=o.getAdjustedDates(e,n);for(o.tickCache={},a&&o.initExclusion();h<g;){if(l=Ct.getNext(h,r,i,o.weekStartDay),!o.autoAdjust&&l>g&&(l=g),"hour"===r&&i>1&&s.length>0&&0===u){const e=s[s.length-1];u=(e.startDate.getHours()+i)%24-e.endDate.getHours(),0!==u&&(l=Ct.add(l,u,"hour"))}d=!1,a?(c=new Date(l.getTime()),d=o.processExclusion(h,l,r)):c=l,d||(s.push({id:s.length+1,startDate:h,endDate:l}),o.tickCache[h.getTime()]=s.length-1),h=c}return s}get visibleTickTimeSpan(){const e=this;return e.isContinuous?e.visibleTickEnd-e.visibleTickStart:e.count}getTickFromDate(e){var n,r;const i=this,o=i.records,s=null!=(r=null==(n=e.getTime)?void 0:n.call(e))?r:e;let a,l,c,d,u=0,h=o.length-1;if(!o.length||s<o[0].startDateMS||s>o[h].endDateMS)return-1;if(i.isContinuous){for(;u<h;)a=u+h+1>>1,s>o[a].endDateMS?u=a+1:s<o[a].startDateMS?h=a-1:u=a;return l=o[u],c=l.startDateMS,s>c&&(d=l.endDateMS,u+=(s-c)/(d-c)),Math.min(Math.max(u,i.visibleTickStart),i.visibleTickEnd)}for(let e=0;e<=h;e++)if(d=o[e].endDateMS,s<=d)return c=o[e].startDateMS,l=e+(s>c?(s-c)/(d-c):0),l}getDateFromTick(e,n){const r=this;if(e===r.visibleTickEnd)return r.endDate;const i=Math.floor(e),o=e-i,s=r.getAt(i);if(!s)return null;const a=0===i&&r.isContinuous?r.adjustedStart:s.startDate,l=i===r.count-1&&r.isContinuous?r.adjustedEnd:s.endDate;let c=Ct.add(a,o*(l-a),"millisecond");return n&&(c=r[n+"Date"](c)),c}get ticks(){return this.records}updateTickCache(e=!1){const n=this;n.count?(n._start=n.first.startDate,n._end=n.last.endDate,n._startMS=n.startDate.getTime(),n._endMS=n.endDate.getTime()):n._start=n._end=n._startMs=n._endMS=null,e||(n.tickCache={},n.forEach(((e,r)=>n.tickCache[e.startDate.getTime()]=r)))}dateInAxis(e,n=!1){const r=this,i=r.startDate,o=r.endDate;if(r.isContinuous)return n?Ct.betweenLesserEqual(e,i,o):Ct.betweenLesser(e,i,o);{const i=r.getCount();let o,s,a;for(let l=0;l<i;l++)if(a=r.getAt(l),o=a.startDate,s=a.endDate,n&&e<=s||!n&&e<s)return e>=o}return!1}timeSpanInAxis(e,n){const r=this;return n&&n.getTime()!==e.getTime()?r.isContinuous?Ct.intersectSpans(e,n,r.startDate,r.endDate):e<r.startDate&&n>r.endDate||r.getTickFromDate(e)!==r.getTickFromDate(n):this.dateInAxis(e,!0)}isTimeSpanInAxis(e){var n;const r=this,{startMS:i,endMS:o}=r,{startDateMS:s}=e,a=null!=(n=e.endDateMS)?n:e.meta.endDateCached;if(!s||!a)return!1;if(a===s)return r.dateInAxis(e.startDate,!0);if(r.isContinuous)return a>i&&s<o;const l=r.getTickFromDate(e.startDate),c=r.getTickFromDate(e.endDate);return!(l===r.count&&Ct.isEqual(e.startDate,r.last.endDate)||0===c&&Ct.isEqual(e.endDate,r.first.startDate))&&(s<i&&a>o||l!==c)}forEachAuxInterval(e,n=1,r,i=this){const o=this.endDate;let s,a=this.startDate,l=0;if(a>o)throw new Error("Invalid time axis configuration");for(;a<o;)s=Ct.min(Ct.getNext(a,e,n,this.weekStartDay),o),r.call(i,a,s,l,s>=o),a=s,l++}};km._$name="TimeAxis";var Tm=class extends(Localizable_default()){static get $name(){return"RecurrenceLegend"}static get allDaysValueAsArray(){return["SU","MO","TU","WE","TH","FR","SA"]}static get allDaysValue(){return this.allDaysValueAsArray.join(",")}static get workingDaysValue(){return this.allDaysValueAsArray.filter(((e,n)=>!Ct.nonWorkingDays[n])).join(",")}static get nonWorkingDaysValue(){return this.allDaysValueAsArray.filter(((e,n)=>Ct.nonWorkingDays[n])).join(",")}static getLegend(e,n){const r=this,{timeSpan:i,interval:o,days:s,monthDays:a,months:l,positions:c}=e,d=n||i.startDate,u={interval:o};let h;switch(e.frequency){case"DAILY":return 1===o?r.L("L{Daily}"):r.L("L{Every {0} days}",u);case"WEEKLY":return s&&s.length?u.days=r.getDaysLegend(s):d&&(u.days=Ct.getDayName(d.getDay())),r.L(1===o?"L{Weekly on {1}}":"L{Every {0} weeks on {1}}",u);case"MONTHLY":return s&&s.length&&c&&c.length?u.days=r.getDaysLegend(s,c):a&&a.length?(a.sort(((e,n)=>e-n)),u.days=r.arrayToText(a)):d&&(u.days=d.getDate()),r.L(1===o?"L{Monthly on {1}}":"L{Every {0} months on {1}}",u);case"YEARLY":return s&&s.length&&c&&c.length?u.days=r.getDaysLegend(s,c):u.days=d.getDate(),l&&l.length?(l.sort(((e,n)=>e-n)),h=l.length>2?e=>Ct.getMonthShortName(e-1):e=>Ct.getMonthName(e-1),u.months=r.arrayToText(l,h)):u.months=Ct.getMonthName(d.getMonth()),r.L(1===o?"L{Yearly on {1} of {2}}":"L{Every {0} years on {1} of {2}}",u)}}static getDaysLegend(e,n){const r=this,i={position:""};let o;if(n&&n.length&&(i.position=r.arrayToText(n,(e=>r.L(`L{position${e}}`)))),e.length)switch(e.sort(((e,n)=>Xp.decodeDay(e)[0]-Xp.decodeDay(n)[0])),e.join(",")){case r.allDaysValue:i.days=r.L("L{day}");break;case r.workingDaysValue:i.days=r.L("L{weekday}");break;case r.nonWorkingDaysValue:i.days=r.L("L{weekend day}");break;default:o=e.length>2?e=>Ct.getDayShortName(Xp.decodeDay(e)[0]):e=>Ct.getDayName(Xp.decodeDay(e)[0]),i.days=r.arrayToText(e,o)}return r.L("L{daysFormat}",i)}static arrayToText(e,n){return n&&(e=e.map(n)),e.join(", ").replace(/,(?=[^,]*$)/,this.L("L{ and }"))}};Tm._$name="RecurrenceLegend";var AttachToProjectMixin_default=e=>class AttachToProjectMixin extends e{static get $name(){return"AttachToProjectMixin"}async afterConstruct(){super.afterConstruct();const e=this,n=e.client||e.grid,{project:r}=n;n.projectSubscribers.push(e),r&&(e.attachToProject(r),e.attachToResourceStore(r.resourceStore),e.attachToEventStore(r.eventStore),e.attachToAssignmentStore(r.assignmentStore),e.attachToDependencyStore(r.dependencyStore),e.attachToCalendarManagerStore(r.calendarManagerStore))}attachToProject(e){this.detachListeners("project"),this._project=e}attachToEventStore(e){this.detachListeners("eventStore")}attachToResourceStore(e){this.detachListeners("resourceStore")}attachToAssignmentStore(e){this.detachListeners("assignmentStore")}attachToDependencyStore(e){this.detachListeners("dependencyStore")}attachToCalendarManagerStore(e){this.detachListeners("calendarManagerStore")}get project(){return this._project}get calendarManagerStore(){return this.project.calendarManagerStore}get assignmentStore(){return this.project.assignmentStore}get resourceStore(){return this.project.resourceStore}get eventStore(){return this.project.eventStore}get dependencyStore(){return this.project.dependencyStore}},Mm=["assignmentStore","dependencyStore","eventStore","resourceStore"],ProjectConsumer_default=e=>{var n,r;return r=class extends(e||re){constructor(){super(...arguments),((e,n,r)=>{if(n.has(e))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(e):n.set(e,r)})(this,n,void 0)}static get $name(){return"ProjectConsumer"}static get declarable(){return["projectStores"]}static get configurable(){return{projectModelClass:Cm,project:{},destroyStores:null,projectSubscribers:[]}}startConfigure(e){this.getConfig("project"),super.startConfigure(e)}changeProject(e,n){const r=this,{projectStoreNames:i,projectDataNames:o}=r.constructor;if(r.projectCallbacks=new Set,e){if(r.buildingProjectConfig=!0,!e.isModel){if(r.isConfiguring){r._project=e;const{crudManager:n}=r;if(n){const{isCrudManager:e}=n;for(const o of i)n[o]&&(r[o]=n[o],e||delete n[o])}r.getConfig("projectStores");for(const e of o)r.getConfig(e)}const{eventStore:n}=e;let{_sharedProject:s}=r;if(n&&!n.isEventStoreMixin&&n.autoLoad&&!n.count&&(n.autoLoad=!1,r.delayAutoLoad=!0),s&&Mm.some((n=>e[n]&&e[n]!==s[n]))){for(const n of Mm)e[n]&&e[n]===s[n]&&(e[n]=e[n].chain());s=null}e=s||new r.projectModelClass(e),delete r._project}r.buildingProjectConfig=!1}return e}updateProject(e,n){var r;const i=this,{projectListeners:o,crudManager:s}=i;if(i.detachListeners("projectConsumer"),delete i._crudManager,e){o.thisObj=i,e.ion(o),e.isCrudManager?i.crudManager=e:s&&(s.project=e,i.crudManager=s),i.projectSubscribers.forEach((n=>n.attachToProject(e)));for(const n of i.constructor.projectStoreNames)i[n]=e[n];i.delayAutoLoad&&(e.eventStore.autoLoad=!0,e.eventStore.load()),null==(r=e.stm)||r.ion({name:"projectConsumer",restoringStart:"onProjectRestoringStart",restoringStop:"onProjectRestoringStop",thisObj:i})}i.trigger("projectChange",{project:e})}changeCrudManager(e){if(!this.buildingProjectConfig)return super.changeCrudManager(e);this._crudManager=e.isCrudManager?e:Object.assign({},e)}onProjectDataReady(){const e=this;e.whenVisible((()=>{e.projectCallbacks.size&&(e.projectCallbacks.forEach((e=>e())),e.projectCallbacks.clear())}),null,null,"onProjectDataReady")}onProjectRestoringStart({stm:e}){const{rawQueue:r}=e;r.length&&r[r.length-1].length>1&&(__privateSet(this,n,!0),this.suspendRefresh())}onProjectRestoringStop(){var e,r,i;__accessCheck(e=this,r=n,"read from private field"),(i?i.call(e):r.get(e))&&(__privateSet(this,n,!1),this.resumeRefresh(!0))}onBeforeTimeZoneChange(){}onTimeZoneChange({timeZone:e,oldTimeZone:n}){const r=this;if(r.startDate&&r.timeAxis.timeZone!==e){const i=null!=n?ll.fromTimeZone(r.startDate,n):r.startDate;r.startDate=null!=e?ll.toTimeZone(i,e):i,r.timeAxis.timeZone=e}}whenProjectReady(e){this.isEngineReady?e():this.projectCallbacks.add(e)}get isEngineReady(){var e,n;return Boolean(null==(n=(e=this.project).isEngineReady)?void 0:n.call(e))}doDestroy(){super.doDestroy(),this.destroyStores&&!this.project.isDestroyed&&this.project.destroy()}get projectStores(){const{projectStoreNames:e}=this.constructor;return e.map((e=>this[e]))}static get projectStoreNames(){return Object.keys(this.projectStores)}static get projectDataNames(){return this.projectStoreNames.reduce(((e,n)=>{const{dataName:r}=this.projectStores[n];return r&&e.push(r),e}),[])}static setupProjectStores(e,n){const{projectStores:r}=e;if(r){const e={name:"projectConsumer",dataReady:"onProjectDataReady",change:"relayProjectDataChange",beforeTimeZoneChange:"onBeforeTimeZoneChange",timeZoneChange:"onTimeZoneChange"},i={projectListeners:e};let o;for(const s in r){const{dataName:a}=r[s];i[s]=i[a]=null,a&&(Object.defineProperty(n.class.prototype,a,{configurable:!0,get(){var e;return null==(e=this.project[s])?void 0:e.records}}),this.createDataUpdater(s,a,o,n)),this.createStoreDescriptor(n,s,r[s],e),o=a}this.setupConfigs(n,i)}}static createDataUpdater(e,n,r,i){i.class.prototype[`update${w.capitalize(n)}`]=function(i){const{project:o}=this;r&&this.getConfig(r),this.buildingProjectConfig?o[`${n}Data`]=i:o[e].data=i}}static createStoreDescriptor(e,n,{listeners:r},i){const{prototype:o}=e.class,s=w.capitalize(n);i[`${n}Change`]=function({store:e}){this[n]=e},o[`change${s}`]=function(e,i){const o=this,{project:a}=o,l=null==e?void 0:e.project;return o.buildingProjectConfig?((null==l?void 0:l.isProjectModel)&&(o._sharedProject=l),void(a[n]=e)):(o.initializingProject||a[n]!==e&&(a[`set${s}`](e),e=a[n]),e!==i&&(r&&(r.thisObj=o,r.name=`${n}Listeners`,o.detachListeners(r.name),e.ion(r)),o[`_${n}`]=e,o.projectSubscribers.forEach((n=>{var r;null==(r=n[`attachTo${s}`])||r.call(n,e)})),o[`_${n}`]=null),e)}}relayProjectDataChange(e){if(!e.isExpand&&!e.isCollapse||e.records[0].fieldMap.expanded.persist)return this.trigger("dataChange",{project:e.source,...e,source:this})}get widgetClass(){}},n=new WeakMap,r},Am=class extends re{static get defaultConfig(){return{nbrOfBandsByResource:{},bandIndexToPxConvertFn:null,bandIndexToPxConvertThisObj:null}}clearCache(e){e?delete this.nbrOfBandsByResource[e.id]:this.nbrOfBandsByResource={}}applyLayout(e,n){return this.nbrOfBandsByResource[n.id]=this.layoutEventsInBands(e,n)}layoutEventsInBands(e,n){throw new Error("Implement in subclass")}};Am._$name="HorizontalLayout";var PackMixin_default=e=>class PackMixin extends(e||re){static get $name(){return"PackMixin"}static get defaultConfig(){return{coordProp:"top",sizeProp:"height",inBandCoordProp:"inBandTop",inBandSizeProp:"inBandHeight"}}isSameGroup(e,n){return!this.grouped||e.group===n.group}packEventsInBands(e,n){const r=this,{coordProp:i,sizeProp:o}=r;let s,a,l,c;for(let d=0,u=e.length;d<u;d++){if(a=e[d],s=r.findStartSlot(e,a),l=r.getCluster(e,d),l.length>1){for(a[i]=s.start,a[o]=s.end-s.start,c=1;c<l.length-1&&l[c+1].start-a.start==0;)c++;const n=r.findStartSlot(e,l[c]);n&&n.start<.8&&(l.length=c)}const u=l.length,h=(s.end-s.start)/u;for(c=0;c<u;c++)n(l[c],c,s,h);d+=u-1}return 1}findStartSlot(e,n){const{inBandSizeProp:r,inBandCoordProp:i,coordProp:o,sizeProp:s}=this,a=this.getPriorOverlappingEvents(e,n);let l;if(0===a.length)return{start:0,end:1};for(l=0;l<a.length;l++){const e=a[l],n=i in e?i:o,c=r in e?r:s;if(0===l&&e[n]>0)return{start:0,end:e[n]};if(e[n]+e[c]<(l<a.length-1?a[l+1][n]:1))return{start:e[n]+e[c],end:l<a.length-1?a[l+1][n]:1}}return!1}getPriorOverlappingEvents(e,n){const r=n.start,i=n.end,o=[];for(let s=0,a=e.indexOf(n);s<a;s++){const a=e[s];this.isSameGroup(a,n)&&Ct.intersectSpans(r,i,a.start,a.end)&&o.push(a)}return o.sort(this.sortOverlappers.bind(this)),o}sortOverlappers(e,n){const{coordProp:r}=this;return e[r]-n[r]}getCluster(e,n){const r=e[n],i=[r];if(n>=e.length-1)return i;let{start:o,end:s}=r;for(let a=n+1,l=e.length;a<l;a++){const n=e[a];if(!this.isSameGroup(n,r)||!Ct.intersectSpans(o,s,n.start,n.end))break;i.push(n),o=Ct.max(o,n.start),s=Ct.min(n.end,s)}return i}},Im=class extends(Am.mixin(PackMixin_default)){static get $name(){return"HorizontalLayoutPack"}static get configurable(){return{type:"pack"}}layoutEventsInBands(e){const n=this.packEventsInBands(e,((e,n,r,i)=>{e.height=i,e.top=r.start+n*i}));return e.forEach((e=>{Object.assign(e,this.bandIndexToPxConvertFn.call(this.bandIndexToPxConvertThisObj||this,e.top,e.height,e.eventRecord,e.resourceRecord))})),n}};Im._$name="HorizontalLayoutPack";var Fm=class extends Am{static get $name(){return"HorizontalLayoutStack"}static get configurable(){return{type:"stack"}}layoutEventsInBands(e,n,r=!1){let i=0;do{let n=0,o=e[0];for(;o;)r||(o.top=this.bandIndexToPxConvertFn.call(this.bandIndexToPxConvertThisObj||this,i,o.eventRecord,o.resourceRecord)),e.splice(n,1),n=this.findClosestSuccessor(o,e),o=e[n];i++}while(e.length>0);return i}findClosestSuccessor(e,n){const{endMS:r,group:i}=e,o=e.eventRecord&&0===e.eventRecord.duration;let s,a,l,c=1/0;for(let e=0,d=n.length;e<d;e++)if(l=n[e],a=l.startMS-r,a>=0&&a<c&&(a>0||l.endMS-l.startMS>0||!o)){if(this.grouped&&i!==l.group)break;s=e,c=a}return s}};Fm._$name="HorizontalLayoutStack";var Pm=class extends re{static get defaultConfig(){return{minuteHeight:8,minuteTop:2,hourHeight:8,hourTop:2,handLeft:10,div:document.createElement("div"),scheduler:null,template(e){return`<div class="b-sch-clockwrap b-sch-clock-${e.mode||this.mode} ${e.cls||""}">\n                    <div class="b-sch-clock">\n                        <div class="b-sch-hour-indicator">${Ct.format(e.date,"MMM")}</div>\n                        <div class="b-sch-minute-indicator">${Ct.format(e.date,"D")}</div>\n                        <div class="b-sch-clock-dot"></div>\n                    </div>\n                    <span class="b-sch-clock-text">${w.encodeHtml(e.text)}</span>\n                </div>`}}}generateContent(e){return this.div.innerHTML=this.template(e)}updateDateIndicator(e,n){const r=null==e?void 0:e.querySelector(".b-sch-hour-indicator"),i=null==e?void 0:e.querySelector(".b-sch-minute-indicator");n&&r&&i&&c.isBrowserEnv&&("hour"===this.mode?(r.style.transform=`rotate(${n.getHours()%12*30}deg)`,i.style.transform=`rotate(${6*n.getMinutes()}deg)`):(r.style.transform="none",i.style.transform="none"))}set mode(e){this._mode=e}get mode(){if(this._mode)return this._mode;const e=Ct.compareUnits(this.scheduler.timeAxisViewModel.timeResolution.unit,"day")<0,n=Ct.formatContainsHourInfo(this.scheduler.displayDateFormat);return e&&n?"hour":"day"}set template(e){this._template=e}get template(){return this._template}};Pm._$name="ClockTemplate";var Om=class extends sr{static get defaultConfig(){return{tooltipTemplate:e=>`\n                <div class="b-sch-tip-${e.valid?"valid":"invalid"}">\n                    ${e.startClockHtml}\n                    ${e.endClockHtml}\n                    <div class="b-sch-tip-message">${e.message}</div>\n                </div>\n            `,showTooltip:!0,showExactDropPosition:!1,store:null,dragHelperConfig:null,tooltipCls:"b-eventdrag-tooltip"}}static get configurable(){return{constrainDragToTimeline:!0,constrainDragToResource:!0,constrainDragToTimeSlot:!1,tip:{$config:["lazy","nullify"],value:{align:{align:"b-t",allowTargetOut:!0},autoShow:!0,updateContentOnMouseMove:!0}},throttleDragEvent:!0}}static get pluginConfig(){return{chain:["onPaint"]}}internalSnapToPosition(e){var n;const{dragData:r}=this;null==(n=this.snapToPosition)||n.call(this,{assignmentRecord:r.assignmentRecord,eventRecord:r.eventRecord,resourceRecord:r.newResource||r.resourceRecord,startDate:r.startDate,endDate:r.endDate,snapTo:e})}buildDragHelperConfig(){const e=this,{client:n,constrainDragToTimeline:r,constrainDragToResource:i,constrainDragToTimeSlot:o,dragHelperConfig:s={}}=e,{timeAxisViewModel:a,isHorizontal:l}=n,c=l?i:o,d=l?o:i;return e.externalDropTargetSelector&&(s.dropTargetSelector=`.b-timeaxissubgrid,${e.externalDropTargetSelector}`),M.merge({name:e.constructor.name,positioning:"absolute",lockX:d,lockY:c,minX:!0,maxX:!0,constrain:!1,cloneTarget:!r,removeProxyAfterDrop:!1,dragWithin:r?null:document.body,hideOriginalElement:!0,dropTargetSelector:".b-timelinebase",dropTargetCls:e.externalDropTargetSelector?"b-drop-target":"",outerElement:n.timeAxisSubGridElement,targetSelector:n.eventSelector,scrollManager:r?n.scrollManager:null,createProxy:n=>e.createProxy(n),snapCoordinates:({element:r,newX:i,newY:o})=>{const{dragData:s}=e;if(e.constrainDragToTimeline&&!e.constrainDragToTimeSlot&&(e.showExactDropPosition||a.snap)){const c=s.draggedEntities[0],d=e.getCoordinate(c,r,[i,o]),u=a.getDateFromPosition(d,"round"),{calendar:h}=c;if(!h||u&&h.isWorkingTime(u,Ct.add(u,c.fullDuration))){const e=u&&a.getPositionFromDate(u);u&&u>=n.startDate&&null!=e&&(l?i=e:o=e)}}const c={x:i,y:o};return e.internalSnapToPosition(c),c},internalListeners:{beforedragstart:"onBeforeDragStart",dragstart:"onDragStart",afterdragstart:"onAfterDragStart",drag:"onDrag",drop:"onDrop",abort:"onDragAbort",abortFinalized:"onDragAbortFinalized",reset:"onDragReset",thisObj:e}},s,{isElementDraggable:(n,r)=>(!s||!s.isElementDraggable||s.isElementDraggable(n,r))&&e.isElementDraggable(n,r)})}onPaint({firstPaint:e}){var n;const r=this,{client:i}=r;null==(n=r.drag)||n.destroy(),r.drag=Qa.new(r.buildDragHelperConfig()),e&&i.rowManager.ion({changeTotalHeight:()=>{var e;return r.updateYConstraint(null==(e=r.dragData)?void 0:e[`${i.scheduledEventName}Record`])},thisObj:r}),r.showTooltip&&(r.clockTemplate=new Pm({scheduler:i}))}doDestroy(){var e,n,r;null==(e=this.drag)||e.destroy(),null==(n=this.clockTemplate)||n.destroy(),null==(r=this.tip)||r.destroy(),super.doDestroy()}get tipId(){return`${this.client.id}-event-drag-tip`}changeTip(e,n){const r=this;if(e){const i=fc.reconfigure(n,fc.mergeConfigs({forElement:r.element,id:r.tipId,getHtml:r.getTipHtml.bind(r),cls:r.tooltipCls,owner:r.client},e),{owner:r.client,defaults:{type:"tooltip"}});return i.ion({innerHtmlUpdate:"updateDateIndicator",thisObj:r}),i}null==n||n.destroy()}createProxy(e){const n=e.cloneNode(!0);return delete n.id,n.classList.add(`b-sch-${this.client.mode}`),n}onBeforeDragStart({context:e,event:n}){var r;const i=this,{client:o}=i,s=i.getMinimalDragData(e,n),a=null==s?void 0:s[`${o.scheduledEventName}Record`],l=s.resourceRecord;if(o.readOnly||i.disabled||!a||!1===a.isDraggable||a.readOnly||(null==l?void 0:l.readOnly))return!1;e.pointerStartDate=o.getDateFromXY([e.startClientX,e.startPageY],null,!1);const c=!1!==i.triggerBeforeEventDrag(`before${o.capitalizedEventName}Drag`,{...s,event:n,context:{...e,...s}});return c&&(i.updateYConstraint(a,l),null==(r=o[`before${o.capitalizedEventName}DragStart`])||r.call(o,e,s)),c}onAfterDragStart({context:e,event:n}){}get isDragging(){var e;return null==(e=this.drag)?void 0:e.isDragging}get isActivelyDragging(){return this.isDragging&&!this.finalizing}onDragStart({context:e,event:n}){var r,i,o;const s=this,a=null!=(r=s.findClientFromTarget(n,e))?r:s.client;s.currentOverClient=a,s.drag.unifiedProxy=s.unifiedDrag,s.onMouseOverNewTimeline(a,!0);const l=s.dragData=s.getDragData(e);if(s.suspendElementRedrawing(e.element),s.showTooltip&&s.tip){const n=l.context.dragProxy?l.context.dragProxy.firstChild:e.element;s.tip.showBy(n)}s.triggerDragStart(l),null==(i=a[`after${a.capitalizedEventName}DragStart`])||i.call(a,e,l);const{eventMenu:c,taskMenu:d}=a.features,u=c||d;null==(o=null==u?void 0:u.hideContextMenu)||o.call(u,!1)}updateDateIndicator(){const{startDate:e,endDate:n}=this.dragData,{tip:r,clockTemplate:i}=this,o=r.element.querySelector(".b-sch-tooltip-enddate");i.updateDateIndicator(r.element,e),o&&i.updateDateIndicator(o,n)}findClientFromTarget(e,n){let{target:r}=e;if(/^touch/.test(e.type)){const e=Gt.from(n.element,null,!0).center;r=Gn.elementFromPoint(e.x,e.y)}const i=bs.fromElement(r,"timelinebase");return(null==i?void 0:i.isResourceHistogram)?null:i}onDrag({context:e,event:n}){const r=this,i=r.dragData,o=i.startDate;let s;if(s=r.constrainDragToTimeline?r.client:r.findClientFromTarget(n,i.context),r.updateDragContext(e,n),s){if(s!==r.currentOverClient&&r.onMouseOverNewTimeline(s),i.dirty||!r.throttleDragEvent){const e=i.valid;r.triggerEventDrag(i,o),e!==i.valid&&(i.context.valid=i.externalDragValidity=i.valid)}r.showTooltip&&r.tip&&(r.tip.lastAlignSpec.allowTargetOut=!i.valid,r.tip.realign())}}onMouseOverNewTimeline(e,n){const r=this,{drag:{lockX:i,lockY:o}}=r,s=[];r.currentOverClient.element.classList.remove("b-dragging-"+r.currentOverClient.scheduledEventName),e.element.classList.add("b-dragging-"+e.scheduledEventName),n||r.currentOverClient.scrollManager.stopMonitoring(),i||s.push({element:e.timeAxisSubGrid.scrollable.element,direction:"horizontal"}),o||s.push({element:e.scrollable.element,direction:"vertical"}),e.scrollManager.startMonitoring({scrollables:s,callback:r.drag.onScrollManagerScrollCallback}),r.currentOverClient=e}triggerBeforeEventDropFinalize(e,n,r){r.trigger(e,n)}onDrop({context:e,event:n}){var r;const i=this,{currentOverClient:o,dragData:s}=i;let a=!1;if(null==(r=i.tip)||r.hide(),e.valid=e.valid&&i.isValidDrop(s),i.drag.removeProxyAfterDrop=Boolean(s.externalDropTarget),e.valid&&s.startDate&&s.endDate){let r=!1;s.finalize=async n=>{r||s.async?await i.finalize(n):e.valid=e.valid&&n},i.triggerBeforeEventDropFinalize(`before${o.capitalizedEventName}DropFinalize`,{context:s,domEvent:n},o),r=!0,e.async=s.async,e.async||s.externalDropTarget||(a=s.startDate-s.origStart!=0||s.newResource!==s.resourceRecord)}e.async||i.finalize(s.valid&&e.valid&&a)}onDragAbort({context:e}){var n;const r=this;r.client.currentOrientation.onDragAbort({context:e,dragData:r.dragData}),r.resetDraggedElements(),null==(n=r.tip)||n.hide(),r.triggerDragAbort(r.dragData)}onDragAbortFinalized({context:e}){var n,r;const i=this;i.triggerDragAbortFinalized(i.dragData),null==(r=(n=i.client)[`after${i.client.capitalizedEventName}DragAbortFinalized`])||r.call(n,e,i.dragData)}onDragReset({source:e}){var n;const r=this,i=r.currentOverClient;null==i||i.scrollManager.stopMonitoring(),(null==(n=e.context)?void 0:n.started)&&(r.resetDraggedElements(),i.trigger(`${i.scheduledEventName}DragReset`)),null==i||i.element.classList.remove("b-dragging-"+r.currentOverClient.scheduledEventName),r.dragData=null}resetDraggedElements(){const{dragData:e}=this,{eventBarEls:n,draggedEntities:r}=e;this.resumeRecordElementRedrawing(e.record),r.forEach(((e,r)=>{this.resumeRecordElementRedrawing(e),n[r].classList.remove(this.drag.draggingCls),n[r].retainElement=!1})),e.context.element.retainElement=!1}onInternalInvalidDrop(e){var n;const r=this,{context:i}=r.drag;null==(n=r.tip)||n.hide(),r.triggerAfterDrop(r.dragData,!1),i.valid=!1,e&&r.drag.abort()}async finalize(e){const n=this,{dragData:r}=n;if(!r||n.finalizing)return;const{context:i,draggedEntities:o,externalDropTarget:s}=r;let a;return n.finalizing=!0,o.forEach(((e,i)=>{n.resumeRecordElementRedrawing(e),r.eventBarEls[i].classList.remove(n.drag.draggingCls),r.eventBarEls[i].retainElement=!1})),i.element.retainElement=!1,s&&r.valid||e?(a=n.updateRecords(r),!s&&M.isPromise(a)&&(i.async=!0,await a),r.valid?(i.async&&i.finalize(),s&&n.client.refreshRows(!1),n.triggerAfterDrop(r,!0)):n.onInternalInvalidDrop(!0)):n.onInternalInvalidDrop(i.async||r.async),n.finalizing=!1,a}updateDragContext(e,n){var r,i,o;const s=this,{drag:a}=s,l=s.dragData,c=s.currentOverClient,{isHorizontal:d}=c,[u]=l.draggedEntities,h=u.isAssignment?u.event:u,g=l.startDate,p=s.constrainDragToTimeSlot||(d?a.lockX:a.lockY);if(l.browserEvent=n,Object.assign(l,s.getProductDragContext(l)),p)l.timeDiff=0;else{let n;if(c.timeAxis.isContinuous){const o=c.isHorizontal?null!=(r=e.pageX)?r:e.startPageX:null!=(i=e.pageY)?i:e.startPageY,s=c.getDateFromCoordinate(o,null,!1,!0);n=l.timeDiff=s-e.pointerStartDate}else{const r=s.resolveStartEndDates(e.element);l.valid=Boolean(r.startDate&&r.endDate),l.valid&&(n=r.startDate-l.origStart)}null!==n&&(l.startDate=s.adjustStartDate(l.origStart,n),l.endDate=Ct.add(l.startDate,h.fullDuration),l.valid&&(l.timeDiff=l.startDate-l.origStart))}const m=l.dirty=l.dirty||g-l.startDate!=0;if(l.valid)if(s.constrainDragToTimeline&&(l.endDate<=c.timeAxis.startDate||l.startDate>=c.timeAxis.endDate))l.valid=!1,l.context.message=s.L("L{EventDrag.noDropOutsideTimeline}");else if(m||l.externalDropTarget){const r=l.externalDragValidity=!n||e.pageX&&s.checkDragValidity(l,n);r&&"boolean"!=typeof r?(l.valid=!1!==r.valid,l.context.message=r.message):(l.valid=!1!==r,l.context.message="")}else l.valid=!1!==l.externalDragValidity&&!1!==(null==(o=l.externalDragValidity)?void 0:o.valid);else l.valid=!1;l.context.valid=l.valid}suspendRecordElementRedrawing(e,n=!0){this.suspendElementRedrawing(this.getRecordElement(e),n),e.instanceMeta(this.client).retainElement=n}resumeRecordElementRedrawing(e){this.suspendRecordElementRedrawing(e,!1)}suspendElementRedrawing(e,n=!0){e&&(e.retainElement=n)}resumeElementRedrawing(e){this.suspendElementRedrawing(e,!1)}getDragData(e){const n=this,{client:r,drag:i}=n,o=n.setupProductDragData(e),{record:s,eventBarEls:a,draggedEntities:l}=o,{startEvent:c}=i,d=s.isAssignment?s.event:s,u=d.startDate,h=d.endDate,g=r.timeAxis,p=u<g.startDate,m=h>g.endDate,f=r.isSchedulerBase?r.multiEventSelect:r.selectionMode.multiSelect,b=n.getCoordinate(d,e.element,[e.elementStartX,e.elementStartY]),v=n.getCoordinate(d,e.element,[e.startClientX,e.startClientY]);n.suspendRecordElementRedrawing(s),l.forEach((e=>n.suspendRecordElementRedrawing(e))),s.isAssignment?r.selectAssignment(s,c.ctrlKey&&f):r.selectEvent(s,c.ctrlKey&&f);const y={context:e,...o,sourceDate:p?u:r.getDateFromCoordinate(b),screenSourceDate:r.getDateFromCoordinate(v,null,!1),startDate:u,endDate:h,timeDiff:0,origStart:u,origEnd:h,startsOutsideView:p,endsOutsideView:m,duration:h-u,browserEvent:c};return a.forEach((e=>e.classList.remove("b-sch-event-hover","b-active"))),a.length>1&&(e.relatedElements=a.slice(1)),y}setupConstraints(e,n,r,i){const o=this,s=!o.showExactDropPosition&&r>1?r:0;i?o.setXConstraint(e.left,e.right-n.width,s):o.setXConstraint(!0,!0,s),o.setYConstraint(e.top,e.bottom-n.height,0)}updateYConstraint(e,n){const r=this,{client:i}=r,{context:o}=r.drag,s=i.timeAxisViewModel.snapPixelAmount;if(o&&!r.drag.lockY){let a;if(!r.constrainDragToTimeline)return void r.setYConstraint(null,null,s);a=i.getScheduleRegion(n,e),r.setYConstraint(a.top,a.bottom-o.element.offsetHeight,s)}else r.setYConstraint(null,null,s)}setXConstraint(e,n,r){const{drag:i}=this;i.minX=e,i.maxX=n}setYConstraint(e,n,r){const{drag:i}=this;i.minY=e,i.maxY=n}adjustStartDate(e,n){const r=this.client.timeAxis.roundDate(new Date(e-0+n),!!this.client.snapRelativeToEventStartDate&&e);return this.constrainStartDate(r)}resolveStartEndDates(e){const n=this.currentOverClient,{timeAxis:r}=n,i=Gt.from(e.querySelector(n.eventInnerSelector),n.timeAxisSubGridElement),o=this.dragData,[s]=o.draggedEntities,a=s.isAssignment?s.event:s,{fullDuration:l}=a,c=n.fillTicks&&n.snapRelativeToEventStartDate;let{start:d,end:u}=n.getStartEndDatesFromRectangle(i,c?null:"round",l,!0);if(d&&u){if(c){const e=(a.startDate-Ct.startOf(a.startDate,r.unit))/(u-d)*i.width;i.deflate(e,0,0,e);const o=i.getStart(n.rtl,!n.isVertical);d=n.getDateFromCoordinate(o,null,!0),d=r.roundDate(d,a.startDate)}if(d=this.adjustStartDate(d,0),o.startsOutsideView)o.endsOutsideView||(d=u&&Ct.add(u,-l));else{if(!r.dateInAxis(d,!1)){const e=r.getTickFromDate(d);e>=0&&(d=r.getDateFromTick(e))}u=d&&Ct.add(d,l)}}return{startDate:d,endDate:u}}getTipHtml(){const e=this,{dragData:n,client:r,tooltipTemplate:i}=e,{startDate:o,endDate:s,draggedEntities:a}=n,l=r.getFormattedDate(o),c=r.getFormattedEndDate(s,o),{valid:d,message:u,element:h,dragProxy:g}=n.context,p=g?g.firstChild:h,m=a[0],f=m.isTask?m:m.event;return e.tip.lastAlignSpec.target=p,i({valid:d,startDate:o,endDate:s,startText:l,endText:c,dragData:n,message:u||"",[r.scheduledEventName+"Record"]:f,startClockHtml:e.clockTemplate.template({date:o,text:l,cls:"b-sch-tooltip-startdate"}),endClockHtml:f.isMilestone?"":e.clockTemplate.template({date:s,text:c,cls:"b-sch-tooltip-enddate"})})}updateConstrainDragToTimeSlot(e){const n=this.client.isHorizontal?"lockX":"lockY";this.drag&&(this.drag[n]=e)}updateConstrainDragToResource(e){const n=this;if(n.drag){const{constrainDragToTimeSlot:r}=n,{isHorizontal:i}=n.client;e&&(n.constrainDragToTimeline=!0),n.drag.lockY=i?e:r,n.drag.lockX=i?r:e}}updateConstrainDragToTimeline(e){this.isConfiguring||Object.assign(this.drag,{cloneTarget:!e,dragWithin:e?null:document.body,scrollManager:e?this.client.scrollManager:null})}constrainStartDate(e){const{dragData:n}=this,{dateConstraints:r}=n,i=n.eventRecord||n.taskRecord||n.draggedEntities[0];return(null==r?void 0:r.start)&&(e=Ct.max(r.start,e)),(null==r?void 0:r.end)&&(e=Ct.min(new Date(r.end-i.durationMS),e)),e}getElementFromContext(e){return e.grabbed||e.dragProxy||e.element}getRelatedRecords(e){return[]}getMinimalDragData(e,n){return{}}isValidDrop(e){throw new Error("Implement in subclass")}checkDragValidity(e){throw new Error("Implement in subclass")}updateRecords(e){throw new Error("Implement in subclass")}isElementDraggable(e,n){throw new Error("Implement in subclass")}getCoordinate(e,n,r){throw new Error("Implement in subclass")}setupProductDragData(e){throw new Error("Implement in subclass")}getProductDragContext(e){throw new Error("Implement in subclass")}getRecordElement(e){throw new Error("Implement in subclass")}};Om._$name="DragBase";var Lm={top:"b-t",right:"b100-t100",bottom:"t-b",left:"b0-t0"},_m=class extends(sr.mixin(Draggable_default,Droppable_default)){static get $name(){return"EventResize"}static get configurable(){return{draggingItemCls:"b-sch-event-wrap-resizing",resizingItemInnerCls:"b-sch-event-resizing",leftHandle:!0,rightHandle:!0,topHandle:!0,bottomHandle:!0,handleSize:null,dynamicHandleSize:!0,allowResizeToZero:null,reservedSpace:5,touchHandleSize:null,dragThreshold:0,dragTouchStartDelay:0,draggingClsSelector:".b-timeline-base",showTooltip:!0,showExactResizePosition:!1,validatorFn:()=>!0,validatorFnThisObj:null,tip:{$config:["lazy","nullify"],value:{autoShow:!1,axisLock:!0,trackMouse:!1,updateContentOnMouseMove:!0,hideDelay:0}},tooltipTemplate:e=>`\n                <div class="b-sch-tip-${e.valid?"valid":"invalid"}">\n                    ${e.startClockHtml}\n                    ${e.endClockHtml}\n                    <div class="b-sch-tip-message">${e.message}</div>\n                </div>\n            `,ignoreSelector:".b-sch-terminal",dragActiveCls:"b-resizing-event"}}static get pluginConfig(){return{chain:["render","onEventDataGenerated","isEventElementDraggable"]}}doDestroy(){var e;super.doDestroy(),null==(e=this.dragging)||e.destroy()}render(){const e=this,{client:n}=e;e.dragSelector=e.dragItemSelector=n.eventSelector,e.dragRootElement=e.dropRootElement=n.timeAxisSubGridElement,e.dragLock=n.isVertical?"y":"x"}isEventElementDraggable(e,n,r,i){const o=this,s=null==n?void 0:n.resizable;return!(!o.disabled&&s&&!n.isMilestone)||(!0!==s&&"start"!==s||!o.isOverStartHandle(i,e))&&(!0!==s&&"end"!==s||!o.isOverEndHandle(i,e))}onEventDataGenerated({eventRecord:e,wrapperCls:n,cls:r}){var i,o;e===(null==(o=null==(i=this.dragging)?void 0:i.context)?void 0:o.eventRecord)&&(n["b-active"]=n[this.draggingItemCls]=n["b-over-resize-handle"]=r["b-resize-handle"]=r[this.resizingItemInnerCls]=1)}onDragPointerMove(e){var n;const{client:r,dragging:i}=this,{visibleDateRange:o,isHorizontal:s}=r,a=s&&r.rtl,l=s?"X":"Y",c=globalThis[`page${l}Offset`],d=e[`page${l}`]+((null==(n=i.context)?void 0:n.offset)||0),u=Gt.from(r.timeAxisSubGridElement,null,!0),h=u.getStart(a,s),g=u.getEnd(a,s);let p=r.getDateFromCoord({coord:d,local:!1});a?d-c>h?p=o.startDate:d<g&&(p=o.endDate):d-c<h?p=o.startDate:d-c>g&&(p=o.endDate),i.clientStartCoord=h,i.clientEndCoord=g,i.date=p,super.onDragPointerMove(e)}get isResizing(){return Boolean(this.dragging)}beforeDrag(e){const{client:n}=this,r=n.resolveTimeSpanRecord(e.itemElement),i=!n.isGanttBase&&n.resolveResourceRecord(n.isVertical?e.startEvent:e.itemElement);return!(this.disabled||n.readOnly||(null==i?void 0:i.readOnly)||r&&(r.readOnly||!r.project&&!r.isOccurrence)||!1===super.beforeDrag(e))&&(e.mousedownDate=e.date=n.getDateFromCoordinate(e.event["page"+(n.isHorizontal?"X":"Y")],null,!1),this.triggerBeforeResize(e))}dragStart(e){var n,r;const i=this,{client:o,tip:s}=i,{startEvent:a,itemElement:l}=e,c=o.scheduledEventName,d=o.resolveEventRecord(l),{isBatchUpdating:u,wrapStartDate:h,wrapEndDate:g}=d,p=null==(n=o.features.eventBuffer)?void 0:n.enabled,m=u?d.get("startDate"):d.startDate,f=u?d.get("endDate"):d.endDate,b="x"===i.dragLock,v=b&&o.rtl,y=i.isOverEndHandle(a,l),w=y?"endDate":"startDate",C=p?y?"wrapEndDate":"wrapStartDate":null,S=y?"startDate":"endDate",x=y?"setEndDate":"setStartDate",D=y?"setStartDate":"setEndDate",E=Gt.from(l),R=b?a.clientX:a.clientY,k=y?E.getEnd(v,b):E.getStart(v,b),T=e.context={eventRecord:d,element:l,timespanRecord:d,taskRecord:d,owner:i,valid:!0,oldValue:y?f:m,startDate:m,endDate:f,offset:p?0:k-R,edge:b?y?"right":"left":y?"bottom":"top",finalize:i.finalize,event:e.event,originalStartDate:m,originalEndDate:f,wrapStartDate:h,wrapEndDate:g,draggingEnd:y,toSet:w,wrapToSet:C,otherEnd:S,setMethod:x,setOtherMethod:D};d.meta.isResizing=!0,o.element.classList.add(...i.dragActiveCls.split(" ")),o.listenToBatchedUpdates||o.beginListeningForBatchedUpdates(),u||i.beginEventRecordBatch(d),i.setupProductResizeContext(T,a),i.triggerEventResizeStart(`${c}ResizeStart`,{[`${c}Record`]:d,event:a,...i.getResizeStartParams(T)},T),T.resizedRecord=(null==(r=o.resolveAssignmentRecord)?void 0:r.call(o,T.element))||d,s&&(s.show(),s.align=Lm[T.edge],s.showBy(i.getTooltipTarget(e)))}triggerBeforeResize(e){const{client:n}=this,r=n.resolveTimeSpanRecord(e.itemElement);return n.trigger(`before${n.capitalizedEventName}Resize`,{[`${n.scheduledEventName}Record`]:r,event:e.event,...this.getBeforeResizeParams({event:e.startEvent,element:e.itemElement})})}triggerEventResizeStart(e,n,r){var i,o;this.client.trigger(e,n),null==(o=(i=this.client)[`after${w.capitalize(e)}`])||o.call(i,r,n)}triggerEventResizeEnd(e,n){this.client.trigger(e,n)}triggerEventPartialResize(e,n){this.client.trigger(e,n)}triggerBeforeEventResizeFinalize(e,n){this.client.trigger(e,n)}dragEnter(e){var n;return(null==(n=e.context)?void 0:n.owner)===this}resizeEventPartiallyInternal(e,n){var r;const{client:i}=this,{toSet:o}=n;if(null==(r=i.features.eventBuffer)?void 0:r.enabled)if("startDate"===o){const r=n.startDate.getTime()-n.originalStartDate.getTime();e.wrapStartDate=new Date(n.wrapStartDate.getTime()+r)}else if("endDate"===o){const r=n.endDate.getTime()-n.originalEndDate.getTime();e.wrapEndDate=new Date(n.wrapEndDate.getTime()+r)}e.set(o,n[o])}applyDateConstraints(e,n,r){var i,o;const s=null==(i=r.dateConstraints)?void 0:i.start,a=null==(o=r.dateConstraints)?void 0:o.end;return(s||a)&&(e=Ct.constrain(e,s,a),r.snappedDate=Ct.constrain(r.snappedDate,s,a)),e}moveDrag(e){const n=this,{client:r,tip:i}=n,o="x"===n.dragLock,s=o?"X":"Y",a=r.scheduledEventName,{visibleDateRange:l,enableEventAnimations:c,timeAxis:d,weekStartDay:u}=r,h=o&&r.rtl,{resolutionUnit:g,resolutionIncrement:p}=d,{event:m,context:f}=e,{eventRecord:b}=f,v=f.offset*(h?-1:1),{isOccurrence:y}=b,w=b.get("startDate"),C=b.get("endDate"),S=m[`client${s}`]+v,x=Gt.from(r.timeAxisSubGridElement,null,!0),D=x.getStart(h,o),E=x.getEnd(h,o);f.event=m,m.isScroll&&(e.date=r.getDateFromCoordinate(m[`page${s}`]+v,null,!1));let R,k,{date:T}=e,{toSet:M,otherEnd:A,draggingEnd:I}=f;h?S>D?T=e.date=l.startDate:S<E&&(T=e.date=l.endDate):S<D?T=e.date=l.startDate:S>E&&(T=e.date=l.endDate),"endDate"===M?T<w&&(R=-1):T>C&&(R=1),R&&n.onDragEndSwitch&&(n.onDragEndSwitch(f,T,R),A=f.otherEnd,M=f.toSet),r.snapRelativeToEventStartDate&&(T=d.roundDate(T,f.oldValue)),f.snappedDate=Ct.round(T,d.resolution,null,u);const F=Ct.diff(T,f[A],g)*(I?-1:1);if(n.isEventDragCreate)f.tooNarrow=F<p/2;else if(F<p)if(n.allowResizeToZero)f.snappedDate=T=f[A];else{const e="startDate"===A?1:-1;f.snappedDate=T=d.roundDate(Ct.add(b.get(A),p*e,g)),k=!0}if(T=n.applyDateConstraints(T,b,f),(!f.date||T-f.date||k)&&(f.date=T,f[M]=n.showExactResizePosition||r.timeAxisViewModel.snap?f.snappedDate:T,f.valid=n.allowResizeToZero||f[M]-f["startDate"===M?"endDate":"startDate"]!=0,b.get(M)-f[M])){if(f.valid=n.checkValidity(f,m),f.message="",f.valid&&"boolean"!=typeof f.valid&&(f.message=f.valid.message,f.valid=f.valid.valid),f.valid=!1!==f.valid,f.valid){const i={[`${a}Record`]:b,startDate:w,endDate:C,element:e.itemElement,context:f};i[M]=f[M],n.triggerEventPartialResize(`${a}PartialResize`,i),y&&b.stores.push(r.eventStore),r.enableEventAnimations=!1,this.resizeEventPartiallyInternal(b,f),r.enableEventAnimations=c,y&&(b.stores.length=0)}f.tooNarrow&&(f.valid=!1)}i&&(i.align=Lm[f.edge],i.alignTo(n.getTooltipTarget(e))),super.moveDrag(e)}dragEnd(e){const{context:n}=e;n&&(n.event=e.event),e.aborted?null==n||n.finalize(!1):this.isEventDragCreate||e.started||cn.getPagePoint(e.event).equals(cn.getPagePoint(e.startEvent))||(this.dragStart(e),this.cleanup(e.context,!1))}async dragDrop({context:e,event:n}){var r;e[e.toSet]=e.snappedDate;const{client:i}=this,{startDate:o,endDate:s}=e;let a;null==(r=this.tip)||r.hide(),e.valid=o&&s&&(this.allowResizeToZero||s-o>0)&&e[e.toSet]-e.oldValue&&!1!==e.valid,e.valid&&(this.triggerBeforeEventResizeFinalize(`before${i.capitalizedEventName}ResizeFinalize`,{context:e,event:n,[`${i.scheduledEventName}Record`]:e.eventRecord}),a=!0),e.async||await e.finalize(a)}async finalize(e){const n=this.owner,r=this,{eventRecord:i,oldValue:o,toSet:s}=r,{snapRelativeToEventStartDate:a,timeAxis:l}=n.client;let c=!1;e?(a&&(r[s]=r.snappedDate=l.roundDate(r.date,o)),c=await n.internalUpdateRecord(r,i)):(n.cancelEventRecordBatch(i),i.isOccurrence&&i.resources.forEach((e=>n.client.repaintEventsForResource(e)))),n.cleanup(r,c)}cleanup(e,n){var r;const i=this,{client:o}=i,{element:s,eventRecord:a}=e,l=o.scheduledEventName;a.meta.isResizing=!1,o.endListeningForBatchedUpdates(),null==(r=i.tip)||r.hide(),i.unHighlightHandle(s),o.element.classList.remove(...i.dragActiveCls.split(" ")),i.triggerEventResizeEnd(`${l}ResizeEnd`,{changed:n,[`${l}Record`]:a,...i.getResizeEndParams(e)})}async internalUpdateRecord(e,n){var r;const{client:i}=this,{generation:o}=n;if(n.isOccurrence)i.endListeningForBatchedUpdates(),n[n.batching>1?"endBatch":"cancelBatch"](),n.set(Gp.prototype.inSetNormalize.call(n,{startDate:e.startDate,endDate:e.endDate}));else{const o={[e.toSet]:e[e.toSet]};if(n.isEntity){const{startDate:s,endDate:a,draggingEnd:l}=e;e.duration=o.duration=n.run("calculateProjectedDuration",s,a),o[e.toSet]=n.run("calculateProjectedXDateWithDuration",l?s:a,l,e.duration);const c=!n[e.otherEnd];c&&(o[e.otherEnd]=e[e.otherEnd]),n.set(o),i.endListeningForBatchedUpdates(),this.cancelEventRecordBatch(n),(null==(r=i.features.eventBuffer)?void 0:r.enabled)&&(n[e.wrapToSet]=null);const d=[];c&&d.push(n[e.setOtherMethod](o[e.otherEnd],!1)),d.push(n[e.setMethod](o[e.toSet],!1)),await Promise.all(d),n.endBatch()}else{const r=Object.assign({},n.meta.batchChanges);delete r[e.toSet],i.endListeningForBatchedUpdates(),this.cancelEventRecordBatch(n),n.set(r),n[e.setMethod](o[e.toSet],!1)}}return await i.project.commitAsync(),n.generation!==o}onDragItemMouseMove(e){"touch"===e.pointerType||this.handleSelector||this.checkResizeHandles(e)}checkResizeHandles(e){const n=this,{overItem:r}=n;if(r&&!n.client.readOnly&&(!n.allowResize||n.allowResize(r,e))){const i=n.client.resolveTimeSpanRecord(r);if(null==i?void 0:i.readOnly)return;n.isOverAnyHandle(e,r)?n.highlightHandle():n.unHighlightHandle()}}onDragItemMouseLeave(e,n){this.unHighlightHandle(n)}highlightHandle(){var e,n;const{overItem:r,client:i}=this;(null!=(n=null==(e=r.syncIdMap)?void 0:e[i.scheduledEventName])?n:r.querySelector(i.eventInnerSelector)).classList.add("b-resize-handle"),r.classList.add("b-over-resize-handle")}unHighlightHandle(e=this.overItem){var n,r;if(e){const i=this,o=null!=(r=null==(n=e.syncIdMap)?void 0:n[i.client.scheduledEventName])?r:e.querySelector(i.client.eventInnerSelector);o&&o.classList.remove("b-resize-handle",i.resizingItemInnerCls),e.classList.remove("b-over-resize-handle",i.draggingItemCls)}}isOverAnyHandle(e,n){return this.isOverStartHandle(e,n)||this.isOverEndHandle(e,n)}isOverStartHandle(e,n){var r;return null==(r=this.getHandleRect("start",e,n))?void 0:r.contains(cn.getPagePoint(e))}isOverEndHandle(e,n){var r;return null==(r=this.getHandleRect("end",e,n))?void 0:r.contains(cn.getPagePoint(e))}getHandleRect(e,n,r){if(this.overItem){if(!(r=n.target.closest(`.${this.client.eventCls}`)||r.querySelector(`.${this.client.eventCls}`)))return;const i=this,o="start"===e,{client:s}=i,a=Boolean(s.rtl),l=i.dragLock,d="x"===l,u=d?"width":"height",h=(d?o&&!a?"left":"right":o?"top":"bottom")+"Handle",{offsetWidth:g}=r,p=s.resolveTimeSpanRecord(r),m=null==p?void 0:p.isResizable,f=Gt.from(r),b=f.clone(),v=globalThis.getComputedStyle(r,":before"),y=(i.handleSelector||c.isHoverableDevice?void 0:i.touchHandleSize)||i.handleSize||parseFloat(v[u]),w=i.handleVisibilityThreshold||2*i.handleSize,C=i.dynamicHandleSize?i.reservedSpace/2:0,S=[0,0,0,0];if(!i.disabled&&i[h]&&(g>=w||i.dynamicHandleSize)&&(!0===m||m===e)){if(!d&&!o||d&&a===o?(b[l]+=f[u]-y,S[d?3:0]=f[u]/2+C):S[d?1:2]=f[u]/2+C,f.deflate(...S),b[u]=y,b.constrainTo(f),b[u])return b}}}setupDragContext(e){const n=this;if(n.overItem&&n.isOverAnyHandle(e,n.overItem)&&n.isElementResizable(n.overItem,e)){const r=super.setupDragContext(e);return r.scrollManager=n.client.scrollManager,r}}changeHandleSize(){A.deprecate("Scheduler","6.0.0","Handle size is from CSS")}changeTouchHandleSize(){A.deprecate("Scheduler","6.0.0","Handle size is from CSS")}changeTip(e,n){var r;const i=this;return i.showTooltip?(e?(e.isTooltip?e.owner=i:e=fc.reconfigure(n,fc.mergeConfigs({id:i.tipId},e,{getHtml:i.getTipHtml.bind(i),owner:i.client},i.tip),{owner:i,defaults:{type:"tooltip"}}),e.ion({innerhtmlupdate:"updateDateIndicator",thisObj:i}),i.clockTemplate=new Pm({scheduler:i.client})):n&&(n.destroy(),null==(r=i.clockTemplate)||r.destroy()),e):null}isElementResizable(e,n){var r;const i=this,{client:o}=i,s=o.resolveTimeSpanRecord(e);if(o.readOnly)return!1;let a=null==s?void 0:s.isResizable;const l=null!=(r=null==e?void 0:e.syncIdMap[o.scheduledEventName])?r:e,c=n.target.closest('[class$="-handle"]');if(!a||c&&c!==l)return!1;if(!(e=n.target.closest(i.dragSelector)))return!1;const d=e.classList.contains("b-sch-event-startsoutside"),u=e.classList.contains("b-sch-event-endsoutside");if(!0===a){if(d&&u)return!1;if(d)a="end";else{if(!u)return i.isOverStartHandle(n,e)||i.isOverEndHandle(n,e);a="start"}}return!(d&&"start"===a||u&&"end"===a)&&!!(i.isOverStartHandle(n,e)&&"start"===a||i.isOverEndHandle(n,e)&&"end"===a)}updateDateIndicator(){const{clockTemplate:e}=this,{eventRecord:n,draggingEnd:r,snappedDate:i}=this.dragging.context,o=r?n.get("startDate"):i,s=r?i:n.get("endDate"),{element:a}=this.tip;e.updateDateIndicator(a.querySelector(".b-sch-tooltip-startdate"),o),e.updateDateIndicator(a.querySelector(".b-sch-tooltip-enddate"),s)}getTooltipTarget({itemElement:e,context:n}){const r=this,{rtl:i}=r.client,o=Gt.from(e,null,!0);return"x"===r.dragLock?(!i&&"right"===n.edge||i&&"left"===n.edge?o.x=o.right-1:o.x-=r.tip.anchorSize[0]/2,o.width=r.tip.anchorSize[0]/2):("bottom"===n.edge&&(o.y=o.bottom-1),o.height=r.tip.anchorSize[1]/2),{target:o}}basicValidityCheck(e,n){return e.startDate&&(e.endDate>e.startDate||this.allowResizeToZero)&&this.validatorFn.call(this.validatorFnThisObj||this,e,n)}getTipHtml({tip:e}){const n=this,{startDate:r,endDate:i,toSet:o,snappedDate:s,valid:a,message:l="",timespanRecord:c}=n.dragging.context;if(!r||!i)return e.html;const d={record:c,valid:a,message:l,startDate:r,endDate:i,[o]:s};return d.startText=n.client.getFormattedDate(d.startDate),d.endText=n.client.getFormattedDate(d.endDate),d.startClockHtml=n.clockTemplate.template({date:d.startDate,text:d.startText,cls:"b-sch-tooltip-startdate"}),d.endClockHtml=n.clockTemplate.template({date:d.endDate,text:d.endText,cls:"b-sch-tooltip-enddate"}),n.tooltipTemplate(d)}beginEventRecordBatch(e){e.beginBatch()}cancelEventRecordBatch(e){e.cancelBatch()}getBeforeResizeParams(e){const{client:n}=this;return{resourceRecord:n.resolveResourceRecord(n.isVertical?e.event:e.element)}}getResizeStartParams(e){return{resourceRecord:e.resourceRecord}}getResizeEndParams(e){return{resourceRecord:e.resourceRecord,event:e.event}}setupProductResizeContext(e,n){var r,i,o;const{client:s}=this,{element:a}=e,l=s.resolveEventRecord(a),c=null==(r=s.resolveResourceRecord)?void 0:r.call(s,a),d=null==(i=s.resolveAssignmentRecord)?void 0:i.call(s,a);Object.assign(e,{eventRecord:l,taskRecord:l,resourceRecord:c,assignmentRecord:d,dateConstraints:null==(o=s.getDateConstraints)?void 0:o.call(s,c,l)})}checkValidity({startDate:e,endDate:n,eventRecord:r,resourceRecord:i}){const{client:o}=this;return!o.allowOverlap&&r.resources.some((i=>!o.isDateRangeAvailable(e,n,r,i)))?{valid:!1,message:this.L("L{EventDrag.eventOverlapsExisting}")}:this.basicValidityCheck(...arguments)}get tipId(){return`${this.client.id}-event-resize-tip`}};_m._$name="EventResize",du.registerFeature(_m,!0,"Scheduler"),du.registerFeature(_m,!1,"ResourceHistogram");var TaskEditStm_default=e=>class TaskEditStm extends(e||re){static get $name(){return"TaskEditStm"}captureStm(e=!1){const n=this,r=n.project.getStm();n.hasStmCapture||(n.hasStmCapture=!0,n.stmInitiallyDisabled=r.disabled,n.stmInitiallyAutoRecord=r.autoRecord,n.stmInitiallyDisabled?(r.enable(),r.autoRecord=!1):(n.stmInitiallyAutoRecord&&(r.autoRecord=!1),r.isRecording&&r.stopTransaction()),e&&this.startStmTransaction())}startStmTransaction(){this.project.getStm().startTransaction()}commitStmTransaction(){const e=this,n=e.project.getStm();if(!e.hasStmCapture)throw new Error("Does not have STM capture, no transaction to commit");n.enabled&&(n.stopTransaction(),e.stmInitiallyDisabled&&n.resetQueue())}async rejectStmTransaction(){var e;const n=this.project.getStm(),{client:r}=this;if(!this.hasStmCapture)throw new Error("Does not have STM capture, no transaction to reject");n.enabled&&((null==(e=n.transaction)?void 0:e.length)?(r.suspendRefresh(),n.rejectTransaction(),await r.resumeRefresh(!0)):n.stopTransaction())}enableStm(){this.project.getStm().enable()}disableStm(){this.project.getStm().disable()}freeStm(e=null){!0===e?this.commitStmTransaction():!1===e&&this.rejectStmTransaction();const n=this,r=n.project.getStm();n.hasStmCapture&&(r.disabled=n.stmInitiallyDisabled,r.autoRecord=n.stmInitiallyAutoRecord,n.hasStmCapture=!1)}},getDragCreateDragDistance=function(e){var n,r;return!(null==(r=null==(n=this.source)?void 0:n.client.features.taskEdit)?void 0:r._canceling)&&cn.getDistanceBetween(this.startEvent,e)},$m=class extends(TaskEditStm_default(_m)){construct(e,n){!1===(null==n?void 0:n.showTooltip)&&(n.tip=null),super.construct(...arguments)}changeValidatorFn(e){this.createValidatorFn=e}render(){const e=this,{client:n}=e;e.dragRootElement=e.dropRootElement=n.timeAxisSubGridElement,e.dragLock=n.isVertical?"y":"x"}onDragEndSwitch(e){const{client:n}=this,{enableEventAnimations:r}=n,{eventRecord:i,draggingEnd:o}=e,s="x"===this.dragLock,{initialDate:a}=this.dragging;n.enableEventAnimations=!1,i.set({startDate:a,endDate:a}),o?Object.assign(e,{endDate:a,toSet:"startDate",otherEnd:"endDate",setMethod:"setStartDate",setOtherMethod:"setEndDate",edge:s?"left":"top"}):Object.assign(e,{startDate:a,toSet:"endDate",otherEnd:"startDate",setMethod:"setEndDate",setOtherMethod:"setStartDate",edge:s?"right":"bottom"}),e.draggingEnd=this.draggingEnd=!o,n.enableEventAnimations=r}beforeDrag(e){const n=this,r=super.beforeDrag(e),{pan:i,eventDragSelect:o}=n.client.features;return(!1===r||!(n.preventMultiple&&!n.isRowEmpty(e.rowRecord)||n.disabled||i&&!i.disabled||o&&!o.disabled))&&(n.client.preventDragSelect=!0,r)}startDrag(e){const n=super.startDrag(e);if(!1!==n){const{context:n}=e;e.initialDate=n.eventRecord.get(this.draggingEnd?"startDate":"endDate"),this.client.trigger("dragCreateStart",{proxyElement:e.element,eventElement:e.element,eventRecord:n.eventRecord,resourceRecord:n.resourceRecord}),e.context.offset=0,e.context.oldValue=e.mousedownDate}return n}isOverEndHandle(){return this.draggingEnd}setupDragContext(e){var n;const{client:r}=this;if(r.matchScheduleCell(e.target)){const i=null==(n=r.resolveResourceRecord(e))?void 0:n.$original;if(i&&!i.isSpecialRow){const n=Draggable_default().prototype.setupDragContext.call(this,e),o=[];return r.isVertical?o.push({element:r.scrollable.element,direction:"vertical"}):o.push({element:r.timeAxisSubGrid.scrollable.element,direction:"horizontal"}),n.scrollManager=r.scrollManager,n.monitoringConfig={scrollables:o},n.resourceRecord=n.rowRecord=i,n.getDistance=getDragCreateDragDistance,n}}}async dragDrop({context:e,event:n}){var r;e[e.toSet]=e.snappedDate;const{client:i}=this,{startDate:o,endDate:s,eventRecord:a}=e,{generation:l}=a;let c;null==(r=this.tip)||r.hide(),await i.project.commitAsync(),a.generation!==l&&(e.eventRecord[e.toSet]=e.oldValue,e.eventRecord[e.toSet]=e[e.toSet]),e.valid=o&&s&&s-o>0&&e[e.toSet]-e.oldValue&&!1!==e.valid,e.valid&&(i.trigger("beforeDragCreateFinalize",{context:e,event:n,proxyElement:e.element,eventElement:e.element,eventRecord:e.eventRecord,resourceRecord:e.resourceRecord}),c=!0),e.async||await e.finalize(c)}updateDragTolerance(e){this.dragThreshold=e}changeTip(e,n){return super.changeTip(!e||e.isTooltip?e:Et.assign({id:`${this.client.id}-drag-create-tip`},e),n)}async finalize(e){var n;if(this.finalized)return;this.finalized=!0;const r=this.owner,i=this,completeFinalization=()=>{r.isDestroyed||(r.client.trigger("afterDragCreate",{proxyElement:i.element,eventElement:i.element,eventRecord:i.eventRecord,resourceRecord:i.resourceRecord}),r.cleanup(i))};e?(await r.finalizeDragCreate(i),completeFinalization()):(await r.cancelDragCreate(i),null==(n=r.onAborted)||n.call(r,i),completeFinalization())}async cancelDragCreate(e){}async finalizeDragCreate(e){var n;await this.internalUpdateRecord(e,e.eventRecord);const r={stmInitiallyAutoRecord:this.stmInitiallyAutoRecord,stmInitiallyDisabled:this.stmInitiallyDisabled,transferred:!1};return this.client.trigger("dragCreateEnd",{eventRecord:e.eventRecord,resourceRecord:e.resourceRecord,event:e.event,eventElement:e.element,stmCapture:r}),null==(n=this.client)||n.trigger("eventAutoCreated",{eventRecord:e.eventRecord,resourceRecord:e.resourceRecord}),r.transferred}cleanup(e){var n;const{client:r}=this,{eventRecord:i}=e;i.meta.isResizing=!1,r.endListeningForBatchedUpdates(),null==(n=this.tip)||n.hide(),r.element.classList.remove(...this.dragActiveCls.split(" ")),e.element.parentElement.classList.remove("b-sch-dragcreating")}onElementContextMenu(){if(this.proxy)return!1}prepareCreateContextForFinalization(e,n,r,i=!1){return{...e,async:i,event:n,finalize:r}}onEventDataGenerated(e){var n,r;(null==(r=null==(n=this.dragging)?void 0:n.context)?void 0:r.eventRecord)===e.eventRecord&&(e.wrapperCls["b-sch-dragcreating"]=!0,e.wrapperCls["b-too-narrow"]=this.dragging.context.tooNarrow)}triggerBeforeResize(){}triggerEventResizeStart(){}checkValidity(e,n){throw new Error("Implement in subclass")}handleBeforeDragCreate(e,n){throw new Error("Implement in subclass")}isRowEmpty(e){throw new Error("Implement in subclass")}};__publicField($m,"configurable",{showTooltip:!0,dragTolerance:2,preventMultiple:!1,dragTouchStartDelay:300,validatorFnThisObj:null,tipTemplate:e=>`\n            <div class="b-sch-tip-${e.valid?"valid":"invalid"}">\n                ${e.startClockHtml}\n                ${e.endClockHtml}\n                <div class="b-sch-tip-message">${e.message}</div>\n            </div>\n        `,dragActiveCls:"b-dragcreating"}),__publicField($m,"pluginConfig",{chain:["render","onEventDataGenerated"],before:["onElementContextMenu"]}),$m._$name="DragCreateBase";var jm=Ct,zm=["startDate","endDate","resource","recurrenceRule"],makeDate=e=>{if(1===e.length)return e[0].value;if(2===e.length){const[n,r]=e[0]instanceof Vc?e:e.reverse(),i=jm.parse(n.value);return i&&r.value&&i.setHours(r.value.getHours(),r.value.getMinutes(),r.value.getSeconds(),r.value.getMilliseconds()),i?Ct.clone(i):null}return null},adjustEndDate=(e,n,r)=>{if(e&&n&&r.endDateField&&r.endTimeField){const e=jm.add(((e,n)=>{const r=new Date(e.getTime());return r.setHours(n.getHours(),n.getMinutes()),r})(r.startDateField.value,r.startTimeField.value),r.eventRecord.durationMS,"milliseconds");r.endDateField.value=e,r.endTimeField.value=jm.clone(e)}},Bm=class extends sr{static get configurable(){return{saveAndCloseOnEnter:!0,triggerEvent:null,dateFormat:"L",timeFormat:"LT",editorConfig:null,items:null,weekStartDay:null}}construct(e,n){const r=this;e.eventEdit=r,super.construct(e,Et.assign({weekStartDay:e.weekStartDay},n)),r.clientListenersDetacher=e.ion({[r.triggerEvent]:"onActivateEditor",dragCreateEnd:"onDragCreateEnd",eventAutoCreated:"onEventAutoCreated",thisObj:r})}doDestroy(){var e;this.clientListenersDetacher(),null==(e=this._editor)||e.destroy(),super.doDestroy()}onEventAutoCreated(){}changeEditorConfig(e){const{items:n}=this;return n&&((e=M.clone(e)).items=H.merge(n,e.items)),e}changeItems(e){return this.cleanItemsConfig(e),e}cleanItemsConfig(e){for(const n in e){const r=e[n];!0===r?delete e[n]:(null==r?void 0:r.items)&&this.cleanItemsConfig(r.items)}}onDatesChange(e){var n,r,i,o;const s=this,a=e.source,l=e.value;switch(s.startDateField&&s.endDateField&&(s.endDateField.min=s.startDateField.value),s.endTimeField&&(jm.isEqual(jm.clearTime(null==(n=s.startDateField)?void 0:n.value),jm.clearTime(null==(r=s.endDateField)?void 0:r.value))?s.endTimeField.min=s.startTimeField.value:s.endTimeField.min=null),a.ref){case"startDateField":(null==(i=s.startTimeField)?void 0:i.value)&&adjustEndDate(l,s.startTimeField.value,s);break;case"startTimeField":(null==(o=s.startDateField)?void 0:o.value)&&adjustEndDate(s.startDateField.value,l,s)}}async save(){throw new Error("Implement in subclass")}get values(){const e=this,{editor:n}=e,r=[],i=[],{values:o}=n;return zm.forEach((e=>delete o[e])),n.eachWidget((s=>{var a;const{name:l}=s;if(!l||s.hidden||s.up((n=>n===e.recurrenceEditor)))delete o[l];else switch(l){case"startDate":r.push(s);break;case"endDate":i.push(s);break;case"resource":o[l]=s.record;break;case"recurrenceRule":o[l]="none"===(null==(a=n.widgetMap.recurrenceCombo)?void 0:a.value)?"":s.value}}),!0),o.allDay&&!e.eventRecord.allDay&&(r.push(e.startTimeField),i.push(e.endTimeField)),r.length&&(o.startDate=makeDate(r)),i.length&&(o.endDate=makeDate(i)),"startDate"in o&&"endDate"in o&&(o.duration=jm.diff(o.startDate,o.endDate,e.editor.record.durationUnit,!0)),o}onBeforeSave(e){}onAfterSave(e){}updateRecord(e){const{values:n}=this;return this.assignmentStore&&delete n.resource,e.set(n)}onBeforeEditorShow(){const{eventRecord:e,editor:n}=this.editingContext,{nameField:r}=n.widgetMap;r&&e.isCreating&&(n.assigningValues=!0,r.value="",n.assigningValues=!1,r._configuredPlaceholder=r.placeholder,r.placeholder=e.name)}resetEditingContext(){var e;const n=this;if(!n.editingContext)return;const{client:r}=n,{editor:i,eventRecord:o}=n.editingContext,{eventStore:s}=r,{nameField:a}=i.widgetMap;o.isCreating&&(r.isTimelineBase&&(null==(e=n.editingContext.eventElement)||e.closest("[data-event-id]").classList.add("b-released")),s.remove(o),o.isCreating=!1),a&&(a.placeholder=a._configuredPlaceholder),r.element.classList.remove("b-eventeditor-editing"),n.targetEventElement=n.editingContext=i._record=null}onPopupKeyDown({event:e}){const n=this;!n.readOnly&&"Enter"===e.key&&n.saveAndCloseOnEnter&&"input"===e.target.tagName.toLowerCase()&&(e.preventDefault(),"startDate"===e.target.name&&n.startTimeField&&adjustEndDate(n.startDateField.value,n.startTimeField.value,n),n.onSaveClick())}async finalizeStmCapture(e){}async onSaveClick(){this.editor.focus(),this.isFinalizingEventSave=!0;const e=await this.save();return this.isFinalizingEventSave=!1,e&&(await this.finalizeStmCapture(!1),this.editor.close(),this.client.trigger("afterEventEdit")),e}async onDeleteClick(){this.isDeletingEvent=!0;const e=await this.deleteEvent();if(this.isDeletingEvent=!1,e){await this.finalizeStmCapture(!1);const{editor:e}=this;e.autoClose&&!e.containsFocus||e.close(),this.client.trigger("afterEventEdit")}}async onCancelClick(){this.isCancelingEdit=!0,this.editor.close(),this.isCancelingEdit=!1,this.hasStmCapture&&await this.finalizeStmCapture(!0),this.client.trigger("afterEventEdit")}};Bm._$name="EditBase";var Hm=class extends(sr.mixin(AttachToProjectMixin_default)){static get pluginConfig(){return{chain:["getEventsToRender","onEventDataGenerated","noFeatureElementsInAxis"],override:["matchScheduleCell","resolveResourceRecord"]}}noFeatureElementsInAxis(){const{timeAxis:e}=this.client;return!this.needsRefresh&&this.store&&!this.store.storage.values.some((n=>e.isTimeSpanInAxis(n)))}doDisable(e){this.client.isPainted&&this.client.refresh(),super.doDisable(e)}updateTabIndex(){this.isConfiguring||this.client.refresh()}getEventsToRender(e,n){throw new Error("Implement in subclass")}onEventDataGenerated(e){const n=this,{eventRecord:r,iconCls:i}=e;n.shouldInclude(r)&&(n.client.isVertical?e.width=e.resourceRecord.columnWidth||n.client.resourceColumnWidth:e.top=0,e.fillSize=!0,e.wrapperCls["b-sch-resourcetimerange"]=1,n.rangeCls&&(e.wrapperCls[n.rangeCls]=1),e.wrapperCls[`b-sch-color-${r.timeRangeColor}`]=r.timeRangeColor,e.eventContent.text=r.name,e.children.push(e.eventContent),e.tabIndex=null!=n.tabIndex?String(n.tabIndex):null,(null==i?void 0:i.length)>0&&e.children.unshift({tag:"i",className:i.toString()}),e.eventId=n.generateElementId(r))}generateElementId(e){return e.domId}resolveResourceTimeRangeRecord(e){var n;return null==(n=null==e?void 0:e.closest(`.${this.rangeCls}`))?void 0:n.elementData.eventRecord}getElementFromResourceTimeRangeRecord(e){return this.client.foregroundCanvas.syncIdMap[e.domId]}resolveResourceRecord(e){var n;return this.overridden.resolveResourceRecord(...arguments)||(null==(n=this.resolveResourceTimeRangeRecord(e.target||e))?void 0:n.resource)}shouldInclude(e){throw new Error("Implement in subclass")}onStoreChange(e){"removeall"!==e.action&&"dataset"!==e.action||(this.needsRefresh=!0),this.client.onInternalEventStoreChange(e),this.needsRefresh=!1}matchScheduleCell(e){let n=this.overridden.matchScheduleCell(e);if(!n&&this.enableMouseEvents){const{client:r}=this,i=e.closest(`.${this.rangeCls}`);n=i&&r.getCell({record:r.isHorizontal?i.elementData.resource:r.store.first,column:r.timeAxisColumn})}return n}handleRangeMouseEvent(e){var n;const r=this,i=e.target.closest(`.${r.rangeCls}`);if(i){const o=null!=(n=cn.eventNameMap[e.type])?n:w.capitalize(e.type),s=r.resolveResourceTimeRangeRecord(i);r.client.trigger(r.entityName+o,{feature:r,[`${r.entityName}Record`]:s,resourceRecord:r.client.resourceStore.getById(s.resourceId),domEvent:e})}}updateEnableMouseEvents(e){var n;const r=this,{client:i}=r;if(null==(n=r.mouseEventsDetacher)||n.call(r),r.mouseEventsDetacher=null,e){let attachMouseEvents=function(){r.mouseEventsDetacher=cn.on({element:i.foregroundCanvas,delegate:`.${r.rangeCls}`,mousedown:"handleRangeMouseEvent",mouseup:"handleRangeMouseEvent",click:"handleRangeMouseEvent",dblclick:"handleRangeMouseEvent",contextmenu:"handleRangeMouseEvent",mouseover:"handleRangeMouseEvent",mouseout:"handleRangeMouseEvent",thisObj:r})};i.whenVisible(attachMouseEvents)}i.element.classList.toggle("b-interactive-resourcetimeranges",Boolean(e))}};__publicField(Hm,"configurable",{tabIndex:null,entityName:"resourceTimeRange"}),Hm.featureClass="",Hm._$name="ResourceTimeRangesBase";var Vm=class extends Na{};Vm._$name="TimeSpanMenuBase";var Nm=class extends sr{static get defaultConfig(){return{autoUpdate:!1,hoverDelay:250,hideDelay:100,template:null,cls:null,align:{align:"b-t"},clockTemplate:null,monitorRecordUpdate:null,testConfig:{hoverDelay:0}}}static get pluginConfig(){return{chain:["onPaint"]}}construct(e,n){const r=this;n=r.processConfig(n),super.construct(e,n),r.forSelector||(r.forSelector=`${e.eventInnerSelector}:not(.b-dragproxy)`),r.clockTemplate=new Pm({scheduler:e}),e.ion({[`before${e.scheduledEventName}drag`]:()=>{var e;null==(e=r.tooltip)||e.hide()}})}processConfig(e){return"function"==typeof e?{template:e}:e}setConfig(e){super.setConfig(this.processConfig(e))}doDestroy(){this.destroyProperties("clockTemplate","tooltip"),super.doDestroy()}doDisable(e){this.tooltip&&(this.tooltip.disabled=e),super.doDisable(e)}onPaint({firstPaint:e}){var n;if(e){const e=this,{client:r}=e,i=[".b-dragselecting",".b-eventeditor-editing",".b-taskeditor-editing",".b-resizing-event",".b-task-percent-bar-resizing-task",".b-dragcreating",`.b-dragging-${r.scheduledEventName}`,".b-creating-dependency",".b-dragproxy"].map((e=>`:not(${e})`)).join("");null==(n=e.tooltip)||n.destroy();const o=e.tooltip=new fc({axisLock:"flexible",id:e.tipId||`${e.client.id}-event-tip`,cls:e.tipCls,forSelector:`.b-timelinebase${i} .b-grid-body-container:not(.b-scrolling) ${e.forSelector}`,scrollAction:"realign",forElement:r.timeAxisSubGridElement,showOnHover:!0,anchorToTarget:!0,getHtml:e.getTipHtml.bind(e),disabled:e.disabled,...e.config,internalListeners:e.configuredListeners});o.ion({innerhtmlupdate:"updateDateIndicator",overtarget:"onOverNewTarget",show:"onTipShow",hide:"onTipHide",thisObj:e}),Object.keys(o.$meta.configs).forEach((e=>{Object.defineProperty(this,e,{set:n=>o[e]=n,get:()=>o[e]})}))}}processConfiguredListeners(){}addListener(...e){var n;const r=super.addListener(...e),i=null==(n=this.tooltip)?void 0:n.addListener(...e);if(r||i)return()=>{null==r||r(),null==i||i()}}removeListener(...e){var n;super.removeListener(...e),null==(n=this.tooltip)||n.removeListener(...e)}updateDateIndicator(){const e=this,n=e.tooltip,r=n.element.querySelector(".b-sch-tooltip-enddate");e.record&&(e.clockTemplate.updateDateIndicator(n.element,e.record.startDate),r&&e.clockTemplate.updateDateIndicator(r,e.record.endDate))}resolveTimeSpanRecord(e){return this.client.resolveTimeSpanRecord(e)}getTipHtml({tip:e,activeTarget:n}){const r=this,{client:i}=r,o=r.recordType||`${i.scheduledEventName}Record`,s=r.resolveTimeSpanRecord(n);if((null==s?void 0:s.startDate)instanceof Date){const{startDate:n,endDate:a}=s,l=i.getFormattedDate(n),c=i.getDisplayEndDate(a,n),d=i.getFormattedDate(c);return e.eventRecord=s,r.template({tip:e,[`${o}`]:s,startDate:n,endDate:a,startText:l,endText:d,startClockHtml:r.clockTemplate.template({date:n,text:l,cls:"b-sch-tooltip-startdate"}),endClockHtml:s.isMilestone?"":r.clockTemplate.template({date:c,text:d,cls:"b-sch-tooltip-enddate"})})}return e.hide(),""}get record(){return this.tooltip.eventRecord}onTipShow(){const e=this;e.monitorRecordUpdate&&!e.updateListener&&(e.updateListener=e.client.eventStore.ion({change:e.onRecordUpdate,buffer:300,thisObj:e}))}onTipHide(){var e;this.tooltip.eventRecord=null,null==(e=this.updateListener)||e.call(this),this.updateListener=null}onOverNewTarget({newTarget:e}){this.tooltip.eventRecord=this.resolveTimeSpanRecord(e)}onRecordUpdate({record:e}){const{tooltip:n}=this;(null==n?void 0:n.isVisible)&&e===this.record&&(n.updateContent(),n.lastAlignSpec.aligningToElement?n.realign():n.internalOnPointerOver(this.client.lastPointerEvent))}};Nm._$name="TooltipBase";var qm=class extends(sr.mixin(Delayable_default)){static get defaultConfig(){return{rangeCls:"b-sch-range",lineCls:"b-sch-line",enableResizing:!1,showTooltip:!0,tooltipTemplate:null,dragTipTemplate:e=>`\n                <div class="b-sch-tip-${e.valid?"valid":"invalid"}">\n                    <div class="b-sch-tip-name">${w.encodeHtml(e.name)||""}</div>\n                    ${e.startClockHtml}\n                    ${e.endClockHtml||""}\n                </div>\n            `,baseCls:"b-sch-timerange",headerRenderer:null,bodyRenderer:null,cls:null,narrowThreshold:80}}construct(e,n){const r=this;super.construct(e,n),e.isVertical&&e.ion({renderRows:r.onUIReady,thisObj:r,once:!0}),r.cls=r.cls||`b-sch-${r.constructor.$$name.toLowerCase()}`,r.baseSelector=`.${r.baseCls}.${r.cls}`,r.enableResizing&&(r.showHeaderElements=!0)}doDestroy(){var e,n,r,i;const o=this;o.detachListeners("timeAxisViewModel"),o.detachListeners("timeAxis"),null==(e=o.clockTemplate)||e.destroy(),null==(n=o.tip)||n.destroy(),null==(r=o.drag)||r.destroy(),null==(i=o.resize)||i.destroy(),super.doDestroy()}doDisable(e){this.renderRanges(),super.doDisable(e)}setupTimeAxisViewModelListeners(){const e=this;e.detachListeners("timeAxisViewModel"),e.detachListeners("timeAxis"),e.client.timeAxisViewModel.ion({name:"timeAxisViewModel",update:"onTimeAxisViewModelUpdate",thisObj:e}),e.client.timeAxis.ion({name:"timeAxis",includeChange:"renderRanges",thisObj:e}),e.updateLineBuffer()}onUIReady(){const e=this,{client:n}=e;n.ion({timeAxisViewModelChange:e.setupTimeAxisViewModelListeners,thisObj:e}),e.setupTimeAxisViewModelListeners(),n.hideHeaders||(e.headerContainerElement&&cn.on({click:e.onTimeRangeClick,dblclick:e.onTimeRangeClick,contextmenu:e.onTimeRangeClick,delegate:e.baseSelector,element:e.headerContainerElement,thisObj:e}),e.enableResizing&&(e.drag=Qa.new({name:"rangeDrag",lockX:n.isVertical,lockY:n.isHorizontal,constrain:!0,outerElement:e.headerContainerElement,targetSelector:`${e.baseSelector}`,isElementDraggable:(r,i)=>!n.readOnly&&e.isElementDraggable(r,i),rtlSource:n,internalListeners:{dragstart:"onDragStart",drag:"onDrag",drop:"onDrop",reset:"onDragReset",abort:"onInvalidDrop",thisObj:e}},e.dragHelperConfig),e.resize=el.new({direction:n.mode,targetSelector:`${e.baseSelector}.b-sch-range`,outerElement:e.headerContainerElement,isElementResizable:(e,n)=>!e.matches(".b-dragging,.b-readonly")&&!n.target.matches(".b-fa"),internalListeners:{resizestart:"onResizeStart",resizing:"onResizeDrag",resize:"onResize",cancel:"onInvalidResize",reset:"onResizeReset",thisObj:e}},e.resizeHelperConfig))),e.renderRanges(),e.tooltipTemplate&&(e.hoverTooltip=new fc({forElement:e.headerContainerElement,getHtml({activeTarget:n}){const r=e.resolveTimeRangeRecord(n);return e.tooltipTemplate({timeRange:r})},forSelector:"."+e.baseCls+(e.cls?"."+e.cls:"")}))}refresh(){this._timeRanges=null,this.renderRanges()}getDOMConfig(e,n){const r=this,i=[],o=[];if(!r.disabled){r._labelRotationMap={};for(const s of r.timeRanges){const a=r.renderRange(s,e,n);a&&(i.push(a.bodyConfig),o.push(a.headerConfig))}}return[i,o]}renderRanges(){const e=this,{client:n}=e,{foregroundCanvas:r}=n;if(r&&n.isPainted&&!n.timeAxisSubGrid.collapsed){const{headerContainerElement:n}=e,i=[],[o,s]=e.getDOMConfig();e.bodyCanvas||(e.bodyCanvas=Gn.createElement({className:`b-timeranges-canvas ${e.cls}-canvas`,parent:r,retainElement:!0})),$o.sync({targetElement:e.bodyCanvas,childrenOnly:!0,domConfig:{children:o,syncOptions:{releaseThreshold:0,syncIdField:"id"}},callback:e.showHeaderElements?null:({targetElement:e,action:n})=>{"reuseElement"!==n&&"newElement"!==n&&"reuseOwnElement"!==n||i.push(e)}}),e.showHeaderElements&&!e.headerCanvas&&(e.headerCanvas=Gn.createElement({className:`${e.cls}-canvas`,parent:n,retainElement:!0})),e.headerCanvas&&$o.sync({targetElement:e.headerCanvas,childrenOnly:!0,domConfig:{children:s,syncOptions:{releaseThreshold:0,syncIdField:"id"}}});for(const n of i)e.cacheRotation(n.elementData.timeRange,n);for(const n of i)e.applyRotation(n.elementData.timeRange,n)}}get timeRanges(){return[]}shouldRenderRange(e,n=this.client.visibleDateRange.startDate,r=this.client.visibleDateRange.endDate){const{timeAxis:i}=this.client,{startDate:o,endDate:s,duration:a}=e;return Boolean(o&&(i.isContinuous||i.isTimeSpanInAxis(e))&&Ct.intersectSpans(n,r,o,a?s:Ct.add(o,this._lineBufferDurationMS)))}getRangeDomConfig(e,n,r,i=0){const o=this,{client:s}=o,{rtl:a}=s,l=s.getCoordinateFromDate(Ct.max(e.startDate,n),{respectExclusion:!0})-i,c=e.endDate?s.getCoordinateFromDate(Ct.min(e.endDate,r),{respectExclusion:!0,isEnd:!0})-i:l,d=Math.abs(c-l),u=d>0,h=a?`calc(${l}px - 100%)`:`${l}px`;return{className:{[o.baseCls]:1,[o.cls]:o.cls,[o.rangeCls]:u,[o.lineCls]:!u,[e.cls]:e.cls,"b-narrow-range":u&&d<o.narrowThreshold,"b-readonly":e.readOnly,"b-rtl":a},dataset:{id:e.id},elementData:{timeRange:e},style:s.isVertical?`transform: translateY(${h}); ${u?`height:${d}px`:""};`:`transform: translateX(${h}); ${u?`width:${d}px`:""};`}}renderRange(e,n,r){const i=this,{client:o}=i,{timeAxis:s}=o;if(i.shouldRenderRange(e,n,r)&&s.startDate){const n=i.getRangeDomConfig(e,s.startDate,s.endDate),r=e.iconCls&&w.xss`<i class="${e.iconCls}"></i>`,o=e.name&&w.encodeHtml(e.name),a=o||r?`<label>${r||""}${o||"&nbsp;"}</label>`:"",l={...n,style:n.style+(e.style||""),html:i.bodyRenderer?i.bodyRenderer({timeRange:e}):i.showHeaderElements&&!i.showLabelInBody?"":a};let c;return i.showHeaderElements&&(c={...n,html:i.headerRenderer?i.headerRenderer({timeRange:e}):i.showLabelInBody?"":a}),{bodyConfig:l,headerConfig:c}}}cacheRotation(e,n){if(!e.iconCls&&!e.name||!e.duration)return;const r=n.firstElementChild;r&&!e.recurringTimeSpan&&(this._labelRotationMap[e.id]=this.client.isVertical?r.offsetHeight<n.offsetHeight:r.offsetWidth>n.offsetWidth)}applyRotation(e,n){var r,i,o;const s=this._labelRotationMap[null!=(i=null==(r=e.recurringTimeSpan)?void 0:r.id)?i:e.id];null==(o=n.firstElementChild)||o.classList.toggle("b-vertical",Boolean(s))}getBodyElementByRecord(e){const n="string"==typeof e?e:null==e?void 0:e.id;return null!=n&&$o.getChild(this.bodyCanvas,n)}resolveTimeRangeRecord(e){}get headerContainerElement(){const e=this,{isVertical:n,timeView:r,timeAxisColumn:i}=e.client;return e._headerContainerElement||(n&&r.element?e._headerContainerElement=r.element.parentElement:n||(e._headerContainerElement=i.element)),e._headerContainerElement}get showHeaderElements(){return!this.client.hideHeaders&&this._showHeaderElements}updateShowHeaderElements(e){const{client:n}=this;this.isConfiguring||(n.element.classList.toggle("b-sch-timeranges-with-headerelements",Boolean(e)),this.renderRanges())}populateTimeAxisHeaderMenu({column:e,items:n}){}onPaint({firstPaint:e}){e&&this.client.isHorizontal&&this.onUIReady()}onSchedulerHorizontalScroll(){this.client.isHorizontal&&this.renderRanges()}afterScroll(){this.client.isVertical&&this.renderRanges()}updateLineBuffer(){const{timeAxisViewModel:e}=this.client;this._lineBufferDurationMS=e.getDateFromPosition(300)-e.getDateFromPosition(0)}onInternalResize(e,n,r,i,o){this.client.isVertical&&o!==r&&this.renderRanges()}onTimeAxisViewModelUpdate(){this.updateLineBuffer(),this.refresh()}onTimeRangeClick(e){const n=this.resolveTimeRangeRecord(e.target);this.client.trigger(`timeRangeHeader${w.capitalize(e.type)}`,{event:e,domEvent:e,timeRangeRecord:n})}showTip(e){const n=this;n.showTooltip&&(n.clockTemplate=new Pm({scheduler:n.client}),n.tip=new fc(Et.assign({id:`${n.client.id}-time-range-tip`,cls:"b-interaction-tooltip",align:"b-t",autoShow:!0,updateContentOnMouseMove:!0,forElement:e.element,getHtml:()=>n.getTipHtml(e.record,e.element)},n.showTooltip)))}destroyTip(){this.tip&&(this.tip.destroy(),this.tip=null)}isElementDraggable(e){return(e=e.closest(this.baseSelector+":not(.b-resizing):not(.b-readonly)"))&&!e.classList.contains("b-over-resize-handle")}onDragStart({context:e}){const{client:n,drag:r}=this;n.isVertical?(r.minY=0,r.maxY=n.timeAxisViewModel.totalSize-e.element.offsetHeight,r.minX=0,r.maxX=Number.MAX_SAFE_INTEGER):(r.minX=0,r.maxX=n.timeAxisViewModel.totalSize-e.element.offsetWidth,r.minY=0,r.maxY=Number.MAX_SAFE_INTEGER),n.element.classList.add("b-dragging-timerange")}onDrop({context:e}){this.client.element.classList.remove("b-dragging-timerange")}onInvalidDrop(){this.drag.reset(),this.client.element.classList.remove("b-dragging-timerange"),this.destroyTip()}onDrag(){}onDragReset(){}onResizeStart(){}onResizeDrag(){}onResize(){}onInvalidResize(){}onResizeReset(){}getTipHtml(e,n){const r=this,{client:i}=r,o=Gt.from(n),s=o.getStart(i.rtl,i.isHorizontal),a=o.getEnd(i.rtl,i.isHorizontal),l=i.getDateFromCoordinate(s,"round",!1),c=e.endDate&&i.getDateFromCoordinate(a,"round",!1),d=i.getFormattedDate(l),u=c&&i.getFormattedEndDate(c,l);return r.dragTipTemplate({name:e.name||"",startDate:l,endDate:c,startText:d,endText:u,startClockHtml:r.clockTemplate.template({date:l,text:d,cls:"b-sch-tooltip-startdate"}),endClockHtml:u&&r.clockTemplate.template({date:c,text:u,cls:"b-sch-tooltip-enddate"})})}};__publicField(qm,"configurable",{showHeaderElements:!0}),__publicField(qm,"pluginConfig",{chain:["onPaint","populateTimeAxisHeaderMenu","onSchedulerHorizontalScroll","afterScroll","onInternalResize"]}),qm._$name="AbstractTimeRanges";var Wm=Object.freeze({}),Um=class extends(sr.mixin(AttachToProjectMixin_default,Delayable_default)){static get $name(){return"ColumnLines"}static get delayable(){return{refresh:{type:"raf",cancelOutstanding:!0}}}static get pluginConfig(){return{after:["render","updateCanvasSize","onVisibleDateRangeChange","onVisibleResourceRangeChange"]}}construct(e,n){e.useBackgroundCanvas=!0,super.construct(e,n)}attachToResourceStore(e){const{client:n}=this;super.attachToResourceStore(e),n.isVertical&&n.resourceStore.ion({name:"resourceStore",group({groupers:e}){0===e.length&&this.refresh()},thisObj:this})}doDisable(e){super.doDisable(e),this.isConfiguring||this.refresh()}render(){this.refresh()}getColumnLinesDOMConfig(e,n){var r,i;const{client:o}=this,{rtl:s}=o,a=s?-1:1,{timeAxisViewModel:l,isHorizontal:c,resourceStore:d,variableColumnWidths:u}=o,{columnConfig:h}=l,g=l.columnLinesFor,p=Math.max(g-1,0),m=e.getTime(),f=n.getTime(),b=[],v=new Set,y=c?"X":"Y";if(!this.disabled){const addLineConfig=(e,n)=>{const r=e.start.getTime();r>m&&r<f&&!v.has(r)&&(v.add(r),b.push({role:"presentation",className:n?"b-column-line-major":"b-column-line",style:{transform:`translate${y}(${e.coord*a}px)`},dataset:{line:n?`major-${e.index}`:`line-${e.index}`}}))};if(g!==p)for(let e=1;e<=h[p].length-1;e++)addLineConfig(h[p][e],!0);for(let e=1;e<=h[g].length-1;e++)addLineConfig(h[g][e],!1);if(!c&&o.columnLines){const{columnWidth:e}=o.resourceColumns;let{first:n,last:s}=o.currentOrientation.getResourceRange(!0),l=0;if(n>-1)for(let o=n;o<s+1;o++){const n=d.getAt(o);if(n.isGroupHeader){s++,l++;continue}const c=n.instanceMeta(d),h=u?c.insetStart+n.columnWidth-1:(o-l+1)*e-1;b.push({className:{"b-column-line":1,"b-resource-column-line":1,"b-resource-group-divider":d.isGrouped&&(null==(i=c.groupParent)?void 0:i.groupChildren[(null==(r=c.groupParent)?void 0:r.groupChildren.length)-1])===n},style:{transform:`translateX(${h*a}px)`},dataset:{line:`resource-${o}`}})}}}return b}refresh(){const e=this,{client:n}=e,{timeAxis:r}=n,{startDate:i,endDate:o}=n.visibleDateRange||Wm;if(!r.startDate||!i||e.client.timeAxisSubGrid.collapsed)return;e.element||(e.element=Gn.createElement({parent:n.backgroundCanvas,className:"b-column-lines-canvas"}));const s=e.getColumnLinesDOMConfig(i,o);$o.sync({targetElement:e.element,onlyChildren:!0,domConfig:{children:s,syncOptions:{releaseThreshold:4}},syncIdField:"line"})}onVisibleDateRangeChange(){this.refresh()}onVisibleResourceRangeChange({firstResource:e,lastResource:n}){this.refresh()}updateCanvasSize(){this.refresh()}};Um._$name="ColumnLines",du.registerFeature(Um,!0,["Scheduler","Gantt"]);var DependencyCreation_default=e=>class DependencyCreation extends(e||re){static get $name(){return"DependencyCreation"}static get defaultConfig(){return{allowDropOnEventBar:!0,showCreationTooltip:!0,creationTooltip:null,terminalCls:"b-sch-terminal",terminalSides:["start","top","end","bottom"],allowCreate:!0}}construct(e,n){super.construct(e,n);const r=this;r.view=e,r.eventName=e.scheduledEventName,e.ion({readOnly:()=>r.updateCreateListeners()}),r.updateCreateListeners(),r.chain(e,"onElementTouchMove","onElementTouchMove")}doDestroy(){var e,n;const r=this;r.detachListeners("view"),r.creationData=null,null==(e=r.pointerUpMoveDetacher)||e.call(r),null==(n=r.creationTooltip)||n.destroy(),super.doDestroy()}updateCreateListeners(){const e=this;e.view&&(e.detachListeners("view"),e.isCreateAllowed&&e.view.ion({name:"view",[`${e.eventName}mouseenter`]:"onTimeSpanMouseEnter",[`${e.eventName}mouseleave`]:"onTimeSpanMouseLeave",thisObj:e}))}set allowCreate(e){this._allowCreate=e,this.updateCreateListeners()}get allowCreate(){return this._allowCreate}get isCreateAllowed(){return this.allowCreate&&!this.view.readOnly&&!this.disabled}onTimeSpanMouseEnter({event:e,source:n,[`${this.eventName}Record`]:r,[`${this.eventName}Element`]:i}){if(!r.isCreating&&!r.readOnly&&(!this.client.features.nestedEvents||r.parent.isRoot)){const o=this,{creationData:s}=o,a=Gn.down(i,n.eventInnerSelector);r!==(null==s?void 0:s.source)&&(o.showTerminals(r,a),s&&e.target.closest(o.client.eventSelector)&&(s.timeSpanElement=a,o.onOverTargetEventBar(e)))}}onTimeSpanMouseLeave(e){var n;const r=this,{creationData:i}=r,o=e[`${r.eventName}Element`],s=Gn.down(o,r.view.eventInnerSelector),a=null==(n=e.event)?void 0:n.relatedTarget,l=null==i?void 0:i.timeSpanElement;a&&(i&&l&&a&&Gn.isDescendant(l,a)||(e.event.isTrusted||s!==(null==i?void 0:i.sourceElement))&&r.hideTerminals(o),i&&!i.finalizing&&(i.timeSpanElement=null,r.onOverNewTargetWhileCreating(void 0,void 0,e)))}onTerminalMouseOver(e){this.creationData&&this.onOverTargetEventBar(e)}onTerminalMouseOut(e){const n=this,{creationData:r}=n,i=e.target.closest(n.view.eventSelector);!i||n.showingTerminalsFor&&Gn.isDescendant(i,n.showingTerminalsFor)||r&&i===r.timeSpanElement||(n.hideTerminals(i),n.view.unhover(i,e)),r&&n.onOverNewTargetWhileCreating(e.relatedTarget,r.target,e)}onTerminalPointerDown(e){var n;const r=this;if(0===e.button&&!r.creationData){const i=r.view,o=i.timeAxisSubGridElement,s=e.target,a=s.closest(i.eventInnerSelector),l=Gt.from(i.element,document.body);e.stopPropagation(),r.creationData={sourceElement:a,source:i.resolveTimeSpanRecord(a).$original,fromSide:s.dataset.side,startPoint:Gt.from(s,o).center,startX:e.pageX-l.x+i.scrollLeft,startY:e.pageY-l.y+i.scrollTop,valid:!1,sourceResource:null==(n=i.resolveResourceRecord)?void 0:n.call(i,e),tooltip:r.creationTooltip},r.pointerUpMoveDetacher=cn.on({pointerup:{element:i.element.getRootNode(),handler:"onMouseUp",passive:!1},pointermove:{element:o,handler:"onMouseMove",passive:!1},thisObj:r}),r.documentPointerUpDetacher=cn.on({pointerup:{element:document,handler:"onDocumentMouseUp"},keydown:{element:document,handler:({key:e})=>{"Escape"===e&&r.abort()}},thisObj:r})}}onElementTouchMove(e){var n;null==(n=super.onElementTouchMove)||n.call(this,e),this.connector&&e.preventDefault()}onMouseMove(e){const n=this,{view:r,creationData:i}=n,o=Gt.from(r.element,document.body),s=e.pageX-o.x+r.scrollLeft-i.startX,a=e.pageY-o.y+r.scrollTop-i.startY,l=Math.round(Math.sqrt(s*s+a*a))-3,c=Math.atan2(a,s);let{connector:d}=n;if(!d){if(!1===n.onRequestDragCreate(e))return;d=n.connector}d.style.width=`${l}px`,d.style.transform=`rotate(${c}rad)`,n.lastMouseMoveEvent=e}onRequestDragCreate(e){const n=this,{view:r,creationData:i}=n;if(!1===r.trigger("beforeDependencyCreateDrag",{data:i,source:i.source}))return n.abort(),!1;if(r.element.classList.add("b-creating-dependency"),n.createConnector(i.startPoint.x,i.startPoint.y),r.trigger("dependencyCreateDragStart",{data:i,source:i.source}),n.showCreationTooltip){const r=n.creationTooltip||(n.creationTooltip=n.createDragTooltip());n.creationData.tooltip=r,r.disabled=!1,r.show(),r.onMouseMove(e)}r.scrollManager.startMonitoring({scrollables:[{element:r.timeAxisSubGrid.scrollable.element,direction:"horizontal"},{element:r.scrollable.element,direction:"vertical"}],callback:()=>n.lastMouseMoveEvent&&n.onMouseMove(n.lastMouseMoveEvent)})}onOverTargetEventBar(e){const n=this,{view:r,creationData:i,allowDropOnEventBar:o}=n,{target:s}=e;let a=r.resolveTimeSpanRecord(s).$original;(null==a?void 0:a.isEventSegment)&&(a=a.event),M.isPromise(i.valid)||!o&&!s.classList.contains(n.terminalCls)||a!==i.source&&n.onOverNewTargetWhileCreating(s,a,e)}async onOverNewTargetWhileCreating(e,n,r){var i,o;const s=this,{view:a,creationData:l,allowDropOnEventBar:c,connector:d}=s;if(!M.isPromise(l.valid)&&!l.finalizing&&d){if(d.classList.remove("b-valid","b-invalid"),l.timeSpanElement&&Gn.removeClsGlobally(l.timeSpanElement,"b-sch-terminal-active"),n&&n!==l.source&&(c||e.classList.contains(s.terminalCls))){const u=l.target=n,{source:h}=l;let g,p=e.dataset.side;c&&!e.classList.contains(s.terminalCls)&&(p=s.getTargetSideFromType(s.dependencyStore.modelClass.fieldMap.type.defaultValue||hm.Type.EndToStart)),a.resolveResourceRecord&&(l.targetResource=a.resolveResourceRecord(r)),l.toSide=p;const m=l.fromSide,updateValidity=n=>{s.isDestroyed||(l.valid=n,e.classList.add(n?"b-valid":"b-invalid"),d.classList.add(n?"b-valid":"b-invalid"),a.trigger("dependencyValidationComplete",{data:l,source:h,target:u,dependencyType:g}))};switch(!0){case"start"===m&&"start"===p:g=hm.Type.StartToStart;break;case"start"===m&&"end"===p:g=hm.Type.StartToEnd;break;case"end"===m&&"start"===p:g=hm.Type.EndToStart;break;case"end"===m&&"end"===p:g=hm.Type.EndToEnd}a.trigger("dependencyValidationStart",{data:l,source:h,target:u,dependencyType:g});let f=l.valid=s.dependencyStore.isValidDependency(h,u,g);M.isPromise(f)?(f=await f,updateValidity(f)):updateValidity(f);const b=f?"b-valid":"b-invalid";d.classList.add(b),null==(o=null==(i=l.timeSpanElement)?void 0:i.querySelector(`.b-sch-terminal[data-side=${p}]`))||o.classList.add("b-sch-terminal-active",b)}else l.target=l.toSide=null,l.valid=!1,d.classList.add("b-invalid");s.updateCreationTooltip()}}async onMouseUp(){var e;const n=this,r=n.creationData;if(r.finalizing=!0,null==(e=n.pointerUpMoveDetacher)||e.call(n),r.valid){if(!1===await n.view.trigger("beforeDependencyCreateFinalize",r)?r.valid=!1:M.isPromise(r.valid)&&(r.valid=await r.valid),r.valid){let e=n.createDependency(r);null!==e&&(M.isPromise(e)&&(e=await e),r.dependency=e,n.view.trigger("dependencyCreateDrop",{data:r,source:r.source,target:r.target,dependency:e}),n.doAfterDependencyDrop(r))}else n.doAfterDependencyDrop(r)}else r.valid=!1,n.doAfterDependencyDrop(r);n.abort()}doAfterDependencyDrop(e){this.view.trigger("afterDependencyCreateDrop",{data:e,...e})}onDocumentMouseUp({target:e}){this.view.timeAxisSubGridElement.contains(e)||this.abort()}abort(){var e,n;const r=this,{view:i,creationData:o}=r;if(o){const{source:e,sourceResource:n,target:s,targetResource:a}=o;if(e){const o=i.getElementFromEventRecord(e,n);o&&r.hideTerminals(o)}if(s){const e=i.getElementFromEventRecord(s,a);e&&r.hideTerminals(e)}}r.creationTooltip&&(r.creationTooltip.disabled=!0),r.creationData=r.lastMouseMoveEvent=null,null==(e=r.pointerUpMoveDetacher)||e.call(r),null==(n=r.documentPointerUpDetacher)||n.call(r),r.removeConnector()}createConnector(e,n){const r=this,{view:i}=r;r.clearTimeout(r.removeConnectorTimeout),r.connector=Gn.createElement({parent:i.timeAxisSubGridElement,className:`${r.baseCls}-connector`,style:`left:${e}px;top:${n}px`}),i.element.classList.add("b-creating-dependency")}createDragTooltip(){const e=this,{view:n}=e;return e.creationTooltip=fc.new({id:`${n.id}-dependency-drag-tip`,cls:"b-sch-dependency-creation-tooltip",loadingMsg:"",anchorToTarget:!1,forElement:n.timeAxisSubGridElement,trackMouse:!0,constrainTo:null,header:{dock:"right"},internalListeners:{beforeShow:"updateCreationTooltip",thisObj:e}},e.creationTooltip)}removeConnector(){const e=this,{connector:n,view:r}=e;n&&(n.classList.add("b-removing"),n.style.width="0",e.removeConnectorTimeout=e.setTimeout((()=>{n.remove(),e.connector=null}),200)),r.element.classList.remove("b-creating-dependency"),e.creationTooltip&&e.creationTooltip.hide(),r.scrollManager.stopMonitoring()}showTerminals(e,n){const r=this;if(!r.isCreateAllowed||!e.project)return;const i=r.terminalCls,o=`${i}s-visible`;if(!(n=Gn.down(n,r.view.eventInnerSelector)).classList.contains(o)&&!r.view.element.classList.contains("b-resizing-event")&&!r.view.readOnly){if(!1===r.client.trigger("beforeShowTerminals",{source:e}))return;r.terminalSides.forEach((e=>{e=r.fixSide(e);const o=Gn.createElement({parent:n,className:`${i} ${i}-${e}`,dataset:{side:e,feature:!0}});o.detacher=cn.on({element:o,mouseover:"onTerminalMouseOver",mouseout:"onTerminalMouseOut",pointerdown:{handler:"onTerminalPointerDown",capture:!0},thisObj:r})})),n.classList.add(o),e.internalCls.add(o),r.showingTerminalsFor=n}}fixSide(e){return"left"===e?"start":"right"===e?"end":e}hideTerminals(e){const n=this,r=n.client.getTimeSpanMouseEventParams(e),i=null==r?void 0:r[`${n.eventName}Record`],o=`${n.terminalCls}s-visible`;Gn.forEachSelector(e,`.${n.terminalCls}`,(e=>{e.detacher&&e.detacher(),e.remove()})),Gn.down(e,n.view.eventInnerSelector).classList.remove(o),i.internalCls.remove(o),n.showingTerminalsFor=null}createDependency(e){const{source:n,target:r,fromSide:i,toSide:o}=e,s=("start"===i?0:2)+("end"===o?1:0),a=this.dependencyStore.add({from:n.id,to:r.id,type:s,fromSide:i,toSide:o});return null!==a?a[0]:null}getTargetSideFromType(e){return e===hm.Type.StartToStart||e===hm.Type.EndToStart?"start":"end"}updateCreationTooltip(){const e=this,n=e.creationData,{valid:r}=n,i=e.creationTooltip,{classList:o}=i.element;if(M.isPromise(r))return o.remove("b-invalid"),o.add("b-checking"),new Promise((o=>r.then((r=>{n.valid=r,i.isDestroyed||o(e.updateCreationTooltip())}))));i.html=e.creationTooltipTemplate(n)}creationTooltipTemplate(e){var n,r;const i=this,{tooltip:o,valid:s}=e,{classList:a}=o.element;let l,c;return Object.assign(e,{fromText:w.encodeHtml(e.source.name),toText:w.encodeHtml(null!=(r=null==(n=e.target)?void 0:n.name)?r:""),fromSide:e.fromSide,toSide:e.toSide||""}),a.toggle("b-invalid",!s),a.remove("b-checking"),!0===s?(l="valid",c=i.L("L{Dependencies.valid}")):(l="invalid",c=i.L("L{Dependencies.invalid}")),o.title=`<i class="b-icon b-icon-${l}"></i>${c}`,{children:[{className:"b-sch-dependency-tooltip",children:[{dataset:{ref:"fromLabel"},tag:"label",text:i.L("L{Dependencies.from}")},{dataset:{ref:"fromText"},text:e.fromText},{dataset:{ref:"fromBox"},className:`b-sch-box b-${e.fromSide}`},{dataset:{ref:"toLabel"},tag:"label",text:i.L("L{Dependencies.to}")},{dataset:{ref:"toText"},text:e.toText},{dataset:{ref:"toBox"},className:`b-sch-box b-${e.toSide}`}]}]}}doDisable(e){this.isConfiguring||this.updateCreateListeners(),super.doDisable(e)}},DependencyGridCache_default=e=>{var n;return n=class extends e{constructor(){super(...arguments),__publicField(this,"gridCache",null)}getDependenciesToConsider(e,n,r,i){const o=this,{gridCache:s}=o,{timeAxis:a}=o.client;if(s){const l=new Set,c=Math.floor((e-a.startMS)/o.MS_PER_CELL),d=Math.floor((n-a.startMS)/o.MS_PER_CELL),u=Math.floor(r/25),h=Math.floor(i/25);for(let e=c;e<=d;e++){const n=s[e];if(n)for(let e=u;e<=h;e++){const r=n[e];if(r)for(let e=0;e<r.length;e++)l.add(r[e])}}return l}}afterDrawDependency(e,n,r,i,o){var s,a;const l=this;if(l.constructGridCache){const{MS_PER_CELL:c}=l,{startMS:d,endMS:u}=l.client.timeAxis,h=Math.ceil((u-d)/c),g=Math.floor((i-d)/c),p=Math.floor((o-d)/c),m=Math.floor(n/25),f=Math.floor(r/25),b=Math.min(g,p),v=Math.max(g,p),y=Math.min(m,f),w=Math.max(m,f);if(b<0&&v<0||b>h&&v>h)return;const C=Math.max(b,0),S=Math.min(v,h);for(let n=C;n<=S;n++){const r=null!=(s=l.gridCache[n])?s:l.gridCache[n]={};for(let n=y;n<=w;n++){(null!=(a=r[n])?a:r[n]=[]).push(e)}}}}beforeDraw(){const e=this;if(!e.gridCache){const{visibleDateRange:n}=e.client;e.constructGridCache=!0,e.MS_PER_CELL=Math.max(n.endMS-n.startMS,1e3),e.gridCache={}}}afterDraw(){this.constructGridCache=!1}reset(){this.gridCache=null}},__publicField(n,"$name","DependencyGridCache"),n},Gm=Math.min(1/globalThis.devicePixelRatio,.75),Ym=["start","end","top","bottom"],equalEnough=(e,n)=>Math.abs(e-n)<.1,Km=class extends re{static get configurable(){return{startSide:"right",startArrowMargin:12,startShift:0,endSide:"left",endArrowMargin:12,endShift:0,verticalMargin:2,horizontalMargin:5,otherBoxes:null,client:{}}}findPath(e,n){const r=this,i=e;let o,s,a,l,c,d,u,h,g,p,m,f,b,v,y,w,C,S,x,D,E,R,k,T,M,A,I,F,P;for(n=oe.asArray(n),P=0;e&&!F;)for(o=Object.assign(r.config,e),s=o.startBox,a=o.endBox,l=o.startShift,c=o.endShift,d=o.startSide,u=o.endSide,h=o.startArrowMargin,g=o.endArrowMargin,p=o.horizontalMargin,m=o.verticalMargin,f=o.hasOwnProperty("startHorizontalMargin")?o.startHorizontalMargin:p,b=o.hasOwnProperty("startVerticalMargin")?o.startVerticalMargin:m,v=o.hasOwnProperty("endHorizontalMargin")?o.endHorizontalMargin:p,y=o.hasOwnProperty("endVerticalMargin")?o.endVerticalMargin:m,w=o.hasOwnProperty("otherHorizontalMargin")?o.otherHorizontalMargin:p,C=o.hasOwnProperty("otherVerticalMargin")?o.otherVerticalMargin:m,S=o.otherBoxes,d=r.normalizeSide(d),u=r.normalizeSide(u),x=r.getConnectionCoordinatesFromBoxSideShift(s,d,l),D=r.getConnectionCoordinatesFromBoxSideShift(a,u,c),M=r.calcGridBaseBoxFromBoxAndDrawParams(s,d,h,f,b),A=r.calcGridBaseBoxFromBoxAndDrawParams(a,u,g,v,y),Ym.forEach((e=>{Math.abs(M[e]-A[e])<=Gm&&(A[e]=M[e])})),r.shouldLookForPath(s,a,M,A)&&(S=null==S?void 0:S.map((e=>r.calcGridBaseBoxFromBoxAndDrawParams(e,!1,0,w,C))),E=r.getConnectionCoordinatesFromBoxSideShift(M,d,l),R=r.getConnectionCoordinatesFromBoxSideShift(A,u,c),I=r.buildPathGrid(M,A,E,R,d,u,S),k=r.convertDecartPointToGridPoint(I,E),T=r.convertDecartPointToGridPoint(I,R),F=r.findPathOnGrid(I,k,T,d,u)),e=!1;!F&&!e&&n&&P<n.length;P++)e=n[P](o,i);return F&&(F=r.prependPathWithArrowStaffSegment(F,x,d),F=r.appendPathWithArrowStaffSegment(F,D,u),F=r.optimizePath(F)),F}static calculateRelativePosition(e,n,r=!1){const i=r?"top":"start",o=r?"bottom":"end";let s;return s=e[o]<n[i]?0:e[o]<=n[o]&&e[o]>=n[i]&&e[i]<n[i]?1:e[i]>=n[i]&&e[o]<=n[o]?2:e[i]<n[i]&&e[o]>n[o]?-2:e[i]<=n[o]&&e[o]>n[o]?3:4,s}static boxOverlapChanged(e,n,r,i,o=!1){const s=Km.calculateRelativePosition;return s(e,n,o)!==s(r,i,o)}shouldLookForPath(e,n,r,i){let o=!0;return(e.end-e.start<=this.startArrowMargin||n.end-n.start<=this.endArrowMargin)&&2===Math.abs(Km.calculateRelativePosition(e,n,!0))&&(o=!Km.boxOverlapChanged(e,n,r,i)),o}getConnectionCoordinatesFromBoxSideShift(e,n,r){let i;switch(n){case"left":i={x:e.start,y:(e.top+e.bottom)/2+r};break;case"right":i={x:e.end,y:(e.top+e.bottom)/2+r};break;case"top":i={x:(e.start+e.end)/2+r,y:e.top};break;case"bottom":i={x:(e.start+e.end)/2+r,y:e.bottom}}return i}calcGridBaseBoxFromBoxAndDrawParams(e,n,r,i,o){let s;switch(this.normalizeSide(n)){case"left":s={start:e.start-Math.max(r,i),end:e.end+i,top:e.top-o,bottom:e.bottom+o};break;case"right":s={start:e.start-i,end:e.end+Math.max(r,i),top:e.top-o,bottom:e.bottom+o};break;case"top":s={start:e.start-i,end:e.end+i,top:e.top-Math.max(r,o),bottom:e.bottom+o};break;case"bottom":s={start:e.start-i,end:e.end+i,top:e.top-o,bottom:e.bottom+Math.max(r,o)};break;default:s={start:e.start-i,end:e.end+i,top:e.top-o,bottom:e.bottom+o}}return s}normalizeSide(e){const{rtl:n}=this.client;return"start"===e?n?"right":"left":"end"===e?n?"left":"right":e}buildPathGrid(e,n,r,i,o,s,a){let l,c,d,u,h,g,p,m,f,b,v,y,w;const C={},S=[];for(l=[e.start,"left"===o||"right"===o?(e.start+e.end)/2:r.x,e.end,n.start,"left"===s||"right"===s?(n.start+n.end)/2:i.x,n.end],c=[e.top,"top"===o||"bottom"===o?(e.top+e.bottom)/2:r.y,e.bottom,n.top,"top"===s||"bottom"===s?(n.top+n.bottom)/2:i.y,n.bottom],a&&a.forEach((e=>{l.push(e.start,(e.start+e.end)/2,e.end),c.push(e.top,(e.top+e.bottom)/2,e.bottom)})),l=[...new Set(l.sort(((e,n)=>e-n)))],c=[...new Set(c.sort(((e,n)=>e-n)))],g=0,m=c.length;g<m;++g)for(C[g]=C[g]||{},d=c[g],h=0,p=l.length;h<p;++h){if(u=l[h],y=(u<=e.start||u>=e.end||d<=e.top||d>=e.bottom)&&(u<=n.start||u>=n.end||d<=n.top||d>=n.bottom),a)for(f=0,b=a.length;y&&f<b;++f)v=a[f],y=u<=v.start||u>=v.end||d<=v.top||d>=v.bottom||u===r.x&&d===r.y||u===i.x&&d===i.y;w={distance:Number.MAX_SAFE_INTEGER,permitted:y,x:u,y:d,ix:h,iy:g},C[g][h]=w,S.push(w)}return{width:l.length,height:c.length,xs:l,ys:c,points:C,linearPoints:S}}convertDecartPointToGridPoint(e,n){const r=e.xs.indexOf(n.x),i=e.ys.indexOf(n.y);return e.points[i][r]}findPathOnGrid(e,n,r,i,o){const s=this;let a=!1;return n.permitted&&r.permitted&&(e=s.waveForward(e,n,0),a=s.collectPath(e,r,o)),a}getGridPointNeighbors(e,n,r){const i=n.ix,o=n.iy,s=[];let a;return o<e.height-1&&(a=e.points[o+1][i],(!r||r(a))&&s.push(a)),o>0&&(a=e.points[o-1][i],(!r||r(a))&&s.push(a)),i<e.width-1&&(a=e.points[o][i+1],(!r||r(a))&&s.push(a)),i>0&&(a=e.points[o][i-1],(!r||r(a))&&s.push(a)),s}waveForward(e,n,r){const i=this;return mi.preWalkUnordered([n,r],(([n,r])=>i.getGridPointNeighbors(e,n,(e=>e.permitted&&e.distance>r+1)).map((e=>[e,r+1]))),(([e,n])=>e.distance=n)),e}collectPath(e,n,r){const i=this,o=[];let s,a,l,c,d=!0;for(;d&&n.distance;)if(s=i.getGridPointNeighbors(e,n,(e=>e.permitted&&e.distance===n.distance-1)),d=s.length>0,d){switch(s=s.sort(((e,i)=>{let o,s;o=e.ix-n.ix,s=e.iy-n.iy;const a=("left"===r||"right"===r)&&0===s||("top"===r||"bottom"===r)&&0===o?-1:1;o=i.ix-n.ix,s=i.iy-n.iy;const l=("left"===r||"right"===r)&&0===s||("top"===r||"bottom"===r)&&0===o?-1:1;return a>l?1:a<l?-1:a===l?e.y>i.y?-1:1:void 0})),a=s[0],o.push({x1:a.x,y1:a.y,x2:n.x,y2:n.y}),l=a.ix-n.ix,c=a.iy-n.iy,!0){case!c&&l>0:r="left";break;case!c&&l<0:r="right";break;case!l&&c>0:r="top";break;case!l&&c<0:r="bottom"}n=a}return d&&o.reverse()||!1}prependPathWithArrowStaffSegment(e,n,r){if(e.length>0){const i=e[0],o={x2:i.x1,y2:i.y1};switch(r){case"left":case"right":o.x1=n.x,o.y1=i.y1;break;case"top":case"bottom":o.x1=i.x1,o.y1=n.y}e.unshift(o)}return e}appendPathWithArrowStaffSegment(e,n,r){if(e.length>0){const i=e[e.length-1],o={x1:i.x2,y1:i.y2};switch(r){case"left":case"right":o.x2=n.x,o.y2=i.y2;break;case"top":case"bottom":o.x2=i.x2,o.y2=n.y}e.push(o)}return e}optimizePath(e){const n=[];let r,i;if(e.length>0)for(r=e.shift(),n.push(r);e.length>0;)i=e.shift(),equalEnough(r.x1,i.x1)&&equalEnough(r.y1,i.y1)&&equalEnough(r.x2,i.x2)&&equalEnough(r.y2,i.y2)?r=i:equalEnough(r.y1,r.y2)&&equalEnough(i.y1,i.y2)?r.x2=i.x2:equalEnough(r.x1,r.x2)&&equalEnough(i.x1,i.x2)?r.y2=i.y2:(n.push(i),r=i);return n}};function drawingDirection(e){return e.x1===e.x2?e.y2>e.y1?"d":"u":e.x2>e.x1?"r":"l"}function segmentLength(e){return e.x1===e.x2?e.y2-e.y1:e.x2-e.x1}function line(e,n,r,i,o){let s=e.x1===e.x2?"v":"h",a=i;if(i){const l=segmentLength(e),c=n?Math.abs(segmentLength(n)):Number.MAX_SAFE_INTEGER,d=Math.sign(l);null==o&&(o=i),(Math.abs(l)<2*i||c<2*i)&&(a=Math.min(Math.abs(l),c)/2);const u=l-("single"===r?0:"first"===r?a:"between"===r?o+a:o)*d;s+=Math.sign(u)!==d?0:u,"last"!==r&&"single"!==r&&a>0&&(s+=` ${function arc(e,n,r){const i=drawingDirection(e)+drawingDirection(n),o=r*(i.includes("l")?-1:1),s=r*(i.includes("u")?-1:1);return`a${o},${s} 0 0 ${"ur"===i||"lu"===i||"dl"===i||"rd"===i?1:0} ${o},${s}`}(e,n,a)}`)}else s+=segmentLength(e);return{line:s,currentRadius:i!==a?a:null}}function pathMapper(e,n){const{length:r}=n;if(!r)return"";let i=null;return`M${n[0].x1},${n[0].y1} ${n.map(((o,s)=>{const a=1===r?"single":s===r-1?"last":0===s?"first":"between",l=line(o,n[s+1],a,e,i);return({currentRadius:i}=l),l.line})).join(" ")}`}Km._$name="RectangularPathFinder";var DependencyLineGenerator_default=e=>{var n;return n=class extends e{constructor(){super(...arguments),__publicField(this,"lineCache",{})}onSVGReady(){const e=this;e.pathFinder=new Km({...e.pathFinderConfig,client:e.client}),e.lineDefAdjusters=e.createLineDefAdjusters(),e.createMarker()}changeRadius(e){return null!==e&&Et.assertNumber(e,"radius"),e}updateRadius(){this.isConfiguring||this.reset()}updateRenderer(){this.isConfiguring||this.reset()}changeClickWidth(e){return null!==e&&Et.assertNumber(e,"clickWidth"),e}updateClickWidth(){this.isConfiguring||this.reset()}createMarker(){var e,n;const r=this,{markerDef:i}=r,o=this.client.svgCanvas,s=i?`${r.client.id}-arrowEnd`:"arrowEnd";null==(e=r.marker)||e.remove(),o.style.setProperty("--scheduler-dependency-marker",`url(#${s})`),r.marker=Gn.createElement({parent:o,id:s,tag:"marker",className:"b-sch-dependency-arrow",ns:"http://www.w3.org/2000/svg",markerHeight:11,markerWidth:11,refX:8.5,refY:3,viewBox:"0 0 9 6",orient:"auto-start-reverse",markerUnits:"userSpaceOnUse",retainElement:!0,children:[{tag:"path",ns:"http://www.w3.org/2000/svg",d:null!=(n=r.markerDef)?n:"M3,0 L3,6 L9,3 z"}]})}updateMarkerDef(){this.isConfiguring||this.createMarker()}getAssignmentElement(e){var n,r;return(null==(r=null==(n=this.client.features.eventDrag)?void 0:n.getProxyElement)?void 0:r.call(n,e))||this.client.getElementFromAssignmentRecord(e)}getDomConfigs(e,n,r,i){var o,s;const a=this,l=a.getDependencyKey(e,n,r),c=a.lineCache[l];if(a.constructLineCache||!c||i||a.drawingLive&&(a.getAssignmentElement(n)||a.getAssignmentElement(r))){const c=a.prepareLineDef(e,n,r,i),d=c&&a.pathFinder.findPath(c,a.lineDefAdjusters),{client:u,clickWidth:h}=a,{toEvent:g}=e;if(d){const i=a.highlighted.get(e),p={tag:"path",ns:"http://www.w3.org/2000/svg",d:pathMapper(null!=(o=a.radius)?o:0,d),role:"presentation",dataset:{syncId:l,depId:e.id,fromId:n.id,toId:r.id},elementData:{dependency:e,points:d},class:{[a.baseCls]:1,[e.cls]:e.cls,[e.highlighted]:e.highlighted,[i&&[...i].join(" ")]:i,[a.noMarkerCls]:c.hideMarker,"b-inactive":!1===e.active,"b-sch-bidirectional-line":e.bidirectional,"b-readonly":e.readOnly,"b-sch-dependency-ends-outside":!g.milestone&&(g.endDate<=u.startDate||u.endDate<=g.startDate)||g.milestone&&(g.endDate<u.startDate||u.endDate<g.startDate)}};null==(s=a.renderer)||s.call(a,{domConfig:p,points:d,dependencyRecord:e,fromAssignmentRecord:n,toAssignmentRecord:r,fromBox:c.startBox,toBox:c.endBox,fromSide:c.startSide,toSide:c.endSide});const m=[p];return h>1&&m.push({...p,class:{...p.class,"b-click-area":1},dataset:{...p.dataset,syncId:`${p.dataset.syncId}-click-area`},style:{strokeWidth:h}}),a.lineCache[l]=m}return a.lineCache[l]=null}return c}generateBoundaryBoxes(e,n){return"bottom"===n?[{start:e.left,end:e.left+e.width/2,top:e.rowTop,bottom:e.rowBottom},{start:e.left+e.width/2,end:e.right,top:e.rowTop,bottom:e.rowBottom}]:[{start:e.left-this.pathFinder.startArrowMargin,end:e.right+this.pathFinder.startArrowMargin,top:e.rowTop,bottom:e.rowBottom}]}getAssignmentBounds(e){const{client:n}=this,r=this.getAssignmentElement(e);if(r&&!n.isExporting){const i=Gt.from(r,this.relativeTo);if(n.isHorizontal){let r=n.getRowById(e.resource.id);if(i.y<r.top||i.bottom>r.bottom){const e=n.rowManager.getRowAt(i.center.y,!0);e&&(r=e)}i.rowTop=r.top,i.rowBottom=r.bottom}return i}return n.isEngineReady&&n.getAssignmentEventBox(e,!0)}getConnectorStartSide(e){return this.client.currentOrientation.getConnectorStartSide(e)}getConnectorEndSide(e){return this.client.currentOrientation.getConnectorEndSide(e)}getDependencyStartSide(e){const{fromEvent:n,type:r,fromSide:i}=e;if(i)return i;switch(!0){case r===pm.Type.StartToEnd:case r===pm.Type.StartToStart:return this.getConnectorStartSide(n);case r===pm.Type.EndToStart:case r===pm.Type.EndToEnd:default:return this.getConnectorEndSide(n)}}getDependencyEndSide(e){const{toEvent:n,type:r,toSide:i}=e;if(i)return i;switch(!0){case r===pm.Type.EndToEnd:case r===pm.Type.StartToEnd:return this.getConnectorEndSide(n);case r===pm.Type.EndToStart:case r===pm.Type.StartToStart:default:return this.getConnectorStartSide(n)}}createLineDefAdjusters(){const{client:e}=this;return[function shrinkArrowMargins(n){const{barMargin:r}=e;let i=!1;return(n.startArrowMargin>r||n.endArrowMargin>r)&&(n.startArrowMargin=n.endArrowMargin=r,i=!0),i?n:i},function resetArrowMargins(e){let n=!1;return(e.startArrowMargin>0||e.endArrowMargin>0)&&(e.startArrowMargin=e.endArrowMargin=0,n=!0),n?e:n},function shrinkHorizontalMargin(e,n){let r=!1;return e.horizontalMargin>2&&(e.horizontalMargin=1,r=!0,n.hideMarker=!0),r?e:r}]}adjustLineDef(e,n){return n}prepareLineDef(e,n,r,i){var o,s;const a=this,l=a.getDependencyStartSide(e),c=a.getDependencyEndSide(e),d=null!=(o=null==i?void 0:i.from)?o:a.getAssignmentBounds(n),u=null!=(s=null==i?void 0:i.to)?s:a.getAssignmentBounds(r),h=[];if(!d||!u)return null;let{startArrowMargin:g,verticalMargin:p}=a.pathFinder;return a.client.isHorizontal&&(null!=d.rowTop&&d.rowTop!==u.rowTop&&h.push(...a.generateBoundaryBoxes(d,l)),e.bidirectional||(/(top|bottom)/.test(l)&&(g=a.client.barMargin/2),p=a.client.barMargin/2)),a.adjustLineDef(e,{startBox:d,endBox:u,otherBoxes:h,startArrowMargin:g,verticalMargin:p,otherVerticalMargin:0,otherHorizontalMargin:0,startSide:l,endSide:c})}beforeDraw(){super.beforeDraw(),Object.keys(this.lineCache).length||(this.constructLineCache=!0)}afterDraw(){super.afterDraw(),this.constructLineCache=!1}reset(){super.reset(),this.lineCache={}}},__publicField(n,"$name","DependencyLineGenerator"),n},Xm=["start","start","end","end"],Zm=["start","end","start","end"],DependencyTooltip_default=e=>{var n;return __publicField(n=class extends e{changeTooltip(e,n){const r=this;return null==n||n.destroy(),r.showTooltip&&e?fc.new({align:"b-t",id:`${r.client.id}-dependency-tip`,forSelector:`.b-timelinebase:not(.b-eventeditor-editing,.b-taskeditor-editing,.b-resizing-event,.b-dragcreating,.b-dragging-event,.b-creating-dependency) .${r.baseCls}`,forElement:r.client.timeAxisSubGridElement,showOnHover:!0,hoverDelay:0,hideDelay:0,anchorToTarget:!1,textContent:!1,trackMouse:!1,getHtml:r.getHoverTipHtml.bind(r)},e):null}getHoverTipHtml({activeTarget:e}){return this.tooltipTemplate(this.resolveDependencyRecord(e))}},"$name","DependencyTooltip"),__publicField(n,"configurable",{showTooltip:!0,tooltipTemplate(e){return{children:[{className:"b-sch-dependency-tooltip",children:[{tag:"label",text:this.L("L{Dependencies.from}")},{text:e.fromEvent.name},{className:`b-sch-box b-${e.fromSide||Xm[e.type]}`},{tag:"label",text:this.L("L{Dependencies.to}")},{text:e.toEvent.name},{className:`b-sch-box b-${e.toSide||Zm[e.type]}`}]}]}},tooltip:{$config:"nullify",value:{}}}),n},Qm={click:"Click",dblclick:"DblClick",contextmenu:"ContextMenu"},collectLinkedAssignments=e=>{var n;const r=[e];return(null==(n=e.resource)?void 0:n.hasLinks)&&r.push(...e.resource.$links.map((n=>({id:`${n.id}_${e.id}`,resource:n,event:e.event,drawDependencies:e.drawDependencies})))),r},Jm=class extends(sr.mixin(AttachToProjectMixin_default,Delayable_default,DependencyCreation_default,DependencyGridCache_default,DependencyLineGenerator_default,DependencyTooltip_default)){constructor(){super(...arguments),__publicField(this,"domConfigs",new Map),__publicField(this,"drawingLive",!1),__publicField(this,"lastScrollX",null),__publicField(this,"highlighted",new Map),__publicField(this,"visibleResources",null),__publicField(this,"usingLinks",null),__publicField(this,"visibleDateRange",null),__publicField(this,"relativeTo",null)}static get pluginConfig(){return{chain:["render","onPaint","onElementClick","onElementDblClick","onElementContextMenu","onElementMouseOver","onElementMouseOut","bindStore"],assign:["getElementForDependency","getElementsForDependency","resolveDependencyRecord"]}}construct(e,n){super.construct(e,n);const{scheduledEventName:r}=e;e.ion({svgCanvasCreated:"onSVGReady",animationStart:"refresh",[r+"DragStart"]:"refresh",[r+"DragAbort"]:"refresh",[r+"ResizeStart"]:"refresh",[r+"SegmentDragStart"]:"refresh",[r+"SegmentResizeStart"]:"refresh",timelineViewportResize:"reset",timeAxisViewModelUpdate:"reset",toggleNode:"reset",thisObj:this}),e.rowManager.ion({refresh:"reset",changeTotalHeight:"reset",thisObj:this}),this.bindStore(e.store)}doDisable(e){this.isConfiguring||(this._isDisabling=e,this.draw(),this._isDisabling=!1),super.doDisable(e)}get rowStore(){return this.client.isVertical?this.client.resourceStore:this.client.store}bindStore(e){const n=this;n.client.isVertical||(n.detachListeners("store"),n.client.usesDisplayStore&&(null==e||e.ion({name:"store",refresh:"onStoreRefresh",thisObj:n}),n.reset()))}onStoreRefresh(){this.reset()}attachToProject(e){super.attachToProject(e),null==e||e.ion({name:"project",commitFinalized:"reset",thisObj:this})}attachToResourceStore(e){super.attachToResourceStore(e),null==e||e.ion({name:"resourceStore",change:"onResourceStoreChange",refresh:"onResourceStoreChange",thisObj:this})}onResourceStoreChange(){this.usingLinks=null,this.reset()}attachToEventStore(e){super.attachToEventStore(e),null==e||e.ion({name:"eventStore",refresh:"reset",thisObj:this})}attachToAssignmentStore(e){super.attachToAssignmentStore(e),null==e||e.ion({name:"assignmentStore",refresh:"reset",thisObj:this})}attachToDependencyStore(e){super.attachToDependencyStore(e),null==e||e.ion({name:"dependencyStore",change:"reset",refresh:"reset",thisObj:this})}updateDrawOnScroll(e){const n=this;n.detachListeners("scroll"),e?n.client.ion({name:"scroll",scroll:"doRefresh",horizontalScroll:"onHorizontalScroll",prio:-100,thisObj:n}):(n.client.scrollable.ion({name:"scroll",scrollEnd:"draw",thisObj:n}),n.client.timeAxisSubGrid.scrollable.ion({name:"scroll",scrollEnd:"draw",thisObj:n}))}onHorizontalScroll({subGrid:e,scrollX:n}){n!==this.lastScrollX&&e===this.client.timeAxisSubGrid&&(this.lastScrollX=n,this.draw())}onPaint(){this.refresh()}static getLocalizedDependencyType(e){return e?this.L(`L{DependencyType.${e}}`):""}getElementForDependency(e,n,r){return this.getElementsForDependency(e,n,r)[0]}getElementsForDependency(e,n,r){let i=`[data-dep-id="${e.id}"]`;return n&&(i+=`[data-from-id="${n.id}"]`),r&&(i+=`[data-to-id="${r.id}"]`),Array.from(this.client.svgCanvas.querySelectorAll(i))}resolveDependencyRecord(e){var n;return null==(n=e.elementData)?void 0:n.dependency}isDependencyElement(e){return e.matches(`.${this.baseCls}`)}onElementClick(e){const n=this.resolveDependencyRecord(e.target);if(n){const r=Qm[e.type];this.client.trigger(`dependency${r}`,{dependency:n,event:e})}}onElementDblClick(e){return this.onElementClick(e)}onElementContextMenu(e){return this.onElementClick(e)}onElementMouseOver(e){const n=this,r=n.resolveDependencyRecord(e.target);r&&(n.client.trigger("dependencyMouseOver",{dependency:r,event:e}),n.overCls&&n.highlight(r))}onElementMouseOut(e){const n=this,r=n.resolveDependencyRecord(e.target);r&&(n.client.trigger("dependencyMouseOut",{dependency:r,event:e}),n.overCls&&n.unhighlight(r))}isDependencyVisible(e){const{rowStore:n}=this,{fromEvent:r,toEvent:i}=e;if(!r||!i)return!1;const o=r.resource,s=i.resource;return!(!n.isAvailable(o)||!n.isAvailable(s))&&(r.isModel&&!o.instanceMeta(n).hidden&&!s.instanceMeta(n).hidden)}updateHighlightDependenciesOnEventHover(e){const n=this;if(e){const{client:e}=n;e.ion({name:"highlightOnHover",[`${e.scheduledEventName}MouseEnter`]:e=>n.highlightEventDependencies(e.eventRecord||e.taskRecord),[`${e.scheduledEventName}MouseLeave`]:e=>n.unhighlightEventDependencies(e.eventRecord||e.taskRecord),thisObj:n})}else n.detachListeners("highlightOnHover")}highlight(e,n=this.overCls){let r=this.highlighted.get(e);r||this.highlighted.set(e,r=new Set),r.add(n);for(const r of this.getElementsForDependency(e))r.classList.add(n)}unhighlight(e,n=this.overCls){const r=this.highlighted.get(e);r&&(r.delete(n),r.size||this.highlighted.delete(e));for(const r of this.getElementsForDependency(e))r.classList.remove(n)}highlightEventDependencies(e,n){e.dependencies.forEach((e=>this.highlight(e,n)))}unhighlightEventDependencies(e,n){e.dependencies.forEach((e=>this.unhighlight(e,n)))}getDependenciesToConsider(e,n,r,i){var o,s;return null!=(s=null==(o=super.getDependenciesToConsider)?void 0:o.call(this,e,n,r,i))?s:this.project.dependencyStore.records.filter((e=>e.isValid))}getDependencyKey(e,n,r){return`dep:${e.id};from:${n.id};to:${r.id}`}drawDependency(e,n=!1,r=null){var i,o,s,a;const l=this,{domConfigs:c,client:d,rowStore:u,topIndex:h,bottomIndex:g}=l,{eventStore:p,useInitialAnimation:m}=d,{idMap:f}=u,{startMS:b,endMS:v}=l.visibleDateRange,{fromEvent:y,toEvent:w}=e;let C=y.assigned,S=w.assigned;if(y.isScheduled&&w.isScheduled&&p.includes(y)&&p.includes(w)&&(null==C?void 0:C.size)&&(null==S?void 0:S.size)){l.usingLinks&&(C=[...C].flatMap(collectLinkedAssignments),S=[...S].flatMap(collectLinkedAssignments));for(const n of C)for(const p of S){const C=null==(o=f[null==(i=n.resource)?void 0:i.id])?void 0:o.index,S=null==(a=f[null==(s=p.resource)?void 0:s.id])?void 0:a.index,x=Math.min(y.startDateMS,w.startDateMS),D=Math.max(y.endDateMS,w.endDateMS);if(d.isExporting||null!=C&&null!=S&&!1!==n.drawDependencies&&!1!==p.drawDependencies&&u.isAvailable(n.resource)&&u.isAvailable(p.resource)&&!(C<h&&S<h||C>g&&S>g||x<b&&D<b||x>v&&D>v)){const i=l.getDependencyKey(e,n,p),o=l.getDomConfigs(e,n,p,r);o?(m&&(o[0].style={animationDelay:Math.max(C,S)/20*1e3+"ms"}),c.set(i,o)):c.delete(i)}l.afterDrawDependency(e,C,S,x,D)}}n||l.domSync()}afterDrawDependency(e,n,r,i,o){var s;null==(s=super.afterDrawDependency)||s.call(this,e,n,r,i,o)}beforeDraw(){var e;null==(e=super.beforeDraw)||e.call(this)}afterDraw(){var e;null==(e=super.afterDraw)||e.call(this)}domSync(e=this.client.svgCanvas){$o.sync({targetElement:e,domConfig:{onlyChildren:!0,children:Array.from(this.domConfigs.values()).flat()},syncIdField:"syncId",releaseThreshold:0,strict:!0,callback(){}})}fillDrawingCache(){const e=this,{client:n}=e;e.relativeTo=Gt.from(n.foregroundCanvas),e.visibleResources=n.visibleResources,e.visibleDateRange=n.visibleDateRange,e.topIndex=e.rowStore.indexOf(e.visibleResources.first),e.bottomIndex=e.rowStore.indexOf(e.visibleResources.last),null==e.usingLinks&&(e.usingLinks=n.resourceStore.some((e=>e.hasLinks)))}draw(){const e=this,{client:n}=e;if(!n.refreshSuspended&&n.foregroundCanvas&&n.isEngineReady&&(!e.disabled||e._isDisabling)&&!n.isExporting){if(e.fillDrawingCache(),e.domConfigs.clear(),n.firstVisibleRow&&n.lastVisibleRow&&n.timeAxis.count&&!e.disabled&&e.visibleDateRange.endMS-e.visibleDateRange.startMS>0){const{visibleDateRange:r}=n,{topIndex:i,bottomIndex:o}=e,s=e.getDependenciesToConsider(r.startMS,r.endMS,i,o);e.beforeDraw();for(const n of s)e.drawDependency(n,!0);e.afterDraw()}e.domSync(),n.trigger("dependenciesDrawn")}}doRefresh(){var e,n,r,i;const o=this,{client:s}=o,{scheduledEventName:a}=s;o.draw(),o.drawingLive=s.dependencyStore.count&&(s.isAnimating||s.useInitialAnimation&&s.eventStore.count||(null==(e=s.features[`${a}Drag`])?void 0:e.isActivelyDragging)||(null==(n=s.features[`${a}Resize`])?void 0:n.isResizing)||(null==(r=s.features[`${a}SegmentDrag`])?void 0:r.isActivelyDragging)||(null==(i=s.features[`${a}SegmentResize`])?void 0:i.isResizing)),o.drawingLive&&o.refresh()}refresh(){const{client:e}=this;e.refreshSuspended||this.disabled||!e.isPainted||e.timeAxisSubGrid.collapsed||this.doRefresh()}reset(){var e;null==(e=super.reset)||e.call(this),this.refresh()}drawForEvent(){A.deprecate("Scheduler","6.0.0","Dependencies.drawForEvent() is no longer needed"),this.refresh()}render(){this.client.getConfig("svgCanvas")}};__publicField(Jm,"$name","Dependencies"),__publicField(Jm,"configurable",{overCls:"b-sch-dependency-over",baseCls:"b-sch-dependency",noMarkerCls:"b-sch-dependency-markerless",markerDef:null,radius:null,renderer:null,highlightDependenciesOnEventHover:null,drawOnScroll:!0,clickWidth:null}),__publicField(Jm,"delayable",{doRefresh:10}),Jm._$name="Dependencies",du.registerFeature(Jm,!1,["Scheduler","ResourceHistogram"]),du.registerFeature(Jm,!0,"SchedulerPro");var ef=class extends _a{static get $name(){return"DependencyEditor"}static get defaultConfig(){return{items:[],draggable:{handleSelector:":not(button,.b-field-inner)"},axisLock:"flexible"}}processWidgetConfig(e){const{dependencyEditFeature:n}=this;return!("lagField"===e.ref&&!n.showLagField)&&(!("deleteButton"===e.ref&&!n.showDeleteButton)&&super.processWidgetConfig(e))}afterShow(...e){const{deleteButton:n}=this.widgetMap;n&&(n.hidden=!this.record.isPartOfStore()),super.afterShow(...e)}onInternalKeyDown(e){this.trigger("keyDown",{event:e}),super.onInternalKeyDown(e)}};ef._$name="DependencyEditor";var tf=class extends sr{static get $name(){return"DependencyEdit"}static get configurable(){return{autoClose:!0,saveAndCloseOnEnter:!0,showDeleteButton:!0,triggerEvent:"dependencydblclick",showLagField:!1,dependencyRecord:null,editorConfig:{title:"L{Edit dependency}",localeClass:this,closable:!0,defaults:{localeClass:this},items:{fromNameField:{type:"display",weight:100,label:"L{From}"},toNameField:{type:"display",weight:200,label:"L{To}"},typeField:{type:"combo",weight:300,label:"L{Type}",name:"type",editable:!1,valueField:"id",displayField:"name",localizeDisplayFields:!0,buildItems:function(){const e=this.parent;return Object.keys(pm.Type).map((n=>({id:pm.Type[n],name:e.L(n),localeKey:n})))}},lagField:{type:"duration",weight:400,label:"L{Lag}",name:"lag",allowNegative:!0}},bbar:{defaults:{localeClass:this},items:{foo:{type:"widget",cls:"b-label-filler"},saveButton:{color:"b-green",text:"L{Save}"},deleteButton:{color:"b-gray",text:"L{Delete}"},cancelButton:{color:"b-gray",text:"L{Object.Cancel}"}}}}}}construct(e,n){const r=this;if(e.dependencyEdit=r,super.construct(e,n),!e.features.dependencies)throw new Error("Dependencies feature required when using DependencyEdit");r.clientListenersDetacher=e.ion({[r.triggerEvent]:r.onActivateEditor,thisObj:r})}doDestroy(){var e;this.clientListenersDetacher(),null==(e=this.editor)||e.destroy(),super.doDestroy()}changeEditorConfig(e){const{autoClose:n,cls:r,client:i}=this;return Et.assign({owner:i,align:"b-t",id:`${i.id}-dependency-editor`,autoShow:!1,anchor:!0,scrollAction:"realign",clippedBy:[i.timeAxisSubGridElement,i.bodyContainer],constrainTo:globalThis,autoClose:n,cls:r},e)}get isValid(){return Object.values(this.editor.widgetMap).every((e=>!(e.name&&!e.hidden)||!1!==e.isValid))}get values(){const e={};return this.editor.eachWidget((n=>{n.name&&!n.hidden&&(e[n.name]=n.value)}),!0),e}onBeforeSave(e){}onAfterSave(e){}updateRecord(e){const{values:n}=this;n.lag&&(n.lagUnit=n.lag.unit,n.lag=n.lag.magnitude),"type"in n&&(null!=e.fromSide&&(n.fromSide=null),null!=e.toSide&&(n.toSide=null)),Et.cleanupProperties(n,!0),e.set(n)}onPopupKeyDown({event:e}){"Enter"===e.key&&this.saveAndCloseOnEnter&&"input"===e.target.tagName.toLowerCase()&&(e.preventDefault(),this.onSaveClick())}onSaveClick(){this.save()&&this.editor.hide()}onDeleteClick(){this.deleteDependency(),this.editor.hide()}onCancelClick(){this.editor.hide()}internalShowEditor(e){const n=this,{client:r}=n;let i=n.lastPointerDownCoordinate;if(!1===r.trigger("beforeDependencyEdit",{dependencyEdit:n,dependencyRecord:e}))return;const o=n.getEditor(e);if(n.loadRecord(e),r.trigger("beforeDependencyEditShow",{dependencyEdit:n,dependencyRecord:e,editor:o}),!i){const e=Gt.from(n.client.element).center;i=[e.x-o.width/2,e.y-o.height/2]}o.showBy(i)}editDependency(e){this.client.readOnly||e.readOnly||this.internalShowEditor(e)}getEditor(){var e,n,r;const i=this;let{editor:o}=i;return o||(o=i.editor=ef.new({dependencyEditFeature:i,autoShow:!1,anchor:!0,scrollAction:"realign",constrainTo:globalThis,autoClose:i.autoClose,cls:i.cls,rootElement:i.client.rootElement,internalListeners:{keydown:i.onPopupKeyDown,thisObj:i}},i.editorConfig),0===o.items.length&&console.warn("Editor configured without any `items`"),o.eachWidget((e=>{const n=e.ref||e.id;n&&!i[n]&&(i[n]=e)})),null==(e=i.saveButton)||e.ion({click:"onSaveClick",thisObj:i}),null==(n=i.deleteButton)||n.ion({click:"onDeleteClick",thisObj:i}),null==(r=i.cancelButton)||r.ion({click:"onCancelClick",thisObj:i}),i.editor)}loadRecord(e){const n=this;n.fromNameField.value=e.fromEvent.name,n.toNameField.value=e.toEvent.name,n.lagField&&(n.lagField.value=new Gr(e.lag,e.lagUnit)),n.editor.record=n.dependencyRecord=e}async save(){var e;const n=this,{client:r,dependencyRecord:i}=n;if(!i||!n.isValid)return;const{dependencyStore:o,values:s}=n;if(!1!==r.trigger("beforeDependencySave",{dependencyRecord:i,values:s})){if(n.onBeforeSave(i),n.updateRecord(i),o&&!i.stores.length){if(!1===r.trigger("beforeDependencyAdd",{dependencyRecord:i,dependencyEdit:n}))return;o.add(i)}await(null==(e=r.project)?void 0:e.commitAsync()),r.trigger("afterDependencySave",{dependencyRecord:i}),n.onAfterSave(i)}return i}async deleteDependency(){var e;const{client:n,editor:r,dependencyRecord:i}=this;return!1!==n.trigger("beforeDependencyDelete",{dependencyRecord:i})&&(r.containsFocus&&r.revertFocus(),n.dependencyStore.remove(i),await(null==(e=n.project)?void 0:e.commitAsync()),!0)}get dependencyStore(){return this.client.dependencyStore}onActivateEditor({dependency:e,event:n}){this.disabled||(this.lastPointerDownCoordinate=[n.clientX,n.clientY],this.editDependency(e))}};tf._$name="DependencyEdit",du.registerFeature(tf,!1);var nf=class extends(sr.mixin(Delayable_default)){static get $name(){return"ScheduleContext"}construct(e,n){super.construct(e,n);const{triggerEvent:r}=this,i={datachange:"syncContextElement",timeaxisviewmodelupdate:"onTimeAxisViewModelUpdate",presetchange:"clearContext",thisObj:this};"mouseover"===r?i.timelineContextChange="onTimelineContextChange":("click"!==r&&"mousedown"!==r||(i.schedulecontextmenu="onScheduleContextGesture"),Object.assign(i,{[`schedule${r}`]:"onScheduleContextGesture",[`event${r}`]:"onScheduleContextGesture",...i})),e.useBackgroundCanvas=!0,e.ion(i),e.rowManager.ion({rowheight:"syncContextElement",thisObj:this})}changeTriggerEvent(e){return"hover"!==e&&"mousemove"!==e||(e="mouseover"),e}get element(){return this._element||(this._element=Gn.createElement({parent:this.client.backgroundCanvas,className:"b-schedule-selected-tick"}))}onTimelineContextChange({context:e}){this.context=e}onScheduleContextGesture(e){this.context=e}onTimeAxisViewModelUpdate({source:e}){var n;e.timeAxis.includes(null==(n=this.context)?void 0:n.tick)?this.syncContextElement():this.clearContext()}clearContext(){this.context=null}updateContext(e,n){this.syncContextElement()}syncContextElement(){if(this.context&&this.enabled){const e=this,{client:n,element:r,context:i,renderer:o}=e,{isVertical:s}=n,{style:a}=r,l=s?n.rowManager.rows[0]:n.getRowFor(i.resourceRecord);if(l){const{tickStartDate:c,tickEndDate:d,resourceRecord:u}=i,h=n.currentOrientation.getTimeSpanRenderData({startDate:c,endDate:d,startDateMS:c.getTime(),endDateMS:d.getTime()},u);let g,p,m;s?(g=h.top,p=h.resourceWidth,m=h.height):(g=l.top,p=h.width,m=l.height),a.display="",a.width=`${p}px`,a.height=`${m}px`,Gn.setTranslateXY(r,h.left,g),i.index=l.index,r.innerHTML="",o&&e.callback(o,e,[i,r])}else a.display="none"}else this.element.style.display="none"}};__publicField(nf,"delayable",{syncContextElement:"raf"}),__publicField(nf,"configurable",{triggerEvent:"click",renderer:null,context:{$config:{equal:(e,n)=>(null==e?void 0:e.index)===(null==n?void 0:n.index)&&(null==e?void 0:e.tickParentIndex)===(null==n?void 0:n.tickParentIndex)&&!(((null==e?void 0:e.tickStartDate)||0)-((null==n?void 0:n.tickStartDate)||0))}}}),nf.featureClass="b-scheduler-context",nf._$name="ScheduleContext",du.registerFeature(nf,!1,["Scheduler"]);var rf=class extends sr{constructor(){super(...arguments),__publicField(this,"clipboardRecords",[]),__publicField(this,"entityName","event")}construct(e,n){super.construct(e,n),e.ion({eventclick:this.onEventClick,scheduleclick:this.onScheduleClick,projectChange:()=>{this.clearClipboard(),this._cellClickedContext=null},thisObj:this}),this.scheduler=e}onEventDataGenerated(e){const{assignmentRecord:n}=e;n&&(e.cls["b-cut-item"]=n.meta.isCut)}onEventClick(e){this._cellClickedContext=null}onScheduleClick(e){this._cellClickedContext=e}isActionAvailable({event:e}){var n;const r=this.client.features.cellEdit;return!this.disabled&&0===globalThis.getSelection().toString().length&&!(null==r?void 0:r.isEditing)&&Boolean(e.target.closest(".b-timeaxissubgrid"))&&!(null==(n=this.client.focusedCell)?void 0:n.isSpecialRow)}copy(){this.copyEvents()}cut(){this.copyEvents(void 0,!0)}paste(){this.pasteEvents()}copyEvents(e=this.scheduler.selectedAssignments,n=!1){const r=this,{scheduler:i,entityName:o}=r;if(!(null==e?void 0:e.length))return;let s=e.slice();e[0].isEventModel&&(s=e.map((e=>e.assignments)).flat()),n&&(s=s.filter((e=>!e.event.readOnly)));const a=s.map((e=>e.event));s.length&&!i.readOnly&&!1!==i.trigger("beforeCopy",{assignmentRecords:s,records:a,eventRecords:a,isCut:n,entityName:o})&&(s.length>0&&i.trigger("copy",{assignmentRecords:s,eventRecords:a,isCut:n,entityName:o}),r._isCut=n,r.clipboard={assignmentRecords:s,eventRecords:a},i.assignmentStore.forEach((e=>{e.meta.isCut=n&&s.includes(e)})),i.refreshWithTransition())}pasteEvents(e,n){const r=this,{clipboard:i,scheduler:o,entityName:s}=r;if(!i)return;const{assignmentRecords:a,eventRecords:l}=i,c=r._isCut;let d;if(0===arguments.length){const i=r._cellClickedContext||{};e=i.date,n=i.resourceRecord}if(n&&(n.readOnly&&(d="resourceReadOnly"),n=n.$original),!o.allowOverlap){a.some((e=>!o.isDateRangeAvailable(e.event.startDate,e.event.endDate,c?e.event:null,e.resource)))&&(d="overlappingEvents")}if(d)return void o.trigger("pasteNotAllowed",{assignmentRecords:a,records:l,eventRecords:l,resourceRecord:n||a[0].resource,date:e,isCut:c,entityName:s,reason:d});if(!i||!1===o.trigger("beforePaste",{assignmentRecords:a,records:l,eventRecords:l,resourceRecord:n||a[0].resource,date:e,isCut:c,entityName:s}))return;let u=null;const h=new Set,g=[];for(const i of a){let{event:s}=i;const a=n||i.resource,l=e||i.event.startDate;if(h.has(s))c&&i.remove();else{if(h.add(s),c)i.meta.isCut=!1,i.resource=a,u=i;else if(o.eventStore.usesSingleAssignment||"clone"===r.copyPasteAction)s=s.copy(),s.name=r.generateNewName(s),o.eventStore.add(s),s.assign(a),u=o.assignmentStore.last;else if(!s.resources.includes(a)){const e=i.copy();e.resource=a,[u]=o.assignmentStore.add(e)}s.startDate=l,s.constraintDate&&(s.constraintDate=null),g.push(s)}}i&&o.trigger("paste",{assignmentRecords:a,pastedEventRecords:g,eventRecords:l,resourceRecord:n,date:e,isCut:c,entityName:s});const p=o.ion({renderEvent({assignmentRecord:e}){e===u&&(o.navigateTo(e,{scrollIntoView:!1}),p())}});c&&r.clearClipboard()}clearClipboard(){const e=this;e._isCut&&(e.clipboard.assignmentRecords.forEach((e=>{e.meta.isCut=!1})),e.scheduler.refreshWithTransition(),e._isCut=!1),e.clipboard=null}populateEventMenu({assignmentRecord:e,items:n}){const r=this,{scheduler:i}=r;i.readOnly||(n.copyEvent={text:"L{copyEvent}",localeClass:r,icon:"b-icon b-icon-copy",weight:110,onItem:()=>{const n=i.isAssignmentSelected(e)?i.selectedAssignments:[e];r.copyEvents(n)}},n.cutEvent={text:"L{cutEvent}",localeClass:r,icon:"b-icon b-icon-cut",weight:120,disabled:e.event.readOnly,onItem:()=>{const n=i.isAssignmentSelected(e)?i.selectedAssignments:[e];r.copyEvents(n,!0)}})}populateScheduleMenu({items:e,resourceRecord:n}){const r=this,{scheduler:i}=r;!i.readOnly&&r.clipboard&&(e.pasteEvent={text:"L{pasteEvent}",localeClass:r,icon:"b-icon b-icon-paste",disabled:0===i.resourceStore.count||n.readOnly,weight:110,onItem:({date:e,resourceRecord:n})=>r.pasteEvents(e,n,i.getRowFor(n))})}generateNewName(e){const n=e[this.nameField];let r=2;for(;this.client.eventStore.findRecord(this.nameField,`${n} - ${r}`);)r++;return`${n} - ${r}`}};__publicField(rf,"$name","EventCopyPaste"),__publicField(rf,"pluginConfig",{assign:["copyEvents","pasteEvents"],chain:["populateEventMenu","populateScheduleMenu","onEventDataGenerated"]}),__publicField(rf,"configurable",{nameField:"name",keyMap:{"Ctrl+C":"copy","Ctrl+X":"cut","Ctrl+V":"paste"},copyPasteAction:"clone"}),rf.featureClass="b-event-copypaste",rf._$name="EventCopyPaste",du.registerFeature(rf,!0,"Scheduler");var of=class extends Om{static get $name(){return"EventDrag"}static get configurable(){return{constrainDragToResource:!1,constrainDragToTimeSlot:!1,externalDropTargetSelector:null,validatorFn:(e,n)=>{},validatorFnThisObj:null,unifiedDrag:null,snapToPosition:null,copyKey:"SHIFT",copyMode:"auto",mode:"move",capitalizedEventName:null}}afterConstruct(){this.capitalizedEventName=this.capitalizedEventName||this.client.capitalizedEventName,super.afterConstruct(...arguments)}changeMode(e){const{dragData:n,copyMode:r}=this;if(("event"===r||"auto"===r||"assignment"===r&&!this.scheduler.eventStore.usesSingleAssignment)&&(!n||n.eventRecords.every((e=>!e.isRecurring))))return e}updateMode(e){this.dragData&&("copy"===e?this.setCopying():this.setMoving(),this.client.trigger("eventDragModeChange",{mode:e}))}setCopying(){const{dragData:e}=this;e&&(e.eventBarCopies.some((e=>e.isConnected))?e.eventBarCopies.forEach((e=>{e.classList.remove("b-hidden")})):e.eventBarCopies.forEach((n=>{n.classList.add("b-drag-proxy-copy"),n.classList.remove("b-hidden"),e.context.grabbedParent.appendChild(n),n.retainElement=!0})))}setMoving(){const{dragData:e}=this;e&&e.eventBarCopies.forEach((e=>{e.classList.add("b-hidden")}))}get scheduler(){return this.client}onAfterDragStart(e){const n=this,{context:{element:r}}=e;super.onAfterDragStart(e),n.handleKeyDownOrMove(e.event),n.keyEventDetacher=cn.on({element:Gn.getRootElement(r),keydown:n.handleKeyDownOrMove,keyup:n.handleKeyUp,thisObj:n})}onDragReset(e){var n;super.onDragReset(e),null==(n=this.keyEventDetacher)||n.call(this),this.mode="move"}onDrop(e){var n;return null==(n=this.dragData.eventBarCopies)||n.forEach((e=>e.remove())),super.onDrop(e)}getDraggableElement(e){return null==e?void 0:e.closest(this.drag.targetSelector)}resolveEventRecord(e,n=this.client){return n.resolveEventRecord(e)}isElementDraggable(e,n){var r;const i=this,{client:o}=i,s=i.getDraggableElement(e);if(!s||i.disabled||o.readOnly)return!1;if(e.matches('[class$="-handle"]'))return!1;const a=i.resolveEventRecord(s,o);if(!a||!a.isDraggable||a.readOnly)return!1;return!(!1===(null==(r=o[`is${i.capitalizedEventName}ElementDraggable`])?void 0:r.call(o,s,a,e,n)))}getTriggerParams(e){const{assignmentRecords:n,eventRecords:r,resourceRecord:i,browserEvent:o}=e;return{context:e,eventRecords:r,resourceRecord:i,assignmentRecords:n,event:o,domEvent:o}}triggerBeforeEventDrag(e,n){return this.client.trigger(e,n)}triggerEventDrag(e,n){this.client.trigger("eventDrag",Object.assign(this.getTriggerParams(e),{startDate:e.startDate,endDate:e.endDate,newResource:e.newResource}))}triggerDragStart(e){this.client.navigator.skipNextClick=!0,this.client.trigger("eventDragStart",this.getTriggerParams(e))}triggerDragAbort(e){this.client.trigger("eventDragAbort",this.getTriggerParams(e))}triggerDragAbortFinalized(e){this.client.trigger("eventDragAbortFinalized",this.getTriggerParams(e))}triggerAfterDrop(e,n){const r=this;if(r.currentOverClient.trigger("afterEventDrop",Object.assign(r.getTriggerParams(e),{valid:n})),!n){const{assignmentStore:e,eventStore:n}=r.client;r.dragData.initialAssignmentsState.find((({resource:i,assignment:o},s)=>{var a;return!e.includes(o)||!n.includes(o.event)||i.id!==(null==(a=r.dragData.assignmentRecords[s])?void 0:a.resourceId)}))&&r.client.refresh()}r.client.setTimeout((()=>r.client.navigator.skipNextClick=!1),10)}handleKeyDownOrMove(e){"copy"!==this.mode&&(e.key&&cn.specialKeyFromEventKey(e.key)===this.copyKey.toLowerCase()||e[`${this.copyKey.toLowerCase()}Key`])&&(this.mode="copy")}handleKeyUp(e){cn.specialKeyFromEventKey(e.key)===this.copyKey.toLowerCase()&&(this.mode="move")}isValidDrop(e){const{newResource:n,resourceRecord:r}=e,i=e.draggedEntities[0];return n?!n.isSpecialRow&&!n.readOnly&&(r===n||!i.event.resources.includes(n)):!(this.constrainDragToTimeline||!this.externalDropTargetSelector)&&Boolean(e.browserEvent.target.closest(this.externalDropTargetSelector))}checkDragValidity(e,n){var r,i,o;const s=this,a=s.currentOverClient;let l;return!(null==(r=e.newResource)?void 0:r.readOnly)&&(l=a.allowOverlap||a.isDateRangeAvailable(e.startDate,e.endDate,e.draggedEntities[0],e.newResource)?s.validatorFn.call(s.validatorFnThisObj||s,e,n):{valid:!1,message:s.L("L{eventOverlapsExisting}")},l&&!l.valid||(l=null!=(o=null==(i=a.checkEventDragValidity)?void 0:i.call(a,e,n))?o:l),l)}async updateRecords(e){const n=this,r=n.client,i=n.currentOverClient,o="copy"===n.mode,{draggedEntities:s,timeDiff:a,initialAssignmentsState:l}=e,c=l[0].startDate,d=n.adjustStartDate(c,a);let u;return e.externalDropTarget||(i.timeAxis.timeSpanInAxis(d,Ct.add(d,s[0].event.durationMS,"ms"))||(e.valid=!1),e.valid&&(r.eventStore.suspendAutoCommit(),i.eventStore.suspendAutoCommit(),u=await n.updateAssignments(r,i,e,o),r.eventStore.resumeAutoCommit(),i.eventStore.resumeAutoCommit())),e.valid&&i.trigger("eventDrop",Object.assign(n.getTriggerParams(e),{isCopy:o,copyMode:n.copyMode,domEvent:e.browserEvent,targetEventRecord:e.targetEventRecord,targetResourceRecord:e.newResource,externalDropTarget:e.externalDropTarget})),u}async updateAssignments(e,n,r,i){const o=this,{copyMode:s}=o,a=e!==n,{isVertical:l}=n,{assignmentStore:c,eventStore:d}=e,{assignmentStore:u,eventStore:h}=n,g=e.isVertical?e.resourceStore:e.store,p=l?n.resourceStore:n.store,{eventRecords:m,assignmentRecords:f,timeDiff:b,initialAssignmentsState:v,resourceRecord:y,newResource:w}=r,{unifiedDrag:C}=o,S=h.usesSingleAssignment||!1!==h.usesSingleAssignment&&d.usesSingleAssignment,x="event"===s?"event":"assignment"===s?"assignment":S?"event":"assignment",D=o.adjustStartDate(f[0].event.startDate,b),E=[],R=[],k=[],T=[],M=[],A=new Set,I=g.getAllDataRecords();e.suspendRefresh(),n.suspendRefresh();let F,P=!1,O=!1;F=a?p.indexOf(w)-g.indexOf(y):o.constainDragToResource?0:l&&p.isGrouped?I.indexOf(y)-I.indexOf(w):g.indexOf(y)-g.indexOf(w),l&&m.forEach(((n,i)=>{const o=r.eventBarEls[i];delete n.instanceMeta(e).hasTemporaryDragElement,o.dataset.transient&&o.remove()}));const L=r.eventBarEls.slice(),_=[],$={};for(let e=0;e<f.length;e++){const m=f[e];let y,j=m.event;if(i?(y=m.copy(),$[m.id]=y):y=m,!(y.isOccurrenceAssignment||c.includes(m)&&d.includes(j))){L[e].remove(),L.splice(e,1),f.splice(e,1),e--;continue}const z=v[e],B=j,H=z.startDate,V=z.resource,N=this.constrainDragToTimeSlot?H:C?D:o.adjustStartDate(H,b);if(c!==u){const e=B.assignments.length>1||i;let n;i?n=y:(n=y.copy(),$[y.id]=n),n.event&&!S&&(n.event=n.event.id,n.resource=n.resource.id),i||T.push(y),e||R.push(B),(i&&("event"===s||"auto"===s&&h.usesSingleAssignment)||!h.getById(B.id))&&(j=h.createRecord({...B.data,id:!i||"event"!==s&&"auto"!==s?B.id:void 0,calendar:null}),n.set({eventId:j.id,event:j}),E.push(j)),S||k.push(n),y=n}let q=w,W=null;if(!C)if(a){if(e>0){const e=g.indexOf(V);q=p.getAt(e+F)||q}}else if(0!==F){let e;l&&p.isGrouped?(e=Math.max(Math.min(I.indexOf(V)-F,I.length-1),0),q=I[e]):(e=Math.max(Math.min(g.indexOf(V)-F,g.count-1),0),q=g.getAt(e),q.isSpecialRow&&(q=g.getNext(q,!1,!0)||g.getPrevious(q,!1,!0))),q=null==q?void 0:q.$original}else q=V;const U=y.resourceId!==q.id;if(U){if(W=g.getById(y.resourceId),i&&c===u){y.setData({resource:null,resourceId:null}),y.resource=q,y.event=h.getById(y.eventId);const e="event"===s||d.usesSingleAssignment&&"auto"===s;e&&(j=j.copy(),j.meta.endDateCached=o.adjustStartDate(j.endDate,b),j.endDate=null,y.event=j,h.usesSingleAssignment&&(j.resource=q,j.resourceId=q.id)),u.find((e=>e.eventId===y.eventId&&e.resourceId===y.resourceId))||k.find((e=>e.eventId===y.eventId&&e.resourceId===y.resourceId))||(e&&E.push(j),k.push(y))}else y.resource=q;j.isEvent&&A.add(j),P=!0,j.isOccurrence&&j.set("newResource",q),a&&S&&(j.resourceId=q.id)}else i&&("event"===s||"auto"===s&&d.usesSingleAssignment)&&!E.includes(j)&&(j=j.copy(),j.meta.endDateCached=o.adjustStartDate(j.endDate,b),j.endDate=null,E.push(j),y.event=j,h.usesSingleAssignment&&j.set({resource:q,resourceId:q.id}),k.push(y));if(!M.find((e=>e.draggedEvent===j))&&!Ct.isEqual(j.startDate,N)){for(;!j.isOccurrence&&j.isBatchUpdating;)j.endBatch(!0);i&&!a&&!S&&"assignment"===x&&U||(j.startDate=N,M.push({draggedEvent:j,originalStartDate:H})),j.isEvent&&A.add(j),O=!0}n.processEventDrop({eventRecord:j,resourceRecord:q,element:0===e?r.context.element:r.context.relatedElements[e-1],context:r,toScheduler:n,reassignedFrom:W,eventsToAdd:E,addedEvents:_,draggedAssignment:y}),n.trigger("processEventDrop",{originalAssignment:m,draggedAssignment:y,context:r,copyMode:s,isCopy:i})}if(c.remove(T),d.remove(R),u.add(k),i&&c===u){const{syncIdMap:n}=e.foregroundCanvas;Object.entries($).forEach((([e,r])=>{const i=n[e];delete n[e],n[r.id]=i}))}if(E.length&&_.push(...h.add(E)),!o.constrainDragToTimeline)for(let e=0;e<f.length;e++){const o=($[f[e].id]||f[e]).event,s=(null==_?void 0:_.find((e=>e.id===o.id)))||o,c=r.eventBarEls[e],d=0===e?r.context.element:r.context.relatedElements[e-1],u=n.isInTimeAxis(s);if(delete s.meta.endDateCached,i||$o.removeChild(c.parentElement,c),s.resource&&(l||n.rowManager.getRowFor(s.resource))&&u){if(!s.parent||s.parent.isRoot){const e=Gt.from(d,n.foregroundCanvas,!0);Gn.setTopLeft(d,e.y,e.x),$o.addChild(n.foregroundCanvas,d,s.assignments[0].id),a&&n.processCrossSchedulerEventDrop({eventRecord:s,toScheduler:n})}d.classList.remove("b-sch-event-hover","b-active","b-drag-proxy","b-dragging"),d.retainElement=!1}}null==_||_.forEach((e=>A.add(e))),(T.length||R.length||k.length||E.length)&&(P=!0),(P||O)&&(S&&A.forEach((e=>e.beginBatch())),await Promise.all([n.project!==e.project?n.project.commitAsync():null,e.project.commitAsync()]),S&&A.forEach((e=>e.endBatch(!1,!0)))),P||(P=M.some((({draggedEvent:e,originalStartDate:n})=>!Ct.isEqual(e.startDate,n)))),n.resumeRefresh(),e.resumeRefresh(),f.length>0&&(P?(L.forEach((e=>delete e.lastDomConfig)),n.refreshWithTransition(),a&&(e.refreshWithTransition(),n.selectedEvents=_)):r.valid=!1)}getProductDragContext(e){const n=this,{currentOverClient:r}=n,i=e.browserEvent.target,o=e.newResource||e.resourceRecord,s=e.targetEventRecord;let a,l,c=r?n.resolveEventRecord(i,r):null;e.eventRecords.includes(c)&&(c=null),n.constrainDragToResource?a=e.resourceRecord:n.constrainDragToTimeline?r&&(a=n.resolveResource()||e.newResource||e.resourceRecord):a=n.resolveResource();const{assignmentRecords:d,eventRecords:u}=e,h=o!==a;let g=Boolean(a&&!a.isSpecialRow);return!a&&n.externalDropTargetSelector&&(l=i.closest(n.externalDropTargetSelector),g=Boolean(l)),{valid:g,externalDropTarget:l,eventRecords:u,assignmentRecords:d,newResource:a,targetEventRecord:c,dirty:h||c!==s,proxyElements:[e.context.element,...e.context.relatedElements||[]]}}getMinimalDragData(e){const n=this,{scheduler:r}=n,i=n.getElementFromContext(e),o=n.resolveEventRecord(i,r),s=r.resolveResourceRecord(i),a=r.resolveAssignmentRecord(i),l=a?[a]:[];a&&(r.isAssignmentSelected(l[0])||n.drag.startEvent.ctrlKey&&r.multiEventSelect)&&l.push.apply(l,n.getRelatedRecords(a));return{eventRecord:o,resourceRecord:s,assignmentRecord:a,eventRecords:[...new Set(l.map((e=>e.event)))],assignmentRecords:l}}setupProductDragData(e){var n;const r=this,{scheduler:i}=r,o=r.getElementFromContext(e),{eventRecord:s,resourceRecord:a,assignmentRecord:l,assignmentRecords:c}=r.getMinimalDragData(e),d=[];if(r.constrainDragToResource&&!a)throw new Error("Resource could not be resolved for event: "+s.id);let u;if(r.constrainDragToTimeline){u=null==(n=r.getDateConstraints)?void 0:n.call(r,a,s);const e=r.constrainRectangle=r.getConstrainingRectangle(u,a,s),l=Gt.from(o,i.timeAxisSubGridElement);super.setupConstraints(e,l,i.timeAxisViewModel.snapPixelAmount,Boolean(u.start))}return c.forEach((e=>{let n=i.getElementFromAssignmentRecord(e,!0);n||(n=i.currentOrientation.addTemporaryDragElement(e.event,e.resource)),d.push(n)})),{record:l,draggedEntities:c,dateConstraints:(null==u?void 0:u.start)?u:null,eventBarCopies:d.map((e=>r.createProxy(e))),eventBarEls:d}}getDateConstraints(e,n){var r;const{scheduler:i}=this,o=null==(r=i.getDateConstraints)?void 0:r.call(i,e,n);let s,a;return this.constrainDragToTimeSlot?(s=n.startDate,a=n.endDate):o&&(s=o.start,a=o.end),{start:s,end:a}}getConstrainingRectangle(e,n,r){return this.scheduler.getScheduleRegion(this.constrainDragToResource&&n,r,!0,e&&{start:e.start,end:e.end})}getDragData(e){const n=this.getMinimalDragData(e)||{};return{...super.getDragData(e),...n,initialAssignmentsState:n.assignmentRecords.map((e=>({startDate:e.event.startDate,resource:e.resource,assignment:e})))}}getRelatedRecords(e){return this.scheduler.selectedAssignments.filter((n=>n!==e&&!n.resource.readOnly&&n.event.isDraggable))}getCoordinate(e,n,r){const i=this.currentOverClient;if(i.isHorizontal){let o=r[0];if("default"!==i.milestoneLayoutMode&&e.isMilestone)switch(i.milestoneAlign){case"center":o+=n.offsetWidth/2;break;case"end":o+=n.offsetWidth}return o}{let o=r[1];if("default"!==i.milestoneLayoutMode&&e.isMilestone)switch(i.milestoneAlign){case"center":o+=n.offsetHeight/2;break;case"end":o+=n.offsetHeight}return o}}resolveResource(){const e=this,n=e.currentOverClient,{isHorizontal:r}=n,{context:i,browserEvent:o,dragProxy:s}=e.dragData,a=s||i.element,l=Gt.from(a,null,!0),c=n.isVertical||e.unifiedDrag?i.clientY:l.center.y,d=Gt.from(a,n.timeAxisSubGridElement,!0),{x:u,y:h}=d.center,g=e.getMouseMoveEventTarget(o);let p=null;if(n.element.contains(g))if(r){const e=n.rowManager.getRowAt(c);p=e&&n.store.getAt(e.dataIndex)}else p=n.resolveResourceRecord(n.timeAxisSubGridElement.querySelector(".b-sch-timeaxis-cell"),[u,h]);return p}adjustStartDate(e,n){const r=this.currentOverClient;return e=r.timeAxis.roundDate(new Date(e-0+n),!!r.snapRelativeToEventStartDate&&e),this.constrainStartDate(e)}getRecordElement(e){return this.client.getElementFromAssignmentRecord(e,!0)}getProxyElement(e){if(this.isDragging){const n=this.dragData.assignmentRecords.indexOf(e);if(n>=0)return this.dragData.proxyElements[n]}return null}getMouseMoveEventTarget(e){return e.target}};of._$name="EventDrag",du.registerFeature(of,!0,"Scheduler"),du.registerFeature(of,!1,"ResourceHistogram");var sf=class extends $m{get scheduler(){return this.client}get store(){return this.client.eventStore}get project(){return this.client.project}updateLockLayout(e){this.dragActiveCls="b-dragcreating"+(e?" b-dragcreate-lock":"")}handleBeforeDragCreate(e,n,r){var i;const{resourceRecord:o}=e;if(o.readOnly||!this.scheduler.resourceStore.isAvailable(o))return!1;const{scheduler:s}=this,a=(!s.isSchedulerPro||n.ignoreResourceCalendar||o.isWorkingTime(e.mousedownDate))&&s.trigger("beforeDragCreate",{resourceRecord:o,date:e.mousedownDate,event:r});return this.dateConstraints=null==(i=s.getDateConstraints)?void 0:i.call(s,o,n),a}dragStart(e){var n;const r=this,{client:i}=r,{eventStore:o,assignmentStore:s,enableEventAnimations:a}=i,{resourceRecord:l}=e,c=r.createEventRecord(e),d=[l];if(c.set("duration",Ct.diff(c.startDate,c.endDate,c.durationUnit,!0)),c.isCreating=!0,c.meta.isDragCreating=!0,i.features.taskEdit&&i.features.taskEdit.doCancel(),!1===r.handleBeforeDragCreate(e,c,e.event))return!1;r.captureStm(!0);let u=[];return l&&(u=s.assignEventToResource(c,l)),!1===i.trigger("beforeEventAdd",{eventRecord:c,resourceRecords:d,assignmentRecords:u})?(s.remove(u),!1):(r.lockLayout&&(c.meta.excludeFromLayout=!0),null==(n=i.onEventCreated)||n.call(i,c),i.enableEventAnimations=!1,o.addAsync(c).then((()=>i.enableEventAnimations=a)),i.isCreating=!0,i.refreshRows(),i.isCreating=!1,e.itemElement=e.element=i.getElementFromEventRecord(c),Gn.isInView(e.itemElement)||i.scrollable.scrollIntoView(e.itemElement,{animate:!0,edgeOffset:i.barMargin}),super.dragStart(e))}checkValidity(e,n){const r=this,{client:i}=r;return e.resourceRecord=r.dragging.resourceRecord,(i.allowOverlap||i.isDateRangeAvailable(e.startDate,e.endDate,e.eventRecord,e.resourceRecord))&&r.createValidatorFn.call(r.validatorFnThisObj||r,e,n)}isRowEmpty(e){const n=this.store.getEventsForResource(e);return!n||!n.length}triggerBeforeFinalize(e){this.client.trigger("beforeDragCreateFinalize",e)}createEventRecord(e){const n=this,{client:r}=n,i=r.isHorizontal?"X":"Y",{timeAxis:o,eventStore:s,weekStartDay:a}=r,{event:l,mousedownDate:c}=e,d=n.draggingEnd=l[`page${i}`]>e.startEvent[`page${i}`],u={name:s.modelClass.fieldMap.name.defaultValue||n.L("L{Object.newEvent}"),startDate:d?Ct.floor(c,o.resolution,null,a):c,endDate:d?c:Ct.ceil(c,o.resolution,null,a)};return r.project.isGanttProjectMixin&&Et.assign(u,{constraintDate:u.startDate,constraintType:"startnoearlierthan"}),s.createRecord(u)}async internalUpdateRecord(e,n){await super.internalUpdateRecord(e,n),this.client.hasEventEditor||(e.eventRecord.isCreating=!1)}async finalizeDragCreate(e){const{meta:n}=e.eventRecord;n.excludeFromLayout=!1,n.isDragCreating=!1;const r=await super.finalizeDragCreate(e);return r?this.hasStmCapture=!1:this.freeStm(!0),r}async cancelDragCreate(e){await super.cancelDragCreate(e),this.freeStm(!1)}getTipHtml(...e){const n=super.getTipHtml(...e),{element:r}=this.tip;return r.classList.add("b-sch-dragcreate-tooltip"),r.classList.toggle("b-too-narrow",this.dragging.context.tooNarrow),n}onAborted(e){var n,r;const{eventRecord:i,resourceRecord:o}=e;null==(r=(n=this.store).unassignEventFromResource)||r.call(n,i,o),this.store.remove(i)}};__publicField(sf,"$name","EventDragCreate"),__publicField(sf,"configurable",{validatorFn:()=>!0,lockLayout:!1}),sf._$name="EventDragCreate",du.registerFeature(sf,!0,"Scheduler"),du.registerFeature(sf,!1,"ResourceHistogram");var af=class extends(Delayable_default(sr)){constructor(){super(...arguments),__publicField(this,"targetSelector",".b-sch-timeaxis-cell, .b-timeaxissubgrid")}construct(e,n){e.multiEventSelect=!0,super.construct(e,n)}onElementMouseDown(e){const n=this,{client:r}=n,{foregroundCanvas:i}=r,{target:o,button:s,touches:a,clientX:l,clientY:c}=e,d=Gt.from(i,!0);a||0!==s||n.disabled||!o.matches(n.targetSelector)||!1===r.trigger("beforeEventDragSelect",{event:e})||(r.preventDragSelect=!0,n.startX=l-d.x,n.startY=c-d.y,n.element=Gn.createElement({tag:"div",className:"b-dragselect-rect",parent:r.foregroundCanvas,retainElement:!0,style:{transform:`translate(${n.startX}px, ${n.startY}px)`}}),r.element.classList.add("b-dragselecting"),e.ctrlKey||e.metaKey||r.clearEventSelection(),n.originalSelection=r.selectedAssignments.slice(),n.subGridElementRect=Gt.from(r.timeAxisSubGridElement,!0),r.navigator.disabled=!0,r.enableScrollingCloseToEdges(r.timeAxisSubGrid),n.mouseUpDetacher=cn.on({element:document,mouseup:"onDocumentMouseUp",thisObj:n}))}get eventRectangles(){const{client:e}=this;return Array.from(e.foregroundCanvas.children).filter((n=>n.matches(`${e.eventSelector}, .b-nested-events-container`))).map((n=>{const r=e.resolveAssignmentRecord(n);return{rectangle:Gt.from(n,!0),record:r,selected:e.selectedAssignments.includes(r)}}))}onElementMouseMove(e){const n=this;if("number"==typeof n.startX){const r=n.rectangle=Gt.from(n.client.foregroundCanvas,!0),i=Math.min(Math.max(e.clientX-r.x,0),r.width+1),o=Math.min(Math.max(e.clientY-r.y,0),r.height+1),s=new Gt(n.startX,n.startY,i-n.startX,o-n.startY);Gn.setTranslateXY(n.element,s.x,s.y),n.element.style.width=`${s.width}px`,n.element.style.height=`${s.height}px`,n.updateSelection()}}onDocumentMouseUp(e){var n,r;const i=this,{client:o}=i,{selectedAssignments:s,navigator:a}=o;o.disableScrollingCloseToEdges(o.timeAxisSubGrid),null==(n=i.element)||n.remove(),o.element.classList.remove("b-dragselecting"),i.startX=i.startY=null,a.skipNextClick=o.timeAxisSubGridElement.contains(e.target),a.disabled=!1,s.length&&(a.skipScrollIntoView=!0,o.activeAssignment=s[s.length-1],null==(r=a.activeItem)||r.focus(),a.skipScrollIntoView=!1),i.mouseUpDetacher()}updateSelection(){const e=this,n=e.rectangle=Gt.from(e.element,!0),{eventRectangles:r,client:i}=e,o=i.selectedAssignments.reduce(((e,n)=>(i.getElementFromAssignmentRecord(n)||e.push(n),e)),[]);for(const e of r)n.intersect(e.rectangle,!0)&&(e.selected=!0,o.push(e.record));o.push(...e.originalSelection),i.selectedAssignments=o}};__publicField(af,"$name","EventDragSelect"),__publicField(af,"pluginConfig",{chain:["onElementMouseDown","onElementMouseMove"]}),af._$name="EventDragSelect",du.registerFeature(af,!1,"Scheduler");var lf=class extends _a{static get type(){return"eventeditor"}static get $name(){return"EventEditor"}static get configurable(){return{items:[],draggable:{handleSelector:":not(button,.b-field-inner)"},axisLock:"flexible",scrollable:{overflowY:!0},readOnly:null,titleRenderer:null}}updateLocalization(){super.updateLocalization(...arguments),this.initialTitle=this.title||""}chainResourceStore(){return this.eventEditFeature.resourceStore.chain((e=>!e.isSpecialRow),null,{storeClass:yi,excludeCollapsedRecords:!1})}processWidgetConfig(e){var n;if((null==(n=e.type)?void 0:n.includes("date"))&&null==e.weekStartDay&&(e.weekStartDay=this.weekStartDay),"extraItems"===e.type)return!1;const{eventEditFeature:r}=this,i={};if("resourceField"===e.ref){const{store:n}=e;e.store=this.chainResourceStore(),n&&e.store.setConfig(n),"multiSelect"in e||(e.multiSelect=!r.eventStore.usesSingleAssignment)}return"startDate"!==e.name&&"endDate"!==e.name||"date"!==e.type||(i.format=r.dateFormat),"startDate"!==e.name&&"endDate"!==e.name||"time"!==e.type||(i.format=r.timeFormat),Object.assign(e,i),super.processWidgetConfig(e)}onBeforeShow(...e){var n;const r=this,{record:i,titleRenderer:o}=r,{deleteButton:s}=r.widgetMap;s&&(s.hidden=r.readOnly||i.isCreating),r.title=o?r.callback(o,r,[i]):r.initialTitle,null==(n=super.onBeforeShow)||n.call(this,...e)}onInternalKeyDown(e){this.trigger("keyDown",{event:e}),super.onInternalKeyDown(e)}updateReadOnly(e){const{deleteButton:n,saveButton:r,cancelButton:i}=this.widgetMap;super.updateReadOnly(e),n&&(n.hidden=e),r&&(r.hidden=e),i&&(i.hidden=e)}};lf.initClass(),lf._$name="EventEditor";var cf=class extends _a{static get $name(){return"RecurrenceConfirmationPopup"}static get type(){return"recurrenceconfirmation"}static get defaultConfig(){return{localizableProperties:[],align:"b-t",autoShow:!1,autoClose:!1,closeAction:"onRecurrenceClose",modal:!0,centered:!0,scrollAction:"realign",constrainTo:globalThis,draggable:!0,closable:!0,floating:!0,eventRecord:null,cls:"b-sch-recurrenceconfirmation",bbar:{defaults:{localeClass:this},items:{changeSingleButton:{weight:100,cls:"b-raised",color:"b-blue",text:"L{update-only-this-btn-text}",onClick:"up.onChangeSingleButtonClick"},changeMultipleButton:{weight:200,color:"b-green",text:"L{Object.Yes}",onClick:"up.onChangeMultipleButtonClick"},cancelButton:{weight:300,color:"b-gray",text:"L{Object.Cancel}",onClick:"up.onCancelButtonClick"}}}}}get changeMultipleButton(){return this.widgetMap.changeMultipleButton}get changeSingleButton(){return this.widgetMap.changeSingleButton}get cancelButton(){return this.widgetMap.cancelButton}onChangeMultipleButtonClick(){this.processMultipleRecords(),this.hide()}onChangeSingleButtonClick(){this.processSingleRecord(),this.hide()}onCancelButtonClick(){this.cancelFn&&this.cancelFn.call(this.thisObj),this.hide()}onRecurrenceClose(){this.cancelFn&&this.cancelFn.call(this.thisObj),this.hide()}confirm(e={}){const n=this;return["actionType","eventRecord","title","html","changerFn","cancelFn","finalizerFn","thisObj"].forEach((r=>{r in e&&(n[r]=e[r])})),n.updatePopupContent(),super.show(e)}updatePopupContent(){const e=this,{changeMultipleButton:n,changeSingleButton:r,cancelButton:i}=e.widgetMap,{eventRecord:o,actionType:s="update"}=e;(null==o?void 0:o.isRecurring)?(n.text=e.L("L{Object.Yes}"),e.html=e.L(`${s}-all-message`)):(n.text=e.L(`${s}-further-btn-text`),e.html=e.L(`${s}-further-message`)),r.text=e.L(`${s}-only-this-btn-text`),i.text=e.L("L{Object.Cancel}"),e.width=e.L("L{width}"),e.title=e.L(`${s}-title`)}processMultipleRecords(){const{eventRecord:e,changerFn:n,thisObj:r,finalizerFn:i}=this;e.beginBatch(),n&&this.callback(n,r,[e]),e.endBatch(),i&&this.callback(i,r,[e])}processSingleRecord(){const{eventRecord:e,changerFn:n,thisObj:r,finalizerFn:i}=this;let o;e.beginBatch(),(null==e?void 0:e.isRecurring)&&e.recurrence.forEachOccurrence(e.startDate,null,((e,n,r)=>{if(r>1)return o=e,!1})),null==o||o.convertToRealEvent(),e.recurrence=null,n&&this.callback(n,r,[e]),e.recurrenceRule=null,e.endBatch(),i&&this.callback(i,r,[e])}updateLocalization(){this.updatePopupContent(),super.updateLocalization()}};cf.initClass(),cf._$name="RecurrenceConfirmationPopup";var df=class extends Mc{buildItems(){return[...this.addNone?[{text:"L{None}",value:"NONE"}]:[],{value:"DAILY",text:"L{Daily}"},{value:"WEEKLY",text:"L{Weekly}"},{value:"MONTHLY",text:"L{Monthly}"},{value:"YEARLY",text:"L{Yearly}"}]}};__publicField(df,"$name","RecurrenceFrequencyCombo"),__publicField(df,"type","recurrencefrequencycombo"),__publicField(df,"configurable",{editable:!1,displayField:"text",valueField:"value",localizeDisplayFields:!0,addNone:!1}),df.initClass(),df._$name="RecurrenceFrequencyCombo";var uf=class extends df{static get $name(){return"RecurrenceCombo"}static get type(){return"recurrencecombo"}static get defaultConfig(){return{customValue:"custom",placeholder:"None",splitCls:"b-recurrencecombo-split",items:!0,highlightExternalChange:!1}}buildItems(){return[{value:"none",text:"L{None}"},...super.buildItems(),{value:this.customValue,text:"L{Custom}",cls:this.splitCls}]}set value(e){e=e||"none",super.value=e}get value(){return super.value}set recurrence(e){const n=this;n.value=e?n.isCustomRecurrence(e)?n.customValue:e.frequency:null}isCustomRecurrence(e){const{interval:n,days:r,monthDays:i,months:o}=e;return Boolean(n>1||r&&r.length||i&&i.length||o&&o.length)}};uf.initClass(),uf._$name="RecurrenceCombo";var hf=class extends Ca{static get $name(){return"RecurrenceLegendButton"}static get type(){return"recurrencelegendbutton"}static get defaultConfig(){return{localizableProperties:[],recurrence:null}}set recurrence(e){this._recurrence=e,this.updateLegend()}get recurrence(){return this._recurrence}set eventStartDate(e){this._eventStartDate=e,this.updateLegend()}get eventStartDate(){return this._eventStartDate}updateLegend(){const{recurrence:e}=this;this.text=e?Tm.getLegend(e,this.eventStartDate):""}onLocaleChange(){this.updateLegend()}updateLocalization(){this.onLocaleChange(),super.updateLocalization()}};hf.initClass(),hf._$name="RecurrenceLegendButton";var gf=class extends Mc{static get $name(){return"RecurrenceDaysCombo"}static get type(){return"recurrencedayscombo"}static get defaultConfig(){const e=["SU","MO","TU","WE","TH","FR","SA"],n=e.join(",");return{allDaysValue:n,editable:!1,defaultValue:n,workingDaysValue:e.filter(((e,n)=>!Ct.nonWorkingDays[n])).join(","),nonWorkingDaysValue:e.filter(((e,n)=>Ct.nonWorkingDays[n])).join(","),splitCls:"b-recurrencedays-split",displayField:"text",valueField:"value"}}buildItems(){const e=this;return e._weekDays=null,e.weekDays.concat([{value:e.allDaysValue,text:e.L("L{day}"),cls:e.splitCls},{value:e.workingDaysValue,text:e.L("L{weekday}")},{value:e.nonWorkingDaysValue,text:e.L("L{weekend day}")}])}get weekDays(){const e=this;if(!e._weekDays){const n=Ct.weekStartDay,r=Ct.getDayNames().map(((e,n)=>({text:e,value:Xp.encodeDay(n)})));e._weekDays=r.slice(n).concat(r.slice(0,n))}return e._weekDays}set value(e){const n=this;e&&Array.isArray(e)&&(e=e.join(",")),e&&n.store.findRecord("value",e)||(e=n.defaultValue),super.value=e}get value(){let e=super.value;return e&&Array.isArray(e)&&(e=e.join(",")),e}};gf.initClass(),gf._$name="RecurrenceDaysCombo";var pf=class extends Oc{static get $name(){return"RecurrenceDaysButtonGroup"}static get type(){return"recurrencedaysbuttongroup"}static get defaultConfig(){return{defaults:{cls:"b-raised",toggleable:!0}}}construct(e={}){e.columns=7,e.items=this.buildItems(),super.construct(e)}updateItemText(e){const n=Xp.decodeDay(e.value)[0];e.text=Ct.getDayName(n).substring(0,3)}buildItems(){const e=this;if(!e.__items){const n=Ct.weekStartDay,r=Ct.getDayNames().map(((e,n)=>({text:e.substring(0,3),value:Xp.encodeDay(n)})));e.__items=r.slice(n).concat(r.slice(0,n))}return e.__items}set value(e){e&&Array.isArray(e)&&(e=e.join(",")),super.value=e}get value(){let e=super.value;return e&&Array.isArray(e)&&(e=e.join(",")),e}onLocaleChange(){this.items.forEach(this.updateItemText,this)}updateLocalization(){this.onLocaleChange(),super.updateLocalization()}get widgetClassList(){const e=super.widgetClassList;return e.push("b-field"),e}};pf.initClass(),pf._$name="RecurrenceDaysButtonGroup";var mf=class extends Oc{static get $name(){return"RecurrenceMonthDaysButtonGroup"}static get type(){return"recurrencemonthdaysbuttongroup"}static get defaultConfig(){return{defaults:{toggleable:!0,cls:"b-raised"}}}get minValue(){return 1}get maxValue(){return 31}construct(e={}){e.columns=7,e.items=this.buildItems(),super.construct(e)}buildItems(){const e=this,n=[];for(let r=e.minValue;r<=e.maxValue;r++)n.push({text:r+"",value:r});return n}get widgetClassList(){const e=super.widgetClassList;return e.push("b-field"),e}};mf.initClass(),mf._$name="RecurrenceMonthDaysButtonGroup";var ff=class extends Oc{static get $name(){return"RecurrenceMonthsButtonGroup"}static get type(){return"recurrencemonthsbuttongroup"}static get defaultConfig(){return{defaults:{toggleable:!0,cls:"b-raised"}}}construct(e={}){e.columns=4,e.items=this.buildItems(),super.construct(e)}buildItems(){return Ct.getMonthNames().map(((e,n)=>({text:e.substring(0,3),value:n+1})))}updateItemText(e){e.text=Ct.getMonthName(e.value-1).substring(0,3)}onLocaleChange(){this.items.forEach(this.updateItemText,this)}updateLocalization(){this.onLocaleChange(),super.updateLocalization()}get widgetClassList(){const e=super.widgetClassList;return e.push("b-field"),e}};ff.initClass(),ff._$name="RecurrenceMonthsButtonGroup";var bf=class extends Mc{static get $name(){return"RecurrenceStopConditionCombo"}static get type(){return"recurrencestopconditioncombo"}static get defaultConfig(){return{editable:!1,placeholder:"Never",displayField:"text",valueField:"value"}}buildItems(){return[{value:"never",text:this.L("L{Never}")},{value:"count",text:this.L("L{After}")},{value:"date",text:this.L("L{On date}")}]}set value(e){e=e||"never",super.value=e}get value(){return super.value}get recurrence(){return this._recurrence}set recurrence(e){let n=null;e.endDate?n="date":e.count&&(n="count"),this._recurrence=e,this.value=n}};bf.initClass(),bf._$name="RecurrenceStopConditionCombo";var vf=class extends Mc{static get $name(){return"RecurrencePositionsCombo"}static get type(){return"recurrencepositionscombo"}static get defaultConfig(){return{editable:!1,splitCls:"b-sch-recurrencepositions-split",displayField:"text",valueField:"value",defaultValue:1,maxPosition:5}}buildItems(){return this.buildDayNumbers().concat([{value:"-1",text:this.L("L{position-1}"),cls:this.splitCls}])}buildDayNumbers(){return oe.populate(this.maxPosition,(e=>({value:e+1,text:this.L(`position${e+1}`)})))}set value(e){const n=this;e&&Array.isArray(e)&&(e=e.join(",")),e&&n.store.findRecord("value",e)||(e=n.defaultValue),super.value=e}get value(){const e=super.value;return e?`${e}`.split(",").map((e=>parseInt(e,10))):[]}};vf.initClass(),vf._$name="RecurrencePositionsCombo";var yf=class extends La{updateRecord(e){super.updateRecord(e);const n=this,{frequencyField:r,daysButtonField:i,monthDaysButtonField:o,monthsButtonField:s,monthDaysRadioField:a,positionAndDayRadioField:l,stopRecurrenceField:c}=n.widgetMap;if(e){const r=e.timeSpan,d=null==r?void 0:r.startDate;d&&(e.days&&e.days.length||(i.value=[Xp.encodeDay(d.getDay())]),e.monthDays&&e.monthDays.length||(o.value=d.getDate()),e.months&&e.months.length||(s.value=d.getMonth()+1)),e.days&&e.positions?(l.check(),n.isPainted||a.uncheck()):(a.check(),n.isPainted||l.uncheck()),c.recurrence=e}else r.value="NONE"}syncEventRecord(e){const n=this.getValues((n=>n.name in e&&!n.disabled));"endDate"in n||(n.endDate=null),"count"in n||(n.count=null),e.set(n)}toggleStopFields(){const{countField:e,endDateField:n}=this.widgetMap;switch(this.widgetMap.stopRecurrenceField.value){case"count":e.show(),e.enable(),n.hide(),n.disable();break;case"date":e.hide(),e.disable(),n.show(),n.enable();break;default:e.hide(),n.hide(),e.disable(),n.disable()}}onMonthDaysRadioFieldChange({checked:e}){const{monthDaysButtonField:n}=this.widgetMap;n.disabled=!e||!this.isWidgetAvailableForFrequency(n)}onPositionAndDayRadioFieldChange({checked:e}){const{daysCombo:n,positionsCombo:r}=this.widgetMap;n.disabled=r.disabled=!e||!this.isWidgetAvailableForFrequency(n)}onStopRecurrenceFieldChange(){this.toggleStopFields()}isWidgetAvailableForFrequency(e,n=this.widgetMap.frequencyField.value){return!e.forFrequency||e.forFrequency.includes(n)}onFrequencyFieldChange({value:e,oldValue:n,valid:r}){const i=this,o=i.queryAll((e=>"forFrequency"in e)),{intervalField:s,stopRecurrenceField:a}=i.widgetMap;if(r&&e){for(let n=0;n<o.length;n++){const r=o[n];i.isWidgetAvailableForFrequency(r,e)?(r.show(),r.enable()):(r.hide(),r.disable())}s.hidden=a.hidden="NONE"===e,"NONE"!==e&&(s.hint=i.L(`L{RecurrenceEditor.${e}intervalUnit}`)),"NONE"===n&&null==s.value&&(s.value=1),i.toggleFieldsState()}}toggleFieldsState(){const e=this,{widgetMap:n}=e;e.onMonthDaysRadioFieldChange({checked:n.monthDaysRadioField.checked}),e.onPositionAndDayRadioFieldChange({checked:n.positionAndDayRadioField.checked}),e.onStopRecurrenceFieldChange()}updateLocalization(){const{countField:e,intervalField:n,frequencyField:r}=this.widgetMap;e.hint=this.L("L{RecurrenceEditor.time(s)}"),r.value&&"NONE"!==r.value&&(n.hint=this.L(`L{RecurrenceEditor.${r.value}intervalUnit}`)),super.updateLocalization()}};__publicField(yf,"$name","RecurrenceEditorPanel"),__publicField(yf,"type","recurrenceeditorpanel"),__publicField(yf,"configurable",{cls:"b-recurrenceeditor",record:!1,addNone:!1,items:{frequencyField:{type:"recurrencefrequencycombo",name:"frequency",label:"L{RecurrenceEditor.Frequency}",weight:10,onChange:"up.onFrequencyFieldChange",addNone:"up.addNone"},intervalField:{type:"numberfield",weight:15,name:"interval",label:"L{RecurrenceEditor.Every}",min:1,required:!0},daysButtonField:{type:"recurrencedaysbuttongroup",weight:20,name:"days",forFrequency:"WEEKLY"},monthDaysRadioField:{type:"checkbox",weight:30,toggleGroup:"radio",forFrequency:"MONTHLY",label:"L{RecurrenceEditor.Each}",checked:!0,onChange:"up.onMonthDaysRadioFieldChange"},monthDaysButtonField:{type:"recurrencemonthdaysbuttongroup",weight:40,name:"monthDays",forFrequency:"MONTHLY"},monthsButtonField:{type:"recurrencemonthsbuttongroup",weight:50,name:"months",forFrequency:"YEARLY"},positionAndDayRadioField:{type:"checkbox",weight:60,toggleGroup:"radio",forFrequency:"MONTHLY|YEARLY",label:"L{RecurrenceEditor.On the}",onChange:"up.onPositionAndDayRadioFieldChange"},positionsCombo:{type:"recurrencepositionscombo",weight:80,name:"positions",forFrequency:"MONTHLY|YEARLY"},daysCombo:{type:"recurrencedayscombo",weight:90,name:"days",forFrequency:"MONTHLY|YEARLY",flex:1},stopRecurrenceField:{type:"recurrencestopconditioncombo",weight:100,label:"L{RecurrenceEditor.End repeat}",onChange:"up.onStopRecurrenceFieldChange"},countField:{type:"numberfield",weight:110,name:"count",min:2,required:!0,disabled:!0,label:" "},endDateField:{type:"datefield",weight:120,name:"endDate",hidden:!0,disabled:!0,label:" ",required:!0}}}),yf.initClass(),yf._$name="RecurrenceEditorPanel";var wf=class extends _a{static get $name(){return"RecurrenceEditor"}static get type(){return"recurrenceeditor"}static get configurable(){return{draggable:!0,closable:!0,floating:!0,cls:"b-recurrenceeditor",title:"L{Repeat event}",autoClose:!0,width:470,items:{recurrenceEditorPanel:{type:"recurrenceeditorpanel",title:null}},bbar:{defaults:{localeClass:this},items:{foo:{type:"widget",cls:"b-label-filler",weight:100},saveButton:{color:"b-green",text:"L{Save}",onClick:"up.onSaveClick",weight:200},cancelButton:{color:"b-gray",text:"L{Object.Cancel}",onClick:"up.onCancelClick",weight:300}}},scrollable:{overflowY:!0}}}updateReadOnly(e){super.updateReadOnly(e),this.bbar.hidden=e}get recurrenceEditorPanel(){return this.widgetMap.recurrenceEditorPanel}updateRecord(e){this.recurrenceEditorPanel.record=e}onSaveClick(){const e=this;e.saveHandler?e.saveHandler.call(e.thisObj||e,e,e.record):(e.recurrenceEditorPanel.syncEventRecord(),e.close())}onCancelClick(){const e=this;e.cancelHandler?e.cancelHandler.call(e.thisObj||e,e,e.record):e.close()}};wf.initClass(),wf._$name="RecurrenceEditor";var RecurringEventEdit_default=e=>class RecurringEventEdit extends(e||re){static get $name(){return"RecurringEventEdit"}static get configurable(){return{recurringEventsItems:{recurrenceCombo:{type:"recurrencecombo",label:"L{EventEdit.Repeat}",ref:"recurrenceCombo",weight:700},editRecurrenceButton:{type:"recurrencelegendbutton",ref:"editRecurrenceButton",name:"recurrenceRule",color:"b-gray",menuIcon:null,flex:1,weight:800,ignoreParentReadOnly:!0}},showRecurringUI:null}}changeEditorConfig(e){return e.items={...e.items,...this.recurringEventsItems},e=super.changeEditorConfig(e)}construct(e,n){super.construct(e,n),this.scheduler.ion({beforeEventSave:"onRecurrableEventBeforeSave",thisObj:this})}doDestroy(){var e,n;null==(e=this._recurrenceConfirmation)||e.destroy(),null==(n=this._recurrenceEditor)||n.destroy(),super.doDestroy()}onEditorConstructed(e){var n;const r=this;e.ion({hide:r.onRecurringEventEditorHide,thisObj:r}),r.editRecurrenceButton&&(r.editRecurrenceButton.menu=r.recurrenceEditor),null==(n=r.recurrenceCombo)||n.ion({change:r.onRecurrenceComboChange,thisObj:r})}updateReadOnly(e){this._recurrenceEditor&&(this._recurrenceEditor.readOnly=e)}internalShowEditor(){this.toggleRecurringFieldsVisibility(this.client.enableRecurringEvents&&!1!==this.showRecurringUI)}toggleRecurringFieldsVisibility(e=!0){var n,r,i,o;const s=e?"show":"hide";null==(r=null==(n=this.editRecurrenceButton)?void 0:n[s])||r.call(n),null==(o=null==(i=this.recurrenceCombo)?void 0:i[s])||o.call(i)}onRecurringEventEditorHide(){var e,n;(null==(e=this.recurrenceEditor)?void 0:e.isVisible)&&this.recurrenceEditor.hide(),(null==(n=this.recurrenceConfirmation)?void 0:n.isVisible)&&this.recurrenceConfirmation.hide()}makeRecurrence(e){const n=this.eventRecord,r=n.copy();let i=n.recurrence;return i=!e&&i?i.copy():new n.recurrenceModel(e?{rule:e}:{}),i.timeSpan=r,r.setStartDate(this.values.startDate),i.suspendTimeSpanNotifying(),i}onRecurrableEventBeforeSave({eventRecord:e,context:n}){const r=this;r.isEditing&&!e.isCreating&&e.supportsRecurring&&(e.isRecurring||e.isOccurrence)&&(r.recurrenceConfirmation.confirm({actionType:"update",eventRecord:e,changerFn(){n.finalize(!0)},cancelFn(){n.finalize(!1)}}),n.async=!0)}set recurrenceConfirmation(e){this._recurrenceConfirmation=e}get recurrenceConfirmation(){const e=this;let n=e._recurrenceConfirmation;return n&&n.$$name||(n=bs.create({type:"recurrenceconfirmation",owner:e.editor,...n}),e._recurrenceConfirmation=n),n}set recurrenceEditor(e){this._recurrenceEditor=e}get recurrenceEditor(){const e=this;let n=e._recurrenceEditor;return n&&n.$$name||(e._recurrenceEditor=n=bs.create({type:"recurrenceeditor",autoShow:!1,centered:!0,modal:!0,constrainTo:globalThis,anchor:!1,rootElement:e.rootElement,saveHandler:e.recurrenceEditorSaveHandler,onBeforeShow:e.onBeforeShowRecurrenceEditor.bind(e),thisObj:e,...n}),n.readOnly=e._readOnly),n}onBeforeShowRecurrenceEditor(){const e=this,{recurrenceEditor:n,eventRecord:r}=e;n&&(null==r?void 0:r.supportsRecurring)&&(e.recurrence||(e.recurrence=e.makeRecurrence()),e.recurrence.timeSpan.setStartDate(e.values.startDate),n.record=e.recurrence,n.centered=!0)}loadRecurrenceData(e){this.recurrence=e,this.updateRecurrenceFields(e)}updateRecurrenceFields(e){const n=this,{editRecurrenceButton:r}=n;n.recurrenceCombo&&(n.recurrenceCombo.recurrence=e),r&&(r.recurrence=e,r.value=e?e.rule:null,e&&n.client.enableRecurringEvents&&!1!==n.showRecurringUI?r.show():r.hide())}onRecurrenceComboChange({source:e,value:n,userAction:r}){if(r){const r=this,{recurrenceEditor:i}=r;n===e.customValue?(r.recurrenceCombo.recurrence=r.makeRecurrence(),i.centered?i.show():i.show((r.editRecurrenceButton||e).element)):r.loadRecurrenceData(n&&"none"!==n?r.makeRecurrence(`FREQ=${n}`):null)}}recurrenceEditorSaveHandler(e,n){e.recurrenceEditorPanel.syncEventRecord(n),this.updateRecurrenceFields(n),e.close()}onDatesChange(...e){if(super.onDatesChange(...e),!this.loadingRecord&&this.editRecurrenceButton){const{startDate:e}=this.values;e&&(this.editRecurrenceButton.eventStartDate=e)}}internalLoadRecord(e){(null==e?void 0:e.supportsRecurring)&&this.loadRecurrenceData(e.recurrence?this.makeRecurrence():null)}updateRecord(e){return e.recurrenceRule&&!this.recurrence&&(e.recurrenceRule=null),super.updateRecord(e)}},Cf=class extends Mc{static get $name(){return"ResourceCombo"}static get type(){return"resourcecombo"}static get configurable(){return{showEventColor:!1,displayField:"name",valueField:"id",picker:{cls:"b-resourcecombo-picker",itemIconTpl(e){const{eventColor:n}=e,r=!Gn.isNamedColor(n);return`<div class="b-icon b-icon-square${!n||r?"":` b-sch-foreground-${n}`}"${n?r?` style="color:${n}"`:"":' style="display:none"'}></div>`}}}}changeShowEventColor(e){return Boolean(e)}updateShowEventColor(e){const{_picker:n}=this,r=e?"add":"remove";this.element.classList[r]("b-show-event-color"),null==n||n.element.classList[r]("b-show-event-color")}changePicker(e,n){return null==(e=super.changePicker(e,n))||e.element.classList[this.showEventColor?"add":"remove"]("b-show-event-color"),e}get innerElements(){return[{class:"b-icon b-resource-icon b-icon-square b-hide-display",reference:"resourceIcon"},this.inputElement]}syncInputFieldValue(){var e,n;const r=this,{resourceIcon:i,lastResourceIconCls:o}=r,{classList:s}=i,a=null!=(n=null==(e=r.selected)?void 0:e.eventColor)?n:"";super.syncInputFieldValue(),i.style.color="",o&&s.remove(o),r.lastResourceIconCls=null,a?(Gn.isNamedColor(a)?(r.lastResourceIconCls=`b-sch-foreground-${a}`,s.add(r.lastResourceIconCls)):i.style.color=a,s.remove("b-hide-display")):s.add("b-hide-display")}};Cf.initClass(),Cf._$name="ResourceCombo";var Sf=/[^\w\d]/g,xf=class extends(Bm.mixin(TaskEditStm_default,RecurringEventEdit_default,Delayable_default)){static get $name(){return"EventEdit"}static get configurable(){return{triggerEvent:"eventdblclick",typeField:"eventType",eventRecord:null,readOnly:null,editorConfig:{type:"eventeditor",title:"L{EventEdit.Edit event}",closable:!0,localeClass:this,defaults:{localeClass:this},items:{nameField:{type:"text",label:"L{Name}",clearable:!0,name:"name",weight:100,required:!0},resourceField:{type:"resourcecombo",label:"L{Resource}",name:"resource",editable:!0,valueField:"id",displayField:"name",highlightExternalChange:!1,destroyStore:!0,weight:200},startDateField:{type:"date",cls:"b-inline",clearable:!1,required:!0,label:"L{Start}",name:"startDate",validateDateOnly:!0,weight:300},startTimeField:{type:"time",clearable:!1,required:!0,name:"startDate",cls:"b-match-label",weight:400},endDateField:{type:"date",cls:"b-inline",clearable:!1,required:!0,label:"L{End}",name:"endDate",validateDateOnly:!0,weight:500},endTimeField:{type:"time",clearable:!1,required:!0,name:"endDate",cls:"b-match-label",weight:600}},bbar:{hideWhenEmpty:!0,defaults:{localeClass:this},items:{saveButton:{color:"b-blue",cls:"b-raised",text:"L{Save}",weight:100},deleteButton:{text:"L{Delete}",weight:200},cancelButton:{text:"L{Object.Cancel}",weight:300}}}},targetEventElement:null}}static get pluginConfig(){return{chain:["populateEventMenu","onEventEnterKey","editEvent"]}}construct(e,n){this.readOnly=e.readOnly,super.construct(e,n),e.ion({projectChange:"onChangeProject",readOnly:"onClientReadOnlyToggle",thisObj:this})}get scheduler(){return this.client}get project(){return this.client.project}get readOnly(){return this._editor?this.editor.readOnly:this._readOnly}updateReadOnly(e){super.updateReadOnly(e),this._editor&&(this.editor.readOnly=e)}onClientReadOnlyToggle({readOnly:e}){this.readOnly=e}get editor(){var e,n,r,i,o;const s=this,a={beforehide:"resetEditingContext",beforeshow:"onBeforeEditorShow",keydown:"onPopupKeyDown",thisObj:s};let{_editor:l}=s;if(l)return l;l=s._editor=bs.create(s.getEditorConfig());const{startDateField:c,startTimeField:d,endDateField:u,endTimeField:h}=l.widgetMap;return!c&&d&&(d.keepDate=!0,d.label=s.L("Start"),d.flex="1 0 100%"),!u&&h&&(h.keepDate=!0,h.label=s.L("End"),h.flex="1 0 100%"),l.floating||l.positioned||(l.element.parentNode||s.client.add(l),delete a.beforehide,delete a.beforShow,a.beforeToggleReveal="onBeforeEditorToggleReveal"),l.readOnly=s._readOnly,0===l.items.length&&console.warn("Event Editor configured without any `items`"),l.ion(a),s.scheduler.relayEvents(l,["beforeSetRecord"],"eventEdit"),Object.values(l.widgetMap).forEach((e=>{const n=e.ref||e.id;if(n&&!s[n])switch(s[n]=e,e.name){case"startDate":case"endDate":e.ion({change:"onDatesChange",thisObj:s})}})),null==(e=s.onEditorConstructed)||e.call(s,l),null==(n=s.eventTypeField)||n.ion({change:"onEventTypeChange",thisObj:s}),null==(r=s.saveButton)||r.ion({click:"onSaveClick",thisObj:s}),null==(i=s.deleteButton)||i.ion({click:"onDeleteClick",thisObj:s}),null==(o=s.cancelButton)||o.ion({click:"onCancelClick",thisObj:s}),l}getEditorConfig(){const e=this,n=new Date(2e3,12,31,23,55,55),r=Ct.format(n,e.dateFormat).replace(Sf,"").length,i=Ct.format(n,e.timeFormat).replace(Sf,"").length,o=r+i,{cls:s,scheduler:a}=e,l=Et.assign({owner:a,eventEditFeature:e,weekStartDay:e.weekStartDay,align:"b-t",id:`${a.id}-event-editor`,autoShow:!1,anchor:!0,scrollAction:"realign",constrainTo:globalThis,cls:s},e.editorConfig);return bs.prototype.getRenderContext(l)[0]&&(l.floating=!1),!1!==l.floating||l.positioned||(l.collapsible={type:"overlay",direction:"right",autoClose:!1,tool:null,recollapseTool:null},l.collapsed=!0,l.hidden=l.anchor=!1,l.hide=function(){this.collapsible.toggleReveal(!1)}),l.onElementCreated=function({element:e}){e.style.setProperty("--date-time-length",`${o}em`),e.style.setProperty("--date-width-difference",(r-i)/2+"em")},l}internalShowEditor(e,n,r=null){var i,o;const s=this,{scheduler:a}=s,l=(null==(i=null==r?void 0:r.target)?void 0:i.nodeType)===Element.ELEMENT_NODE?r.target:a.getElementFromEventRecord(e,n),c=e.isPartOfStore(a.eventStore);if((r=null!=r?r:{target:l,anchor:!0}).target||!c||e.isCreating){if(!1===a.trigger("beforeEventEdit",{eventEdit:s,eventRecord:e,resourceRecord:n,eventElement:l}))return a.element.classList.remove("b-eventeditor-editing"),!1;s.scheduler.element.classList.add("b-eventeditor-editing"),s.resourceRecord=n;const{editor:i}=s;s.editingContext={eventRecord:e,resourceRecord:n,eventElement:l,editor:i,isPartOfStore:c},null==(o=super.internalShowEditor)||o.call(this,e,n,r),s.typeField&&s.toggleEventType(e.get(s.typeField)),s.loadRecord(e,n),i.collapsed?i.setTimeout((async()=>{await i.collapsible.toggleReveal(!0),i.focus()}),100):!i.centered&&i.anchor&&i.floating?l?(s.targetEventElement=l,i.showBy(r)):(i.show(),i.updateCentered(!0)):i.show();const d=a.timeAxisViewModel.timeResolution;if("hour"===d.unit||"minute"===d.unit){const e=`${d.increment}${d.unit}`;s.startTimeField&&(s.startTimeField.step=e),s.endTimeField&&(s.endTimeField.step=e)}s.detachListeners("changesWhileEditing"),a.eventStore.ion({change:s.onChangeWhileEditing,refresh:s.onChangeWhileEditing,thisObj:s,name:"changesWhileEditing"})}}onChangeWhileEditing(){const e=this;!e.isFinalizingEventSave&&e.isEditing&&e.editingContext.isPartOfStore&&!e.eventRecord.isPartOfStore(e.scheduler.eventStore)&&e.onCancelClick()}onBeforeEditorShow(){super.onBeforeEditorShow(...arguments),this.scheduler.trigger("beforeEventEditShow",{eventEdit:this,...this.editingContext})}updateTargetEventElement(e,n){null==e||e.classList.add("b-editing"),null==n||n.classList.remove("b-editing")}editEvent(e,n,r=null,i=null){const o=this,{simpleEventEdit:s}=o.client.features;if(o.isEditing&&o.resetEditingContext(),!(o.disabled||e.readOnly||e.isCreating&&(null==s?void 0:s.enabled)))return i?(o.stmInitiallyAutoRecord=i.stmInitiallyAutoRecord,o.stmInitiallyDisabled=i.stmInitiallyDisabled,o.hasStmCapture=!0,i.transferred=!0):!1===i||o.client.isCalendar||o.hasStmCapture||o.captureStm(!0),o.doEditEvent(...arguments).then((e=>{o.isDestroying||o.isEditing||o.client.isCalendar||(!1!==e&&o.rejectStmTransaction(),o.freeStm())}))}get isEditing(){const{_editor:e}=this;return Boolean((null==e?void 0:e.isVisible)&&!(e.collapsed&&!e.revealed))}async doEditEvent(e,n,r=null){const i=this,{scheduler:o}=i,s=e.isCreating;return n||(n=e.resource||i.resourceStore.getById(e.resourceId)),s&&Gp.prototype.normalize.call(e),r||s?i.internalShowEditor(e,n,r?{target:r}:null):o.scrollResourceEventIntoView(n,e,{animate:!0,edgeOffset:0,extendTimeAxis:!1}).then((()=>i.internalShowEditor(e,n)),(()=>o.element.classList.remove("b-eventeditor-editing")))}loadRecord(e,n){this.loadingRecord=!0,this.internalLoadRecord(e,n),this.loadingRecord=!1}get eventRecord(){var e;return null==(e=this._editor)?void 0:e.record}internalLoadRecord(e,n){var r;const i=this,{eventStore:o}=i.client,{editor:s,resourceField:a}=i;if(i.resourceRecord=n,a&&(null==(r=a.store)?void 0:r.masterStore)!==i.resourceStore&&(a.store=s.chainResourceStore()),s.record=e,a){const r=o.assignmentStore.getResourcesForEvent(e);s.assigningValues=!0,e.isOccurrence||o.storage.includes(e,!0)||!n?i.assignmentStore&&(i.resourceField.value=r.map((e=>e[i.resourceField.valueField]))):i.resourceField.value=n[i.resourceField.valueField],s.assigningValues=!1}super.internalLoadRecord(e,n)}toggleEventType(e){this.editor.element.dataset.eventType=e||"",this.editor.eachWidget((n=>{var r;(null==(r=n.dataset)?void 0:r.eventType)&&(n.hidden=n.dataset.eventType!==e)}))}async finalizeEventSave(e,n,r,i){const o=this,{scheduler:s,assignmentStore:a}=o;a.suspendAutoCommit(),s.suspendRefresh(),o.onBeforeSave(e),e.beginBatch(),o.updateRecord(e),e.endBatch(),e.isOccurrence?n&&e.set("resourceRecords",n):o.resourceField&&a.assignEventToResource(e,n,null,!0),e.isCreating=!1,await s.project.commitAsync(),a.resumeAutoCommit(),s.resumeRefresh(!0),s.trigger("afterEventSave",{eventRecord:e}),o.onAfterSave(e),r(e)}save(){return new Promise(((e,n)=>{var r;const i=this,{scheduler:o,eventRecord:s}=i;if(!s||!i.editor.isValid)return void e(!1);const{eventStore:a,values:l}=i,c=(null==(r=i.resourceField)?void 0:r.records)||(i.resourceRecord?[i.resourceRecord]:[]);if(!i.scheduler.allowOverlap&&a){let{startDate:n,endDate:r}=l;r||(r="duration"in l?Ct.add(n,l.duration,l.durationUnit||s.durationUnit):"fullDuration"in l?Ct.add(n,l.fullDuration):s.endDate);if(c.some((e=>!a.isDateRangeAvailable(n,r,s,e))))return void e(!1)}const d={finalize(r){try{!1!==r?i.finalizeEventSave(s,c,e,n):e(!1)}catch(e){n(e)}}};!1!==o.trigger("beforeEventSave",{eventRecord:s,resourceRecords:c,values:l,context:d})?d.async||d.finalize():e(!1)}))}deleteEvent(){return this.detachListeners("changesWhileEditing"),new Promise(((e,n)=>{const{eventRecord:r,editor:i}=this;this.scheduler.removeEvents([r],(n=>{n&&i.containsFocus&&i.revertFocus(),e(n)}),i)}))}onChangeProject(){this.resourceField&&(this.resourceField.store={})}get eventStore(){return this.scheduler.project.eventStore}get resourceStore(){return this.scheduler.project.resourceStore}get assignmentStore(){return this.scheduler.project.assignmentStore}onActivateEditor({eventRecord:e,resourceRecord:n,eventElement:r}){this.editEvent(e,n,r)}onDragCreateEnd({eventRecord:e,resourceRecord:n,proxyElement:r,stmCapture:i}){this.editEvent(e,n,r,i)}onEventEnterKey({assignmentRecord:e,eventRecord:n,target:r}){const{client:i}=this,o=r[r.matches(i.eventSelector)?"querySelector":"closest"](i.eventInnerSelector);e?this.editEvent(n,e.resource,o):n&&this.editEvent(n,n.resource,o)}onEventTypeChange({value:e}){this.toggleEventType(e)}populateEventMenu({eventRecord:e,resourceRecord:n,items:r}){this.scheduler.readOnly||this.disabled||(r.editEvent={text:"L{EventEdit.Edit event}",localeClass:this,icon:"b-icon b-icon-edit",weight:100,disabled:e.readOnly,onItem:()=>{this.editEvent(e,n)}})}onBeforeEditorToggleReveal({reveal:e}){this[e?"onBeforeEditorShow":"resetEditingContext"]()}resetEditingContext(){const e=this;e.detachListeners("changesWhileEditing"),super.resetEditingContext(),!e.hasStmCapture||e.isDeletingEvent||e.isCancelingEdit||e.freeStm(!1),e.resourceRecord=null}async finalizeStmCapture(e){e?await this.rejectStmTransaction():this.commitStmTransaction(),this.freeStm()}};xf._$name="EventEdit",du.registerFeature(xf,!0,"Scheduler"),du.registerFeature(xf,!1,["SchedulerPro","ResourceHistogram"]),xf.initClass();var Df=class extends sr{static get $name(){return"EventFilter"}static get pluginConfig(){return{chain:["populateTimeAxisHeaderMenu"]}}populateTimeAxisHeaderMenu({items:e}){const n=this;e.eventsFilter={text:"L{filterEvents}",icon:"b-fw-icon b-icon-filter",disabled:n.disabled,localeClass:n,weight:100,menu:{type:"popup",localeClass:n,items:{nameFilter:{weight:110,type:"textfield",cls:"b-eventfilter b-last-row",clearable:!0,keyStrokeChangeDelay:300,label:"L{byName}",localeClass:n,width:200,internalListeners:{change:n.onEventFilterChange,thisObj:n}}},onBeforeShow({source:e}){const[r]=e.items,i=n.store.filters.getBy("property","name");r.value=(null==i?void 0:i.value)||""}}}}onEventFilterChange({value:e}){""!==e?this.store.filter("name",e):this.store.removeFilter("name")}get store(){const{client:e}=this;return e.isGanttBase?e.store:e.eventStore}};Df.featureClass="b-event-filter",Df._$name="EventFilter",du.registerFeature(Df,!0,["Scheduler","Gantt"]),du.registerFeature(Df,!1,"ResourceHistogram");var Ef=class extends Vm{static get $name(){return"EventMenu"}static get configurable(){return{processItems:null,type:"event"}}static get pluginConfig(){const e=super.pluginConfig;return e.chain.push("populateEventMenu"),e}get resourceStore(){return this.client.isHorizontal?this.client.store:this.client.resourceStore}getDataFromEvent(e){var n;const r=super.getDataFromEvent(e),i=r.targetElement,{client:o}=this,s=o.resolveEventRecord(i),a=s&&(null==(n=o.resolveResourceRecord(i)||this.resourceStore.last)?void 0:n.$original),l=s&&o.resolveAssignmentRecord(i);return Object.assign(r,{eventElement:i,eventRecord:s,resourceRecord:a,assignmentRecord:l})}getTargetElementFromEvent({target:e}){return e.closest(this.client.eventSelector)||e}shouldShowMenu(e){return e.eventRecord}showContextMenuFor(e,{targetElement:n,event:r}={}){this.disabled||(n||(n=this.getElementFromRecord(e)))&&Gn.triggerMouseEvent(n,this.tiggerEvent)}getElementFromRecord(e){return this.client.getElementsFromEventRecord(e)[0]}populateEventMenu({items:e,eventRecord:n,assignmentRecord:r}){const{client:i}=this;e.deleteEvent={disabled:n.readOnly||(null==r?void 0:r.readOnly),hidden:i.readOnly},e.unassignEvent={disabled:n.readOnly||(null==r?void 0:r.readOnly),hidden:i.readOnly||i.eventStore.usesSingleAssignment}}changeItems(e){const{client:n}=this;return M.merge({deleteEvent:{text:"L{SchedulerBase.Delete event}",icon:"b-icon b-icon-trash",weight:200,onItem({menu:e,eventRecord:r}){var i;const o=null==(i=e.focusInEvent)?void 0:i.relatedTarget;o&&(o.focus(),n.navigator.activeItem=o),n.removeEvents(n.isEventSelected(r)?n.selectedEvents:[r])}},unassignEvent:{text:"L{SchedulerBase.Unassign event}",icon:"b-icon b-icon-unassign",weight:300,onItem({menu:e,eventRecord:r,resourceRecord:i}){var o;const s=null==(o=e.focusInEvent)?void 0:o.relatedTarget;s&&(s.focus(),n.navigator.activeItem=s),n.isEventSelected(r)?n.assignmentStore.remove(n.selectedAssignments):r.unassign(i)}}},e)}};Ef.featureClass="",Ef._$name="EventMenu",du.registerFeature(Ef,!0,"Scheduler"),du.registerFeature(Ef,!1,"ResourceHistogram");var NonWorkingTimeMixin_default=e=>{var n;return __publicField(n=class extends e{getNonWorkingTimeRanges(e,n,r){if(!e.getNonWorkingTimeRanges){const i=[];return e.forEachAvailabilityInterval({startDate:n,endDate:r,isForward:!0},((e,n,r)=>{for(const[o,s]of r.intervalGroups)s.getIsWorking()||i.push({name:o.name,iconCls:o.iconCls,cls:o.cls,startDate:e,endDate:n})})),i}return e.getNonWorkingTimeRanges(n,r)}getCalendarTimeRanges(e,n=!1){const r=this,{timeAxis:i,fillTicks:o}=r.client,{unit:s,increment:a}=i,l=!r.maxTimeAxisUnit||Ct.compareUnits(s,r.maxTimeAxisUnit)<=0;if(e&&l&&i.count){const l=r.getNonWorkingTimeRanges(e,i.startDate,i.endDate).map((e=>new Gp({name:e.name,cls:`b-nonworkingtime ${e.cls||""}`,startDate:e.startDate,endDate:e.endDate}))),c=[];let d=null;for(const e of l)d&&e.startDate<=d.endDate&&(n||e.name===d.name)&&e.duration>0?d.endDate=e.endDate:(c.push(e),e.setData("id",`nonworking-${c.length}`),d=e);return o&&c.forEach((e=>{e.setStartEndDate(Ct.ceil(e.startDate,{magnitude:a,unit:s}),Ct.floor(e.endDate,{magnitude:a,unit:s}))})),c}return[]}setupDefaultCalendar(){const{client:e,project:n}=this;this.autoGeneratedWeekends||e.isSchedulerPro||e.isGantt||n.effectiveCalendar!==n.defaultCalendar||n.defaultCalendar.intervalStore.count||(this.autoGeneratedWeekends=!0,this.updateDefaultCalendar())}updateDefaultCalendar(){if(this.autoGeneratedWeekends){const e=this.client.project.effectiveCalendar,n=this.defaultNonWorkingIntervals,r=Boolean(n.length);e.clearIntervals(r),r&&e.addIntervals(n)}}updateLocalization(){var e;null==(e=super.updateLocalization)||e.call(this),this.autoGeneratedWeekends&&this.updateDefaultCalendar()}get defaultNonWorkingIntervals(){const e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return Ct.nonWorkingDaysAsArray.map((n=>({recurrentStartDate:`on ${e[n]} at 0:00`,recurrentEndDate:`on ${e[(n+1)%7]} at 0:00`,isWorking:!1})))}},"$name","NonWorkingTimeMixin"),__publicField(n,"configurable",{maxTimeAxisUnit:"week"}),n},Rf=class extends(sr.mixin(AttachToProjectMixin_default,NonWorkingTimeMixin_default)){static get properties(){return{calendarRangeCache:new Map}}doDisable(e){this.client.refresh(),super.doDisable(e)}attachToCalendarManagerStore(e){super.attachToCalendarManagerStore(e);const n=this;e.ion({name:"calendarManagerStore",change:"onCalendarChange",thisObj:n}),n.client.isScheduler&&n.project.effectiveCalendar.intervals.ion({name:"calendarManagerStore",change:"onCalendarChange",thisObj:n}),n.setupDefaultCalendar()}onCalendarChange(){this.calendarRangeCache.clear()}onTimeAxisViewModelUpdate(){this.calendarRangeCache.clear()}getRangeDomConfig(e,n,r,i){const{client:o}=this,{rtl:s}=o,a=o.getCoordinateFromDate(Ct.max(e.startDate,n))-i,l=e.endDate?o.getCoordinateFromDate(Ct.min(e.endDate,r))-i:a,c=Math.abs(l-a),d=c>0,u=s?`calc(${a}px - 100%)`:`${a}px`;return{className:{"b-sch-timerange":1,"b-sch-range":1,"b-sch-nonworkingtime":1,[e.cls]:e.cls,"b-rtl":s},dataset:{id:e.id},elementData:{timeRange:e},style:o.isVertical?`transform: translateY(${u}); ${d?`height:${c}px`:""};`:`transform: translateX(${u}); ${d?`width:${c}px`:""};`}}getCalendarTimeRanges(e){let n=this.calendarRangeCache.get(e);return n||(n=super.getCalendarTimeRanges(e,!0),this.calendarRangeCache.set(e,n)),n}onEventDataGenerated({eventRecord:e,endMS:n,startMS:r,start:i,end:o,left:s,top:a,children:l}){var c;if(this.enabled){const{isVertical:d}=this.client,u=null!=(c=e.effectiveCalendarsCombination)?c:this.client.project.calendar;for(const e of this.getCalendarTimeRanges(u))if(e.startDateMS<n&&e.endDateMS>r){const n=this.getRangeDomConfig(e,i,o,d?a:s);l.push(n)}}}};__publicField(Rf,"$name","EventNonWorkingTime"),__publicField(Rf,"pluginConfig",{chain:["onTimeAxisViewModelUpdate","updateLocalization","onEventDataGenerated"]}),Rf._$name="EventNonWorkingTime",du.registerFeature(Rf,!1,"Scheduler");var kf=[0,0],Tf=[null,[0,10],[10,0]],Mf=class extends Nm{static get $name(){return"EventTooltip"}static get defaultConfig(){return{template:e=>`\n                ${e.eventRecord.name?w.xss`<div class="b-sch-event-title">${e.eventRecord.name}</div>`:""}\n                ${e.startClockHtml}\n                ${e.endClockHtml}`,cls:"b-sch-event-tooltip",monitorRecordUpdate:!0,scrollAction:"hide"}}construct(e,n){const r=this;super.construct(e,n),"string"==typeof r.align&&(r.align={align:r.align})}onPaint({firstPaint:e}){if(super.onPaint(...arguments),e){const e=this,n=e.client.features.dependencies;n&&e.tooltip.ion({beforeAlign({source:e,offset:r=kf}){const{edgeAligned:i}=parseAlign(e.align.align),o=n.disabled?kf:Tf[i];arguments[0].offset=[r[0]+o[0],r[1]+o[1]]}})}}};Mf._$name="EventTooltip",du.registerFeature(Mf,!0,"Scheduler"),du.registerFeature(Mf,!1,"ResourceHistogram");var Af={update:1,filter:1},If={add:1,remove:1,update:1,removeAll:1,filter:1},Ff=class extends Fu{static get $name(){return"GroupSummary"}static get defaultConfig(){return{showTooltip:!0,summaries:null,renderer:null}}static get properties(){return{footersToUpdate:new Set}}static get pluginConfig(){return{chain:["render"]}}construct(e,n){const r=this;if(e.isVertical)throw new Error("GroupSummary feature is not supported in vertical mode");r.scheduler=e,super.construct(e,n),!r.summaries&&r.renderer&&(r.summaries=[{renderer:r.renderer}]),e.isSchedulerBase&&(e.eventStore.ion({changePreCommit:r.onEventStoreChange,thisObj:r}),e.assignmentStore.ion({changePreCommit:r.onAssignmentStoreChange,thisObj:r}),e.ion({timeAxisViewModelUpdate:r.onTimeAxisChange,thisObj:r}),e.project.ion({dataReady:r.onProjectDataReady,thisObj:r}))}doDestroy(){var e;null==(e=this._tip)||e.destroy(),super.doDestroy()}onTimeAxisChange(){this.scheduler.rowManager.forEach((e=>{e.isGroupFooter&&e.render()}))}onEventStoreChange({action:e,records:n,changes:r}){if(Af[e]){const e=new Set;n.forEach((n=>n.resources.forEach((n=>e.add(n))))),this.afterChange(e)}}onAssignmentStoreChange({action:e,records:n,changes:r}){var i;if(If[e]){const e=new Set;if(n.forEach((n=>n.resource&&e.add(n.resource))),null!=(null==(i=null==r?void 0:r.resourceId)?void 0:i.oldValue)){const n=this.scheduler.resourceStore.getById(r.resourceId.oldValue);n&&e.add(n)}this.afterChange(e)}}afterChange(e){const{rowManager:n}=this.scheduler;for(const r of e){let e=n.getRowFor(r);if("header"===this.target)for(;e&&!e.isGroupHeader;)e=n.getRow(e.index-1);else for(;e&&!e.isGroupFooter;)e=n.getRow(e.index+1);e&&this.footersToUpdate.add(e)}}onProjectDataReady(){var e;const{footersToUpdate:n,client:r}=this;if(r.isVisible){if(n.size){for(const r of n)null==(e=r.render)||e.call(r);n.clear()}}else r.whenVisible("refresh",r,[!0])}onBeforeRenderRow({row:e,record:n}){if(e.isGroupFooter&&!n.meta.hasOwnProperty("groupFooterFor")){const n=e.elements.normal.querySelector(".b-sch-timeaxis-cell");n&&(n.innerHTML="")}super.onBeforeRenderRow(...arguments)}generateHtml(e,n,r,i,o,s){if("timeAxis"===e.type){const e=this,{scheduler:r}=e,{eventStore:a}=r,l=r.timeAxisViewModel.columnConfig;let c="";const d=r.getResourcesEventsPerTick(n,(({event:e})=>e.resources.some((e=>n.includes(e)))&&(!a.isFiltered||a.records.includes(e))));return r.timeAxis.forEach(((u,h)=>{const g=d[h]||[],p=e.summaries.map((e=>`<div class="b-timeaxis-summary-value">${e.renderer({startDate:u.startDate,endDate:u.endDate,resourceStore:r.resourceStore,events:g,resources:n,eventStore:a,groupRecord:i,groupField:o,groupValue:s})}</div>`)).join("");c+=`<div class="b-timeaxis-tick" style="width: ${l[l.length-1][h].width}px">${p}</div>`})),`<div class="b-timeaxis-group-summary">${c}</div>`}return super.generateHtml(e,n,r,i,o,s)}updateSummaryHtml(e,n,r){const i=super.updateSummaryHtml(e,n,r);if("timeAxis"===n.type){const e={count:0,height:0};return this.summaries.forEach((n=>{n.height?e.height+=n.height:e.count++})),e}return i}getTipHtml({activeTarget:e}){const n=this,r=Array.from(e.parentElement.children).indexOf(e),i=n.scheduler.timeAxis.getAt(r);let o=`<header>${n.L("L{Summary.Summary for}",n.scheduler.getFormattedDate(i.startDate))}</header>`,s=!1;return Gn.forEachSelector(e,".b-timeaxis-summary-value",((e,r)=>{const i=n._labels[r],a=e.innerText.trim();o+=`<label>${i||""}</label><div class="b-timeaxis-summary-value">${a}</div>`,e.innerHTML&&(s=!0)})),s?o:null}render(){var e;const n=this,{scheduler:r}=n;r.isSchedulerBase&&(null==(e=n.summaries)?void 0:e.some((e=>e.label)))&&n.showTooltip&&!n._tip&&(n._labels=n.summaries.map((e=>e.label||"")),n._tip=new fc({id:`${r.id}-groupsummary-tip`,cls:"b-timeaxis-summary-tip",hoverDelay:0,hideDelay:0,forElement:r.timeAxisSubGridElement,anchorToTarget:!0,forSelector:".b-timeaxis-group-summary .b-timeaxis-tick",getHtml:n.getTipHtml.bind(n)}))}removeSummaryElements(e){const n=e.querySelector(".b-timeaxis-group-summary");null==n||n.remove(),super.removeSummaryElements()}hasSummary(e){return super.hasSummary(e)||e.isTimeAxisColumn}};Ff._$name="GroupSummary",du.registerFeature(Ff,!1,"Scheduler");var Pf=class extends sr{static get pluginConfig(){return{chain:["onElementMouseDown","onElementMouseMove"]}}onElementMouseDown(e){const n=this;if(!e.touches&&0===e.button&&!n.disabled&&e.target.closest(".b-sch-header-timeaxis-cell")){const r=n.client.subGrids.normal.header.headersElement;n.startX=e.clientX,n.element=Gn.createElement({parent:r,tag:"div",className:"b-headerzoom-rect"}),n.headerElementRect=Gt.from(r),cn.on({element:document,mouseup:"onMouseUp",thisObj:n,once:!0})}}onElementMouseMove(e){const n=this;if("number"==typeof n.startX){const r=Math.max(e.clientX,n.headerElementRect.left),i=Math.min(n.startX,r),o=Math.abs(n.startX-r),s=new Gt(i-n.headerElementRect.x+n.client.scrollLeft,0,o,n.headerElementRect.height);Gn.setTranslateX(n.element,s.left),n.element.style.width=s.width+"px"}}onMouseUp(){const e=this;if("number"==typeof e.startX){const{client:n}=e,r=Gt.from(e.element),i=n.getDateFromCoordinate(r.left,"round",!1),o=n.getDateFromCoordinate(r.right,"round",!1);e.element.remove(),e.startX=null,n.zoomToSpan({startDate:i,endDate:o})}}};__publicField(Pf,"$name","HeaderZoom"),Pf._$name="HeaderZoom",du.registerFeature(Pf,!1,"Scheduler");var Of=["top","before","after","bottom"],editorAlign=(e,n)=>{switch(e){case"top":return"b-b";case"after":return n.rtl?"r-r":"l-l";case"right":return"l-l";case"bottom":return"t-t";case"before":return n.rtl?"l-l":"r-r";case"left":return"r-r"}},Lf={top:1,bottom:1},_f={estimate:1,measure:1},$f={before:1,after:1},jf=class extends sr{static get $name(){return"Labels"}static get configurable(){return{labelCls:"b-sch-label",top:null,after:null,right:null,bottom:null,before:null,left:null,thisObj:null,blurAction:"cancel",labelLayoutMode:"default",labelCharWidth:7}}static get pluginConfig(){return{chain:["onEventDataGenerated"]}}construct(e,n){const r=this;if(e.isVertical)throw new Error("Labels feature is not supported in vertical mode");r.scheduler=e,super.construct(e,n),(r.top||r.bottom||r.before||r.after)&&r.updateHostClasslist()}updateHostClasslist(){const{top:e,bottom:n}=this,{classList:r}=this.scheduler.element;r.remove("b-labels-topbottom"),r.remove("b-labels-top"),r.remove("b-labels-bottom"),(e||n)&&(r.add("b-labels-topbottom"),e&&r.add("b-labels-top"),n&&r.add("b-labels-bottom"))}onLabelDblClick(e){const n=this,r=e.target;if(r&&!n.scheduler.readOnly){const{side:i}=r.dataset,o=n[i],{editor:s,field:a}=o;if(s){const l=this.scheduler.resolveEventRecord(e.target);if(l.readOnly)return;return s instanceof Xc||(o.editor=new Xc({blurAction:n.blurAction,inputField:s,scrollAction:"realign"})),o.editor.render(n.scheduler.element),o.editor.startEdit({target:r,align:editorAlign(i,n.client),matchSize:!1,record:l,field:a}),e.stopImmediatePropagation(),!1}}}changeTop(e){return this.processLabelSpec(e,"top")}updateTop(){this.updateHostClasslist()}changeAfter(e){return this.processLabelSpec(e,"after")}updateAfter(){this.updateHostClasslist()}changeRight(e){this[this.client.rtl?"before":"after"]=e}changeBottom(e){return this.processLabelSpec(e,"bottom")}updateBottom(){this.updateHostClasslist()}changeBefore(e){return this.processLabelSpec(e,"before")}updateBefore(){this.updateHostClasslist()}changeLeft(e){this[this.client.rtl?"after":"before"]=e}processLabelSpec(e,n){if("function"==typeof e)e={renderer:e};else if("string"==typeof e)e={field:e};else{if(!e)return null;e=Object.setPrototypeOf({},e)}const{scheduler:r}=this,{eventStore:i,resourceStore:o,taskStore:s,id:a}=r,{field:l,editor:c}=e;if(Lf[n]&&(r.milestoneWidth=null),e.recordType=i&&!s?"event":"task",l){let n,a=!1;i&&!s&&(n=i.modelClass.fieldMap[l],n?(e.fieldDef=n,e.recordType="event",a=!0):Reflect.has(i.modelClass.prototype,l)&&(e.recordType="event",a=!0)),!n&&s&&(n=s.modelClass.fieldMap[l],n?(e.fieldDef=n,e.recordType="task",a=!0):Reflect.has(o.modelClass.prototype,l)&&(e.recordType="task",a=!0)),!n&&o&&(n=o.modelClass.fieldMap[l],n?(e.fieldDef=n,e.recordType="resource",a=!0):Reflect.has(o.modelClass.prototype,l)&&(e.recordType="resource",a=!0)),c&&("boolean"==typeof c?r.editor={type:"textfield"}:"string"==typeof c&&(r.editor={type:c}),cn.on({element:r.timeAxisSubGrid.element,delegate:".b-sch-label",dblclick:"onLabelDblClick",thisObj:this}))}return e}doDisable(e){super.doDisable(e),this.client.isPainted&&this.client.refresh()}generateLabelConfigs(e){const n=this,r=[];for(const i of Of)if(n[i]){const{field:o,fieldDef:s,recordType:a,renderer:l,thisObj:c}=n[i],d={tag:"label",className:{[n.labelCls]:1,[`${n.labelCls}-${i}`]:1},dataset:{side:i,taskFeature:`label-${i}`}};let u;const h=`${a}Record`,g=e[h];l?u=l.call(c||n.thisObj||n,{[h]:g,resourceRecord:e.resourceRecord,assignmentRecord:e.assignmentRecord,domConfig:d}):(u=g[o],u="date"!==(null==s?void 0:s.type)||l?w.encodeHtml(u):Ct.format(u,n.client.displayDateFormat)),d.html=u||" ",r.push(d)}return r}measureLabels(e,n){const r=this,i=r.client.timeAxisViewModel.getSingleUnitInPixels("millisecond");for(const o of e)if($f[o.dataset.side]){let{html:e}=o,s=0;if("estimate"===r.labelLayoutMode)e.includes("<")&&(e=Gn.stripTags(e)),s=e.length*r.labelCharWidth+18;else{const e=r.labelMeasureElement||(r.labelMeasureElement=Gn.createElement({className:"b-sch-event-wrap b-measure-label",parent:r.client.foregroundCanvas}));e.retainElement=!0,$o.sync({targetElement:e,childrenOnly:!0,domConfig:{children:[o]}}),s=e.firstElementChild.offsetWidth}const a=s/i;switch(o.dataset.side){case"before":n.startMS-=a;break;case"after":n.endMS+=a}}}onEventDataGenerated(e){var n;if(!this.disabled&&!(null==(n=e.eventRecord)?void 0:n.isResourceTimeRange)){const n=this.generateLabelConfigs(e);_f[this.labelLayoutMode]&&this.measureLabels(n,e),e.wrapperChildren.push(...n)}}updateLabelLayoutMode(){this.isConfiguring||this.client.refreshWithTransition()}updateLabelCharWidth(){this.isConfiguring||this.client.refreshWithTransition()}};jf.featureClass="b-sch-labels",jf._$name="Labels",du.registerFeature(jf,!1,"Scheduler");var zf=class extends(qm.mixin(AttachToProjectMixin_default,NonWorkingTimeMixin_default)){static get defaultConfig(){return{highlightWeekends:null,hideRangesOnZooming:!0,showHeaderElements:!0,showLabelInBody:!0,autoGeneratedWeekends:!1}}doDestroy(){this.attachToCalendar(null),super.doDestroy()}set highlightWeekends(e){A.deprecate("Scheduler","6.0.0","Deprecated in favour of disabling the feature"),this.disabled=!e}get highlightWeekends(){return!this.disabled}onConfigChange({name:e}){this.isConfiguring||"fillTicks"!==e||this.refresh()}attachToProject(e){super.attachToProject(e),this.attachToCalendar(e.effectiveCalendar),e.graph||this.client.isScheduler||e.ion({name:"project",dataReady:{fn:()=>this.attachToCalendar(e.effectiveCalendar),once:!0},thisObj:this}),e.ion({name:"project",calendarChange:()=>this.attachToCalendar(e.effectiveCalendar),thisObj:this})}onTimeAxisViewModelUpdate(...e){return this._timeAxisUnitDurationMs=null,super.onTimeAxisViewModelUpdate(...e)}attachToCalendar(e){const n=this,{project:r,client:i}=n;n.detachListeners("calendar"),n.autoGeneratedWeekends=!1,e&&(n.setupDefaultCalendar(),e.intervalStore.ion({name:"calendar",change:()=>n.setTimeout((()=>n.refresh()),1)})),!i.isEngineReady||i.project.isDelayingCalculation||i.isDestroying?r.isDestroyed||(n.detachListeners("initialProjectListener"),r.ion({name:"initialProjectListener",refresh({isCalculated:e}){!1!==e&&(n.refresh(),n.detachListeners("initialProjectListener"))},thisObj:n})):n.refresh()}get calendar(){var e;return null==(e=this.project)?void 0:e.effectiveCalendar}get timeAxisUnitDurationMs(){return this._timeAxisUnitDurationMs||(this._timeAxisUnitDurationMs=Ct.as("ms",1,this.client.timeAxis.unit)),this._timeAxisUnitDurationMs}shouldRenderRange(e){return super.shouldRenderRange(e)&&(!this.hideRangesOnZooming||e.durationMS>=this.timeAxisUnitDurationMs)}get timeRanges(){const e=this;return e._timeRanges||(e._timeRanges=e.getCalendarTimeRanges(e.calendar)),e._timeRanges}};__publicField(zf,"$name","NonWorkingTime"),__publicField(zf,"pluginConfig",{chain:["onPaint","attachToProject","updateLocalization","onConfigChange","onSchedulerHorizontalScroll"]}),zf._$name="NonWorkingTime",du.registerFeature(zf,!1,"Scheduler"),du.registerFeature(zf,!0,["SchedulerPro","Gantt","ResourceHistogram"]);var Bf=class extends sr{get targetSelector(){return".b-sch-timeaxis-cell,.b-timeline-subgrid"+(this.enableInHeader?",.b-sch-header-timeaxis-cell,.b-sch-header-text":"")}static get pluginConfig(){return{chain:["onElementMouseDown"]}}onElementMouseDown(e){const n=this,{client:r}=n,{button:i,touches:o,target:s,clientX:a,clientY:l}=e,c=r.features.taskDrag||r.features.eventDrag,d=r.readOnly||!(null==c?void 0:c.enabled);o||0!==i||n.disabled||!1===r.trigger("beforePan",{event:e})||(s.matches(n.targetSelector)||d&&s.closest(r.eventSelector))&&(n.mouseX=a,n.mouseY=l,n.onHeader=n.enableInHeader&&s.closest(".b-sch-header-timeaxis-cell"),n.mouseDetacher=cn.on({element:document,mousemove:"onMouseMove",mouseup:"onMouseUp",thisObj:n}))}onMouseMove(e){const n=this,{client:r}=n,i=r.timeAxisSubGrid.scrollable,o=r.scrollable,s=e.clientX,a=e.clientY;e.preventDefault(),!n.vertical||!r.isVertical&&n.onHeader||o.scrollBy(0,n.mouseY-a),!n.horizontal||!r.isHorizontal&&n.onHeader||i.scrollBy(n.mouseX-s),n.mouseX=s,n.mouseY=a}onMouseUp(){this.mouseDetacher(),this.mouseDetacher=null}get isActive(){return Boolean(this.mouseDetacher)}};__publicField(Bf,"$name","Pan"),__publicField(Bf,"configurable",{horizontal:!0,vertical:!0,enableInHeader:!0}),Bf._$name="Pan",du.registerFeature(Bf,!1,["Scheduler","Gantt"]);var Hf=class extends Na{static get pluginConfig(){const e=super.pluginConfig;return e.chain.push("populateResourceMenu"),e}getDataFromEvent(e){const n=e.target.closest(".b-resourceheader-cell"),r=null==n?void 0:n.dataset.resourceId;if(r){return{cellElement:n,resourceRecord:this.client.resourceStore.getById(r)}}}populateResourceMenu({items:e,resourceRecord:n}){const{client:r}=this;r.readOnly||(e.remove={text:"L{CellMenu.removeRow}",localeClass:this,icon:"b-fw-icon b-icon-trash",cls:"b-separator",weight:100,disabled:n.readOnly,onItem:()=>r.resourceStore.remove(n)})}get showMenu(){return!0}};__publicField(Hf,"$name","ResourceMenu"),__publicField(Hf,"configurable",{processItems:null,items:null,type:"resource"}),Hf.featureClass="",Hf._$name="ResourceMenu",du.registerFeature(Hf,!1,["Scheduler"]);var Vf=class extends Hm{static get pluginConfig(){return{...super.pluginConfig,assign:["resolveResourceTimeRangeRecord","getElementFromResourceTimeRangeRecord"]}}attachToProject(e){const n=this,{client:r}=n;if(super.attachToProject(e),!e.resourceTimeRangeStore){e.resourceTimeRangeStore=r.resourceTimeRangeStore||new vm({owner:n});const{crudManager:i}=r;i&&!i.resourceTimeRangeStore&&(i.resourceTimeRangeStore=e.resourceTimeRangeStore)}const i=e.resourceTimeRangeStore;n.exposedOnScheduler||(r.resourceTimeRanges&&(i.add(r.resourceTimeRanges),delete r.resourceTimeRanges),Object.defineProperty(r,"resourceTimeRanges",{get:()=>i.records,set:e=>i.data=e}),n.exposedOnScheduler=!0),i.resourceStore||(i.resourceStore=e.resourceStore),n.detachListeners("store"),i.ion({name:"store",change:n.onStoreChange,thisObj:n})}attachToResourceTimeRangeStore(e){this.attachToProject(this.project),this.client.refresh()}get store(){return this.project.resourceTimeRangeStore}getEventsToRender(e,n){if(!this.disabled){const{timeRanges:r}=e.$original;if(null==r?void 0:r.length){const{startDate:e,endDate:i}=this.client;r.forEach((r=>{r.isRecurring?n.push(...r.getOccurrencesForDateRange(e,i)):n.push(r)}))}}return n}shouldInclude(e){return e.isResourceTimeRange&&!e.isNonWorking&&!e.isCalendarHighlightModel}doDestroy(){var e;(null==(e=this.store)?void 0:e.owner)===this&&this.store.destroy(),super.doDestroy()}};__publicField(Vf,"$name","ResourceTimeRanges"),__publicField(Vf,"configurable",{rangeCls:"b-sch-resourcetimerange",enableMouseEvents:!1,tabIndex:0,entityName:"resourceTimeRange"}),Vf.featureClass="",Vf._$name="ResourceTimeRanges",du.registerFeature(Vf,!1,"Scheduler");var Nf=class extends Vm{static get $name(){return"ScheduleMenu"}static get defaultConfig(){return{type:"schedule",items:null,processItems:null}}static get pluginConfig(){const e=super.pluginConfig;return e.chain.push("populateScheduleMenu"),e}shouldShowMenu(e){const{client:n}=this,{targetElement:r,resourceRecord:i}=e,o=n.timeAxisSubGridElement.contains(r);return!r.closest(n.eventSelector)&&o&&!(i&&i.isSpecialRow)}getDataFromEvent(e){var n,r;if(Gn.isDOMEvent(e)){const{client:i}=this,o=null==(n=i.getCellDataFromEvent)?void 0:n.call(i,e),s=null==(r=i.getDateFromDomEvent)?void 0:r.call(i,e,"floor"),a=i.resolveResourceRecord(e)||i.isVertical&&i.resourceStore.last;return Et.assign(super.getDataFromEvent(e),o,{date:s,resourceRecord:a})}return e}populateScheduleMenu({items:e,resourceRecord:n,date:r}){const{client:i}=this;!i.readOnly&&i.eventStore&&(e.addEvent={text:"L{SchedulerBase.Add event}",icon:"b-icon b-icon-add",disabled:!n||n.readOnly||!n.isWorkingTime(r),weight:100,onItem(){i.createEvent(r,n,i.getRowFor(n))}})}};Nf.featureClass="",Nf._$name="ScheduleMenu",du.registerFeature(Nf,!0,"Scheduler");var qf=class extends sr{static get $name(){return"ScheduleTooltip"}static get configurable(){return{messageTemplate:e=>`<div class="b-sch-hovertip-msg">${e.message}</div>`,hideForNonWorkingTime:null}}static get pluginConfig(){return{chain:["onPaint"]}}onPaint({firstPaint:e}){if(!e)return;const n=this,{client:r}=n;let i;r.isSchedulerPro&&void 0===n.hideForNonWorkingTime&&(n.hideForNonWorkingTime=!0);const o=n.hoverTip=new fc({id:`${r.id}-schedule-tip`,cls:"b-sch-scheduletip",allowOver:!0,hoverDelay:0,hideDelay:100,showOnHover:!0,forElement:r.timeAxisSubGridElement,anchorToTarget:!1,trackMouse:!0,updateContentOnMouseMove:!0,monitorResize:!1,textContent:!1,forSelector:".b-schedulerbase:not(.b-dragging-event):not(.b-dragcreating) .b-grid-body-container:not(.b-scrolling) .b-timeline-subgrid:not(.b-scrolling) > :not(.b-sch-foreground-canvas):not(.b-group-footer):not(.b-group-row) *",getHtml:n.getHoverTipHtml.bind(n),onDocumentMouseDown(e){o.forElement.contains(e.event.target)&&(i=cn.on({thisObj:n,element:r.timeAxisSubGridElement,mousemove:e=>o.internalOnPointerOver(e),capture:!0}));const s=o.hideAnimation;o.hideAnimation=!1,o.constructor.prototype.onDocumentMouseDown.call(o,e),o.hideAnimation=s},...n.config,internalListeners:n.configuredListeners});o.ion({pointerover({event:e}){const r="buttons"in e?e.buttons>0:e.which>0;return!r&&i&&i(),!n.disabled&&!r},innerhtmlupdate({source:e}){n.clockTemplate.updateDateIndicator(e.element,n.lastTime)}}),r.ion({timeAxisViewModelUpdate:"updateTip",thisObj:n}),n.clockTemplate=new Pm({scheduler:r})}processConfiguredListeners(){}updateTip(){this.hoverTip.isVisible&&this.hoverTip.updateContent()}doDestroy(){this.destroyProperties("clockTemplate","hoverTip"),super.doDestroy()}getHoverTipHtml({tip:e,event:n}){const r=this,i=r.client,o=n&&i.getDateFromDomEvent(n,"floor",!0);let s=r.lastHtml;if(o&&n.target){const a=i.resolveResourceRecord(n);if(a&&(o-r.lastTime!=0||a.id!==r.lastResourceId)){if(r.hideForNonWorkingTime){const n=a.isWorkingTime(o);e.element.classList.toggle("b-nonworking-time",!n)}r.lastResourceId=a.id,s=r.lastHtml=r.generateTipContent({date:o,event:n,resourceRecord:a})}}else e.hide(),r.lastTime=null,r.lastResourceId=null;return s}generateTipContent({date:e,event:n,resourceRecord:r}){const i=this,o=i.clockTemplate.generateContent({date:e,text:i.client.getFormattedDate(e)}),s=i.messageTemplate({message:i.getText(e,n,r)||""});return i.lastTime=e,o+s}getText(e,n,r){}};qf.featureClass="b-scheduletip",qf._$name="ScheduleTooltip",du.registerFeature(qf,!0,"Scheduler"),du.registerFeature(qf,!1,"ResourceUtilization");var Wf=class extends(sr.mixin(TaskEditStm_default)){static get $name(){return"SimpleEventEdit"}static get defaultConfig(){return{triggerEvent:"eventdblclick",eventRecord:null,field:"name",editorConfig:null}}static get pluginConfig(){return{chain:["onEventEnterKey","editEvent"]}}construct(e,n){const r=this;r.scheduler=e,e.eventEdit=r,super.construct(e,n),r.clientListenersDetacher=e.ion({[r.triggerEvent]:({eventRecord:e,eventElement:n})=>r.editEvent(e,e.resource,n),dragcreateend:r.onDragCreateEnd,thisObj:r})}doDestroy(){var e;this.clientListenersDetacher(),null==(e=this.editor)||e.destroy(),super.doDestroy()}get eventStore(){return this.scheduler.eventStore}get project(){return this.client.project}async editEvent(e,n,r,i){const o=this,{scheduler:s}=o,{eventEdit:a}=o.client.features;if(s.readOnly||o.disabled||e.readOnly||a&&!a.disabled&&!e.isCreating)return;let{editor:l}=o;r=Gn.down(r,s.eventInnerSelector)||r,e=e.isAssignment?e.event:e,o.resource=n,o.event=e,o.element=r,s.element.classList.add("b-eventeditor-editing"),l?l.render(s.timeAxisSubGridElement):(o.editor=l=Xc.new({owner:s.timeAxisSubGrid,appendTo:s.timeAxisSubGridElement,scrollAction:"realign",maxHeight:40,align:{align:s.isHorizontal?"c-c":"t-t"},cls:"b-simpleeventeditor",internalListeners:{complete:"onEditorComplete",cancel:"onEditorCancel",thisObj:o},onInternalKeyDown:e=>e.stopPropagation()},o.editorConfig),o.relayEvents(o.editor,["beforestart","start","beforecomplete","complete","beforecancel","cancel"])),i?(o.stmInitiallyAutoRecord=i.stmInitiallyAutoRecord,o.stmInitiallyDisabled=i.stmInitiallyDisabled,o.hasStmCapture=!0,i.transferred=!0):!1===i||o.hasStmCapture||o.captureStm(!0),e.isCreating&&(e.name=""),await l.startEdit({target:r,record:e,field:o.field}),s.isVertical&&e.startDate<s.visibleDateRange.startDate&&l.element.scrollIntoView(),s.navigator.disabled=!0}onEditorComplete(){this.event.isCreating=!1,this.reset(),this.freeStm(!0)}onEditorCancel(){this.event.isCreating&&this.event.remove(),this.reset(),this.freeStm(!1)}reset(){this.scheduler.element.classList.remove("b-eventeditor-editing"),this.scheduler.navigator.disabled=!1,this.event=null,this.resource=null}onEventEnterKey({assignmentRecord:e,eventRecord:n}){const r=e?this.scheduler.getElementFromAssignmentRecord(e):this.scheduler.getElementFromEventRecord(n),i=(e||n).resource;this.editEvent(n,i,r)}onDragCreateEnd({eventRecord:e,resourceRecord:n,eventElement:r,stmCapture:i}){this.element=r,this.editEvent(e,n,r,i)}};Wf._$name="SimpleEventEdit",du.registerFeature(Wf,!1,"Scheduler");var Uf={width:0,height:0},Gf=class extends sr{construct(e,n){super.construct(e,n),e.isVertical&&(this.toUpdate=new Set,e.ion({scroll:"onSchedulerScroll",horizontalScroll:"onHorizontalScroll",thisObj:this,prio:1e4}))}onEventDataGenerated(e){this.client.isHorizontal?e.wrapperCls["b-disable-sticky"]=!1===e.eventRecord.stickyContents:(this.syncEventContentPosition(e,void 0,!0),this.updateStyles())}onSchedulerScroll(){this.disabled||this.verticalSyncAllEventsContentPosition(this.client)}onHorizontalScroll({subGrid:e}){e===this.client.timeAxisSubGrid&&this.verticalSyncAllEventsContentPosition(this.client)}updateStyles(){for(const{contentEl:e,style:n}of this.toUpdate)Gn.applyStyle(e,n);this.toUpdate.clear()}verticalSyncAllEventsContentPosition(e){const{resourceMap:n}=e.currentOrientation;for(const e of n.values())for(const{renderData:n,elementConfig:r}of Object.values(e)){const e=[n];r&&n.eventRecord.isResourceTimeRange&&e.push(r.children[0]),this.syncEventContentPosition.apply(this,e)}this.toUpdate.size&&this.updateStyles()}syncEventContentPosition(e,n=e.eventContent,r=!1){if(this.disabled||!1===e.eventRecord.stickyContents)return;const{client:i}=this,{eventRecord:o,resourceRecord:s,useEventBuffer:a,bufferAfterWidth:l,bufferBeforeWidth:c,top:d,height:u}=e,h=i.scrollable.y,g=r?null:i.getElementFromEventRecord(o,s,!0),p=g&&$o.getChild(g,"event.content"),m=o.instanceMeta(i),f="string"==typeof n.style?n.style=Gn.parseStyle(n.style):n.style||(n.style={});if(null==g?void 0:g.classList.contains("b-dragging"))return;let b=d,v=u,y=b+v;if(a&&(b+=c,v=v-c-l,y=b+v),b<h&&y>=h&&!o.isMilestone){const n=null==p?void 0:p.offsetWidth,r="center"===((null==p?void 0:p.parentNode)&&Gn.getStyleValue(p.parentNode,"justifyContent"))?(e.width-n)/2:0,i=b;if((!p||n)&&i<h&&i+v-1>=h){const e=this.getEventContentMargins(p),n=p?v-p.offsetHeight-e.height-r:Number.MAX_SAFE_INTEGER,o=Math.min(h-i,n-2);f.transform=o>0?`translateY(${o}px)`:"",m.stuck=!0}else f.transform="",m.stuck=!1;p&&this.toUpdate.add({contentEl:p,style:f})}else p&&m.stuck&&(f.transform="",m.stuck=!1,this.toUpdate.add({contentEl:p,style:f}))}getEventContentMargins(e){return(null==e?void 0:e.classList.contains("b-sch-event-content"))?Gn.getEdgeSize(e,"margin"):Uf}doDisable(){super.doDisable(...arguments),this.isConfiguring||this.client.refreshWithTransition()}};__publicField(Gf,"$name","StickyEvents"),__publicField(Gf,"type","stickyEvents"),__publicField(Gf,"pluginConfig",{chain:["onEventDataGenerated"]}),Gf._$name="StickyEvents",du.registerFeature(Gf,!0,"Scheduler"),du.registerFeature(Gf,!1,"ResourceHistogram");var Yf=class extends Uu{static get $name(){return"TimelineSummary"}static get configurable(){return{showTooltip:!0}}static get pluginConfig(){return{chain:["renderRows","updateProject"]}}construct(e,n){const r=this;super.construct(e,n),r.summaries||(r.summaries=[{renderer:r.renderer}]),e.isTimelineBase&&(r.updateProject(e.project),e.ion({timeAxisViewModelUpdate:r.renderRows,thisObj:r}))}updateProject(e){this.detachListeners("summaryProject"),e.ion({name:"summaryProject",dataReady:"updateTimelineSummaries",thisObj:this})}renderRows(){this.client.isHorizontal&&this.client.timeAxisSubGrid.footer.element.querySelector(".b-grid-footer").classList.add("b-sch-summarybar"),super.renderRows(),this.disabled||this.render()}get summaryBarElement(){return this.client.element.querySelector(".b-sch-summarybar")}render(){const e=this,{client:n}=e,r=n.isHorizontal?"width":"height",i=n.timeAxisViewModel.columnConfig,o=e.summaryBarElement;o&&(!e._tip&&e.showTooltip&&e.summaries.some((e=>e.label))&&(e._tip=new fc({id:`${n.id}-summary-tip`,cls:"b-timeaxis-summary-tip",hoverDelay:0,hideDelay:100,forElement:o,anchorToTarget:!0,trackMouse:!1,forSelector:".b-timeaxis-tick",getHtml:({activeTarget:e})=>e._tipHtml})),o.innerHTML=i[i.length-1].map((e=>`<div class="b-timeaxis-tick" style="${r}: ${e.width}px"></div>`)).join(""),e.updateTimelineSummaries())}refresh(){super.refresh(),this.updateTimelineSummaries()}doDisable(e){var n;const{isConfiguring:r}=this.client;super.doDisable(e),null==(n=this.summaryColumn)||n.toggle(!e),r||e||this.render()}doDestroy(){var e;null==(e=this._tip)||e.destroy(),super.doDestroy()}};Yf._$name="TimelineSummary";var Kf=class extends Yf{static get $name(){return"Summary"}static get configurable(){return{summaries:null,renderer:null,verticalSummaryColumnConfig:null}}static get pluginConfig(){const e=super.pluginConfig;return e.chain.push("bindStore","updateEventStore","updateResourceStore"),e}construct(e,n){const r=this;r.scheduler=e,e.isVertical&&(e.timeAxisSubGrid.resizable=!1,n.hideFooters=!0,e.add(e.createSubGrid("right")),r.summaryColumn=e.columns.add(Et.assign({filterable:null,region:"right",cellCls:"b-grid-footer b-sch-summarybar",align:"center",sortable:!1,editor:!1,groupable:!1,htmlEncode:!1,cellMenuItems:!1,enableHeaderContextMenu:!1,hidden:r.disabled},r.verticalSummaryColumnConfig))[0]),super.construct(e,n),e.isSchedulerBase&&(r.updateEventStore(e.eventStore),r.updateResourceStore(e.resourceStore))}updateEventStore(e){this.detachListeners("summaryEventStore"),e.ion({name:"summaryEventStore",filter:"updateTimelineSummaries",thisObj:this})}updateResourceStore(e){this.detachListeners("summaryResourceStore"),e.ion({name:"summaryResourceStore",filter:"updateTimelineSummaries",thisObj:this})}updateTimelineSummaries(){const e=this,{client:n}=e,{eventStore:r,timeAxis:i}=n,o=e.summaryBarElement,s=e.selectedOnly&&n.selectedRecords.length?n.selectedRecords:n.resourceStore.records;if(o&&n.isEngineReady){const a=n.getResourcesEventsPerTick(s,(({event:e})=>!r.isFiltered||r.records.includes(e)));Array.from(o.children).forEach(((o,s)=>{const l=i.getAt(s),c=a[s]||[];let d="",u=`<header>${e.L("L{Summary for}",n.getFormattedDate(l.startDate))}</header>`;e.summaries.forEach((i=>{const s=i.renderer({startDate:l.startDate,endDate:l.endDate,resourceStore:n.resourceStore,eventStore:r,events:c,element:o}),a=s?`<div class="b-timeaxis-summary-value">${s}</div>`:"";(e.summaries.length>1||s)&&(d+=a),u+=a?`<label>${i.label||""}</label>`+a:""})),o.innerHTML=d,o._tipHtml=d?u:""}))}}};Kf._$name="Summary",du.registerFeature(Kf,!1,"Scheduler");var Xf={maintainVisibleStart:!0},Zf=class extends Pu{static get $name(){return"TimeAxisHeaderMenu"}static get defaultConfig(){return{processItems:null,items:null,type:"timeAxisHeader"}}static get pluginConfig(){const e=super.pluginConfig;return e.chain.push("populateTimeAxisHeaderMenu"),e}construct(){super.construct(...arguments),this.triggerEvent.includes("click")&&this.client.zoomOnTimeAxisDoubleClick&&(this.client.zoomOnTimeAxisDoubleClick=!1)}shouldShowMenu(e){const{column:n,targetElement:r}=e,{client:i}=this;return i.isHorizontal?!1!==(null==n?void 0:n.enableHeaderContextMenu)&&(null==n?void 0:n.isTimeAxisColumn):r.matches(".b-sch-header-timeaxis-cell")}showContextMenu(e){super.showContextMenu(...arguments),this.menu&&(this.menu.scrollAction="realign")}populateTimeAxisHeaderMenu({items:e}){const n=this,{client:r}=n,i={magnitude:r.timeAxis.shiftIncrement,unit:r.timeAxis.shiftUnit};Object.assign(e,{zoomLevel:{text:"L{pickZoomLevel}",localeClass:n,icon:"b-fw-icon b-icon-search-plus",disabled:!r.presets.count||n.disabled,weight:200,menu:{type:"popup",items:{zoomSlider:{weight:210,type:"slider",minWidth:130,showValue:!1,triggerChangeOnInput:!0}},onBeforeShow({source:e}){const[i]=e.items;i.min=r.minZoomLevel,i.max=r.maxZoomLevel,i.value=r.zoomLevel,n.zoomDetatcher=i.ion({change:"onZoomSliderChange",thisObj:n})},onHide(){n.zoomDetatcher&&(n.zoomDetatcher(),n.zoomDetatcher=null)}}},dateRange:{text:"L{activeDateRange}",localeClass:n,icon:"b-fw-icon b-icon-calendar",weight:300,menu:{type:"popup",cls:"b-sch-timeaxis-menu-daterange-popup",defaults:{localeClass:n},items:{startDateField:{type:"datefield",label:"L{startText}",weight:310,labelWidth:"6em",required:!0,step:i,internalListeners:{change:n.onRangeDateFieldChange,thisObj:n}},endDateField:{type:"datefield",label:"L{endText}",weight:320,labelWidth:"6em",required:!0,step:i,internalListeners:{change:n.onRangeDateFieldChange,thisObj:n}},leftShiftBtn:{type:"button",weight:330,cls:"b-left-nav-btn",icon:"b-icon b-icon-previous",color:"b-blue b-raised",flex:1,margin:0,internalListeners:{click:n.onLeftShiftBtnClick,thisObj:n}},todayBtn:{type:"button",weight:340,cls:"b-today-nav-btn",color:"b-blue b-raised",text:"L{todayText}",flex:4,margin:"0 8",internalListeners:{click:n.onTodayBtnClick,thisObj:n}},rightShiftBtn:{type:"button",weight:350,cls:"b-right-nav-btn",icon:"b-icon b-icon-next",color:"b-blue b-raised",flex:1,internalListeners:{click:n.onRightShiftBtnClick,thisObj:n}}},internalListeners:{paint:n.initDateRangeFields,thisObj:n}}}})}onZoomSliderChange({value:e}){const n=this;n.menu.scrollAction="realign",n.client.zoomLevel=e,n.menu.setTimeout({fn:()=>n.menu.scrollAction="hide",delay:100,cancelOutstanding:!0})}initDateRangeFields({source:e,firstPaint:n}){if(n){const{widgetMap:n}=e;this.startDateField=n.startDateField,this.endDateField=n.endDateField}this.initDates()}initDates(){const e=this;e.startDateField.suspendEvents(),e.endDateField.suspendEvents(),e.startDateField.value=e.startDateFieldInitialValue=e.client.startDate,e.endDateField.value=e.endDateFieldInitialValue=e.client.endDate,e.startDateField.resumeEvents(),e.endDateField.resumeEvents()}onRangeDateFieldChange({source:e}){const n=this,r=e===n.startDateField,{client:i}=n,{timeAxis:o}=i,s=n.startDateFieldInitialValue&&!r?n.startDateFieldInitialValue:n.startDateField.value;let a=n.endDateFieldInitialValue&&r?n.endDateFieldInitialValue:n.endDateField.value;r?n.startDateFieldInitialValue=null:n.endDateFieldInitialValue=null,a-s?a<s&&(a=Ct.add(s,o.shiftIncrement,o.shiftUnit)):a=Ct.add(a,o.shiftIncrement,o.shiftUnit),i.setTimeSpan(s,a,Xf),n.initDates()}onLeftShiftBtnClick(){this.client.timeAxis.shiftPrevious(),this.initDates()}onTodayBtnClick(){const e=Ct.clearTime(new Date);this.client.setTimeSpan(e,Ct.add(e,1,"day")),this.initDates()}onRightShiftBtnClick(){this.client.timeAxis.shiftNext(),this.initDates()}};Zf._$name="TimeAxisHeaderMenu",du.registerFeature(Zf,!0,["Scheduler","Gantt"]),du.registerFeature(Zf,!1,"ResourceHistogram");var Qf=class extends(qm.mixin(AttachToProjectMixin_default)){static get $name(){return"TimeRanges"}static get defaultConfig(){return{store:!0}}doDestroy(){var e;null==(e=this.storeDetacher)||e.call(this),super.doDestroy()}get timeRanges(){const e=this;if(!e._timeRanges){const{store:n}=e;let{records:r}=n;if(n.recurringEvents){const{startDate:n,endDate:i}=e.client.timeAxis;r=r.flatMap((e=>e.isRecurring?e.getOccurrencesForDateRange(n,i):e))}e.currentTimeLine&&(n.recurringEvents||(r=r.slice()),r.push(e.currentTimeLine)),e._timeRanges=r}return e._timeRanges}attachToProject(e){var n,r;super.attachToProject(e);const i=this;null==(n=i.projectTimeZoneChangeDetacher)||n.call(i),i.showCurrentTimeLine&&(i.projectTimeZoneChangeDetacher=null==(r=i.client.project)?void 0:r.ion({timeZoneChange:()=>i.updateCurrentTimeLine()}),i.currentTimeLine&&i.updateCurrentTimeLine())}initCurrentTimeLine(){const e=this;if(e.currentTimeLine||!e.showCurrentTimeLine)return;const n="object"==typeof e.showCurrentTimeLine?e.showCurrentTimeLine:{};e.currentTimeLine=e.store.modelClass.new({id:"currentTime",cls:"b-sch-current-time"},n),e.currentTimeInterval=e.setInterval((()=>e.updateCurrentTimeLine()),e.currentTimeLineUpdateInterval),e._timeRanges=null,e.updateCurrentTimeLine()}updateCurrentTimeLine(){var e;const n=this,{currentTimeLine:r}=n;r.timeZone=null==(e=n.project)?void 0:e.timeZone,r.setLocalDate("startDate",new Date),r.endDate=r.startDate,r.originalData.name||(r.name=Ct.format(r.startDate,n.currentDateFormat)),n.renderRanges()}hideCurrentTimeLine(){const e=this;e.currentTimeLine&&(e.clearInterval(e.currentTimeInterval),e.currentTimeLine=null,e.refresh())}updateShowCurrentTimeLine(e){e?this.initCurrentTimeLine():this.hideCurrentTimeLine()}populateTimeAxisHeaderMenu({column:e,items:n}){n.currentTimeLine={weight:400,text:this.L("L{showCurrentTimeLine}"),checked:this.showCurrentTimeLine,onToggle:({checked:e})=>{this.showCurrentTimeLine=e}}}attachToStore(e){const n=this;let r=!1;n.storeDetacher&&(n.storeDetacher(),r=!0),n.storeDetacher=e.ion({change:"onStoreChange",refresh:"onStoreChange",thisObj:n}),n._timeRanges=null,r&&n.renderRanges()}get store(){return this.client.project.timeRangeStore}updateStore(e){const{client:n}=this,{project:r}=n;e=r.timeRangeStore,this.attachToStore(e),n.timeRanges&&!n._timeRangesExposed&&(e.add(n.timeRanges),delete n.timeRanges)}attachToTimeRangeStore(e){this.store=e}resolveTimeRangeRecord(e){return this.store.getById(e.closest(this.baseSelector).dataset.id)}onStoreChange({type:e,action:n}){const r=this;r._timeRanges=null,r.disabled||!r.client.isVisible||r.isConfiguring||"refresh"===e&&"batch"!==n||r.client.runWithTransition((()=>r.renderRanges()),!r.client.refreshSuspended)}onDragStart(e){const n=this,{context:r}=e,i=n.resolveTimeRangeRecord(r.element.closest(n.baseSelector)),o=n.getBodyElementByRecord(i);r.relatedElements=[o],Object.assign(r,{record:i,rangeBodyEl:o,originRangeX:Gn.getTranslateX(o),originRangeY:Gn.getTranslateY(o)}),super.onDragStart(e),n.showTip(r)}onDrop(e){const{context:n}=e;if(!n.valid)return this.onInvalidDrop({context:n});const r=this,{client:i}=r,{record:o}=n,s=Gt.from(n.rangeBodyEl),a=i.getDateFromCoordinate(s.getStart(i.rtl,i.isHorizontal),"round",!1);o.startDate-a!=0?o.setStartDate(a):r.onInvalidDrop(),r.destroyTip(),super.onDrop(e)}onResizeStart({context:e}){const n=this,r=n.resolveTimeRangeRecord(e.element.closest(n.baseSelector)),i=n.getBodyElementByRecord(r);Object.assign(e,{record:r,rangeBodyEl:i}),n.showTip(e)}onResizeDrag({context:e}){const{rangeBodyEl:n}=e;this.client.isVertical?("top"===e.edge&&Gn.setTranslateY(n,e.newY),n.style.height=e.newHeight+"px"):("left"===e.edge&&Gn.setTranslateX(n,e.newX),n.style.width=e.newWidth+"px")}onResize({context:e}){if(!e.valid)return this.onInvalidDrop({context:e});const n=this,{client:r}=n,{rtl:i}=r,o=e.record,s=Gt.from(e.element),a=s.getStart(i,r.isHorizontal),l=s.getEnd(i,r.isHorizontal),c=r.getDateFromCoordinate(a,"round",!1),d=i&&"right"===e.edge||!i&&"left"===e.edge||"top"===e.edge,u=r.getDateFromCoordinate(l,"round",!1);(d&&o.startDate-c!=0||u&&o.endDate-u!=0)&&u>c?d?o.setStartDate(c,!1):o.setEndDate(u,!1):n.onInvalidResize({context:e}),n.destroyTip()}onInvalidResize({context:e}){const n=this;n.resize.reset(),e.rangeBodyEl.parentElement.lastDomConfig=e.rangeBodyEl.lastDomConfig=null,n.renderRanges(),n.destroyTip()}};__publicField(Qf,"configurable",{store:{modelClass:Gp},currentTimeLineUpdateInterval:1e4,currentDateFormat:"HH:mm",showCurrentTimeLine:!1}),Qf._$name="TimeRanges",du.registerFeature(Qf,!1,["Scheduler","Gantt"]);var Jf=class extends qm{static get configurable(){return{enableResizing:!0,showTooltip:!1,dragTipTemplate:null,cls:"b-selected-time-span",dragHelperConfig:{skipUpdatingElement:!0},resizeHelperConfig:{skipUpdatingElement:!0},headerRenderer({timeRange:e}){const{dateFormat:n}=this.client.timeAxisViewModel.bottomHeader;return`<span class="b-selection-start">${Ct.format(e.startDate,n)}</span>\n                        <span class="b-selection-end">${Ct.format(e.endDate,n)}</span>\n                        <i class='b-icon b-icon-close' data-ref="closeButton" data-btip="L{Popup.close}"></i>`},selectedTimeSpan:null}}onUIReady(){super.onUIReady(),this.client.ion({timeAxisHeaderMouseDown:"onTimeAxisHeaderMouseDown",thisObj:this})}onTimeAxisHeaderMouseDown({startDate:e,endDate:n}){this.disabled||(this.selectedTimeSpan={startDate:e,endDate:n})}onTimeRangeClick(e){super.onTimeRangeClick(e);const n=this;!n.disabled&&e.target.closest(".b-selected-time-span")&&(e.target.matches('[data-ref="closeButton"]')?n.selectedTimeSpan=null:n.client.trigger("timeSelectionElementClick",{...n.selectedTimeSpan,domEvent:e}))}updateFromCoords(e,n,r,i){const{client:o}=this,s=o.isHorizontal?r:i;let a=o.isHorizontal?e:n;o.rtl&&o.isHorizontal&&(a=Math.max(o.timeAxisViewModel.totalSize-a-s,0));const l=o.getDateFromCoord({coord:a,roundingMethod:"round",ignoreRTL:!0}),c=o.getDateFromCoord({coord:a+s,roundingMethod:"round",ignoreRTL:!0});this.selectedTimeSpan={startDate:Ct.max(l,o.startDate),endDate:Ct.min(c,o.endDate)}}onResizeStart({source:e}){const{timeAxisViewModel:n,timeResolution:r}=this.client,i=Ct.asMilliseconds(r.increment,r.unit);this.resize.minWidth=n.getDistanceForDuration(i)}onResizeDrag({context:e}){var n,r;this.updateFromCoords(e.newX,e.newY,null!=(n=e.newWidth)?n:e.elementWidth,null!=(r=e.newHeight)?r:e.elementHeight)}onDragStart(e){super.onDragStart(e);const{context:n}=e;n.elementWidth=n.element.offsetWidth,n.elementHeight=n.element.offsetHeight}onDrag({context:e}){this.updateFromCoords(e.newX,e.newY,e.elementWidth,e.elementHeight)}onDrop(){this.client.element.classList.remove("b-dragging-timerange")}onDragReset(){this.refresh()}get timeRanges(){return this.selectedTimeSpan?[this.selectedTimeSpan]:[]}shouldRenderRange(){return!0}changeSelectedTimeSpan(e){return e&&(e.id="time-selection"),e}updateSelectedTimeSpan(e){this.isConfiguring||this.refresh(),this.client.trigger("timeSelectionChange",{...null!=e?e:{}})}};__publicField(Jf,"$name","TimeSelection"),Jf._$name="TimeSelection",du.registerFeature(Jf,!1,"Scheduler");var eb={completeview:"completeview",currentview:"currentview",daterange:"daterange"},tb=Promise.resolve(),SchedulerExporterMixin_default=e=>class SchedulerExporterMixin extends e{async scrollRowIntoView(e,n){const{rowManager:r,scrollable:i}=e,o=i.y;return n<e.store.count&&(i.scrollTo(null,r.calculateTop(n)),i.y!==o)?new Promise((i=>{const o=e.ion({scroll({scrollTop:e}){null!=e&&r.getRow(n)&&(o(),i())}})})):tb}async scrollToDate(e,n){let r=!1;const i=[],o=e.timeAxisSubGrid.scrollable.ion({scrollStart({x:e}){null!=e&&(r=!0)}});i.push(e.scrollToDate(n,{block:"start"})),o(),r&&i.push(e.timeAxisSubGrid.header.scrollable.await("scrollEnd",{checkLog:!1})),await Promise.all(i)}cloneElement(e,n,r){super.cloneElement(e,n,r);const i=this.element.querySelector(".b-schedulerbase");null==i||i.classList.remove(...["fade-in","slide-from-left","slide-from-top","zoom-in"].map((e=>`b-initial-${e}`)))}async prepareComponent(e){const n=this,{client:r}=e,{currentOrientation:i}=r,o=r.timeAxisSubGrid.width>0;switch(e.scheduleRange){case eb.completeview:e.rangeStart=r.startDate,e.rangeEnd=r.endDate;break;case eb.currentview:{const{startDate:n,endDate:i}=r.visibleDateRange;e.rangeStart=n,e.rangeEnd=i;break}}await r.waitForAnimations(),e.infiniteScroll=r.infiniteScroll,r.infiniteScroll=!1,o&&(r.setTimeSpan(e.rangeStart,e.rangeEnd),r.svgCanvas),n._oldEnableEventAnimations=r.enableEventAnimations,r.enableEventAnimations=!1,i.isHorizontalRendering&&(n._oldScrollBuffer=i.scrollBuffer,n._oldVerticalBuffer=i.verticalBufferSize,i.scrollBuffer=100,i.verticalBufferSize=-1),r.ignoreViewBox=!0,await super.prepareComponent(e);const{exportMeta:s,element:a}=n,l=a.querySelector(".b-sch-foreground-canvas"),c=a.querySelector(".b-horizontaltimeaxis");if(s.includeTimeline=o,o&&e.scheduleRange!==eb.completeview){s.totalWidth-=s.subGrids.normal.width,s.totalWidth+=s.subGrids.normal.width=r.timeAxisViewModel.getDistanceBetweenDates(e.rangeStart,e.rangeEnd);const n=Math.ceil(s.totalWidth/s.pageWidth),i=n*s.verticalPages;s.horizontalPages=n,s.totalPages=i,s.subGrids.normal.scrollLeft=r.getCoordinateFromDate(e.rangeStart)}if(s.timeAxisHeaders=[],s.timeAxisPlaceholders=[],s.headersColleted=!1,Gn.forEachSelector(c,".b-sch-header-row",(e=>{s.timeAxisPlaceholders.push(n.createPlaceholder(e)),s.timeAxisHeaders.push(new Map)})),s.subGrids.normal.eventsPlaceholder=n.createPlaceholder(l,!1),Gn.removeEachSelector(l,".b-sch-event-wrap,.b-sch-resourcetimerange"),Gn.removeEachSelector(n.element,".b-released"),s.eventsBoxes=new Map,s.client=r,r.hasActiveFeature("columnLines")){const e=a.querySelector(".b-column-lines-canvas");s.columnLinesPlaceholder=n.createPlaceholder(e),s.columnLines={lines:new Map,majorLines:new Map}}if(r.hasActiveFeature("timeRanges")){const e=a.querySelector(".b-sch-timeaxiscolumn .b-sch-timeranges-canvas"),r=a.querySelector(".b-sch-foreground-canvas .b-sch-timeranges-canvas");s.timeRanges={},e&&(s.timeRanges.header={},s.timeRangesHeaderPlaceholder=n.createPlaceholder(e)),s.timeRanges.body={},s.timeRangesBodyPlaceholder=n.createPlaceholder(r)}if(r.hasActiveFeature("dependencies")){r.features.dependencies.fillDrawingCache();const e=a.querySelector(`[id="${r.svgCanvas.getAttribute("id")}"]`);e&&(s.dependencyCanvasEl=e,s.dependenciesPlaceholder=n.createPlaceholder(e,!1,{ns:"http://www.w3.org/2000/svg",tag:"path"}),Gn.removeEachSelector(e,".b-sch-dependency"))}o&&!Ct.betweenLesser(e.rangeStart,r.startDate,r.endDate)&&await n.scrollToDate(r,e.rangeStart)}async restoreState(e){let n=!1;const{client:r}=e,i=[],o=r.timeAxisSubGrid.scrollable.ion({scrollStart({x:e}){this.element.scrollLeft!==e&&(n=!0)}});i.push(super.restoreState(e)),o(),n&&i.push(r.timeAxisSubGrid.header.scrollable.await("scrollEnd",{checkLog:!1})),await Promise.all(i)}async restoreComponent(e){const{client:n}=e,{currentOrientation:r}=n;n.ignoreViewBox=!1,n.infiniteScroll=e.infiniteScroll,n.enableEventAnimations=this._oldEnableEventAnimations,r.isHorizontalRendering&&(r.scrollBuffer=this._oldScrollBuffer,r.verticalBufferSize=this._oldVerticalBuffer),await super.restoreComponent(e)}async onRowsCollected(e,n){const r=this;if(await super.onRowsCollected(e,n),r.exportMeta.includeTimeline){const{client:i,enableDirectRendering:o}=n,{timeView:s}=i,{pageRangeStart:a,pageRangeEnd:l}=r.getCurrentPageDateRange(n);if(o)a&&l&&(r.renderHeaders(n,a,l),r.renderLines(n,a,l),r.renderRanges(n,a,l),r.renderEvents(n,e,a,l));else{if(a){let o=!1;for(await r.scrollToDate(i,a);!o;)if(r.collectLines(n),r.collectHeaders(n),r.collectRanges(n),r.collectEvents(e,n),Ct.timeSpanContains(s.startDate,s.endDate,a,l))o=!0;else if(s.endDate.getTime()>=l.getTime())o=!0;else{const e=s.endDate;if(await r.scrollToDate(i,s.endDate),e.getTime()===s.endDate.getTime())throw new Error("Could not scroll to date")}}await r.scrollToDate(i,n.rangeStart)}}}getCurrentPageDateRange({rangeStart:e,rangeEnd:n,enableDirectRendering:r,client:i}){const{exportMeta:o}=this,{horizontalPages:s,horizontalPosition:a,pageWidth:l,subGrids:c}=o;let d,u;if(s>1){const e=a*l,o=(a+1)*l,s=c.locked.width+c.locked.splitterWidth;if(o<=s)u=d=null;else{const{scrollLeft:a=0}=c.normal;d=i.getDateFromCoordinate(Math.max(e-s+a,0));const l=r?1:1.2;u=i.getDateFromCoordinate((o-s+a)*l)||n}}else d=e,u=n;return{pageRangeStart:d,pageRangeEnd:u}}prepareExportElement(){const{element:e,exportMeta:n}=this,{id:r,headerId:i,footerId:o,scrollLeft:s}=n.subGrids.normal,a=e.querySelector(`[id="${r}"]`);return[".b-sch-background-canvas",".b-sch-foreground-canvas"].forEach((e=>{const r=a.querySelector(e);r&&(n.lastExportedRowBottom?r.style.height=`${n.lastExportedRowBottom}px`:r.style.height="",s&&(r.style.marginLeft=`-${s}px`))})),s&&[i,o].forEach((n=>{const r=e.querySelector(`[id="${n}"] .b-widget-scroller`);r&&(r.style.marginLeft=`-${s}px`)})),super.prepareExportElement()}collectHeaders(e){const{client:n}=e,{exportMeta:r}=this;if(!r.headersCollected){const e=n.timeView.element,i=r.timeAxisHeaders;Gn.forEachSelector(e,".b-sch-header-row",((e,o,s)=>{const a=i[o];Gn.forEachSelector(e,".b-sch-header-timeaxis-cell",(e=>{a.has(e.dataset.tickIndex)||a.set(e.dataset.tickIndex,e.outerHTML)})),o===s.length-1&&a.has(String(n.timeAxis.count-1))&&(r.headersCollected=!0)}))}}collectRanges(e){const{client:n}=e,{exportMeta:r}=this,{timeRanges:i}=r;if(!r.headersCollected&&i){const{headerCanvas:e,bodyCanvas:r}=n.features.timeRanges;e&&Gn.forEachSelector(e,".b-sch-timerange",(e=>{i.header[e.dataset.id]=e.outerHTML})),Gn.forEachSelector(r,".b-sch-timerange",(e=>{i.body[e.dataset.id]=e.outerHTML}))}}collectLines(e){const{client:n}=e,{exportMeta:r}=this,{columnLines:i}=r;if(!r.headersCollected&&i){const e=n.backgroundCanvas;Gn.forEachSelector(e,".b-column-line, .b-column-line-major",(e=>{if(e.classList.contains("b-column-line")){const n=Number(e.dataset.line.replace(/line-/,""));i.lines.set(n,e.outerHTML)}else{const n=Number(e.dataset.line.replace(/major-/,""));i.majorLines.set(n,e.outerHTML)}}))}}collectEvents(e,n){const r=e.length,{client:i}=n,o=this.exportMeta.subGrids.normal.rows;e.forEach(((e,n)=>{var s,a;const l=o[o.length-r+n],c=i.store.getAt(e.dataIndex),d=l[3];null==(s=c.events)||s.forEach((e=>{if(e.isScheduled){let n=i.getElementFromEventRecord(e,c);n&&(n=n.parentElement)&&!d.has(e.id)&&d.set(e.id,[n.outerHTML,Gt.from(n,n.offsetParent)])}})),null==(a=c.timeRanges)||a.forEach((e=>{var n;const r=(null==(n=i.features.resourceTimeRanges)?void 0:n.generateElementId(e))||"",o=i.foregroundCanvas.syncIdMap[r];o&&!d.has(r)&&d.set(r,[o.outerHTML,Gt.from(o,o.offsetParent)])}))}))}renderHeaders(e,n,r){const{exportMeta:i}=this,{client:o}=e,s=i.timeAxisHeaders,{timeAxisView:a}=o.timeAxisColumn,l=a.buildCells(n,r),c=document.createElement("div");$o.sync({targetElement:c,domConfig:l}),Gn.forEachSelector(c,".b-sch-header-row",((e,n)=>{const r=s[n];Gn.forEachSelector(e,".b-sch-header-timeaxis-cell",(e=>{r.has(e.dataset.tickIndex)||r.set(e.dataset.tickIndex,e.outerHTML)}))}))}renderEvents(e,n,r,i){const{client:o}=e,s=this.exportMeta.subGrids.normal.rows;n.forEach(((e,n)=>{const a=s[n][3],l=o.store.getAt(e.dataIndex),c=o.currentOrientation.getResourceLayout(l),d=o.getCoordinateFromDate(r),u=o.getCoordinateFromDate(i),h=o.currentOrientation.getEventDOMConfigForCurrentView(c,e,d,u),g=document.createElement("div");h.forEach((e=>{const{eventId:n}=e.dataset,{left:r,top:i,width:o,height:s}=e.style;$o.sync({targetElement:g,domConfig:e}),a.set(n,[g.outerHTML,new Gt(r,i,o,s)])}))}))}renderLines(e,n,r){const{client:i}=e,{exportMeta:o}=this,{columnLines:s}=o;if(s){const e=i.features.columnLines.getColumnLinesDOMConfig(n,r),o=document.createElement("div");$o.sync({targetElement:o,domConfig:{children:e},onlyChildren:!0}),s.lines.set(0,o.innerHTML)}}renderRanges(e,n,r){const{client:i}=e,{exportMeta:o}=this,{timeRanges:s}=o;if(s){const e=i.features.timeRanges.getDOMConfig(n,r),o=document.createElement("div");e.forEach(((e,n)=>{$o.sync({targetElement:o,domConfig:{children:e,onlyChildren:!0}}),0===n?s.body=o.innerHTML:s.header=o.innerHTML}))}}buildPageHtml(e){const n=this,{subGrids:r,timeAxisHeaders:i,timeAxisPlaceholders:o,columnLines:s,columnLinesPlaceholder:a,timeRanges:l,timeRangesHeaderPlaceholder:c,timeRangesBodyPlaceholder:d}=n.exportMeta,{enableDirectRendering:u}=e;let h=n.prepareExportElement();if(Object.values(r).forEach((({placeHolder:r,eventsPlaceholder:i,rows:o,mergedCellsHtml:s})=>{const a=r.outerHTML,{resources:l,events:c}=n.positionRows(o,e);let d=l.join("");(null==s?void 0:s.length)&&(d+=`<div class="b-grid-merged-cells-container">${s.join("")}</div>`),h=h.replace(a,d),i&&(h=h.replace(i.outerHTML,c.join("")))})),i.forEach(((e,n)=>{h=h.replace(o[n].outerHTML,Array.from(e.values()).join(""))})),s){const e=Array.from(s.lines.values()).concat(Array.from(s.majorLines.values()));h=h.replace(a.outerHTML,e.join("")),u&&(n.exportMeta.columnLines.lines.clear(),n.exportMeta.columnLines.majorLines.clear())}return l&&(u?(h=h.replace(d.outerHTML,l.body),c&&(h=h.replace(c.outerHTML,l.header)),n.exportMeta.timeRanges={}):(h=h.replace(d.outerHTML,Object.values(l.body).join("")),c&&(h=h.replace(c.outerHTML,Object.values(l.body).join(""))))),h=n.buildDependenciesHtml(h),h}getEventBox(e){const{eventsBoxes:n,enableDirectRendering:r}=this.exportMeta,i=e&&n.get(String(e.id));return r&&i&&e.isMilestone&&i.translate(-i.width/2,0),i}renderDependencies(){const e=this,{client:n,eventsBoxes:r}=e.exportMeta,{dependencies:i}=n,o=n.features.dependencies,s=Gn.createElement();let a=!1;return i.forEach((n=>{if(!r.has(String(n.from))&&!r.has(String(n.to))||!o.isDependencyVisible(n))return;const i=e.getEventBox(n.fromEvent),s=e.getEventBox(n.toEvent);o.drawDependency(n,!0,{from:null==i?void 0:i.clone(),to:null==s?void 0:s.clone()}),a=!0})),a&&o.domSync(s),s.innerHTML}buildDependenciesHtml(e){const{dependenciesPlaceholder:n,includeTimeline:r}=this.exportMeta;if(n&&r){const r=n.outerHTML;e=e.replace(r,this.renderDependencies())}return e}},nb=class extends(SchedulerExporterMixin_default(ah)){static get $name(){return"MultiPageExporter"}static get type(){return"multipage"}async stateNextPage(e){await super.stateNextPage(e),this.exportMeta.eventsBoxes.clear()}positionRows(e){const n=[],r=[];return e.forEach((([e,i,o,s])=>{n.push(e),s&&Array.from(s.entries()).forEach((([e,[n,i,o=[]]])=>{r.push(n+o.join("")),this.exportMeta.eventsBoxes.set(String(e),i)}))})),{resources:n,events:r}}};nb._$name="MultiPageExporter";var rb=class extends(SchedulerExporterMixin_default(lh)){static get $name(){return"MultiPageVerticalExporter"}static get type(){return"multipagevertical"}async stateNextPage(e){await super.stateNextPage(e),this.exportMeta.eventsBoxes.clear()}async prepareComponent(e){await super.prepareComponent(e),e.scheduleRange!==eb.completeview&&this.estimateTotalPages(e)}positionRows(e){const n=[],r=[];return e.forEach((([e,,,i])=>{n.push(e),i&&Array.from(i.entries()).forEach((([e,[n,i,o=[]]])=>{r.push(n+o.join("")),this.exportMeta.eventsBoxes.set(String(e),i)}))})),{resources:n,events:r}}};rb._$name="MultiPageVerticalExporter";var ib=class extends Mc{static get $name(){return"ScheduleRangeCombo"}static get type(){return"schedulerangecombo"}static get defaultConfig(){return{editable:!1,localizeDisplayFields:!0,displayField:"text",buildItems:()=>Object.entries(eb).map((([e,n])=>({value:e,text:"L{"+n+"}"})))}}};ib.initClass(),ib._$name="ScheduleRangeCombo";var ob=class extends rh{static get $name(){return"SchedulerExportDialog"}static get type(){return"schedulerexportdialog"}static get configurable(){return{defaults:{localeClass:this},items:{scheduleRangeField:{type:"schedulerangecombo",label:"L{Schedule range}",value:"completeview",weight:150,onChange({value:e}){this.parent.widgetMap.rangesContainer.hidden=e!==eb.daterange}},rangesContainer:{type:"container",flex:"1 0 100%",weight:151,hidden:!0,defaults:{localeClass:this},items:{filler:{weight:0,type:"widget"},rangeStartField:{type:"datefield",label:"L{Export from}",labelWidth:"3em",flex:"1 0 25%",weight:10,onChange({value:e}){this.parent.widgetMap.rangeEndField.min=Ct.add(e,1,"d")}},filler2:{type:"widget",weight:20,width:"0.5em"},rangeEndField:{type:"datefield",label:"L{Export to}",labelWidth:"1em",flex:"1 0 25%",weight:30,onChange({value:e}){this.parent.widgetMap.rangeStartField.max=Ct.add(e,-1,"d")}}}}}}}onLocaleChange(){const e=this.L("labelWidth");this.width=this.L("L{width}"),this.items.forEach((n=>{n instanceof Cc?n.labelWidth=e:"rangesContainer"===n.ref&&(n.items[0].width=e)}))}applyInitialValues(e){super.applyInitialValues(e);const{client:n,scheduleRange:r}=e,i=e.items=e.items||{},o=i.scheduleRangeField=i.scheduleRangeField||{},s=i.rangesContainer=i.rangesContainer||{},a=s.items=s.items||{},l=a.filler=a.filler||{},c=a.rangeStartField=a.rangeStartField||{},d=a.rangeEndField=a.rangeEndField||{};l.width=this.L("labelWidth"),o.value=o.value||r,o.value===eb.daterange&&(s.hidden=!1);const u=c.value=c.value||n.startDate;c.max=Ct.max(n.startDate,Ct.add(n.endDate,-1,"d"));let h=d.value||n.endDate;h<=u&&(h=Ct.add(u,1,"d")),d.value=h,d.min=Ct.min(n.endDate,Ct.add(n.startDate,1,"d"))}};ob._$name="SchedulerExportDialog";var sb=class extends(SchedulerExporterMixin_default(ch)){static get $name(){return"SinglePageExporter"}static get type(){return"singlepage"}collectDependencies(){}positionRows(e,n){const r=[],i=[],o=/translate\((\d+.?\d*)px, (\d+.?\d*)px\)/,s=/top:.+?px/;if(n.enableDirectRendering)e.forEach((([e,,,n])=>{r.push(e),n&&Array.from(n.entries()).forEach((([e,[n,r,o=[]]])=>{this.exportMeta.eventsBoxes.set(String(e),r),i.push(n+o.join(""))}))}));else{let n=0;e.forEach((([e,a,l,c])=>{r.push(e.replace(o,`translate($1px, ${n}px)`));const d=n-a;c&&Array.from(c.entries()).forEach((([e,[n,r]])=>{r.translate(0,d),this.exportMeta.eventsBoxes.set(String(e),r),i.push(n.replace(s,`top: ${r.y}px`))})),n+=l}))}return{resources:r,events:i}}};sb._$name="SinglePageExporter";var ab=class extends dh{static get $name(){return"PdfExport"}static get defaultConfig(){return{exporters:[sb,nb,rb],dialogClass:ob,scheduleRange:"completeview",rangeStart:null,rangeEnd:null}}get defaultExportDialogConfig(){return Et.copyProperties(super.defaultExportDialogConfig,this,["scheduleRange"])}buildExportConfig(e){e=super.buildExportConfig(e);const{scheduleRange:n,rangeStart:r,rangeEnd:i}=this;return e.columns&&!e.columns.find((e=>"timeAxis"===e.type))&&e.columns.push(e.client.timeAxisColumn.id),Et.assign({scheduleRange:n,rangeStart:r,rangeEnd:i},e)}};ab._$name="PdfExport",du.registerFeature(ab,!1,"Scheduler");var lb=class extends(Events_default()){static get defaultConfig(){return{timeAxis:null,availableSpace:null,tickSize:100,snap:!1,forceFit:!1,headers:null,mode:"horizontal",suppressFit:!1,columnConfig:[],viewPreset:null,columnLinesFor:null,originalTickSize:null,headersDatesCache:[]}}construct(e){const n=this;n.unitToPixelsCache={},super.construct(e);const r=n.timeAxis.viewPreset||n.viewPreset;if(r)if(r instanceof xm)n.consumeViewPreset(r);else{const e=Em.getPreset(r);e&&n.consumeViewPreset(e)}n.timeAxis.ion({reconfigure:"onTimeAxisReconfigure",thisObj:n}),n.configured=!0}doDestroy(){this.timeAxis.un("reconfigure",this.onTimeAxisReconfigure,this),super.doDestroy()}calculateInfiniteScrollingDateRange(e,n,r=this.viewPreset){const{timeAxis:i,availableSpace:o}=this,{bufferCoef:s}=this.owner,{leafUnit:a,leafIncrement:l,topUnit:c,topIncrement:d,tickSize:u}=r,h=a===c&&Math.round(d)===d&&Math.round(l)===l,g=h?d:l,p=h?c:a;if(n){const n=Math.ceil((o*s+o/2)/u);return{startDate:i.floorDate(Ct.add(e,-n*l,a),!1,p,g),endDate:i.ceilDate(Ct.add(e,n*l,a),!1,p,g)}}{const n=Math.ceil(o*s/u);return{startDate:i.floorDate(Ct.add(e,-n*l,a),!1,p,g),endDate:i.ceilDate(Ct.add(e,Math.ceil((o/u+n)*l),a),!1,p,g)}}}get columnConfig(){return this._columnConfig}set columnConfig(e){this._columnConfig=e}get headers(){return this._headers}set headers(e){if(e&&e.length&&e[e.length-1].cellGenerator)throw new Error("`cellGenerator` cannot be used for the bottom level of your headers. Use TimeAxis#generateTicks() instead.");this._headers=e}get isTimeAxisViewModel(){return!0}get isHorizontal(){return"vertical"!==this.mode}get isVertical(){return"vertical"===this.mode}set forceFit(e){e!==this._forceFit&&(this._forceFit=e,this.update())}reconfigure(e){this.headers=null,this.setConfig(e),this.trigger("reconfigure")}onTimeAxisReconfigure({source:e,suppressRefresh:n}){this.viewPreset!==e.viewPreset&&this.consumeViewPreset(e.viewPreset),!n&&e.count>0&&this.update()}update(e,n=!1,r=!1){const i=this,{timeAxis:o,headers:s}=i,a=0!==e;if(i.isConfiguring||a&&i._availableSpace===e)return void(r&&i.trigger("update"));if(i._availableSpace=Math.max(e||i.availableSpace||0,0),"number"!=typeof i.availableSpace)throw new Error("Invalid available space provided to TimeAxisModel");i.columnConfig=[];const l=i._tickSize=i.calculateTickSize(i.originalTickSize);if("number"!=typeof l||l<=0)throw new Error("Invalid timeAxis tick size");i.unitToPixelsCache={},i._totalSize=null;for(let e=0,{length:n}=s;e<n;e++){const n=s[e];if(n.cellGenerator){const r=n.cellGenerator.call(i,o.startDate,o.endDate);i.columnConfig[e]=i.createHeaderRow(e,n,r)}else i.columnConfig[e]=i.createHeaderRow(e,n)}n||i.trigger("update")}getDistanceBetweenDates(e,n){return this.getPositionFromDate(n)-this.getPositionFromDate(e)}getDistanceForDuration(e){return this.getSingleUnitInPixels("millisecond")*e}getPositionFromDate(e,n={}){const r=this.getScaledTick(e,n);return-1===r?-1:this.tickSize*(r-this.timeAxis.visibleTickStart)}getScaledTick(e,{respectExclusion:n,snapToNextIncluded:r,isEnd:i,min:o,max:s}){const{timeAxis:a}=this,{include:l,unit:c}=a;let d=a.getTickFromDate(e);if(-1!==d&&n&&l){let n=!1;if(l.hour&&Ct.compareUnits(c,"hour")>0&&"day"!==c){const{from:i,to:o,lengthFactor:s,center:a}=l.hour,c=e.getHours(),d=Math.min(Math.max(c,i),o);if(!r&&d!==c)return-1;const u=a-(a-(d+e.getMinutes()/60))*s;e=Ct.add(e,u-c,"h"),n=!0}if(l.day&&Ct.compareUnits(c,"day")>0){const{from:c,to:d,lengthFactor:u,center:h}=l.day;let g=e.getDay();i&&0===e.getHours()&&0===e.getMinutes()&&0===e.getSeconds()&&0===e.getMilliseconds()&&--g<0&&(g=6);let p=0;if(g<c||g>=d){if(!r)return-1;if(p=i?(d-g-8)%7:(c-g+7)%7,e=Ct.add(e,p,"d"),e=Ct.startOf(e,"d",!1),s&&e.getTime()>=s||o&&e.getTime()<=o)return-1}const{weekStartDay:m}=a,f=0===e.getDay()?0:h,b=e.getDay()+e.getHours()/24,v=f-(f-b)*u;e=Ct.add(e,v-b+m,"d"),n=!0}n&&(e=Ct.constrain(e,a.startDate,a.endDate),d=a.getTickFromDate(e))}return d}getDateFromPosition(e,n,r=!1){const i=this,{timeAxis:o}=i,s=i.getScaledPosition(e)/i.tickSize+o.visibleTickStart;if(s<0||s>o.count){if(r){let e;return e=s<0?Ct.add(o.startDate,s,o.unit):Ct.add(o.endDate,s-o.count,o.unit),n&&(e=o[n+"Date"](e)),e}return null}return o.getDateFromTick(s,n)}getScaledPosition(e){const{include:n,unit:r,weekStartDay:i}=this.timeAxis;if(n){const o=this.getSingleUnitInPixels("day");if(n.day&&Ct.compareUnits(r,"day")>0){const{from:r,lengthFactor:s}=n.day,a=e%(7*o);e=a/s+(r-i)*o+(e-a)}if(n.hour&&Ct.compareUnits(r,"hour")>0&&"day"!==r){const{from:r,lengthFactorExcl:i}=n.hour,s=e%o;e=s/i+r*this.getSingleUnitInPixels("hour")+(e-s)}}return e}getSingleUnitInPixels(e){const n=this;return n.unitToPixelsCache[e]||(n.unitToPixelsCache[e]=Ct.getUnitToBaseUnitRatio(n.timeAxis.unit,e,!0)*n.tickSize/n.timeAxis.increment)}get snapPixelAmount(){if(this.snap){const{resolution:e}=this.timeAxis;return(e.increment||1)*this.getSingleUnitInPixels(e.unit)}return 1}get tickSize(){return this._tickSize}set tickSize(e){this.setTickSize(e,!1)}setTickSize(e,n){this._tickSize=this.originalTickSize=e,this.update(void 0,n)}get timeResolution(){return this.timeAxis.resolution}calculateTickSize(e){const n=this,{forceFit:r,timeAxis:i,suppressFit:o}=n,s=i.unit;let a=0,l=1;if(n.snap){const e=i.resolution;l=Ct.getUnitToBaseUnitRatio(s,e.unit)*e.increment}if(o)a=e;else{const o=n.availableSpace/i.visibleTickTimeSpan;a=r||e<o?o:e,l>0&&(!r||l<1)&&(a=Math.max(1,l*a)/l)}return a}get totalSize(){return this._totalSize||(this._totalSize=Math.floor(this.tickSize*this.timeAxis.visibleTickTimeSpan))}get availableSpace(){return this._availableSpace}set availableSpace(e){const n=this;if(n._availableSpace=Math.max(0,e),n._availableSpace>0){const e=n.calculateTickSize(n.originalTickSize);e>0&&e!==n.tickSize&&n.update()}}getDates(e=this.columnLinesFor,n=!1,r=!1){const i=this,o=[],s=n?i.lowestHeader:e,a=i.majorHeaderLevel,l=i.headers&&i.headers[e].unit,c=null!=a&&i.headers&&i.headers[a].unit,d=null!=a&&Ct.doesUnitsAlign(c,l);if(!(!i.headers||!i.headers[s].cellGenerator)){const e=i.columnConfig[s];for(let n=1,r=e.length;n<r;n++)o.push({date:e[n].startDate})}else i.forEachInterval(s,((n,s)=>{o.push({date:r?s:n,isMajor:a!==e&&d&&i.isMajorTick(r?s:n)})}));return o}get forceFit(){return this._forceFit}fitToAvailableSpace(e){const n=Math.floor(this.availableSpace/this.timeAxis.visibleTickTimeSpan);this.setTickSize(n,e)}get snap(){return this._snap}set snap(e){e!==this._snap&&(this._snap=e,this.configured&&this.update())}createHeaderRow(e,n,r){const i=this,o=[],{align:s,headerCellCls:a=""}=n,l=Ct.clearTime(new Date),{timeAxis:c}=i,d=i.headers.length-1,createCellContext=(r,h,g,p,m)=>{let f=Ct.format(r,n.dateFormat);const b=g>0&&!p,v={align:s,start:r,end:h,value:m?m.header:f,headerCellCls:a,width:d===e&&i.owner&&(c.fullTicks||b)?i.owner.tickSize:i.getDistanceBetweenDates(r,h),index:g};0!==v.width&&(v.coord=u-1,u+=v.width,i.headersDatesCache[e][r.getTime()]=1,n.renderer&&(f=n.renderer.call(n.thisObj||i,r,h,v,g),v.value=null==f?"":f),"day"!==n.unit||n.increment&&1!==n.increment||(v.headerCellCls+=" b-sch-dayheadercell-"+r.getDay(),Ct.clearTime(r,!0)-l==0&&(v.headerCellCls+=" b-sch-dayheadercell-today")),o.push(v))};let u=0;return i.headersDatesCache[e]={},r?r.forEach(((e,n)=>createCellContext(e.start,e.end,n,n===r.length-1,e))):i.forEachInterval(e,createCellContext),o}get mainHeader(){return"mainHeaderLevel"in this?this.headers[this.mainHeaderLevel]:this.bottomHeader}get bottomHeader(){return this.headers[this.headers.length-1]}get lowestHeader(){return this.headers.length-1}get majorHeaderLevel(){const{headers:e}=this;return e?Math.max(e.length-2,0):null}isMajorTick(e){const n=this.majorHeaderLevel;return null!=n&&this.headersDatesCache[n]&&this.headersDatesCache[n][e.getTime()]||!1}forEachInterval(e,n,r=this){const{headers:i,timeAxis:o}=this;if(i)if(e===i.length-1)o.forEach(((e,i)=>n.call(r,e.startDate,e.endDate,i,i===o.count-1)));else{const s=i[e];o.forEachAuxInterval(s.unit,s.increment,n,r)}}forEachMainInterval(e,n){this.forEachInterval(this.mainHeaderLevel,e,n)}consumeViewPreset(e){const n=this;n.headers=null,n.getConfig("tickSize"),n.viewPreset=e,Object.assign(n,{headers:e.headers,columnLinesFor:e.columnLinesFor,mainHeaderLevel:e.mainHeaderLevel,_tickSize:n.isHorizontal?e.tickWidth:e.tickHeight}),n.originalTickSize=n.tickSize}};lb._$name="TimeAxisViewModel";var cb=new Date,TimelineDateMapper_default=e=>{var n;return __publicField(n=class extends(e||re){getRtlX(e){return this.rtl&&this.isHorizontal&&(e=this.timeAxisViewModel.totalSize-e),e}getDateFromCoordinate(e,n,r=!0,i=!1,o=!1){return r||(e=this.currentOrientation.translateToScheduleCoordinate(e)),o||(e=this.getRtlX(e)),this.timeAxisViewModel.getDateFromPosition(e,n,i)}getDateFromCoord(e){return this.getDateFromCoordinate(e.coord,e.roundingMethod,e.local,e.allowOutOfRange,e.ignoreRTL)}getDateFromXY(e,n,r=!0,i=!1){return this.currentOrientation.getDateFromXY(e,n,r,i)}getDateFromDomEvent(e,n,r=!1){return this.getDateFromXY([e.pageX,e.pageY],n,!1,r)}getStartEndDatesFromRectangle(e,n,r,i=!1){const o=this,{isHorizontal:s}=o,a=s?e.x:e.top,l=s?e.right:e.bottom;let c,d;return a>=0&&l<o.timeAxisViewModel.totalSize?(c=o.getDateFromCoordinate(a,n,!0),d=o.getDateFromCoordinate(l,n,!0)):a<0?(d=o.getDateFromCoordinate(l,n,!0,i),c=d&&Ct.add(d,-r,"ms")):(c=o.getDateFromCoordinate(a,n,!0,i),d=c&&Ct.add(c,r,"ms")),{start:c,end:d}}getDisplayEndDate(e,n){return 0!==e.getHours()||0!==e.getMinutes()||n&&e.getYear()===n.getYear()&&e.getMonth()===n.getMonth()&&e.getDate()===n.getDate()||Ct.formatContainsHourInfo(this.displayDateFormat)||(e=Ct.add(e,-1,"day")),e}getFormattedEndDate(e,n){return this.getFormattedDate(this.getDisplayEndDate(e,n))}getCoordinateFromDate(e,n=!0){const r=this,{timeAxisViewModel:i}=r,{isContinuous:o,startMS:s,endMS:a,startDate:l,endDate:c,unit:d}=r.timeAxis,u=e.valueOf();let h;if(!0===n?n={local:!0}:n?"local"in n||(n.local=!0):n={local:!1},e instanceof Date||(cb.setTime(e),e=cb),o&&e.getTimezoneOffset()===l.getTimezoneOffset()&&l.getTimezoneOffset()===c.getTimezoneOffset()&&-1!==Ct.getUnitToBaseUnitRatio(d,"day")){if(u<s||u>a)return-1;h=(u-s)/(a-s)*i.totalSize}else h=i.getPositionFromDate(e,n);return r.rtl&&r.isHorizontal&&(h=i.totalSize-h),n.local||(h=r.currentOrientation.translateToPageCoordinate(h)),h}getTimeSpanDistance(e,n){return this.timeAxisViewModel.getDistanceBetweenDates(e,n)}get viewportCenterDate(){const{timeAxis:e,timelineScroller:n}=this;if(e.isContinuous){const r=(n.position+n.clientSize/2)/n.scrollSize;return new Date(e.startMS+(e.endMS-e.startMS)*r)}return this.getDateFromCoordinate(n.position+n.clientSize/2)}get viewportCenterDateCached(){return this.cachedCenterDate||(this.cachedCenterDate=this.viewportCenterDate)}get timeResolution(){return this.timeAxis.resolution}set timeResolution(e){this.timeAxis.resolution="number"==typeof e?{increment:e,unit:this.timeAxis.resolution.unit}:e}get snap(){var e,n;return null!=(n=null==(e=this._timeAxisViewModel)?void 0:e.snap)?n:this._snap}updateSnap(e){this.isConfiguring||(this.timeAxisViewModel.snap=e,this.timeAxis.forceFullTicks=e&&this.fillTicks)}onSchedulerHorizontalScroll({subGrid:e,scrollLeft:n,scrollX:r}){this.scrollingToCenter||(this.cachedCenterDate=null)}get widgetClass(){}},"$name","TimelineDateMapper"),__publicField(n,"configurable",{snap:!1}),n},{eventNameMap:db}=cn,TimelineDomEvents_default=e=>{var n;return n=class extends(e||re){constructor(){super(...arguments),__publicField(this,"hoveredEvents",new Set)}initDomEvents(){const e=this,{schedulerEvents:n,schedulerEnterLeaveEvents:r}=e;n.element=r.element=e.timeAxisSubGridElement,n.thisObj=r.thisObj=e,cn.on(n),cn.on(r),c.supportsPointerEventConstructor&&cn.on({element:document,scroll:"onScheduleScroll",capture:!0,thisObj:e})}getTimeSpanMouseEventParams(e,n){throw new Error("Implement in subclass")}getScheduleMouseEventParams(e,n){throw new Error("Implement in subclass")}handleScheduleEvent(e){const n=this,r=n.getTimelineEventContext(e);n.lastPointerEvent=e,r&&n.trigger(`${r.eventElement?n.scheduledEventName:"schedule"}${db[e.type]||w.capitalize(e.type)}`,r),n.timelineContext=r}handleScheduleEnterLeaveEvent(e){e.target.parentElement===this.foregroundCanvas&&this.handleScheduleEvent(e)}onScheduleScroll({target:e}){var n,r,i,o,s;const a=this;if(e&&a.updateTimelineContextOnScroll&&!(null==(n=a.features.pan)?void 0:n.isActive)&&!a.partners.some((e=>{var n;return null==(n=e.features.pan)?void 0:n.isActive}))&&(e.contains(a.element)||a.bodyElement.contains(e))){const{timelineContext:e,lastPointerEvent:n}=a;if(e){const a=Gn.elementFromPoint(e.domEvent.clientX,e.domEvent.clientY),l=new c.PointerEventConstructor("pointermove",n),d=new MouseEvent("mousemove",n);Object.defineProperty(l,"pointerId",{value:null!=(s=null!=(o=null==(r=or.currentPointerDown)?void 0:r.pointerId)?o:null==(i=or.currentTouch)?void 0:i.identifier)?s:1}),l.scrollInitiated=d.scrollInitiated=!0,null==a||a.dispatchEvent(l),null==a||a.dispatchEvent(d)}}}updateTimelineContext(e,n){this.trigger("timelineContextChange",{oldContext:n,context:e}),e||this.trigger("scheduleMouseLeave")}getTimelineEventContext(e){const n=this,r=e.target.closest(n.eventInnerSelector),i=n.getCellElementFromDomEvent(e);if(i){const o=n.getDateFromDomEvent(e,"floor");if(!o)return;const s=Si.get(i),a=r?n.getTimeSpanMouseEventParams(r,e):n.getScheduleMouseEventParams(s,e);if(!a)return;const l=n.isVertical?n.resourceStore.indexOf(a.resourceRecord):s.row.dataIndex,c=n.timeAxis.getTickFromDate(o),d=n.timeAxis.getAt(Math.floor(c));if(d)return{isTimelineContext:!0,domEvent:e,eventElement:r,cellElement:i,index:l,tick:d,tickIndex:c,date:o,tickStartDate:d.startDate,tickEndDate:d.endDate,tickParentIndex:d.parentIndex,row:s.row,event:e,...a}}}getCellElementFromDomEvent({target:e,clientY:n,type:r}){var i;const o=this,{isVertical:s,foregroundCanvas:a}=o,l=e.closest(o.eventSelector);return l?o.getCell({[s?"row":"record"]:s?0:o.resolveRowRecord(l),column:o.timeAxisColumn}):a.contains(e)?e===a||"mousemove"===r?null==(i=o.rowManager.getRowAt(n,!1))?void 0:i.getCell(o.timeAxisColumn.id):void 0:e.matches(".b-grid-row")?e.firstElementChild:e.closest(o.timeCellSelector)}matchScheduleCell(e){return e.closest(this.timeCellSelector)}onElementMouseButtonEvent(e){const n=e.target.closest(".b-sch-header-timeaxis-cell");if(n){const r=this,i=n.parentElement.dataset.headerPosition,o=r.timeAxisViewModel.columnConfig[i],s=r.timeAxis.isFiltered?o.findIndex((e=>e.index==n.dataset.tickIndex)):n.dataset.tickIndex,a=o[s],l=r.features.contextMenu;l&&e.type===l.triggerEvent||this.trigger(`timeAxisHeader${w.capitalize(e.type)}`,{startDate:a.start,endDate:a.end,event:e})}}onElementMouseDown(e){this.onElementMouseButtonEvent(e),super.onElementMouseDown(e)}onElementClick(e){this.onElementMouseButtonEvent(e),super.onElementClick(e)}onElementDblClick(e){this.onElementMouseButtonEvent(e),super.onElementDblClick(e)}onElementContextMenu(e){this.onElementMouseButtonEvent(e),super.onElementContextMenu(e)}onElementMouseOver(e){var n;super.onElementMouseOver(e);const r=this,{target:i}=e,{hoveredEvents:o}=r;if(i.closest(r.eventInnerSelector)&&!(null==(n=r.features.eventDrag)?void 0:n.isDragging)){const n=i.closest(r.eventSelector);if(!o.has(n)&&!r.preventOverCls){o.add(n),n.classList.add(r.overScheduledEventClass);const i=r.getTimeSpanMouseEventParams(n,e);i&&r.trigger(`${r.scheduledEventName}MouseEnter`,i)}}else o.size&&r.unhoverAll(e)}onElementMouseOut(e){var n;super.onElementMouseOut(e);const r=this,{target:i,relatedTarget:o}=e,s=i.closest(r.eventInnerSelector),a=i.closest(r.eventSelector),l=r.resolveTimeSpanRecord(i);if(s&&l&&r.hoveredEvents.has(a)&&!(null==(n=r.features.eventDrag)?void 0:n.isDragging)){if(o&&Gn.isDescendant(s,o))return;r.unhover(a,e)}}unhover(e,n){const r=this;e.classList.remove(r.overScheduledEventClass),r.trigger(`${r.scheduledEventName}MouseLeave`,r.getTimeSpanMouseEventParams(e,n)),r.hoveredEvents.delete(e)}unhoverAll(e){for(const n of this.hoveredEvents)!n.isReleased&&!n.classList.contains("b-released")&&this.unhover(n,e);this.hoveredEvents.clear()}get widgetClass(){}},__publicField(n,"$name","TimelineDomEvents"),__publicField(n,"configurable",{timelineContext:{$config:{equal:(e,n)=>(null==e?void 0:e.index)===(null==n?void 0:n.index)&&(null==e?void 0:e.tickParentIndex)===(null==n?void 0:n.tickParentIndex)&&!(((null==e?void 0:e.tickStartDate)||0)-((null==n?void 0:n.tickStartDate)||0))}},updateTimelineContextOnScroll:!0}),__publicField(n,"properties",{schedulerEvents:{pointermove:"handleScheduleEvent",mouseover:"handleScheduleEvent",mousedown:"handleScheduleEvent",mouseup:"handleScheduleEvent",click:"handleScheduleEvent",dblclick:"handleScheduleEvent",contextmenu:"handleScheduleEvent",mousemove:"handleScheduleEvent",mouseout:"handleScheduleEvent"},schedulerEnterLeaveEvents:{mouseenter:"handleScheduleEnterLeaveEvent",mouseleave:"handleScheduleEnterLeaveEvent",capture:!0}}),__publicField(n,"delayable",{onScheduleScroll:"raf"}),n},datesDiffer=(e=0,n=0)=>n-e,TimelineViewPresets_default=e=>class TimelineViewPresets extends(e||re){static get $name(){return"TimelineViewPresets"}static get configurable(){return{viewPreset:"weekAndDayLetter",presets:!0,displayDateFormat:null}}changePresets(e){const n={owner:this};let r=[];if(!0===e)r=Em.allRecords;else if(Array.isArray(e))for(const n of e)if("string"==typeof n){const e=Em.getById(n);e&&r.push(e)}else r.push(n);else Et.assign(n,e);const i=new Dm(n);return i.add(r),i}changeViewPreset(e,n){const r=this,{presets:i}=r;e?(e=i.createRecord(e),i.includes(e)||i.add(e)):e=i.first;const o=r.lastViewPresetOptions||{},s=e.options||(e.options={}),a=s.event={startDate:s.startDate,endDate:s.endDate,from:n,to:e,preset:e},l=!r._viewPreset||!r._viewPreset.equals(e),c=datesDiffer(s.startDate,o.startDate)||datesDiffer(s.endDate,o.endDate)||datesDiffer(s.centerDate,o.centerDate)||s.startDate&&datesDiffer(s.startDate,r.startDate)||s.endDate&&datesDiffer(s.endDate,r.endDate);if((l||c)&&(l||(r._viewPreset=null),r.isConfiguring||!1!==r.trigger("beforePresetChange",a)))return e}get displayDateFormat(){return this._displayDateFormat||this.viewPreset.displayDateFormat}updateDisplayDateFormat(e){this.trigger("displayDateFormatChange",{format:e})}getFormattedDate(e){return Ct.format(e,this.displayDateFormat)}updateViewPreset(e){const n=this,{options:r}=e,{event:i,startDate:o,endDate:s}=r,{isHorizontal:a,_timeAxis:l,_timeAxisViewModel:c}=n,d=a&&n.rtl;let{centerDate:u,zoomDate:h,zoomPosition:g}=r,p=!1;if(delete e.options,n._viewPresetChanging=!0,l&&!n.isConfiguring){const{timelineScroller:m}=n;if(n.lastViewPresetOptions=r,l.isConfigured){n.suspendRefresh();const r=Et.copyProperties({},n,["weekStartDay","startTime","endTime"]);n.infiniteScroll?Object.assign(r,c.calculateInfiniteScrollingDateRange(u||new Date((o.getTime()+s.getTime())/2),!0,e)):o?(r.startDate=o,r.endDate=s,!u&&s&&(u=new Date((o.getTime()+s.getTime())/2))):(r.startDate=l.startDate,r.endDate=s||l.endDate,u||(u=n.viewportCenterDate)),l.isConfigured=!1,r.viewPreset=e,l.reconfigure(r,!0),c.reconfigure({viewPreset:e,headers:e.headers,columnLinesFor:null!=e.columnLinesFor?e.columnLinesFor:e.headers.length-1,tickSize:a?e.tickWidth:e.tickHeight||e.tickWidth||60}),n.resumeRefresh(!1)}if(n.refresh(),!r.notScroll&&n.isPainted)if(r.visibleDate)n.visibleDate=r.visibleDate;else if(h&&g){const e=bt[l.resolutionUnit]>3?"hour":"minute",o=Ct.asMilliseconds("minute"===e?15:1,e),s=new Date(Math.round(h/o)*o);i.zoomDate=h,i.zoomPosition=g,i.zoomLevel=r.zoomLevel,m.position=d?m.scrollWidth-(n.getCoordinateFromDate(s)+g):n.getCoordinateFromDate(s)-g}else if(u){n.cachedCenterDate=u,i.centerDate=u;const e=n.timelineScroller.clientSize,r=d?n.timeAxisViewModel.totalSize-n.getCoordinateFromDate(u,!0):n.getCoordinateFromDate(u,!0),o=Math.max(r-e/2,0);n.scrollingToCenter=!0,o===(n.isHorizontal?n.scrollLeft:n.scrollTop)?p=!0:n.isHorizontal?n.scrollHorizontallyTo(o,!1):n.scrollVerticallyTo(o,!1),n.setTimeout((()=>{n.scrollingToCenter=!1}),100)}else 0===(n.isHorizontal?n.scrollLeft:n.scrollTop)?p=!0:n.timelineScroller.scrollTo(0)}n.dataset.presetId=e.id,n.trigger("presetChange",i),n._viewPresetChanging=!1,p&&(n.isHorizontal?n.currentOrientation.updateFromHorizontalScroll(n.scrollLeft,n.scrollX):n.currentOrientation.updateFromVerticalScroll(n.scrollTop))}doDestroy(){this._presets.owner===this&&this._presets.destroy(),super.doDestroy()}getCurrentConfig(e){const n=super.getCurrentConfig(e);return n.viewPreset&&n.viewPreset.name&&!n.viewPreset.base&&delete n.viewPreset.name,n}get widgetClass(){}},TimelineZoomable_default=e=>{var n;return n=class extends(e||re){constructor(){super(...arguments),__publicField(this,"lastWheelTime",-1),__publicField(this,"lastZoomPosition",-1)}construct(e){const n=this;super.construct(e),n.zoomOnMouseWheel&&cn.on({element:n.timeAxisSubGridElement,wheel:"onWheel",throttled:{buffer:100,alt:e=>e.ctrlKey&&e.preventDefault()},thisObj:n,capture:!0,passive:!1}),n.zoomOnTimeAxisDoubleClick&&n.ion({timeaxisheaderdblclick:({startDate:e,endDate:r})=>{n.forceFit||n.zoomToSpan({startDate:e,endDate:r})}})}get maxZoomLevel(){return this._maxZoomLevel||this.presets.count-1}set maxZoomLevel(e){if("number"!=typeof e&&(e=this.presets.count-1),e<0||e>=this.presets.count)throw new Error("Invalid range for `maxZoomLevel`");this._maxZoomLevel=e}get minZoomLevel(){return this._minZoomLevel}set minZoomLevel(e){if("number"!=typeof e&&(e=0),e<0||e>=this.presets.count)throw new Error("Invalid range for `minZoomLevel`");this._minZoomLevel=e}get zoomLevel(){return this.presets.indexOf(this.viewPreset)}set zoomLevel(e){this.zoomToLevel(e)}getMilliSecondsPerPixelForZoomLevel(e,n){const{bottomHeader:r}=e,i=this.isHorizontal?e.tickWidth:e.tickHeight;return Math.round((Ct.add(new Date(1,0,1),r.increment||1,r.unit)-new Date(1,0,1))/(n?i:e.actualWidth||i))}zoomTo(e){const n=this;"object"==typeof e?e.preset?n.zoomToLevel(e.preset,e):null!=e.level?n.zoomToLevel(e.level,e):n.zoomToSpan(e):n.zoomToLevel(e)}zoomToLevel(e,n={}){if(this.forceFit)return void console.warn("Warning: The forceFit setting and zooming cannot be combined");"number"==typeof e&&(e=Math.min(Math.max(e,this.minZoomLevel),this.maxZoomLevel));const r=this,{presets:i}=r,o=r.isVertical?"tickHeight":"tickWidth",s=i.createRecord(e),a=s[o],l=n.startDate?new Date(n.startDate):null,c=n.endDate?new Date(n.endDate):null;i.add(s);let d=l&&c?{startDate:l,endDate:c}:null;const u=n.centerDate?new Date(n.centerDate):d?new Date((l.getTime()+c.getTime())/2):r.viewportCenterDateCached;let h=r.isVertical?r.scrollable.clientHeight:r.timeAxisSubGrid.width;if(0===h){const{_beforeCollapseState:e}=r.timeAxisSubGrid;if(!(r.isHorizontal&&r.timeAxisSubGrid.collapsed&&(null==e?void 0:e.width)))return null;h=e.width}return d||(d=r.calculateOptimalDateRange(u,h,s)),"width"in n&&s.setData(o,n.width),r.isZooming=!0,s.options={...n,startDate:d.startDate||r.startDate,endDate:d.endDate||r.endDate,centerDate:u},r.viewPreset=s,s.actualWidth=r.timeAxisViewModel.tickSize,r.isZooming=!1,s.setData(o,a),r.zoomLevel}zoomToFit(e){const n=this.eventStore.getTotalTimeSpan();(e={leftMargin:0,rightMargin:0,...e,...n}).startDate&&e.endDate&&(e.endDate>e.startDate?this.zoomToSpan(e):this.scrollToDate(e.startDate))}zoomToSpan(e={}){if((e.leftMargin||e.rightMargin)&&(e.adjustStart=0,e.adjustEnd=0),e.leftMargin||(e.leftMargin=0),e.rightMargin||(e.rightMargin=0),!e.startDate||!e.endDate)throw new Error("zoomToSpan: must provide startDate + endDate dates");const n=this,{timeAxis:r}=n,i=e.adjustStart>=0||e.adjustEnd>=0;let{startDate:o,endDate:s}=e;if(i&&(o=Ct.add(o,-e.adjustStart,r.mainUnit),s=Ct.add(s,e.adjustEnd,r.mainUnit)),o<=s){const{availableSpace:a}=n.timeAxisViewModel,l=n.presets.allRecords,c=s-o||1;let d,u,h=n.zoomLevel;-1===h&&(h=0);let g,p=n.getMilliSecondsPerPixelForZoomLevel(l[h],!0),m=h+(d=c/p+e.leftMargin+e.rightMargin>a?-1:1),f=null;for(;m>=0&&m<=l.length-1;){g=l[m],p=n.getMilliSecondsPerPixelForZoomLevel(g,!0);const r=c/p+e.leftMargin+e.rightMargin;if(-1===d){if(r<=a){f=m;break}}else{if(!(r<=a))break;h!==m-d&&(f=m)}m+=d}f=null!=f?f:m-d,g=l[f];const b=g.bottomHeader.unit;p=n.getMilliSecondsPerPixelForZoomLevel(g,!0),(e.leftMargin||e.rightMargin)&&(o=new Date(o.getTime()-p*e.leftMargin),s=new Date(s.getTime()+p*e.rightMargin));const v=Ct.getDurationInUnit(o,s,b,!0)/g.bottomHeader.increment;if(0===v)return null;const y=Math.floor(a/v),w=e.centerDate||new Date((o.getTime()+s.getTime())/2);u=i?{startDate:o,endDate:s}:n.calculateOptimalDateRange(w,a,g);let C=n.zoomLevel;return n.zoomLevel===f?r.reconfigure(u):C=n.zoomToLevel(f,Object.assign(u,{width:y,centerDate:w})),n.infiniteScroll&&n.scrollToDate(o,{block:"start"}),C}return null}zoomIn(e=1,n){"object"==typeof e&&(n=e,e=1);const r=this.zoomLevel;return r>=this.maxZoomLevel?null:this.zoomToLevel(r+e,n)}zoomOut(e=1,n){"object"==typeof e&&(n=e,e=1);const r=this.zoomLevel;return r<=this.minZoomLevel?null:this.zoomToLevel(r-e,n)}zoomInFull(e){return this.zoomToLevel(this.maxZoomLevel,e)}zoomOutFull(e){return this.zoomToLevel(this.minZoomLevel,e)}calculateOptimalDateRange(e,n,r,i){if(i)return i;const o=this,{timeAxis:s}=o,{bottomHeader:a}=r,l=o.isHorizontal?r.tickWidth:r.tickHeight;if(o.zoomKeepsOriginalTimespan)return{startDate:s.startDate,endDate:s.endDate};const c=a.unit,d=Math.ceil(n/l*a.increment*o.visibleZoomFactor/2),u=Ct.add(e,-d,c),h=Ct.add(e,d,c);return o.infiniteScroll?o.timeAxisViewModel.calculateInfiniteScrollingDateRange(e,!0):{startDate:s.floorDate(u,!1,c,a.increment),endDate:s.ceilDate(h,!1,c,a.increment)}}onElementMouseMove(e){const{isHorizontal:n,zoomContext:r}=this;super.onElementMouseMove(e),e.isTrusted&&r&&Math.abs(e["client"+(n?"X":"Y")]-r.coordinate)>10&&(this.zoomContext=null)}async onWheel(e){if(e.ctrlKey&&!this.forceFit){e.preventDefault();const n=this,{zoomContext:r,isHorizontal:i,timelineScroller:o,zoomLevel:s}=n,a=performance.now(),l=e["client"+(i?"X":"Y")];let c=l-o.viewport[""+(i?"x":"y")];i&&n.rtl&&(c=o.viewport.width+o.viewport.x-l),a-n.lastWheelTime>200||!r||Math.abs(l-n.zoomContext.coordinate)>20?n.zoomContext={zoomLevel:s,coordinate:l,zoomPosition:c,zoomDate:n.getDateFromDomEvent(e)}:(s>r.zoomLevel&&(r.zoomDate=n.getDateFromDomEvent(e),r.zoomLevel=s),r.zoomPosition=c),n.lastWheelTime=a,n["zoom"+(e.deltaY>0?"Out":"In")](void 0,n.zoomContext)}}setTimeSpan(e,n){this.timeAxis.setTimeSpan(e,n)}shift(e,n){this.timeAxis.shift(e,n)}shiftNext(e){this.timeAxis.shiftNext(e)}shiftPrevious(e){this.timeAxis.shiftPrevious(e)}get widgetClass(){}},__publicField(n,"$name","TimelineZoomable"),__publicField(n,"defaultConfig",{zoomOnMouseWheel:!0,zoomOnTimeAxisDoubleClick:!0,minZoomLevel:0,maxZoomLevel:null,visibleZoomFactor:5,zoomKeepsOriginalTimespan:null}),n},RecurringEvents_default=e=>{var n;return __publicField(n=class extends(e||re){construct(e){super.construct(e),this.ion({beforeEventDropFinalize:"onRecurrableBeforeEventDropFinalize",beforeEventResizeFinalize:"onRecurrableBeforeEventResizeFinalize",beforeAssignmentDelete:"onRecurrableAssignmentBeforeDelete"})}changeRecurrenceConfirmationPopup(e,n){const r=this.constructor.reconfigure(n,e,"recurrenceconfirmation");return r.owner=this,r}findRecurringEventToConfirmDelete(e){return e.find((e=>e.supportsRecurring&&(e.isRecurring||e.isOccurrence)))}onRecurrableAssignmentBeforeDelete({assignmentRecords:e,context:n}){const r=e.map((e=>e.event)),i=this.findRecurringEventToConfirmDelete(r);if(this.enableRecurringEvents&&i)return this.recurrenceConfirmationPopup.confirm({actionType:"delete",eventRecord:i,changerFn(){n.finalize(!0)},cancelFn(){n.finalize(!1)}}),!1}onRecurrableBeforeEventDropFinalize({context:e}){if(this.enableRecurringEvents){const{eventRecords:n}=e,r=n.filter((e=>e.supportsRecurring&&(e.isRecurring||e.isOccurrence)));r.length&&(e.async=!0,this.recurrenceConfirmationPopup.confirm({actionType:"update",eventRecord:r[0],changerFn(){e.finalize(!0)},cancelFn(){e.finalize(!1)}}))}}onRecurrableBeforeEventResizeFinalize({context:e}){if(this.enableRecurringEvents){const{eventRecord:n}=e;n.supportsRecurring&&(n.isRecurring||n.isOccurrence)&&(e.async=!0,this.recurrenceConfirmationPopup.confirm({actionType:"update",eventRecord:n,changerFn(){e.finalize(!0)},cancelFn(){e.finalize(!1)}}))}}onAssignmentChange({action:e,records:n}){var r;if("dataset"!==e&&Array.isArray(n))for(const e of n)(null==(r=e.event)?void 0:r.isRecurring)&&!e.event.isBatchUpdating&&e.event.removeOccurrences()}getOccurrencesFor(e){return this.eventStore.getOccurrencesForTimeSpan(e,this.timeAxis.startDate,this.timeAxis.endDate)}async removeEvents(e,n=null,r=this){const i=this;if(!i.readOnly&&e.length){const o={finalize(r=!0){if(n&&n(r),!1!==r)if(e.some((e=>{var n;return e.isOccurrence||(null==(n=e.event)?void 0:n.isOccurrence)})))e.forEach((e=>e.isOccurrenceAssignment?e.event.remove():e.remove()));else{(e[0].isAssignment?i.assignmentStore:i.eventStore).remove(e)}}};let s;if(s=e[0].isAssignment?i.trigger("beforeAssignmentDelete",{assignmentRecords:e,context:o}):i.trigger("beforeEventDelete",{eventRecords:e,context:o}),!1!==s){const n=e.find((e=>e.isRecurring||e.isOccurrence));return n?(i.recurrenceConfirmationPopup.owner=r,i.recurrenceConfirmationPopup.confirm({actionType:"delete",eventRecord:n,changerFn(){o.finalize(!0)},cancelFn(){o.finalize(!1)}})):o.finalize(!0),!0}}return!1}get widgetClass(){}},"$name","RecurringEvents"),__publicField(n,"configurable",{enableRecurringEvents:!1,recurrenceConfirmationPopup:{$config:["lazy"],value:{type:"recurrenceconfirmation"}}}),n},TimelineEventRendering_default=e=>{var n;return __publicField(n=class extends(e||re){static get $name(){return"TimelineEventRendering"}static get defaultConfig(){return{resourceMargin:null,managedEventSizing:!0,generatedIdCls:"b-sch-dirty-new",dirtyCls:"b-sch-dirty",committingCls:"b-sch-committing",endsOutsideViewCls:"b-sch-event-endsoutside",startsOutsideViewCls:"b-sch-event-startsoutside",fixedEventCls:"b-sch-event-fixed",eventStyle:"plain",eventColor:"green",tickSize:null}}updateFillTicks(e){this.isConfiguring||(this.timeAxis.forceFullTicks=e&&this.snap,this.refreshWithTransition(),this.trigger("stateChange"))}changeBarMargin(e){return Et.assertNumber(e,"barMargin"),this.isHorizontal&&this.rowHeight?Math.min(Math.ceil(this.rowHeight/2),e):e}updateBarMargin(){this.rendered&&(this.currentOrientation.onBeforeRowHeightChange(),this.refreshWithTransition(),this.trigger("stateChange"))}get resourceMargin(){return null==this._resourceMargin?this.barMargin:this._resourceMargin}set resourceMargin(e){const n=this;Et.assertNumber(e,"resourceMargin"),n.isHorizontal&&n.rowHeight&&(e=Math.min(Math.ceil(n.rowHeight/2),e)),n._resourceMargin!==e&&(n._resourceMargin=e,n.rendered&&(n.currentOrientation.onBeforeRowHeightChange(),n.refreshWithTransition()))}set tickSize(e){Et.assertNumber(e,"tickSize"),this.timeAxisViewModel.tickSize=e}get tickSize(){return this.timeAxisViewModel.tickSize}static get eventColors(){return["red","pink","purple","violet","indigo","blue","cyan","teal","green","lime","yellow","orange","deep-orange","gray"]}static get eventStyles(){return["plain","border","hollow","colored","line","dashed","minimal","rounded"]}get widgetClass(){}},"configurable",{barMargin:10,fillTicks:!1}),n},ub={maintainVisibleStart:!0},hb={block:"nearest"},TimelineScroll_default=e=>class TimelineScroll extends(e||re){static get $name(){return"TimelineScroll"}static get configurable(){return{bufferCoef:5,bufferThreshold:.2,infiniteScroll:!1}}initScroll(){const e=this,{isHorizontal:n,visibleDate:r}=e;super.initScroll();const{scrollable:i}=n?e.timeAxisSubGrid:e;if(i.ion({scroll:"onTimelineScroll",thisObj:e}),e.infiniteScroll){const n=r?{...r,visibleDate:r.date}:{visibleDate:e.viewportCenterDate,block:"center"},{startDate:i,endDate:o}=e.timeAxisViewModel.calculateInfiniteScrollingDateRange(n.visibleDate,"center"===n.block);e.setTimeSpan(i,o,n)}}get timelineScroller(){const e=this;return e.scrollInitialized||e.initScroll(),e._timelineScroller||(e._timelineScroller=new gb({widget:e,scrollable:e.isHorizontal?e.timeAxisSubGrid.scrollable:e.scrollable,isHorizontal:e.isHorizontal}))}doDestroy(){var e;null==(e=this._timelineScroller)||e.destroy(),super.doDestroy()}onTimelineScroll({source:e}){this.infiniteScroll&&this.checkTimeAxisScroll(e[this.isHorizontal?"x":"y"])}checkTimeAxisScroll(e){const n=this,r=n.timelineScroller,{clientSize:i}=r,o=i*n.bufferCoef*n.bufferThreshold,s=r.maxPosition,{style:a}=n.timeAxisSubGrid.virtualScrollerElement;(s-e<o||e<o)&&(a.overflow="hidden",a.pointerEvents="none",a.paddingBottom=`${Gn.scrollBarWidth}px`,n.setTimeout((()=>{a.overflow="",a.paddingBottom="",a.pointerEvents=""}),100),n.shiftToDate(n.getDateFromCoordinate(e,null,!0,!1,!0)))}shiftToDate(e,n){const r=this.timeAxisViewModel.calculateInfiniteScrollingDateRange(e,n);this.setTimeSpan(r.startDate,r.endDate,ub)}updateInfiniteScroll(e){!this.isConfiguring&&e&&this.checkTimeAxisScroll(this.timelineScroller.position)}async scrollToDate(e,n={}){const r=this,{timeAxis:i,visibleDateRange:o,infiniteScroll:s}=r,{unit:a,increment:l}=i,c=n.edgeOffset||0,d=Ct.ceil(o.endDate,l+" "+a)-Ct.floor(o.startDate,l+" "+a),u=e>r.viewportCenterDate?1:-1,h=(s?d*r.bufferCoef*r.bufferThreshold:"center"===n.block?d/2:c?r.getMilliSecondsPerPixelForZoomLevel(r.viewPreset)*c:0)*u,g=new Date(e.getTime()+h);(g>i.endDate?1:g<i.startDate?-1:0)&&r.infiniteScroll&&(r.shiftToDate(new Date(e-h),null,!0),await r.nextAnimationFrame());const p=r.timelineScroller.viewport,m=r.getCoordinateFromDate(e,!0),f=Math.min(r.timeAxisViewModel.tickSize,r.timeAxisViewModel.availableSpace),b=r.isHorizontal?new Gt(r.getCoordinateFromDate(e,!1)-(r.rtl?f:0),p.y,f,p.height):new Gt(p.x,r.getCoordinateFromDate(e,!1),p.width,r.timeAxisViewModel.tickSize);await r.scrollToCoordinate(m,b,e,n)}scrollToNow(e={}){return this.scrollToDate(new Date,e)}async scrollToCoordinate(e,n,r,i={}){const o=this;if(e<0){const e=o.endDate-o.startDate,{unit:n,increment:s}=o.timeAxis,a=Ct.floor(new Date(r.getTime()-e/2),s+" "+n),l=Ct.add(a,e);return a-o.startDate!=0&&l-o.endDate!=0?(o.setTimeSpan(a,l),o.scrollToDate(r,i)):void 0}return await o.timelineScroller.scrollIntoView(n,i),!o.isDestroyed&&o.nextAnimationFrame()}set scrollLeft(e){this.timeAxisSubGrid.scrollable.element.scrollLeft=e}get scrollLeft(){return this.timeAxisSubGrid.scrollable.element.scrollLeft}set scrollX(e){this.timeAxisSubGrid.scrollable.x=e}get scrollX(){return this.timeAxisSubGrid.scrollable.x}set scrollTop(e){this.scrollable.y=e}get scrollTop(){return this.scrollable.y}scrollHorizontallyTo(e,n=!0){return this.timeAxisSubGrid.scrollable.scrollTo(e,null,n)}scrollVerticallyTo(e,n=!0){return this.scrollable.scrollTo(null,e,n)}scrollTo(e,n=!0){return this.timeAxisSubGrid.scrollable.scrollTo(e,null,n)}get widgetClass(){}},gb=class extends Xo{static get configurable(){return{position:null,x:null,y:null}}updateOverflowX(){}updateOverflowY(){}onScroll(e){super.onScroll(e),this._position=null}syncPartners(e){this.scrollable.syncPartners(e)}updatePosition(e){this.scrollable[this.isHorizontal?"x":"y"]=e}get viewport(){return this.scrollable.viewport}get position(){return this._position=this.scrollable[this.isHorizontal?"x":"y"]}get clientSize(){return this.scrollable["client"+(this.isHorizontal?"Width":"Height")]}get scrollSize(){return this.scrollable["scroll"+(this.isHorizontal?"Width":"Height")]}get maxPosition(){return this.scrollable["max"+(this.isHorizontal?"X":"Y")]}scrollTo(e,n){return this.isHorizontal?this.scrollable.scrollTo(e,null,n):this.scrollable.scrollTo(null,e,n)}scrollBy(e=0,n=0,r=hb){return this.isHorizontal?this.scrollable.scrollBy(e||n,0,r):this.scrollable.scrollBy(0,n||e,r)}scrollIntoView(){return this.scrollable.scrollIntoView(...arguments)}changeX(e){this.position=e}changeY(e){this.position=e}get x(){return this.position}set x(e){this.scrollable[this.isHorizontal?"x":"y"]=e}get y(){return this.position}set y(e){this.scroller[this.isHorizontal?"x":"y"]=e}get clientWidth(){return this.clientSize}get clientHeight(){return this.clientSize}get scrollWidth(){return this.scrollSize}get scrollHeight(){return this.scrollSize}get maxX(){return this.maxPosition}get maxY(){return this.maxPosition}},pb=["barMargin"],TimelineState_default=e=>class TimelineState extends(e||re){static get $name(){return"TimelineState"}getState(){const e=this,n=Et.copyProperties(super.getState(),e,pb);return n.zoomLevel=e.zoomLevel,n.zoomLevelOptions={startDate:e.startDate,endDate:e.endDate,centerDate:!e.infiniteScroll||e.timeAxisViewModel.availableSpace?e.viewportCenterDate:void 0,width:e.tickSize},n}applyState(e){var n;const r=this;r.suspendRefresh(),Et.copyProperties(r,e,pb),super.applyState(e),null!=e.zoomLevel&&(r.infiniteScroll&&(null==(n=null==e?void 0:e.scroll)?void 0:n.scrollLeft)&&(e.scroll.scrollLeft={}),r.isPainted?r.zoomToLevel(e.zoomLevel,e.zoomLevelOptions):r._zoomAfterPaint={zoomLevel:e.zoomLevel,zoomLevelOptions:e.zoomLevelOptions}),r.resumeRefresh(!0)}onPaint(...e){if(super.onPaint(...e),this._zoomAfterPaint){const{zoomLevel:e,zoomLevelOptions:n}=this._zoomAfterPaint;this.zoomToLevel(e,n),delete this._zoomAfterPaint}}get widgetClass(){}},mb=class extends yh{static get $name(){return"SchedulerHeader"}refreshContent(){var e;(null==(e=this.headersElement)?void 0:e.querySelector(".b-sch-timeaxiscolumn"))||super.refreshContent()}};mb._$name="Header";var fb=class extends Ah{static get $name(){return"TimeAxisSubGrid"}static get type(){return"timeaxissubgrid"}static get configurable(){return{sealedColumns:!0,headerClass:mb}}startConfigure(e){const{grid:n}=e;n.timeAxisSubGrid=this,super.startConfigure(e),n.isHorizontal&&(e.header={cls:{"b-sticky-headers":n.stickyHeaders}},delete e.headerClass),"flex"in e||"width"in e||(e.flex=1)}changeScrollable(){const e=this,n=super.changeScrollable(...arguments);return n&&Object.defineProperty(n,"scrollWidth",{get(){var e,n;return null!=(n=null==(e=this.element)?void 0:e.scrollWidth)?n:0},set(){e.grid.updateCanvasSize()}}),n}syncScrollingPartners(e=!0){this.grid._viewPresetChanging||super.syncScrollingPartners(e)}onInternalResize(e,n,r,i,o){const s=this;if(s.isPainted&&n!==i){const e=s.grid,r=e._bodyRectangle.height;Gn.scrollBarWidth&&n<i&&(s.monitorResize=!1),e.onSchedulerViewportResize(n,r,i,r),s.monitorResize||s.requestAnimationFrame((()=>s.monitorResize=!0))}super.onInternalResize(...arguments)}clearWidthCache(){super.clearWidthCache(),this.owner.isHorizontal&&this.owner.updateViewModelAvailableSpace(this.width)}async expand(){const{owner:e}=this;await super.expand(),e.isPainted&&e.timeAxisViewModel.update(this.width,!1,!0)}};fb.initClass(),fb._$name="TimeAxisSubGrid";var bb={fn:"exitTransition",delay:0,cancelOutstanding:!0},vb={},yb=class extends(_h.mixin(TimelineDateMapper_default,TimelineDomEvents_default,TimelineEventRendering_default,TimelineScroll_default,TimelineState_default,TimelineViewPresets_default,TimelineZoomable_default,RecurringEvents_default)){constructor(){super(...arguments),__publicField(this,"timeCellSelector",null)}static get $name(){return"TimelineBase"}static get type(){return"timelinebase"}static get defaultConfig(){return{workingTime:null,timeAxis:null,timeAxisViewModel:null,autoAdjustTimeAxis:!0,snapRelativeToEventStartDate:!1,suppressFit:!1,timeCellCls:null,scheduledEventName:null,overScheduledEventClass:null,preventOverCls:!1,useBackgroundCanvas:!1,enableEventAnimations:!0,disableGridRowModelWarning:!0,animateRemovingRows:!1,partner:null,schedulerRegion:"normal",transitionDuration:200,animationTimeout:null,defaultRegion:"locked",durationDisplayPrecision:1,asyncEventSuffix:"PreCommit",viewportResizeTimeout:250,testConfig:{viewportResizeTimeout:50}}}updateTimeZone(e){this.isConfiguring&&(this.project._isConfiguringTimeZone=!0),this.project.timeZone=e}get timeZone(){return this.project.timeZone}populateEventMenu(){}populateScheduleMenu(){}onVisibleDateRangeChange(e){if(!this.handlingVisibleDateRangeChange){const n=this,{_visibleDateRange:r}=n;(!r||r.startDate-e.startDate||r.endDate-e.endDate)&&(n.timeView.range=e,n.handlingVisibleDateRangeChange=!0,n.trigger("visibleDateRangeChange",{old:r,new:e}),n.handlingVisibleDateRangeChange=!1,n._visibleDateRange=e)}}onVisibleResourceRangeChange(){}construct(e={}){const n=this;super.construct(e),n.$firstVerticalOverflow=!0,n.initDomEvents(),n.currentOrientation.init(),n.rowManager.ion({refresh:()=>{n.forceLayout=!1}})}createSubGrid(e,n={}){const r=this,{stickyHeaders:i}=r;return e===(r.schedulerRegion||"normal")?n.type="timeaxissubgrid":"locked"===e&&i&&r.isVertical&&(n.scrollable={overflowX:"visible",overflowY:"visible"},r.bodyContainer.classList.add("b-sticky-headers")),super.createSubGrid(e,n)}doDestroy(){const e=this,{partneredWith:n,currentOrientation:r}=e;null==r||r.destroy(),n?(n.forEach((n=>{e.removePartner(n)})),n.destroy()):(e.timeAxisViewModel.destroy(),e.timeAxis.destroy()),super.doDestroy()}startConfigure(e){super.startConfigure(e),Ho.addResizeListener(this.bodyContainer,this.onBodyResize.bind(this)),this.getConfig("partner")}changeStartDate(e){return"string"==typeof e&&(e=Ct.parse(e)),e}onPaint({firstPaint:e}){var n,r;if(e){const e=this,i=(e.isHorizontal?e.timeAxisSubGrid.scrollable:e.scrollable).element.getBoundingClientRect()[e.isHorizontal?"width":"height"];e.timeAxisViewModel.update(i,e.infiniteScroll,!0),e.infiniteScroll&&(null==(r=(n=e.currentOrientation).doUpdateTimeView)||r.call(n))}super.onPaint(...arguments)}onSchedulerHorizontalScroll(e,n,r){this.currentOrientation.updateFromHorizontalScroll(r),super.onSchedulerHorizontalScroll(e,n,r)}initScroll(){const e=this;let n=0;super.initScroll(),e.ion({horizontalScroll:({subGrid:r,scrollLeft:i,scrollX:o})=>{!e.isPainted||r!==e.timeAxisSubGrid||e.isDestroying||e.refreshSuspended||e.onSchedulerHorizontalScroll(r,i,o),n++}}),"horizontal"===e.testPerformance&&e.setTimeout((()=>{const r=performance.now();let i=5,o=1;const s=e.setInterval((()=>{if(i+=5,e.scrollX+=(10+Math.floor(i))*o,1===o&&e.scrollX>5500&&(o=-1,i=5),-1===o&&e.scrollX<=0){const i=(performance.now()-r)/n,o=Math.round(1e3/i*10)/10;clearInterval(s),console.log(e.eventPositionMode,e.eventScrollMode,o+"fps")}}),0)}),500)}preserveViewCenter(e,n=this,...r){const i=this,o=i.viewportCenterDate,s=e.apply(n,r),a=i.timelineScroller,{clientSize:l}=a,c=Math.max(Math.floor(i.getCoordinateFromDate(o,!0)-l/2),0);return i.scrollingToCenter=!0,a.scrollTo(c,!1).then((()=>i.scrollingToCenter=!1)),s}setTimeSpan(e,n,r=vb){const i=this,{timeAxis:o}=i,{preventThrow:s=!1,maintainVisibleStart:a=!1,visibleDate:l}=r,{startDate:c,endDate:d}=o.getAdjustedDates(e,n),u=o.startDate-c!=0,h=o.endDate-d!=0;if(u||h){if(a){const{timeAxisViewModel:e}=i,{totalSize:n}=e,r=e.tickSize,o=i.timelineScroller,s=o.position,a=e.getDateFromPosition(s);a>=c&&a<d&&e.ion({update(){const l=e.tickSize!==r;i.updateCanvasSize(),!u||h||l?o.position=u||l?e.getPositionFromDate(a):s:o.position+=e.totalSize-n,o.syncPartners(!0)},prio:1e4,once:!0})}const e=o.reconfigure({startDate:c,endDate:d},!1,s);return l?i.scrollToDate(l,r).then((()=>e)):e}}get hasVisibleEvents(){return!this.noFeatureElementsInAxis()||this.eventStore.storage.values.some((e=>this.timeAxis.isTimeSpanInAxis(e)))}noFeatureElementsInAxis(){}get capitalizedEventName(){return this._capitalizedEventName||(this._capitalizedEventName=w.capitalize(this.scheduledEventName)),this._capitalizedEventName}set partner(e){this._partner=e,this.addPartner(e)}addPartner(e){const n=this;if(!n.isPartneredWith(e)){(n.partneredWith||(n.partneredWith=new si)).add(e),(e.partneredWith||(e.partneredWith=new si)).add(n),n.getConfig("viewPreset"),e.ion({presetchange:"onPartnerPresetChange",thisObj:n}),e.scrollable.ion({overflowChange:"onPartnerOverflowChange",thisObj:n});const r=n.partnerSharedConfigs.reduce(((n,r)=>(n[r]=e[r],n)),{});n.setConfig(r),n.ion({presetchange:"onPartnerPresetChange",thisObj:e}),n.scrollable.ion({overflowChange:"onPartnerOverflowChange",thisObj:e}),n.isPainted?(n.scrollable.addPartner(e.scrollable,n.isHorizontal?"x":"y"),e.syncPartnerSubGrids()):n.initScroll=he.createSequence(n.initScroll,(()=>{n.scrollable.addPartner(e.scrollable,n.isHorizontal?"x":"y"),e.syncPartnerSubGrids()}),n)}}removePartner(e){const n=this,{partneredWith:r}=n;n.isPartneredWith(e)&&(r.remove(e),n.scrollable.removePartner(e.scrollable),n.un({presetchange:"onPartnerPresetChange",thisObj:e}),n.scrollable.un({overflowChange:"onPartnerOverflowChange",thisObj:e}),e.removePartner(n))}isPartneredWith(e){var n;return Boolean(null==(n=this.partneredWith)?void 0:n.includes(e))}onPartnerOverflowChange({source:e,y:n}){const{scrollable:r}=this,i=r.hasOverflow("y");i!==n?i?e.overflowY="scroll":(e.overflowY=!0,r.overflowY="scroll",this.refreshVirtualScrollbars()):r.overflowY=!0}onPartnerPresetChange({preset:e,startDate:n,endDate:r,centerDate:i,zoomDate:o,zoomPosition:s,zoomLevel:a}){this._viewPresetChanging||this.viewPreset===e||(e.options={startDate:n,endDate:r,centerDate:i,zoomDate:o,zoomPosition:s,zoomLevel:a},this.viewPreset=e)}get partner(){return this._partner}get partners(){const e=this.partner?[this.partner]:[];return this.partneredWith&&e.push.apply(e,this.partneredWith.allValues),e}get timeAxisColumn(){return this.columns&&this._timeAxisColumn}changeColumns(e,n){const r=this;let i,o;if(e){const n=Array.isArray(e);let s=e;n||(s=e.data),i=s&&s.length,s.some(((e,n)=>"timeAxis"===e.type&&(i=n,o=Et.assign(e,r.timeAxisColumn),!0))),r.isVertical?(s=[Et.assign({type:"verticalTimeAxis"},r.verticalTimeAxisColumn),s[i]],i=1):s=s.slice(),s[i]=this._timeAxisColumn||{type:"timeAxis",cellCls:r.timeCellCls,mode:r.mode,...o},n||e.isStore&&e.owner!==this?e=s:e.data=s}return super.changeColumns(e,n)}updateColumns(e,n){if(super.updateColumns(e,n),e){const e=this,n=e._timeAxisColumn=e.columns.find((e=>e.isTimeAxisColumn));e.isVertical&&(e.verticalTimeAxisColumn=e.columns.find((e=>e.isVerticalTimeAxisColumn)),e.verticalTimeAxisColumn.relayAll(e)),n.relayAll(e)}}onColumnsChanged({action:e,changes:n,record:r,records:i}){var o;const{timeAxisColumn:s,columns:a}=this;"dataset"!==e&&"batch"!==e||a.includes(s)?r===s&&"width"in n&&this.updateCanvasSize():a.add(s,!0),r&&(null==(o=this.partneredWith)||o.forEach((e=>{const i=e.columns.getAt(r.allIndex);if(null==i?void 0:i.shouldSync(r)){const e={};for(const r in n)e[r]=n[r].value;i.set(e)}}))),super.onColumnsChanged(...arguments)}get timeView(){var e,n;const r=this;return r.columns&&r.isVertical?null==(e=r.verticalTimeAxisColumn)?void 0:e.view:null==(n=r.timeAxisColumn)?void 0:n.timeAxisView}updateEventCls(e){const n=this;n.eventSelector||(n.unreleasedEventSelector=n.eventSelector=`.${e}-wrap`),n.eventInnerSelector||(n.eventInnerSelector=`.${e}`)}set timeAxisViewModel(e){const n=this,r=n._timeAxisViewModel,i={name:"timeAxisViewModel",update:"onTimeAxisViewModelUpdate",prio:100,thisObj:n};n.partner&&!e||r&&r===e||((null==r?void 0:r.owner)===n&&r.destroy(),n.detachListeners("timeAxisViewModel"),(null==e?void 0:e.isTimeAxisViewModel)?e.ion(i):e=lb.new({mode:n._mode,snap:n.snap,forceFit:n.forceFit,timeAxis:n.timeAxis,suppressFit:n.suppressFit,internalListeners:i,owner:n},e),n.isConfiguring||(n.isHorizontal?n.timeAxisColumn.timeAxisViewModel=e:n.verticalTimeAxisColumn.view.model=e),n._timeAxisViewModel=e,n.relayEvents(e,["update"],"timeAxisViewModel"),r&&e&&n.trigger("timeAxisViewModelChange",{timeAxisViewModel:e}))}get timeAxisViewModel(){return this._timeAxisViewModel||(this.timeAxisViewModel=null),this._timeAxisViewModel}get suppressFit(){var e,n;return null!=(n=null==(e=this._timeAxisViewModel)?void 0:e.suppressFit)?n:this._suppressFit}set suppressFit(e){this._timeAxisViewModel?this.timeAxisViewModel.suppressFit=e:this._suppressFit=e}set timeAxis(e){const n=this,r=n._timeAxis,i={name:"timeAxis",reconfigure:"onTimeAxisReconfigure",thisObj:n};n.partner&&!e||r&&r===e||(r&&r.owner===n&&r.destroy(),n.detachListeners("timeAxis"),(null==e?void 0:e.isTimeAxis)||(e=Et.assign({owner:n,viewPreset:n.viewPreset,autoAdjust:n.autoAdjustTimeAxis,weekStartDay:n.weekStartDay,forceFullTicks:n.fillTicks&&n.snap},e),n.startDate&&(e.startDate=n.startDate),n.endDate&&(e.endDate=n.endDate),n.workingTime&&n.applyWorkingTime(e),e=new km(e)),e.ion(i),n._timeAxis=e)}onTimeAxisReconfigure({config:e,oldConfig:n}){if(e){(!n||n.startDate-e.startDate||n.endDate-e.endDate)&&this.trigger("dateRangeChange",{old:{startDate:n.startDate,endDate:n.endDate},new:{startDate:e.startDate,endDate:e.endDate}})}this.trigger("timeAxisChange",{config:e})}get timeAxis(){return this._timeAxis||(this.timeAxis=null),this._timeAxis}updateForceFit(e){this._timeAxisViewModel&&(this._timeAxisViewModel.forceFit=e)}set workingTime(e){this._workingTime=e,this.isConfiguring||this.applyWorkingTime(this.timeAxis)}get workingTime(){return this._workingTime}applyWorkingTime(e){var n;const r=this,i=r._workingTime;if(i){let n=null;i.fromHour>=0&&i.fromHour<24&&i.toHour>i.fromHour&&i.toHour<=24&&i.toHour-i.fromHour<24&&(n={from:i.fromHour,to:i.toHour});let r=null;i.fromDay>=0&&i.fromDay<7&&i.toDay>i.fromDay&&i.toDay<=7&&i.toDay-i.fromDay<7&&(r={from:i.fromDay,to:i.toDay}),e.include=n||r?{hour:n,day:r}:null}else e.include=null;r.isPainted&&(r.timeAxisColumn.refreshHeader(),null==(n=r.features.columnLines)||n.refresh(),r.refreshWithTransition())}updateStartDate(e){this.setStartDate(e)}setStartDate(e,n=!0){const r=this,i=r._timeAxis,{startDate:o,endDate:s,mainUnit:a}=i||vb;if("string"==typeof e&&(e=Ct.parse(e)),i&&s){if(e){let i=s;if(n&&o){const n=Ct.diff(o,s,a,!0);i=Ct.add(e,n,a)}r.setTimeSpan(e,i)}}else r._tempStartDate=e}get startDate(){const e=this;return e._timeAxis?e._timeAxis.startDate:e._tempStartDate||new Date}changeEndDate(e){"string"==typeof e&&(e=Ct.parse(e)),this.setEndDate(e)}setEndDate(e,n=!1){const r=this,i=r._timeAxis,{startDate:o,endDate:s,mainUnit:a}=i||vb;if("string"==typeof e&&(e=Ct.parse(e)),i&&o){if(e){let i=o;if(n&&s){const n=Ct.diff(o,s,a,!0);i=Ct.add(e,-n,a)}r.setTimeSpan(i,e)}}else r._tempEndDate=e}get endDate(){const e=this;return e._timeAxis?e._timeAxis.endDate:e._tempEndDate||Ct.add(e.startDate,e.viewPreset.defaultSpan,e.viewPreset.mainHeader.unit)}changeVisibleDate(e){return e instanceof Date?{date:e,block:"nearest"}:e instanceof Object?{date:e.date,...e}:void 0}updateVisibleDate(e){const n=this;n.infiniteScroll&&n.isConfiguring||(n.isPainted?n.scrollToDate(e.date,e):n.ion({paint:()=>n.scrollToDate(e.date,e),once:!0}))}get features(){return super.features}set features(e){"regionResize"in(e=!0===e?{}:e)||(e.regionResize=!0),super.features=e}get eventStyle(){return this._eventStyle}set eventStyle(e){this._eventStyle=e,this.refreshWithTransition(),this.trigger("stateChange")}get eventColor(){return this._eventColor}set eventColor(e){this._eventColor=e,this.refreshWithTransition(),this.trigger("stateChange")}onLocaleChange(){super.onLocaleChange();const e=this.timeAxis.autoAdjust;this.timeAxis.reconfigure({autoAdjust:!1}),this.timeAxis.autoAdjust=e}onBodyResize(e,n,{width:r,height:i}){this.isVertical&&n&&r!==n.width&&delete this.timeAxisSubGrid._width;const o=this.timeAxisSubGrid.element.offsetWidth;this._bodyRectangle&&n&&i!==n.height&&this.onSchedulerViewportResize(o,i,o,n.height)}onSchedulerViewportResize(e,n,r,i){if(this.isPainted){const o=this,{isHorizontal:s,partneredWith:a}=o;o.currentOrientation.onViewportResize(e,n,r,i),o.updateViewModelAvailableSpace(s?e:Math.floor(n)),a&&!o.isSyncingFromPartner&&o.syncPartnerSubGrids(),o.trigger("timelineViewportResize",{width:e,height:n,oldWidth:r,oldHeight:i})}}updateViewModelAvailableSpace(e){this.timeAxisViewModel.availableSpace=e}onTimeAxisViewModelUpdate(){this._viewPresetChanging||this.timeAxisSubGrid.collapsed||(this.updateCanvasSize(),this.currentOrientation.onTimeAxisViewModelUpdate())}syncPartnerSubGrids(){this.partneredWith.forEach((e=>{e.isSyncingFromPartner||(e.isSyncingFromPartner=!0,this.eachSubGrid((n=>{const r=e.subGrids[n.region];r.width!==n.width&&(n.collapsed?r.collapse():(r.collapsed&&r.expand(),n.flex?n.flex!==r.flex&&(r.flex=n.flex):r.width=n.width))})),e.isSyncingFromPartner=!1)}))}get currentOrientation(){throw new Error("Implement in subclass")}get isHorizontal(){return!0}get backgroundCanvas(){return this._backgroundCanvas}get foregroundCanvas(){return this._foregroundCanvas}get svgCanvas(){const e=this;if(!e._svgCanvas){const n=e._svgCanvas=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("id",Jr.generateId("svg")),n.retainElement=!0,e.foregroundCanvas.appendChild(n),e.trigger("svgCanvasCreated",{svg:n})}return e._svgCanvas}get timeAxisSubGridElement(){var e;return this._timeAxisSubGridElement||(this.getConfig("regions"),this._timeAxisSubGridElement=null==(e=this.timeAxisColumn)?void 0:e.subGridElement),this._timeAxisSubGridElement}updateCanvasSize(){const e=this,{totalSize:n}=e.timeAxisViewModel,r=e.isHorizontal?n:e.timeAxisColumn.width;let i=!1;return e.isVertical&&(e.isPainted&&e.refreshTotalHeight(n+e._rowBorderHeight,!0),e.suppressFit&&Gn.setLength(e.foregroundCanvas,"height",n),i=!0),r!==e.$canvasWidth&&e.foregroundCanvas&&(e.backgroundCanvas&&Gn.setLength(e.backgroundCanvas,"width",r),Gn.setLength(e.foregroundCanvas,"width",r),e.$canvasWidth=r,i=!0),i}getHeaderDomConfigs(e){}getForegroundDomConfigs(e){}async onStoreDataChange({action:e}){const n=this;n.isVisible?("dataset"===e&&n.project.isRepopulatingStores&&await n.project.await("refresh",!1),super.onStoreDataChange(...arguments)):n.whenVisible("refresh",n,[!0])}refresh(e=!0){const n=this;n.isPainted&&!n.refreshSuspended&&(n.isVertical||n.hasVisibleEvents||n.timeAxisSubGridElement.querySelector(n.eventSelector)?n.isEngineReady?n.refreshRows(!1,e):(n.refreshAfterProjectRefresh=!0,n.currentOrientation.refreshAllWhenReady=!0):n.rowManager.trigger("refresh"))}render(){const e=this,n=e.timeAxisSubGridElement;e.useBackgroundCanvas&&(e._backgroundCanvas=Gn.createElement({className:"b-sch-background-canvas",parent:n,nextSibling:n.firstElementChild}));const r=e._foregroundCanvas=Gn.createElement({className:"b-sch-foreground-canvas",style:`font-size:${e.rowHeight-2*e.resourceMargin}px`,parent:n});e.timeAxisSubGrid.insertRowsBefore=r,e.isVertical&&e.suppressFit&&e.updateCanvasSize(),super.render(...arguments)}refreshRows(e=!1,n=!0){this.isConfiguring||(this.currentOrientation.refreshRows(n),super.refreshRows(e))}getCellDataFromEvent(e,n){return n&&(n=!Boolean(e.target.closest(".b-sch-foreground-canvas"))),super.getCellDataFromEvent(e,n)}onCellNavigate(e,n,r){var i,o;(null==(i=r.cell)?void 0:i.classList.contains("b-timeaxis-cell"))&&!(null==(o=or.currentMouseDown)?void 0:o.target.classList.contains("b-grid-cell"))&&(this.preventDragSelect=!0),super.onCellNavigate(...arguments)}runWithTransition(e,n){const r=this;r.isVisible&&(null!=n&&!0!==n||(n=r.transitionDuration),n&&r.enableEventAnimations&&(r.hasTimeout("exitTransition")||(r.isAnimating=!0),bb.delay=n,r.setTimeout(bb))),e()}exitTransition(){this.isAnimating=!1,this.trigger("transitionend")}async waitForAnimations(){this.isEngineReady||await this.project.await("dataReady",!1),await super.waitForAnimations()}refreshWithTransition(e,n){const r=this;!r.refreshSuspended&&r.isPainted&&(r.rowManager.topRow?r.runWithTransition((()=>r.refresh(e)),n):r.rowManager.reinitialize())}get visibleDateRange(){return this.currentOrientation.visibleDateRange}isRowNumberSelecting(...e){return super.isRowNumberSelecting(...e)||e.some((e=>{var n;return e.column?e.column.isTimeAxisColumn:null==(n=e.cell)?void 0:n.closest(".b-timeaxis-cell")}))}formatDuration(e,n=this.durationDisplayPrecision){const r=Math.pow(10,n);return Math.round(e*r)/r}beginListeningForBatchedUpdates(){this.listenToBatchedUpdates=(this.listenToBatchedUpdates||0)+1}endListeningForBatchedUpdates(){this.listenToBatchedUpdates&&(this.listenToBatchedUpdates-=1)}onConnectedCallback(e,n){e&&!n&&(this.timeAxisSubGrid.scrollable.x+=.5)}updateRtl(e){const n=this,{isConfiguring:r}=n;let i;r||(i=n.visibleDateRange),super.updateRtl(e),r||(n.currentOrientation.clearAll(),n.infiniteScroll?(n.shiftToDate(i.startDate),n.scrollToDate(i.startDate,{block:"start"})):n.timelineScroller.position+=.5)}applyStartEndParameters(e){const n=this,r=n.eventStore.modelClass.fieldMap.startDate;n.passStartEndParameters&&(e[n.startParamName]=r.print(n.startDate),e[n.endParamName]=r.print(n.endDate))}};__publicField(yb,"configurable",{partnerSharedConfigs:{value:["timeAxisViewModel","timeAxis","viewPreset"],$config:{merge:"distinct"}},startDate:{$config:{equal:"date"},value:null},endDate:{$config:{equal:"date"},value:null},stickyHeaders:!0,visibleDate:null,eventCls:null,forceFit:!1,timeZone:null}),yb.initClass(),A.setVersion("scheduler","5.3.7"),yb._$name="TimelineBase";var wb=["eventStore","taskStore","assignmentStore","resourceStore","dependencyStore","timeRangeStore","resourceTimeRangeStore"],Cb=["events","tasks","resources","assignments","dependencies","timeRanges","resourceTimeRanges"],CurrentConfig_default=e=>class CurrentConfig extends e{static get $name(){return"CurrentConfig"}preProcessCurrentConfigs(e){for(const n of Cb)delete e[n];super.preProcessCurrentConfigs(e)}getCurrentConfig(e){const n=this.project.getCurrentConfig(e),r=super.getCurrentConfig(e);if(n){r.project=n;const{crudManager:e}=r;if(e)for(const r of wb)e[r]&&(n[r]=e[r]);0===Object.keys(n).length&&delete r.project}return delete r.data,delete r.crudManager,r}get widgetClass(){}},arrayify=e=>!e||Array.isArray(e)?e:[e],pickFormat=(e,n,r)=>e&&!0!==e[n]?e[n]:r,Describable_default=e=>{var n;return __publicField(n=class extends(e||re){get dateBounds(){return[this.date]}get description(){const e=this,{descriptionRenderer:n}=e;return n?e.callback(n,e,[e]):e.formattedDescription}get formattedDescription(){var e;const n=this,{dateBounds:r,dateFormat:i}=n,o=null!=(e=n.descriptionFormat)?e:arrayify(n.defaultDescriptionFormat),s=pickFormat(o,0,i),a=r.length>1&&(null==o?void 0:o.length)>1&&Ct.format(r[0],s)!==Ct.format(r[1],s);let l=Ct.format(r[0],s);return a&&(l=Ct.formatRange(r,pickFormat(o,1,`S${i}${n.dateSeparator}E${i}`))),l}changeDescriptionFormat(e){return arrayify(e)}get widgetClass(){}},"$name","Describable"),__publicField(n,"configurable",{dateFormat:"MMMM d, YYYY",dateSeparator:" - ",descriptionFormat:null,descriptionRenderer:null}),n},SchedulerDom_default=e=>class SchedulerDom extends(e||re){static get $name(){return"SchedulerDom"}getElementFromAssignmentRecord(e,n=!1){var r,i,o;if(this.isPainted&&e){let s=null==(r=this.foregroundCanvas.syncIdMap)?void 0:r[e.id];if(!s&&e.resource.hasLinks)for(const n of e.resource.$links)if(s=null==(i=this.foregroundCanvas.syncIdMap)?void 0:i[`${e.id}_${n.id}`],s)break;return n?s:null==(o=null==s?void 0:s.syncIdMap)?void 0:o.event}return null}getElementFromEventRecord(e,n=(n=>null==(n=e.resources)?void 0:n[0])(),r=!1){var i;if(e.isResourceTimeRange){const n=null==(i=this.foregroundCanvas.syncIdMap)?void 0:i[e.domId];return r?n:null==n?void 0:n.syncIdMap.event}const o=this.assignmentStore.getAssignmentForEventAndResource(e,n);return this.getElementFromAssignmentRecord(o,r)}getElementsFromEventRecord(e,n,r=!1){return n?[this.getElementFromEventRecord(e,n,r)]:e.resources.reduce(((n,i)=>{const o=this.getElementFromEventRecord(e,i,r);return o&&n.push(o),n}),[])}resolveResourceRecord(e,n){return this.currentOrientation.resolveRowRecord(e,n)}resolveRowRecord(e){return this.resolveResourceRecord(e)}resolveEventRecord(e){e instanceof Event&&(e=e.target);const n=null==e?void 0:e.closest(this.eventSelector);if(n){if(n.dataset.eventId)return this.eventStore.getById(n.dataset.eventId);if(n.dataset.assignmentId)return this.assignmentStore.getById(n.dataset.assignmentId).event}return null}resolveTimeSpanRecord(e){return this.resolveEventRecord(e)}resolveAssignmentRecord(e){const n=e.closest(this.eventSelector),r=n&&this.assignmentStore.getById(n.dataset.assignmentId),i=n&&this.eventStore.getById(n.dataset.eventId);return this.assignmentStore.getOccurrence(r,i)}isRowVisible(e){return this.store.indexOf(e)>=0}get widgetClass(){}},SchedulerDomEvents_default=e=>class SchedulerDomEvents extends(e||re){static get $name(){return"SchedulerDomEvents"}getTimeSpanMouseEventParams(e,n){const r=this.resolveEventRecord(e);return r&&{eventRecord:r,resourceRecord:this.resolveResourceRecord(e),assignmentRecord:this.resolveAssignmentRecord(e),eventElement:e,event:n}}getScheduleMouseEventParams(e,n){return{resourceRecord:this.isVertical?this.resolveResourceRecord(n):this.store.getById(e.id)}}onElementKeyDown(e){const n=super.onElementKeyDown(e),r=this;return r.selectedEvents.length&&r.trigger(r.scheduledEventName+"KeyDown",{eventRecords:r.selectedEvents,assignmentRecords:r.selectedAssignments,event:e,eventRecord:r.selectedEvents,assignmentRecord:r.selectedAssignments}),n}onElementKeyUp(e){super.onElementKeyUp(e);const n=this;n.selectedEvents.length&&n.trigger(n.scheduledEventName+"KeyUp",{eventRecords:n.selectedEvents,assignmentRecords:n.selectedAssignments,event:e,eventRecord:n.selectedEvents,assignmentRecord:n.selectedAssignments})}get widgetClass(){}},SchedulerEventRendering_default=e=>class SchedulerEventRendering extends(e||re){static get $name(){return"SchedulerEventRendering"}static get configurable(){return{milestoneTextPosition:"outside",milestoneAlign:"center",milestoneCharWidth:10,milestoneLayoutMode:"default",eventLayout:"stack",overlappingEventSorter:null,horizontalEventSorterFn:null,resourceMargin:null,useInitialAnimation:!0,eventRenderer:null,eventRendererThisObj:null,eventBarTextField:"name",eventBodyTemplate:null,horizontalLayoutPackClass:Im,horizontalLayoutStackClass:Fm,resourceColumns:null,resourceImagePath:null,defaultResourceImageName:null,resourceImageExtension:".jpg",isFirstRender:!0,initialAnimationDuration:2e3,narrowEventWidth:10,internalEventLayout:null,eventPositionMode:"translate",eventScrollMode:"move"}}changeEventLayout(e){return this.internalEventLayout=e,this.internalEventLayout.type}changeInternalEventLayout(e){return this.getEventLayout(e)}updateInternalEventLayout(e,n){const r=this;n&&r.element.classList.remove(`b-eventlayout-${n.type}`),r.element.classList.add(`b-eventlayout-${e.type}`),r.isConfiguring||(r.refreshWithTransition(),r.trigger("stateChange"))}changeHorizontalEventSorterFn(e){A.deprecate("Scheduler","6.0.0","Replaced by overlappingEventSorter()"),this.overlappingEventSorter=e}updateOverlappingEventSorter(e){this.isConfiguring||this.refreshWithTransition()}getEventLayout(e){return(null==e?void 0:e.isModel)&&(e=e.eventLayout||this.internalEventLayout),"string"==typeof e&&(e={type:e}),e}getEventLayoutHandler(e){const n=this;if(!n.isHorizontal)return null;const{timeAxisViewModel:r,horizontal:i}=n,{type:o}=e;switch(n.layouts||(n.layouts={}),o){case"stack":return n.layouts.horizontalStack||(n.layouts.horizontalStack=new n.horizontalLayoutStackClass(Et.assign({scheduler:n,timeAxisViewModel:r,bandIndexToPxConvertFn:i.layoutEventVerticallyStack,bandIndexToPxConvertThisObj:i},e))),n.layouts.horizontalStack;case"pack":return n.layouts.horizontalPack||(n.layouts.horizontalPack=new n.horizontalLayoutPackClass(Et.assign({scheduler:n,timeAxisViewModel:r,bandIndexToPxConvertFn:i.layoutEventVerticallyPack,bandIndexToPxConvertThisObj:i},e))),n.layouts.horizontalPack;default:return null}}get resourceColumns(){var e;return(null==(e=this.timeAxisColumn)?void 0:e.resourceColumns)||this._resourceColumns}get resourceColumnWidth(){var e;return(null==(e=this.resourceColumns)?void 0:e.columnWidth)||null}getEventsToRender(e,n){return n}repaintEventsForResource(e){this.currentOrientation.repaintEventsForResource(e)}repaintEvent(e){this.eventStore.getResourcesForEvent(e).forEach((e=>this.repaintEventsForResource(e)))}getResourceMargin(e){var n;return null!=(n=null==e?void 0:e.resourceMargin)?n:this.resourceMargin}getBarMargin(e){var n;return null!=(n=null==e?void 0:e.barMargin)?n:this.barMargin}getResourceHeight(e){var n;return null!=(n=e.rowHeight)?n:this.isHorizontal?this.rowHeight:this.getResourceWidth(e)}getResourceWidth(e){var n;return null!=(n=e.columnWidth)?n:this.resourceColumnWidth}getAppliedResourceHeight(e){var n;const r=this.getRowById(e);return null!=(n=null==r?void 0:r.maxRequestedHeight)?n:this.getResourceHeight(e)}getResourceLayoutSettings(e,n=null){const r=this.getResourceMargin(e,n),i=this.getAppliedResourceHeight(e,n);return{barMargin:this.getBarMargin(e,n),contentHeight:Math.max(i-2*r,1),rowHeight:i,resourceMargin:r}}getEventStyle(e,n){return e.eventStyle||n.eventStyle||this.eventStyle}getEventColor(e,n){var r,i;return e.eventColor||(null==(r=e.event)?void 0:r.eventColor)||(null==(i=e.parent)?void 0:i.eventColor)||n.eventColor||this.eventColor}generateRenderData(e,n,r={viewport:!0}){var i,o;const s=this,a=s.currentOrientation.getTimeSpanRenderData(e,n,r),{isEvent:l}=e,{eventResize:c}=s.features,d=!e.meta.isDragCreating&&e.isMilestone,u=l&&e.assignments.find((e=>e.resourceId===n.$originalId)),h={className:"b-sch-event-content",role:"presentation",dataset:{taskBarFeature:"content"}};if(a){a.tabIndex="0";let r=e.isResizable;c&&r&&(a.startsOutsideView&&(!0===r?r="end":"start"===r&&(r=!1)),a.endsOutsideView&&(!0===r?r="start":"end"===r&&(r=!1)),r&&(s.isHorizontal?!s.rtl&&!c.leftHandle||s.rtl&&!c.rightHandle?r="start"!==r&&"end":(!s.rtl&&!c.rightHandle||s.rtl&&!c.leftHandle)&&(r="end"!==r&&"start"):c.topHandle?c.bottomHandle||(r="end"!==r&&"start"):r="start"!==r&&"end"));const g=Boolean(e.hasPersistableChanges||(null==u?void 0:u.hasPersistableChanges)),p={[n.cls]:n.cls,[s.generatedIdCls]:!e.isOccurrence&&e.hasGeneratedId,[s.dirtyCls]:g,[s.committingCls]:e.isCommitting,[s.endsOutsideViewCls]:a.endsOutsideView,[s.startsOutsideViewCls]:a.startsOutsideView,"b-clipped-start":a.clippedStart,"b-clipped-end":a.clippedEnd,"b-iscreating":e.isCreating,"b-rtl":s.rtl},m={[`${s.eventCls}-parent`]:n.isParent,"b-readonly":e.readOnly||(null==u?void 0:u.readOnly),"b-linked-resource":n.isLinked,"b-original-resource":n.hasLinks},f=e.isResourceTimeRange?new Xt:e.internalCls.clone(),b=e.isResourceTimeRange?e.internalCls.clone():new Xt;if(a.wrapperStyle="",a.isWrap=!0,l){const i=u&&s.isAssignmentSelected(u);Et.assign(p,{[s.eventCls]:1,"b-milestone":d,"b-sch-event-narrow":!d&&a.width<s.narrowEventWidth,[s.fixedEventCls]:!1===e.isDraggable,[`b-sch-event-resizable-${r}`]:Boolean(c&&!e.readOnly),[s.eventSelectedCls]:i,[s.eventAssignHighlightCls]:s.eventAssignHighlightCls&&!i&&s.isEventSelected(e),"b-recurring":e.isRecurring,"b-occurrence":e.isOccurrence,"b-inactive":e.inactive}),a.eventId=e.id;const o=s.getEventStyle(e,n),l=s.getEventColor(e,n),h=s.isFirstRender&&s.useInitialAnimation&&!0!==globalThis.bryntum.noAnimations;if(Et.assign(m,{[`${s.eventCls}-wrap`]:1,"b-milestone-wrap":d}),h){const e=(a.row?a.row.index:(a.top-s.scrollTop)/s.tickSize)/20*1e3;a.wrapperStyle=`animation-delay: ${e}ms;`,s.maxDelay=Math.max(s.maxDelay||0,e),s.initialAnimationDetacher||(s.initialAnimationDetacher=cn.on({element:s.foregroundCanvas,delegate:s.eventSelector,once:!0,animationend:()=>s.setTimeout({fn:"stopInitialAnimation",delay:s.maxDelay,cancelOutstanding:!0}),expires:{alt:"stopInitialAnimation",delay:s.initialAnimationDuration+s.maxDelay},thisObj:s}))}a.eventColor=l,a.eventStyle=o,a.assignmentRecord=a.assignment=u}if(a.wrapperCls=Et.assign(b,m),a.cls=Et.assign(f,p),a.iconCls=new Xt(e.get(s.eventBarIconClsField)||e.iconCls),e.isResourceTimeRange?(a.style="",a.wrapperStyle+=e.style||""):a.style=e.style||"",a.resource=a.resourceRecord=n,a.resourceId=a.rowId,l){let r,o=null,l=null;if(s.eventRenderer){const i=s.eventRenderer.call(s.eventRendererThisObj||s,{eventRecord:e,resourceRecord:n,assignmentRecord:a.assignmentRecord,renderData:a});"string"==typeof a.cls&&(a.cls=new Xt(a.cls)),"string"==typeof a.wrapperCls&&(a.wrapperCls=new Xt(a.wrapperCls)),"string"==typeof a.iconCls&&(a.iconCls=new Xt(a.iconCls)),r=s.eventBodyTemplate?s.eventBodyTemplate(i):i}else s.eventBodyTemplate?r=s.eventBodyTemplate(e):s.eventBarTextField&&(r=w.encodeHtml(e[s.eventBarTextField]||""));!s.eventBodyTemplate||Array.isArray(r)?(h.children=[],!d||"default"!==s.milestoneLayoutMode&&"always-outside"!==s.milestoneTextPosition||null==r||""===r||h.children.unshift(l={tag:"label",children:[]}),(null==(i=a.iconCls)?void 0:i.length)&&h.children.unshift({tag:"i",className:a.iconCls}),Array.isArray(r)?(l||h).children.push(...r):w.isHtml(r)?h.children.length?o={tag:"span",class:"b-event-text-wrap",html:r}:(h.children=null,h.html=r):"string"==typeof r||"object"==typeof r?o=r:null!=r&&(o=String(r)),null!=o&&((l||h).children.push(o),a.cls.add("b-has-content")),(null!=h.html||h.children.length)&&a.children.push(h)):(h.html=r,a.children.push(h))}const{eventStyle:v,eventColor:y}=a;if(a.wrapperCls[`b-sch-style-${v||"none"}`]=1,Gn.isNamedColor(y))a.wrapperCls[`b-sch-color-${y}`]=y;else if(y){const e=v?"color":"background-color";a.style=`${e}:${y};`+a.style,a.wrapperCls["b-sch-custom-color"]=1}else a.wrapperCls["b-sch-color-none"]=1;a.style&&d&&h&&(h.style=a.style,delete a.style),a.cls["b-sch-event-withicon"]=null==(o=a.iconCls)?void 0:o.length,a.eventContent=h,a.wrapperChildren=[],s.onEventDataGenerated(a)}return a}onEventDataGenerated(e){}changeUseInitialAnimation(e){return!0===e?"fade-in":e}updateUseInitialAnimation(e,n){const{classList:r}=this.element;n&&r.remove(`b-initial-${n}`),e&&(r.add(`b-initial-${e}`),c.isFirefox&&r.add("b-prevent-event-transitions"))}restartInitialAnimation(e){var n;const r=this;null==(n=r.initialAnimationDetacher)||n.call(r),r.initialAnimationDetacher=null,r.useInitialAnimation=e,r.isFirstRender=!0,r.refresh()}stopInitialAnimation(){const e=this;e.initialAnimationDetacher(),e.isFirstRender=!1,e.useInitialAnimation=!1,c.isFirefox&&e.setTimeout((()=>e.element.classList.remove("b-prevent-event-transitions")),100)}getMilestoneLabelWidth(e,n){const r=this,i=r.milestoneLayoutMode,o=r.getResourceLayoutSettings(n).contentHeight;if("measure"===i){const i=w.encodeHtml(e.name),s=r.getEventColor(e,n),a=r.getEventStyle(e,n),l=r.milestoneMeasureElement||(r.milestoneMeasureElement=Gn.createElement({className:{"b-sch-event-wrap":1,"b-milestone-wrap":1,"b-measure":1,[`b-sch-color-${s}`]:s,[`b-sch-style-${a}`]:a},children:[{className:"b-sch-event b-milestone",children:[{className:"b-sch-event-content",children:[{tag:"label"}]}]}],parent:r.foregroundCanvas}));if(l.retainElement=!0,l.style.fontSize=`${o}px`,"always-outside"===r.milestoneTextPosition){const e=l.firstElementChild.firstElementChild.firstElementChild;e.innerHTML=i;const n=Gt.from(e,e.parentElement);return n.left+n.width+2}return l.firstElementChild.firstElementChild.innerHTML=`<label></label>${i}`,l.firstElementChild.offsetWidth}return"estimate"===i?e.name.length*r.milestoneCharWidth+("always-outside"===r.milestoneTextPosition?o:0):"data"===i?e.milestoneWidth:0}updateMilestoneLayoutMode(e){const n=this,r="always-outside"===n.milestoneTextPosition;n.element.classList.toggle("b-sch-layout-milestones","default"!==e&&!r),n.element.classList.toggle("b-sch-layout-milestone-labels","default"!==e&&r),n.isConfiguring||n.refreshWithTransition()}updateMilestoneTextPosition(e){this.element.classList.toggle("b-sch-layout-milestone-text-position-inside","inside"===e),this.updateMilestoneLayoutMode(this.milestoneLayoutMode)}updateMilestoneAlign(){this.isConfiguring||this.refreshWithTransition()}updateMilestoneCharWidth(){this.isConfiguring||this.refreshWithTransition()}get widgetClass(){}},SchedulerStores_default=e=>class SchedulerStores extends(ProjectConsumer_default(e||re)){static get $name(){return"SchedulerStores"}static get projectStores(){return{resourceStore:{dataName:"resources"},eventStore:{dataName:"events",listeners:{batchedUpdate:"onEventStoreBatchedUpdate",changePreCommit:"onInternalEventStoreChange",commitStart:"onEventCommitStart",commit:"onEventCommit",exception:"onEventException",idchange:"onEventIdChange",beforeLoad:"onBeforeLoad"}},assignmentStore:{dataName:"assignments",listeners:{changePreCommit:"onAssignmentChange",commitStart:"onAssignmentCommitStart",commit:"onAssignmentCommit",exception:"onAssignmentException",beforeRemove:{fn:"onAssignmentBeforeRemove",prio:-1e3}}},dependencyStore:{dataName:"dependencies"},calendarManagerStore:{},timeRangeStore:{},resourceTimeRangeStore:{}}}static get configurable(){return{store:null,startParamName:"startDate",endParamName:"endDate",passStartEndParameters:A.checkVersion("core","6.0",">="),crudManagerClass:null,crudManager:null}}updateProject(e,n){super.updateProject(e,n),this.detachListeners("schedulerStores"),e.ion({name:"schedulerStores",refresh:"onProjectRefresh",thisObj:this})}onProjectRefresh({isInitialCommit:e}){const n=this;n.isVisible?(e&&n.isVertical&&(n.refreshAfterProjectRefresh=!1,n.refreshWithTransition()),n.navigateToAfterRefresh&&(n.navigateTo(n.navigateToAfterRefresh),n.navigateToAfterRefresh=null),n.refreshAfterProjectRefresh&&(n.refreshWithTransition(!1,!e),n.refreshAfterProjectRefresh=!1)):n.whenVisible("refresh",n,[!0])}changeCrudManager(e){const n=this;e&&!e.isCrudManager&&(e=n.crudManagerClass.new({scheduler:n},e)),n._crudManager=e,n.bindCrudManager(e)}get store(){return!this._store&&this.isVertical&&(this._store=new yi({data:[{id:"verticalTimeAxisRow",cls:"b-verticaltimeaxis-row"}]})),super.store}set store(e){super.store=e}refreshFromRowOnStoreAdd(e,{isExpand:n,records:r}){const i=arguments;this.runWithTransition((()=>{this.currentOrientation.suspended=!n&&!r.some((e=>e.isLinked)),super.refreshFromRowOnStoreAdd(e,...i),this.currentOrientation.suspended=!1}),!n)}onStoreAdd(e){super.onStoreAdd(e),this.isPainted&&this.calculateRowHeights(e.records)}onStoreUpdateRecord({source:e,record:n,changes:r}){let i=0;"assigned"in r&&i++,"calendar"in r&&i++,i!==Object.keys(r).length&&super.onStoreUpdateRecord(...arguments)}updateResourceStore(e){e&&this.isHorizontal&&(e.metaMapId=this.id,this.store=e)}get usesDisplayStore(){return this.store!==this.resourceStore}onEventIdChange(e){this.currentOrientation.onEventStoreIdChange&&this.currentOrientation.onEventStoreIdChange(e)}onEventStoreBatchedUpdate(e){if(this.listenToBatchedUpdates)return this.onInternalEventStoreChange(e)}onInternalEventStoreChange(e){this.isPainted&&this._mode&&!e.isAssign&&!this.assignmentStore.isRemovingAssignment&&(this.isVisible?this.currentOrientation.onEventStoreChange(e):this.whenVisible(this.onInternalEventStoreChange,this,[e]))}onEventCommit({changes:e}){let n=[...e.added,...e.modified].map((e=>this.eventStore.getResourcesForEvent(e)));n=Array.prototype.concat.apply([],n),new Set(n).forEach((e=>this.repaintEventsForResource(e)))}onEventCommitStart({changes:e}){const{currentOrientation:n,committingCls:r}=this;[...e.added,...e.modified].forEach((e=>e.assignments.forEach((e=>n.toggleCls(e,r,!0)))))}onEventException({action:e}){if("commit"===e){const{changes:e}=this.eventStore;[...e.added,...e.modified,...e.removed].forEach((e=>this.repaintEvent(e)))}}onAssignmentCommit({changes:e}){this.repaintEventsForAssignmentChanges(e)}onAssignmentCommitStart({changes:e}){const{currentOrientation:n,committingCls:r}=this;[...e.added,...e.modified].forEach((e=>{n.toggleCls(e,r,!0)}))}onAssignmentException({action:e}){"commit"===e&&this.repaintEventsForAssignmentChanges(this.assignmentStore.changes)}repaintEventsForAssignmentChanges(e){const n=[...e.added,...e.modified,...e.removed].map((e=>e.getResource()));new Set(n).forEach((e=>this.repaintEventsForResource(e)))}onAssignmentBeforeRemove({records:e,removingAll:n}){if(n)return;const r=this;let i;if(!r.isConfiguring&&(r.navigateToAfterRefresh||r.activeAssignment&&e.includes(r.activeAssignment))){if(e.includes(r.navigateToAfterRefresh)&&(r.navigateToAfterRefresh=null),"key"===or.lastInteractionType)for(let n=0,o=e.length;n<o&&!i;n++){const o=e[n];if(o.resource&&o.resource.isModel){let n=r.getNext(o);n&&!e.includes(n)||(n=r.getPrevious(o)),n&&!e.includes(n)&&(i=n)}}i?(r.navigateTo(i),r.navigateToAfterRefresh=i):Gn.focusWithoutScrolling(r.focusElement)}}set timeRanges(e){this.project.timeRanges=e}get timeRanges(){return this.project.timeRanges}set resourceTimeRanges(e){this.project.resourceTimeRanges=e}get resourceTimeRanges(){return this.project.resourceTimeRanges}onBeforeLoad({params:e}){this.applyStartEndParameters(e)}getResourcesEventsPerTick(e,n){const{timeAxis:r,resourceStore:i}=this,o=[];return(e=e||i.records).forEach((e=>{e.events.forEach((i=>{if(!r.isTimeSpanInAxis(i)||n&&!n.call(this,{resource:e,event:i}))return;let s=Math.floor(r.getTickFromDate(i.startDate)),a=Math.ceil(r.getTickFromDate(i.endDate));-1==s&&(s=0),-1===a&&(a=r.ticks.length);do{o[s]?o[s].push(i):o[s]=[i]}while(++s<a)}))})),o}get widgetClass(){}},Sb={block:"nearest",edgeOffset:20},xb={highlight:!1,focus:!1},SchedulerScroll_default=e=>class SchedulerScroll extends(e||re){static get $name(){return"SchedulerScroll"}async scrollEventIntoView(e,n=Sb){const r=e.resources||[e];if(r.length>1)throw new Error("scrollEventIntoView() is not applicable for events with multiple assignments, please use scrollResourceEventIntoView() instead.");r.length||console.warn("You have asked to scroll to an event which is not assigned to a resource"),await this.scrollResourceEventIntoView(r[0],e,n)}scrollAssignmentIntoView(e,...n){return this.scrollResourceEventIntoView(e.resource,e.event,...n)}async scrollResourceEventIntoView(e,n,r=Sb){var i;const o=this,s=n.startDate,a=n.endDate,l=n.isScheduled&&s<o.timeAxis.startDate|(a>o.timeAxis.endDate)<<1;let c;if(arguments.length>3&&(r=arguments[3]),null==r.edgeOffset&&(r.edgeOffset=20),l&&!1!==r.extendTimeAxis){const e=o.timeAxis.endDate-o.timeAxis.startDate;if(3===l)o.setTimeSpan(new Date(s.valueOf()-e/2),new Date(a.valueOf()+e/2));else if(o.infiniteScroll){const{visibleDateRange:n}=o,r=n.endMS-n.startMS,i=1&l?1:-1;await o.setTimeSpan(new Date(s.valueOf()-e/2),new Date(s.valueOf()+e/2),{visibleDate:new Date(a.valueOf()+i*r)})}else 1&l?o.setTimeSpan(new Date(s),new Date(s.valueOf()+e)):o.setTimeSpan(new Date(a.valueOf()-e),new Date(a))}if(o.store.tree&&await(null==(i=o.expandTo)?void 0:i.call(o,e)),n.parent&&!n.parent.isRoot&&await this.scrollEventIntoView(n.parent),c=o.getElementFromEventRecord(n,e),c){Gn.isFocusable(c)||(c=c.parentNode);const e=o.timeAxisSubGrid.scrollable;o.timeAxisSubGrid.forceScrollUpdate=!0,await e.scrollIntoView(c,r)}else 3===l&&!1===r.extendTimeAxis?console.warn("You have asked to scroll to an event which is outside the current view and extending timeaxis is disabled"):n.isOccurrence||o.eventStore.isAvailable(n)?n.isScheduled?await o.scrollUnrenderedEventIntoView(e,n,r):await o.scrollResourceIntoView(e,r):console.warn("You have asked to scroll to an event which is not available")}scrollUnrenderedEventIntoView(e,n,r=Sb){return new Promise((i=>{const o=this,s=Object.assign({edgeOffset:20},r,xb),a=o.timeAxisSubGrid.scrollable,l=o.getResourceEventBox(n,e),c=a.viewport;if(!c||!l)return void i();l.x=Math.ceil(l.x),l.y=Math.ceil(l.y),o.rtl&&l.translate(-o.timeAxisViewModel.totalSize+c.width,0),l.translate(c.x-a.scrollLeft,c.y-a.y);const d=o.ion({renderEvent:async({eventRecord:e,element:o,targetElement:s})=>{if(e===n){const e=o||s;d(),await u,r.highlight&&Gn.highlight(e),r.focus&&e.focus(),i()}}}),u=a.scrollIntoView(l,s)}))}scrollResourceIntoView(e,n=Sb){return this.isVertical?this.currentOrientation.scrollResourceIntoView(e,n):this.scrollRowIntoView(e,n)}get widgetClass(){}},SchedulerRegions_default=e=>class SchedulerRegions extends(e||re){static get $name(){return"SchedulerRegions"}getScheduleRegion(e,n,r=!0,i){return this.currentOrientation.getScheduleRegion(...arguments)}getResourceRegion(e,n,r){return this.currentOrientation.getRowRegion(...arguments)}getAssignmentEventBox(e,n){return this.getResourceEventBox(e.event,e.resource,n)}getResourceEventBox(e,n,r=!1,i=!1){return this.currentOrientation.getResourceEventBox(...arguments)}getItemBox(e,n=!1){return e.resources.map((r=>this.getResourceEventBox(e,r,n)))}get widgetClass(){}},Db=["eventLayout","mode","eventColor","eventStyle","tickSize","fillTicks"],SchedulerState_default=e=>class SchedulerState extends(e||re){static get $name(){return"SchedulerState"}getState(){return Et.copyProperties(super.getState(),this,Db)}applyState(e){var n;this.suspendRefresh();let r=Db.slice();"layoutFn"===(null==e?void 0:e.eventLayout)&&(delete e.eventLayout,r.splice(r.indexOf("eventLayout"),1)),(null==(n=null==e?void 0:e.zoomLevelOptions)?void 0:n.width)&&(r=r.filter((e=>"tickSize"!==e))),Et.copyProperties(this,e,r),super.applyState(e),this.resumeRefresh(!0)}get widgetClass(){}},EventSelection_default=e=>class EventSelection extends(e||re){static get $name(){return"EventSelection"}static get configurable(){return{highlightPredecessors:!1,highlightSuccessors:!1,deselectOnClick:!1,deselectAllOnScheduleClick:!0}}static get defaultConfig(){return{multiEventSelect:!1,eventSelectionDisabled:!1,eventSelectedCls:"b-sch-event-selected",triggerSelectionChangeOnRemove:!1,maintainSelectionOnDatasetChange:!0,eventAssignHighlightCls:"b-sch-event-assign-selected",selectedCollection:{}}}afterConstruct(){var e;super.afterConstruct(),null==(e=this.navigator)||e.ion({navigate:"onEventNavigate",thisObj:this})}set selectedCollection(e){e instanceof si||(e=new si(e)),this._selectedCollection=e,e.ion({change:(...e)=>this.project.deferUntilRepopulationIfNeeded("onSelectedCollectionChange",((...e)=>!this.isDestroying&&this.onSelectedCollectionChange(...e)),e),beforeSplice:"onBeforeSelectedCollectionSplice",thisObj:this})}get selectedCollection(){return this._selectedCollection}getActionType(e,n,r){return e.length>0?n.length>0&&r.length>0?"update":n.length>0?"select":"deselect":"clear"}getEventsFromAssignments(e){return oe.unique(e.map((e=>e.event)))}get selectedEvents(){return this.getEventsFromAssignments(this.selectedCollection.values)}set selectedEvents(e){const n=[];null==(e=oe.asArray(e))||e.forEach((e=>{!1!==this.isEventSelectable(e)&&(e.isOccurrence?e.assignments.forEach((r=>{n.push(this.assignmentStore.getOccurrence(r,e))})):n.push(...e.assignments))})),this.selectedCollection.splice(0,this.selectedCollection.count,n)}get selectedAssignments(){return this.selectedCollection.values}set selectedAssignments(e){this.selectedCollection.splice(0,this.selectedCollection.count,e||[])}isEventSelected(e){const{selectedCollection:n}=this;return Boolean(n.count&&n.includes(e.assignments))}isEventSelectable(e){}isAssignmentSelected(e){return this.selectedCollection.includes(e)}select(e,n=!1){e.isAssignment?this.selectAssignment(e,n):this.selectEvent(e,n)}selectEvent(e,n=!1){this.isEventSelected(e)||this.selectEvents([e],n)}selectAssignment(e,n=!1,r){this.isAssignmentSelected(e)||(n?this.selectedCollection.add(e):this.selectedAssignments=e)}deselect(e){e.isAssignment?this.deselectAssignment(e):this.deselectEvent(e)}deselectEvent(e){this.isEventSelected(e)&&this.selectedCollection.remove(...e.assignments)}deselectAssignment(e){this.isAssignmentSelected(e)&&this.selectedCollection.remove(e)}selectEvents(e,n=!1){if(n){const n=e.reduce(((e,n)=>(!1!==this.isEventSelectable(n)&&e.push(...n.assignments),e)),[]);this.selectedCollection.add(n)}else this.selectedEvents=e}deselectEvents(e){this.selectedCollection.remove(e.reduce(((e,n)=>(e.push(...n.assignments),e)),[]))}selectAssignments(e){this.selectedCollection.add(e)}deselectAssignments(e){this.selectedCollection.remove(e)}clearEventSelection(){this.selectedAssignments=[]}onBeforeSelectedCollectionSplice({toAdd:e,toRemove:n,index:r}){const i=this,o=i._selectedCollection.values,s=e,a=n>0?s.slice(r,n+r):[],l=i.getActionType(o,s,a);return!1!==i.trigger("beforeEventSelectionChange",{action:l,selection:i.getEventsFromAssignments(o)||[],selected:i.getEventsFromAssignments(s)||[],deselected:i.getEventsFromAssignments(a)||[]})&&(!1!==i.trigger("beforeAssignmentSelectionChange",{action:l,selection:o,selected:s,deselected:a})&&void 0)}onSelectedCollectionChange({added:e,removed:n}){const r=this,i=r.selectedAssignments,o=e||[],s=n||[];function updateSelection(e,n){const i=e.event;if(i){const{eventAssignHighlightCls:o}=r,s=r.getElementFromAssignmentRecord(e);r.currentOrientation.toggleCls(e,r.eventSelectedCls,n),o&&r.getElementsFromEventRecord(i).forEach((e=>{if(e!==s){const i=r.resolveAssignmentRecord(e);r.currentOrientation.toggleCls(i,o,n),n&&(e.style.animation="none",e.offsetHeight,e.style.animation=""),e.classList.toggle(o,n)}}))}}if(s.forEach((e=>updateSelection(e,!1))),o.forEach((e=>updateSelection(e,!0))),(r.highlightSuccessors||r.highlightPredecessors)&&r.highlightLinkedEvents(r.selectedEvents),r.$selectedAssignments=i.map((e=>({eventId:e.eventId,resourceId:e.resourceId}))),!r.silent){const e=this.getActionType(i,o,s);r.trigger("assignmentSelectionChange",{action:e,selection:i,selected:o,deselected:s}),r.trigger("eventSelectionChange",{action:e,selection:r.selectedEvents,selected:r.getEventsFromAssignments(o),deselected:r.getEventsFromAssignments(s)})}}onAssignmentChange(e){super.onAssignmentChange(e);const n=this,{action:r,records:i}=e;if(n.silent=!n.triggerSelectionChangeOnRemove,"remove"===r)n.deselectAssignments(i);else if("removeall"!==r||n.eventStore.isSettingData){if("dataset"===r&&n.$selectedAssignments)if(n.maintainSelectionOnDatasetChange){const e=n.$selectedAssignments.map((e=>i.find((n=>n.eventId===e.eventId&&n.resourceId===e.resourceId))));n.selectedAssignments=oe.clean(e)}else n.clearEventSelection()}else n.clearEventSelection();n.silent=!1}onInternalEventStoreChange({source:e,action:n,records:r}){e.isResourceTimeRangeStore||"dataset"!==n||r.length||this.clearEventSelection(),super.onInternalEventStoreChange(...arguments)}onAssignmentSelectionClick(e,n){const r=this;r.isAssignmentSelected(n)?(r.deselectOnClick||e.ctrlKey)&&r.deselectAssignment(n,r.multiEventSelect,e):!1!==this.isEventSelectable(n.event)&&r.selectAssignment(n,e.ctrlKey&&r.multiEventSelect,e)}onEventNavigate({event:e,item:n}){if(!this.eventSelectionDisabled){const r=n&&(n.nodeType===Element.ELEMENT_NODE?this.resolveAssignmentRecord(n):n);r?this.onAssignmentSelectionClick(e,r):this.deselectAllOnScheduleClick&&this.clearEventSelection()}}changeHighlightSuccessors(e){return this.changeLinkedEvents(e)}changeHighlightPredecessors(e){return this.changeLinkedEvents(e)}changeLinkedEvents(e){const n=this;return e?(n.highlighted=n.highlighted||new Set,n.highlightLinkedEvents(n.selectedEvents)):n.highlighted&&n.highlightLinkedEvents(),e}highlightLinkedEvents(e=[]){const n=this,{highlighted:r,eventStore:i}=n,o=n.features.dependencies;r.forEach((n=>{e.includes(n)||(n.meta.highlight=!1,r.delete(n),i.includes(n)&&n.dependencies.forEach((e=>o.unhighlight(e,"b-highlight"))))})),e.forEach((e=>{const i=[e];for(;i.length;){const e=i.pop();r.add(e),n.highlightSuccessors&&e.outgoingDeps.forEach((e=>{o.highlight(e,"b-highlight"),!r.has(e.toEvent)&&i.push(e.toEvent)})),n.highlightPredecessors&&e.incomingDeps.forEach((e=>{o.highlight(e,"b-highlight"),!r.has(e.fromEvent)&&i.push(e.fromEvent)}))}r.forEach((e=>e.meta.highlight=!0))})),n.element.classList.toggle("b-highlighting",e.length>0),n.refreshWithTransition()}onEventDataGenerated(e){(this.highlightSuccessors||this.highlightPredecessors)&&(e.cls["b-highlight"]=e.eventRecord.meta.highlight),super.onEventDataGenerated(e)}updateProject(e,n){this.clearEventSelection(),super.updateProject(e,n)}doDestroy(){var e;null==(e=this._selectedCollection)||e.destroy(),super.doDestroy()}get widgetClass(){}},preventDefault=e=>e.preventDefault(),Eb={ArrowRight:1,ArrowLeft:1,ArrowUp:1,ArrowDown:1},Rb={animate:100},kb=Object.freeze({}),EventNavigation_default=e=>class EventNavigation extends(Delayable_default(e||re)){static get $name(){return"EventNavigation"}static get configurable(){return{navigator:{allowCtrlKey:!0,scrollSilently:!0,keys:{Space:"onEventSpaceKey",Enter:"onEventEnterKey",Delete:"onDeleteKey",Backspace:"onDeleteKey",ArrowUp:"onArrowUpKey",ArrowDown:"onArrowDownKey",Escape:"onEscapeKey",Tab:"onTab","SHIFT+Tab":"onShiftTab"}},isNavigationKey:{ArrowDown:1,ArrowUp:1,ArrowLeft:1,ArrowRight:1}}}static get defaultConfig(){return{focusCls:"b-active",enableDeleteKey:!0,onDeleteKeyBuffer:500,navigatePreviousBuffer:200,navigateNextBuffer:200,testConfig:{onDeleteKeyBuffer:1}}}construct(e){const n=this;n.isInTimeAxis=n.isInTimeAxis.bind(n),n.onDeleteKey=n.throttle(n.onDeleteKey,n.onDeleteKeyBuffer,n),super.construct(e)}changeNavigator(e){const n=this;return n.getConfig("subGridConfigs"),new wl(n.constructor.mergeConfigs({ownerCmp:n,target:n.timeAxisSubGridElement,processEvent:n.processEvent,itemSelector:`.${n.eventCls}-wrap`,focusCls:n.focusCls,navigatePrevious:n.throttle(n.navigatePrevious,{delay:n.navigatePreviousBuffer,throttled:preventDefault}),navigateNext:n.throttle(n.navigateNext,{delay:n.navigateNextBuffer,throttled:preventDefault})},e))}doDestroy(){this.navigator.destroy(),super.doDestroy()}isInTimeAxis(e){return!e.instanceMeta(this).excluded&&this.timeAxis.isTimeSpanInAxis(e)}onElementKeyDown(e){var n,r,i;const o=this,{navigator:s}=o;if(-1===(null==(n=o.focusedCell)?void 0:n.rowIndex)||(null==(r=o.focusedCell)?void 0:r.column)!==o.timeAxisColumn||e.target.closest(s.itemSelector)||"Enter"!==e.key)null==(i=super.onElementKeyDown)||i.call(this,e);else{const n=o.getFirstVisibleAssignment();if(n)return o.navigateTo(n,{uiEvent:e}),!1}}getFirstVisibleAssignment(e=this.focusedCell){var n,r,i;const{currentOrientation:o,rowManager:s,eventStore:a}=this;if(this.isHorizontal){let l=o.rowMap.get(s.getRow(e.rowIndex));if(null==l?void 0:l.length)return null==(n=l[0])?void 0:n.elementData.assignmentRecord;if(l=null==(r=o.resourceMap.get(e.id))?void 0:r.eventsData,null==l?void 0:l.length)return null==(i=l.filter((e=>a.isAvailable(e.eventRecord)))[0])?void 0:i.assignmentRecord}else{const e=[...o.resourceMap.values()][0],n=e&&Object.values(e);if(null==n?void 0:n.length)return n.filter((e=>a.isAvailable(e.renderData.eventRecord)))[0].renderData.assignmentRecord}}onGridBodyFocusIn(e){var n;const r=e.target.closest(this.focusableSelector);if(this.timeAxisSubGridElement.contains(e.target)){const i=this,{navigationEvent:o}=i,{target:s}=e,a=s.closest(i.navigator.itemSelector),l=a?i.normalizeCellContext({rowIndex:i.isVertical?0:i.resourceStore.indexOf(i.resolveResourceRecord(s)),column:i.timeAxisColumn,target:s}):new Bd(s);if(a){const{_focusedCell:e}=i;return i._focusedCell=l,void(null==(n=i.onCellNavigate)||n.call(i,i,e,l,o,!0))}if(r&&(!o||Eb[o.key])){const n=i.getFirstVisibleAssignment(l);if(n)return void i.navigateTo(n,{scrollIntoView:Boolean(o&&"mousedown"!==o.type),uiEvent:o||e})}}r&&super.onGridBodyFocusIn(e)}accessibleFocusCell(e,n){if((e=this.normalizeCellContext(e)).columnId!==this.timeAxisColumn.id)return super.focusCell(e,n)}normalizeTarget(e){return e.assignmentRecord}getPrevious(e,n){const r=this,{resourceStore:i}=r,{eventSorter:o}=r.currentOrientation,{startDate:s,endDate:a}=r.timeAxis,l=e.event,c=r.eventStore.getEvents({resourceRecord:e.resource,startDate:s,endDate:a}).filter(this.isInTimeAxis).sort(o);let d=e.resource,u=c[c.indexOf(l)-1];if(!u)for(let e=i.indexOf(d)-1;(!u||n&&u===l)&&e>=0;e--){d=i.getAt(e);const n=r.eventStore.getEvents({resourceRecord:d,startDate:s,endDate:a}).filter(r.isInTimeAxis).sort(o);u=n.length&&n[n.length-1]}return r.assignmentStore.getAssignmentForEventAndResource(u,d)}navigatePrevious(e){const n=this,r=n.getPrevious(n.normalizeTarget(e));return e.preventDefault(),r?(e.ctrlKey||n.clearEventSelection(),n.navigateTo(r,{uiEvent:e})):n.doGridNavigation(e)}getNext(e,n){const r=this,{resourceStore:i}=r,{eventSorter:o}=r.currentOrientation,{startDate:s,endDate:a}=r.timeAxis,l=e.event,c=r.eventStore.getEvents({resourceRecord:e.resource,startDate:s,endDate:a}).filter(this.isInTimeAxis).sort(o);let d=e.resource,u=c[c.indexOf(l)+1];if(!u)for(let e=i.indexOf(d)+1;(!u||n&&u===l)&&e<i.count;e++){d=i.getAt(e);u=r.eventStore.getEvents({resourceRecord:d,startDate:s,endDate:a}).filter(r.isInTimeAxis).sort(o)[0]}return r.assignmentStore.getAssignmentForEventAndResource(u,d)}navigateNext(e){const n=this,r=n.getNext(n.normalizeTarget(e));return e.preventDefault(),r?(e.ctrlKey||n.clearEventSelection(),n.navigateTo(r,{uiEvent:e})):n.doGridNavigation(e)}doGridNavigation(e){e.handled||0!==e.key.indexOf("Arrow")||this[`navigate${e.key.substring(5)}ByKey`](e)}async navigateTo(e,{scrollIntoView:n=!0,uiEvent:r={}}=kb){const i=this,{navigator:o}=i,{skipScrollIntoView:s}=o;e&&(n?(o.disabled=!0,await i.scrollAssignmentIntoView(e,Rb),o.disabled=!1):o.skipScrollIntoView=!0,!i.isDestroyed&&this.getElementFromAssignmentRecord(e)&&(i.activeAssignment=e,o.skipScrollIntoView=s,o.trigger("navigate",{event:r,item:i.getElementFromAssignmentRecord(e).closest(o.itemSelector)})))}set activeAssignment(e){const n=this.getElementFromAssignmentRecord(e,!0);n&&(this.navigator.activeItem=n)}get activeAssignment(){const{activeItem:e}=this.navigator;if(e)return this.resolveAssignmentRecord(e)}get previousActiveEvent(){const{previousActiveItem:e}=this.navigator;if(e)return this.resolveEventRecord(e)}processEvent(e){const n=this,r=e.target.closest(n.eventSelector);return!n.navigator.disabled&&r&&(e.assignmentRecord=n.resolveAssignmentRecord(r),e.eventRecord=n.resolveEventRecord(r),e.resourceRecord=n.resolveResourceRecord(r)),e}onDeleteKey(e){const n=this;if(!n.readOnly&&n.enableDeleteKey){const e=n.eventStore.usesSingleAssignment?n.selectedEvents:n.selectedAssignments;n.removeEvents(e.filter((e=>!e.readOnly)))}}onArrowUpKey(e){this.focusCell({rowIndex:this.focusedCell.rowIndex-1,column:this.timeAxisColumn}),e.handled=!0}onArrowDownKey(e){this.focusedCell.rowIndex<this.resourceStore.count-1&&(this.focusCell({rowIndex:this.focusedCell.rowIndex+1,column:this.timeAxisColumn}),e.handled=!0)}onEscapeKey(e){e.target.closest(".b-dragging")||(this.focusCell({rowIndex:this.focusedCell.rowIndex,column:this.timeAxisColumn}),e.handled=!0)}onEventSpaceKey(e){}onEventEnterKey(e){}get isActionableLocation(){if(!this.navigator.activeItem)return super.isActionableLocation}get widgetClass(){}},Tb={releaseElement:1,reuseElement:1},Mb={newElement:1,reuseOwnElement:1,reuseElement:1},Ab=9999999,heightEventSorter=({startDateMS:e},{startDateMS:n})=>e-n,Ib={startDate:1,endDate:1,duration:1};function getStartEnd(e,n,r,i,o){var s,a;const{timeAxis:l}=e,c=n.isBatchUpdating&&!o?n.get(i):n[i],d=null==(s=n.hasBatchedChange)?void 0:s.call(n,i);if(e.fillTicks&&(!(null==(a=n.meta)?void 0:a.isResizing)||!d)){let e=l.getTickFromDate(c);if(e>=0){r&&e===Math.round(e)&&e>0&&e--;const n=Math.floor(e);return l.getAt(n)[i].getTime()}}return null==c?void 0:c.getTime()}var Fb=class extends(re.mixin(AttachToProjectMixin_default)){static get configurable(){return{scrollBuffer:0,bufferSize:150,verticalBufferSize:150}}static get properties(){return{resourceMap:new Map,rowMap:new Map,eventConfigs:[],isFirstRefresh:!0,toDrawOnProjectRefresh:new Set,toDrawOnDataReady:new Set}}construct(e){const n=this;n.client=n.scheduler=e,n.eventSorter=n.eventSorter.bind(e),e.scrollable.ion({scroll:"onEarlyScroll",prio:1,thisObj:n}),e.rowManager.ion({name:"rowManager",renderDone:"onRenderDone",removeRows:"onRemoveRows",translateRow:"onTranslateRow",offsetRows:"onOffsetRows",beforeRowHeight:"onBeforeRowHeightChange",thisObj:n}),super.construct({})}init(){}updateVerticalBufferSize(){const{rowManager:e}=this.scheduler;this.scheduler.isPainted&&e.renderRows(e.rows)}get visibleDateRange(){return this._visibleDateRange}getDateFromXY(e,n,r,i=!1){const{scheduler:o}=this;let s=e[0];return r||(s=this.translateToScheduleCoordinate(s)),s=o.getRtlX(s),o.timeAxisViewModel.getDateFromPosition(s,n,i)}translateToScheduleCoordinate(e){const{scheduler:n}=this,{scrollable:r}=n.timeAxisSubGrid;let i=e-n.timeAxisSubGridElement.getBoundingClientRect().left-globalThis.scrollX;return n.rtl?i+=r.maxX-Math.abs(n.scrollLeft):i+=n.scrollLeft,i}translateToPageCoordinate(e){const{scheduler:n}=this,{scrollable:r}=n.timeAxisSubGrid;let i=e+n.timeAxisSubGridElement.getBoundingClientRect().left;return n.rtl?i-=r.maxX-Math.abs(n.scrollLeft):i-=n.scrollLeft,i}getScheduleRegion(e,n,r=!0,i,o=!1){var s;const a=this,{scheduler:l}=a,{timeAxisSubGridElement:c,timeAxis:d}=l,u=(!o||e)&&l.getResourceMargin(e)||0;let h;if(e){const r=n&&l.getElementsFromEventRecord(n,e)[0];if(h=Gt.from(l.getRowById(e.id).getElement("normal"),c),r){const e=Gt.from(r,c);h.y=e.y,h.bottom=e.bottom}else h.y=h.y+u,h.bottom=h.bottom-u}else h=Gt.from(c).moveTo(null,0),h.width=c.scrollWidth,h.y=h.y+u,h.bottom=h.bottom-u;const g=d.startDate,p=d.endDate;i=(null==i?void 0:i.start)&&i||(null==(s=l.getDateConstraints)?void 0:s.call(l,e,n))||{start:g,end:p};let m=l.getCoordinateFromDate(i.start?Ct.max(g,i.start):g),f=l.getCoordinateFromDate(i.end?Ct.min(p,i.end):p);return r||(m=a.translateToPageCoordinate(m),f=a.translateToPageCoordinate(f)),h.left=Math.min(m,f),h.right=Math.max(m,f),h}getRowRegion(e,n,r){const{scheduler:i}=this,{timeAxis:o}=i,s=i.getRowById(e.id);if(!s)return null;const a=o.startDate,l=o.endDate,c=n?Ct.max(a,n):a,d=r?Ct.min(l,r):l,u=i.getCoordinateFromDate(c),h=i.getCoordinateFromDate(d,!0,!0),g=s.top,p=Math.min(u,h),m=g+s.offsetHeight;return new Gt(p,g,Math.max(u,h)-p,m-g)}getResourceEventBox(e,n,r,i=!1){const o=this.resourceMap.get(n.id);let s=null,a=!1;if(o&&(s=o.eventsData.find((n=>n.eventRecord===e))),s||(s=this.getTimeSpanRenderData(e,n,{viewport:!0,timeAxis:r}),a=!0),s){const e=this.scheduler.rowManager.getRecordCoords(n,!0,i),r=s.top+e.top,o=new Gt(s.left,r,s.width,s.height);return o.layout=!a,o.rowTop=e.top,o.rowBottom=e.bottom,o.resourceId=n.id,o}return null}resolveRowRecord(e){const n=this,{scheduler:r}=n,i=e.nodeType?e:e.target,o=i.nodeType===Element.TEXT_NODE?i.parentElement:i,s=o.closest(r.eventSelector);return s?n.resourceStore.getById(s.dataset.resourceId):r.getRecordFromElement(o)}attachToProject(e){super.attachToProject(e),this.refreshAllWhenReady=!0,this.scheduler.isConfiguring||this.clearAll({clearDom:!0}),null==e||e.ion({name:"project",refresh:"onProjectRefresh",commitFinalized:"onProjectCommitFinalized",thisObj:this})}onProjectCommitFinalized(){const{scheduler:e,toDrawOnDataReady:n,project:r}=this;e.isVisible?e.isPainted&&!e.refreshSuspended&&(!n.size&&null!=r.timeZone&&r.ignoreRecordChanges&&r.resourceStore.forEach((e=>n.add(e.id))),n.size&&(this.clearResources(n),this.refreshResources(n)),n.clear()):e.whenVisible("refreshRows")}onProjectRefresh({isCalculated:e,isInitialCommit:n}){const r=this,{scheduler:i,toDrawOnProjectRefresh:o}=r;if(i.isVisible){if(i.isPainted&&!i.isConfiguring&&!i.refreshSuspended){if(r.refreshAllWhenReady||n&&e){i.calculateAllRowHeights(!0);const{rowManager:o}=i;o.topRow?(r.clearAll(),i.refreshAfterProjectRefresh||(o.topRow.dataIndex>=i.store.count?i.renderRows(!1):i.refreshWithTransition(!1,!r.isFirstRefresh&&e&&!n)),r.isFirstRefresh=!1):o.reinitialize(),r.refreshAllWhenReady=!1}else o.size&&r.refreshResources(o);o.clear()}}else i.whenVisible("refresh",i,[!0])}attachToAssignmentStore(e){this.refreshAllWhenReady=!0,super.attachToAssignmentStore(e),e&&e.ion({name:"assignmentStore",changePreCommit:"onAssignmentStoreChange",refreshPreCommit:"onAssignmentStoreRefresh",thisObj:this})}onAssignmentStoreChange({source:e,action:n,records:r=[],replaced:i,changes:o}){const s=this,{scheduler:a}=s,l=new Set(r.flatMap((e=>{var n,r,i;return[e.resourceId,...null!=(i=null==(r=null==(n=e.resource)?void 0:n.$links)?void 0:r.map((e=>e.id)))?i:[]]})));if(!s.resourceStore.isRemoving&&!s.resourceStore.isChangingId)switch(n){case"dataset":return void(s.eventStore.usesSingleAssignment||(l.size?s.refreshResourcesWhenReady(l):(s.clearAll(),a.refreshWithTransition())));case"add":case"remove":case"updateMultiple":return void s.refreshResourcesWhenReady(l);case"removeall":return void(s.refreshAllWhenReady=!0);case"replace":return i.forEach((([e,n])=>{l.add(e.resourceId),l.add(n.resourceId)})),void s.refreshResourcesWhenReady(l);case"filter":return s.clearAll(),a.calculateAllRowHeights(!0),void a.refreshWithTransition();case"update":("eventId"in o||"resourceId"in o||"id"in o)&&("resourceId"in o&&l.add(o.resourceId.oldValue),e===a.project.assignmentStore?s.refreshResourcesOnDataReady(l):s.refreshResources(l));break;case"clearchanges":{const{added:e,modified:n,removed:r}=o;n.length?a.refreshWithTransition():(e.forEach((e=>l.add(e.resourceId))),r.forEach((e=>l.add(e.resourceId))),s.refreshResourcesOnDataReady(l))}}}onAssignmentStoreRefresh({action:e,records:n}){"batch"===e&&(this.clearAll(),this.scheduler.refreshWithTransition())}attachToEventStore(e){this.refreshAllWhenReady=!0,super.attachToEventStore(e),e&&e.ion({name:"eventStore",refreshPreCommit:"onEventStoreRefresh",thisObj:this})}onEventStoreRefresh({action:e}){if("batch"===e){const{scheduler:e}=this;e.isEngineReady&&e.isPainted&&(this.clearAll(),e.refreshWithTransition())}}onEventStoreChange({action:e,records:n=[],record:r,replaced:i,changes:o,source:s}){var a,l;const c=this,{scheduler:d}=c,u=s.isResourceTimeRangeStore,h=new Set;if(d.isPainted)if(n.forEach((e=>{var n;const r=null==(n=e.$linkedResources)?void 0:n.filter((e=>c.resourceStore.includes(e)));null==r||r.forEach((e=>h.add(e.id)))})),u){switch(e){case"removeall":case"dataset":return c.clearAll(),void d.refreshWithTransition()}c.refreshResources(h)}else{switch(e){case"batch":case"sort":case"group":case"move":case"remove":return;case"clearchanges":return c.clearAll(),void d.refreshWithTransition();case"dataset":return c.clearAll(),void(d.isEngineReady?d.refreshWithTransition():c.refreshAllWhenReady=!0);case"add":case"updateMultiple":break;case"replace":i.forEach((([,e])=>{e.resources.map((e=>h.add(e.id)))}));break;case"removeall":case"filter":return d.isEngineReady?(c.clearAll(),d.calculateAllRowHeights(!0),void d.refreshWithTransition()):void(c.refreshAllWhenReady=!0);case"update":{const e=r.$entity?!Object.keys(o).some((e=>!r.$entity.getField(e))):!Object.keys(o).some((e=>!Ib[e]));let n=0;return"startDate"in o&&n++,"endDate"in o&&n++,"duration"in o&&n++,"resourceId"in o&&h.add(o.resourceId.oldValue),void(h.size&&(!e||n&&(!("duration"in o)||1!==n)||"percentDone"in o||"inactive"in o||"constraintDate"in o||"constraintType"in o||"segments"in o)&&((null==(a=c.project)?void 0:a.propagatingLoadChanges)||(null==(l=c.project)?void 0:l.isWritingData)?c.refreshResourcesOnDataReady(h):c.refreshResources(h)))}}c.refreshResourcesWhenReady(h)}}attachToResourceStore(e){this.refreshAllWhenReady=!0,super.attachToResourceStore(e),e&&(this.clearAll({clearLayoutCache:!0}),e.ion({name:"resourceStore",changePreCommit:"onResourceStoreChange",thisObj:this}))}get resourceStore(){return this.client.store}onResourceStoreChange({action:e,isExpand:n,records:r,changes:i}){const o=this,s=null==r?void 0:r.flatMap((e=>e.isLinked?[e.id,e.$originalId]:[e.id]));if(o.scheduler.isPainted){switch(e){case"add":return void(n||(r.every((e=>e.isLinked))?o.refreshResources(s):o.refreshResourcesWhenReady(s)));case"update":return void(o.project.isBatchingChanges||i.isLeaf||o.refreshResources(s));case"filter":case"dataset":return;case"removeall":return void o.clearAll({clearLayoutCache:!0})}s&&o.clearResources(s)}}onTranslateRow({row:e}){null!=e.id&&this.refreshEventsForResource(e,!1)}onOffsetRows(){this.clearAll(),this.doUpdateTimeView()}calculateRowHeight(e){var n;const{scheduler:r}=this,i=r.getResourceHeight(e),o=r.getEventLayout(e);if("stack"===o.type&&r.isEngineReady&&!e.isSpecialRow&&(null==(n=e.assigned)?void 0:n.size)>1){const{assignmentStore:n,eventStore:i,timeAxis:s}=r,{barMargin:a,resourceMargin:l,contentHeight:c}=r.getResourceLayoutSettings(e),d=(i.isFiltered||n.isFiltered)&&(r=>r.assignments.some((r=>r.resource===e.$original&&n.includes(r)))),u=i.getEvents({resourceRecord:e,includeOccurrences:r.enableRecurringEvents,startDate:s.startDate,endDate:s.endDate,filter:d}).sort(heightEventSorter).map((n=>{const r=n.isBatchUpdating?n.get("startDate"):n.startDate,i=n.isBatchUpdating?n.get("endDate"):n.endDate||r;return{eventRecord:n,resourceRecord:e,startMS:r.getTime(),endMS:i.getTime()}})),h=r.getEventLayoutHandler(o),g=h.layoutEventsInBands(u,e,!0);return"layoutFn"===h.type?g:g*c+(g-1)*a+2*l}return i}doUpdateTimeView(){const{scrollable:e}=this.scheduler.timeAxisSubGrid;this.updateFromHorizontalScroll(e.x)}onTimeAxisViewModelUpdate(){const e=this,{scheduler:n}=e;e.clearAll(),n.refreshSuspended&&(e.detachListeners("renderingSuspend"),n.ion({name:"renderingSuspend",resumeRefresh({trigger:r}){n.isEngineReady&&r&&e.doUpdateTimeView()},thisObj:e,once:!0})),e.doUpdateTimeView()}getConnectorStartSide(e){return"start"}getConnectorEndSide(e){return"end"}refreshRows(e){e&&this.clearAll()}onLocaleChange(){this.clearAll()}onViewportResize(e,n,r,i){n>i&&this.onRenderDone()}onDragAbort({context:e,dragData:n}){this.resourceStore.indexOf(n.record.resource)<this.scheduler.topRow.dataIndex&&e.element.remove()}toggleCls(e,n,r=!0,i=!1){const o=this.client.getElementFromAssignmentRecord(e,i),s=this.resourceMap.get(e.isModel?e.get("resourceId"):e.resourceId),a=null==s?void 0:s.eventsData.find((n=>n.eventId===e.eventId));a&&(a[i?"wrapperCls":"cls"][n]=r),o&&(o.classList[r?"add":"remove"](n),o.lastDomConfig.className[n]=r)}onRemoveRows({rows:e}){e.forEach((e=>this.rowMap.delete(e))),this.onRenderDone()}onEarlyScroll(){this.rendererCalled=!1}updateFromVerticalScroll(){this.fromScroll=!0,this.rendererCalled||this.onRenderDone()}updateFromHorizontalScroll(e){const n=this,{scheduler:r,scrollBuffer:i}=n,{timeAxisSubGrid:o,timeAxis:s,rtl:a}=r,{width:l}=o,{totalSize:c}=r.timeAxisViewModel,d=e,u=0!==o.scrollable.maxX&&Math.abs(o.scrollable.maxX)<=Math.round(d)+5,h=r.getDateFromCoord({coord:Math.max(0,d-i),ignoreRTL:!0}),g=u?s.endDate:r.getDateFromCoord({coord:d+l+i,ignoreRTL:!0})||s.endDate;if(h&&!r._viewPresetChanging){n._visibleDateRange={startDate:h,endDate:g,startMS:h.getTime(),endMS:g.getTime()},n.viewportCoords=a?{left:c-e-l+i,right:c-e-i}:{left:e-i,right:e+l+i};const o=r.timeView.range={startDate:h,endDate:g};if(r.onVisibleDateRangeChange(o),!r.refreshSuspended&&r.rowManager.rows.length){if(null===r.rowManager.rows[0].id)return;n.fromScroll=!0,r.rowManager.rows.forEach((e=>n.refreshEventsForResource(e,!1,!1))),n.onRenderDone()}}}repaintEventsForResource(e){this.refreshResources([e.id])}onBeforeRowHeightChange(){this.clearAll()}refreshResourcesOnDataReady(e){e.forEach((e=>this.toDrawOnDataReady.add(e)))}refreshResourcesWhenReady(e){this.clearResources(e),e.forEach((e=>this.toDrawOnProjectRefresh.add(e)))}refreshResources(e,n=!0){const{scheduler:r}=this,i=[],o=[];this.clearResources(e),r.refreshSuspended||(e.forEach((e=>{const n=r.getRowById(e);n?i.push(n):o.push(n)})),r.runWithTransition((()=>{r.calculateRowHeights(o.map((e=>this.resourceStore.getById(e))),!0),r.rowManager.renderRows(i)}),n))}layoutEventVerticallyStack(e,n,r){const{barMargin:i,resourceMargin:o,contentHeight:s}=this.scheduler.getResourceLayoutSettings(r,n.parent);return 0===e?o:o+e*s+e*i}layoutEventVerticallyPack(e,n,r,i){const{barMargin:o,resourceMargin:s,contentHeight:a}=this.scheduler.getResourceLayoutSettings(i,r.parent),l=1/n,c=e*l,d=(a-(l-1)*o)*n;return{top:s+c*d+c*o,height:d}}addTemporaryDragElement(e,n=e.resource){const{scheduler:r}=this,i=r.generateRenderData(e,n,{timeAxis:!0,viewport:!0});i.absoluteTop=i.row?i.top+i.row.top:r.getResourceEventBox(e,n,!0).top;const o=this.renderEvent(i),{dataset:s}=o;delete o.tabIndex,delete s.eventId,delete s.resourceId,delete s.assignmentId,delete s.syncId,s.transient=!0,o.parent=this.scheduler.foregroundCanvas,o.retainElement=!0;const a=Gn.createElement(o);return a.innerElement=a.firstChild,e.instanceMeta(r).hasTemporaryDragElement=!0,a}eventSorter(e,n){if(this.overlappingEventSorter)return this.overlappingEventSorter(e.eventRecord||e,n.eventRecord||n);const r=e.isModel?e.startDateMS:e.dataStartMS||e.startMS,i=e.isModel?e.endDateMS:e.dataEndMS||e.endMS,o=n.isModel?n.startDateMS:n.dataStartMS||n.startMS,s=n.isModel?n.endDateMS:n.dataEndMS||n.endMS,a=e.isModel?e.name:e.eventRecord.name,l=n.isModel?n.name:n.eventRecord.name;return r-o||s-i||(a<l?-1:a==l?0:1)}calculateMS(e,n,r,i,o){const{scheduler:s}=this,{timeAxisViewModel:a}=s;let l=getStartEnd(s,e,!1,n,i),c=getStartEnd(s,e,!0,r,i),d=c-l;if("default"!==s.milestoneLayoutMode&&0===d){const n=a.getSingleUnitInPixels("minute");if(d=60*(s.getMilestoneLabelWidth(e,o)*(1/n))*1e3,"always-outside"===s.milestoneTextPosition){l-=s.getResourceLayoutSettings(o,e.parent).contentHeight*(1/n)*60*1e3/2,c=l+d}else switch(s.milestoneAlign){case"start":case"left":c=l+d;break;case"end":case"right":c=l,l=c-d;break;default:c=l+d/2,l=c-d}}return{startMS:l,endMS:c,durationMS:d}}setupRenderData(e,n){var r;const i=this,{scheduler:o}=i,{timeAxis:s,timeAxisViewModel:a}=o,{preamble:l,postamble:c}=e,d=i.isProHorizontalRendering&&(null==(r=o.features.eventBuffer)?void 0:r.enabled)&&(l||c)&&!e.isMilestone,u=a.getSingleUnitInPixels("minute"),{isBatchUpdating:h}=e,g=d?"wrapStartDate":"startDate",p=d?"wrapEndDate":"endDate",m=h&&!d?e.get(g):e[g],f=h&&!d?e.get(p):e[p]||m,b=s.startMS,v=s.endMS,{startMS:y,endMS:w,durationMS:C}=i.calculateMS(e,g,p,d,n),S=y<b|(y>v)<<1,x=w>v|(w<=b)<<1,D=x?u*(C/6e4):null,E=o.getRowById(n);return{eventRecord:e,taskRecord:e,start:m,end:f,rowId:n.id,children:[],startMS:y,endMS:w,durationMS:C,startsOutsideView:S,endsOutsideView:x,width:D,row:E,useEventBuffer:d}}fillTimeSpanHorizontalPosition(e){const{startMS:n,endMS:r,durationMS:i}=e,o=null!=n&&null!=r&&this.calculateHorizontalPosition(e,n,r,i);return!!o&&(Object.assign(e,o),!0)}calculateHorizontalPosition(e,n,r,i){const{scheduler:o}=this,{timeAxis:s,timeAxisViewModel:a}=o,{startsOutsideView:l,endsOutsideView:d,eventRecord:u}=e,h=s.startMS,g=a.getSingleUnitInPixels("minute"),p=d?g*(i/6e4):null;let m,f=o.getCoordinateFromDate(r,{local:!0,respectExclusion:!0,isEnd:!0}),b=!1,v=!1;return l?(m=(n-h)/6e4*g,o.rtl&&(m=o.timeAxisSubGrid.scrollable.scrollWidth-m)):(m=o.getCoordinateFromDate(n,{local:!0,respectExclusion:!0,isEnd:!1,snapToNextIncluded:-1!==f}),b=-1===m),d?f=c.isSafari&&o.features.stickyEvents&&s.endMS||-1===f&&!s.continuous?o.getCoordinateFromDate(s.endMS):m+p*(o.rtl?-1:1):v=-1===f,v&&!b&&(f=o.getCoordinateFromDate(r,{local:!0,respectExclusion:!0,isEnd:!0,snapToNextIncluded:!0})),p>Ab&&(1===l?1===d?(m=-100,f=o.timeAxisColumn.width+100):m=f-Ab:1===d&&(f=m+Ab)),b&&v&&(m=o.getCoordinateFromDate(n,{local:!0,respectExclusion:!0,isEnd:!1,snapToNextIncluded:!0,max:r}),f=o.getCoordinateFromDate(r,{local:!0,respectExclusion:!0,isEnd:!0,snapToNextIncluded:!0,min:n}),m===f)?(u.instanceMeta(o).excluded=!0,null):{left:Math.min(m,f),width:Math.abs(f-m)||(u.isMilestone&&!u.meta.isDragCreating?0:6),clippedStart:b,clippedEnd:v}}fillTimeSpanVerticalPosition(e,n){const{scheduler:r}=this,{start:i,end:o}=e,{resourceMargin:s,contentHeight:a}=r.getResourceLayoutSettings(n);r.fillTicks&&(e.dataStartMS=i.getTime(),e.dataEndMS=o.getTime()),e.top=Math.max(0,s),r.managedEventSizing&&(e.height=a)}getTimeSpanRenderData(e,n,r=!1){const i=this,{scheduler:o}=i,{timeAxis:s}=o,a=!0===r||r.timeAxis,l=!0===r||r.viewport;if(a||s.isTimeSpanInAxis(e)){if(o.getRowById(n)||l){const r=i.setupRenderData(e,n);return i.fillTimeSpanHorizontalPosition(r)?(i.fillTimeSpanVerticalPosition(r,n),r):null}}}layoutEvents(e,n,r=!1,i,o){const{scheduler:s}=this,{timeAxis:a}=s,l=n.reduce(((n,i)=>{if(r||a.isTimeSpanInAxis(i)){const r=s.generateRenderData(i,e,!1);r&&n.push(r)}return n}),[]);l.sort(null!=o?o:this.eventSorter);let c=s.getAppliedResourceHeight(e,i);const d=l.filter((({eventRecord:e})=>e.isEvent&&!e.meta.excludeFromLayout)),u=s.getEventLayout(e,i),h=s.getEventLayoutHandler(u);if(h){const{barMargin:n,resourceMargin:r,contentHeight:o}=s.getResourceLayoutSettings(e,i),a=h.applyLayout(d,e)||1;c="layoutFn"===h.type?a:a*o+(a-1)*n+2*r}else if(d.length>0)for(let e=0;e<d.length;e++){d[e].wrapperStyle+=`;z-index:${e+5}`}return{rowHeight:c,eventsData:l}}layoutResourceEvents(e,n=!1){const{scheduler:r}=this,{eventStore:i,assignmentStore:o,timeAxis:s}=r,a=i.getEvents({includeOccurrences:r.enableRecurringEvents,resourceRecord:e,startDate:s.startDate,endDate:s.endDate,filter:(o.isFiltered||i.isFiltered)&&(n=>n.assignments.some((n=>n.resource===e.$original&&o.includes(n))))}),l=r.getEventsToRender(e,a)||[];return this.layoutEvents(e,l,n)}renderEvent(e,n){const{scheduler:r}=this,{resourceRecord:i,assignmentRecord:o,eventRecord:s}=e,{milestoneLayoutMode:a,milestoneTextPosition:l}=r,c=o?this.assignmentStore.getOccurrence(o,s).id:e.eventId,d={className:e.cls,style:e.style||"",children:e.children,role:"presentation",dataset:{taskFeature:"event"},syncOptions:{syncIdField:"taskBarFeature"}},u={className:e.wrapperCls,tabIndex:"tabIndex"in e?e.tabIndex:-1,children:[d,...e.wrapperChildren],style:{top:e.absoluteTop,left:e.left,height:e.fillSize?n:e.height,width:!s.isMilestone||s.meta.isDragCreating||("default"!==a||"outside"!==l&&("inside"!==l||e.width))&&"always-outside"!==l?e.width:e.height,style:e.wrapperStyle,fontSize:e.height+"px"},dataset:{resourceId:i.id,eventId:e.eventId,syncId:i.isLinked?`${c}_${i.id}`:c},elementData:e,retainElement:(null==o?void 0:o.instanceMeta(r).retainElement)||s.instanceMeta(r).retainElement,syncOptions:{syncIdField:"taskFeature",releaseThreshold:0}};return e.fillSize&&(e.height=n),e.zIndex&&(u.zIndex=e.zIndex),o&&(u.dataset.assignmentId=o.id),e.elementConfig=u,u}refreshEventsForResource(e,n=!0,r=!0){const i=this,o=i.scheduler.store.getById(e.isRow?e.id:e),s=i.scheduler.rowManager.getRowFor(o);n&&i.clearResources([o]),s&&o&&(i.renderer({row:s,record:o}),n&&r&&i.onRenderDone())}getResourceLayout(e){const n=this;let r=n.resourceMap.get(e.id);if(!r||r.invalid){if(n.suspended)return;r=n.layoutResourceEvents(e,!1),n.resourceMap.set(e.id,r)}return r}getEventDOMConfigForCurrentView(e,n,r,i){const o=this,{bufferSize:s,scheduler:a}=o,{labels:l,eventBuffer:c}=a.features,d=(null==c?void 0:c.enabled)||(null==l?void 0:l.enabled)&&(l.left||l.right||l.before||l.after),{eventsData:u}=e,h=o.fromScroll?o.rowMap.get(n):null,g=[];let p,m;for(let a=0;a<u.length;a++){const l=u[a];if(p=r,m=i,(d||0===l.width)&&(p-=s,m+=s),l.left+l.width>=p&&l.left<=m){l.absoluteTop=l.top+n.top;const r=null==h?void 0:h.find((e=>e.elementData.eventId===l.eventId&&e.elementData.resourceId===l.resourceId));g.push(null!=r?r:o.renderEvent(l,e.rowHeight))}}return g}renderer({row:e,record:n,size:r={}}){const i=this;if(n.isSpecialRow)return void i.rowMap.delete(e);const{left:o,right:s}=i.viewportCoords,a=i.getResourceLayout(n);if(!a)return;r.height=a.rowHeight,r.transient=!0;const l=i.getEventDOMConfigForCurrentView(a,e,o,s);i.rowMap.set(e,l),i.rendererCalled=!0}onRenderDone(){var e;const{scheduler:n,rowMap:r,verticalBufferSize:i}=this,o=[],s=null!=(e=n._scrollTop)?e:0,a=s-i,l=s+n._bodyRectangle.height+i,c=i<0,d=!n.managedEventSizing;r.forEach(((e,n)=>{if(c||n.bottom>a&&n.top<l)for(let n=0;n<e.length;n++){const r=e[n],i=r.elementData,{absoluteTop:s,eventRecord:u}=i;(c||d||u.meta.isDragCreating||u.meta.isResizing||s+i.height>a&&s<l)&&o.push(r)}for(let n=0;n<e.length;n++)e[n]={...e[n]}})),this.fromScroll=!1,this.visibleEventDOMConfigs=o,$o.sync({domConfig:{onlyChildren:!0,children:o},targetElement:n.foregroundCanvas,syncIdField:"syncId",callback({action:e,domConfig:r,lastDomConfig:i,targetElement:o,jsx:s}){var a,l,c;const{reactComponent:d}=n,u=Tb[e],h=Mb[e];if(!u&&(null==(a=n.processEventContent)||a.call(n,{jsx:s,action:e,domConfig:r,targetElement:o,isRelease:u,reactComponent:d})),"none"!==e&&(null==(l=null==r?void 0:r.elementData)?void 0:l.isWrap)){if(u&&(null==i?void 0:i.elementData)){const{eventRecord:e,resourceRecord:r,assignmentRecord:s}=i.elementData,a={renderData:i.elementData,element:o,eventRecord:e,resourceRecord:r,assignmentRecord:s};null==(c=n.processEventContent)||c.call(n,{isRelease:u,targetElement:o,reactComponent:d,assignmentRecord:s}),o===Gn.getActiveElement(o)&&n.focusElement.focus(),n.trigger("releaseEvent",a)}if(h){const{eventRecord:i,resourceRecord:s,assignmentRecord:a}=r.elementData,l={renderData:r.elementData,element:o,isReusingElement:"reuseElement"===e,isRepaint:"reuseOwnElement"===e,eventRecord:i,resourceRecord:s,assignmentRecord:a};n.trigger("renderEvent",l)}}}})}clearResources(e){(e=oe.asArray(e)).map(Ur.asId).forEach((e=>{const n=this.resourceMap.get(e);n&&(n.invalid=!0);const r=this.scheduler.getRowById(e);r&&this.rowMap.delete(r)}))}clearAll({clearDom:e=!1,clearLayoutCache:n=!1}={}){const r=this,{layouts:i,foregroundCanvas:o}=r.scheduler;if(n&&i)for(const e in i)i[e].clearCache();if(o&&e){o.syncIdMap=o.lastDomConfig=null;for(const e of o.children)e.lastDomConfig=e.elementData=null}r.resourceMap.clear(),r.rowMap.clear()}};__publicField(Fb,"$name","HorizontalRendering"),Fb._$name="HorizontalRendering";var Pb=class extends(PackMixin_default()){static get defaultConfig(){return{coordProp:"leftFactor",sizeProp:"widthFactor"}}applyLayout(e,n,r,i,o,s){const a=this,l=s.type;return a.packEventsInBands(e,((e,o,s,c)=>{if("none"===l)e.width=n-2*r,e.left+=r;else{e.widthFactor=c;const a=e.leftFactor=s.start+o*c,d=Math.round(1/c),u=a/c,h=n-2*r-i*(d-1);"mixed"===l&&2===d?(e.left+=a*n/5+i,e.width=n-a*n/5-2*i,e.zIndex=5+u):(e.width=c*h,e.left+=a*h+r+i*u)}e.cls["b-sch-event-narrow"]=e.width<a.scheduler.narrowEventWidth}))}};Pb._$name="VerticalLayout";var Ob={releaseElement:1,reuseElement:1},Lb={newElement:1,reuseOwnElement:1,reuseElement:1},_b={startDate:1,endDate:1,duration:1},$b=Object.freeze({}),jb=class extends(re.mixin(Delayable_default,AttachToProjectMixin_default)){static get properties(){return{eventMap:new Map,resourceMap:new Map,releasedElements:{},toDrawOnProjectRefresh:new Set,resourceBufferSize:1}}construct(e){this.client=this.scheduler=e,this.verticalLayout=new Pb({scheduler:e}),super.construct({})}init(){const e=this,{scheduler:n,resourceColumns:r}=e;r.resourceStore=e.resourceStore,r.ion({name:"resourceColumns",columnWidthChange:"onResourceColumnWidthChange",thisObj:e}),e.initialized=!0,n.isPainted&&e.renderer(),r.availableWidth=n.timeAxisSubGridElement.offsetWidth}resolveRowRecord(e,n){const r=this,{scheduler:i}=r,o=e.nodeType?null:e,s=o?o.target:e,a=o?[o.borderOffsetX,o.borderOffsetY]:n,l=(s.nodeType===Element.TEXT_NODE?s.parentElement:s).closest(i.eventSelector);if(l)return i.resourceStore.getById(l.dataset.resourceId);if(!s.closest(".b-sch-timeaxis-cell"))return null;if(!a)throw new Error("Vertical mode needs coordinates to resolve this element. Can also be called with a browser\n                event instead of element to extract element and coordinates from");if(i.variableColumnWidths||i.resourceStore.isGrouped){let e=0;for(const n of r.resourceStore)if(n.isSpecialRow||(e+=n.columnWidth||r.resourceColumns.columnWidth),e>=a[0])return n;return null}const c=Math.floor(a[0]/r.resourceColumns.columnWidth);return r.allResourceRecords[c]}toggleCls(e,n,r=!0,i=!1){var o;const s=null==(o=this.eventMap.get(e.eventId))?void 0:o[e.resourceId];if(s){s.renderData[i?"wrapperCls":"cls"][n]=r;const o=this.client.getElementFromAssignmentRecord(e,i);o&&o.classList[r?"add":"remove"](n)}}getDateFromXY(e,n,r,i=!1){let o=e[1];return r||(o=this.translateToScheduleCoordinate(o)),this.scheduler.timeAxisViewModel.getDateFromPosition(o,n,i)}translateToScheduleCoordinate(e){return e-this.scheduler.timeAxisSubGridElement.getBoundingClientRect().top-globalThis.scrollY}translateToPageCoordinate(e){return e+this.scheduler.timeAxisSubGridElement.getBoundingClientRect().top+globalThis.scrollY}getResourceEventBox(e,n){var r,i,o;const s=e.id,a=n.id;let{renderData:l}=(null==(r=this.eventMap.get(s))?void 0:r[a])||$b;return l||(this.layoutResourceEvents(this.scheduler.resourceStore.getById(a)),l=null==(o=null==(i=this.eventMap.get(s))?void 0:i[a])?void 0:o.renderData),l?new Gt(l.left,l.top,l.width,l.bottom-l.top):null}getScheduleRegion(e,n,r){var i;const o=this,{scheduler:s}=o,a=Gt.from(s.timeAxisSubGridElement,s.timeAxisSubGridElement);e&&(a.left=o.allResourceRecords.indexOf(e)*s.resourceColumnWidth,a.right=a.left+s.resourceColumnWidth);const l=s.timeAxis.startDate,c=s.timeAxis.endDate,d=(null==(i=s.getDateConstraints)?void 0:i.call(s,e,n))||{start:l,end:c},u=s.getCoordinateFromDate(Ct.max(l,d.start)),h=s.getCoordinateFromDate(Ct.min(c,d.end));return r?(a.top=u,a.bottom=h):(a.top=o.translateToPageCoordinate(u),a.bottom=o.translateToPageCoordinate(h)),a}getRowRegion(e,n,r){const{scheduler:i}=this,o=this.allResourceRecords.indexOf(e)*i.resourceColumnWidth,s=i.timeAxis.startDate,a=i.timeAxis.endDate,l=n?Ct.max(s,n):s,c=r?Ct.min(a,r):a,d=i.getCoordinateFromDate(l),u=i.getCoordinateFromDate(c,!0,!0),h=Math.min(d,u),g=Math.abs(d-u);return new Gt(o,h,i.resourceColumnWidth,g)}get visibleDateRange(){const e=this.scheduler,n=e.scrollable.y,r=e.scrollable.clientHeight,i=e.getDateFromCoordinate(n)||e.timeAxis.startDate,o=e.getDateFromCoordinate(n+r)||e.timeAxis.endDate;return{startDate:i,endDate:o,startMS:i.getTime(),endMS:o.getTime()}}onResourceColumnWidthChange({width:e,oldWidth:n}){const r=this,{scheduler:i}=r;r.resourceColumns.width=i.timeAxisColumn.width=r.allResourceRecords.length*e,r.clearAll(),r.refresh(Math.abs(e-n)>30)}attachToProject(e){super.attachToProject(e),e&&e.ion({name:"project",refresh:"onProjectRefresh",thisObj:this})}onProjectRefresh(){const e=this,{scheduler:n,toDrawOnProjectRefresh:r}=e;n.isVisible?n.rendered&&!n.refreshSuspended&&(e.refreshAllWhenReady?(e.clearAll(),e.refresh(),e.refreshAllWhenReady=!1):r.size&&e.refresh(),r.clear()):n.whenVisible("refresh",n,[!0])}attachToEventStore(e){super.attachToEventStore(e),this.refreshAllWhenReady=!0,e&&e.ion({name:"eventStore",refreshPreCommit:"onEventStoreRefresh",thisObj:this})}onEventStoreRefresh({action:e}){"batch"===e&&(this.refreshAllWhenReady=!0)}onEventStoreChange({action:e,records:n=[],record:r,replaced:i,changes:o,isAssign:s}){const a=this,l=new Set;switch(n.forEach((e=>{var n;const r=null==(n=e.$linkedResources)?void 0:n.filter((e=>a.resourceStore.includes(e)));null==r||r.forEach((e=>l.add(e.id)))})),e){case"sort":case"group":case"move":case"remove":return;case"dataset":return void a.refreshAllResourcesWhenReady();case"add":case"updateMultiple":break;case"replace":i.forEach((([,e])=>{e.resources.map((e=>l.add(e.id)))})),a.clearResources(l);break;case"removeall":case"filter":return a.clearAll(),void a.refresh();case"update":{let e=0;return"startDate"in o&&e++,"endDate"in o&&e++,"duration"in o&&e++,void((!(r.$entity?!Object.keys(o).some((e=>!r.$entity.getField(e))):!Object.keys(o).some((e=>!_b[e])))||e||"percentDone"in o||"inactive"in o||"segments"in o)&&(a.shouldWaitForInitializeAndEngineReady?a.refreshResourcesWhenReady(l):(a.clearResources(l),a.refresh())))}}a.refreshResourcesWhenReady(l)}attachToResourceStore(e){const n=this;super.attachToResourceStore(e),n.refreshAllWhenReady=!0,n.resourceColumns&&(n.resourceColumns.resourceStore=e),e.ion({name:"resourceStore",changePreCommit:"onResourceStoreChange",refreshPreCommit:"onResourceStoreRefresh",load:()=>n.scheduler.unmaskBody(),thisObj:n,prio:1}),n.initialized&&n.scheduler.isPainted&&(n.firstResource=n.lastResource=null,n.clearAll(),n.renderer())}onResourceStoreChange({source:e,action:n,records:r=[],record:i,replaced:o,changes:s}){const a=this,l=o?o.map((e=>e[1])):r,c=new Set(l.map((e=>e.id)));a.firstResource=a.lastResource=null,e._allResourceRecords=null;const{allResourceRecords:d}=e;if(a.scheduler.isEngineReady){switch(n){case"update":(null==s?void 0:s.id)?a.clearResources([s.id.oldValue,s.id.value]):a.clearResources([i.id]);break;case"filter":a.clearAll()}s&&"columnWidth"in s&&a.clearAll(),a.refresh(!0)}else{switch(n){case"dataset":case"remove":case"removeall":return void a.refreshAllResourcesWhenReady();case"replace":case"add":if(!e.isGrouped){for(let e=l.reduce(((e,n)=>Math.min(e,d.indexOf(n))),d.length);e<d.length;e++)c.add(d[e].id)}}a.refreshResourcesWhenReady(c)}}onResourceStoreRefresh({action:e}){const n=this;"sort"!==e&&"group"!==e||(n.firstResource=n.lastResource=n.resourceStore._allResourceRecords=null,n.clearAll(),n.refresh())}attachToAssignmentStore(e){super.attachToAssignmentStore(e),this.refreshAllWhenReady=!0,e&&e.ion({name:"assignmentStore",changePreCommit:"onAssignmentStoreChange",refreshPreCommit:"onAssignmentStoreRefresh",thisObj:this})}onAssignmentStoreChange({action:e,records:n=[],replaced:r,changes:i}){const o=this,s=new Set(n.map((e=>e.resourceId)));if(o.scheduler.isEngineReady){switch(e){case"remove":o.clearResources(s);break;case"filter":o.clearAll();break;case"update":if("resourceId"in i&&s.add(i.resourceId.oldValue),!Object.keys(i).filter((e=>"resource"!==e&&"event"!==e)).length)return;o.clearResources(s)}o.refresh(!0)}else{switch(i&&"resourceId"in i&&s.add(i.resourceId.oldValue),e){case"removeall":return void o.refreshAllResourcesWhenReady();case"replace":r.forEach((([e,n])=>{s.add(e.resourceId),s.add(n.resourceId)}))}o.refreshResourcesWhenReady(s)}}onAssignmentStoreRefresh({action:e,records:n}){"batch"===e&&(this.clearAll(),this.refreshAllResourcesWhenReady())}refreshRows(e){e&&(this.clearAll(),this.scheduler.refreshFromRerender=!1)}repaintEventsForResource(e){this.renderResource(e)}updateFromHorizontalScroll(e){e!==this.prevScrollX&&(this.renderer(),this.prevScrollX=e)}updateFromVerticalScroll(){this.renderer()}scrollResourceIntoView(e,n){const{scheduler:r}=this,i=this.allResourceRecords.indexOf(e)*r.resourceColumnWidth;return r.scrollHorizontallyTo(i,n)}get allResourceRecords(){return this.scheduler.resourceStore.allResourceRecords}onViewportResize(e){this.resourceColumns.availableWidth=e,this.renderer()}get resourceColumns(){var e;return null==(e=this.scheduler.timeAxisColumn)?void 0:e.resourceColumns}onLocaleChange(){this.clearAll()}onDragAbort(){}onBeforeRowHeightChange(){}onTimeAxisViewModelUpdate(){}updateElementId(){}releaseTimeSpanDiv(){}getConnectorStartSide(e){return"top"}getConnectorEndSide(e){return"bottom"}refreshResourcesWhenReady(e){this.clearResources(e),e.forEach((e=>this.toDrawOnProjectRefresh.add(e)))}refreshAllResourcesWhenReady(){this.clearAll(),this.refreshAllWhenReady=!0}get resourceRange(){return this.getResourceRange(!0)}get visibleResources(){const{first:e,last:n}=this.getResourceRange();return{first:this.allResourceRecords[e],last:this.allResourceRecords[n]}}getResourceRange(e){const{scheduler:n,resourceStore:r}=this,{resourceColumnWidth:i,scrollX:o}=n,{scrollWidth:s}=n.timeAxisSubGrid.scrollable,a=e?this.resourceBufferSize:0,l=o-a,c=o+s+a;if(!(null==r?void 0:r.count))return{first:-1,last:-1};if(n.variableColumnWidths){let e,r,i=0,o=0;return this.allResourceRecords.forEach(((s,a)=>{if(s.instanceMeta(n).insetStart=r=o,o=r+s.columnWidth,r>c)return!1;o>l&&null==e?e=a:r<c&&(i=a)})),{first:e,last:i}}return{first:Math.max(Math.floor(o/i)-a,0),last:Math.min(Math.floor((o+n.timeAxisSubGrid.width)/i)+a,this.allResourceRecords.length-1)}}get dateRange(){const{scheduler:e}=this;let n=e.getDateFromCoordinate(Math.min(e.scrollTop+e.bodyHeight+e.tickSize-1,(e.virtualScrollHeight||e.scrollable.scrollHeight)-1));n||(n=e.timeAxis.last.endDate);let r=e.getDateFromCoordinate(Math.max(e.scrollTop-e.tickSize,0));return r||(r=e.timeAxis.first.startDate,n=e.getDateFromCoordinate(e.bodyHeight+e.tickSize-1)),{topDate:r,bottomDate:n}}getTimeSpanRenderData(e,n,r=!1){var i;const o=this,{scheduler:s}=o,{preamble:a,postamble:l}=e,{variableColumnWidths:c}=s,d=(null==(i=s.features.eventBuffer)?void 0:i.enabled)&&o.isProVerticalRendering&&(a||l)&&!e.isMilestone,u=d?"wrapStartDate":"startDate",h=d?"wrapEndDate":"endDate",g=e.isBatchUpdating&&e.hasBatchedChange(u)&&!d?e.get(u):e[u],p=e.isBatchUpdating&&e.hasBatchedChange(h)&&!d?e.get(h):e[h],m=s.getResourceMargin(n),f=s.getCoordinateFromDate(g),b=n.instanceMeta(s),v=c?b.insetStart:o.allResourceRecords.indexOf(n)*s.resourceColumnWidth,y=s.getResourceWidth(n),w=y-2*m,C=g.getTime(),S=p.getTime();let x=s.getCoordinateFromDate(p),D=x-f;return-1===x&&(D=Math.round((S-C)*s.timeAxisViewModel.getSingleUnitInPixels("millisecond")),x=f+D),{eventRecord:e,resourceRecord:n,left:v,top:f,bottom:x,resourceWidth:y,width:w,height:D,startDate:g,endDate:p,startDateMS:C,endDateMS:S,useEventBuffer:d,children:[],start:g,end:p,startMS:C,endMS:S}}eventSorter(e,n){const r=e.dataStartMs||e.startDateMS,i=e.dataEndMs||e.endDateMS,o=n.dataStartMs||n.startDateMS,s=n.dataEndMs||n.endDateMS,a=e.isModel?e.name:e.eventRecord.name,l=n.isModel?n.name:n.eventRecord.name;return r-o||s-i||(a<l?-1:a==l?0:1)}layoutEvents(e,n,r=!1,i,o){const s=this,{scheduler:a}=s,{variableColumnWidths:l}=a,{id:c}=e,d=e.instanceMeta(a),u=i?`${c}-${i.id}`:c,h=s.resourceMap.set(u,{}).get(u),g=s.allResourceRecords.indexOf(e),{barMargin:p,resourceMargin:m}=a.getResourceLayoutSettings(e,i),f=n.reduce(((n,r)=>{if(r.isScheduled){const i=a.generateRenderData(r,e,!1),o={renderData:i};Et.getMapPath(s.eventMap,i.eventId,{})[c]=o,h[i.eventId]=o,i.fillSize?(i.left=l?d.insetStart:g*a.resourceColumnWidth,i.width=a.getResourceWidth(e)):n.push(i)}return n}),[]);return f.sort(null!=o?o:s.eventSorter),s.verticalLayout.applyLayout(f,a.getResourceWidth(e,i),m,p,g,a.getEventLayout(e,i)),h}layoutResourceEvents(e){const{scheduler:n}=this,{assignmentStore:r,eventStore:i,timeAxis:o}=n;let s=i.getEvents({includeOccurrences:n.enableRecurringEvents,resourceRecord:e,startDate:o.startDate,endDate:o.endDate,filter:(r.isFiltered||i.isFiltered)&&(n=>n.assignments.some((n=>n.resource===e&&r.includes(n))))});return s=n.getEventsToRender(e,s),this.layoutEvents(e,s)}addTemporaryDragElement(e){const{scheduler:n}=this,r=n.generateRenderData(e,e.resource,{timeAxis:!0,viewport:!0});r.top=r.row?r.top+r.row.top:n.getResourceEventBox(e,e.resource,!0).top;const i=this.renderEvent({renderData:r}),{dataset:o}=i;delete i.tabIndex,delete o.eventId,delete o.resourceId,delete o.assignmentId,delete o.syncId,o.transient=!0,i.parent=this.scheduler.foregroundCanvas,i.retainElement=!0;const s=Gn.createElement(i);return s.innerElement=s.firstChild,e.instanceMeta(n).hasTemporaryDragElement=!0,s}renderEvent(e){const{scheduler:n}=this,r=e.renderData,{resourceRecord:i,assignmentRecord:o,eventRecord:s}=r,a={className:r.wrapperCls,tabIndex:-1,children:[{role:"presentation",className:r.cls,style:(r.internalStyle||"")+(r.style||""),children:r.children,dataset:{taskFeature:"event"},syncOptions:{syncIdField:"taskBarFeature"}},...r.wrapperChildren],style:{top:r.top,[n.rtl?"right":"left"]:r.left,height:s.isMilestone?"1em":r.height,width:r.width,style:r.wrapperStyle||"",fontSize:s.isMilestone?Math.min(r.width,40):null},dataset:{resourceId:i.id,eventId:r.eventId,syncId:o?this.assignmentStore.getOccurrence(o,s).id:r.eventId},elementData:e,retainElement:(o||s).instanceMeta(this.scheduler).retainElement,syncOptions:{syncIdField:"taskFeature",releaseThreshold:0}};return a.className["b-sch-vertical"]=1,r.zIndex&&(a.zIndex=r.zIndex),o&&(a.dataset.assignmentId=o.id),e.elementConfig=a,a}renderResource(e){var n;const r=this,{topDateMS:i,bottomDateMS:o}=r,s=[];let a=r.resourceMap.get(e.id);a||(a=r.layoutResourceEvents(e));for(const e in a){const l=a[e],{endDateMS:c,startDateMS:d,eventRecord:u}=l.renderData;if(c>=i&&d<=o&&!u.instanceMeta(r.scheduler).hasTemporaryDragElement){const e="b-released"!==(null==(n=l.elementConfig)?void 0:n.className)&&l.elementConfig||r.renderEvent(l);s.push(e)}}return s}isEventElement(e){const n=e&&e.className;return n&&n[this.scheduler.eventCls+"-wrap"]}get shouldWaitForInitializeAndEngineReady(){return!this.initialized||!this.scheduler.isEngineReady&&!this.scheduler.isCreating}renderer(){const e=this,{scheduler:n}=e,{first:r,last:i}=e.resourceRange,{topDate:o,bottomDate:s}=e.dateRange,a=[],l=[];if(!e.shouldWaitForInitializeAndEngineReady){if(!Ct.isEqual(o,e.topDate)||!Ct.isEqual(s,e.bottomDate)){e.topDate=o,e.bottomDate=s,e.topDateMS=o.getTime(),e.bottomDateMS=s.getTime();const r=e.timeView.range={startDate:o,endDate:s};n.onVisibleDateRangeChange(r)}if(-1!==r&&-1!==i)for(let n=r;n<=i;n++)a.push.apply(a,e.renderResource(e.allResourceRecords[n]));if(n.getForegroundDomConfigs(l),a.push.apply(a,l),$o.sync({domConfig:{onlyChildren:!0,children:a},targetElement:n.foregroundCanvas,syncIdField:"syncId",callback({action:r,domConfig:i,lastDomConfig:o,targetElement:s,jsx:a}){var l,c,d;const{reactComponent:u}=n;if(e.isEventElement(i)||a||(null==(l=null==i?void 0:i.elementData)?void 0:l.jsx)){const l=Ob[r],h=Lb[r];if(null==(c=n.processEventContent)?void 0:c.call(n,{action:r,domConfig:i,isRelease:!1,targetElement:s,reactComponent:u,jsx:a}))return;if(l&&e.isEventElement(o)&&!o.isReleased){const e=o.elementData.renderData,r={renderData:e,assignmentRecord:e.assignmentRecord,eventRecord:e.eventRecord,resourceRecord:e.resourceRecord,element:s};null==(d=n.processEventContent)||d.call(n,{isRelease:l,targetElement:s,reactComponent:u,assignmentRecord:e.assignmentRecord}),s===Gn.getActiveElement(s)&&n.focusElement.focus(),n.trigger("releaseEvent",r)}if(h){const e=i.elementData.renderData,o={renderData:e,assignmentRecord:e.assignmentRecord,eventRecord:e.eventRecord,resourceRecord:e.resourceRecord,element:s,isReusingElement:"reuseElement"===r,isRepaint:"reuseOwnElement"===r};o.reusingElement="reuseElement"===r,n.trigger("renderEvent",o)}}}}),e.firstResource!==r||e.lastResource!==i){const o=e.resourceColumns.visibleResources={firstResource:r,lastResource:i};e.firstResource=r,e.lastResource=i,n.onVisibleResourceRangeChange(o),n.trigger("resourceRangeChange",o)}}}refresh(e){this.scheduler.runWithTransition((()=>this.renderer()),e)}refreshResources(e){this.clearResources(e),this.refresh()}refreshEventsForResource(e,n=!0,r=!0){this.refreshResources([e.id])}onRenderDone(){}get timeView(){return this.scheduler.timeView}clearResources(e){const{resourceMap:n,eventMap:r}=this;e.forEach((e=>{n.has(e)&&(Object.values(n.get(e)).forEach((({renderData:{eventId:n}})=>{delete r.get(n)[e]})),n.delete(e))}))}clearAll(){this.resourceMap.clear(),this.eventMap.clear()}};jb._$name="VerticalRendering";var zb={month:"MMMM, YYYY",week:["MMMM YYYY (Wp)","S{MMM} - E{MMM YYYY} (S{Wp})"],day:"MMMM D, YYYY"},Bb=class extends(yb.mixin(CrudManagerView_default,Describable_default,SchedulerDom_default,SchedulerDomEvents_default,SchedulerStores_default,SchedulerScroll_default,SchedulerState_default,SchedulerEventRendering_default,SchedulerRegions_default,EventSelection_default,EventNavigation_default,CurrentConfig_default)){constructor(){super(...arguments),__publicField(this,"timeCellSelector",".b-sch-timeaxis-cell"),__publicField(this,"resourceTimeRangeSelector",".b-sch-resourcetimerange")}static get $name(){return"SchedulerBase"}static get type(){return"schedulerbase"}static get configurable(){return{date:{value:null,$config:{equal:"date"}},stepUnit:"week",range:"week",getDateConstraints:null,verticalTimeAxisColumn:{},createEventOnDblClick:!0,schedulableAreaSelector:".b-sch-timeaxis-cell",scheduledEventName:"event",sortFeatureStore:"resourceStore"}}static get defaultConfig(){return{mode:"horizontal",eventCls:"b-sch-event",timeCellCls:"b-sch-timeaxis-cell",overScheduledEventClass:"b-sch-event-hover",allowOverlap:!0,rowHeight:60,preCalculateHeightLimit:1e4,crudManagerClass:Sm,testConfig:{loadMaskError:{autoClose:10,showDelay:0}}}}afterConstruct(){const e=this;super.afterConstruct(),e.ion({scroll:"onVerticalScroll",thisObj:e}),e.createEventOnDblClick&&e.ion({scheduledblclick:e.onTimeAxisCellDblClick})}onPaintOverride(){}get store(){return super.store}set store(e){super.store=e}get visibleResources(){var e,n;const r=this;return r.isVertical?r.currentOrientation.visibleResources:{first:r.store.getById(null==(e=r.firstVisibleRow)?void 0:e.id),last:r.store.getById(null==(n=r.lastVisibleRow)?void 0:n.id)}}onLocaleChange(){this.currentOrientation.onLocaleChange(),super.onLocaleChange()}onTimeAxisCellDblClick({date:e,resourceRecord:n,row:r}){this.createEvent(e,n,r)}onVerticalScroll({scrollTop:e}){this.currentOrientation.updateFromVerticalScroll(e)}onEventCreated(e){}get isHorizontal(){return"horizontal"===this.mode}get isVertical(){return"vertical"===this.mode}get mode(){return this._mode}set mode(e){const n=this;n._mode=e,n[e]||(n.element.classList.add(`b-sch-${e}`),"horizontal"===e?(n.horizontal=new Fb(n),n.isPainted&&n.horizontal.init()):"vertical"===e&&(n.vertical=new jb(n),n.rendered&&n.vertical.init()))}get currentOrientation(){return this[this.mode]}onElementKeyDown(e){return super.onElementKeyDown(e)}onElementKeyUp(e){return super.onElementKeyUp(e)}onElementMouseOver(e){return super.onElementMouseOver(e)}onElementMouseOut(e){return super.onElementMouseOut(e)}processEventDrop(){}processCrossSchedulerEventDrop(){}beforeEventDragStart(){}afterEventDragStart(){}afterEventDragAbortFinalized(){}checkEventDragValidity(){}afterEventResizeStart(){}get hasEventEditor(){return Boolean(this.eventEditingFeature)}get eventEditingFeature(){const{eventEdit:e,taskEdit:n,simpleEventEdit:r}=this.features;return(null==e?void 0:e.enabled)?e:(null==n?void 0:n.enabled)?n:(null==r?void 0:r.enabled)?r:null}editEvent(e,n,r){const i=this,{eventStore:o,assignmentStore:s}=i;if(!i.hasEventEditor)return!1;if(e.eventStore!==o){const{enableEventAnimations:r}=i,a=[];e.isCreating=!0;let l=[];if(n&&(a.push(n),l=s.assignEventToResource(e,n)),!1===i.trigger("beforeEventAdd",{eventRecord:e,resourceRecords:a,assignmentRecords:l}))return null==s||s.remove(l),!1;i.enableEventAnimations=!1,o.add(e),i.project.commitAsync().then((()=>i.enableEventAnimations=r)),i.refreshRows()}}async createEvent(e,n){var r,i;const o=this,{enableEventAnimations:s,eventStore:a,assignmentStore:l,hasEventEditor:c}=o,d=[n],u=o.createEventOnDblClick.useEventModelDefaults,h=u?a.modelClass.defaultValues.duration:1,g=u?a.modelClass.defaultValues.durationUnit:o.timeAxis.unit,p=a.createRecord({startDate:e,endDate:Ct.add(e,h,g),duration:h,durationUnit:g,name:o.L("L{Object.newEvent}")});if(o.readOnly||n.isSpecialRow||n.readOnly||!o.allowOverlap&&!o.isDateRangeAvailable(p.startDate,p.endDate,null,n))return;null==(r=o.eventEditingFeature)||r.captureStm(!0),p.isCreating=c,o.onEventCreated(p);const m=null==l?void 0:l.assignEventToResource(p,n);if(!1===o.trigger("beforeEventAdd",{eventRecord:p,resourceRecords:d,assignmentRecords:m}))return null==l||l.remove(m),void(null==(i=o.eventEditingFeature)||i.freeStm(!1));o.enableEventAnimations=!1,a.add(p),o.project.commitAsync().then((()=>o.enableEventAnimations=s)),o.isCreating=!0,o.refreshRows(),o.isCreating=!1,o.trigger("eventAutoCreated",{eventRecord:p,resourceRecord:n}),c&&o.editEvent(p,n,o.getEventElement(p))}isDateRangeAvailable(e,n,r,i){return this.eventStore.isDateRangeAvailable(e,n,r,i)}async resumeRefresh(e){super.resumeRefresh(!1);const n=this;if(!n.refreshSuspended&&e){if(!n.isEngineReady)return n.currentOrientation.refreshAllWhenReady=!0,n.project.commitAsync();n.isDestroyed||n.refreshWithTransition()}}toggleEmptyText(){var e;const n=this;n.bodyContainer&&Gn.toggleClasses(n.bodyContainer,"b-grid-empty",!(n.resourceStore.count>0||(null==(e=n.crudManager)?void 0:e.isLoading)))}getRowHeight(e){if(this.isHorizontal){const n=this.currentOrientation.calculateRowHeight(e);return this.rowManager.storeKnownHeight(e.id,n),n}}calculateRowHeights(e,n=!1){e.forEach((e=>e&&this.getRowHeight(e))),n||this.rowManager.estimateTotalHeight(!0)}calculateAllRowHeights(e=!1){const{store:n,rowManager:r}=this,i=Math.min(n.count,this.preCalculateHeightLimit);if(i){r.clearKnownHeights();for(let e=0;e<i;e++)this.getRowHeight(n.getAt(e));e||r.estimateTotalHeight(!0)}}get dateBounds(){const e=this,n=[e.startDate];return"week"===e.range&&n.push(e.lastDate),n}get defaultDescriptionFormat(){return zb[this.range]}get lastDate(){const e=this.endDate;return e&&Ct.add(e,-1,"day")}getEventRecord(e){return e=Gn.getEventElement(e),this.resolveEventRecord(e)}getEventElement(e){return this.getElementFromEventRecord(e)}changeRange(e){return Ct.normalizeUnit(e)}updateRange(e){if(!this.isConfiguring){const n=this.date,r=this.date=Ct.startOf(n,e);n.getTime()===r.getTime()&&this.updateDate(r)}}changeStepUnit(e){return Ct.normalizeUnit(e)}updateDate(e){const n=this,r=Ct.startOf(e,n.range);n.setTimeSpan(r,Ct.add(r,1,n.range)),n.visibleDate={date:Ct.max(e,n.timeAxis.startDate),block:"start",animate:!0},n.trigger("descriptionChange")}previous(){this.date=Ct.add(this.date,-1,this.stepUnit)}next(){this.date=Ct.add(this.date,1,this.stepUnit)}async scheduleEvent({startDate:e,eventRecord:n,resourceRecord:r,element:i}){const o=this;if(o.eventStore.includes(n)||([n]=o.eventStore.add(n)),n.startDate=e,n.assign(r),i){const e=Gt.from(i,o.foregroundCanvas);Gn.setTranslateXY(i,0,0),Gn.setTopLeft(i,e.y,e.x),$o.addChild(o.foregroundCanvas,i,n.assignments[0].id)}await o.project.commitAsync()}};Bb.initClass(),Bb._$name="SchedulerBase";var Hb=class extends(Localizable_default(uh)){static get defaultConfig(){return{includeUnassigned:!0,eventColumns:[{text:"Task",field:"name"},{text:"Starts",field:"startDate",width:140},{text:"Ends",field:"endDate",width:140}],eventSortFn:null}}construct(e={},...n){super.construct(e,...n),this.eventSortFn||(this.eventSortFn=(e,n)=>e.internalId-n.internalId)}normalizeColumns(e){super.normalizeColumns(e),e.eventColumns=e.eventColumns.map((e=>"string"==typeof e?{field:e}:e))}generateExportData(e){const n=this,r=this.target instanceof Bb,i=n.generateColumns(e),o=r?n.generateEventColumns(e):[];return{columns:i.concat(o),rows:n.generateRows(e)}}generateEventColumns(e){return e.eventColumns.map((n=>this.processEventColumn(n,e)))}processEventColumn(e,n){const{width:r,minWidth:i}=e,{defaultColumnWidth:o}=n;return{field:e.field,value:e.text,width:Math.max(r||o,i||o),eventColumn:!0,type:this.getColumnType(e,this.target.eventStore)}}generateRows(e){const n=this,{target:r}=n;let i;if(r instanceof Bb){if(i=[],r.resourceStore.map((r=>{const o=r.events||[];o.sort(n.eventSortFn),o.length||o.push(""),o.forEach((o=>i.push(n.getRowData(e,r,o))))})),e.includeUnassigned&&e.eventColumns.length){const o=r.eventStore.query((e=>!e.resources.length));if(o.length){const r=new Array(e.columns.length).fill("");r.push(n.L("L{ExcelExporter.No resource assigned}")),i.push(r),o.forEach((r=>i.push(n.getRowData(e,null,r))))}}i=i.filter((e=>e.length))}else i=super.generateRows(e);return i}getRowData(e,n,r){const{columns:i,eventColumns:o}=e,s=[],a=this.processRecord(n,i,e);if(a&&s.push(...a),!n||!n.isSpecialRow){const n=this.processRecord(r,o,e);n&&s.push(...n)}return s}};Hb._$name="ScheduleTableExporter";var Vb=class extends gh{static get $name(){return"ExcelExporter"}static get defaultConfig(){return{exporterClass:Hb,exporterConfig:null}}};Vb._$name="ExcelExporter",du.registerFeature(Vb,!1,"Scheduler");var Nb=class extends Bb{static get $name(){return"Scheduler"}static get type(){return"scheduler"}};Nb.initClass(),Nb._$name="Scheduler";var qb=class extends Mc{static get $name(){return"ProjectCombo"}static get type(){return"projectcombo"}static get configurable(){return{project:null,displayField:"title",valueField:"url",highlightExternalChange:!1,editable:!1}}updateProject(e){var n;(null==(n=e.transport.load)?void 0:n.url)&&(this.value=e.transport.load.url)}onChange({value:e,userAction:n}){n&&this.project&&(this.project.transport.load.url=e,this.project.load())}};qb.initClass(),qb._$name="ProjectCombo";var Wb=class extends Ec{static get $name(){return"ResourceFilter"}static get type(){return"resourcefilter"}static get delayable(){return{applyFilters:"raf"}}static get configurable(){return{eventStore:null,multiSelect:!0,toggleAllIfCtrlPressed:!0,itemTpl:e=>w.encodeHtml(e.name||""),masterFilter:()=>!0,filterResources:null}}itemIconTpl(e,n){const{eventColor:r}=e,i=Gn.isNamedColor(r)?` b-sch-foreground-${r}`:"",o=!i&&r?` style="color:${r}"`:"";return this.multiSelect?`<div class="b-selected-icon b-icon${i}"${o}></div>`:""}updateEventStore(e){var n,r;const i=this,o=(null==(n=i.initialConfig.store)?void 0:n.isStore)?i.initialConfig.store.initialConfig:null==(r=i.store)?void 0:r.config,{resourceStore:s}=e,a=i.store=s.chain(i.masterFilter,null,{...o,syncOrder:!0}),l={change:"onStoreChange",thisObj:i};a.un(l),s.ion(l),s.count?i.initFilter():s.project.ion({name:"project",refresh:"initFilter",thisObj:i})}changeMasterFilter(e){const n=this;if(!n.filterResources)return function(r){return n.callback(e,n,[r])}}initFilter(){const{eventStore:e,selected:n}=this;e.count&&e.resourceStore.count&&(this.initialSelection||n.add(this.store.getRange()),this.detachListeners("project"))}onStoreRefresh({source:e,action:n}){if("filter"===n&&this.eventStoreFilter){const{eventStoreFilter:n}=this,{disabled:r}=n,i=!e.isFiltered&&this.allSelected;i!==r&&(n.disabled=i,this.applyFilters())}super.onStoreRefresh(...arguments)}onSelectionChange({source:e,added:n,removed:r}){const i=this,o=!i.store.isFiltered&&i.allSelected;super.onSelectionChange(...arguments);let s=!1;if(i.eventStoreFilter||(i.eventStoreFilter=i.eventStore.addFilter({id:`${i.id}-filter-instance`,filterBy:e=>!e.resource||i.selected.includes(e.resources),disabled:o},(null==n?void 0:n.length)===i.store.count),s=!0),i.filterResources&&!i.resourceStoreFilter&&(i.resourceStoreFilter=i.eventStore.resourceStore.addFilter({id:`${i.id}-filter-instance`,filterBy:e=>i.selected.includes(e),disabled:o},(null==n?void 0:n.length)===i.store.count),s=!0),!s&&(i.eventStoreFilter.disabled=o,i.resourceStoreFilter&&(i.resourceStoreFilter.disabled=o),i.applyFilters(),i.eventListeners.change)){const o=e.values,s=o.concat(r);oe.remove(s,n),i.triggerFieldChange({value:o,oldValue:s})}}get value(){return this.selected.values}applyFilters(){this.eventStore.filter(),this.filterResources&&this.eventStore.resourceStore.filter()}doDestroy(){var e;null==(e=this.store)||e.destroy(),super.doDestroy()}};Wb.initClass(),Wb._$name="ResourceFilter";var Ub=class extends Bc{static get $name(){return"SchedulerDatePicker"}static get type(){return"datepicker"}static get configurable(){return{showEvents:null,eventStore:null,eventFilter:{$config:"lazy",value:null}}}construct(e){"events"in e&&(delete(e={...e,showEvents:e.events}).events,A.deprecate(A.calendar?"Calendar":"Scheduler","6.0.0","DatePicker#events should be configured as showEvents")),super.construct(e)}changeEventFilter(e){if("string"==typeof e){const{handler:n,thisObj:r}=this.resolveCallback(e);e=n.bind(r)}return e}doRefresh(){if(this.isVisible||!this.showEvents)return this.refreshEventsMap(),super.doRefresh(...arguments);this.whenVisible("doRefresh")}updateShowEvents(e,n){const r=this,{classList:i}=r.contentElement;let{eventStore:o}=r;if(r.requestAnimationFrame((()=>{var o;r.element.classList.toggle("b-datepicker-with-events",Boolean(e)),null==(o=r.owner)||o.element.classList.toggle("b-datepicker-with-events",Boolean(e)),e&&i.add(`b-show-events-${e}`),i.remove(`b-show-events-${n}`)})),e){if(!o){const e=r.up((e=>e.eventStore));if(!e)throw new Error("DatePicker configured with events but no eventStore");o=e.eventStore}}else r.eventsMap=null;r.isConfiguring||(r.updateEventStore(o),r.doRefresh())}refreshEventsMap(){const e=this;e.showEvents&&(e.eventsMap=e.eventStore.getEventCounts({startDate:e.startDate,endDate:e.endDate,dateMap:e.eventsMap,filter:e.eventFilter}))}updateEventStore(e){var n;-1===e.findListener("change","refresh",this)&&(null==(n=null==e?void 0:e[this.showEvents?"on":"un"])||n.call(e,{change:"refresh",thisObj:this}))}cellRenderer({cell:e,date:n}){var r,i;const{showEvents:o}=this,s=null==(i=null==(r=this.eventCounts)?void 0:r.get)?void 0:i.call(r,Ct.makeKey(n)),a="count"===o;delete e.dataset.btip,s&&(!a&&this.eventCountTip&&(e.dataset.btip=this.L("L{ResourceInfoColumn.eventCountText}",s)),Gn.createElement({dataset:{count:s},class:{[a?"b-cell-events-badge":"b-icon b-icon-circle"]:1,[Ub.getEventCountClass(s)]:1},parent:e,[a?"text":""]:s}))}static getEventCountClass(e){return e?e<4?"b-datepicker-1-to-3-events":e<7?"b-datepicker-4-to-6-events":"b-calendar-7-or-more-events":""}static setupClass(e){e.replaceType=!0,super.setupClass(e)}};Ub.initClass(),Ub._$name="SchedulerDatePicker";var isProjectConsumer=e=>e.isProjectConsumer,Gb=class extends Ic{static get $name(){return"UndoRedo"}static get type(){return"undoredo"}static get configurable(){return{scheduler:null,project:null}}construct(){super.construct(...arguments),this.stm||(this.scheduler=this.up(isProjectConsumer))}changeScheduler(e){return e.isProjectConsumer?e:Gb.getById(e)}updateScheduler(e){const{crudManager:n}=e;e.ion({projectChange:"onProjectChanged",thisObj:this}),n?this.setupLoadListener(n):this.onLoad(),this.stm=e.project.stm}setupLoadListener(e){e.detachListeners("load"),e.ion({name:"load",load:"onLoad",thisObj:this})}async onLoad(){await this.scheduler.project.commitAsync(),this.isDestroyed||(this.stm.enable(),this.fillUndoRedoCombo())}onProjectChanged({project:e}){this.project=e}updateProject(e){super.updateProject(...arguments),e&&this.scheduler&&!this.scheduler.isConfiguring&&this.setupLoadListener(e)}};Gb.initClass(),Gb._$name="UndoRedo";var Yb=class extends Mc{construct(){super.construct(...arguments),this.scheduler.ion({presetchange:this.onClientPresetChange,thisObj:this})}get scheduler(){return this.client||this.up((e=>e.isTimelineBase))||bs.query((e=>e.isTimelineBase))}changeValue(e,n){return this.getConfig("presets"),super.changeValue(e,n)}updatePresets(e){this.store=this.scheduler.presets.chain((n=>e.includes(n.id))),this.store.sort(((n,r)=>e.indexOf(n.id)-e.indexOf(r.id)))}onClientPresetChange({preset:e}){const n=this;n._isSelecting||(n.isSettingValue=!0,n.store.includes(e.id)?n.value=e:n.clear(),n.isSettingValue=!1)}onSelect({record:e}){var n;if(!this.isSettingValue){const{scheduler:r}=this,{mainUnit:i,start:o,defaultSpan:s}=e;if(r.suspendRefresh(),this._isSelecting=!0,r.viewPreset=e,this._isSelecting=!1,i&&s){let a=i;o&&"string"==typeof o&&(a=null!=(n=Ct.parseTimeUnit(o))?n:o);let l=Ct.startOf(r.startDate,a);e.start&&"number"==typeof o&&(l=Ct.add(l,o,i));const c=Ct.add(l,s,i);r.setTimeSpan(l,c)}r.isVertical?r.scrollTop=0:r.scrollLeft=0,r.resumeRefresh(!0)}}updateLocalization(){super.updateLocalization(),this.syncInputFieldValue()}};__publicField(Yb,"$name","ViewPresetCombo"),__publicField(Yb,"type","viewpresetcombo"),__publicField(Yb,"configurable",{presets:["hourAndDay","weekAndDay","dayAndMonth"],client:null,editable:!1,valueField:"id",displayField:"name",placeholder:"Select view"}),Yb.initClass(),Yb._$name="ViewPresetCombo";var Kb,Xb,Zb=-Math.pow(2,30),Qb=Math.pow(2,30)-1,uppercaseFirst=e=>e.slice(0,1).toUpperCase()+e.slice(1),isAtomicValue=e=>Object(e)!==e,defineProperty9=(e,n,r)=>(Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0}),r),prototypeValue=e=>function(n,r){n[r]=e},delay2=e=>new Promise((n=>setTimeout(n,e))),Jb=null,isGeneratorFunction=function(e){return null===Jb&&(Jb="undefined"!=typeof regeneratorRuntime),!0===Jb?regeneratorRuntime.isGeneratorFunction(e):"GeneratorFunction"===e.constructor.name},isPromise=function(e){return e&&"function"==typeof e.then},emptyFn3=(...e)=>{},DEBUG_ONLY=e=>emptyFn3,ev=(DEBUG_ONLY(),DEBUG_ONLY()),tv=(Symbol("RequiredProperties"),DEBUG_ONLY()),nv=DEBUG_ONLY();(Xb=Kb||(Kb={})).Cancel="Cancel",Xb.Resume="Resume";var rv=Symbol("WalkSource"),iv=-1,ov=-2,sv=class extends bg{constructor(){super(...arguments),this.visited=new Map,this.toVisit=[],this.currentEpoch=0}startFrom(e){this.continueFrom(e)}continueFrom(e){this.toVisit.push.apply(this.toVisit,e.map((e=>({node:e,from:rv,label:void 0})))),this.walkDepth()}onNode(e,n){}onTopologicalNode(e){}onCycle(e,n){return Kb.Cancel}forEachNext(e,n){throw new Error("Abstract method called")}collectNext(e,n,r){throw new Error("Abstract method called")}getVisitedInfo(e){return this.visited.get(e)}setVisitedInfo(e,n,r){return r?(r.visitedAt=n,r.visitEpoch=this.currentEpoch):(r={visitedAt:n,visitEpoch:this.currentEpoch},this.visited.set(e,r)),r}walkDepth(){this.visited;const e=this.toVisit;let n;for(;n=e.length;){const r=e[n-1].node,i=this.getVisitedInfo(r);if(i&&i.visitedAt===ov&&i.visitEpoch===this.currentEpoch)e.pop();else if(i&&i.visitEpoch===this.currentEpoch&&i.visitedAt!==iv){if(i.visitedAt<n){if(this.onCycle(r,e)!==Kb.Resume)break}else i.visitedAt=ov,this.onTopologicalNode(r);e.pop()}else{if(!1===this.onNode(r,e[n-1]))break;const o=this.setVisitedInfo(r,n,i),s=e.length;this.collectNext(r,e,o),e.length===s&&(o.visitedAt=ov,this.onTopologicalNode(r),e.pop())}}}};function cycleInfo(e){const n=e.length;if(0===n)return[];const r=e[n-1].node,i=[r];let o=n-1,s=o;for(;o>=0&&e[o].from!==r;){for(;o>=0&&e[o].from===e[s].from;)o--;o>=0&&(i.push(e[o].node),s=o)}return o<0?[]:(i.push(r),i.reverse())}var av,lv,cv=0,dv=cv++,uv=class extends bg{constructor(){super(...arguments),this.formulaId=cv++,this.inputs=new Set}},hv=class extends sv{collectNext(e,n){if(e instanceof uv)n.push({node:e.output,from:e,label:void 0});else{const r=this.cache.formulasByInput.get(e);r&&r.forEach((r=>n.push({node:r,from:e,label:void 0})))}}},gv=class extends(mg([bg],(e=>class FormulasCache extends e{constructor(){super(...arguments),this.variables=new Set,this.formulas=new Set,this.$formulasByInput=void 0,this.$formulasByOutput=void 0}get formulasByInput(){return void 0!==this.$formulasByInput||this.fillCache(),this.$formulasByInput}get formulasByOutput(){return void 0!==this.$formulasByOutput||this.fillCache(),this.$formulasByOutput}add(e){this.$formulasByInput=void 0,this.$formulasByOutput=void 0,this.formulas.add(e)}has(e){return this.formulas.has(e)}fillCache(){this.$formulasByInput=new Map,this.$formulasByOutput=new Map,this.formulas.forEach((e=>{let n=this.$formulasByOutput.get(e.output);n||(n=new Set,this.$formulasByOutput.set(e.output,n)),n.add(e),e.inputs.forEach((n=>{let r=this.$formulasByInput.get(n);r||(r=new Set,this.$formulasByInput.set(n,r)),r.add(e)}))}))}allInputVariables(){return uniqueOnly(concatIterable(map(this.formulas,(e=>e.inputs.values()))))}isCyclic(){let e=!1;return hv.new({cache:this,onCycle:()=>(e=!0,Kb.Cancel)}).startFrom(Array.from(this.allInputVariables())),e}}))){},pv=class extends gv{},mv=class extends bg{constructor(){super(...arguments),this.description=void 0,this.defaultResolutionFormulas=new Set,this.resolutionsByInputHash=new Map}clear(){this.resolutionsByInputHash.clear()}resolve(e){const n=this.resolutionsByInputHash.get(e.hash);if(void 0!==n)return n;const r=this.buildResolution(e);return this.resolutionsByInputHash.set(e.hash,r),r}buildResolution(e){const n=bv.new({context:this,input:e}),r=Array.from(n.next()).map((e=>({resolution:e.asResolution(),nbrOfDefaultFormulas:Array.from(e.activatedFormulas.formulas).reduce(((n,r)=>e.formulaIsDefault(r)?n+1:n),0),unCoveredInputWeight:e.unCoveredInputWeight()})));if(r.sort(((e,n)=>e.unCoveredInputWeight<n.unCoveredInputWeight?-1:e.unCoveredInputWeight>n.unCoveredInputWeight?1:n.nbrOfDefaultFormulas-e.nbrOfDefaultFormulas)),r.length>0)return r[0].resolution}};(lv=av||(av={}))[lv.NoInput=0]="NoInput",lv[lv.HasPreviousValue=1]="HasPreviousValue",lv[lv.HasProposedValue=2]="HasProposedValue",lv[lv.KeepIfPossible=4]="KeepIfPossible";var fv=class extends bg{constructor(){super(...arguments),this.context=void 0,this.input=void 0,this.$hash=""}get hash(){return""!==this.$hash?this.$hash:this.$hash=this.buildHash()}get description(){return this.context.description}get resolution(){return this.context.resolve(this)}initialize(...e){super.initialize(...e),nv(this),this.input=new Map(CI(this.description.variables).map((e=>[e,av.NoInput])))}buildHash(){return String.fromCharCode(...CI(this.description.variables).inBatchesBySize(5).map((e=>this.batchToCharCode(e))))}batchToCharCode(e){return e.reduceRight(((e,n,r)=>e|this.input.get(n)<<3*r),0)}addProposedValueFlag(e){const n=this.input.get(e);this.input.set(e,n|av.HasProposedValue)}hasProposedValue(e){return Boolean(this.input.get(e)&av.HasProposedValue)}hasProposedValueVars(){return CI(this.description.variables).filter((e=>this.hasProposedValue(e)))}addPreviousValueFlag(e){const n=this.input.get(e);this.input.set(e,n|av.HasPreviousValue)}hasPreviousValue(e){return Boolean(this.input.get(e)&av.HasPreviousValue)}hasPreviousValueVars(){return CI(this.description.variables).filter((e=>this.hasPreviousValue(e)))}addKeepIfPossibleFlag(e){const n=this.input.get(e);this.input.set(e,n|av.KeepIfPossible)}keepIfPossible(e){return Boolean(this.input.get(e)&av.KeepIfPossible)}keepIfPossibleVars(){return CI(this.description.variables).filter((e=>this.keepIfPossible(e)))}};!function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);s>3&&a&&Object.defineProperty(n,r,a)}([tv],fv.prototype,"context",void 0);var bv=class extends bg{constructor(){super(...arguments),this.context=void 0,this.input=void 0,this.previous=void 0,this.activatedFormula=void 0,this.$activatedFormulas=void 0}get activatedFormulas(){if(void 0!==this.$activatedFormulas)return this.$activatedFormulas;const e=gv.new({variables:this.description.variables,formulas:CI(this.thisAndPreviousStates()).map((e=>e.activatedFormula)).toSet()});return this.$activatedFormulas=e}get description(){return this.context.description}*thisAndPreviousStates(){let e=this;for(;e&&e.activatedFormula;)yield e,e=e.previous}formulaHasProposedValueInInput(e){return Array.from(e.inputs).some((e=>this.input.hasProposedValue(e)))}unCoveredInputWeight(){const e=map(this.input.hasProposedValueVars(),(e=>({variable:e,isProposed:!0}))),n=map(this.input.keepIfPossibleVars(),(e=>({variable:e,isProposed:!1})));return CI([e,n]).concat().uniqueOnlyBy((e=>e.variable)).reduce(((e,{variable:n,isProposed:r})=>{let i=0;const o=this.activatedFormulas.formulasByOutput.get(n);if(o){const e=1===o.size?Array.from(o)[0]:null;e&&this.formulaIsDefault(e)&&this.formulaHasProposedValueInInput(e)?i+=r?1e6:1e4:i+=r?1e7:1e5}const s=this.activatedFormulas.formulasByInput.get(n);return s&&s.size>0||(i+=r?1e3:100),e+i}),0)}preferFormula(e,n){const r=this.formulaAllInputsHasProposed(e),i=this.formulaAllInputsHasProposed(n);if(r&&!i)return-1;if(i&&!r)return 1;const o=this.formulaCountInputsWithProposedOrKeep(e),s=this.formulaCountInputsWithProposedOrKeep(n);return o>s?-1:o<s?1:this.formulaIsDefault(e)&&!this.formulaIsDefault(n)?-1:this.formulaIsDefault(n)&&!this.formulaIsDefault(e)?1:0}formulaIsDefault(e){return this.context.defaultResolutionFormulas.has(e)}formulaCountInputsWithProposedOrKeep(e){let n=0;return Array.from(e.inputs).forEach((e=>{(this.input.hasProposedValue(e)||this.input.keepIfPossible(e))&&n++})),n}formulaAllInputsHasProposedOrKeep(e){return Array.from(e.inputs).every((e=>this.input.hasProposedValue(e)||this.input.keepIfPossible(e)))}formulaAllInputsHasProposed(e){return Array.from(e.inputs).every((e=>this.input.hasProposedValue(e)))}formulaIsApplicable(e){const n=Array.from(e.inputs).every((e=>this.input.hasProposedValue(e)||this.input.hasPreviousValue(e)||this.activatedFormulas.formulasByOutput.has(e))),r=gv.new({formulas:new Set(this.activatedFormulas.formulas)});return r.add(e),n&&!r.isCyclic()}formulaIsInsignificant(e){const n=this.activatedFormulas.formulasByOutput.has(e.output),r=this.input.hasPreviousValue(e.output);return n||r&&Array.from(e.inputs).some((e=>!this.input.hasPreviousValue(e)&&!this.input.hasProposedValue(e)&&!this.activatedFormulas.formulasByOutput.has(e)))}unvisitedFormulas(){return Array.from(this.description.formulas).filter((e=>!this.activatedFormulas.has(e)))}*next(){const e=this.unvisitedFormulas();e.sort(this.preferFormula.bind(this));let n=!0;for(const r of e){if(!this.formulaIsApplicable(r)||this.formulaIsInsignificant(r))continue;const e=bv.new({previous:this,context:this.context,input:this.input,activatedFormula:r});yield*e.next(),n=!1}n&&(yield this)}asResolution(){return new Map(CI(this.description.variables).map((e=>{const n=this.activatedFormulas.formulasByOutput.get(e);if(n)for(const r of n)return[e,r.formulaId];return[e,dv]})))}},__decorate2=function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);return s>3&&a&&Object.defineProperty(n,r,a),a},vv=Symbol("BreakCurrentStackExecution"),yv=class extends bg{};__decorate2([prototypeValue(!0)],yv.prototype,"sync",void 0),__decorate2([prototypeValue(!0)],yv.prototype,"pure",void 0);var wv=Symbol("ProposedOrPreviousSymbol"),Cv=yv.new({handler:wv}),Sv=Symbol("RejectSymbol"),xv=class extends yv{constructor(){super(...arguments),this.handler=Sv}};__decorate2([prototypeValue(!1)],xv.prototype,"pure",void 0);var Reject=e=>xv.new({reason:e}),Dv=Symbol("TransactionSymbol"),Ev=yv.new({handler:Dv}),Rv=Symbol("OwnQuarkSymbol"),kv=yv.new({handler:Rv}),Tv=Symbol("OwnIdentifierSymbol"),Mv=yv.new({handler:Tv}),Av=Symbol("WriteSymbol"),Iv=class extends yv{constructor(){super(...arguments),this.handler=Av}};__decorate2([prototypeValue(!1)],Iv.prototype,"pure",void 0);var Write=(e,n,...r)=>Iv.new({identifier:e,proposedArgs:[n,...r]}),Fv=Symbol("WriteSeveralSymbol"),Pv=class extends yv{constructor(){super(...arguments),this.handler=Fv}};__decorate2([prototypeValue(!1)],Pv.prototype,"pure",void 0);var Ov,Lv,WriteSeveral=e=>Pv.new({writes:e}),_v=Symbol("PreviousValueOfSymbol"),$v=class extends yv{constructor(){super(...arguments),this.handler=_v}},PreviousValueOf=e=>$v.new({identifier:e}),jv=Symbol("ProposedValueOfSymbol"),zv=class extends yv{constructor(){super(...arguments),this.handler=jv}},ProposedValueOf=e=>zv.new({identifier:e}),Bv=Symbol("HasProposedValueSymbol"),Hv=class extends yv{constructor(){super(...arguments),this.handler=Bv}},HasProposedValue=e=>Hv.new({identifier:e}),Vv=Symbol("HasProposedNotPreviousValueSymbol"),Nv=class extends yv{constructor(){super(...arguments),this.handler=Vv}},HasProposedNotPreviousValue=e=>Nv.new({identifier:e}),qv=Symbol("ProposedOrPreviousValueOfSymbol"),Wv=class extends yv{constructor(){super(...arguments),this.handler=qv}},ProposedOrPreviousValueOf=e=>Wv.new({identifier:e}),Uv=Symbol("ProposedArgumentsOfSymbol"),Gv=class extends yv{constructor(){super(...arguments),this.handler=Uv}},ProposedArgumentsOf=e=>Gv.new({identifier:e}),Yv=Symbol("UnsafeProposedOrPreviousValueOfSymbol"),Kv=class extends yv{constructor(){super(...arguments),this.handler=Yv}},UnsafeProposedOrPreviousValueOf=e=>Kv.new({identifier:e}),Xv=Symbol("UnsafePreviousValueOfSymbol"),Zv=class extends yv{constructor(){super(...arguments),this.handler=Xv}},UnsafePreviousValueOf=e=>Zv.new({identifier:e}),Qv=class extends fv{collectInfo(e,n,r){null!=e(PreviousValueOf(n))&&this.addPreviousValueFlag(r),e(HasProposedNotPreviousValue(n))&&this.addProposedValueFlag(r)}},Jv=Symbol("ContextSync"),ey=Symbol("ContextGen"),ty=class extends(mg([],(e=>class CalculationGen extends e{constructor(){super(...arguments),this.iterator=void 0,this.iterationResult=void 0}isCalculationStarted(){return Boolean(this.iterator||this.iterationResult)}isCalculationCompleted(){return Boolean(this.iterationResult&&this.iterationResult.done)}get result(){return this.iterationResult&&this.iterationResult.done?this.iterationResult.value:void 0}startCalculation(e,...n){const r=this.iterator=this.calculation.call(this.context||this,e,...n);return this.iterationResult=r.next()}continueCalculation(e){return this.iterationResult=this.iterator.next(e)}cleanupCalculation(){this.iterationResult=void 0,this.iterator=void 0}*calculation(e,...n){throw new Error("Abstract method `calculation` called")}runSyncWithEffect(e,...n){for(this.startCalculation(e,...n);!this.isCalculationCompleted();)this.continueCalculation(e(this.iterationResult.value));return this.iterator=void 0,this.result}async runAsyncWithEffect(e,...n){for(this.startCalculation(e,...n);!this.isCalculationCompleted();)this.continueCalculation(await e(this.iterationResult.value));return this.iterator=void 0,this.result}}))){},ny=Symbol("SynchronousCalculationStarted"),ry={value:ny},iy=class extends(mg([],(e=>class CalculationSync extends e{constructor(){super(...arguments),this.iterationResult=void 0}isCalculationStarted(){return Boolean(this.iterationResult)}isCalculationCompleted(){return Boolean(this.iterationResult&&this.iterationResult.done)}get result(){return this.iterationResult&&this.iterationResult.done?this.iterationResult.value:void 0}startCalculation(e,...n){return this.iterationResult=ry,this.iterationResult={done:!0,value:this.calculation.call(this.context||this,e,...n)}}continueCalculation(e){throw new Error("Can not continue synchronous calculation")}cleanupCalculation(){this.iterationResult=void 0}calculation(e,...n){throw new Error("Abstract method `calculation` called")}runSyncWithEffect(e,...n){return this.startCalculation(e,...n),this.result}async runAsyncWithEffect(e,...n){throw new Error("Can not run synchronous calculation asynchronously")}}))){};function runGeneratorSyncWithEffect(e,n,r,i){const o=n.apply(i||null,r);let s=o.next();for(;!s.done;)s=o.next(e(s.value));return s.value}async function runGeneratorAsyncWithEffect(e,n,r,i){const o=n.apply(i||null,r);let s=o.next();for(;!s.done;){let n,r=!1;do{r=!1;try{n=e(s.value)}catch(n){if(n instanceof yv){if("Cancel"===await e(n))return void e(Reject(n));r=!0}}}while(r);s=isPromise(n)?o.next(await n):o.next(n)}return s.value}(Lv=Ov||(Ov={}))[Lv.Normal=1]="Normal",Lv[Lv.Past=2]="Past";var oy,sy,ay=0,ly=class extends(fg([Map],(e=>class Quark extends e{constructor(){super(...arguments),this.createdAt=void 0,this.identifier=void 0,this.value=void 0,this.proposedValue=void 0,this.proposedIsPrevious=!1,this.proposedArguments=void 0,this.usedProposedOrPrevious=!1,this.previous=void 0,this.origin=void 0,this.originId=Zb,this.needToBuildProposedValue=!1,this.edgesFlow=0,this.visitedAt=iv,this.visitEpoch=0,this.promise=void 0,this.$outgoingPast=void 0}static new(e){const n=new this;return e&&Object.assign(n,e),n}get level(){return this.identifier.level}get calculation(){return this.identifier.calculation}get context(){return this.identifier.context||this.identifier}forceCalculation(){this.edgesFlow=Qb}cleanup(){this.cleanupCalculation()}isShadow(){return Boolean(this.origin&&this.origin!==this)}resetToEpoch(e){this.visitEpoch=e,this.visitedAt=iv,this.edgesFlow<0&&(this.edgesFlow=0),this.usedProposedOrPrevious=!1,this.cleanupCalculation(),this.clearOutgoing(),this.promise=void 0,this.origin&&this.origin===this?(this.proposedArguments=void 0,void 0!==this.value&&(this.proposedValue=this.value),this.value=void 0):(this.origin=void 0,this.value=void 0),this.identifier.proposedValueIsBuilt&&this.proposedValue!==cy&&(this.needToBuildProposedValue=!0,this.proposedValue=void 0)}copyFrom(e){this.value=e.value,this.proposedValue=e.proposedValue,this.proposedArguments=e.proposedArguments,this.usedProposedOrPrevious=e.usedProposedOrPrevious}clearProperties(){this.value=void 0,this.proposedValue=void 0,this.proposedArguments=void 0}mergePreviousOrigin(e){const n=this.origin;if(n!==this.previous)throw new Error("Invalid state");this.copyFrom(n);const r=this.getOutgoing();for(const[i,o]of n.getOutgoing()){if(!r.get(i)){const n=e.get(i);n&&n.originId!==o.originId||r.set(i,n||o)}}if(void 0!==n.$outgoingPast){const r=this.getOutgoingPast();for(const[i,o]of n.getOutgoingPast()){if(!r.get(i)){const n=e.get(i);n&&n.originId!==o.originId||r.set(i,n||o)}}}this.origin=this,n.clearProperties(),n.clear()}setOrigin(e){this.origin=e,this.originId=e.originId}getOrigin(){return this.origin?this.origin:this.startOrigin()}startOrigin(){return this.originId=ay++,this.origin=this}getOutgoing(){return this}getOutgoingPast(){return void 0!==this.$outgoingPast?this.$outgoingPast:this.$outgoingPast=new Map}addOutgoingTo(e,n){(n===Ov.Normal?this:this.getOutgoingPast()).set(e.identifier,e)}clearOutgoing(){this.clear(),void 0!==this.$outgoingPast&&this.$outgoingPast.clear()}getValue(){const e=this.origin;return e===this?this.value:e?e.getValue():void 0}setValue(e){if(this.origin&&this.origin!==this)throw new Error("Can not set value to the shadow entry");this.getOrigin().value=e}hasValue(){return void 0!==this.getValue()}hasProposedValue(){return!this.isShadow()&&this.hasProposedValueInner()}hasProposedValueInner(){return void 0!==this.proposedValue}getProposedValue(e){return this.needToBuildProposedValue&&(this.proposedValue=this.identifier.buildProposedValue.call(this.identifier.context||this.identifier,this.identifier,this,e),this.needToBuildProposedValue=!1),this.proposedValue}outgoingInTheFutureCb(e,n){let r=this;for(;r;){for(const i of r.getOutgoing().values())i.originId===e.getLatestEntryFor(i.identifier).originId&&n(i);r=r.isShadow()?r.previous:null}}outgoingInTheFutureAndPastCb(e,n){let r=this;for(;r;){for(const i of r.getOutgoing().values()){const r=e.getLatestEntryFor(i.identifier);r&&i.originId===r.originId&&n(i)}if(void 0!==r.$outgoingPast)for(const i of r.$outgoingPast.values()){const r=e.getLatestEntryFor(i.identifier);r&&i.originId===r.originId&&n(i)}r=r.isShadow()?r.previous:null}}outgoingInTheFutureAndPastTransactionCb(e,n){let r=this;for(;r;){for(const i of r.getOutgoing().values()){const r=e.getLatestStableEntryFor(i.identifier);r&&i.originId===r.originId&&n(i)}if(void 0!==r.$outgoingPast)for(const i of r.$outgoingPast.values()){const r=e.getLatestStableEntryFor(i.identifier);r&&i.originId===r.originId&&n(i)}r=r.isShadow()?r.previous:null}}outgoingInTheFutureTransactionCb(e,n){let r=this;for(;r;){for(const i of r.getOutgoing().values()){const r=e.getLatestEntryFor(i.identifier);r&&i.originId===r.originId&&n(i)}r=r.isShadow()?r.previous:null}}}))){},cy=Symbol("Tombstone"),__decorate3=function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);return s>3&&a&&Object.defineProperty(n,r,a),a};(sy=oy||(oy={}))[sy.UserInput=0]="UserInput",sy[sy.DependsOnlyOnUserInput=1]="DependsOnlyOnUserInput",sy[sy.DependsOnlyOnDependsOnlyOnUserInput=2]="DependsOnlyOnDependsOnlyOnUserInput",sy[sy.DependsOnSelfKind=3]="DependsOnSelfKind";var dy=class extends bg{constructor(){super(...arguments),this.name=void 0,this.lazy=!1,this.total=!0,this.pure=!0,this.proposedValueIsBuilt=!1}calculation(e){throw new Error("Abstract method `calculation` called")}equality(e,n){return e===n}};__decorate3([prototypeValue(oy.DependsOnSelfKind)],dy.prototype,"level",void 0),__decorate3([prototypeValue(!0)],dy.prototype,"sync",void 0);var uy=class extends dy{constructor(){super(...arguments),this.context=void 0,this.isWritingUndefined=!1}newQuark(e){const n=this.quarkClass.new();return n.createdAt=e,n.identifier=this,n.needToBuildProposedValue=this.proposedValueIsBuilt,n}write(e,n,r,i,...o){(r=r||n.getWriteTarget(e)).proposedValue=i,r.proposedArguments=o.length>0?o:void 0,r.proposedIsPrevious=n.graph.isWritingPreviousData}writeToTransaction(e,n,...r){e.write(this,n,...r)}writeToGraph(e,n,...r){e.write(this,n,...r)}readFromGraphAsync(e){return e.readAsync(this)}readFromGraph(e){return e.read(this)}readFromTransaction(e){return e.read(this)}readFromTransactionAsync(e){return e.readAsync(this)}buildProposedValue(e,n,r){}enterGraph(e){}leaveGraph(e){}},IdentifierC=e=>uy.new(e),hy=ly.mix(iy.mix(Map)),gy=ly.mix(ty.mix(Map)),py=class extends uy{calculation(e){throw new Error("The 'calculation' method of the variables should never be called. Instead, the value will be set directly to quark")}write(e,n,r,i,...o){(r=r||n.getWriteTarget(e)).value=i,r.proposedArguments=o.length>0?o:void 0}};function VariableC(...e){return py.new(...e)}__decorate3([prototypeValue(oy.UserInput)],py.prototype,"level",void 0),__decorate3([prototypeValue(hy)],py.prototype,"quarkClass",void 0);var my=class extends uy{calculation(e){return e(Cv)}};function CalculatedValueSyncC(...e){return my.new(...e)}__decorate3([prototypeValue(hy)],my.prototype,"quarkClass",void 0);var fy=class extends uy{*calculation(e){return yield Cv}};function CalculatedValueGenC(...e){return fy.new(...e)}__decorate3([prototypeValue(gy)],fy.prototype,"quarkClass",void 0);var by,vy,throwUnknownIdentifier=e=>{throw new Error(`Unknown identifier ${e}`)},yy=0,wy=class extends bg{constructor(){super(...arguments),this.createdAt=yy++,this.name="revision-"+this.createdAt,this.previous=void 0,this.scope=new Map,this.reachableCount=0,this.referenceCount=0,this.selfDependent=new Set}getLatestEntryFor(e){let n=this;for(;n;){const r=n.scope.get(e);if(r)return r;n=n.previous}return null}hasIdentifier(e){const n=this.getLatestEntryFor(e);return Boolean(n&&n.getValue()!==cy)}*previousAxis(){let e=this;for(;e;)yield e,e=e.previous}},Cy=class{constructor(){this.length=0,this.levels=[],this.lowestLevel=Qb}getLowestLevel(){for(let e=this.lowestLevel!==Qb?this.lowestLevel:0;e<this.levels.length;e++)if(this.levels[e])return this.lowestLevel=e;return this.lowestLevel=Qb}takeLowestLevel(){for(let e=this.lowestLevel!==Qb?this.lowestLevel:0;e<this.levels.length;e++){const n=this.levels[e];if(n)return this.length-=n.length,this.levels[e]=null,this.lowestLevel=e+1,n}}pop(){for(let e=this.lowestLevel!==Qb?this.lowestLevel:0;e<this.levels.length;e++){const n=this.levels[e];if(this.lowestLevel=e,n&&n.length>0)return this.length--,n.pop()}this.lowestLevel=Qb}push(e){const n=e.level;let r=this.levels[n];if(!r){for(let e=this.levels.length;e<n;e++)this.levels[e]=null;r=this.levels[n]=[]}r.push(e),this.length++,n<this.lowestLevel&&(this.lowestLevel=n)}*[Symbol.iterator](){for(let e=0;e<this.levels.length;e++){const n=this.levels[e];n&&(yield*n)}}},Sy=class extends bg{toString(){const e=[],n=[];return this.cycle.forEach((({name:r,context:i})=>{e.push(r),n[n.length-1]!==i&&n.push(i)})),"events: \n"+n.map((e=>"#"+e.id)).join(" => ")+"\n\nidentifiers: \n"+e.join("\n")}},xy=class extends sv{constructor(){super(...arguments),this.transaction=void 0}onCycle(e,n){return Kb.Cancel}doCollectNext(e,n,r){let i=this.visited.get(n);i||(i={visitedAt:iv,visitEpoch:this.currentEpoch},this.visited.set(n,i)),r.push({node:n,from:e,label:void 0})}collectNext(e,n){const r=this.transaction.getLatestEntryFor(e);r&&r.outgoingInTheFutureTransactionCb(this.transaction,(r=>{this.doCollectNext(e,r.identifier,n)}))}},Dy=class extends bg{constructor(){super(...arguments),this.visited=new Map,this.transaction=void 0,this.baseRevision=void 0,this.pushTo=void 0,this.toVisit=[],this.currentEpoch=0}startFrom(e){this.continueFrom(e)}continueFrom(e){this.toVisit.push.apply(this.toVisit,e),this.walkDepth()}startNewEpoch(){if(this.toVisit.length)throw new Error("Can not start new walk epoch in the middle of the walk");this.currentEpoch++}onTopologicalNode(e,n){e.lazy||e.level===oy.UserInput||this.pushTo.push(n)}onCycle(e,n){return Kb.Resume}doCollectNext(e,n,r){let i=this.visited.get(n);i||(i=n.newQuark(this.baseRevision),i.visitEpoch=this.currentEpoch,this.visited.set(n,i)),r.push(n)}collectNext(e,n,r){const i=this.baseRevision.getLatestEntryFor(e);i&&(r.previous=i,i.outgoingInTheFutureAndPastTransactionCb(this.transaction,(r=>{this.doCollectNext(e,r.identifier,n)})));for(const i of r.getOutgoing().keys())this.doCollectNext(e,i,n);if(void 0!==r.$outgoingPast)for(const i of r.getOutgoingPast().keys())this.doCollectNext(e,i,n)}walkDepth(){const e=this.visited,n=this.toVisit;let r;for(;r=n.length;){const i=n[r-1];let o=e.get(i);if(o&&o.visitedAt===ov&&o.visitEpoch===this.currentEpoch)o.edgesFlow++,n.pop();else if(o&&o.visitEpoch===this.currentEpoch&&o.visitedAt!==iv){if(o.visitedAt<r){if(this.onCycle(i,n)!==Kb.Resume)break;o.edgesFlow++}else o.visitedAt=ov,this.onTopologicalNode(i,o);n.pop()}else{const s=n.length;o||(o=i.newQuark(this.baseRevision),o.visitEpoch=this.currentEpoch,e.set(i,o)),this.collectNext(i,n,o),o.visitEpoch<this.currentEpoch&&o.resetToEpoch(this.currentEpoch),o.visitedAt=r,o.edgesFlow++,n.length===s&&(o.visitedAt=ov,this.onTopologicalNode(i,o),n.pop())}}}},Ey=Ov.Normal,Ry=Ov.Past,ky=class extends bg{constructor(){super(...arguments),this.baseRevision=void 0,this.candidateClass=wy,this.candidate=void 0,this.graph=void 0,this.isClosed=!1,this.walkContext=void 0,this.entries=new Map,this.stackGen=new Cy,this.activeStack=[],this.onEffectSync=void 0,this.onEffectAsync=void 0,this.propagationStartDate=0,this.lastProgressNotificationDate=0,this.startProgressNotificationsAfterMs=500,this.emitProgressNotificationsEveryMs=200,this.emitProgressNotificationsEveryCalculations=100,this.plannedTotalIdentifiersToCalculate=0,this.ongoing=Promise.resolve(),this.selfDependedMarked=!1,this.rejectedWith=void 0,this.stopped=!1,this.hasEntryWithProposedValue=!1,this.hasVariableEntry=!1}initialize(...e){super.initialize(...e),this.walkContext=Dy.new({visited:this.entries,transaction:this,baseRevision:this.baseRevision,pushTo:this.stackGen}),this.candidate||(this.candidate=this.candidateClass.new({previous:this.baseRevision})),this.onEffectSync=this.read.bind(this),this.onEffectAsync=this.readAsync.bind(this)}get dirty(){return this.entries.size>0}markSelfDependent(){if(!this.selfDependedMarked){this.selfDependedMarked=!0;for(const e of this.baseRevision.selfDependent){const n=this.entries.get(e);n&&n.getValue()===cy||this.touch(e)}}}getActiveEntry(){return this.activeStack[this.activeStack.length-1]}yieldAsync(e){return isPromise(e)?e:this.graph[e.handler](e,this)}yieldSync(e){if(isPromise(e))throw new Error("Can not yield a promise in the synchronous context");return this.graph[e.handler](e,this)}readAsync(e){if(!(e instanceof uy))return this.yieldAsync(e);let n;const r=this.getActiveEntry();if(r)n=this.addEdge(e,r,Ey);else if(n=this.entries.get(e),!n){const r=this.baseRevision.getLatestEntryFor(e);r||throwUnknownIdentifier(e),n=r.hasValue()?r:this.touch(e)}return n.hasValue()?n.getValue():n.promise?n.promise:(n.previous&&n.previous.hasValue()||n.forceCalculation(),this.ongoing=n.promise=this.ongoing.then((()=>(async()=>{for(;this.stackGen.lowestLevel<e.level;)await runGeneratorAsyncWithEffect(this.onEffectAsync,this.calculateTransitionsStackGen,[this.onEffectAsync,this.stackGen.takeLowestLevel()],this);if(this.markSelfDependent(),void 0===n.getValue())return runGeneratorAsyncWithEffect(this.onEffectAsync,this.calculateTransitionsStackGen,[this.onEffectAsync,[n]],this)})())).then((()=>{if(this.rejectedWith)throw new Error(`Transaction rejected: ${String(this.rejectedWith.reason)}`);if(!n.hasValue())throw new Error("Computation cycle. Sync");return n.getValue()})))}get(e){if(!(e instanceof uy))return this.yieldSync(e);let n;const r=this.getActiveEntry();if(r)n=this.addEdge(e,r,Ey);else if(n=this.entries.get(e),!n){const r=this.baseRevision.getLatestEntryFor(e);r||throwUnknownIdentifier(e),n=r.hasValue()?r:this.touch(e)}const i=n.getValue();if(i===cy&&throwUnknownIdentifier(e),void 0!==i&&n.hasValue())return i;if(n.promise)return n.promise;for(n.previous&&n.previous.hasValue()||n.forceCalculation();this.stackGen.getLowestLevel()<e.level;)this.calculateTransitionsStackSync(this.onEffectSync,this.stackGen.takeLowestLevel());if(this.markSelfDependent(),e.sync){this.calculateTransitionsStackSync(this.onEffectSync,[n]);const r=n.getValue();if(void 0===r)throw new Error("Cycle during synchronous computation");return r===cy&&throwUnknownIdentifier(e),r}{const r=this.ongoing=n.promise=this.ongoing.then((()=>{if(void 0===n.getValue())return runGeneratorAsyncWithEffect(this.onEffectAsync,this.calculateTransitionsStackGen,[this.onEffectAsync,[n]],this)})).then((()=>{if(this.rejectedWith)throw new Error(`Transaction rejected: ${String(this.rejectedWith.reason)}`);const r=n.getValue();if(void 0===r)throw new Error("Computation cycle. Async get");return r===cy&&throwUnknownIdentifier(e),r}));return r}}read(e){if(!(e instanceof uy))return this.yieldSync(e);let n;const r=this.getActiveEntry();if(r)n=this.addEdge(e,r,Ey);else if(n=this.entries.get(e),!n){const r=this.baseRevision.getLatestEntryFor(e);r||throwUnknownIdentifier(e),n=r.hasValue()?r:this.touch(e)}const i=n.getValue();if(i===cy&&throwUnknownIdentifier(e),void 0!==i)return i;for(n.previous&&n.previous.hasValue()||n.forceCalculation();this.stackGen.getLowestLevel()<e.level;)this.calculateTransitionsStackSync(this.onEffectSync,this.stackGen.takeLowestLevel());this.markSelfDependent(),this.calculateTransitionsStackSync(this.onEffectSync,[n]);const o=n.getValue();if(void 0===o)throw new Error("Cycle during synchronous computation");return o===cy&&throwUnknownIdentifier(e),o}readCurrentOrProposedOrPrevious(e){const n=this.entries.get(e);if(n){const e=n.getValue();if(void 0!==e)return e;if(void 0!==n.proposedValue)return n.proposedValue}return this.readPrevious(e)}readCurrentOrProposedOrPreviousAsync(e){const n=this.entries.get(e);if(n){const e=n.getValue();if(void 0!==e)return e;if(void 0!==n.proposedValue)return n.proposedValue}return this.readPreviousAsync(e)}readPrevious(e){const n=this.baseRevision.getLatestEntryFor(e);if(!n)return;const r=n.getValue();return r!==cy?void 0===r&&e.lazy?this.read(e):r:void 0}readPreviousAsync(e){const n=this.baseRevision.getLatestEntryFor(e);if(!n)return;const r=n.getValue();return r!==cy?void 0!==r?r:this.readAsync(e):void 0}readProposedOrPrevious(e){const n=this.entries.get(e);return n&&void 0!==n.proposedValue?n.proposedValue:this.readPrevious(e)}readProposedOrPreviousAsync(e){const n=this.entries.get(e);return n&&void 0!==n.proposedValue?n.proposedValue:this.readPreviousAsync(e)}write(e,n,...r){void 0===n&&(n=null),e.write.call(e.context||e,e,this,null,n,...r);const i=this.entries.get(e);this.hasVariableEntry=this.hasVariableEntry||!i.isShadow()&&e.level===oy.UserInput,this.hasEntryWithProposedValue=this.hasEntryWithProposedValue||i.hasProposedValue()}getWriteTarget(e){return this.touch(e).startOrigin()}acquireQuarkIfExists(e){const n=this.entries.get(e);return n&&n.origin===n?n.origin:void 0}touch(e){const n=this.entries.get(e);(!n||n.visitEpoch<this.walkContext.currentEpoch)&&this.walkContext.continueFrom([e]);const r=n||this.entries.get(e);return r.forceCalculation(),r}hasIdentifier(e){const n=this.entries.get(e);return(!n||n.getValue()!==cy)&&Boolean(n||this.baseRevision.getLatestEntryFor(e))}addIdentifier(e,n,...r){let i=this.entries.get(e);const o=Boolean(i),s=e.level===oy.UserInput;if(i||(i=e.newQuark(this.baseRevision),i.previous=this.baseRevision.getLatestEntryFor(e),i.forceCalculation(),this.entries.set(e,i),e.lazy||s||this.stackGen.push(i),this.hasVariableEntry=this.hasVariableEntry||!i.isShadow()&&s,this.hasEntryWithProposedValue=this.hasEntryWithProposedValue||i.hasProposedValue()),void 0!==n||s){i.startOrigin();o&&(void 0!==i.proposedValue||void 0!==i.value)&&i.proposedValue!==cy&&i.value!==cy||(e.isWritingUndefined=void 0===n,e.write.call(e.context||e,e,this,i,void 0===n&&s?null:n,...r),e.isWritingUndefined=!1)}return i.getValue()===cy&&(i.value=void 0),i.proposedValue===cy&&(i.proposedValue=void 0),e.enterGraph(this.graph),i}removeIdentifier(e){e.leaveGraph(this.graph);this.touch(e).startOrigin().setValue(cy),this.candidate.selfDependent.delete(e)}populateCandidateScopeFromTransitions(e,n){if(0===e.scope.size)e.scope=n;else for(const[r,i]of n)if(i.isShadow()){const n=e.getLatestEntryFor(r);i.getOutgoing().forEach(((e,r)=>n.getOutgoing().set(r,e)))}else e.scope.set(r,i)}preCommit(e){if(this.isClosed)throw new Error("Can not propagate closed revision");this.markSelfDependent(),this.isClosed=!0,this.propagationStartDate=Date.now(),this.plannedTotalIdentifiersToCalculate=this.stackGen.length}postCommit(){this.populateCandidateScopeFromTransitions(this.candidate,this.entries);const e=this.entries;return this.walkContext=void 0,{revision:this.candidate,entries:e,transaction:this}}commit(e){return this.preCommit(e),this.calculateTransitionsSync(this.onEffectSync),this.postCommit()}reject(e=xv.new()){this.rejectedWith=e,this.walkContext=void 0}stop(){this.stopped=!0}clearRejected(){for(const e of this.entries.values())e.cleanup();this.entries.clear()}async commitAsync(e){return this.preCommit(e),this.ongoing=this.ongoing.then((()=>runGeneratorAsyncWithEffect(this.onEffectAsync,this.calculateTransitions,[this.onEffectAsync],this))).then((()=>this.postCommit()))}getLatestEntryFor(e){let n=this.entries.get(e)||this.baseRevision.getLatestEntryFor(e);if(!n||n.getValue()!==cy)return n}getLatestStableEntryFor(e){let n=this.entries.get(e);if(n){const r=n.getValue();if(r===cy)return;return void 0===r?this.baseRevision.getLatestEntryFor(e):n}return this.baseRevision.getLatestEntryFor(e)}addEdge(e,n,r){if(n.identifier.level<e.level)throw new Error("Identifier can not read from higher level identifier");let i=this.entries.get(e);if(!i){const n=this.baseRevision.getLatestEntryFor(e);n||throwUnknownIdentifier(e),i=e.newQuark(this.baseRevision),i.setOrigin(n),i.previous=n,this.entries.set(e,i)}return i.addOutgoingTo(n,r),i}onQuarkCalculationCompleted(e,n){e.cleanup();const r=e.identifier,i=e.previous,o=Boolean(i&&i.hasValue()&&r.equality(n,i.getValue()));o?(i.outgoingInTheFutureAndPastTransactionCb(this,(e=>{const n=this.entries.get(e.identifier);n&&n.edgesFlow--})),e.edgesFlow=Qb,e.setOrigin(i.origin),e.value=n):(e.startOrigin(),e.setValue(n));let s=!1;e.usedProposedOrPrevious&&(void 0!==e.proposedValue?r.equality(n,e.proposedValue)&&(s=!0):(o||!i&&null===n)&&(s=!0),s||this.candidate.selfDependent.add(r))}onReadIdentifier(e,n,r){const i=this.addEdge(e,n,Ey);if(i.hasValue()||void 0!==i.value){const r=i.getValue();return r===cy&&throwUnknownIdentifier(e),n.continueCalculation(r)}if(i.isShadow())return i.startOrigin(),i.forceCalculation(),void r.push(i);if(i.isCalculationStarted()){let e;return xy.new({transaction:this,onCycle:(r,o)=>(e=Sy.new({cycle:cycleInfo(o),requestedEntry:i,activeEntry:n}),Kb.Cancel)}).startFrom([i.identifier]),e}return r.push(i),void(i.previous&&i.previous.hasValue()||i.forceCalculation())}*calculateTransitions(e){const n=this.stackGen;for(;n.length;)yield*this.calculateTransitionsStackGen(e,n.takeLowestLevel())}calculateTransitionsSync(e){const n=this.stackGen;for(;n.length;)this.calculateTransitionsStackSync(e,n.takeLowestLevel())}*calculateTransitionsStackGen(e,n){if(this.rejectedWith||this.stopped)return;this.walkContext.startNewEpoch();const r=this.entries,i=this.propagationStartDate,o=!!this.graph&&this.graph.enableProgressNotifications;let s=0;const a=this.activeStack;for(this.activeStack=n;n.length&&!this.rejectedWith&&!this.stopped;){if(o&&!(s++%this.emitProgressNotificationsEveryCalculations)){const e=Date.now();if(e-i>this.startProgressNotificationsAfterMs){const r=this.lastProgressNotificationDate;(!r||e-r>this.emitProgressNotificationsEveryMs)&&(this.lastProgressNotificationDate=e,this.graph.onPropagationProgressNotification({total:this.plannedTotalIdentifiersToCalculate,remaining:this.stackGen.length+n.length,phase:"propagating"}),this.activeStack=a,yield delay2(0),this.activeStack=n)}}if(this.rejectedWith||this.stopped)break;const e=n[n.length-1],l=e.identifier;if(r.get(l)!==e){e.cleanup(),n.pop();continue}if(0==e.edgesFlow){e.edgesFlow--;const n=e.previous;n&&n.outgoingInTheFutureAndPastTransactionCb(this,(e=>{const n=r.get(e.identifier);n&&n.edgesFlow--}))}if(e.edgesFlow<0&&e.previous&&e.previous.origin){e.setOrigin(e.previous.origin),0===e.size&&r.delete(l),e.cleanup(),n.pop();continue}if(e.hasValue()||e.proposedValue===cy){e.cleanup(),n.pop();continue}const c=e.visitEpoch;let d=e.isCalculationStarted()?e.iterationResult:e.startCalculation(this.onEffectSync);for(;d&&!this.rejectedWith&&!this.stopped;){const r=void 0===d.value?null:d.value;if(e.isCalculationCompleted()){e.visitEpoch==c&&this.onQuarkCalculationCompleted(e,r),n.pop();break}if(r instanceof uy){const i=this.onReadIdentifier(r,e,n);i instanceof Sy?(this.walkContext.startNewEpoch(),yield*this.graph.onComputationCycleHandler(i),e.cleanupCalculation(),d=void 0):d=i}else{if(r===ny){n.pop();break}{const i=yield r;if(i===vv)break;if(e.visitEpoch!==c){n.pop();break}d=e.continueCalculation(i)}}}}this.activeStack=a}calculateTransitionsStackSync(e,n){if(this.rejectedWith||this.stopped)return;this.walkContext.startNewEpoch();const r=this.entries,i=this.activeStack;for(this.activeStack=n;n.length&&!this.rejectedWith&&!this.stopped;){const i=n[n.length-1],o=i.identifier;if(r.get(o)!==i){i.cleanup(),n.pop();continue}if(0==i.edgesFlow){i.edgesFlow--;const e=i.previous;e&&e.outgoingInTheFutureAndPastTransactionCb(this,(e=>{const n=r.get(e.identifier);n&&n.edgesFlow--}))}if(i.edgesFlow<0&&i.previous&&i.previous.origin){i.setOrigin(i.previous.origin),0===i.size&&r.delete(o),i.cleanup(),n.pop();continue}if(i.hasValue()||i.proposedValue===cy){i.cleanup(),n.pop();continue}const s=i.visitEpoch;let a=i.isCalculationStarted()?i.iterationResult:i.startCalculation(this.onEffectSync);for(;a&&!this.rejectedWith&&!this.stopped;){const r=void 0===a.value?null:a.value;if(i.isCalculationCompleted()){i.visitEpoch==s&&this.onQuarkCalculationCompleted(i,r),n.pop();break}if(r instanceof uy){const e=this.onReadIdentifier(r,i,n);e instanceof Sy?(this.walkContext.startNewEpoch(),this.graph.onComputationCycleHandlerSync(e,this),i.cleanupCalculation(),a=void 0):a=e}else{if(r===ny){n.pop();break}{const o=e(r);if(isPromise(o))throw new Error("Effect resolved to promise in the synchronous context, check that you marked the asynchronous calculations accordingly");if(o===vv)break;if(i.visitEpoch!==s){n.pop();break}a=i.continueCalculation(o)}}}}this.activeStack=i}},Ty={rejectedWith:null},My=class extends bg{constructor(){super(...arguments),this.handlers=[]}trigger(e){for(let n=0;n<this.handlers.length;n++)this.handlers[n](e)}},Ay=class extends bg{constructor(){super(...arguments),this.baseRevisionStable=void 0,this.baseRevisionTentative=void 0,this.baseRevision=wy.new(),this.topRevision=void 0,this.historyLimit=0,this.listeners=new Map,this.isWritingPreviousData=!1,this.$activeTransaction=void 0,this.isCommitting=!1,this.enableProgressNotifications=!1,this.ongoing=Promise.resolve(),this._isInitialCommit=!0,this.autoCommitTimeoutId=null,this.autoCommit=!1,this.autoCommitMode="sync",this.autoCommitHandler=null,this.onWriteDuringCommit="throw",this.onComputationCycle="throw",this.transactionClass=ky,this.isJustCleared=!1,this.$followingRevision=void 0}initialize(...e){super.initialize(...e),this.topRevision||(this.topRevision=this.baseRevision),this.autoCommit&&(this.autoCommitHandler="sync"===this.autoCommitMode?e=>this.commit(e):async e=>this.commitAsync(e)),this.markAndSweep()}hasPendingAutoCommit(){return null!==this.autoCommitTimeoutId}get dirty(){return this.activeTransaction.dirty}clear(){this.reject(),this.unScheduleAutoCommit(),this.baseRevision.scope&&this.baseRevision.scope.clear(),this.baseRevision.previous=null,this.listeners.clear(),this.topRevision=this.baseRevision,this.$followingRevision=void 0,this.$activeTransaction=void 0,this.markAndSweep(),this.isJustCleared=!0}*eachReachableRevision(){let e=!0,n=0;for(const r of this.topRevision.previousAxis())yield[r,e||n<this.historyLimit],r===this.baseRevision?e=!1:e||n++}get isInitialCommit(){return this._isInitialCommit}set isInitialCommit(e){this._isInitialCommit=e}markAndSweep(){let e;const n=[];for(const[r,i]of this.eachReachableRevision())i?(r.reachableCount++,e=r):n.push(r),r.referenceCount++;n.unshift(e);for(let e=n.length-1;e>=1&&0===n[e].reachableCount;e--)this.compactRevisions(n[e-1],n[e])}compactRevisions(e,n){if(n.reachableCount>0||e.previous!==n)throw new Error("Invalid compact operation");if(n.referenceCount<=1){for(const[r,i]of e.scope)if(i.getValue()===cy)n.scope.delete(r);else{const o=n.scope.get(r);i.origin===i?o&&(o.clear(),o.clearProperties()):o&&i.origin===o?i.mergePreviousOrigin(e.scope):r.lazy&&!i.origin&&o&&o.origin&&(i.startOrigin().proposedValue=void 0!==o.origin.value?o.origin.value:o.origin.proposedValue),i.previous=void 0,n.scope.set(r,i)}((e,n)=>{for(const r of e)n.add(r)})(e.selfDependent,n.selfDependent),e.scope=n.scope,n.scope=null}else e.scope=new Map(concat(n.scope,e.scope)),e.selfDependent=new Set(concat(n.selfDependent,e.selfDependent)),n.referenceCount--;e.previous=null}get followingRevision(){if(void 0!==this.$followingRevision)return this.$followingRevision;const e=Array.from(this.topRevision.previousAxis()),n=[];for(let r=e.length-1;r>0;r--)n.push([e[r],e[r-1]]);return this.$followingRevision=new Map(n)}get activeTransaction(){return this.$activeTransaction?this.$activeTransaction:this.$activeTransaction=this.transactionClass.new({baseRevision:this.baseRevisionTentative||this.baseRevision,graph:this})}branch(e){return this.constructor.new(Object.assign({},e,{baseRevision:this.baseRevision}))}propagate(e){return this.commit(e)}reject(e){this.activeTransaction.reject(xv.new({reason:e})),this.ongoing=Promise.resolve(),this.$activeTransaction=void 0,this.baseRevisionTentative=void 0,this.baseRevisionStable&&(this.baseRevision=this.baseRevisionStable,this.baseRevisionStable=void 0)}commit(e){this.isJustCleared=!1,this.unScheduleAutoCommit(),this.baseRevisionStable=this.baseRevision;const n=this.activeTransaction.commit(e);this.$activeTransaction=void 0;const r=this.finalizeCommit(n);return this.baseRevisionStable=void 0,this.isInitialCommit=!1,r}async propagateAsync(e){return this.commitAsync(e)}async commitAsync(e){if(this.isCommitting)return this.ongoing;let n;return this.isJustCleared=!1,this.isCommitting=!0,this.baseRevisionStable=this.baseRevision,this.ongoing=this.ongoing.then((()=>this.doCommitAsync(e))).then((e=>(n=e,e))).finally((()=>{this.baseRevisionStable=void 0,this.baseRevisionTentative=void 0,this.isInitialCommit=!1,this.isCommitting=!1}))}async doCommitAsync(e){this.unScheduleAutoCommit();const n=this.activeTransaction,r=await n.commitAsync(e),i=Boolean(n.rejectedWith),o=this.baseRevisionTentative;if(i||(this.baseRevisionTentative=n.candidate),this.$activeTransaction=void 0,await this.finalizeCommitAsync(r),this.isJustCleared)return{rejectedWith:xv.new({reason:"Graph cleared"})};n.rejectedWith&&!i&&(this.baseRevisionTentative=o,this.$activeTransaction=void 0);const s=this.finalizeCommit(r);return n.rejectedWith&&n.clearRejected(),this.dirty&&!n.rejectedWith&&await this.doCommitAsync(e),s}finalizeCommit(e){const{revision:n,entries:r,transaction:i}=e;if(i.rejectedWith)this.baseRevisionStable&&(this.baseRevision=this.baseRevisionStable),this.baseRevisionStable=void 0,this.baseRevisionTentative=void 0;else{if(n.previous!==this.baseRevision)throw new Error("Invalid revisions chain");for(const[e,n]of this.eachReachableRevision())n&&e.reachableCount--,e.referenceCount--;this.baseRevision=this.topRevision=n;for(const[e,n]of r){if(n.cleanup(),n.isShadow()||!n.hasValue())continue;const r=this.listeners.get(e);r&&r.trigger(n.getValue())}this.$followingRevision=void 0,this.markAndSweep()}return{rejectedWith:i.rejectedWith}}async finalizeCommitAsync(e){}*onComputationCycleHandler(e){const n=new Error("Computation cycle:\n"+e);switch(n.cycle=e,this.onComputationCycle){case"ignore":console.log(n.message);const{requestedEntry:r,activeEntry:i}=e;return i.continueCalculation(void 0!==r.proposedValue?r.proposedValue:r.value);case"throw":throw n;case"reject":this.reject(n);break;case"warn":ev(n)}}onComputationCycleHandlerSync(e,n){const r=new Error("Computation cycle:\n"+e);switch(r.cycle=e,this.onComputationCycle){case"ignore":console.log(r.message);const{requestedEntry:n,activeEntry:i}=e;return i.continueCalculation(void 0!==n.proposedValue?n.proposedValue:n.value);case"throw":throw r;case"reject":this.reject(r);break;case"warn":ev(r)}}scheduleAutoCommit(){null!==this.autoCommitTimeoutId||this.isCommitting||(this.autoCommitTimeoutId=setTimeout(this.autoCommitHandler,10))}unScheduleAutoCommit(){null!==this.autoCommitTimeoutId&&(clearTimeout(this.autoCommitTimeoutId),this.autoCommitTimeoutId=null)}variable(e){const n=VariableC();return this.addIdentifier(n,void 0===e?null:e)}variableNamed(e,n){const r=VariableC({name:e});return this.addIdentifier(r,void 0===n?null:n)}identifier(e,n){const r=isGeneratorFunction(e)?CalculatedValueGenC({calculation:e,context:n}):CalculatedValueSyncC({calculation:e,context:n});return this.addIdentifier(r)}identifierNamed(e,n,r){const i="GeneratorFunction"===n.constructor.name?CalculatedValueGenC({name:e,calculation:n,context:r}):CalculatedValueSyncC({name:e,calculation:n,context:r});return this.addIdentifier(i)}addIdentifier(e,n,...r){if(this.isCommitting){if("throw"===this.onWriteDuringCommit)throw new Error("Adding identifier during commit");"warn"===this.onWriteDuringCommit&&ev(new Error("Adding identifier during commit"))}return this.activeTransaction.addIdentifier(e,n,...r),this.autoCommit&&this.scheduleAutoCommit(),e}removeIdentifier(e){if(this.isCommitting){if("throw"===this.onWriteDuringCommit)throw new Error("Removing identifier during commit");"warn"===this.onWriteDuringCommit&&ev(new Error("Removinfg identifier during commit"))}this.activeTransaction.removeIdentifier(e),this.listeners.delete(e),this.autoCommit&&this.scheduleAutoCommit()}hasIdentifier(e){return this.activeTransaction.hasIdentifier(e)}write(e,n,...r){if(this.isCommitting){if("throw"===this.onWriteDuringCommit)throw new Error("Write during commit");"warn"===this.onWriteDuringCommit&&ev(new Error("Write during commit"))}this.activeTransaction.write(e,n,...r),this.autoCommit&&this.scheduleAutoCommit()}readPrevious(e){return this.activeTransaction.readPrevious(e)}readPreviousAsync(e){return this.activeTransaction.readPreviousAsync(e)}read(e){return this.activeTransaction.read(e)}readAsync(e){return this.activeTransaction.readAsync(e)}get(e){return this.activeTransaction.get(e)}observe(e,n){const r=this.addIdentifier(fy.new({lazy:!1,calculation:e}));return this.addListener(r,n),r}observeContext(e,n,r){const i=this.addIdentifier(fy.new({lazy:!1,calculation:e,context:n}));return this.addListener(i,r),i}addListener(e,n){let r=this.listeners.get(e);r||(r=My.new(),this.listeners.set(e,r)),r.handlers.push(n)}undo(){const e=this.baseRevision.previous;return!!e&&(this.baseRevision=e,this.$activeTransaction=void 0,!0)}redo(){const e=this.baseRevision;if(e===this.topRevision)return!1;const n=this.followingRevision.get(e);return this.baseRevision=n,this.$activeTransaction=void 0,!0}onPropagationProgressNotification(e){}[wv](e,n){const r=n.getActiveEntry();r.usedProposedOrPrevious=!0;const i=r.getProposedValue(n);if(void 0!==i)return i;if(!r.previous)return;return r.identifier.lazy?r.previous.hasValue()?r.previous.getValue():r.previous.hasProposedValue()?r.previous.getProposedValue(n):null:n.readPrevious(r.identifier)}[Sv](e,n){return this.reject(e.reason),vv}[Dv](e,n){return n}[Rv](e,n){return n.getActiveEntry()}[Tv](e,n){return n.getActiveEntry().identifier}[Av](e,n){const r=n.getActiveEntry();if(r.identifier.lazy)throw new Error("Lazy identifiers can not use `Write` effect");const i=e.identifier.level>r.identifier.level;return i||n.walkContext.startNewEpoch(),n.write(e.identifier,...e.proposedArgs),i?void 0:vv}[Fv](e,n){const r=n.getActiveEntry();if(r.identifier.lazy)throw new Error("Lazy identifiers can not use `Write` effect");let i=!0;return e.writes.forEach((e=>{e.identifier.level<=r.identifier.level&&i&&(n.walkContext.startNewEpoch(),i=!1),n.write(e.identifier,...e.proposedArgs)})),i?void 0:vv}[_v](e,n){const r=n.getActiveEntry(),i=e.identifier;return n.addEdge(i,r,Ry),n.readPrevious(i)}[jv](e,n){const r=n.getActiveEntry(),i=e.identifier;n.addEdge(i,r,Ry);const o=n.entries.get(i);return o&&!o.isShadow()?o.getProposedValue(n):void 0}[Bv](e,n){const r=n.getActiveEntry(),i=e.identifier;n.addEdge(i,r,Ry);const o=n.entries.get(i);return!!o&&o.hasProposedValue()}[Vv](e,n){const r=n.getActiveEntry(),i=e.identifier;n.addEdge(i,r,Ry);const o=n.entries.get(i);return!!o&&(o.hasProposedValue()&&!o.proposedIsPrevious)}[qv](e,n){const r=n.getActiveEntry(),i=e.identifier;return n.addEdge(i,r,Ry),n.readProposedOrPrevious(i)}[Yv](e,n){return n.readProposedOrPrevious(e.identifier)}[Xv](e,n){return n.readPrevious(e.identifier)}[Uv](e,n){const r=n.getActiveEntry(),i=e.identifier;n.addEdge(i,r,Ry);const o=n.entries.get(i);return o&&!o.isShadow()?o.proposedArguments:void 0}},Iy=class extends bg{constructor(){super(...arguments),this.name=void 0,this.ownFields=new Map,this.schema=void 0,this.$skeleton={},this.$allFields=void 0}hasField(e){return void 0!==this.getField(e)}getField(e){return this.allFields.get(e)}addField(e){const n=e.name;if(!n)throw new Error("Field must have a name");if(this.ownFields.has(n))throw new Error(`Field with name [${n}] already exists`);return e.entity=this,this.ownFields.set(n,e),e}forEachParent(e){let n=this;for(;n;)e(n),n=n.parentEntity}get allFields(){if(void 0!==this.$allFields)return this.$allFields;const e=new Map,n=new Set;return this.forEachParent((r=>{r.ownFields.forEach(((r,i)=>{n.has(i)||(n.add(i),e.set(i,r))}))})),this.$allFields=e}forEachField(e){this.allFields.forEach(e)}};(vy=by||(by={}))[vy.Current=0]="Current",vy[vy.Previous=1]="Previous",vy[vy.ProposedOrPrevious=2]="ProposedOrPrevious",vy[vy.CurrentOrProposedOrPrevious=3]="CurrentOrProposedOrPrevious";var Fy,Py,Oy=class extends(mg([Ay],(e=>class Replica extends e{constructor(){super(...arguments),this.autoCommit=!0,this.readMode=by.Current}addEntity(e){e.enterGraph(this)}addEntities(e){e.forEach((e=>this.addEntity(e)))}removeEntity(e){e.leaveGraph(this)}removeEntities(e){e.forEach((e=>this.removeEntity(e)))}}))){},Ly=class extends(mg([uy],(e=>class FieldIdentifier extends e{constructor(){super(...arguments),this.field=void 0,this.self=void 0,this.DATA=void 0}getFromGraph(e){return e?e.readMode===by.Current?e.get(this):e.readMode===by.Previous?e.activeTransaction.readPrevious(this):(e.readMode===by.ProposedOrPrevious&&e.activeTransaction.readProposedOrPrevious(this),e.activeTransaction.readCurrentOrProposedOrPrevious(this)):this.DATA}readFromGraph(e){return e?e.read(this):this.DATA}writeToGraph(e,n,...r){e?e.write(this,n,...r):this.DATA=n}leaveGraph(e){const n=e.activeTransaction.getLatestStableEntryFor(this);n&&(this.DATA=n.getValue()),super.leaveGraph(e)}toString(){return this.name}}))){},_y=class extends(Ly.mix(my)){},$y=class extends(Ly.mix(fy)){},jy=class extends(Ly.mix(py)){},zy=class extends(mg([uy],(e=>class EntityIdentifier extends e{constructor(){super(...arguments),this.entity=void 0,this.self=void 0}equality(){return!1}toString(){return`Entity identifier [${this.self}]`}}))){},By=class extends(zy.mix(fy)){},Hy=class extends dy{constructor(){super(...arguments),this.persistent=!0}getIdentifierClass(e){return this.identifierCls?this.identifierCls:e?isGeneratorFunction(e)?$y:_y:jy}},Vy=Symbol("isEntity"),Ny=class extends(mg([],(e=>{return class Entity2 extends e{[Vy](){}get $entity(){return createEntityOnPrototype(this.constructor.prototype)}get $(){const e={};return this.$entity.forEachField(((n,r)=>{e[r]=this.createFieldIdentifier(n)})),defineProperty9(this,"$",e)}get $$(){return defineProperty9(this,"$$",By.new({name:this.$entityName,entity:this.$entity,calculation:this.calculateSelf,context:this,self:this}))}get $entityName(){return this.constructor.name||this.$entity.name}*calculateSelf(){return this}createFieldIdentifier(e){const n=e.name,r=this.$entity,i=this.constructor,o=r.$skeleton;o[n]||(o[n]=i.getIdentifierTemplateClass(this,e));const s=new o[n];return s.context=this,s.self=this,s.name=`${this.$$.name}.$.${e.name}`,s}forEachFieldIdentifier(e){this.$entity.forEachField(((n,r)=>e(this.$[r],r,n)))}enterGraph(e){if(this.graph)throw new Error("Already entered replica");this.graph=e,e.addIdentifier(this.$$),this.$entity.forEachField(((n,r)=>{const i=this.$[r];e.addIdentifier(i,i.DATA),i.DATA=void 0}))}leaveGraph(e){const n=this.graph,r=e||n;r&&(this.$entity.forEachField(((e,n)=>r.removeIdentifier(this.$[n]))),r.removeIdentifier(this.$$),r===n&&(this.graph=void 0))}propagate(e){return this.commit(e)}commit(e){const n=this.graph;return n?n.commit(e):Ty}async propagateAsync(){return this.commitAsync()}async commitAsync(e){const n=this.graph;return n?n.commitAsync(e):Promise.resolve(Ty)}static get $entity(){return ensureEntityOnPrototype(this.prototype)}static getIdentifierTemplateClass(e,n){const r=n.name,i={name:`${e.$$.name}.$.${r}`,field:n};n.hasOwnProperty("sync")&&(i.sync=n.sync),n.hasOwnProperty("lazy")&&(i.lazy=n.lazy),n.hasOwnProperty("equality")&&(i.equality=n.equality);const o=e.$calculations&&e[e.$calculations[r]];o&&(i.calculation=o);const s=e.$writes&&e[e.$writes[r]];s&&(i.write=s);const a=e.$buildProposed&&e[e.$buildProposed[r]];a&&(i.buildProposedValue=a,i.proposedValueIsBuilt=!0);const l=n.getIdentifierClass(o).new(i),TemplateClass=function(){};return TemplateClass.prototype=l,TemplateClass}run(e,...n){const r=this.graph.activeTransaction,i=r.activeStack;r.activeStack=[];const o=runGeneratorSyncWithEffect((e=>{if(e instanceof uy)return this.graph.read(e);throw new Error("Helper methods can not yield effects during computation")}),this[e],n,this);return r.activeStack=i,o}static createPropertyAccessorsFor(e){const n=e,r=this.prototype;Object.defineProperty(r,n,{get:function(){return this.$[n].getFromGraph(this.graph)},set:function(e){this.$[n].writeToGraph(this.graph,e)}})}static createMethodAccessorsFor(e){const n=e,r=this.prototype,i=`get${uppercaseFirst(n)}`,o=`set${uppercaseFirst(n)}`,s=`put${uppercaseFirst(n)}`;i in r||(r[i]=function(){return this.$[n].getFromGraph(this.graph)}),o in r||(r[o]=function(e,...r){return this.$[n].writeToGraph(this.graph,e,...r),this.graph?"sync"===this.graph.autoCommitMode?this.graph.commit():this.graph.commitAsync():Promise.resolve(Ty)}),s in r||(r[s]=function(e,...r){this.$[n].writeToGraph(this.graph,e,...r)})}}}))){},createEntityOnPrototype=e=>{let n=Object.getPrototypeOf(e);return defineProperty9(e,"$entity",Iy.new({parentEntity:n.hasOwnProperty(Vy)?null:n.$entity,name:e.constructor.name}))},ensureEntityOnPrototype=e=>(e.hasOwnProperty("$entity")||createEntityOnPrototype(e),e.$entity),generic_field=(e,n=Hy)=>function(r,i){ensureEntityOnPrototype(r).addField(n.new(Object.assign(e||{},{name:i})));const o=r.constructor;o.createPropertyAccessorsFor(i),o.createMethodAccessorsFor(i)},qy=generic_field,calculate=function(e){return function(n,r,i){let o;ensureEntityOnPrototype(n),o=n.$calculations?n.hasOwnProperty("$calculations")?n.$calculations:n.$calculations=Object.create(n.$calculations):n.$calculations={},o[e]=r}},write=function(e){return function(n,r,i){let o;ensureEntityOnPrototype(n),o=n.$writes?n.hasOwnProperty("$writes")?n.$writes:n.$writes=Object.create(n.$writes):n.$writes={},o[e]=r}},build_proposed=function(e){return function(n,r,i){let o;ensureEntityOnPrototype(n),o=n.$buildProposed?n.hasOwnProperty("$buildProposed")?n.$buildProposed:n.$buildProposed=Object.create(n.$buildProposed):n.$buildProposed={},o[e]=r}},__decorate4=function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);return s>3&&a&&Object.defineProperty(n,r,a),a},Wy=class extends(mg([Hy],(e=>class ReferenceField extends e{constructor(){super(...arguments),this.identifierCls=Gy}}))){},reference=(e,n=Wy)=>generic_field(e,n),Uy=class extends(mg([Ly],(e=>{class ReferenceIdentifier2 extends e{constructor(){super(...arguments),this.field=void 0,this.proposedValueIsBuilt=!0}hasBucket(){return Boolean(this.field.bucket)}getBucket(e){return e.$[this.field.bucket]}buildProposedValue(e,n,r){const i=n.proposedValue;if(null===i)return null;const o=isInstanceOf(i,Ny)?i:e.resolve(i);return o&&e.hasBucket()&&e.getBucket(o).addToBucket(r,e.self),o}resolve(e){const n=this.field.resolver;return n?n.call(this.self,e):null}enterGraph(e){if(this.hasBucket()){const n=e.activeTransaction.readProposedOrPrevious(this);n instanceof Ny&&this.getBucket(n).addToBucket(e.activeTransaction,this.self)}super.enterGraph(e)}leaveGraph(e){if(this.hasBucket()){const n=e.activeTransaction.readProposedOrPrevious(this);n instanceof Ny&&this.getBucket(n).removeFromBucket(e.activeTransaction,this.self)}super.leaveGraph(e)}write(e,n,r,i,...o){const s=r||n.acquireQuarkIfExists(e);if(e.hasBucket())if(s){const r=s.getValue();r instanceof Ny&&e.getBucket(r).removeFromBucket(n,e.self)}else if(n.baseRevision.hasIdentifier(e)){const r=n.readPrevious(e);r instanceof Ny&&e.getBucket(r).removeFromBucket(n,e.self)}super.write(e,n,r,i)}}return __decorate4([prototypeValue(oy.DependsOnlyOnUserInput)],ReferenceIdentifier2.prototype,"level",void 0),__decorate4([prototypeValue(hy)],ReferenceIdentifier2.prototype,"quarkClass",void 0),ReferenceIdentifier2}))){},Gy=class extends(Uy.mix(Ly.mix(my))){},__decorate5=function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);return s>3&&a&&Object.defineProperty(n,r,a),a},Yy=class extends(mg([Hy],(e=>class ReferenceBucketField extends e{constructor(){super(...arguments),this.persistent=!1,this.identifierCls=Qy}}))){},bucket=(e,n=Yy)=>generic_field(e,n);(Py=Fy||(Fy={})).Add="Add",Py.Remove="Remove";var Ky=class extends(mg([ly],(e=>class ReferenceBucketQuark extends e{constructor(){super(...arguments),this.mutations=[],this.previousValue=void 0}hasProposedValueInner(){return this.mutations.length>0}}))){},Xy=Ky.mix(hy),Zy=class extends(mg([Ly],(e=>{class ReferenceBucketIdentifier2 extends e{constructor(){super(...arguments),this.proposedValueIsBuilt=!0}addToBucket(e,n){const r=e.getWriteTarget(this);r.mutations.push({type:Fy.Add,entity:n});const i=e.baseRevision;!r.previousValue&&i.hasIdentifier(this)&&(r.previousValue=e.readPrevious(this))}removeFromBucket(e,n){const r=e.entries.get(this);if(r&&r.getValue()===cy)return;const i=e.getWriteTarget(this);i.mutations.push({type:Fy.Remove,entity:n});const o=e.baseRevision;!i.previousValue&&o.hasIdentifier(this)&&(i.previousValue=e.readPrevious(this))}buildProposedValue(e,n,r){const i=n,o=new Set(i.previousValue);for(let e=0;e<i.mutations.length;e++){const{type:n,entity:r}=i.mutations[e];n===Fy.Remove?o.delete(r):n===Fy.Add&&o.add(r)}return o}leaveGraph(e){super.leaveGraph(e),this.DATA=void 0}}return __decorate5([prototypeValue(oy.DependsOnlyOnDependsOnlyOnUserInput)],ReferenceBucketIdentifier2.prototype,"level",void 0),__decorate5([prototypeValue(Xy)],ReferenceBucketIdentifier2.prototype,"quarkClass",void 0),ReferenceBucketIdentifier2}))){},Qy=class extends(Zy.mix(Ly.mix(my))){},Jy=class extends bg{constructor(){super(...arguments),this.entities=new Map}hasEntity(e){return this.entities.has(e)}getEntity(e){return this.entities.get(e)}addEntity(e){const n=e.name;if(!n)throw new Error("Entity must have a name");if(this.hasEntity(n))throw new Error(`Entity with name [${String(n)}] already exists`);return e.schema=this,this.entities.set(n,e),e}getEntityDecorator(){return e=>{const n=entityDecoratorBody(e);return this.addEntity(n),e}}},entityDecoratorBody=e=>{if(!e.name)throw new Error("Can't add entity - the target class has no name");return ensureEntityOnPrototype(e.prototype)},entity=()=>e=>(entityDecoratorBody(e),e),__decorate6=function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);return s>3&&a&&Object.defineProperty(n,r,a),a},isSerializableEqual=function(e,n){return e===n||((null==n?void 0:n.isBase)?this.serialize(n):n)===((null==e?void 0:e.isBase)?this.serialize(e):e)},ew=class extends Hy{constructor(){super(...arguments),this.modelFieldConfig={}}getIdentifierClass(e){return this.identifierCls?this.identifierCls:e?isGeneratorFunction(e)?uw:dw:hw}},tw=class extends(Wy.mix(ew)){constructor(){super(...arguments),this.identifierCls=sw}},nw=class extends(Yy.mix(Hy)){constructor(){super(...arguments),this.identifierCls=aw}},rw=Symbol("IsChronoModelSymbol"),iw=class extends(mg([Ly],(e=>{const n=e.prototype;class ChronoModelFieldIdentifier2 extends e{[rw](){}getFromGraph(e){var r,i;if(e){if(e.readMode===by.CurrentOrProposedOrPrevious){const n=e.isCommitting&&this.level>(null!=(i=null==(r=e.activeTransaction.getActiveEntry())?void 0:r.level)?i:Number.MAX_SAFE_INTEGER);return!this.sync||this.context.project.isDelayingCalculation||n?e.activeTransaction.readCurrentOrProposedOrPrevious(this):e.get(this)}return n.getFromGraph.call(this,e)}return this.DATA}writeToGraph(e,r,...i){e?n.writeToGraph.call(this,e,r,...i):(this.DATA=r,this.self.inSetting||this.self.isConstructing||this.self.set(this.field.name,r,!1,!1,!0))}write(e,r,i,o,...s){o=e.convert(o),n.write.call(this,e,r,i,o,...s)}convert(e){const n=this.field,r=this.self.getFieldDefinition(n.name);return(null==r?void 0:r.convert)?e=r.convert(e,this.context.data,this.context):n.converter&&(e=n.converter(e,n)),e}equality(e,n){return e instanceof Date&&n instanceof Date?e.getTime()===n.getTime():e===n}}return __decorate6([prototypeValue(!1)],ChronoModelFieldIdentifier2.prototype,"sync",void 0),ChronoModelFieldIdentifier2}))){},ow=class extends(mg([hy],(e=>{const n=e.prototype;return class ChronoModelReferenceFieldQuark2 extends e{setValue(e){n.setValue.call(this,e),e!==cy&&(this.identifier.DATA=e)}}}))){},sw=class extends(Uy.mix(iw.mix(_y))){buildProposedValue(e,n,r){const i=n,o=i.proposedValue;if(null==o)return r.candidate.failedResolutionReferences.delete(i.identifier),null;if(isInstanceOf(o,Ny)&&o.graph)return e.hasBucket()&&e.getBucket(o).addToBucket(r,e.self),r.candidate.failedResolutionReferences.delete(i.identifier),o;const s=e.resolve(o);return isInstanceOf(s,Ny)&&s.graph?(e.hasBucket()&&e.getBucket(s).addToBucket(r,e.self),r.candidate.failedResolutionReferences.delete(i.identifier),s):(r.candidate.failedResolutionReferences.set(i.identifier,o),null)}};__decorate6([prototypeValue(!0)],sw.prototype,"sync",void 0),__decorate6([prototypeValue(ow)],sw.prototype,"quarkClass",void 0);var aw=class extends(Zy.mix(iw.mix(_y))){};__decorate6([prototypeValue(!0)],aw.prototype,"sync",void 0);var lw,cw,dw=class extends(iw.mix(_y)){},uw=class extends(iw.mix($y)){},hw=class extends(iw.mix(jy)){},model_field=function(e={},n={},r=ew){return function(i,o){generic_field({modelFieldConfig:e,...n},r)(i,o),injectStaticFieldsProperty(i.constructor)}},injectStaticFieldsProperty=e=>{e.hasOwnProperty("fields")||Object.defineProperty(e,"fields",{get:function(){return getDecoratedModelFields(this)}})},getDecoratedModelFields=e=>{const n=e.prototype,r=[];return n.hasOwnProperty("$entity")&&n.$entity.ownFields.forEach((e=>{if(e instanceof ew){const n=e.modelFieldConfig||{};!n.convert&&e.converter&&e.converter!==dateConverter&&(n.convert=e.converter),r.push(Object.assign(n,{$chrono:e,name:e.name}))}})),r},dateConverter=(e,n)=>{var r,i;return null===e?null:(e instanceof Date||(e=Ct.parse(e,(null==(r=n.modelFieldConfig)?void 0:r.format)||(null==(i=n.modelFieldConfig)?void 0:i.dateFormat)||Ct.defaultParseFormat)),e||void 0)},gw=class extends(mg([Ny,Ur],(e=>{const n=e.prototype;return class ChronoModelMixin2 extends e{get isEntity(){return!0}construct(e,...r){this.constructor.exposeProperties(),this.originalData=e=e||{},n.construct.call(this,e,...r);for(const n in this.originalData)this.$[n]&&!this.getFieldDefinition(n)&&(this[n]=e[n])}*userProvidedValue(){return yield Cv}copy(e=null,r=null){const i=n.copy.call(this,e,r),{creatingOccurrence:o}=null!=r?r:{};return(Et.isObject(r)&&!r.skipFieldIdentifiers||!Et.isObject(r))&&this.forEachFieldIdentifier(((e,n,r)=>{var s;!r.lazy&&"store"!==(null==(s=this.getFieldDefinition(n))?void 0:s.type)&&(!o||e instanceof aw||e instanceof sw)&&(i[n]=this[n])})),i}applyValue(e,r,i,o,s){var a;this.$entity.getField((null==s?void 0:s.name)||r)&&(e=!0),o&&(e=!1),n.applyValue.call(this,e,e&&null!=(a=null==s?void 0:s.name)?a:r,i,o,s)}get isInActiveTransaction(){var e;const n=null==(e=this.graph)?void 0:e.activeTransaction;return Boolean(null==n?void 0:n.getLatestEntryFor(this.$$))}get data(){return this._data}set data(e){this._data=e;const{fields:n,$:r,graph:i,generation:o}=this;for(let s=0;s<n.length;s++){const{name:a,dataSource:l,complexMapping:c}=n[s],d=r[a];if(d){const n=c?Et.getPath(e,l):e[l];!c&&!(l in e)||null==o&&void 0===n||d.writeToGraph(i,n)}}}get $entityName(){const e=this.constructor.name||this.$entity.name,n=this.id;return`${e}${null!=n?"-"+String(n):""}`}}}))){},pw=(Oe.publishLocale({localeName:"En",localeDesc:"English (US)",localeCode:"en-US",RemoveDependencyCycleEffectResolution:{descriptionTpl:"Remove dependency"},DeactivateDependencyCycleEffectResolution:{descriptionTpl:"Deactivate dependency"},CycleEffectDescription:{descriptionTpl:"A cycle has been found, formed by: {0}"},EmptyCalendarEffectDescription:{descriptionTpl:'"{0}" calendar does not provide any working time intervals.'},Use24hrsEmptyCalendarEffectResolution:{descriptionTpl:"Use 24 hours calendar with non-working Saturdays and Sundays."},Use8hrsEmptyCalendarEffectResolution:{descriptionTpl:"Use 8 hours calendar (08:00-12:00, 13:00-17:00) with non-working Saturdays and Sundays."},ConflictEffectDescription:{descriptionTpl:"A scheduling conflict has been found: {0} is conflicting with {1}"},ConstraintIntervalDescription:{dateFormat:"LLL"},ProjectConstraintIntervalDescription:{startDateDescriptionTpl:"Project start date {0}",endDateDescriptionTpl:"Project end date {0}"},DependencyType:{long:["Start-to-Start","Start-to-Finish","Finish-to-Start","Finish-to-Finish"]},ManuallyScheduledParentConstraintIntervalDescription:{startDescriptionTpl:'Manually scheduled "{2}" forces its children to start no earlier than {0}',endDescriptionTpl:'Manually scheduled "{2}" forces its children to finish no later than {1}'},DisableManuallyScheduledConflictResolution:{descriptionTpl:'Disable manual scheduling for "{0}"'},DependencyConstraintIntervalDescription:{descriptionTpl:'Dependency ({2}) from "{3}" to "{4}"'},RemoveDependencyResolution:{descriptionTpl:'Remove dependency from "{1}" to "{2}"'},DeactivateDependencyResolution:{descriptionTpl:'Deactivate dependency from "{1}" to "{2}"'},DateConstraintIntervalDescription:{startDateDescriptionTpl:'Task "{2}" {3} {0} constraint',endDateDescriptionTpl:'Task "{2}" {3} {1} constraint',constraintTypeTpl:{startnoearlierthan:"Start-No-Earlier-Than",finishnoearlierthan:"Finish-No-Earlier-Than",muststarton:"Must-Start-On",mustfinishon:"Must-Finish-On",startnolaterthan:"Start-No-Later-Than",finishnolaterthan:"Finish-No-Later-Than"}},RemoveDateConstraintConflictResolution:{descriptionTpl:'Remove "{1}" constraint of task "{0}"'}}),class extends bg{initialize(...e){super.initialize(...e),this.startDate||(this.startDate=Sg),this.endDate||(this.endDate=xg)}equalTo(e){return this.startDate.getTime()===e.startDate.getTime()&&this.endDate.getTime()===e.endDate.getTime()}isInfinite(){return this.startDate.getTime()===Sg.getTime()&&this.endDate.getTime()===xg.getTime()}startDateIsFinite(){return!this.isIntervalEmpty()&&this.startDate.getTime()!==Sg.getTime()}endDateIsFinite(){return!this.isIntervalEmpty()&&this.endDate.getTime()!==xg.getTime()}containsDate(e,n=vg.Left){return n===vg.Left&&e>=this.startDate&&e<this.endDate||n===vg.Right&&e>this.startDate&&e<=this.endDate}isIntervalEmpty(){return this.startDate>this.endDate}intersect(e){const n=e.startDate,r=e.endDate,i=this.startDate,o=this.endDate;if(o<n||i>r)return mw;const s=new Date(Math.max(i.getTime(),n.getTime())),a=new Date(Math.min(o.getTime(),r.getTime()));return this.constructor.new({startDate:s,endDate:a})}intersectMut(e,n=!1){var r;const i=e.startDate,o=e.endDate,s=this.startDate,a=this.endDate;if(n&&(this.intersectionOf||(this.intersectionOf=new Set),(null==(r=e.intersectionOf)?void 0:r.size)>0?(e.intersectionOf.forEach(this.intersectionOf.add,this.intersectionOf),this.intersectedAsEmpty=e.intersectedAsEmpty):this.intersectionOf.add(e)),!this.isIntervalEmpty()){if(a<i||s>o)return this.startDate=xg,this.endDate=Sg,n&&(this.intersectedAsEmpty=e),this;this.startDate=new Date(Math.max(s.getTime(),i.getTime())),this.endDate=new Date(Math.min(a.getTime(),o.getTime()))}return this}getCopyProperties(e){return e}copyWith(e){const n=this.getCopyProperties(e);return this.constructor.new(n)}}),mw=pw.new({startDate:xg,endDate:Sg}),intersectIntervals=(e,n=!1)=>e.reduce(((e,r)=>e.intersectMut(r,n)),pw.new()),__decorate7=function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);return s>3&&a&&Object.defineProperty(n,r,a),a};(cw=lw||(lw={})).Cancel="Cancel",cw.Resume="Resume";var fw=class extends re{getDescription(){throw new Error("Abstract method")}resolve(...e){throw new Error("Abstract method")}},bw=class extends yv{getResolutions(){return this._resolutions}getDescriptionBuilderClass(){return this._descriptionBuilderClass}setDescriptionBuilderClass(e){this._descriptionBuilderClass=e}getDescription(){return this.getDescriptionBuilderClass().getDescription(this)}};__decorate7([prototypeValue("schedulingIssueEffect")],bw.prototype,"type",void 0),__decorate7([prototypeValue(!1)],bw.prototype,"sync",void 0);var __decorate8=function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);return s>3&&a&&Object.defineProperty(n,r,a),a},vw=Symbol("ConflictSymbol"),yw=class extends(Localizable_default(re)){static get $name(){return"ConflictEffectDescription"}static getDescription(e){return format(this.L("L{descriptionTpl}"),e.intervals[0].getDescription(),e.intervals[1].getDescription())}},ww=class extends bw{constructor(){super(...arguments),this.handler=vw}initialize(e){super.initialize(e),this.intervals=this.filterConflictingIntervals(this.intervals)}getResolutions(){return this._resolutions||(this._resolutions=[].concat(...this.intervals.map((e=>e.getResolutions())))),this._resolutions}filterConflictingIntervals(e){const n=[],r=[...e].filter((e=>!e.isInfinite())),i=r.find((e=>e.isAffectedByTransaction()));if(i){const e=r.sort(((e,n)=>e===i?-1:0)),o=intersectIntervals(e,!0).intersectedAsEmpty;n.push(o,i)}else n.push(intersectIntervals(r,!0).intersectedAsEmpty,intersectIntervals(r.reverse(),!0).intersectedAsEmpty);return n}};__decorate8([prototypeValue("schedulingConflict")],ww.prototype,"type",void 0),__decorate8([prototypeValue(yw)],ww.prototype,"_descriptionBuilderClass",void 0);var Cw=class extends fw{resolve(){throw new Error("Abstract method")}},Sw=class extends(Localizable_default(re)){static get $name(){return"ConstraintIntervalDescription"}static getDescription(e){return format(this.L("L{descriptionTpl}"),...this.getDescriptionParameters(e))}static getDescriptionParameters(e){return[Ct.format(e.startDate,this.L("L{dateFormat}")),Ct.format(e.endDate,this.L("L{dateFormat}"))]}},xw=class extends pw{constructor(){super(...arguments),this.owner=void 0,this.reflectionOf=void 0,this.side=void 0,this.resolutions=void 0}get isConstraintInterval(){return!0}getDescription(){return this.descriptionBuilderClass.getDescription(this)}getResolutions(){return[]}isAffectedByTransaction(e){return!1}getCopyProperties(e){const{owner:n,reflectionOf:r,side:i}=this;return Object.assign({owner:n,reflectionOf:r,side:i},e)}};__decorate8([prototypeValue(Sw)],xw.prototype,"descriptionBuilderClass",void 0);var Dw=class extends(mg([Og],(e=>{e.prototype;return class ChronoPartOfProjectGenericMixin2 extends e{getGraph(){const e=this.getProject();return null==e?void 0:e.getGraph()}getEventById(e){var n;return null==(n=this.getEventStore())?void 0:n.getById(e)}getDependencyById(e){var n;return null==(n=this.getDependencyStore())?void 0:n.getById(e)}getResourceById(e){var n;return null==(n=this.getResourceStore())?void 0:n.getById(e)}getAssignmentById(e){var n;return null==(n=this.getAssignmentStore())?void 0:n.getById(e)}getCalendarById(e){var n;return null==(n=this.getCalendarManagerStore())?void 0:n.getById(e)}}}))){},Ew=class extends(mg([yi],(e=>class ChronoStoreMixin extends e{}))){},Rw=class extends(mg([Lg,Dw,Ew],(e=>{const n=e.prototype;return class ChronoPartOfProjectStoreMixin2 extends e{constructor(){super(...arguments),this.removalOrder=0}setStoreData(e){var r;null==(r=this.project)||r.repopulateStore(this),n.setStoreData.call(this,e)}register(e){var r,i;n.register.call(this,e),!e.isRoot&&!(null==(r=this.project)?void 0:r.graph)&&(null==(i=this.project)||i.scheduleDelayedCalculation())}onModelChange(e,n,r,i,o,s){s||this.syncDataOnLoad&&this.isLoadingData||!Object.keys(r).some((n=>"intervals"!==n&&e.$entity.getField(n)))||(i=!0),super.onModelChange(e,n,r,i,o,s)}}}))){},kw=class extends(mg([_g,Dw,gw],(e=>{const n=e.prototype;return class ChronoPartOfProjectModelMixin2 extends e{joinProject(){var e;(null==(e=this.project)?void 0:e.delayEnteringReplica)||(this.graph&&this.graph!=this.getGraph()&&(this.graph=null),this.getGraph().addEntity(this))}leaveProject(e=!1){n.leaveProject.call(this,e);const r=this.getGraph();null==r||r.removeEntity(this),this.graph=null}getProject(){return n.getProject.call(this)}calculateProject(){const e=this.stores.find((e=>isInstanceOf(e,Rw)&&!!e.getProject()));return null==e?void 0:e.getProject()}get graph(){var e;return(null==(e=this.project)?void 0:e.delayEnteringReplica)?null:this._graph}set graph(e){this._graph=e}}}))){},__decorate9=function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);return s>3&&a&&Object.defineProperty(n,r,a),a},Tw=Symbol("CalendarMixin"),Mw=Symbol("EmptyCalendarSymbol"),Aw=class extends(mg([Hg,kw],(e=>{class BaseCalendarMixin2 extends e{constructor(){super(...arguments),this.version=1}[Tw](){}}return __decorate9([model_field({},{persistent:!1})],BaseCalendarMixin2.prototype,"version",void 0),__decorate9([model_field({type:"boolean",defaultValue:!0})],BaseCalendarMixin2.prototype,"unspecifiedTimeIsWorking",void 0),__decorate9([model_field()],BaseCalendarMixin2.prototype,"intervals",void 0),BaseCalendarMixin2}))){},Iw=class extends(Localizable_default(re)){static get $name(){return"EmptyCalendarEffectDescription"}static getDescription(e){const n=e.getCalendar();return format(this.L("L{descriptionTpl}"),n.name||n.id)}},Fw=class extends bw{constructor(){super(...arguments),this.handler=Mw}getResolutions(){const e=this.getCalendar();return this._resolutions||(this._resolutions=[Ow.new({calendar:e}),Lw.new({calendar:e})])}getCalendar(){const{calendars:e}=this;if((null==e?void 0:e.length)>1)for(const n of e){if(!(n.skipNonWorkingTime(this.date,this.isForward)instanceof Date))return n}return e[0]}};__decorate9([prototypeValue("emptyCalendar")],Fw.prototype,"type",void 0),__decorate9([prototypeValue(Iw)],Fw.prototype,"_descriptionBuilderClass",void 0);var Pw=class extends(Localizable_default(fw)){static get $name(){return"BaseEmptyCalendarEffectResolution"}static get configurable(){return{calendarData:{intervals:[{isWorking:!0}]}}}getDescription(){const{calendar:e}=this;return format(this.L("L{descriptionTpl}"),e.name||e.id)}fixCalendarData(e){var n;e.clearIntervals(!0),Object.assign(e,this.calendarData),(null==(n=e.intervals)?void 0:n.length)&&e.addIntervals(e.intervals)}resolve(){const{calendar:e}=this;this.fixCalendarData(e)}},Ow=class extends Pw{static get $name(){return"Use24hrsEmptyCalendarEffectResolution"}static get configurable(){return{calendarData:{unspecifiedTimeIsWorking:!1,intervals:[{recurrentStartDate:"on Mon at 0:00",recurrentEndDate:"on Sat at 0:00",isWorking:!0}]}}}},Lw=class extends Pw{static get $name(){return"Use8hrsEmptyCalendarEffectResolution"}static get configurable(){return{calendarData:{unspecifiedTimeIsWorking:!1,intervals:[{recurrentStartDate:"every weekday at 08:00",recurrentEndDate:"every weekday at 12:00",isWorking:!0},{recurrentStartDate:"every weekday at 13:00",recurrentEndDate:"every weekday at 17:00",isWorking:!0}]}}}},__decorate10=function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);return s>3&&a&&Object.defineProperty(n,r,a),a},_w=Symbol("CycleSymbol"),$w=class extends wy{constructor(){super(...arguments),this.failedResolutionReferences=new Map}},jw=class extends ky{constructor(){super(...arguments),this.candidateClass=$w}initialize(e){var n;(null==(n=e.graph.project)?void 0:n.delayCalculation)&&(e.startProgressNotificationsAfterMs=0,e.emitProgressNotificationsEveryMs=100),super.initialize(e),this.candidate.failedResolutionReferences=new Map(this.baseRevision.failedResolutionReferences)}addIdentifier(e,n,...r){return this.candidate.failedResolutionReferences.size&&(this.candidate.failedResolutionReferences.forEach(((e,n)=>{this.write(n,e)})),this.candidate.failedResolutionReferences.clear()),super.addIdentifier(e,n,...r)}},zw=class extends(mg([Oy],(e=>{const n=e.prototype;return class EngineReplica2 extends e{constructor(){super(...arguments),this.baseRevision=$w.new(),this.transactionClass=jw,this.autoCommitMode="async",this.onComputationCycle="effect",this.cycleEffectClass=Vw,this.silenceInitialCommit=!0,this.ignoreInitialCommitComputationCycles=!1}get dirty(){const e=this.activeTransaction;return e.entries.size>0&&(e.hasVariableEntry||e.hasEntryWithProposedValue)}onPropagationProgressNotification(e){var n,r;this.enableProgressNotifications&&this.project&&(null==(r=(n=this.project).trigger)||r.call(n,"progress",e))}async commitAsync(e){if(!this.project||this.project.isDestroyed)return;this.project.trigger("beforeCommit"),this.isInitialCommit&&this.ignoreInitialCommitComputationCycles&&(this._onComputationCycle=this._onComputationCycle||this.onComputationCycle,this.onComputationCycle="ignore");const r=this.project.beforeCommitAsync();return r||n.commitAsync.call(this,e)}get isInitialCommit(){return this.project.isInitialCommit||super.isInitialCommit}set isInitialCommit(e){super.isInitialCommit=e}write(e,r,...i){var o,s,a;const l=null==(o=e.field)?void 0:o.name,c=e.self;if(l&&c){const o=null==(s=c.beforeChronoFieldSet)?void 0:s.call(c,l,r);n.write.call(this,e,r,...i),null==(a=c.afterChronoFieldSet)||a.call(c,l,r,o)}else n.write.call(this,e,r,...i)}async finalizeCommitAsync(e){const{project:n}=this;if(!n||n.isDestroyed)return;const{entries:r}=e,i=new Set;globalThis.DEBUG&&console.timeEnd("Time to visible");const{isInitialCommit:o,silenceInitialCommit:s}=this,a=o&&s;o&&(n.isInitialCommitPerformed=!0,this.ignoreInitialCommitComputationCycles&&(this.onComputationCycle=this._onComputationCycle)),n.isWritingData=!0,n.hasLoadedDataToCommit=!1,this.enableProgressNotifications&&n.trigger("progress",{total:e.entries.size,remaining:0,phase:"finalizing"});e.transaction.rejectedWith&&n.trigger("commitRejected",{transactionResult:e,isInitialCommit:o,silenceCommit:a}),n.trigger("refresh",{isInitialCommit:o,isCalculated:!0}),await new Promise((s=>{setTimeout((()=>{var l,c;if(!n.isDestroyed){if(e.transaction.rejectedWith)n.isWritingData=!1;else{null==(l=n.suspendChangesTracking)||l.call(n),globalThis.DEBUG&&console.time("Finalize propagation");const s=new Set;for(const e of r.values()){const n=e.identifier,r=e.getValue(),{field:o}=n;if(e.isShadow()||!n[rw]||r===cy||o instanceof nw)continue;const a=n.self,l=a.firstStore;s.has(a)||(a.beginBatch(!0),s.add(a)),(null==l?void 0:l.autoCommit)&&!i.has(l)&&(l.suspendAutoCommit(),i.add(l)),a.meta.batchChanges[o.name]=r}let d=!1;for(const e of s)if(!e.triggerBeforeUpdate({...e.meta.batchChanges})){d=!0;break}if(d){for(const e of s)e.cancelBatch();e.transaction.reject(),n.trigger("commitRejected",{transactionResult:e,isInitialCommit:o,silenceCommit:a}),n.trigger("refresh",{isInitialCommit:o,isCalculated:!0})}else for(const e of s)e.ignoreBag=a||n.ignoreRecordChanges,e.generation++,e.endBatch(a,!0,!0),e.ignoreBag=!1;n.ignoreRecordChanges=!1,globalThis.DEBUG&&console.timeEnd("Finalize propagation"),n.isWritingData=!1,d||n.trigger("dataReady",{records:s,isInitialCommit:o}),null==(c=n.resumeChangesTracking)||c.call(n,a),i.forEach((e=>e.resumeAutoCommit())),a&&(n.eventStore.acceptChanges(),n.dependencyStore.acceptChanges(),n.resourceStore.acceptChanges(),n.assignmentStore.acceptChanges(),n.calendarManagerStore.acceptChanges(),n.acceptChanges())}n.trigger("commitFinalized",{isInitialCommit:o,transactionResult:e})}s()}),0)}))}*onComputationCycleHandler(e){if("effect"!==this.onComputationCycle)return yield*super.onComputationCycleHandler(e);{const n=this.project.cycleEffectClass.new({cycle:e});(yield n)===lw.Cancel&&(yield Reject(n))}}async[_w](e,n){return this.project.onCycleSchedulingIssue(e,n)}async[Mw](e,n){return n.walkContext.startNewEpoch(),this.project.onEmptyCalendarSchedulingIssue(e,n)}async[vw](e,n){return n.walkContext.startNewEpoch(),this.project.onConflictSchedulingIssue(e,n)}[Sv](e,n){return super[Sv](e,n)}}}))){},Bw=class extends(Localizable_default(fw)){static get $name(){return"RemoveDependencyCycleEffectResolution"}getDescription(){return this.L("L{descriptionTpl}")}resolve(e){e.remove()}},Hw=class extends(Localizable_default(re)){static get $name(){return"CycleEffectDescription"}static getDescription(e){return format(this.L("L{descriptionTpl}"),this.getShortDescription(e))}static getShortDescription(e){const n=e.getEvents().slice();return n.push(n[0]),'"'+n.map((e=>e.name||"#"+e.id)).join('" -> "')+'"'}},Vw=class extends bw{constructor(){super(...arguments),this.handler=_w}getEvents(){if(!this._events){const e=new Set;this.cycle.cycle.forEach((({context:n})=>e.add(n))),this._events=[...e]}return this._events}matchDependencyBySourceAndTargetEvent(e,n,r){return e.fromEvent===n&&e.toEvent===r}getDependencyForSourceAndTargetEvents(e,n){return this.getEvents()[0].project.getDependencyStore().find((r=>this.matchDependencyBySourceAndTargetEvent(r,e,n)))}getDependencies(){if(!this._dependencies){const e=new Set,n=this.getEvents(),r=n.length;let i,o=n[0];if(1===r)(i=this.getDependencyForSourceAndTargetEvents(o,o))&&e.add(i);else for(const r of n)for(const o of n)(i=this.getDependencyForSourceAndTargetEvents(r,o))&&e.add(i),(i=this.getDependencyForSourceAndTargetEvents(o,r))&&e.add(i);this._dependencies=[...e]}return this._dependencies}getResolutions(){return this._resolutions||(this._resolutions=[this.removeDependencyCycleEffectResolutionClass.new()]),this._resolutions}};__decorate10([prototypeValue("cycle")],Vw.prototype,"type",void 0),__decorate10([prototypeValue(Hw)],Vw.prototype,"_descriptionBuilderClass",void 0),__decorate10([prototypeValue(Bw)],Vw.prototype,"removeDependencyCycleEffectResolutionClass",void 0);var Nw,qw,__decorate11=function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);return s>3&&a&&Object.defineProperty(n,r,a),a},Ww=class extends(mg([kw],(e=>{e.prototype;class BaseAssignmentMixin2 extends e{}return __decorate11([generic_field({bucket:"assigned",resolver:function(e){return this.getEventById(e)},modelFieldConfig:{serialize:e=>null==e?void 0:e.id,isEqual:isSerializableEqual,persist:!1}},tw)],BaseAssignmentMixin2.prototype,"event",void 0),__decorate11([generic_field({bucket:"assigned",resolver:function(e){return this.getResourceById(e)},modelFieldConfig:{serialize:e=>null==e?void 0:e.id,isEqual:isSerializableEqual,persist:!1}},tw)],BaseAssignmentMixin2.prototype,"resource",void 0),injectStaticFieldsProperty(BaseAssignmentMixin2),BaseAssignmentMixin2}))){},Uw=class extends(mg([qg,Rw],(e=>{e.prototype;return class ChronoAssignmentStoreMixin2 extends e{constructor(){super(...arguments),this.removalOrder=100}static get defaultConfig(){return{modelClass:Ww}}set data(e){this.allAssignmentsForRemoval=!0,super.data=e,this.allAssignmentsForRemoval=!1}}}))){},Gw=class extends(mg([Wg,Rw],(e=>{e.prototype;return class ChronoCalendarManagerStoreMixin2 extends e{constructor(){super(...arguments),this.removalOrder=500}static get defaultConfig(){return{tree:!0,modelClass:Aw}}}}))){},Yw=class extends(mg([Ug,Rw],(e=>{e.prototype;return class ChronoDependencyStoreMixin2 extends e{constructor(){super(...arguments),this.removalOrder=200}set data(e){this.allDependenciesForRemoval=!0,super.data=e,this.allDependenciesForRemoval=!1}}}))){};(qw=Nw||(Nw={})).KeepDuration="KeepDuration",qw.KeepStartDate="KeepStartDate",qw.KeepEndDate="KeepEndDate";var Kw=Symbol("StartDate"),Xw=Symbol("EndDate"),Zw=Symbol("Duration"),Qw=uv.new({output:Kw,inputs:new Set([Zw,Xw])}),Jw=uv.new({output:Xw,inputs:new Set([Zw,Kw])}),eC=uv.new({output:Zw,inputs:new Set([Kw,Xw])}),tC=pv.new({variables:new Set([Kw,Xw,Zw]),formulas:new Set([Qw,Jw,eC])}),nC=mv.new({description:tC,defaultResolutionFormulas:new Set([Jw])}),rC=mv.new({description:tC,defaultResolutionFormulas:new Set([Qw])}),iC=class extends Qv{addInstruction(e){e===Nw.KeepStartDate&&this.addKeepIfPossibleFlag(Kw),e===Nw.KeepEndDate&&this.addKeepIfPossibleFlag(Xw),e===Nw.KeepDuration&&this.addKeepIfPossibleFlag(Zw)}},oC=class extends(Ly.mix(fy)){equality(e,n){const r=e.resolution,i=n.resolution;return r.get(Kw)===i.get(Kw)&&r.get(Xw)===i.get(Xw)&&r.get(Zw)===i.get(Zw)||r.get(Kw)===dv&&r.get(Xw)===dv&&r.get(Zw)===dv}},__decorate12=function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);return s>3&&a&&Object.defineProperty(n,r,a),a},sC=class extends(mg([kw],(e=>{class HasCalendarMixin2 extends e{writeCalendar(e,n,r,i){const o=this.getCalendarManagerStore(),s=i;i&&o&&i instanceof Aw&&!o.includes(s)&&o.add(i),e.constructor.prototype.write.call(this,e,n,r,i)}resolveCalendar(e){var n;return null==(n=this.getCalendarManagerStore())?void 0:n.getById(e)}*calculateEffectiveCalendar(){let e=yield this.$.calendar;if(!e){const n=this.getProject();e=yield n.$.effectiveCalendar}return yield e.$.version,e}shouldRecordFieldChange(e,n,r){if(!super.shouldRecordFieldChange(e,n,r))return!1;const{project:i}=this;if("calendar"===e&&i){const{calendarManagerStore:e}=i;return e.oldIdMap[n]!==e.getById(r)}return!0}}return __decorate12([qy({equality:()=>!1})],HasCalendarMixin2.prototype,"effectiveCalendar",void 0),__decorate12([generic_field({modelFieldConfig:{persist:!0,serialize:e=>void 0===e?void 0:(null==e?void 0:e.id)||null,isEqual:isSerializableEqual},resolver:function(e){return this.resolveCalendar(e)},sync:!0},tw)],HasCalendarMixin2.prototype,"calendar",void 0),__decorate12([write("calendar")],HasCalendarMixin2.prototype,"writeCalendar",null),__decorate12([calculate("effectiveCalendar")],HasCalendarMixin2.prototype,"calculateEffectiveCalendar",null),injectStaticFieldsProperty(HasCalendarMixin2),HasCalendarMixin2}))){},aC=class extends(mg([],(e=>class CanCombineCalendars extends e{constructor(){super(...arguments),this.combinedcalendarscache=new Map}combineCalendars(e){const n=stripDuplicates(e);if(0===n.length)throw new Error("No calendars to combine");n.sort(((e,n)=>e.internalId<n.internalId?-1:1));const r=n.map((e=>e.internalId+"/")).join(""),i=n.map((e=>e.version+"/")).join(""),o=this.combinedcalendarscache.get(r);let s;return o&&o.versionsHash===i?s=o.cache:(s=new Ig({calendarCaches:n.map((e=>e.calendarCache))}),this.combinedcalendarscache.set(r,{versionsHash:i,cache:s})),s}}))){},__decorate13=function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);return s>3&&a&&Object.defineProperty(n,r,a),a},lC=class extends(mg([sC],(e=>{e.prototype;class BaseEventMixin2 extends e{*calculateDispatcher(e){yield Cv;const n=yield*this.prepareDispatcher(e),r=yield ProposedArgumentsOf(this.$.startDate),i=r?r[0]?Nw.KeepDuration:Nw.KeepEndDate:void 0;i&&n.addInstruction(i);const o=yield ProposedArgumentsOf(this.$.endDate),s=o?o[0]?Nw.KeepDuration:Nw.KeepStartDate:void 0;s&&n.addInstruction(s);const a=yield this.$.direction,l=yield ProposedArgumentsOf(this.$.duration);let c;if(l)switch(l[0]){case!0:c=Nw.KeepStartDate;break;case!1:c=Nw.KeepEndDate}return!c&&n.hasProposedValue(Zw)&&(c=a===ug.Forward||a===ug.None?Nw.KeepStartDate:Nw.KeepEndDate),c&&n.addInstruction(c),n}*prepareDispatcher(e){const n=this.dispatcherClass(e).new({context:this.cycleResolutionContext(e)});return n.collectInfo(e,this.$.startDate,Kw),n.collectInfo(e,this.$.endDate,Xw),n.collectInfo(e,this.$.duration,Zw),n}cycleResolutionContext(e){const n=e(this.$.direction);return n===ug.Forward||n===ug.None?nC:rC}dispatcherClass(e){return iC}buildProposedDispatcher(e,n,r){const i=this.dispatcherClass(r.onEffectSync).new({context:this.cycleResolutionContext(r.onEffectSync)});return i.addPreviousValueFlag(Kw),i.addPreviousValueFlag(Xw),i.addPreviousValueFlag(Zw),i}*skipNonWorkingTime(e,n){const r=yield this.$.effectiveCalendar;if(!e)return null;const i=r.skipNonWorkingTime(e,n);if(i instanceof Date)return i;{const i=Fw.new({calendars:[r],event:this,date:e,isForward:n});if((yield i)!==lw.Cancel)return null;yield Reject(i)}}*skipWorkingTime(e,n,r,i){const o=yield this.$.durationUnit;return i&&i!==o&&(r=yield*this.getProject().$convertDuration(r,i,o)),yield*this.calculateProjectedXDateWithDuration(e,n,r)}setStartDate(e,n=!0){const{graph:r,project:i}=this;return r?(r.write(this.$.startDate,e,n),r.commitAsync()):(this.$.startDate.DATA=e,null==i?void 0:i.delayedCalculationPromise)}writeStartDate(e,n,r,i,o=!0){(n.baseRevision.hasIdentifier(e)||null!=i)&&(this.getProject().isStmRestoring||this.$.unscheduled.write(this.$.unscheduled,n,void 0,null==i),e.constructor.prototype.write.call(this,e,n,r,i,o))}*calculateStartDate(){const e=(yield this.$.dispatcher).resolution.get(Kw);if(e===dv)return yield*this.calculateStartDateProposed();if(e===Qw.formulaId)return yield*this.calculateStartDatePure();throw new Error("Unknown formula for `startDate`")}*calculateStartDatePure(){return yield*this.calculateProjectedXDateWithDuration(yield this.$.endDate,!1,yield this.$.duration)}*calculateStartDateProposed(){const e=this.getProject(),n=yield Cv;return!(yield this.$.manuallyScheduled)||e.skipNonWorkingTimeWhenSchedulingManually?yield*this.skipNonWorkingTime(n,!0):n}*calculateProjectedXDateWithDuration(e,n,r){const i=yield this.$.durationUnit,o=yield this.$.effectiveCalendar,s=this.getProject();return!e||isNotNumber(r)?null:(n=void 0===n||n)?o.calculateEndDate(e,yield*s.$convertDuration(r,i,Zh.Millisecond)):o.calculateStartDate(e,yield*s.$convertDuration(r,i,Zh.Millisecond))}setEndDate(e,n=!1){const{graph:r,project:i}=this;return r?(r.write(this.$.endDate,e,n),r.commitAsync()):(this.$.endDate.DATA=e,null==i?void 0:i.delayedCalculationPromise)}writeEndDate(e,n,r,i,o=!1){(n.baseRevision.hasIdentifier(e)||null!=i)&&(this.getProject().isStmRestoring||this.$.unscheduled.write(this.$.unscheduled,n,void 0,null==i),e.constructor.prototype.write.call(this,e,n,r,i,o))}*calculateEndDate(){const e=(yield this.$.dispatcher).resolution.get(Xw);if(e===dv)return yield*this.calculateEndDateProposed();if(e===Jw.formulaId)return yield*this.calculateEndDatePure();throw new Error("Unknown formula for `endDate`")}*calculateEndDatePure(){return yield*this.calculateProjectedXDateWithDuration(yield this.$.startDate,!0,yield this.$.duration)}*calculateEndDateProposed(){const e=this.getProject(),n=yield Cv;return!(yield this.$.manuallyScheduled)||e.skipNonWorkingTimeWhenSchedulingManually?yield*this.skipNonWorkingTime(n,!1):n}getDuration(e){const n=this.duration;return void 0!==e?this.getProject().convertDuration(n,this.durationUnit,e):n}setDuration(e,n,r){const{graph:i,project:o}=this;if(!i){const r={duration:e};return this.$.duration.DATA=e,null!=n&&(r.durationUnit=this.$.durationUnit.DATA=n),this.set(r),null==o?void 0:o.delayedCalculationPromise}if(void 0!==e)return i.write(this.$.duration,e,n,r),i.commitAsync()}setDurationUnit(e){throw new Error("Use `setDuration` instead")}writeDuration(e,n,r,i,o,s=void 0){i<0&&(i=0),(n.baseRevision.hasIdentifier(e)||null!=i)&&(this.getProject().isStmRestoring||this.$.unscheduled.write(this.$.unscheduled,n,void 0,null==i),e.constructor.prototype.write.call(this,e,n,r,i,s),null!=o&&n.write(this.$.durationUnit,o))}*calculateDuration(){const e=(yield this.$.dispatcher).resolution.get(Zw);if(e===dv)return yield*this.calculateDurationProposed();if(e===eC.formulaId)return yield*this.calculateDurationPure();throw new Error("Unknown formula for `duration`")}*calculateDurationPure(){const e=yield this.$.startDate,n=yield this.$.endDate;return e&&n?e>n?void(yield Write(this.$.duration,0,null)):yield*this.calculateProjectedDuration(e,n):null}*calculateDurationProposed(){return yield Cv}*calculateProjectedDuration(e,n,r){if(!e||!n)return null;r||(r=yield this.$.durationUnit);const i=yield this.$.effectiveCalendar,o=this.getProject();return yield*o.$convertDuration(i.calculateDurationMs(e,n),Zh.Millisecond,r)}*calculateEffectiveDuration(){let e;const n=(yield this.$.dispatcher).resolution.get(Zw);return n===dv?e=yield this.$.duration:n===eC.formulaId&&(e=yield*this.calculateProjectedDuration(yield ProposedOrPreviousValueOf(this.$.startDate),yield ProposedOrPreviousValueOf(this.$.endDate))),e}*calculateEffectiveCalendar(){const e=yield this.$.manuallyScheduled,n=this.getProject();return e&&!n.skipNonWorkingTimeInDurationWhenSchedulingManually?n.defaultCalendar:yield*super.calculateEffectiveCalendar()}}return __decorate13([model_field({type:"date"},{converter:dateConverter})],BaseEventMixin2.prototype,"startDate",void 0),__decorate13([model_field({type:"date"},{converter:dateConverter})],BaseEventMixin2.prototype,"endDate",void 0),__decorate13([model_field({type:"number",allowNull:!0})],BaseEventMixin2.prototype,"duration",void 0),__decorate13([model_field({type:"string",defaultValue:Zh.Day},{converter:e=>Ct.normalizeUnit(e)||Zh.Day})],BaseEventMixin2.prototype,"durationUnit",void 0),__decorate13([model_field({type:"string",defaultValue:ug.Forward},{sync:!0})],BaseEventMixin2.prototype,"direction",void 0),__decorate13([qy({identifierCls:oC})],BaseEventMixin2.prototype,"dispatcher",void 0),__decorate13([model_field({type:"boolean",defaultValue:!1})],BaseEventMixin2.prototype,"manuallyScheduled",void 0),__decorate13([model_field({type:"boolean",defaultValue:!1})],BaseEventMixin2.prototype,"unscheduled",void 0),__decorate13([calculate("dispatcher")],BaseEventMixin2.prototype,"calculateDispatcher",null),__decorate13([build_proposed("dispatcher")],BaseEventMixin2.prototype,"buildProposedDispatcher",null),__decorate13([write("startDate")],BaseEventMixin2.prototype,"writeStartDate",null),__decorate13([calculate("startDate")],BaseEventMixin2.prototype,"calculateStartDate",null),__decorate13([write("endDate")],BaseEventMixin2.prototype,"writeEndDate",null),__decorate13([calculate("endDate")],BaseEventMixin2.prototype,"calculateEndDate",null),__decorate13([write("duration")],BaseEventMixin2.prototype,"writeDuration",null),__decorate13([calculate("duration")],BaseEventMixin2.prototype,"calculateDuration",null),BaseEventMixin2}))){},cC=class extends(mg([lC,Vg],(e=>{e.prototype;class BaseHasAssignmentsMixin2 extends e{get assignments(){return this.assigned?[...this.assigned]:[]}}return function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);s>3&&a&&Object.defineProperty(n,r,a)}([generic_field({},nw)],BaseHasAssignmentsMixin2.prototype,"assigned",void 0),BaseHasAssignmentsMixin2}))){},__decorate15=function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);return s>3&&a&&Object.defineProperty(n,r,a),a},dC=class extends(mg([lC],(e=>{const n=e.prototype;class HasDependenciesMixin2 extends e{leaveProject(){var e,r;if(this.isInActiveTransaction){const n=this.graph.activeTransaction,i=this.getDependencyStore(),o=[];for(const r of null!=(e=n.readCurrentOrProposedOrPrevious(this.$.outgoingDeps))?e:[])i.includes(r)&&o.push(r);for(const e of null!=(r=n.readCurrentOrProposedOrPrevious(this.$.incomingDeps))?r:[])i.includes(e)&&o.push(e);this.project.dependencyStore.remove(o)}n.leaveProject.call(this)}}return __decorate15([generic_field({},nw)],HasDependenciesMixin2.prototype,"outgoingDeps",void 0),__decorate15([generic_field({},nw)],HasDependenciesMixin2.prototype,"incomingDeps",void 0),HasDependenciesMixin2}))){},uC=class extends(mg([lC,cC,dC],(e=>{e.prototype;return class SchedulerBasicEvent2 extends e{}}))){},hC=class extends(mg([Yg,Rw],(e=>class ChronoEventStoreMixin2 extends e{constructor(){super(...arguments),this.removalOrder=400}static get defaultConfig(){return{modelClass:uC}}set data(e){super.data=e,this.afterEventRemoval()}}))){},gC=class extends(mg([hC],(e=>class ChronoEventTreeStoreMixin2 extends e{buildRootNode(){return this.getProject()||{}}static get defaultConfig(){return{tree:!0}}}))){},pC=class extends(mg([sC,kw],(e=>{const n=e.prototype;class BaseResourceMixin2 extends e{get assignments(){return[...this.assigned]}leaveProject(e=!1){if(!this.isStmRestoring&&this.assigned&&!e){const e=this.getResourceStore();this.assigned.forEach((n=>e.assignmentsForRemoval.add(n)))}n.leaveProject.call(this)}static get fields(){return[{name:"parentId"},{name:"children",persist:!1}]}}return function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);s>3&&a&&Object.defineProperty(n,r,a)}([generic_field({},nw)],BaseResourceMixin2.prototype,"assigned",void 0),BaseResourceMixin2}))){},mC=class extends(mg([Xg,Rw],(e=>{e.prototype;return class ChronoResourceStoreMixin2 extends e{constructor(){super(...arguments),this.removalOrder=300}static get defaultConfig(){return{modelClass:pC}}}}))){},__decorate17=function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);return s>3&&a&&Object.defineProperty(n,r,a),a},fC=class extends(mg([gw],(e=>{e.prototype;class DurationConverterMixin2 extends e{*calculateUnitsInMs(){const e=yield this.$.hoursPerDay,n=yield this.$.daysPerWeek,r=yield this.$.daysPerMonth;return{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:60*e*60*1e3,week:n*e*60*60*1e3,month:r*e*60*60*1e3,quarter:3*r*e*60*60*1e3,year:12*r*e*60*60*1e3}}convertDuration(e,n,r){let i=e;return n!==r&&(i=e*this.unitsInMs[n]/this.unitsInMs[r]),i}*$convertDuration(e,n,r){if(!n||!r)throw new Error("Conversion unit not provided");const i=yield this.$.unitsInMs;let o=e;return n!==r&&(o=e*i[n]/i[r]),o}}return __decorate17([qy()],DurationConverterMixin2.prototype,"unitsInMs",void 0),__decorate17([model_field({type:"number",defaultValue:24})],DurationConverterMixin2.prototype,"hoursPerDay",void 0),__decorate17([model_field({type:"number",defaultValue:7})],DurationConverterMixin2.prototype,"daysPerWeek",void 0),__decorate17([model_field({type:"number",defaultValue:30})],DurationConverterMixin2.prototype,"daysPerMonth",void 0),__decorate17([calculate("unitsInMs")],DurationConverterMixin2.prototype,"calculateUnitsInMs",null),DurationConverterMixin2}))){},__decorate18=function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);return s>3&&a&&Object.defineProperty(n,r,a),a},bC=class extends(mg([kw],(e=>{e.prototype;class BaseDependencyMixin2 extends e{get isValid(){const{$:e,graph:n}=this;return!!(!n||n.hasIdentifier(e.fromEvent)&&n.hasIdentifier(e.toEvent))&&super.isValid}}return __decorate18([generic_field({bucket:"outgoingDeps",resolver:function(e){return this.getEventById(e)},modelFieldConfig:{persist:!0,serialize:e=>null==e?void 0:e.id,isEqual:isSerializableEqual}},tw)],BaseDependencyMixin2.prototype,"fromEvent",void 0),__decorate18([generic_field({bucket:"incomingDeps",resolver:function(e){return this.getEventById(e)},modelFieldConfig:{persist:!0,serialize:e=>null==e?void 0:e.id,isEqual:isSerializableEqual}},tw)],BaseDependencyMixin2.prototype,"toEvent",void 0),__decorate18([model_field({type:"int",defaultValue:og.EndToStart})],BaseDependencyMixin2.prototype,"type",void 0),__decorate18([model_field({type:"string"})],BaseDependencyMixin2.prototype,"fromSide",void 0),__decorate18([model_field({type:"string"})],BaseDependencyMixin2.prototype,"toSide",void 0),BaseDependencyMixin2}))){},vC=class extends(mg([gw,mp],(e=>{e.prototype;return class ChronoAbstractProjectMixin2 extends e{get isDelayingCalculation(){return Boolean(this.delayEnteringReplica||this.delayedCalculationPromise)}getGraph(){return this.replica}beforeCommitAsync(){return null}enterReplica(e){}acceptChanges(){}async commitAsync(){var e;return this.delayedCalculationPromise||(null==(e=this.replica)?void 0:e.commitAsync())}getSchedulingIssueEventArguments(e,n,r,i){const o=[e.type,{continueWithResolutionResult:r,schedulingIssue:e}];return e instanceof ww&&(o[1].conflict=e),o}async onSchedulingIssueCall(e,n){return e.type&&this.hasListener(e.type)?new Promise(((r,i)=>{this.trigger(...this.getSchedulingIssueEventArguments(e,n,r,i))})):lw.Cancel}async onCycleSchedulingIssue(e,n){return this.onSchedulingIssueCall(e,n)}async onEmptyCalendarSchedulingIssue(e,n){return this.onSchedulingIssueCall(e,n)}async onConflictSchedulingIssue(e,n){return this.onSchedulingIssueCall(e,n)}setModelCalculations(e,n){if(!n)return;const r={};for(const i in n)r[i]=e.prototype.$calculations[i];return Object.assign(e.prototype.$calculations,n),r}setRecordCalculations(e,n){const r=this.setModelCalculations(e.constructor,n),i=e.$entity.$skeleton;return Object.keys(n).forEach((r=>{i[r].prototype.calculation=e[n[r]]})),r}setStoreCalculations(e,n){if(!n)return;const r=e.first;return r?this.setRecordCalculations(r,n):this.setModelCalculations(e.modelClass,n)}async setCalculations(e){this.replica&&await this.commitAsync();const n={},r={tasks:this.eventStore,events:this.eventStore,dependencies:this.dependencyStore,resources:this.resourceStore,assignments:this.assignmentStore,calendars:this.calendarManagerStore};Object.keys(r).forEach((i=>{e[i]&&(n[i]=this.setStoreCalculations(r[i],e[i]))}));let i=e.project;return i&&(n.project=this.setRecordCalculations(this,i)),this.replica&&this.repopulateReplica.now(),this.replica&&await this.commitAsync(),n}}}))){},yC=class extends(mg([lC],(e=>{const n=e.prototype;return class HasSubEventsMixin2 extends e{static get $name(){return"HasSubEventsMixin"}*hasSubEvents(){throw new Error("Abstract method `hasSubEvents` has been called")}*subEventsIterable(){throw new Error("Abstract method `subEventsIterable` has been called")}*calculateStartDatePure(){const e=yield this.$.manuallyScheduled,r=yield*this.hasSubEvents();return!e&&r?yield*this.calculateMinChildrenStartDate():yield*n.calculateStartDatePure.call(this)}*calculateEndDatePure(){const e=yield this.$.manuallyScheduled,r=yield*this.hasSubEvents();return!e&&r?yield*this.calculateMaxChildrenEndDate():yield*n.calculateEndDatePure.call(this)}*calculateStartDateProposed(){const e=yield this.$.manuallyScheduled,r=yield*this.hasSubEvents();return!e&&r?yield*this.calculateStartDatePure():yield*n.calculateStartDateProposed.call(this)}*calculateEndDateProposed(){const e=yield this.$.manuallyScheduled,r=yield*this.hasSubEvents();return!e&&r?yield*this.calculateEndDatePure():yield*n.calculateEndDateProposed.call(this)}*calculateDurationProposed(){const e=yield this.$.manuallyScheduled,r=yield*this.hasSubEvents();return!e&&r?yield*this.calculateDurationPure():yield*n.calculateDurationProposed.call(this)}*shouldRollupChildStartDate(e){return!0}*calculateMinChildrenStartDate(){const e=yield*this.subEventsIterable();let n=xg.getTime();for(const r of e)if(yield*this.shouldRollupChildStartDate(r)){let e=yield r.$.startDate;e||(e=yield r.$.endDate),e&&e.getTime()<n&&(n=e.getTime())}return n===Sg.getTime()||n===xg.getTime()?null:new Date(n)}*shouldRollupChildEndDate(e){return!0}*calculateMaxChildrenEndDate(){const e=yield*this.subEventsIterable();let n=Sg.getTime();for(const r of e)if(yield*this.shouldRollupChildEndDate(r)){let e=yield r.$.endDate;e||(e=yield r.$.startDate),e&&e.getTime()>n&&(n=e.getTime())}return n===Sg.getTime()||n===xg.getTime()?null:new Date(n)}}}))){},__decorate19=function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);return s>3&&a&&Object.defineProperty(n,r,a),a},wC=class extends(mg([yC],(e=>{e.prototype;class HasChildrenMixin2 extends e{*hasSubEvents(){return(yield this.$.childEvents).size>0}*subEventsIterable(){return yield this.$.childEvents}get parent(){return this._parent}set parent(e){this._parent=e,this.parentEvent=e}}return __decorate19([reference({bucket:"childEvents"})],HasChildrenMixin2.prototype,"parentEvent",void 0),__decorate19([bucket()],HasChildrenMixin2.prototype,"childEvents",void 0),HasChildrenMixin2}))){},__decorate20=function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);return s>3&&a&&Object.defineProperty(n,r,a),a},CC=class extends(fg([vC,lC,yC,sC,fC,aC],(e=>{const n=e.prototype;class SchedulerBasicProjectMixin2 extends e{construct(e={}){this.delayCalculation=!1!==e.delayCalculation,this.enableProgressNotifications=e.enableProgressNotifications||!1!==e.delayCalculation,"expanded"in e||(e.expanded=!0),this.delayCalculation&&(this.delayEnteringReplica=!0),"skipNonWorkingTimeWhenSchedulingManually"in e||(e.skipNonWorkingTimeWhenSchedulingManually=!1),n.construct.call(this,e),this.repopulateStores=new Set,this.ignoreInitialCommitComputationCycles="ignoreInitialCommitComputationCycles"in e&&e.ignoreInitialCommitComputationCycles,this.ignoreInitialCommitComputationCycles&&console.warn('Project "ignoreInitialCommitComputationCycles" option is deprecated and will be dropped in the next major release'),this.eventModelClass||(this.eventModelClass=this.getDefaultEventModelClass()),this.eventStoreClass||(this.eventStoreClass=this.getDefaultEventStoreClass()),this.dependencyModelClass||(this.dependencyModelClass=this.getDefaultDependencyModelClass()),this.dependencyStoreClass||(this.dependencyStoreClass=this.getDefaultDependencyStoreClass()),this.resourceModelClass||(this.resourceModelClass=this.getDefaultResourceModelClass()),this.resourceStoreClass||(this.resourceStoreClass=this.getDefaultResourceStoreClass()),this.assignmentModelClass||(this.assignmentModelClass=this.getDefaultAssignmentModelClass()),this.assignmentStoreClass||(this.assignmentStoreClass=this.getDefaultAssignmentStoreClass()),this.calendarModelClass||(this.calendarModelClass=this.getDefaultCalendarModelClass()),this.calendarManagerStoreClass||(this.calendarManagerStoreClass=this.getDefaultCalendarManagerStoreClass()),this.cycleEffectClass||(this.cycleEffectClass=this.getDefaultCycleEffectClass()),this.initializeStm(),this.defaultCalendar=new this.calendarModelClass({unspecifiedTimeIsWorking:this.unspecifiedTimeIsWorking}),this.defaultCalendar.project=this,this.delayEnteringReplica||this.enterReplica(!1),this.setCalendarManagerStore(this.calendarManagerStore),this.setEventStore(this.eventStore),this.setDependencyStore(this.dependencyStore),this.setResourceStore(this.resourceStore),this.setAssignmentStore(this.assignmentStore);Boolean(this.calendarsData||this.eventsData||this.dependenciesData||this.resourcesData||this.assignmentsData)?(this.loadInlineData({calendarsData:this.calendarsData,eventsData:this.eventsData,dependenciesData:this.dependenciesData,resourcesData:this.resourcesData,assignmentsData:this.assignmentsData}),delete this.calendarsData,delete this.eventsData,delete this.dependenciesData,delete this.resourcesData,delete this.assignmentsData):this.delayCalculation&&this.hasDataInStores&&this.scheduleDelayedCalculation()}get hasDataInStores(){return[this.calendarManagerStore,this.eventStore,this.dependencyStore,this.resourceStore,this.assignmentStore].some((e=>e.allCount>0))}enterReplica(e){const n=this;n.replica||(n.replica=n.createReplica(),n.replica.addEntity(n),n.replica.addEntity(n.defaultCalendar),n.trigger("graphReady")),e&&!n.isRepopulatingStores&&(n.calendarManagerStore.forEach((e=>{!e.graph&&e.joinProject()}),void 0,{includeFilteredOutRecords:!0}),n.eventStore.forEach((e=>{!e.graph&&e.joinProject()}),void 0,{includeFilteredOutRecords:!0}),n.resourceStore.forEach((e=>{!e.graph&&e.joinProject()}),void 0,{includeFilteredOutRecords:!0}),n.dependencyStore.forEach((e=>{!e.graph&&e.joinProject()}),void 0,{includeFilteredOutRecords:!0}),n.assignmentStore.forEach((e=>{!e.graph&&e.joinProject()}),void 0,{includeFilteredOutRecords:!0}))}resetStmQueue(){const e=this.stm.disabled;this.stm.disable(),this.stm.resetQueue(),e||this.stm.enable()}doDestroy(){var e,r,i,o,s,a,l,c;const d=this;null==(e=d.eventStore)||e.destroy(),null==(r=d.dependencyStore)||r.destroy(),null==(i=d.assignmentStore)||i.destroy(),null==(o=d.resourceStore)||o.destroy(),null==(s=d.calendarManagerStore)||s.destroy(),null==(a=d.defaultCalendar)||a.destroy(),null==(l=d.replica)||l.clear(),null==(c=d.stm)||c.destroy(),n.doDestroy.call(this)}getReplicaConfig(){return{project:this,schema:Jy.new(),enableProgressNotifications:this.enableProgressNotifications,silenceInitialCommit:this.silenceInitialCommit,ignoreInitialCommitComputationCycles:this.ignoreInitialCommitComputationCycles,cycleEffectClass:this.cycleEffectClass,onWriteDuringCommit:"ignore",readMode:by.CurrentOrProposedOrPrevious}}createReplica(){return zw.mix(Oy).new(this.getReplicaConfig())}*hasSubEvents(){return this.getEventStore().count>0}*subEventsIterable(){return this.getEventStore().getRange()}getType(){return cg.SchedulerBasic}get enableProgressNotifications(){return this._enableProgressNotifications}set enableProgressNotifications(e){this._enableProgressNotifications=e,this.replica&&(this.replica.enableProgressNotifications=e)}getDefaultCycleEffectClass(){return Vw}getDefaultEventModelClass(){return uC}getDefaultEventStoreClass(){return hC}getDefaultDependencyModelClass(){return bC}getDefaultDependencyStoreClass(){return Yw}getDefaultResourceModelClass(){return pC}getDefaultResourceStoreClass(){return mC}getDefaultAssignmentModelClass(){return Ww}getDefaultAssignmentStoreClass(){return Uw}getDefaultCalendarModelClass(){return Aw}getDefaultCalendarManagerStoreClass(){return Gw}usingSyncDataOnLoad(){return[this.eventStore,this.resourceStore,this.dependencyStore,this.assignmentStore].some((e=>e.syncDataOnLoad))}async loadInlineData(e){const{calendarManagerStore:n,eventStore:r,dependencyStore:i,assignmentStore:o,resourceStore:s,replica:a}=this;if(this.isInitialCommitPerformed)for(;this.replica.isCommitting;)await this.commitAsync();else null==a||a.unScheduleAutoCommit();(null==a?void 0:a.enableProgressNotifications)&&!this.delayCalculation&&(await delay2(0),await this.commitAsync(),a.onPropagationProgressNotification({total:0,remaining:0,phase:"storePopulation"}),await delay2(50)),this.isInitialCommitPerformed=!1,this.isLoadingInlineData=!0,globalThis.DEBUG&&(console.log("%cInitializing project","font-weight:bold;color:darkgreen;text-transform:uppercase;margin-top: 2em"),console.time("Time to visible"),console.time("Populating project")),!this.delayCalculation||this.delayedCalculationPromise||this.usingSyncDataOnLoad()||this.scheduleDelayedCalculation(),e.calendarsData&&(this.repopulateStore(n),n.data=e.calendarsData),(e.eventsData||e.tasksData)&&(this.repopulateStore(r),r.data=e.eventsData||e.tasksData),e.dependenciesData&&(this.repopulateStore(i),i.data=e.dependenciesData),e.resourcesData&&(this.repopulateStore(s),s.data=e.resourcesData),e.assignmentsData&&(this.repopulateStore(o),o.data=e.assignmentsData),e.project&&this.applyProjectResponse(e.project),globalThis.DEBUG&&console.timeEnd("Populating project");const l=await this.commitLoad();return this.isLoadingInlineData=!1,l}setupTemporaryIndices(){const{storage:e}=this.assignmentStore||{};e&&(e.addIndex({property:"event",unique:!1}),e.addIndex({property:"resource",unique:!1}))}removeTemporaryIndices(){const{storage:e}=this.assignmentStore;e.removeIndex("event"),e.removeIndex("resource")}async internalDelayCalculation(e){const n=this;if(n.delayEnteringReplica=!0,n.setupTemporaryIndices(),await delay2(0),n.isDestroyed)return void e();if(n.trigger("delayCalculationStart"),n.trigger("refresh",{isCalculated:!1}),await delay2(0),n.isDestroyed)return void e();n.delayEnteringReplica=!1,n.isRepopulatingStores?n.repopulateReplica.now():(n.trigger("recordsUnlinked"),n.enterReplica(!0));const r=await n.replica.commitAsync();n.isDestroyed?e():(e(r),n.delayedCalculationPromise=null,n.trigger("delayCalculationEnd"),n.removeTemporaryIndices())}scheduleDelayedCalculation(){return this.delayedCalculationPromise?this.delayedCalculationPromise:!1!==this.delayCalculation?this.delayedCalculationPromise=new Promise((e=>this.internalDelayCalculation(e).then())):void 0}async commitLoad(){const e=await this.commitAsync();return this.isDestroyed||this.trigger("load"),e}initializeStm(){const e=this.stmClass||Do;this.stm instanceof Do||this.setStm(e.new({disabled:!0},this.stm)),this.resetUndoRedoQueuesAfterLoad&&this.ion({load:this.resetStmQueue,thisObj:this}),this.ion({beforeCommit:this.onCommitInitialization,commitFinalized:this.onCommitFinalization,commitRejected:this.onCommitRejection,thisObj:this})}removeRejectedRecordsAdd({transactionResult:e,silenceCommit:n}){var r,i,o;const s=new Map;for(const n of e.entries.values()){const i=n.identifier,{field:o}=i;if(n.isShadow()||!i[rw]||o instanceof nw)continue;const a=i.self,l=a.firstStore;!l||n.previous||(null==(r=e.transaction.getLatestStableEntryFor(a.$$))?void 0:r.previous)||(s.has(l)?s.get(l).has(a)||s.get(l).add(a):s.set(l,new Set([a])))}null==(i=this.suspendChangesTracking)||i.call(this);Array.from(s.keys()).sort(((e,n)=>e.removalOrder-n.removalOrder)).forEach((e=>e.remove(s.get(e)))),null==(o=this.resumeChangesTracking)||o.call(this,n),n&&(this.eventStore.acceptChanges(),this.dependencyStore.acceptChanges(),this.resourceStore.acceptChanges(),this.assignmentStore.acceptChanges(),this.calendarManagerStore.acceptChanges())}onCommitRejection(e){this._stmDisabled?(this.replica.isWritingPreviousData=!0,this.isRestoringData=!0,this.removeRejectedRecordsAdd(e),this.isRestoringData=!1,this.replica.isWritingPreviousData=!1):this.rejectStmTransaction()}onCommitInitialization(){const{stm:e}=this;this._stmDisabled=e.disabled,e.isRecording&&e.autoRecord&&(this._stmAutoRecord=!0,e.autoRecord=!1)}onCommitFinalization(){this._stmAutoRecord&&(this.stm.autoRecord=!0,this._stmAutoRecord=!1)}onSTMRestoringStart({source:e}){this.replica&&(this.replica.isWritingPreviousData=!0)}async onSTMRestoringStop({source:e}){this.replica&&(this.replica.isWritingPreviousData=!1);const n=e;n.disable(),await this.commitAsync(),this.isDestroyed||(n.enable(),this.trigger("stateRestoringDone"))}deferUntilRepopulationIfNeeded(e,n,r){this.isRepopulatingStores?(this.detachListeners(e),this.ion({name:e,repopulateReplica:{fn:async()=>{await this.commitAsync(),this.isDestroyed||n(...r)},once:!0}})):n(...r)}get isRepopulatingStores(){var e;return Boolean(null==(e=this.repopulateStores)?void 0:e.size)}repopulateStore(e){var n;const r=this;r.repopulateOnDataset&&e.allCount&&!e.syncDataOnLoad&&(null==(n=r.replica)||n.activeTransaction.stop(),r.repopulateStores||(r.repopulateStores=new Set),r.repopulateStores.add(e),r.repopulateReplica())}repopulateReplica(){const e=this;if(e.delayEnteringReplica)return;const{calendarManagerStore:n,eventStore:r,dependencyStore:i,assignmentStore:o,resourceStore:s,replica:a}=e;a?(e.unlinkStoreRecords(n,r,i,s,o),e.unlinkRecord(e),e.unlinkRecord(e.defaultCalendar),e.trigger("recordsUnlinked"),a.clear()):e.trigger("recordsUnlinked");const l=e.replica=e.createReplica();l.addEntity(e),l.addEntity(e.defaultCalendar),e.joinStoreRecords(n,!0),e.joinStoreRecords(r,!0),e.joinStoreRecords(i,!0),e.joinStoreRecords(s,!0),e.joinStoreRecords(o,!0),e.repopulateStores.clear(),e.trigger("repopulateReplica")}beforeCommitAsync(){return this.repopulateReplica.isPending&&!this.isDelayingCalculation?(this.repopulateReplica.now(),this.replica.commitAsync()):null}unlinkRecord(e){var n;if(null==e?void 0:e.graph){const{activeTransaction:r}=this.replica,{$:i}=e,o=Object.keys(i);for(let e=0;e<o.length;e++){const s=i[o[e]],a=r.getLatestEntryFor(s);if(a){let e=a.getValue();void 0===e&&(e=a.proposedValue),void 0!==e&&(s.DATA=s.field instanceof tw&&null!=(n=null==e?void 0:e.id)?n:e)}}e.graph=null}}unlinkStoreRecords(...e){e.forEach((e=>{this.repopulateStores.has(e)&&!e.syncDataOnLoad||e.traverse((e=>{this.unlinkRecord(e)}),!1,!1,{includeFilteredOutRecords:!0,includeCollapsedGroupRecords:!0})}))}getGraph(){return this.replica}async addEvents(e){return this.eventStore.add(e),this.commitAsync()}async addEvent(e){return this.eventStore.add(e),this.commitAsync()}includeEvent(e){this.eventStore.add(e)}async removeEvents(e){return this.eventStore.remove(e),this.commitAsync()}excludeEvent(e){this.eventStore.remove(e)}async removeEvent(e){return this.eventStore.remove(e),this.commitAsync()}getStm(){return this.stm}setStm(e){this.stm=e,this.stm.ion({restoringStart:this.onSTMRestoringStart,restoringStop:this.onSTMRestoringStop,thisObj:this})}calculateProject(){return this}*calculateEffectiveCalendar(){let e=yield this.$.calendar;return e?yield e.$.version:e=this.defaultCalendar,e}joinStoreRecords(e,n=!1){const fn2=e=>{e.setProject(this),e.joinProject()};e.rootNode?e.rootNode.traverse(fn2,n,!0):e.forEach(fn2,null,{includeFilteredOutRecords:!0,includeCollapsedGroupRecords:!0})}unjoinStoreRecords(e){const fn2=e=>{e.leaveProject(),e.setProject(this)};e.rootNode?e.rootNode.traverse((n=>{n!==e.rootNode&&fn2(n)}),!1,!0):e.forEach(fn2,null,{includeFilteredOutRecords:!0,includeCollapsedGroupRecords:!0})}setEventStore(e){const n=this.eventStore;if(n&&this.stm.hasStore(n)){this.stm.removeStore(n),this.unjoinStoreRecords(n),this.detachStore(n);const r=n.assignmentsForRemoval;r.forEach((n=>{const i=n.event;if(i){const o=e.getById(i.id);o&&(n.event=o,r.delete(n))}})),n.afterEventRemoval()}if(e&&e instanceof yi)this.eventStore=e,e.setProject(this),this.stm.addStore(e),e.tree&&e.rootNode!==this?(this.appendChild(e.rootNode.children||[]),e.rootNode=this):this.joinStoreRecords(e);else{const n=(null==e?void 0:e.storeClass)||this.eventStoreClass;this.eventStore=new n(Et.assign({modelClass:this.eventModelClass,project:this,stm:this.stm},e||{}))}this.attachStore(this.eventStore),this.trigger("eventStoreChange",{store:this.eventStore})}setDependencyStore(e){const n=this.dependencyStore;if(n&&this.stm.hasStore(n)&&(this.stm.removeStore(n),this.detachStore(n)),e&&e instanceof yi)this.dependencyStore=e,e.setProject(this),this.stm.addStore(e),this.joinStoreRecords(e);else{const n=(null==e?void 0:e.storeClass)||this.dependencyStoreClass;this.dependencyStore=new n(Et.assign({modelClass:this.dependencyModelClass,project:this,stm:this.stm},e||{}))}this.attachStore(this.dependencyStore),this.trigger("dependencyStoreChange",{store:this.dependencyStore})}setResourceStore(e){const n=this.resourceStore;if(n&&this.stm.hasStore(n)){this.stm.removeStore(n),this.unjoinStoreRecords(n),this.detachStore(n);const r=n.assignmentsForRemoval;r.forEach((n=>{const i=n.resource;if(i){const o=e.getById(i.id);o&&(n.resource=o,r.delete(n))}})),n.afterResourceRemoval()}if(e&&e instanceof yi)this.resourceStore=e,e.setProject(this),this.stm.addStore(e),this.joinStoreRecords(e);else{const n=(null==e?void 0:e.storeClass)||this.resourceStoreClass;this.resourceStore=new n(Et.assign({modelClass:this.resourceModelClass,project:this,stm:this.stm},e||{}))}this.attachStore(this.resourceStore),this.trigger("resourceStoreChange",{store:this.resourceStore})}setAssignmentStore(e){const n=this.assignmentStore;if(n&&this.stm.hasStore(n)&&(this.stm.removeStore(n),this.unjoinStoreRecords(n),this.detachStore(n)),e&&e instanceof yi)this.assignmentStore=e,e.setProject(this),this.stm.addStore(e),this.joinStoreRecords(e);else{const n=(null==e?void 0:e.storeClass)||this.assignmentStoreClass;this.assignmentStore=new n(Et.assign({modelClass:this.assignmentModelClass,project:this,stm:this.stm},e||{}))}this.isDelayingCalculation&&this.setupTemporaryIndices(),this.attachStore(this.assignmentStore),this.trigger("assignmentStoreChange",{store:this.assignmentStore})}setCalendarManagerStore(e){const n=this.calendarManagerStore;if(n&&this.stm.hasStore(n)&&(this.stm.removeStore(n),this.detachStore(n)),e&&e instanceof yi)this.calendarManagerStore=e,e&&(e.setProject(this),this.stm.addStore(e),this.joinStoreRecords(e));else{const n=(null==e?void 0:e.storeClass)||this.calendarManagerStoreClass;this.calendarManagerStore=new n(Et.assign({modelClass:this.calendarModelClass,project:this,stm:this.stm},e||{}))}this.attachStore(this.calendarManagerStore),this.trigger("calendarManagerStoreChange",{store:this.calendarManagerStore})}async isValidDependency(...e){return!0}rejectStmTransaction(e){(e=e||this.stm).transaction&&(e.transaction.length?(e.forEachStore((e=>e.beginBatch())),e.rejectTransaction(),e.forEachStore((e=>e.endBatch()))):e.stopTransaction())}async tryPropagateWithChanges(e){const n=this.stm,r=n.disabled,i=n.autoRecord;r?n.enable():(i&&(n.autoRecord=!1),n.isRecording&&n.stopTransaction()),n.startTransaction(),e();let o=!0;try{o=!(await this.commitAsync()).rejectedWith}catch(e){if(!/cycle/i.test(e))throw e;o=!1}return o?(n.stopTransaction(),r&&n.resetQueue()):(this.replica.reject(),this.rejectStmTransaction(n)),n.disabled=r,n.autoRecord=i,o}isEngineReady(){const{replica:e}=this;return this.delayEnteringReplica||!this.isRepopulatingStores&&(!e||!(e.dirty&&(e.hasPendingAutoCommit()||e.isCommitting)))}static get defaultConfig(){return{assignmentsData:null,calendarsData:null,dependenciesData:null,eventsData:null,resourcesData:null,eventStore:null,resourceStore:null,assignmentStore:null,dependencyStore:null,calendarManagerStore:null,eventModelClass:null,resourceModelClass:null,assignmentModelClass:null,dependencyModelClass:null,calendarModelClass:null,repopulateOnDataset:!0}}static get delayable(){return{repopulateReplica:10}}}return SchedulerBasicProjectMixin2.applyConfigs=!0,__decorate20([model_field({type:"boolean",defaultValue:!0})],SchedulerBasicProjectMixin2.prototype,"unspecifiedTimeIsWorking",void 0),__decorate20([model_field({type:"boolean",defaultValue:!1})],SchedulerBasicProjectMixin2.prototype,"skipNonWorkingTimeWhenSchedulingManually",void 0),__decorate20([model_field({type:"boolean",defaultValue:!0})],SchedulerBasicProjectMixin2.prototype,"skipNonWorkingTimeInDurationWhenSchedulingManually",void 0),SchedulerBasicProjectMixin2}))){},__decorate21=function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);return s>3&&a&&Object.defineProperty(n,r,a),a},calculateEffectiveStartDateConstraintInterval=function*(e,n,r,i,o){if(r.isIntervalEmpty())return r;if(o&&r.intersectionOf){const n=new Set;for(const o of r.intersectionOf)if(o.isInfinite())n.add(o);else{const r=o.startDateIsFinite()?yield*e.calculateProjectedXDateWithDuration(o.startDate,!1,i):o.startDate,s=o.endDateIsFinite()?yield*e.calculateProjectedXDateWithDuration(o.endDate,!1,i):o.endDate,a=o;n.add(a.copyWith({reflectionOf:a,side:a.side===gg.Start?gg.End:gg.Start,startDate:r,endDate:s}))}r.intersectionOf=n}const s=r.startDateIsFinite()?yield*e.calculateProjectedXDateWithDuration(r.startDate,!1,i):null,a=r.endDateIsFinite()?yield*e.calculateProjectedXDateWithDuration(r.endDate,!1,i):null;return intersectIntervals([n,xw.new({intersectionOf:r.intersectionOf,startDate:s,endDate:a})],o)},calculateEffectiveEndDateConstraintInterval=function*(e,n,r,i,o){if(n.isIntervalEmpty())return n;if(o){const r=new Set;for(const o of n.intersectionOf)if(o.isInfinite())r.add(o);else{const n=o.startDateIsFinite()?yield*e.calculateProjectedXDateWithDuration(o.startDate,!0,i):o.startDate,s=o.endDateIsFinite()?yield*e.calculateProjectedXDateWithDuration(o.endDate,!0,i):o.endDate,a=o;r.add(a.copyWith({reflectionOf:a,side:a.side===gg.Start?gg.End:gg.Start,startDate:n,endDate:s}))}n.intersectionOf=r}const s=n.startDateIsFinite()?yield*e.calculateProjectedXDateWithDuration(n.startDate,!0,i):null,a=n.endDateIsFinite()?yield*e.calculateProjectedXDateWithDuration(n.endDate,!0,i):null;return intersectIntervals([r,xw.new({reflectionOf:s||a?n:void 0,intersectionOf:s||a?n.intersectionOf:void 0,startDate:s,endDate:a})],o)},SC=!0,xC=class extends(mg([yC],(e=>{const n=e.prototype;class ConstrainedEarlyEventMixin2 extends e{*maybeSkipNonWorkingTime(e,n=!0){if(yield*this.hasSubEvents())return e;let r=yield*this.calculateEffectiveDuration();return e&&r>0?yield*this.skipNonWorkingTime(e,n):e}*calculateEffectiveConstraintInterval(e,n,r,i=!1){const o=yield*this.calculateEffectiveDuration();if(null==o)return null;const s=e?calculateEffectiveStartDateConstraintInterval:calculateEffectiveEndDateConstraintInterval;return yield*s(this,intersectIntervals(n,i),intersectIntervals(r,i),o,i)}*calculateStartDateConstraintIntervals(){return[]}*calculateEndDateConstraintIntervals(){return[]}*calculateEarlyStartDateConstraintIntervals(){return[]}*calculateEarlyEndDateConstraintIntervals(){return[]}*doCalculateEarlyEffectiveStartDateInterval(e=!1){const n=yield this.$.earlyStartDateConstraintIntervals,r=yield this.$.earlyEndDateConstraintIntervals;return yield*this.calculateEffectiveConstraintInterval(!0,n.concat(yield this.$.startDateConstraintIntervals),r.concat(yield this.$.endDateConstraintIntervals),e)}*calculateEarlyEffectiveStartDateInterval(){return yield*this.doCalculateEarlyEffectiveStartDateInterval()}*doCalculateEarlyEffectiveEndDateInterval(e=!1){const n=yield this.$.earlyStartDateConstraintIntervals,r=yield this.$.earlyEndDateConstraintIntervals;return yield*this.calculateEffectiveConstraintInterval(!1,n.concat(yield this.$.startDateConstraintIntervals),r.concat(yield this.$.endDateConstraintIntervals),e)}*calculateEarlyEffectiveEndDateInterval(){return yield*this.doCalculateEarlyEffectiveEndDateInterval()}*shouldRollupChildEarlyStartDate(e){return!0}*calculateMinChildrenEarlyStartDate(){let e=xg;const n=yield*this.subEventsIterable();for(let r of n){let n;(yield*this.shouldRollupChildEarlyStartDate(r))&&((yield r.$.manuallyScheduled)&&(yield*r.hasSubEvents())&&(n=yield r.$.minChildrenEarlyStartDate),n=n||(yield r.$.earlyStartDate),n&&n<e&&(e=n))}return e.getTime()-xg.getTime()?e:null}*shouldRollupChildEarlyEndDate(e){return!0}*calculateMaxChildrenEarlyEndDate(){let e=Sg;const n=yield*this.subEventsIterable();for(let r of n){let n;(yield*this.shouldRollupChildEarlyEndDate(r))&&((yield r.$.manuallyScheduled)&&(yield*r.hasSubEvents())&&(n=yield r.$.maxChildrenEarlyEndDate),n=n||(yield r.$.earlyEndDate),n&&n>e&&(e=n))}return e.getTime()-Sg.getTime()?e:null}*calculateEarlyStartDateRaw(){if((yield this.$.manuallyScheduled)&&(yield this.$.direction)===ug.Forward)return yield this.$.startDate;if(yield*this.hasSubEvents())return yield this.$.minChildrenEarlyStartDate;if(!(yield*this.isConstrainedEarly()))return yield this.$.startDate;let e=yield this.$.earlyEffectiveStartDateInterval;if(null===e)return null;if(e.isIntervalEmpty()){e=yield*this.doCalculateEarlyEffectiveStartDateInterval(!0);const n=ww.new({intervals:[...e.intersectionOf]});if((yield n)!==lw.Cancel)return null;yield Reject(n)}return isDateFinite(e.startDate)?e.startDate:null}*calculateEarlyStartDate(){const e=yield this.$.earlyStartDateRaw;return yield*this.maybeSkipNonWorkingTime(e,!0)}*calculateEarlyEndDateRaw(){if((yield this.$.manuallyScheduled)&&(yield this.$.direction)===ug.Forward)return yield this.$.endDate;if(yield*this.hasSubEvents())return yield this.$.maxChildrenEarlyEndDate;if(!(yield*this.isConstrainedEarly()))return yield this.$.endDate;let e=yield this.$.earlyEffectiveEndDateInterval;if(null===e)return null;if(e.isIntervalEmpty()){e=yield*this.doCalculateEarlyEffectiveEndDateInterval(!0);const n=ww.new({intervals:[...e.intersectionOf]});if((yield n)!==lw.Cancel)return null;yield Reject(n)}return isDateFinite(e.startDate)?e.startDate:null}*calculateEarlyEndDate(){return yield this.$.earlyEndDateRaw}*isConstrainedEarly(){const e=yield this.$.startDateConstraintIntervals,n=yield this.$.endDateConstraintIntervals,r=yield this.$.earlyStartDateConstraintIntervals,i=yield this.$.earlyEndDateConstraintIntervals;return Boolean((null==e?void 0:e.length)||(null==n?void 0:n.length)||(null==r?void 0:r.length)||(null==i?void 0:i.length))}*calculateStartDatePure(){return(yield this.$.direction)===ug.Forward?!(yield*this.isConstrainedEarly())||(yield this.$.manuallyScheduled)||(yield this.$.unscheduled)?yield*n.calculateStartDatePure.call(this):(yield this.$.earlyStartDate)||(yield*n.calculateStartDatePure.call(this)):yield*n.calculateStartDatePure.call(this)}*calculateStartDateProposed(){if((yield this.$.direction)===ug.Forward){if(!(yield*this.isConstrainedEarly())||(yield this.$.manuallyScheduled)||(yield this.$.unscheduled))return yield*n.calculateStartDateProposed.call(this);const e=yield this.$.earlyStartDate;if(e){if(isDateFinite(e))return e;const r=yield*n.calculateStartDateProposed.call(this),i=yield this.$.earlyEffectiveStartDateInterval;return i.containsDate(r)?r:isDateFinite(i.endDate)?i.endDate:r}return yield*n.calculateStartDateProposed.call(this)}return yield*n.calculateStartDateProposed.call(this)}*calculateEndDatePure(){return(yield this.$.direction)===ug.Forward?!(yield*this.isConstrainedEarly())||(yield this.$.manuallyScheduled)||(yield this.$.unscheduled)?yield*n.calculateEndDatePure.call(this):(yield this.$.earlyEndDate)||(yield*n.calculateEndDatePure.call(this)):yield*n.calculateEndDatePure.call(this)}*calculateEndDateProposed(){if((yield this.$.direction)===ug.Forward){if(!(yield*this.isConstrainedEarly())||(yield this.$.manuallyScheduled)||(yield this.$.unscheduled))return yield*n.calculateEndDateProposed.call(this);const e=yield this.$.earlyEndDate;if(e){if(isDateFinite(e))return e;const r=yield*n.calculateEndDateProposed.call(this),i=yield this.$.earlyEffectiveEndDateInterval;return i.containsDate(r)?r:isDateFinite(i.endDate)?i.endDate:r}return yield*n.calculateEndDateProposed.call(this)}return yield*n.calculateEndDateProposed.call(this)}*calculateDirection(){const e=this.getProject();return yield e.$.direction}}return __decorate21([qy({lazy:SC})],ConstrainedEarlyEventMixin2.prototype,"minChildrenEarlyStartDate",void 0),__decorate21([qy({lazy:SC})],ConstrainedEarlyEventMixin2.prototype,"earlyStartDateRaw",void 0),__decorate21([model_field({type:"date",persist:!1},{lazy:SC,converter:dateConverter,persistent:!1})],ConstrainedEarlyEventMixin2.prototype,"earlyStartDate",void 0),__decorate21([qy({lazy:SC})],ConstrainedEarlyEventMixin2.prototype,"maxChildrenEarlyEndDate",void 0),__decorate21([qy({lazy:SC})],ConstrainedEarlyEventMixin2.prototype,"earlyEndDateRaw",void 0),__decorate21([model_field({type:"date",persist:!1},{lazy:SC,converter:dateConverter,persistent:!1})],ConstrainedEarlyEventMixin2.prototype,"earlyEndDate",void 0),__decorate21([qy()],ConstrainedEarlyEventMixin2.prototype,"startDateConstraintIntervals",void 0),__decorate21([qy()],ConstrainedEarlyEventMixin2.prototype,"endDateConstraintIntervals",void 0),__decorate21([qy({lazy:SC})],ConstrainedEarlyEventMixin2.prototype,"earlyStartDateConstraintIntervals",void 0),__decorate21([qy({lazy:SC})],ConstrainedEarlyEventMixin2.prototype,"earlyEndDateConstraintIntervals",void 0),__decorate21([qy()],ConstrainedEarlyEventMixin2.prototype,"earlyEffectiveStartDateInterval",void 0),__decorate21([qy()],ConstrainedEarlyEventMixin2.prototype,"earlyEffectiveEndDateInterval",void 0),__decorate21([calculate("startDateConstraintIntervals")],ConstrainedEarlyEventMixin2.prototype,"calculateStartDateConstraintIntervals",null),__decorate21([calculate("endDateConstraintIntervals")],ConstrainedEarlyEventMixin2.prototype,"calculateEndDateConstraintIntervals",null),__decorate21([calculate("earlyStartDateConstraintIntervals")],ConstrainedEarlyEventMixin2.prototype,"calculateEarlyStartDateConstraintIntervals",null),__decorate21([calculate("earlyEndDateConstraintIntervals")],ConstrainedEarlyEventMixin2.prototype,"calculateEarlyEndDateConstraintIntervals",null),__decorate21([calculate("earlyEffectiveStartDateInterval")],ConstrainedEarlyEventMixin2.prototype,"calculateEarlyEffectiveStartDateInterval",null),__decorate21([calculate("earlyEffectiveEndDateInterval")],ConstrainedEarlyEventMixin2.prototype,"calculateEarlyEffectiveEndDateInterval",null),__decorate21([calculate("minChildrenEarlyStartDate")],ConstrainedEarlyEventMixin2.prototype,"calculateMinChildrenEarlyStartDate",null),__decorate21([calculate("maxChildrenEarlyEndDate")],ConstrainedEarlyEventMixin2.prototype,"calculateMaxChildrenEarlyEndDate",null),__decorate21([calculate("earlyStartDateRaw")],ConstrainedEarlyEventMixin2.prototype,"calculateEarlyStartDateRaw",null),__decorate21([calculate("earlyStartDate")],ConstrainedEarlyEventMixin2.prototype,"calculateEarlyStartDate",null),__decorate21([calculate("earlyEndDateRaw")],ConstrainedEarlyEventMixin2.prototype,"calculateEarlyEndDateRaw",null),__decorate21([calculate("earlyEndDate")],ConstrainedEarlyEventMixin2.prototype,"calculateEarlyEndDate",null),__decorate21([calculate("direction")],ConstrainedEarlyEventMixin2.prototype,"calculateDirection",null),ConstrainedEarlyEventMixin2}))){},__decorate22=function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);return s>3&&a&&Object.defineProperty(n,r,a),a},DC=class extends(mg([xC,wC],(e=>{const n=e.prototype;class HasDateConstraint extends e{constructor(){super(...arguments),this.ignorePinningConstraint=!1}writeStartDate(e,r,i,o,s=!0){const a=this.getProject();if((null==a?void 0:a.addConstraintOnDateSet)&&r.graph.hasIdentifier(this.$.direction)&&!(null==a?void 0:a.eventStore.isSyncingDataOnLoad)&&!this.isReverting&&!(null==a?void 0:a.getStm().isRestoring)){const e=this.getStartDatePinConstraintType();e&&(this.constraintType=e,this.constraintDate=o)}return n.writeStartDate.call(this,e,r,i,o,s)}writeEndDate(e,r,i,o,s=!1){const a=this.getProject();if((null==a?void 0:a.addConstraintOnDateSet)&&r.graph.hasIdentifier(this.$.direction)&&s&&!(null==a?void 0:a.eventStore.isSyncingDataOnLoad)&&!(null==a?void 0:a.getStm().isRestoring)){const e=this.getEndDatePinConstraintType();e&&(this.constraintType=e,this.constraintDate=o)}return n.writeEndDate.call(this,e,r,i,o,s)}*calculateConstraintType(){let e=yield Cv;return(yield*this.isConstraintTypeApplicable(e))||(e=null),e}*calculateConstraintDate(e){let n=yield Cv;const r=yield this.$.constraintType;return r?n||(n=this.getConstraintTypeDefaultDate(e,r)):n=null,n}getStartDatePinConstraintType(){const{direction:e}=this;if(!this.isTaskPinnableWithConstraint())return null;switch(e){case ug.Forward:return Jh.StartNoEarlierThan;case ug.Backward:return Jh.StartNoLaterThan}}getEndDatePinConstraintType(){const{direction:e}=this;if(!this.isTaskPinnableWithConstraint())return null;switch(e){case ug.Forward:return Jh.FinishNoEarlierThan;case ug.Backward:return Jh.FinishNoLaterThan}}isTaskPinnableWithConstraint(){const{manuallyScheduled:e,ignorePinningConstraint:n,constraintType:r}=this;let i=!1;if(!e&&!n)if(r)switch(r){case Jh.StartNoEarlierThan:case Jh.StartNoLaterThan:case Jh.FinishNoEarlierThan:case Jh.FinishNoLaterThan:i=!0}else i=!0;return i}applyChangeset(e,n,r){this.ignorePinningConstraint=r;const i=super.applyChangeset(e,n,r);return this.ignorePinningConstraint=!1,i}getConstraintTypeDefaultDate(e,n){switch(n){case Jh.StartNoEarlierThan:case Jh.StartNoLaterThan:case Jh.MustStartOn:return e(ProposedOrPreviousValueOf(this.$.startDate));case Jh.FinishNoEarlierThan:case Jh.FinishNoLaterThan:case Jh.MustFinishOn:return e(ProposedOrPreviousValueOf(this.$.endDate))}return null}*isConstraintTypeApplicable(e){const n=yield*this.hasSubEvents();switch(e){case Jh.FinishNoEarlierThan:case Jh.StartNoLaterThan:case Jh.MustFinishOn:case Jh.MustStartOn:return!n}return!0}async setConstraint(e,n){return this.constraintType=e,void 0!==n&&(this.constraintDate=n),this.commitAsync()}*calculateEndDateConstraintIntervals(){const e=yield*n.calculateEndDateConstraintIntervals.call(this),r=yield this.$.manuallyScheduled,i=yield this.$.constraintType,o=yield this.$.constraintDate,s=this.project.dateConstraintIntervalClass;if(!r&&i&&o)switch(i){case Jh.MustFinishOn:e.unshift(s.new({owner:this,side:gg.End,startDate:o,endDate:o}));break;case Jh.FinishNoEarlierThan:e.unshift(s.new({owner:this,side:gg.End,startDate:o}));break;case Jh.FinishNoLaterThan:e.unshift(s.new({owner:this,side:gg.End,endDate:o}))}return e}*calculateStartDateConstraintIntervals(){const e=yield*n.calculateStartDateConstraintIntervals.call(this),r=yield this.$.manuallyScheduled,i=yield this.$.constraintType,o=yield this.$.constraintDate,s=this.project.dateConstraintIntervalClass;if(!r&&i&&o)switch(i){case Jh.MustStartOn:e.unshift(s.new({owner:this,side:gg.Start,startDate:o,endDate:o}));break;case Jh.StartNoEarlierThan:e.unshift(s.new({owner:this,side:gg.Start,startDate:o}));break;case Jh.StartNoLaterThan:e.unshift(s.new({owner:this,side:gg.Start,endDate:o}))}return e}}return __decorate22([model_field({type:"string"},{sync:!0})],HasDateConstraint.prototype,"constraintType",void 0),__decorate22([model_field({type:"date"},{converter:dateConverter,sync:!0})],HasDateConstraint.prototype,"constraintDate",void 0),__decorate22([calculate("constraintType")],HasDateConstraint.prototype,"calculateConstraintType",null),__decorate22([calculate("constraintDate")],HasDateConstraint.prototype,"calculateConstraintDate",null),HasDateConstraint}))){},EC=class extends(Localizable_default(Cw)){static get $name(){return"RemoveDateConstraintConflictResolution"}construct(){super.construct(...arguments),this.event=this.interval.owner}getDescription(){const{event:e}=this;return format(this.L("L{descriptionTpl}"),e.name||e.id,this.interval.getConstraintName(e.constraintType))}resolve(){this.event.constraintType=null}},RC=class extends Sw{static get $name(){return"DateConstraintIntervalDescription"}static getDescription(e){let n;switch(e.owner.constraintType){case Jh.StartNoEarlierThan:case Jh.FinishNoEarlierThan:case Jh.MustStartOn:case Jh.MustFinishOn:n=this.L("L{startDateDescriptionTpl}");break;case Jh.StartNoLaterThan:case Jh.FinishNoLaterThan:n=this.L("L{endDateDescriptionTpl}")}return format(n,...this.getDescriptionParameters(e))}static getConstraintName(e){return this.L("L{constraintTypeTpl}")[e]}static getDescriptionParameters(e){const n=e.owner;return[Ct.format(e.startDate,this.L("L{dateFormat}")),Ct.format(e.endDate,this.L("L{dateFormat}")),n.name||n.id,this.getConstraintName(n.constraintType)]}},kC=class extends xw{getConstraintName(e){return this.descriptionBuilderClass.getConstraintName(e||this.owner.constraintType)}getDescription(){return this.descriptionBuilderClass.getDescription(this)}isAffectedByTransaction(e){const n=this.owner,r=(e=e||n.graph.activeTransaction).entries.get(n.$.constraintDate),i=e.entries.get(n.$.constraintType);return!e.baseRevision.hasIdentifier(n.$$)||r&&!r.isShadow()||i&&!i.isShadow()}getResolutions(){return this.resolutions||(this.resolutions=[this.removeDateConstraintConflictResolutionClass.new({interval:this})])}};__decorate22([prototypeValue(EC)],kC.prototype,"removeDateConstraintConflictResolutionClass",void 0),__decorate22([prototypeValue(RC)],kC.prototype,"descriptionBuilderClass",void 0);var __decorate23=function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);return s>3&&a&&Object.defineProperty(n,r,a),a},TC=class extends(mg([xC,dC],(e=>{const n=e.prototype;class ScheduledByDependenciesEarlyEventMixin2 extends e{*shouldPredecessorAffectScheduling(e){const n=yield e.$.fromEvent;return n&&!isAtomicValue(n)&&(yield e.$.active)&&(!(yield n.$.inactive)||(yield this.$.inactive))}*calculateEarlyStartDateConstraintIntervals(){const e=yield*n.calculateEarlyStartDateConstraintIntervals.call(this),r=this.getProject(),i=r.dependencyConstraintIntervalClass;for(const n of yield this.$.incomingDeps){if(!(yield*this.shouldPredecessorAffectScheduling(n)))continue;const o=yield n.$.fromEvent;let s;switch(yield n.$.type){case og.EndToStart:s=yield o.$.earlyEndDateRaw;break;case og.StartToStart:s=yield o.$.earlyStartDateRaw}if(s){const o=yield n.$.lag,a=yield n.$.lagUnit,l=yield n.$.calendar;yield l.$.version;const c=i.new({owner:n,startDate:l.calculateEndDate(s,yield*r.$convertDuration(o,a,Zh.Millisecond)),endDate:null});e.unshift(c)}}return e}*calculateEarlyEndDateConstraintIntervals(){const e=yield*n.calculateEarlyEndDateConstraintIntervals.call(this),r=this.getProject(),i=r.dependencyConstraintIntervalClass;for(const n of yield this.$.incomingDeps){if(!(yield*this.shouldPredecessorAffectScheduling(n)))continue;const o=yield n.$.fromEvent;let s;switch(yield n.$.type){case og.EndToEnd:s=yield o.$.earlyEndDateRaw;break;case og.StartToEnd:s=yield o.$.earlyStartDateRaw}if(s){const o=yield n.$.lag,a=yield n.$.lagUnit,l=yield n.$.calendar;yield l.$.version;const c=i.new({owner:n,startDate:l.calculateEndDate(s,yield*r.$convertDuration(o,a,Zh.Millisecond)),endDate:null});e.unshift(c)}}return e}}return __decorate23([model_field({type:"boolean"})],ScheduledByDependenciesEarlyEventMixin2.prototype,"inactive",void 0),ScheduledByDependenciesEarlyEventMixin2}))){},MC=class extends(Localizable_default(Cw)){static get $name(){return"BaseDependencyResolution"}getDescription(){const{dependency:e}=this,{type:n,fromEvent:r,toEvent:i}=e;return format(this.L("L{descriptionTpl}"),this.L("L{DependencyType.long}")[n],r.name||r.id,i.name||i.id)}},AC=class extends MC{static get $name(){return"RemoveDependencyResolution"}resolve(){this.dependency.remove()}},IC=class extends MC{static get $name(){return"DeactivateDependencyResolution"}resolve(){this.dependency.active=!1}},FC=class extends Sw{static get $name(){return"DependencyConstraintIntervalDescription"}static getDescriptionParameters(e){const n=e.owner;return[Ct.format(e.startDate,this.L("L{dateFormat}")),Ct.format(e.endDate,this.L("L{dateFormat}")),this.L("L{DependencyType.long}")[n.type],n.fromEvent.name,n.toEvent.name]}},PC=class extends xw{isAffectedByTransaction(e){const n=this.owner;e=e||n.graph.activeTransaction;const{entries:r}=e,{fromEvent:i,toEvent:o,lag:s,lagUnit:a,type:l}=n.$,c=r.get(i),d=r.get(o),u=r.get(s),h=r.get(a),g=r.get(l);return!e.baseRevision.hasIdentifier(n.$$)||c&&!c.isShadow()||d&&!d.isShadow()||u&&!u.isShadow()||h&&!h.isShadow()||g&&!g.isShadow()}getResolutions(){return this.resolutions||(this.resolutions=[this.deactivateDependencyConflictResolutionClass.new({dependency:this.owner}),this.removeDependencyConflictResolutionClass.new({dependency:this.owner})])}};__decorate23([prototypeValue(AC)],PC.prototype,"removeDependencyConflictResolutionClass",void 0),__decorate23([prototypeValue(IC)],PC.prototype,"deactivateDependencyConflictResolutionClass",void 0),__decorate23([prototypeValue(FC)],PC.prototype,"descriptionBuilderClass",void 0);var __decorate24=function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);return s>3&&a&&Object.defineProperty(n,r,a),a},OC=class extends(mg([Ww],(e=>{e.prototype;class SchedulerProAssignmentMixin2 extends e{*calculateUnits(){const e=yield this.$.event;return e?yield*e.calculateAssignmentUnits(this):yield Cv}*calculateEffort(){const e=yield this.$.event;if(e){const n=yield e.$.startDate,r=yield e.$.endDate,i=yield e.$.effectiveCalendar;if(n&&r){const o=new Map;return o.set(i,[this]),yield*e.calculateProjectedEffort(n,r,o)}}return null}*calculateActualDate(){const e=yield this.$.event;if(e){const n=yield e.$.startDate,r=yield e.$.duration,i=yield e.$.percentDone;return yield*e.calculateProjectedXDateWithDuration(n,!0,.01*r*i)}return null}*calculateActualEffort(){const e=yield this.$.event;if(e){const n=yield e.$.startDate,r=yield e.$.effectiveCalendar,i=yield this.$.actualDate,o=new Map;return o.set(r,[this]),yield*e.calculateProjectedEffort(n,i,o)}return null}}return __decorate24([model_field({type:"number",defaultValue:100})],SchedulerProAssignmentMixin2.prototype,"units",void 0),__decorate24([calculate("units")],SchedulerProAssignmentMixin2.prototype,"calculateUnits",null),__decorate24([qy({lazy:!0})],SchedulerProAssignmentMixin2.prototype,"effort",void 0),__decorate24([qy({lazy:!0})],SchedulerProAssignmentMixin2.prototype,"actualDate",void 0),__decorate24([qy({lazy:!0})],SchedulerProAssignmentMixin2.prototype,"actualEffort",void 0),__decorate24([calculate("effort")],SchedulerProAssignmentMixin2.prototype,"calculateEffort",null),__decorate24([calculate("actualDate")],SchedulerProAssignmentMixin2.prototype,"calculateActualDate",null),__decorate24([calculate("actualEffort")],SchedulerProAssignmentMixin2.prototype,"calculateActualEffort",null),SchedulerProAssignmentMixin2}))){},__decorate25=function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);return s>3&&a&&Object.defineProperty(n,r,a),a},LC=class extends(mg([bC],(e=>{e.prototype;class SchedulerProDependencyMixin2 extends e{*calculateCalendar(){const e=this.getProject();let n;switch(yield e.$.dependenciesCalendar){case ag.Project:n=yield e.$.effectiveCalendar;break;case ag.FromEvent:const r=yield this.$.fromEvent;n=r&&!isAtomicValue(r)?yield r.$.effectiveCalendar:null;break;case ag.ToEvent:const i=yield this.$.toEvent;n=i&&!isAtomicValue(i)?yield i.$.effectiveCalendar:null}return n||(n=yield e.$.effectiveCalendar),n}async setLag(e,n){if(this.graph)return this.graph.write(this.$.lag,e,n),this.graph.commitAsync();this.$.lag.DATA=e,null!=n&&(this.$.lagUnit.DATA=n)}writeLag(e,n,r,i,o=void 0){e.constructor.prototype.write.call(this,e,n,r,i),null!=o&&n.write(this.$.lagUnit,o)}}return __decorate25([model_field({type:"number",defaultValue:0})],SchedulerProDependencyMixin2.prototype,"lag",void 0),__decorate25([model_field({type:"string",defaultValue:Zh.Day},{converter:Ct.normalizeUnit})],SchedulerProDependencyMixin2.prototype,"lagUnit",void 0),__decorate25([qy()],SchedulerProDependencyMixin2.prototype,"calendar",void 0),__decorate25([model_field({type:"boolean",defaultValue:!0,persist:!0})],SchedulerProDependencyMixin2.prototype,"active",void 0),__decorate25([calculate("calendar")],SchedulerProDependencyMixin2.prototype,"calculateCalendar",null),__decorate25([write("lag")],SchedulerProDependencyMixin2.prototype,"writeLag",null),SchedulerProDependencyMixin2}))){},__decorate26=function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);return s>3&&a&&Object.defineProperty(n,r,a),a},_C=class extends(mg([wC],(e=>{e.prototype;class HasPercentDoneMixin2 extends e{*calculatePercentDone(){const e=yield this.$.childEvents,n=this.getProject(),r=yield n.$.autoCalculatePercentDoneForParentTasks;if(e.size&&r){const e=yield this.$.percentDoneSummaryData;return e.totalDuration>0?e.completedDuration/e.totalDuration:e.milestonesNum>0?e.milestonesTotalPercentDone/e.milestonesNum:null}return yield Cv}*shouldRollupChildPercentDoneSummaryData(e){return!0}*calculatePercentDoneSummaryData(){const e=yield this.$.childEvents;if(e.size){let n={totalDuration:0,completedDuration:0,milestonesNum:0,milestonesTotalPercentDone:0};for(const r of e){if(!(yield*this.shouldRollupChildPercentDoneSummaryData(r)))continue;const e=yield r.$.percentDoneSummaryData;e&&(n.totalDuration+=e.totalDuration,n.completedDuration+=e.completedDuration,n.milestonesNum+=e.milestonesNum,n.milestonesTotalPercentDone+=e.milestonesTotalPercentDone)}return n}{const e=yield this.$.duration;if("number"==typeof e){const n=yield*this.getProject().$convertDuration(e,yield this.$.durationUnit,Zh.Millisecond),r=yield this.$.percentDone;return{totalDuration:n,completedDuration:n*r,milestonesNum:0===n?1:0,milestonesTotalPercentDone:0===n?r:0}}return null}}}return __decorate26([model_field({type:"number",defaultValue:0})],HasPercentDoneMixin2.prototype,"percentDone",void 0),__decorate26([qy()],HasPercentDoneMixin2.prototype,"percentDoneSummaryData",void 0),__decorate26([calculate("percentDone")],HasPercentDoneMixin2.prototype,"calculatePercentDone",null),__decorate26([calculate("percentDoneSummaryData")],HasPercentDoneMixin2.prototype,"calculatePercentDoneSummaryData",null),HasPercentDoneMixin2}))){},__decorate27=function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);return s>3&&a&&Object.defineProperty(n,r,a),a},$C=class extends(mg([cC],(e=>{const n=e.prototype;class SchedulerProHasAssignmentsMixin2 extends e{*hasProposedValueForUnits(){const e=yield this.$.assigned;for(const n of e){if((yield n.$.resource)&&(yield HasProposedValue(n.$.units)))return!0}return!1}async assign(e,n=100){const r=this.getProject().assignmentStore.modelClass;return this.addAssignment(new r({event:this,resource:e,units:n})),this.commitAsync()}*forEachAvailabilityInterval(e,n){const r=yield this.$.effectiveCalendar,i=yield this.$.assignmentsByCalendar,o=yield this.$.effectiveCalendarsCombination,s=(yield this.$.ignoreResourceCalendar)||e.ignoreResourceCalendar||!i.size,a=this.getProject().maxCalendarRange;return a&&(e=Object.assign({maxRange:a},e)),o.forEachAvailabilityInterval(e,((e,o,a)=>{const l=a.getCalendarsWorkStatus(),c=a.getCalendarsWorking();if(l.get(r)&&(s||c.some((e=>i.has(e)))))return n(e,o,a)}))}*calculateEffectiveCalendarsCombination(){const e=yield this.$.manuallyScheduled,n=this.getProject(),r=[yield this.$.effectiveCalendar];if(!e||n.skipNonWorkingTimeInDurationWhenSchedulingManually){const e=yield this.$.assignmentsByCalendar;r.push(...e.keys())}return this.getProject().combineCalendars(r)}*calculateAssignmentsByCalendar(){const e=yield this.$.assigned,n=new Map;for(const r of e){const e=yield r.$.resource;if(e){const i=yield e.$.effectiveCalendar;let o=n.get(i);o||(o=[],n.set(i,o)),o.push(r)}}return n}*getBaseOptionsForDurationCalculations(){return{ignoreResourceCalendar:!1}}*useEventAvailabilityIterator(){return(yield this.$.assignmentsByCalendar).size>0}*skipNonWorkingTime(e,r=!0,i){if(!e)return null;const o=yield this.$.assignmentsByCalendar,s=yield this.$.ignoreResourceCalendar;if(yield*this.useEventAvailabilityIterator()){const n=Object.assign(yield*this.getBaseOptionsForDurationCalculations(),r?{startDate:e,isForward:r}:{endDate:e,isForward:r},i);let a;const l=yield*this.forEachAvailabilityInterval(n,((e,n,i)=>(a=r?e:n,!1)));if(l===wg.MaxRangeReached||l===wg.FullRangeIterated){const i=[yield this.$.effectiveCalendar];n.ignoreResourceCalendar||s||i.push(...o.keys());const a=Fw.new({event:this,calendars:i,date:e,isForward:r});if((yield a)!==lw.Cancel)return null;yield Reject(a)}return new Date(a)}return yield*n.skipNonWorkingTime.call(this,e,r)}*calculateProjectedDuration(e,r,i,o){if(!e||!r)return null;if(yield*this.useEventAvailabilityIterator()){const n=Object.assign(yield*this.getBaseOptionsForDurationCalculations(),{startDate:e,endDate:r,isForward:!0},o),s=this.getProject().adjustDurationToDST;let a=0;return yield*this.forEachAvailabilityInterval(n,((e,n)=>{if(a+=n.getTime()-e.getTime(),s){const r=e.getTimezoneOffset()-n.getTimezoneOffset();a+=60*r*1e3}})),i||(i=yield this.$.durationUnit),yield*this.getProject().$convertDuration(a,Zh.Millisecond,i)}return yield*n.calculateProjectedDuration.call(this,e,r,i)}*calculateProjectedXDateWithDuration(e,n=!0,r,i,o){if(null==r||isNaN(r)||null==e)return null;if(0==r)return e;i=i||(yield this.$.durationUnit);const s=yield*this.getProject().$convertDuration(r,i,Zh.Millisecond);let a=e.getTime(),l=s;const c=yield this.$.effectiveCalendar;if(yield*this.useEventAvailabilityIterator()){const r=Object.assign(yield*this.getBaseOptionsForDurationCalculations(),n?{startDate:e,isForward:n}:{endDate:e,isForward:n},o),i=this.getProject().adjustDurationToDST;return(yield*this.forEachAvailabilityInterval(r,((e,r,o)=>{const s=e.getTime(),c=r.getTime(),d=c-s;if(d>=l){if(i){const i=n?e.getTimezoneOffset()-new Date(s+l).getTimezoneOffset():new Date(c-l).getTimezoneOffset()-r.getTimezoneOffset();l-=60*i*1e3}return a=n?s+l:c-l,!1}if(l-=d,i){const n=e.getTimezoneOffset()-r.getTimezoneOffset();l-=60*n*1e3}})))===wg.StoppedByIterator?new Date(a):null}return c.accumulateWorkingTime(e,s,n).finalDate}}return __decorate27([qy()],SchedulerProHasAssignmentsMixin2.prototype,"effectiveCalendarsCombination",void 0),__decorate27([qy()],SchedulerProHasAssignmentsMixin2.prototype,"assignmentsByCalendar",void 0),__decorate27([model_field({type:"boolean"})],SchedulerProHasAssignmentsMixin2.prototype,"ignoreResourceCalendar",void 0),__decorate27([calculate("effectiveCalendarsCombination")],SchedulerProHasAssignmentsMixin2.prototype,"calculateEffectiveCalendarsCombination",null),__decorate27([calculate("assignmentsByCalendar")],SchedulerProHasAssignmentsMixin2.prototype,"calculateAssignmentsByCalendar",null),SchedulerProHasAssignmentsMixin2}))){},__decorate28=function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);return s>3&&a&&Object.defineProperty(n,r,a),a},jC=Symbol("MasterStartDateVar"),zC=Symbol("MasterEndDateVar"),BC=Symbol("MasterDurationVar"),HC=Symbol("MasterTotalDurationVar"),VC=Symbol("StartOffsetVar"),NC=Symbol("EndOffsetVar"),qC=uv.new({output:Zw,inputs:new Set([VC,NC])}),WC=uv.new({output:Kw,inputs:new Set([VC,jC])}),UC=uv.new({output:Xw,inputs:new Set([NC,jC])}),GC=uv.new({output:VC,inputs:new Set([Kw,jC])}),YC=uv.new({output:NC,inputs:new Set([Xw,jC])}),KC=uv.new({output:VC,inputs:new Set([NC,Zw])}),XC=uv.new({output:NC,inputs:new Set([VC,Zw])}),ZC=uv.new({output:NC,inputs:new Set([VC,HC])}),QC=uv.new({output:NC,inputs:new Set([VC,BC])}),JC=uv.new({output:Zw,inputs:new Set([VC,zC])}),eS=pv.new({variables:new Set([Kw,Xw,Zw,jC,zC,BC,HC,VC,NC]),formulas:new Set([qC,WC,UC,KC,GC,XC,ZC,QC,YC,JC])}),tS=mv.new({description:eS,defaultResolutionFormulas:new Set([UC,YC,XC])}),nS=class extends(Ly.mix(fy)){equality(e,n){const r=e.resolution,i=n.resolution;return r.get(Kw)===i.get(Kw)&&r.get(Xw)===i.get(Xw)&&r.get(Zw)===i.get(Zw)&&r.get(jC)===i.get(jC)&&r.get(zC)===i.get(zC)&&r.get(BC)===i.get(BC)&&r.get(HC)===i.get(HC)&&r.get(VC)===i.get(VC)&&r.get(NC)===i.get(NC)}},rS=class extends(mg([lC],(e=>{class SchedulerProEventSegment2 extends e{get isEventSegment(){return!0}get stm(){var e;return null==(e=this.event)?void 0:e.stm}set stm(e){}writeStartDate(e,n,r,i,o=!0){const s=this.event,a=this.getProject();if(!s||this.previousSegment||!n.baseRevision.hasIdentifier(e)||a&&a.getStm().isRestoring?e.constructor.prototype.write.call(this,e,n,r,i,o):s.$.startDate.constructor.prototype.write.call(this,s.$.startDate,n,null,i,o),o&&this.nextSegment){const e=this.endOffset-this.nextSegment.startOffset;if(e>0){let n=this;for(;n=n.nextSegment;)n.startOffset+=e,n.endOffset+=e}}}shouldRecordFieldChange(e,n,r){return"startOffset"===e||"endOffset"===e||super.shouldRecordFieldChange(e,n,r)}*calculateStartOffset(){const e=(yield this.$.dispatcher).resolution.get(VC);if(!this.event)return yield Cv;let n;if(e===dv)n=yield Cv;else if(e===KC.formulaId)n=yield*this.calculateStartOffsetByEndOffsetAndDuration();else if(e===GC.formulaId){const e=yield ProposedOrPreviousValueOf(this.event.$.startDate),r=yield ProposedOrPreviousValueOf(this.$.startDate);n=yield*this.event.calculateProjectedDuration(e,r,Zh.Millisecond,{ignoreSegments:!0})}return n}*calculateEndOffset(){const e=(yield this.$.dispatcher).resolution.get(NC);if(!this.event)return yield Cv;let n;if(e===dv)n=yield Cv;else if(e===XC.formulaId)n=yield*this.calculateEndOffsetByStartOffsetAndDuration();else if(e===YC.formulaId){const e=yield ProposedOrPreviousValueOf(this.event.$.startDate),r=yield ProposedOrPreviousValueOf(this.$.endDate);n=yield*this.event.calculateProjectedDuration(e,r,Zh.Millisecond,{ignoreSegments:!0})}else e===QC.formulaId?n=yield*this.calculateEndOffsetByMasterDurationAndStartOffset():e===ZC.formulaId&&(n=yield*this.calculateEndOffsetByMasterTotalDurationAndStartOffset());return n}*calculateStartDate(){const e=(yield this.$.dispatcher).resolution.get(Kw);if(!this.event)return yield Cv;let n;return n=e===WC.formulaId?yield*this.calculateStartDateByMasterStartAndStartOffset():yield*super.calculateStartDate(),n}*calculateEndDate(){const e=(yield this.$.dispatcher).resolution.get(Xw);if(!this.event)return yield Cv;let n;return n=e===UC.formulaId?yield*this.calculateEndDateByMasterStartAndEndOffset():yield*super.calculateEndDate(),n}*calculateDuration(){const e=(yield this.$.dispatcher).resolution.get(Zw);if(!this.event)return yield Cv;let n;return n=e===qC.formulaId||e===JC.formulaId?yield*this.calculateDurationByOffsets():yield*super.calculateDuration(),n}buildProposedDispatcher(e,n,r){const i=super.buildProposedDispatcher(e,n,r);return i.addPreviousValueFlag(jC),i.addPreviousValueFlag(VC),i.addPreviousValueFlag(NC),i}*prepareDispatcher(e){const n=yield*super.prepareDispatcher(e);if(!this.event)return n;if(null!=e(PreviousValueOf(this.event.$.startDate))&&n.addPreviousValueFlag(jC),e(HasProposedValue(this.event.$.startDate))&&n.addProposedValueFlag(jC),!e(HasProposedValue(this.event.$.segments))){if(n.collectInfo(e,this.event.$.duration,BC),e(HasProposedValue(this.event.$.endDate))){const r=e(ProposedArgumentsOf(this.event.$.endDate));(null==r?void 0:r[0])||n.addProposedValueFlag(zC)}const r=e(this.event.$.dispatcher);r.resolution.get(Kw)===dv&&r.resolution.get(Xw)===dv&&n.addProposedValueFlag(HC)}return n.collectInfo(e,this.$.startOffset,VC),n.collectInfo(e,this.$.endOffset,NC),n}cycleResolutionContext(e){return tS}*calculateEndOffsetByMasterDurationAndStartOffset(){const e=yield ProposedOrPreviousValueOf(this.event.$.duration),n=yield this.event.$.durationUnit,r=yield this.$.startOffset,i=this.nextSegment;let o,s=yield*this.getProject().$convertDuration(e,n,Zh.Millisecond);const a=[];let l=this;for(;l=l.previousSegment;)a.push(l);for(let e=a.length-1;e>=0;e--){const n=a[e],r=yield ProposedOrPreviousValueOf(n.$.startOffset);s-=(yield ProposedOrPreviousValueOf(n.$.endOffset))-r}return o=s>0?i?r+Math.min(s,(yield ProposedOrPreviousValueOf(this.$.endOffset))-r):r+s:r,o}*calculateEndOffsetByMasterTotalDurationAndStartOffset(){const e=yield ProposedOrPreviousValueOf(this.event.$.startDate),n=yield ProposedOrPreviousValueOf(this.event.$.endDate),r=yield*this.event.calculateProjectedDuration(e,n,Zh.Millisecond,{ignoreSegments:!0}),i=yield ProposedOrPreviousValueOf(this.$.startOffset);let o=yield ProposedOrPreviousValueOf(this.$.endOffset),s=this.nextSegment;return i<=r?o<=r?!s||(yield ProposedOrPreviousValueOf(s.$.startOffset))>=r?r:o:r:yield this.$.startOffset}*calculateStartOffsetByEndOffsetAndDuration(){const e=yield this.$.duration,n=yield this.$.durationUnit;return(yield this.$.endOffset)-(yield*this.event.getProject().$convertDuration(e,n,Zh.Millisecond))}*calculateEndOffsetByStartOffsetAndDuration(){const e=yield this.$.duration,n=yield this.$.durationUnit;return(yield this.$.startOffset)+(yield*this.event.getProject().$convertDuration(e,n,Zh.Millisecond))}*calculateEndDateByMasterStartAndEndOffset(){const e=yield this.event.$.startDate,n=yield this.$.endOffset,r=yield*this.event.calculateProjectedXDateWithDuration(e,!0,n,Zh.Millisecond,{ignoreSegments:!0});return(yield this.$.manuallyScheduled)&&!this.getProject().skipNonWorkingTimeWhenSchedulingManually?r:yield*this.event.skipNonWorkingTime(r,!1)}*calculateStartDateByMasterStartAndStartOffset(){const e=yield this.event.$.startDate,n=yield this.$.startOffset,r=yield*this.event.calculateProjectedXDateWithDuration(e,!0,n,Zh.Millisecond,{ignoreSegments:!0});return(yield this.$.manuallyScheduled)&&!this.getProject().skipNonWorkingTimeWhenSchedulingManually?r:yield*this.event.skipNonWorkingTime(r)}*calculateDurationByOffsets(){const e=yield this.$.startOffset,n=yield this.$.endOffset,r=yield this.$.durationUnit;return yield*this.getProject().$convertDuration(n-e,Zh.Millisecond,r)}*calculatePercentDone(){if(!this.event)return yield Cv;const e=yield this.event.$.segments;if(e){const n=yield this.event.$.percentDone,r=yield this.event.$.duration,i=yield this.event.$.durationUnit;let o=.01*n*(yield*this.getProject().$convertDuration(r,i,Zh.Millisecond));for(const n of e){const e=n.startOffset,r=n.endOffset-e;if(n===this)return o>=r?100:o>0?100*o/r:0;o-=r}}return 0}*calculateMinPercent(){const e=this.previousSegment;return this.event?e?yield e.$.endPercentDone:0:yield Cv}*calculateMaxPercent(){if(!this.event)return yield Cv;const e=yield this.event.$.duration,n=yield this.event.$.durationUnit;let r=yield*this.getProject().$convertDuration(e,n,Zh.Millisecond);const i=yield this.$.startOffset,o=yield this.$.endOffset;return(yield this.$.startPercentDone)+100*(o-i)/r}*calculateProjectedXDateWithDuration(e,n,r,i){return i||(i=yield this.$.durationUnit),yield*this.event.calculateProjectedXDateWithDuration(e,n,r,i,{ignoreSegments:!0})}*calculateProjectedDuration(e,n,r){return r||(r=yield this.$.durationUnit),yield*this.event.calculateProjectedDuration(e,n,r,{ignoreSegments:!0})}*calculateManuallyScheduled(){return this.event?yield this.event.$.manuallyScheduled:yield Cv}}return __decorate28([qy({identifierCls:nS})],SchedulerProEventSegment2.prototype,"dispatcher",void 0),__decorate28([model_field({persist:!1})],SchedulerProEventSegment2.prototype,"startOffset",void 0),__decorate28([model_field({persist:!1})],SchedulerProEventSegment2.prototype,"endOffset",void 0),__decorate28([qy()],SchedulerProEventSegment2.prototype,"percentDone",void 0),__decorate28([qy()],SchedulerProEventSegment2.prototype,"startPercentDone",void 0),__decorate28([qy()],SchedulerProEventSegment2.prototype,"endPercentDone",void 0),__decorate28([write("startDate")],SchedulerProEventSegment2.prototype,"writeStartDate",null),__decorate28([calculate("startOffset")],SchedulerProEventSegment2.prototype,"calculateStartOffset",null),__decorate28([calculate("endOffset")],SchedulerProEventSegment2.prototype,"calculateEndOffset",null),__decorate28([calculate("percentDone")],SchedulerProEventSegment2.prototype,"calculatePercentDone",null),__decorate28([calculate("startPercentDone")],SchedulerProEventSegment2.prototype,"calculateMinPercent",null),__decorate28([calculate("endPercentDone")],SchedulerProEventSegment2.prototype,"calculateMaxPercent",null),__decorate28([calculate("manuallyScheduled")],SchedulerProEventSegment2.prototype,"calculateManuallyScheduled",null),SchedulerProEventSegment2}))){},__decorate29=function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);return s>3&&a&&Object.defineProperty(n,r,a),a},iS=Symbol("SegmentsVar"),segmentsConverter=(e,n,r)=>r.processSegmentsValue(e),oS=uv.new({output:Kw,inputs:new Set([Xw,iS])}),sS=uv.new({output:Xw,inputs:new Set([Kw,iS])}),aS=(uv.new({output:Zw,inputs:new Set([Kw,Xw,iS])}),pv.new({variables:new Set([Kw,Xw,Zw,iS]),formulas:new Set([sS,oS,Qw,Jw,eC])})),lS=mv.new({description:aS,defaultResolutionFormulas:new Set([Jw,sS])}),cS=mv.new({description:aS,defaultResolutionFormulas:new Set([Qw,oS])}),dS=class extends(Ly.mix(fy)){equality(e,n){const r=e.resolution,i=n.resolution;return r.get(Kw)===i.get(Kw)&&r.get(Xw)===i.get(Xw)&&r.get(Zw)===i.get(Zw)&&r.get(iS)===i.get(iS)}};function compareSegmentsArray(e,n){return!e&&!n||!this._skipSegmentsIsEqual&&(!(!e&&n||e&&!n)&&(e.length===n.length&&e.every(((e,r)=>compareSegments(e,n[r])))))}var compareSegments=(e,n)=>{if(e===n)return!0;const r=(e.isModel?e:n).fieldMap,i=e.startDate instanceof Date?e.startDate.getTime():r.startDate.convert(e.startDate).getTime(),o=n.startDate instanceof Date?n.startDate.getTime():r.startDate.convert(n.startDate).getTime(),s=e.endDate instanceof Date?e.endDate.getTime():r.endDate.convert(e.endDate).getTime(),a=n.endDate instanceof Date?n.endDate.getTime():r.endDate.convert(n.endDate).getTime();return i===o&&s===a},uS=class extends(mg([$C,_C],(e=>{class SplitEventMixin2 extends e{constructor(){super(...arguments),this._segmentGeneration={}}static get $name(){return"SplitEventMixin"}construct(){this.segmentModelClass=this.getDefaultSegmentModelClass(),super.construct(...arguments)}get rawModifications(){let e=super.rawModifications;if(this.segments&&(!e||!("segments"in e)))for(const n of this.segments)if(n.rawModifications){e=e||{},e.segments=this.getFieldPersistentValue("segments");break}return e}clearChanges(e,n,r){for(const r of this.segments||[])r.clearChanges(e,n,null);super.clearChanges(e,n,r)}getDefaultSegmentModelClass(){return rS}*prepareDispatcher(e){const n=yield*super.prepareDispatcher(e);return(yield*this.hasSegmentChangesProposed())&&n.addProposedValueFlag(iS),n}cycleResolutionContext(e){const n=e(this.$.direction);return n===ug.Forward||n===ug.None?lS:cS}*hasSegmentChangesProposed(){const e=yield ProposedValueOf(this.$.segments);let n=!1;(yield HasProposedValue(this.$.segments))&&(n=Boolean(e));const r=yield ProposedOrPreviousValueOf(this.$.segments);if(!r)return!1;for(const e of r){const r=yield HasProposedValue(e.$.startDate),i=yield HasProposedValue(e.$.endDate),o=yield HasProposedValue(e.$.duration);(r||i||o)&&(n=!0)}return n}writeSegments(e,n,r,i){var o;const s=null==(o=n.getLatestEntryFor(e))?void 0:o.getValue(),a=s!==cy&&null!=s?s:[],l=new Set(a),c=null!=i?i:[],d=new Set(c);this.project.ion({commitFinalized:()=>h.removeEntities(a.filter((e=>!d.has(e)))),once:!0}),e.constructor.prototype.write.call(this,e,n,r,i),this.$.isSegmented.write.call(this,this.$.isSegmented,n,null,Boolean(null==i?void 0:i.length));const u=this.project,h=u.replica;for(const e of c)l.has(e)||e.graph===h||(e.setProject(u),h.addEntity(e))}*doWriteSegments(e,n){if(n=n||[],e.length<=1){const r=e.length?yield*this.getProject().$convertDuration(e[0].endOffset-e[0].startOffset,Zh.Millisecond,yield this.$.durationUnit):0;n.push({identifier:this.$.duration,proposedArgs:[r,null]}),e=null}n.push({identifier:this.$.segments,proposedArgs:[e]}),yield WriteSeveral(n)}*calculateSegments(){yield this.$.dispatcher;const{graph:e,project:n}=this,r=yield PreviousValueOf(this.$.segments);let i=yield Cv;const o=[];let s=!1;if(i){const n=new Set;let r=null,a=!1;const{baseRevision:l}=e.$activeTransaction;for(const e of i){const i=yield e.$.startOffset,s=yield e.$.endOffset,c=l.hasIdentifier(e.$.startDate)&&(yield ProposedArgumentsOf(e.$.startDate)),d=l.hasIdentifier(e.$.endDate)&&(yield ProposedArgumentsOf(e.$.endDate));if(a=a||(null==c?void 0:c[0])||(null==d?void 0:d[0]),i===s)o.push(e);else if(r&&i<=r.endOffset){const n=r.endOffset;if(o.push(e),r.graph){o.push(r);const e=r.startOffset,l=a?s+n-i:Math.max(s,n),c=r.cls;r=this.segmentModelClass.new({event:this,cls:c,startOffset:e,endOffset:l})}else r.endOffset=a?s+r.endOffset-i:Math.max(s,r.endOffset)}else r&&n.add(r),r=e}r&&n.add(r),1===n.size&&o.push(...n),s=o.length>0,s&&(i=Array.from(n)),i.reduce(((e,n,r)=>(e&&(e.nextSegment=n),n.previousSegment=e,n.segmentIndex=r,n)),null),i.length&&(i[i.length-1].nextSegment=null)}else r&&o.push(...r);return o.length&&(o.forEach((e=>e.event=null)),n.ion({commitFinalized:()=>e.removeEntities(o),once:!0})),s&&(yield*this.doWriteSegments(i)),i=(null==i?void 0:i.length)>1?i:null,i}*calculateAdjustedSegments(){yield this.$.dispatcher;let e=yield this.$.segments;yield this.$.startDate;const n=yield this.$.endDate;yield this.$.duration;let r=yield Cv;if(e){const r=this.project,i=this.graph,o=[],s=[];let a=-1;for(let i=e.length-1;i>=0;i--){const l=e[i],c=yield l.$.startDate,d=yield l.$.endDate;if(!(c>n)){if(d.getTime()!==n.getTime()){const e=l.endOffset+(n.getTime()-d.getTime())-l.startOffset,i=yield*r.$convertDuration(e,Zh.Millisecond,yield l.$.durationUnit);s.push({identifier:l.$.duration,proposedArgs:[i,null]},{identifier:l.$.endDate,proposedArgs:[n,!1]},{identifier:l.$.endOffset,proposedArgs:[l.endOffset+(n.getTime()-d.getTime())]})}break}o.push(l),a=i}let l=!1;a>-1&&(l=!0,e.splice(a),e.length&&(e[e.length-1].nextSegment=null),r.ion({commitFinalized:()=>i.removeEntities(o),once:!0}));let c="";e&&(c=this.getSegmentsSnapshot(e)),c!==this._lastSegmentsSnapshot&&(l=!0,e=e?e.slice():e,this._lastSegmentsSnapshot=c),l&&(yield*this.doWriteSegments(e,s))}return r}getSegmentsSnapshot(e){return null==(e=e||this.segments)?void 0:e.map((e=>{var n,r;return e.startOffset+"-"+(null==(n=e.startDate)?void 0:n.getTime())+"-"+e.endOffset+"-"+(null==(r=e.endDate)?void 0:r.getTime())})).join(";")}processSegmentsValue(e){let n=e;if(e)for(let n=0;n<e.length;n++){const r=e[n],i=r.isModel?r:this.segmentModelClass.new(r);i.event||(i.event=this),e[n]=i}return n}*calculateStartDate(){let e;return e=(yield this.$.dispatcher).resolution.get(Kw)===oS.formulaId?yield*this.calculateStartDateBySegments():yield*super.calculateStartDate(),e}*calculateStartDateBySegments(){yield this.$.dispatcher;const e=yield this.$.segments,n=yield this.$.endDate;let r;if(e){const i=e[e.length-1],o=yield i.$.endOffset,s=yield*this.calculateProjectedXDateWithDuration(n,!1,o,Zh.Millisecond,{ignoreSegments:!0});r=(yield this.$.manuallyScheduled)&&!this.getProject().skipNonWorkingTimeWhenSchedulingManually?s:yield*this.skipNonWorkingTime(s,!0)}return r}*calculateEndDateBySegments(){yield this.$.dispatcher;const e=yield this.$.segments,n=yield this.$.startDate;let r;if(e){const i=e[e.length-1],o=yield i.$.endOffset,s=yield*this.calculateProjectedXDateWithDuration(n,!0,o,Zh.Millisecond,{ignoreSegments:!0});r=(yield this.$.manuallyScheduled)&&!this.getProject().skipNonWorkingTimeWhenSchedulingManually?s:yield*this.skipNonWorkingTime(s,!1)}return r}*calculateEndDate(){let e;return e=(yield this.$.dispatcher).resolution.get(Xw)===sS.formulaId?yield*this.calculateEndDateBySegments():yield*super.calculateEndDate(),e}*calculateDurationProposed(){let e;return e=(yield*this.hasSegmentChangesProposed())?yield*this.calculateDurationBySegments():yield*super.calculateDurationProposed(),e}*skipNonWorkingTime(e,n=!0,r){return e?(r=Object.assign({ignoreSegments:!0},r),yield*super.skipNonWorkingTime(e,n,r)):null}*calculateDurationBySegments(){let e;yield this.$.dispatcher;const n=yield this.$.durationUnit,r=yield this.$.segments;if(r){let i=0;for(const e of r)i+=e.endOffset-e.startOffset;e=yield*this.getProject().$convertDuration(i,Zh.Millisecond,n)}return e}*forEachAvailabilityInterval(e,n){const r=yield this.$.effectiveCalendar,i=yield this.$.assignmentsByCalendar,o=yield this.$.effectiveCalendarsCombination,s=!1!==e.isForward,a=(yield this.$.ignoreResourceCalendar)||e.ignoreResourceCalendar||!i.size,l=this.getProject().maxCalendarRange;let c,d,u,h,g,p=e.ignoreSegments,m=1;p||(h=yield this.$.segments,p=p||!h,p||(h=h.slice(),s?(c=h.shift(),d=0,m=1,g=c.nextSegment?c.endOffset:xg.getTime()):(c=h.pop(),d=c.endOffset,m=-1,g=c.endOffset),u=g-c.startOffset));const f=yield this.$.manuallyScheduled,b=this.getProject();return o.forEachAvailabilityInterval(Object.assign({maxRange:l},e),((e,o,l)=>{const v=l.getCalendarsWorkStatus(),y=l.getCalendarsWorking();if(v.get(r)&&(a||y.some((e=>i.has(e)))||f&&!b.skipNonWorkingTimeInDurationWhenSchedulingManually)){if(p)return n(e,o,l);{const r=e.getTime();let i,a,p=o.getTime()-e.getTime();if(this.getProject().adjustDurationToDST){p+=60*(e.getTimezoneOffset()-o.getTimezoneOffset())*1e3}for(s?(i=d,a=d+p):(i=d-p,a=d);c&&i<=g&&a>c.startOffset;){const e=Math.max(i,c.startOffset),o=Math.min(a,g),d=new Date(r+e-i),p=new Date(r+o-i);if(!1===n(d,p,l))return!1;if(u-=p.getTime()-d.getTime(),u)break;c=s?h.shift():h.pop(),c&&(g=!s||c.nextSegment?c.endOffset:xg.getTime(),u=g-c.startOffset)}d+=m*p}}}))}*useEventAvailabilityIterator(){if(yield this.$.isSegmented)return!0;return!(yield this.$.manuallyScheduled)}getSegmentByDate(e,n){if(n=n||this.getSegments()){return n[this.getSegmentIndexByDate(e,n)]}}getSegmentIndexByDate(e,n){return(n=n||this.getSegments())?n.findIndex((n=>e>=n.startDate&&e<n.endDate)):-1}get firstSegment(){const e=this.getSegments();return e?e[0]:null}get lastSegment(){const e=this.getSegments();return e?e[e.length-1]:null}getSegment(e){const n=this.getSegments();return null==n?void 0:n[e]}async splitToSegments(e,n=1,r){var i;const o=this.getProject();await o.commitAsync();const s=this;if(!e||s.isHasSubEventsMixin&&(null==(i=s.childEvents)?void 0:i.size))return;const a=s.duration,l=s.durationUnit,c=s.startDate,d=s.endDate;if(r=r?Ct.normalizeUnit(r):l,!c||!d||c>=e||e>=d||!a)return;const u=s.isSegmented;let h,g,p=s.segments||[];if(u&&(g=s.getSegmentIndexByDate(e,p),h=p[g],!h))return;const m=h||s,f=h?m.startDate:c,b=m.duration,v=m.durationUnit,y=s.run("calculateProjectedDuration",f,e,v,{ignoreSegments:!0}),w=b-y,C=o.run("$convertDuration",n,r,Zh.Millisecond),S=C+s.run("calculateProjectedDuration",c,e,Zh.Millisecond,{ignoreSegments:!0});if(h){h.duration=y;const e=this.segmentModelClass.new({duration:w,durationUnit:v,startOffset:S});p=p.slice(0),p.splice(g+1,0,e),s.segments=p,s.duration=a;for(let e=g+2,n=p.length;e<n;e++){const n=p[e];n&&(n.startOffset+=C,n.endOffset+=C)}}else{const e=this.segmentModelClass.new({duration:y,durationUnit:v,startOffset:0}),n=this.segmentModelClass.new({duration:a-y,durationUnit:v,startOffset:S});s.duration=a,s.segments=[e,n]}return o.commitAsync()}async mergeSegments(e,n){if(this.isSegmented){if(e=e||this.firstSegment,n=n||this.lastSegment,e.startOffset>n.startOffset){let r=n;n=e,e=r}return e.endDate=n.startDate,this.getProject().commitAsync()}}storeFieldChange(e,n){if("segments"===e&&n){const e=[];for(const r of n){const n=r.toJSON();(!this._segmentGeneration[r.internalId]||r.generation>this._segmentGeneration[r.internalId])&&Object.assign(n,r.meta.modified),e.push(n),this._segmentGeneration[r.internalId]=r.generation}n=e}super.storeFieldChange(e,n)}leaveProject(){const e=this.segments;e&&this.graph.removeEntities(e),super.leaveProject()}endBatch(...e){this.fieldMap.segments._skipSegmentsIsEqual++,super.endBatch(...e),this.fieldMap.segments._skipSegmentsIsEqual--}copy(e=null,n=null){const r=super.copy(e,n);return r.data.segments=void 0,r.segments&&(r.segments=r.segments.map((e=>Object.assign(e.copy(),{event:r})))),r}}return __decorate29([qy({identifierCls:dS})],SplitEventMixin2.prototype,"dispatcher",void 0),__decorate29([model_field({type:"array",isEqual:compareSegmentsArray,convert:segmentsConverter,_skipSegmentsIsEqual:0})],SplitEventMixin2.prototype,"segments",void 0),__decorate29([qy()],SplitEventMixin2.prototype,"adjustedSegments",void 0),__decorate29([qy()],SplitEventMixin2.prototype,"isSegmented",void 0),__decorate29([write("segments")],SplitEventMixin2.prototype,"writeSegments",null),__decorate29([calculate("segments")],SplitEventMixin2.prototype,"calculateSegments",null),__decorate29([calculate("adjustedSegments")],SplitEventMixin2.prototype,"calculateAdjustedSegments",null),SplitEventMixin2}))){},__decorate30=function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);return s>3&&a&&Object.defineProperty(n,r,a),a},hS=class extends(mg([$C,wC],(e=>{e.prototype;class HasEffortMixin2 extends e{getEffort(e){const n=this.effort;return e?this.getProject().convertDuration(n,this.effortUnit,e):n}writeEffort(e,n,r,i,o){i<0&&(i=0),(n.baseRevision.hasIdentifier(e)||null!=i)&&(null!=o&&o!==this.effortUnit&&this.$.effortUnit.write.call(this,this.$.effortUnit,n,null,o),e.constructor.prototype.write(e,n,r,i))}setEffortUnit(e){throw new Error("Use `setEffort` instead")}*shouldRollupChildEffort(e){return!0}*calculateTotalChildrenEffort(){const e=yield this.$.childEvents,n=this.getProject();let r=0;for(const i of e){if(!(yield*this.shouldRollupChildEffort(i)))continue;const e=yield i.$.effortUnit;r+=(yield*n.$convertDuration(yield i.$.effort,e,Zh.Millisecond))}return yield*n.$convertDuration(r,Zh.Millisecond,yield this.$.effortUnit)}*calculateEffort(){if((yield this.$.childEvents).size>0)return yield*this.calculateTotalChildrenEffort();{const e=yield Cv;return void 0!==e?e:yield*this.calculateEffortPure()}}*calculateEffortPure(){return(yield this.$.childEvents).size>0?yield*this.calculateTotalChildrenEffort():yield*this.calculateProjectedEffort(yield this.$.startDate,yield this.$.endDate)}*calculateEffortProposed(){return yield Cv}*calculateAssignmentUnits(e){return yield*this.calculateAssignmentUnitsProposed(e)}*calculateAssignmentUnitsPure(e){return yield*this.calculateUnitsByStartEndAndEffort(e)}*calculateAssignmentUnitsProposed(e){return yield Cv}*getBaseOptionsForEffortCalculations(){return{ignoreResourceCalendar:!1}}*calculateProjectedEffort(e,n,r){if(null==e||null==n||e>n)return null;r||(r=yield this.$.assignmentsByCalendar);const i=new Map;for(const[e,n]of r){let r=0;for(const e of n)r+=(yield e.$.units);i.set(e,r)}let o=0;const s=Object.assign(yield*this.getBaseOptionsForEffortCalculations(),{startDate:e,endDate:n});return 0===i.size&&(i.set(yield this.$.effectiveCalendar,100),s.ignoreResourceCalendar=!0),yield*this.forEachAvailabilityInterval(s,((e,n,r)=>{const s=r.getCalendarsWorking(),a=e.getTime(),l=n.getTime()-a;let c=0;for(const e of s)c+=i.get(e)||0;o+=c*l*.01})),yield*this.getProject().$convertDuration(o,Zh.Millisecond,yield this.$.effortUnit)}*calculateUnitsByStartEndAndEffort(e){const n=yield this.$.effort,r=yield this.$.effortUnit,i=yield*this.getProject().$convertDuration(n,r,Zh.Millisecond);let o=0;const s=Object.assign(yield*this.getBaseOptionsForEffortCalculations(),{startDate:yield this.$.startDate,endDate:yield this.$.endDate}),a=yield this.$.assignmentsByCalendar;return yield*this.forEachAvailabilityInterval(s,((e,n,r)=>{const i=r.getCalendarsWorking(),s=e.getTime(),l=n.getTime()-s;for(const e of i)o+=(a.has(e)?a.get(e).length:0)*l})),o?100*i/o:100}*calculateProjectedXDateByEffort(e,n=!0,r,i){r=void 0!==r?r:yield this.$.effort,i=void 0!==i?i:yield this.$.effortUnit;const o=yield*this.getProject().$convertDuration(r,i,Zh.Millisecond);if(null==e||null==r)return null;let s=e.getTime(),a=o;if(0===a)return new Date(s);const l=yield this.$.effectiveCalendar,c=yield this.$.assignmentsByCalendar,d=new Map;let u=!1;for(const[e,n]of c){let r=0;for(const e of n)r+=(yield e.$.units);d.set(e,r),r>0&&(u=!0)}if(u&&(yield*this.useEventAvailabilityIterator())){const r=Object.assign(yield*this.getBaseOptionsForDurationCalculations(),n?{startDate:e,isForward:n}:{endDate:e,isForward:n});return yield*this.forEachAvailabilityInterval(r,((e,r,i)=>{const o=i.getCalendarsWorking(),l=e.getTime(),c=r.getTime(),u=c-l;let h=0;for(const e of o)h+=d.get(e)||0;const g=h*u*.01;if(g>=a)return s=n?l+a/(.01*h):c-a/(.01*h),!1;a-=g})),new Date(s)}return l.accumulateWorkingTime(e,o,n).finalDate}}return __decorate30([model_field({type:"number"})],HasEffortMixin2.prototype,"effort",void 0),__decorate30([model_field({type:"string",defaultValue:Zh.Hour},{converter:e=>Ct.normalizeUnit(e)||Zh.Hour})],HasEffortMixin2.prototype,"effortUnit",void 0),__decorate30([write("effort")],HasEffortMixin2.prototype,"writeEffort",null),__decorate30([calculate("effort")],HasEffortMixin2.prototype,"calculateEffort",null),HasEffortMixin2}))){},gS=Symbol("EffortVar"),pS=Symbol("UnitsVar"),mS=uv.new({output:gS,inputs:new Set([Kw,Xw,pS])}),fS=uv.new({output:pS,inputs:new Set([Kw,Xw,gS])}),bS=uv.new({output:Xw,inputs:new Set([Kw,gS,pS])}),vS=uv.new({output:Kw,inputs:new Set([Xw,gS,pS])}),yS=class extends iC{},wS=class extends oC{equality(e,n){const r=e.resolution,i=n.resolution;return(e!==cy||n===cy)&&(e===cy||n!==cy)&&r.get(gS)===i.get(gS)&&r.get(pS)===i.get(pS)&&super.equality(e,n)}},__decorate31=function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);return s>3&&a&&Object.defineProperty(n,r,a),a},CS=class extends(mg([hS],(e=>{const n=e.prototype;class HasSchedulingModeMixin2 extends e{*calculateSchedulingMode(){return(yield Cv)||tg.Normal}*effectiveSchedulingMode(){return(yield this.$.assignmentsByCalendar).size>0?yield this.$.schedulingMode:tg.Normal}effectiveSchedulingModeSync(e){return e(this.$.assignmentsByCalendar).size>0?e(this.$.schedulingMode):tg.Normal}*prepareDispatcher(e){if((yield*this.effectiveSchedulingMode())!==tg.Normal){const r=yield*n.prepareDispatcher.call(this,e);return r.collectInfo(e,this.$.effort,gS),(yield*this.hasProposedValueForUnits())&&r.addProposedValueFlag(pS),r.addPreviousValueFlag(pS),r}return yield*n.prepareDispatcher.call(this,e)}dispatcherClass(e){return this.effectiveSchedulingModeSync(e)!==tg.Normal?yS:n.dispatcherClass.call(this,e)}buildProposedDispatcher(e,r,i){const o=n.buildProposedDispatcher.call(this,e,r,i);return o.addPreviousValueFlag(gS),o.addPreviousValueFlag(pS),o}*calculateAssignmentUnits(e){if((yield*this.effectiveSchedulingMode())!==tg.Normal){const n=(yield this.$.dispatcher).resolution.get(pS);if(n===dv)return yield*this.calculateAssignmentUnitsProposed(e);if(n===fS.formulaId)return yield*this.calculateAssignmentUnitsPure(e);throw new Error("Unknown formula for `units`")}return yield*n.calculateAssignmentUnits.call(this,e)}*calculateEffort(){if((yield*this.effectiveSchedulingMode())!==tg.Normal){const e=(yield this.$.dispatcher).resolution.get(gS);if(e===dv)return yield*this.calculateEffortProposed();if(e===mS.formulaId)return yield*this.calculateEffortPure();throw new Error("Unknown formula for `effort`")}return yield*n.calculateEffort.call(this)}*calculateStartDate(){if((yield*this.effectiveSchedulingMode())!==tg.Normal){return(yield this.$.dispatcher).resolution.get(Kw)===vS.formulaId?yield*this.calculateProjectedXDateByEffort(yield this.$.endDate,!1):yield*n.calculateStartDate.call(this)}return yield*n.calculateStartDate.call(this)}*calculateEndDate(){if((yield*this.effectiveSchedulingMode())!==tg.Normal){return(yield this.$.dispatcher).resolution.get(Xw)===bS.formulaId?yield*this.calculateProjectedXDateByEffort(yield this.$.startDate,!0):yield*n.calculateEndDate.call(this)}return yield*n.calculateEndDate.call(this)}*calculateEffectiveDuration(){const e=yield this.$.dispatcher,r=yield*this.effectiveSchedulingMode(),i=e.resolution.get(Zw);e.resolution.get(gS);let o;if(i===eC.formulaId&&r!=tg.Normal){const r=yield ProposedOrPreviousValueOf(this.$.startDate),i=yield ProposedOrPreviousValueOf(this.$.endDate),s=e.resolution.get(Kw),a=e.resolution.get(Xw);yield this.$.effortDriven;i&&s===vS.formulaId?o=yield*this.calculateProjectedDuration(yield*this.calculateProjectedXDateByEffort(i,!1),i):r&&a===bS.formulaId?o=yield*this.calculateProjectedDuration(r,yield*this.calculateProjectedXDateByEffort(r,!0)):(r&&i||!r&&!i)&&(o=yield*n.calculateEffectiveDuration.call(this))}else o=yield*n.calculateEffectiveDuration.call(this);return o}}return __decorate31([model_field({type:"boolean",defaultValue:!1})],HasSchedulingModeMixin2.prototype,"effortDriven",void 0),__decorate31([model_field({type:"string",defaultValue:tg.Normal},{sync:!0})],HasSchedulingModeMixin2.prototype,"schedulingMode",void 0),__decorate31([qy({identifierCls:wS})],HasSchedulingModeMixin2.prototype,"dispatcher",void 0),__decorate31([calculate("schedulingMode")],HasSchedulingModeMixin2.prototype,"calculateSchedulingMode",null),__decorate31([calculate("effort")],HasSchedulingModeMixin2.prototype,"calculateEffort",null),__decorate31([calculate("startDate")],HasSchedulingModeMixin2.prototype,"calculateStartDate",null),__decorate31([calculate("endDate")],HasSchedulingModeMixin2.prototype,"calculateEndDate",null),HasSchedulingModeMixin2}))){},SS=pv.new({variables:new Set([Kw,Xw,Zw,gS,pS]),formulas:new Set([Qw,Jw,eC,fS,mS])}),xS=pv.new({variables:new Set([Kw,Xw,Zw,gS,pS]),formulas:new Set([Qw,Jw,eC,fS])}),DS=mv.new({description:SS,defaultResolutionFormulas:new Set([Jw,mS])}),ES=mv.new({description:xS,defaultResolutionFormulas:new Set([Jw,fS])}),RS=mv.new({description:SS,defaultResolutionFormulas:new Set([Qw,mS])}),kS=mv.new({description:xS,defaultResolutionFormulas:new Set([Qw,fS])}),TS=class extends(mg([CS],(e=>{const n=e.prototype;return class FixedDurationMixin2 extends e{*prepareDispatcher(e){if((yield*this.effectiveSchedulingMode())===tg.FixedDuration){const r=yield*n.prepareDispatcher.call(this,e),i=yield this.$.effortDriven;return i&&r.addKeepIfPossibleFlag(gS),(yield HasProposedValue(this.$.assigned))&&(i?r.addProposedValueFlag(gS):r.addProposedValueFlag(pS)),r}return yield*n.prepareDispatcher.call(this,e)}cycleResolutionContext(e){if(this.effectiveSchedulingModeSync(e)===tg.FixedDuration){const n=e(this.$.direction),r=e(this.$.effortDriven);return n===ug.Forward||n===ug.None?r?ES:DS:r?kS:RS}return n.cycleResolutionContext.call(this,e)}*getBaseOptionsForDurationCalculations(){return(yield*this.effectiveSchedulingMode())===tg.FixedDuration?{ignoreResourceCalendar:!0}:yield*n.getBaseOptionsForDurationCalculations.call(this)}}}))){},MS=class extends(mg([uC,DC,_C,$C,hS,CS,TS,xC,TC,uS],(e=>class SchedulerProEvent2 extends e{}))){},__decorate32=function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);return s>3&&a&&Object.defineProperty(n,r,a),a},AS=class extends $g{static get fields(){return[{name:"isWorking",type:"boolean",defaultValue:!0}]}},IS=class extends jg{static get defaultConfig(){return{modelClass:AS}}},FS=class extends Aw{get intervalStoreClass(){return IS}};__decorate32([model_field({type:"boolean",defaultValue:!1})],FS.prototype,"unspecifiedTimeIsWorking",void 0);var PS=class extends bg{constructor(){super(...arguments),this.effort=0,this.units=0}},OS=class extends PS{},LS=class extends PS{constructor(){super(...arguments),this.maxEffort=0,this.isOverallocated=!1,this.isUnderallocated=!1,this.assignments=null,this.assignmentIntervals=null}},_S=class extends(Ny.mix(bg)){getDefaultAllocationIntervalClass(){return PS}initialize(e){e=Object.assign({includeInactiveEvents:!1,allocationIntervalClass:this.getDefaultAllocationIntervalClass()},e),super.initialize(e)}};__decorate32([qy()],_S.prototype,"includeInactiveEvents",void 0),__decorate32([qy()],_S.prototype,"allocation",void 0);var $S=class extends _S{enterGraph(e){super.enterGraph(e)}leaveGraph(e){super.leaveGraph(e),this.resource&&this.resource.entities.delete(this)}getDefaultAllocationIntervalClass(){return LS}*shouldIncludeAssignmentInAllocation(e){const n=yield e.$.event,r=yield e.$.units,i=yield this.$.includeInactiveEvents,o=n&&(yield n.$.inactive),s=n&&(yield n.$.startDate),a=n&&(yield n.$.endDate);return Boolean(n&&r&&s&&a&&(i||!o))}*calculateAllocation(){const e=[],n=yield this.ticks,r=yield this.$.resource,i=(yield this.$.includeInactiveEvents,yield r.$.assigned),o=yield r.$.effectiveCalendar,s=new Map,a=[],l=new Map,c=new Map;let d=!1;for(const e of i){if(!(yield*this.shouldIncludeAssignmentInAllocation(e)))continue;yield e.$.units;const n=yield e.$.event,r=yield n.$.ignoreResourceCalendar,i=yield n.$.startDate,o=yield n.$.endDate,u=yield n.$.segments,h=yield n.$.effectiveCalendar;if(d=d||r,u)for(const n of u){const r=yield n.$.startDate,i=yield n.$.endDate;a.push({startDate:r,endDate:i,assignment:e})}else a.push({startDate:i,endDate:o,assignment:e});let g=s.get(h);g||(g=[],s.set(h,g)),l.set(e,new Map),c.set(e,[]),g.push(e)}const u=new FS({intervals:a}),h=[n,u,...s.keys()],g=new Map;let p,m;n.intervalStore.forEach((n=>{const i=LS.new({tick:n,resource:r});g.set(n,i),e.push(i),l.forEach(((e,r)=>{const i=OS.new({tick:n,assignment:r});e.set(n,i),c.get(r).push(i)}))}));const f=e[0].tick.startDate,b=e[e.length-1].tick.endDate,v={startDate:f,endDate:b,calendars:h,includeNonWorkingIntervals:d},y=b.getTime()-f.getTime();return y>r.getProject().maxCalendarRange&&(v.maxRange=y),yield*r.forEachAvailabilityInterval(v,((e,r,i)=>{const s=i.getCalendarsWorkStatus();if(s.get(n)){const a=i.intervalsByCalendar.get(n)[0],c=r.getTime()-e.getTime(),h=g.get(a),f=h.assignments||new Set,b=h.assignmentIntervals||new Map;h.assignments||(p=0,m=0);let v,y=0,w=!1;i.intervalsByCalendar.get(u).forEach((n=>{const i=n.assignment,c=null==i?void 0:i.event;if(c&&s.get(c.effectiveCalendar)&&(!d||c.ignoreResourceCalendar||s.get(o))){const n=Math.max(e.getTime(),i.event.startDate.getTime()),o=Math.min(r.getTime(),i.event.endDate.getTime());w=!0,v=o-n;const s=l.get(i).get(a),c=v*i.units/100;s.effort+=c,s.units=i.units,h.effort+=c,y+=i.units,f.add(i),b.set(i,s)}})),s.get(o)&&(h.maxEffort+=c),y&&(v?(p+=v*y,m+=v,h.units=p/m):p||(h.units=y)),w&&(h.assignments=f,h.assignmentIntervals=b,h.isOverallocated=h.isOverallocated||h.effort>h.maxEffort||h.units>100,h.isUnderallocated=h.effort<h.maxEffort||h.units<100)}})),{total:e,byAssignments:c}}};__decorate32([qy()],$S.prototype,"resource",void 0),__decorate32([calculate("allocation")],$S.prototype,"calculateAllocation",null);var jS=class extends(mg([pC],(e=>{const n=e.prototype;return class SchedulerProResourceMixin2 extends e{constructor(){super(...arguments),this.observers=new Set,this.entities=new Set}addObserver(e){this.graph.addIdentifier(e),this.observers.add(e)}removeObserver(e){this.graph&&this.graph.removeIdentifier(e),this.observers.delete(e)}addEntity(e){this.graph.addEntity(e),this.entities.add(e)}removeEntity(e){this.graph&&this.graph.removeEntity(e),this.entities.delete(e)}leaveGraph(e){const{graph:r}=this;for(const e of this.observers)this.removeObserver(e);for(const e of this.entities)this.removeEntity(e);n.leaveGraph.call(this,e)}*forEachAvailabilityInterval(e,n){const r=this.getProject(),i=yield this.$.effectiveCalendar,o=r.combineCalendars([i].concat(e.calendars||[])),s=r.maxCalendarRange,a=e.includeNonWorkingIntervals;return s&&(e=Object.assign({maxRange:s},e)),o.forEachAvailabilityInterval(e,((e,r,o)=>{const s=o.getCalendarsWorkStatus();if(a||s.get(i))return n(e,r,o)}))}}}))){},__decorate33=function(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);return s>3&&a&&Object.defineProperty(n,r,a),a},zS=class extends(mg([CC,xC,wC],(e=>{const n=e.prototype;class SchedulerProProjectMixin2 extends e{construct(e={}){this.eventSegmentModelClass=e.eventSegmentModelClass||this.getDefaultEventSegmentModelClass(),n.construct.call(this,e),this.resourceAllocationInfoClass||(this.resourceAllocationInfoClass=this.getDefaultResourceAllocationInfoClass())}getDefaultEventStoreClass(){return hC}getDefaultEventSegmentModelClass(){return rS}getDefaultResourceAllocationInfoClass(){return $S}*calculateDirection(){return yield Cv}afterConfigure(){n.afterConfigure.apply(this,arguments),this.dateConstraintIntervalClass=this.dateConstraintIntervalClass||kC,this.dependencyConstraintIntervalClass=this.dependencyConstraintIntervalClass||PC}getType(){return cg.SchedulerPro}getDefaultCycleEffectClass(){return HS}getDefaultEventModelClass(){return MS}getDefaultDependencyModelClass(){return LC}getDefaultAssignmentModelClass(){return OC}getDefaultResourceModelClass(){return jS}async validateDependency(e,n,r,i){let o;i&&(o=Array.isArray(i)?i:[i]);return CI(e.outgoingDeps).some((e=>e.toEvent===n&&!(null==o?void 0:o.includes(e))))?rg.DuplicatingDependency:await this.isDependencyCyclic(e,n,r,o)?rg.CyclicDependency:rg.NoError}async isValidDependency(e,n,r,i){return await this.validateDependency(e,n,r,i)===rg.NoError}getDependencyCycleDetectionIdentifiers(e,n){return[n.$.earlyStartDateConstraintIntervals,n.$.earlyEndDateConstraintIntervals]}async isDependencyCyclic(e,n,r,i){const o=new(0,this.getDependencyStore().modelClass)({fromEvent:e,toEvent:n,type:r}),s=this.replica.branch({autoCommit:!1,onComputationCycle:"throw"});i&&(Array.isArray(i)||(i=[i]),i.forEach((e=>s.removeEntity(e)))),s.addEntity(o),o.project=this;try{return await Promise.all(this.getDependencyCycleDetectionIdentifiers(e,n).map((e=>s.readAsync(e)))),!1}catch(e){if(/cycle/i.test(e))return!0;if(!/conflict/i.test(e))throw e}}async isValidDependencyModel(e,n){return this.isValidDependency(e.fromEvent,e.toEvent,e.type,n)}}return __decorate33([model_field({type:"string",defaultValue:ag.ToEvent})],SchedulerProProjectMixin2.prototype,"dependenciesCalendar",void 0),__decorate33([model_field({type:"boolean",defaultValue:!0})],SchedulerProProjectMixin2.prototype,"autoCalculatePercentDoneForParentTasks",void 0),__decorate33([model_field({type:"boolean",defaultValue:!0})],SchedulerProProjectMixin2.prototype,"addConstraintOnDateSet",void 0),SchedulerProProjectMixin2}))){},BS=class extends(Localizable_default(fw)){static get $name(){return"DeactivateDependencyCycleEffectResolution"}getDescription(){return this.L("L{descriptionTpl}")}resolve(e){e.active=!1}},HS=class extends Vw{getInvalidDependencies(){if(!this._invalidDependencies){const e=this.getDependencies();this._invalidDependencies=e.filter((e=>e.fromEvent===e.toEvent||e.fromEvent.contains(e.toEvent)||e.toEvent.contains(e.fromEvent)))}return this._invalidDependencies}buildInvalidDependencyResolutions(e){return[this.removeDependencyConflictResolutionClass.new(e),this.deactivateDependencyConflictResolutionClass.new(e)]}matchDependencyBySourceAndTargetEvent(e,n,r){return e.active&&super.matchDependencyBySourceAndTargetEvent(e,n,r)}getResolutions(){if(!this._resolutions){const e=this.getInvalidDependencies(),n=[];for(const r of e)n.push(...this.buildInvalidDependencyResolutions({dependency:r}));e.length||n.push(this.deactivateDependencyCycleEffectResolutionClass.new(),...super.getResolutions()),this._resolutions=n}return this._resolutions}};__decorate33([prototypeValue(BS)],HS.prototype,"deactivateDependencyCycleEffectResolutionClass",void 0),__decorate33([prototypeValue(AC)],HS.prototype,"removeDependencyConflictResolutionClass",void 0),__decorate33([prototypeValue(IC)],HS.prototype,"deactivateDependencyConflictResolutionClass",void 0);var VS=class extends Mc{static get $name(){return"ModelCombo"}static get type(){return"modelcombo"}get value(){const e=super.value;return this.store.getById(e)||e}set value(e){super.value=e}};VS.initClass(),VS._$name="ModelCombo";var NS=class extends VS{static get $name(){return"CalendarField"}static get type(){return"calendarfield"}static get defaultConfig(){return{valueField:"id",displayField:"name",editable:!1,store:null,listItemTpl:e=>e.name||this.L("L{Default calendar}"),displayValueRenderer:(e,n)=>{var r,i;return(null==(e=e||(null==(i=null==(r=n.store)?void 0:r.project)?void 0:i.effectiveCalendar))?void 0:e.name)||this.L("L{Default calendar}")}}}get value(){return super.value}set value(e){e&&e.isDefault&&e.isDefault()&&(e=null),super.value=e}};NS.initClass(),NS._$name="CalendarField";var qS=class extends(Hd.mixin(AttachToProjectMixin_default)){static get $name(){return"ResourceCalendarColumn"}static get type(){return"resourceCalendar"}static get defaults(){return{field:"calendar",text:"Calendar",editor:{type:NS.type,clearable:!0,allowInvalid:!1}}}attachToProject(e){e&&(this.defaultCalendar=e.defaultCalendar,this.editor.store=e.calendarManagerStore)}attachToResourceStore(e){super.attachToResourceStore(e),e&&e.ion({name:"resourceStore",update:"onResourceUpdate",thisObj:this})}onResourceUpdate({record:e,changes:n}){var r;const i=n[this.field];if(i){if("string"==typeof i.oldValue&&(null==(r=i.value)?void 0:r.id)===i.oldValue)return;this.refreshCell(e)}}renderer({value:e}){if(e===this.defaultCalendar)return"";if(e&&e.id){const n=this.editor.store.getById(e.id);return n&&n[this.editor.displayField]||""}return""}};qd.registerColumnType(qS),qS._$name="ResourceCalendarColumn";var WS=class extends Hd{static get $name(){return"ScaleColumn"}static get type(){return"scale"}static get isScaleColumn(){return!0}static get fields(){return["scalePoints"]}static get defaults(){return{text:" ",width:40,minWidth:40,cellCls:"b-scale-cell",editor:!1,sortable:!1,groupable:!1,filterable:!1,alwaysClearCell:!1,scalePoints:[{value:4},{value:8,text:8}]}}onDestroy(){this.scaleWidget.destroy()}set width(e){super.width=e,this.scaleWidget.width=e}get width(){return super.width}applyValue(e,n,r){return"scalePoints"===n&&(this.scaleWidget[n]=r),super.applyValue(...arguments)}buildScaleWidget(){const e=this,n=new jd({owner:e.grid,appendTo:e.grid.floatRoot,cls:"b-hide-offscreen",align:"right",scalePoints:e.scalePoints,monitorResize:!1});return Object.defineProperties(n,{width:{get:()=>e.width,set(n){this.element.style.width=`${n}px`,this._width=e.width}},height:{get(){return this._height},set(e){this.element.style.height=`${e}px`,this._height=e}}}),n.width=e.width,n}get scaleWidget(){const e=this;return e._scaleWidget||(e._scaleWidget=e.buildScaleWidget()),e._scaleWidget}renderer({cellElement:e,scaleWidget:n=this.scaleWidget}){n.height=this.grid.rowHeight,n.refresh();const r=n.element.cloneNode(!0);r.removeAttribute("id"),r.classList.remove("b-hide-offscreen"),e.innerHTML="",e.appendChild(r)}};qd.registerColumnType(WS),WS._$name="ScaleColumn";var throwIfNotTheSameStore=(e,n)=>{if(e!==n)throw new Error("Store set is prohibited for Scheduler Pro entity!")},PartOfProject_default2=e=>class PartOfProject extends(e||re){static get $name(){return"PartOfProject"}get taskStore(){return this.eventStore}set taskStore(e){this.eventStore=e}get eventStore(){var e;return null==(e=this.project)?void 0:e.eventStore}get leftProjectEventStore(){const e=this.leftProject;return(null==e?void 0:e.getEventStore())||null}set eventStore(e){throwIfNotTheSameStore(this.eventStore,e)}get dependencyStore(){var e;return null==(e=this.project)?void 0:e.dependencyStore}set dependencyStore(e){throwIfNotTheSameStore(this.dependencyStore,e)}get assignmentStore(){var e;return null==(e=this.project)?void 0:e.assignmentStore}set assignmentStore(e){throwIfNotTheSameStore(this.assignmentStore,e)}get resourceStore(){var e;return null==(e=this.project)?void 0:e.resourceStore}set resourceStore(e){throwIfNotTheSameStore(this.resourceStore,e)}get calendarManagerStore(){var e;return null==(e=this.project)?void 0:e.calendarManagerStore}set calendarManagerStore(e){throwIfNotTheSameStore(this.calendarManagerStore,e)}},US=class extends(PartOfProject_default2(AssignmentModelMixin_default(OC.derive(Ur)))){get event(){const{project:e}=this,n=super.event;return(null==e?void 0:e.isDelayingCalculation)?e.eventStore.getById(n):n}set event(e){super.event=e}get resource(){const{project:e}=this;let n=super.resource;return(null==e?void 0:e.isDelayingCalculation)&&(n=e.resourceStore.getById(n)),null==n?void 0:n.$original}set resource(e){super.resource=e}get eventResourceKey(){return this.isInActiveTransaction?this.buildEventResourceKey(this.event,this.resource):this.buildEventResourceKey(this.$.event.DATA,this.$.resource.DATA)}};__publicField(US,"$name","AssignmentModel"),__publicField(US,"isProAssignmentModel",!0),US._$name="AssignmentModel";var GS=class extends(PartOfProject_default2(AssignmentStoreMixin_default(Uw.derive(Ci)))){static get defaultConfig(){return{modelClass:US}}};__publicField(GS,"$name","AssignmentStore"),GS._$name="AssignmentStore";var YS=class extends(PartOfProject_default2($g.derive(Ur))){static get $name(){return"CalendarIntervalModel"}};YS._$name="CalendarIntervalModel";var KS=class extends(PartOfProject_default2(Aw.derive(Ur))){static get $name(){return"CalendarModel"}static get fields(){return[{name:"expanded",internal:!0,defaultValue:!0}]}toString(){return this.name||""}static get defaultConfig(){return{calendarIntervalModelClass:YS}}};KS._$name="CalendarModel";var XS=class extends(PartOfProject_default2(Gw.derive(Ci))){static get defaultConfig(){return{tree:!0,modelClass:KS,loadPriority:100,syncPriority:100,storeId:"calendars"}}};XS._$name="CalendarManagerStore";var ZS=class extends(PartOfProject_default2(LC.derive(hm))){static get $name(){return"DependencyModel"}static get isProDependencyModel(){return!0}get fromEvent(){var e;return(null==(e=this.project)?void 0:e.isDelayingCalculation)?this.project.eventStore.getById(super.fromEvent):super.fromEvent}set fromEvent(e){super.fromEvent=e}get toEvent(){var e;return(null==(e=this.project)?void 0:e.isDelayingCalculation)?this.project.eventStore.getById(super.toEvent):super.toEvent}set toEvent(e){super.toEvent=e}};ZS._$name="DependencyModel";var QS=class extends(PartOfProject_default2(DependencyStoreMixin_default(Yw.derive(Ci)))){static get defaultConfig(){return{modelClass:ZS}}};QS._$name="DependencyStore";var PercentDoneMixin_default=e=>class PercentDoneMixin extends e{static get $name(){return"PercentDoneMixin"}get isStarted(){return this.percentDone>0}get isCompleted(){return this.percentDone>=100}get isInProgress(){return this.isStarted&&!this.isCompleted}copy(){const e=super.copy(...arguments);return e.percentDone=0,e.clearChanges(),e}get renderedPercentDone(){const e="number"!=typeof this.percentDone||isNaN(this.percentDone)?0:this.percentDone;return this.getFormattedPercentDone(e)}getFormattedPercentDone(e=0){return e<=99?Math.round(e):Math.floor(e)}set renderedPercentDone(e){this.percentDone=e}},JS=class extends(rS.derive(Gp).mixin(EventModelMixin_default,PercentDoneMixin_default)){static get $name(){return"EventSegmentModel"}get task(){return this.event}};JS._$name="EventSegmentModel";var ex=class extends(MS.derive(Gp).mixin(RecurringTimeSpan_default,PartOfProject_default2,EventModelMixin_default,PercentDoneMixin_default)){static get $name(){return"EventModel"}static get fields(){return[{name:"showInTimeline",type:"boolean",defaultValue:!1},"note",{name:"preamble",convert:e=>e?new Gr(e):null},{name:"postamble",convert:e=>e?new Gr(e):null}]}getDefaultSegmentModelClass(){return JS}updateWrapDate(e,n,r=!0){return n=new Gr(n),new Date(e.getTime()+(r?1:-1)*n.milliseconds)}get startDate(){var e;let n;return n=this.isOccurrence?this.get("startDate"):null!=(e=this._startDate)?e:super.startDate,this.allDay&&(n=this.constructor.getAllDayStartDate(n)),n}set startDate(e){const n=this;if(n.generation&&n.isParent&&!n.$ignoreChange){const r=Ct.diff(n.startDate,e);if(r)for(const e of this.children)e.startDate=Ct.add(e.startDate,r)}n.batching?(n._startDate=e,n.set({startDate:e})):(super.startDate=e,n.preamble&&(n.wrapStartDate=null,n.wrapEndDate=null))}get endDate(){var e;let n;return n=this.isOccurrence?this.get("endDate"):null!=(e=this._endDate)?e:super.endDate,this.allDay&&(n=this.constructor.getAllDayEndDate(n)),n}set endDate(e){const n=this;n.batching?(n._endDate=e,n.set({endDate:e})):(super.endDate=e,n.postamble&&(n.wrapStartDate=null,n.wrapEndDate=null))}get fullEffort(){return new Gr({unit:this.effortUnit,magnitude:this.effort})}set fullEffort(e){this.setEffort(e.magnitude,e.unit)}get wrapStartDate(){const e=this,{preamble:n,startDate:r}=e,i=e._wrapStartDate;let o;return i?o=i:n?(o=e.updateWrapDate(r,n,!1),e._wrapStartDate=o):o=r,o}set wrapStartDate(e){this._wrapStartDate=e}get wrapEndDate(){const e=this,{postamble:n,endDate:r}=e,i=e._wrapEndDate;let o;return i?o=i:n?(o=e.updateWrapDate(r,n,!0),e._wrapEndDate=o):o=r,o}set wrapEndDate(e){this._wrapEndDate=e}set(e){const n="object"==typeof e;return("preamble"===e||n&&"preamble"in e)&&(this.wrapStartDate=null),("postamble"===e||n&&"postamble"in e)&&(this.wrapEndDate=null),super.set(...arguments)}get outerStartDate(){return this.wrapStartDate}get outerEndDate(){return this.wrapEndDate}isEditable(e){switch(e){case"earlyStartDate":case"earlyEndDate":return!1;case"percentDone":case"renderedPercentDone":return this.isLeaf;case"endDate":case"duration":case"fullDuration":return this.isLeaf||this.manuallyScheduled}return super.isEditable(e)}get stm(){var e,n;return null!=(n=null==(e=this.recurringEvent)?void 0:e.stm)?n:super.stm}set stm(e){super.stm=e}get assigned(){const{project:e}=this,n=super.assigned;return(null==e?void 0:e.isDelayingCalculation)&&!n?e.assignmentStore.storage.findItem("event",this):n}set assigned(e){super.assigned=e}getCurrentConfig(e){const{segments:n}=this,r=super.getCurrentConfig(e);return r&&n&&(r.segments=n.map((n=>n.getCurrentConfig(e)))),r}};__publicField(ex,"isProEventModel",!0),ex._$name="EventModel";var tx=class extends(PartOfProject_default2(SharedEventStoreMixin_default(RecurringEventsMixin_default(GetEventsMixin_default(DayIndexMixin_default(EventStoreMixin_default(hC.derive(Ci)))))))){static get defaultConfig(){return{modelClass:ex}}};__publicField(tx,"$name","EventStore"),tx._$name="EventStore";var nx=class extends Qi{get type(){return"EventUpdateAction"}construct(e){let{model:n,newData:r,oldData:i}=e;if(r.segments&&i.segments){i={...i},r={...r};const e=i.segments.slice(),n=r.segments.slice();let o=!1;i.segments.forEach(((i,s)=>{const a=r.segments.indexOf(i);a>-1&&(e[s]=n[a]=i,o=!0)})),o&&(i.segments=e,r.segments=n)}return super.construct({model:n,newData:r,oldData:i})}};nx._$name="EventUpdateAction";var rx=class extends(PartOfProject_default2(ResourceModelMixin_default(jS.derive(iu)))){static get $name(){return"ResourceModel"}get assigned(){var e,n;const{project:r}=this;return(null==(e=null==r?void 0:r.assignmentStore.storage._indices)?void 0:e.resource)?null!=(n=r.assignmentStore.storage.findItem("resource",this))?n:new Set:super.assigned}set assigned(e){super.assigned=e}};rx._$name="ResourceModel";var ix=class extends(PartOfProject_default2(ResourceStoreMixin_default(mC.derive(Ci)))){static get defaultConfig(){return{modelClass:rx}}};ix._$name="ResourceStore";var makeModelUpdateAction2=(e,n,r)=>e.isSplitEventMixin?new nx({model:e,newData:n,oldData:r}):new Qi({model:e,newData:n,oldData:r}),ox=class extends Do{static get defaultConfig(){return{makeModelUpdateAction:makeModelUpdateAction2}}};ox._$name="StateTrackingManager";var sx=class extends(Localizable_default(Ur)){static get $name(){return"VersionModel"}onBeforeSave(){}get description(){var e;return null!=(e=this.name)?e:this.defaultDescription}get defaultDescription(){return`${this.isAutosave?"Auto-saved":"Saved"} at ${Ct.format(this.savedAt,this.L("L{Versions.versionDateFormat}"))}`}};__publicField(sx,"fields",[{name:"name",type:"string"},{name:"isAutosave",type:"boolean"},{name:"content",type:"object"},{name:"savedAt",type:"date"}]),sx.exposeProperties(),sx._$name="VersionModel";var ax=class extends(yi.mixin(PartOfProject_default2)){};__publicField(ax,"$name","VersionStore"),__publicField(ax,"configurable",{modelClass:sx,storeId:"versions"}),ax._$name="VersionStore";var lx=class extends(Localizable_default(Ur)){get description(){var e;return null!=(e=this.get("description"))?e:this.defaultDescription}get actions(){var e;return null!=(e=this.get("actions"))?e:[]}get defaultDescription(){var e,n;if(0===this.actions.length)return this.L("L{Versions.noChanges}");const r=this,i=oe.unique(r.actions.map((({actionType:e})=>e.startsWith("add")?"add":e.startsWith("remove")?"remove":e.startsWith("update")?"update":e))),o=oe.unique(r.actions.map((({entity:e})=>e.type))),s=oe.unique(r.actions.map((({entity:e})=>`${e.type}.${e.id}`))).length,a=r.L("L{Versions.transactionDescriptions}"),l=r.L("L{Versions.entityNames}"),c=r.L("L{Versions.entityNamesPlural}"),d=o[0],u=o.length>1;return a[i.length>1?"mixed":i[0]].replace("{n}",s).replace("{entities}",s>1?null!=(e=c[u?"other":d])?e:c.other:null!=(n=l[d])?n:l.other)}};__publicField(lx,"$name","ChangeLogTransactionModel"),__publicField(lx,"fields",[{name:"versionId"},{name:"actions",type:"array"},{name:"occurredAt",type:"date"},{name:"description",type:"string"}]),lx.exposeProperties(),lx._$name="ChangeLogTransactionModel";var cx=class extends(yi.mixin(PartOfProject_default2)){};__publicField(cx,"$name","ChangeLogStore"),__publicField(cx,"configurable",{modelClass:lx,storeId:"changelogs"}),cx._$name="ChangeLogStore";var ProjectCrudManager_default2=e=>class ProjectCrudManager extends((e||re).mixin(ProjectCrudManager_default)){static get configurable(){return{crudLoadValidationWarningPrefix:"Project load response error(s):",crudSyncValidationWarningPrefix:"Project sync response error(s):",trackProjectModelChanges:!1}}construct(...e){const n=this;super.construct(...e),n.addPrioritizedStore(n.calendarManagerStore),n.addPrioritizedStore(n.assignmentStore),n.addPrioritizedStore(n.dependencyStore),n.addPrioritizedStore(n.resourceStore),n.addPrioritizedStore(n.eventStore),n.timeRangeStore&&n.addPrioritizedStore(n.timeRangeStore),n.resourceTimeRangeStore&&n.addPrioritizedStore(n.resourceTimeRangeStore)}get project(){return this}set project(e){super.project=e}get crudLoadValidationMandatoryStores(){return[this.getStoreDescriptor(this.eventStore).storeId]}loadCrudManagerData(...e){!this.delayCalculation||this.isDelayingCalculation||this.usingSyncDataOnLoad()||this.scheduleDelayedCalculation(),super.loadCrudManagerData(...e)}acceptChanges(){super.acceptChanges(),this.clearChanges(!0,!1)}revertChanges(){this.revertCrudStoreChanges(),this.set(this.meta.modified,void 0,!0)}crudStoreHasChanges(e){const n=this.getCrudStore(e);let r;return r=n?super.crudStoreHasChanges(n):this.hasPersistableChanges||super.crudStoreHasChanges(),r}get changes(){let e=super.changes;if(this.trackProjectModelChanges){const n=this.modificationDataToWrite;n&&(e=e||{},e.project=n)}return e}shouldClearRecordFieldChange(e,n,r){return e.isCalendarModel&&"intervals"===n?!e.get("intervals").changes:super.shouldClearRecordFieldChange(...arguments)}},sortFn=(e,n)=>e<n?-1:e>n?1:0,ProHorizontalLayout_default=e=>class ProHorizontalLayout extends(e||re){static get configurable(){return{type:null,weights:null,groupBy:null,groupByThisObj:null,layoutFn:null}}get grouped(){return Boolean(this.groupBy)}getGroupValue(e){var n;let r;if(null!=e.group)r=e.group;else{const{groupBy:i,weights:o,groupByThisObj:s=this}=this,{eventRecord:a}=e;"function"==typeof i?r=i.call(s,a):(r=a[i],o&&(r=null!=(n=o[r])?n:1/0)),e.group=r}return r}getEventGroups(e){if(this.grouped){const n=new Set;return e.sort(((e,r)=>{const i=this.getGroupValue(e),o=this.getGroupValue(r);return n.add(i),n.add(o),sortFn(i,o)})),Array.from(n).sort(sortFn)}return[]}},dx=class extends(Fm.mixin(ProHorizontalLayout_default)){static get $name(){return"ProHorizontalLayoutStack"}layoutEventsInBands(e,n=!1){return this.getEventGroups(e),super.layoutEventsInBands(e,n)}};dx._$name="ProHorizontalLayoutStack";var ux=class extends(Im.mixin(ProHorizontalLayout_default)){static get $name(){return"ProHorizontalLayoutPack"}layoutEventsInBands(e){const n=this.getEventGroups(e),r=n.length||1,i=this.packEventsInBands(e,((e,i,o,s)=>{const a=s/r,l=(1===r?0:n.indexOf(e.group))/r;e.height=a,e.top=l+o.start/r+i*a,e.inBandHeight=s,e.inBandTop=o.start+i*s}));return e.forEach((e=>{Object.assign(e,this.bandIndexToPxConvertFn.call(this.bandIndexToPxConvertThisObj||this,e.top,e.height,e.eventRecord,e.resourceRecord))})),i}};ux._$name="ProHorizontalLayoutPack";var hx=0,gx=class extends bm{static get $name(){return"CalendarHighlightModel"}static generateId(){return++hx}};__publicField(gx,"domIdPrefix","calendarhighlight");var px=class extends Hm{static get $name(){return"CalendarHighlight"}static get configurable(){return{calendar:"event",unhighlightOnDrop:null,collectAvailableResources:null,rangeCls:"b-sch-highlighted-calendar-range",resourceTimeRangeModelClass:gx,inflate:3}}static get pluginConfig(){const e=super.pluginConfig;return e.assign=["highlightEventCalendars","highlightResourceCalendars","unhighlightCalendars"],e}afterConstruct(){super.afterConstruct(),this.client.ion({eventDragStart:"onEventDragStart",eventDragReset:"unhighlightCalendars",eventResizeStart:"onEventResizeStart",eventResizeEnd:"unhighlightCalendars",dragCreateStart:"onDragCreateStart",afterDragCreate:"unhighlightCalendars",thisObj:this})}highlightCalendar(e,n){e=oe.asArray(e),n=oe.asArray(n),"event"===this.calendar?this.highlightEventCalendars(e,n):this.highlightResourceCalendars(n)}highlightEventCalendars(e,n,r=!0){const i=this,{client:o}=i,{startDate:s,endDate:a}=o;i.disabled||(r&&i.unhighlightCalendars(),e=oe.asArray(e),n||(n=e.flatMap((e=>e.$linkedResources))),i.highlight=new Map,n=oe.asArray(n),e.forEach((e=>{var r;if(!e.calendar)return;const l=null==(r=e.calendar)?void 0:r.getWorkingTimeRanges(s,a).map((e=>new gx(e)));if(l){for(const e of n)i.highlight.set(e,l),o.currentOrientation.refreshEventsForResource(e,!0,!1);n.length>0&&o.currentOrientation.onRenderDone()}})))}highlightResourceCalendars(e,n=!0){var r;const i=this,{startDate:o,endDate:s,currentOrientation:a}=i.client;if(!i.disabled){n&&i.unhighlightCalendars(),i.highlight=new Map;for(const n of e){const e=null==(r=n.calendar)?void 0:r.getWorkingTimeRanges(o,s).map((e=>new gx(e)));e&&(i.highlight.set(n,e),a.refreshEventsForResource(n,!0,!1))}e.length>0&&a.onRenderDone()}}unhighlightCalendars(){if(!this.highlight)return;const{currentOrientation:e}=this.client,n=this.highlight.keys();this.highlight=null;for(const r of n)e.refreshEventsForResource(r,!0,!1);e.onRenderDone()}onEventDragStart({context:e}){var n,r;if(this.disabled)return;const i=this,{client:o}=i,{eventRecords:s}=e,a=e.availableResources=o.features.eventDrag.constrainDragToResource?[e.resourceRecord]:null!=(r=null==(n=i.collectAvailableResources)?void 0:n.call(i,{scheduler:o,eventRecords:s}))?r:o.resourceStore.records;i.highlightCalendar(s,a)}onEventResizeStart({eventRecord:e,resourceRecord:n}){this.disabled||this.highlightCalendar(e,[n])}onDragCreateStart({eventRecord:e,resourceRecord:n}){this.disabled||this.highlightCalendar(e,[n])}getEventsToRender(e,n){var r;const i=null==(r=this.highlight)?void 0:r.get(e);return i&&n.push(...i),n}onEventDataGenerated(e){const{eventRecord:n}=e;if(n.isCalendarHighlightModel){const{inflate:r}=this;e.fillSize=this.client.isVertical,e.wrapperCls["b-sch-highlighted-calendar-range"]=1,e.children.push({className:"b-sch-event-content",html:n.name,dataset:{taskBarFeature:"content"}}),e.width+=2*r,e.height+=2*r,e.left-=r,e.top-=r,e.eventId=`${this.generateElementId(n)}-resource-${e.resourceRecord.id}`}}updateDisabled(e,n){super.updateDisabled(e,n),e&&this.unhighlightCalendars()}shouldInclude(e){return e.isCalendarHighlightModel}get featureClass(){}};px._$name="CalendarHighlight",du.registerFeature(px,!1,"SchedulerPro");var mx=class extends tf{static get $name(){return"DependencyEdit"}static get configurable(){return{showLagField:!0,editorConfig:{items:{activeField:{type:"checkbox",name:"active",label:"L{Active}"}}}}}};mx._$name="DependencyEdit",du.registerFeature(mx,!1);var fx=class extends sr{static get $name(){return"EventBuffer"}static get configurable(){return{showDuration:!0,tooltipTemplate:{value:null,$config:"nullify"}}}static get pluginConfig(){return{chain:["onEventDataGenerated"]}}updateTooltipTemplate(e){var n;const r=this;e?r.tooltip=fc.new({forElement:r.client.timeAxisSubGridElement,forSelector:".b-sch-event-buffer-before,.b-sch-event-buffer-after",align:{align:"b-t",offset:[0,10]},getHtml({activeTarget:e}){const n=r.client.resolveEventRecord(e),i=e.matches(".b-sch-event-buffer-before"),o=i?n.preamble:n.postamble;return r.tooltipTemplate({eventRecord:n,duration:o,before:i})}}):null==(n=r.tooltip)||n.destroy()}onEventDataGenerated({useEventBuffer:e,bufferBeforeWidth:n,bufferAfterWidth:r,eventRecord:i,wrapperChildren:o}){if(this.enabled&&e){const{isHorizontal:e}=this.client,{showDuration:s}=this,{preamble:a,postamble:l}=i,c=e?"width":"height";o.push({className:{"b-sch-event-buffer":1,"b-sch-event-buffer-before":1,"b-buffer-thin":!n},style:`${c}: ${n}px`,children:s&&a?[{tag:"span",className:"b-buffer-label",html:a.toString(!0)}]:void 0},{className:{"b-sch-event-buffer":1,"b-sch-event-buffer-after":1,"b-buffer-thin":!r},style:`${c}: ${r}px`,children:s&&l?[{tag:"span",className:"b-buffer-label",html:l.toString(!0)}]:void 0})}}updateShowDuration(){this.isConfiguring||this.client.refreshWithTransition()}doDisable(e){super.doDisable(e);const{client:n}=this;!n.isConfiguring&&n.isPainted&&(n.element.classList.add("b-eventbuffer-transition"),n.refreshWithTransition(),n.waitForAnimations().then((()=>{n.element.classList.remove("b-eventbuffer-transition")})))}};fx._$name="EventBuffer",du.registerFeature(fx,!1,"SchedulerPro");var bx=class extends _m{static get $name(){return"EventResize"}render(){const e=this,{client:n}=e;super.render(...arguments),e.dragSelector=e.dragItemSelector=n.eventSelector+":not(.b-sch-event-segment)"}};bx._$name="EventResize",du.registerFeature(bx,!0,"SchedulerPro");var vx=class extends of{static get defaultConfig(){return{constrainDragToResource:!0}}static get configurable(){return{capitalizedEventName:"EventSegment"}}static get pluginConfig(){return{chain:["onPaint","isEventElementDraggable"]}}getTriggerParams(e){const{assignmentRecords:n,eventRecords:r,resourceRecord:i,browserEvent:o}=e;return{context:e,eventRecords:r,resourceRecord:i,assignmentRecords:n,event:o}}triggerEventDrag(e,n){this.scheduler.trigger("eventSegmentDrag",Object.assign(this.getTriggerParams(e),{startDate:e.startDate,endDate:e.endDate}))}triggerDragStart(e){this.scheduler.navigator.skipNextClick=!0,this.scheduler.trigger("eventSegmentDragStart",this.getTriggerParams(e))}triggerDragAbort(e){this.scheduler.trigger("eventSegmentDragAbort",this.getTriggerParams(e))}triggerDragAbortFinalized(e){this.scheduler.trigger("eventSegmentDragAbortFinalized",this.getTriggerParams(e))}triggerAfterDrop(e,n){if(this.scheduler.trigger("afterEventSegmentDrop",Object.assign(this.getTriggerParams(e),{valid:n})),!n){const{assignmentStore:e,eventStore:n}=this.client;this.dragData.initialAssignmentsState.find((({resource:r,assignment:i},o)=>{var s;return!e.includes(i)||!n.includes(i.event)||r.id!==(null==(s=this.dragData.assignmentRecords[o])?void 0:s.resourceId)}))&&this.client.refresh()}}async updateRecords(e){const n=this,{client:r}=n;let i;return e.externalDropTarget||(r.eventStore.suspendAutoCommit(),i=await n.updateSegment(r,e,false),r.eventStore.resumeAutoCommit()),r.trigger("eventSegmentDrop",Object.assign(n.getTriggerParams(e),{isCopy:false,event:e.browserEvent,targetEventRecord:e.targetEventRecord,targetResourceRecord:e.newResource,externalDropTarget:e.externalDropTarget})),i}async updateSegment(e,n){var r;const i=this,o="vertical"===e.mode,{eventRecords:s,assignmentRecords:a,timeDiff:l}=n;e.suspendRefresh();let c=!1;o&&s.forEach(((r,i)=>{const o=n.eventBarEls[i];delete r.instanceMeta(e).hasTemporaryDragElement,o.dataset.transient&&o.remove()}));const d=n.eventBarEls.slice(),u=n.eventRecord,h=i.adjustStartDate(n.origStart,l);Ct.isEqual(u.startDate,h)||(e.endListeningForBatchedUpdates(),i.cancelBatchUpdate(u),u.startDate=h,c=!0,await e.project.commitAsync(),null==(r=i.endBatchUpdate)||r.call(i,u)),e.resumeRefresh(),a.length>0&&(c?(e.fillTicks&&d.forEach((e=>delete e.lastDomConfig)),e.refreshWithTransition()):n.valid=!1)}isEventElementDraggable(e,n,r,i){return!(!this.disabled&&(n.isEventSegment||n.segments))||!r.closest(this.drag.targetSelector)}buildDragHelperConfig(){const e=super.buildDragHelperConfig();return e.targetSelector=".b-sch-event-segment:not(.b-first)",e}getMinimalDragData(e){const{client:n}=this,r=this.getElementFromContext(e),i=n.resolveEventRecord(r),o=n.resolveResourceRecord(r),s=n.resolveAssignmentRecord(r);return{eventRecord:i,resourceRecord:o,assignmentRecord:s,eventRecords:[i],assignmentRecords:s?[s]:[]}}beginBatchUpdate(e){e.event.beginBatch(),e.beginBatch()}endBatchUpdate(e){var n;null==(n=e.event)||n.endBatch(),e.endBatch()}cancelBatchUpdate(e){var n;null==(n=e.event)||n.cancelBatch(),e.cancelBatch()}setupProductDragData(e){var n;const r=this,{client:i}=r,o=r.getElementFromContext(e),{eventRecord:s,resourceRecord:a}=r.getMinimalDragData(e),l=[],c=i.getElementsFromEventRecord(s.event,a,!0)[0];if(r.constrainDragToResource&&!a)throw new Error("Resource could not be resolved for event: "+s.id);r.drag.ignoreSamePositionDrop=!i.rtl||s.nextSegment,i.listenToBatchedUpdates||i.beginListeningForBatchedUpdates(),r.beginBatchUpdate(s);const d=null==(n=r.getDateConstraints)?void 0:n.call(r,a,s),u=r.constrainRectangle=r.getConstrainingRectangle(d,a,s),h=Gt.from(o,i.foregroundCanvas,!0),g=Gt.from(c,i.foregroundCanvas,!0);return u.translate(-g.x),super.setupConstraints(u,h,i.timeAxisViewModel.snapPixelAmount,Boolean(d.start)),l.push(o),{record:s,draggedEntities:[s],dateConstraints:(null==d?void 0:d.start)?d:null,eventBarEls:l,mainEventElement:c}}suspendRecordElementRedrawing(){}suspendElementRedrawing(){}getDateConstraints(e,n){let{minDate:r,maxDate:i}=super.getDateConstraints(e,n);return n.previousSegment&&(!r||r<n.previousSegment.endDate)&&(r=n.previousSegment.endDate),n.nextSegment&&(!i||i<n.nextSegment.startDate)&&(i=n.nextSegment.startDate),{start:r,end:i}}get tipId(){return`${this.client.id}-segment-drag-tip`}internalSnapToPosition(e){super.internalSnapToPosition(),this.client.rtl&&!this.dragData.eventRecord.nextSegment&&(e.x=0)}updateDragContext(e,n){var r;super.updateDragContext(...arguments);const{client:i}=this,{dirty:o,eventRecord:s,endDate:a}=this.dragData;if(o&&!s.nextSegment){const{enableEventAnimations:e}=i;i.enableEventAnimations=!1,s.event.set("endDate",a),(null==(r=i.features.eventBuffer)?void 0:r.enabled)&&(s.event.wrapEndDate=a),i.enableEventAnimations=e}}};__publicField(vx,"$name","EventSegmentDrag"),vx._$name="EventSegmentDrag",du.registerFeature(vx,!0,"SchedulerPro"),du.registerFeature(vx,!1,"ResourceHistogram");var yx=class extends bx{static get pluginConfig(){return{chain:[...super.pluginConfig.chain,"isEventSegmentElementDraggable"]}}render(){super.render(...arguments),this.dragSelector=this.dragItemSelector=".b-sch-event-segment"}isEventSegmentElementDraggable(e,n,r,i){return this.isEventElementDraggable(...arguments)}isEventElementDraggable(e,n,r,i){const o=this,s=null==n?void 0:n.resizable;if(o.disabled||!s||n.isMilestone)return!0;if(n.segments){const r=o.client.scheduledEventName;return n.segments.every(((n,s)=>{const a=n.resizable,l=$o.getChild(e,`${r}.segments.${s}`);return!a||(!0!==a&&"start"!==a||!o.isOverStartHandle(i,l))&&(!0!==a&&"end"!==a||!o.isOverEndHandle(i,l))}))}return super.isEventElementDraggable(...arguments)}get tipId(){return`${this.client.id}-event-segment-resize-tip`}dragStart(e){return this._segmentsSlices=null,this._segmentsSlicesIndex=0,super.dragStart(...arguments)}beginEventRecordBatch(e){super.beginEventRecordBatch(e),e.isEventSegment&&e.event.beginBatch()}triggerBeforeResize(e){const{client:n}=this,r=n.scheduledEventName,i=n.resolveTimeSpanRecord(e.itemElement);return n.trigger(`before${n.capitalizedEventName}SegmentResize`,{[r+"Record"]:i,event:e.event,...this.getBeforeResizeParams({event:e.startEvent,element:e.itemElement})})}triggerEventResizeStart(e,n){const{client:r}=this;r.trigger(`${r.scheduledEventName}SegmentResizeStart`,n)}triggerEventResizeEnd(e,n){const{client:r}=this;r.trigger(`${r.scheduledEventName}SegmentResizeEnd`,n)}triggerEventPartialResize(e,n){const{client:r}=this;r.trigger(`${r.scheduledEventName}SegmentPartialResize`,n)}triggerBeforeEventResizeFinalize(e,n){const{client:r}=this;r.trigger(`before${r.capitalizedEventName}SegmentResizeFinalize`,n)}applyDateConstraints(e,n,r){var i,o;let s=null==(i=r.dateConstraints)?void 0:i.start,a=null==(o=r.dateConstraints)?void 0:o.end;if(n.isEventSegment){const{previousSegment:e,nextSegment:r}=n;e&&(s=s?Ct.max(e.endDate,s):e.endDate),r&&(a=a?Ct.min(r.startDate,a):r.startDate)}return(s||a)&&(e=Ct.constrain(e,s,a),r.snappedDate=Ct.constrain(r.snappedDate,s,a)),e}resizeEventPartiallyInternal(e,n){const{toSet:r}=n;if(super.resizeEventPartiallyInternal(...arguments),e.isEventSegment){const{event:i}=e;if(e.nextSegment||"endDate"!==r)if(e.previousSegment||"startDate"!==r){const e=i.fieldMap.segments;e._skipSegmentsIsEqual++,i.set("segments",i.get("segments")),e._skipSegmentsIsEqual--}else i.set("startDate",n[r]);else i.set("endDate",n[r])}}cancelEventRecordBatch(e){super.cancelEventRecordBatch(e),e.isEventSegment&&e.event.cancelBatch()}highlightHandle(){const{overItem:e}=this;e.classList.add("b-resize-handle","b-over-resize-handle")}unHighlightHandle(e=this.overItem){null==e||e.classList.remove("b-resize-handle",this.resizingItemInnerCls,"b-over-resize-handle",this.draggingItemCls)}};__publicField(yx,"$name","EventSegmentResize"),yx._$name="EventSegmentResize",du.registerFeature(yx,!0,"SchedulerPro"),du.registerFeature(yx,!1,"ResourceHistogram");var wx=class extends sr{onElementMouseOut(e){const{client:n}=this,{target:r,relatedTarget:i}=e,o=r.closest(n.eventSelector),s=n.resolveTimeSpanRecord(r);(null==s?void 0:s.isEventSegment)&&o&&n.hoveredEvents.has(o)&&i&&Gn.isDescendant(o,i)||this.overridden.onElementMouseOut(...arguments)}getElementsFromEventRecord(e,n){if(null==e?void 0:e.isEventSegment){const r=this.overridden.getElementsFromEventRecord(e.event,n)[0];return[$o.getChild(r,"segments."+e.segmentIndex)]}return this.overridden.getElementsFromEventRecord(...arguments)}resolveEventRecord(e){const n=e instanceof Event?e.target:e,r=null==n?void 0:n.closest(".b-sch-event-segment");let i=this.overridden.resolveEventRecord(e);return(null==i?void 0:i.segments)&&r&&(i=i.segments[r.dataset.segment]),i}resolveTaskRecord(e){const n=null==e?void 0:e.closest(".b-sch-event-segment");let r=this.overridden.resolveTaskRecord(e);return(null==r?void 0:r.segments)&&n&&(r=r.segments[n.dataset.segment]),r}populateTaskMenu(e){e.eventRecord=e.taskRecord,e.targetElement.closest(e.feature.client.eventSelector)&&this.populateEventMenu(e)}populateEventMenu({eventRecord:e,taskRecord:n,items:r,domEvent:i}){const o=this;if(!o.client.readOnly&&!e.isParent&&!e.milestone){r["split"+(n?"Task":"Event")]={localeClass:o,text:`L{split${n?"Task":"Event"}}`,icon:"b-icon b-icon-cut",disabled:e.readOnly,weight:650,separator:!0,onItem(e){o.splitEvent(e)}};const s=i.target.closest(".b-sch-event-segment");if(s){const n=o.client.resolveEventRecord(s);r.renameSegment={localeClass:o,text:"L{renameSegment}",icon:"b-icon b-icon-rename",disabled:e.readOnly||n.readOnly,weight:660,onItem(){o.rename(n,s)}}}}}getSplitDate(e){const{eventRecord:n,date:r,timeAxis:i}=e;return i.roundDate(r,n.startDate)}getSplitDuration(e){const{splitDuration:n,minSplitDuration:r,maxSplitDuration:i}=this;if(null==n?void 0:n.magnitude)return n.magnitude;const{eventRecord:o,tick:s}=e;if(s){const n=this.getSplitDurationUnit(e),{project:a}=o;let l=s.endDate-s.startDate;if(i){const e=a.run("$convertDuration",i.magnitude,i.unit||n,"millisecond");l=Math.min(l,e)}if(r){const e=a.run("$convertDuration",r.magnitude,r.unit||n,"millisecond");l=Math.max(l,e)}return a.run("$convertDuration",l,"millisecond",n)}}getSplitDurationUnit(e){const{splitDuration:n}=this;return(null==n?void 0:n.unit)||e.eventRecord.durationUnit}splitEvent(e){const{client:n}=e.feature,{timeAxis:r}=n;e.date=n.getDateFromXY(e.point,void 0,!1),e.tick=r.getAt(Math.floor(r.getTickFromDate(e.date))),e.timeAxis=r,e.eventRecord.splitToSegments(this.getSplitDate(e),this.getSplitDuration(e),this.getSplitDurationUnit(e))}rename(e,n){const{client:r}=this;new Xc({owner:r,appendTo:r.timeAxisSubGridElement,scrollAction:"realign",align:{align:"c-c"},cls:"b-event-segment-renamer",internalListeners:{complete(){r.refresh()},thisObj:this}}).startEdit({target:n,record:e,field:"name"})}doDisable(e){this.client.isPainted&&this.client.refresh(),super.doDisable(e)}generateSegmentRenderData(e,n){var r;let i,o;if(this.client.isGantt){const r=this.client.currentOrientation,i=r.getTaskBox(e),s={taskRecord:e,task:e,row:n.row,children:[]};i&&Object.assign(s,{isTask:!0,top:i.top,left:i.left,width:i.width,height:i.height}),r.internalPopulateTaskRenderData(s,e),o=s}else o=this.client.generateRenderData(e,n.resourceRecord,!0);if(o){const{eventColor:s}=o;i={segmentRecord:e,eventContent:o.eventContent||o.taskContent,cls:o.cls||(null==(r=e.cls)?void 0:r.clone())||new Xt,top:n.top,left:o.left-n.left,width:o.width,height:n.height,style:""},Object.assign(i.cls,{"b-sch-event-segment":!0,"b-first":!e.previousSegment,"b-last":!e.nextSegment},o.cls),Gn.isNamedColor(s)?i.cls[`b-sch-color-${s}`]=s:s?(i.style=`background-color:${s};`+i.style,i.cls["b-sch-custom-color"]=1):n.wrapperCls["b-sch-color-none"]=1}return i}appendDOMConfig(e){const n=e.eventRecord||e.taskRecord;if(n.segments&&!this.disabled){const r=e.eventContent||e.taskContent,i=e.children.indexOf(r);i>-1&&e.children.splice(i,1),delete e.eventContent,delete e.taskContent,e.cls["b-segmented"]=!0,e.segments=n.segments.map((n=>this.generateSegmentRenderData(n,e))),e.segmentsDOMConfig=e.segments.map(this.getSegmentDOMConfig.bind(this)),e.children.unshift({syncOptions:{syncIdField:"segment",releaseThreshold:0},className:"b-sch-event-segments",dataset:{taskBarFeature:"segments"},children:e.segmentsDOMConfig})}}getSegmentDOMConfig(e,n){return{className:e.cls,style:{style:e.style,left:e.left,height:e.height,width:e.width},dataset:{segment:n},syncOptions:{syncIdField:"taskBarFeature"},children:[e.eventContent]}}onEventDataGenerated(e){this.appendDOMConfig(e)}onTaskDataGenerated(e){this.appendDOMConfig(e)}get featureClass(){}};__publicField(wx,"$name","EventSegments"),__publicField(wx,"configurable",{splitDuration:0,maxSplitDuration:{magnitude:1,unit:"day"},minSplitDuration:0}),__publicField(wx,"pluginConfig",{override:["getElementsFromEventRecord","resolveEventRecord","resolveTaskRecord","onElementMouseOut"],chain:["populateTaskMenu","populateEventMenu","onTaskDataGenerated","onEventDataGenerated"]}),wx._$name="EventSegments",du.registerFeature(wx,!0,"SchedulerPro"),du.registerFeature(wx,!0,"Gantt");var Cx={border:1,hollow:2},Sx=class extends(sr.mixin(AttachToProjectMixin_default,Delayable_default)){construct(e,n){super.construct(e,n),this.client.eventStore.tree=!0}refreshClient(){!this.client.isConfiguring&&this.client.refreshWithTransition()}doDisable(){this.refreshClient()}updateEventLayout(e){"stack"===e&&this.client.isVertical&&console.warn("Stacked nested events are not supported in vertical mode"),this.refreshClient()}updateBarMargin(){this.refreshClient()}updateResourceMargin(){this.refreshClient()}updateEventHeight(){this.refreshClient()}updateHeaderHeight(e){this.client.element.style.setProperty("--schedulerpro-nested-event-header-height",`${e}px`),this.refreshClient()}getEventLayout(e,n){return n?{type:this.eventLayout}:this.overridden.getEventLayout(e)}getResourceMargin(e,n){return n&&!n.isRoot?this.resourceMargin:this.overridden.getResourceMargin(e)}getBarMargin(e,n){return n&&!n.isRoot?this.barMargin:this.overridden.getBarMargin(e)}getAppliedResourceHeight(e,n){var r;const i=this;if(n&&!n.isRoot){if("stack"===i.eventLayout)return i.eventHeight+2*i.resourceMargin;{const o=null!=(r=Cx[i.client.getEventStyle(n,e)])?r:0;return i.currentParentsHeight-i.headerHeight-o}}return i.overridden.getAppliedResourceHeight(e)}getResourceWidth(e,n){return n&&!n.isRoot?this.currentParentsWidth-this.headerHeight:this.overridden.getResourceWidth(e)}attachToEventStore(e){null==e||e.ion({name:"eventStore",change:"onEventStoreChange",thisObj:this})}onEventStoreChange({records:e}){(null==e?void 0:e.some((e=>e.parent&&!e.parent.isRoot)))&&this.refreshClient()}onEventStoreBatchedUpdate({records:e}){if(this.client.listenToBatchedUpdates&&(null==e?void 0:e.some((e=>e.parent&&!e.parent.isRoot))))return this.refreshClient(),!1}beforeEventDragStart(e,n){const r=this,{client:i}=r,{eventRecord:o,assignmentRecords:s}=n,{parentElement:a}=e.element;if(o.parent&&a!==i.foregroundCanvas){r.isDraggingNestedEvent=!0,e.originalParentElement=a,e.originalBounds=[];for(const n of s){const{event:s}=n;if(s.parent===o.parent){const o=i.getElementFromAssignmentRecord(n,!0);if(e.originalBounds.push({element:o,bounds:Gt.from(o,a)}),!r.constrainDragToParent&&i.features.eventDrag.constrainDragToTimeline){const e=Gt.from(o,i.timeAxisSubGridElement);o.style.top=`${e.top}px`,o.style.left=`${e.left}px`,$o.addChild(i.foregroundCanvas,o,n.id)}}}}else r.isDraggingNestedEvent=!1}afterEventDragStart(e,n){if(this.isDraggingNestedEvent&&this.constrainDragToParent){const{eventDrag:r}=this.client.features,{parent:i}=n.eventRecord,o=e.originalParentElement.getBoundingClientRect();r.setYConstraint(0,o.height-e.originalBounds[0].bounds.height),r.setXConstraint(0,o.width-e.originalBounds[0].bounds.width),n.dateConstraints={start:i.startDate,end:i.endDate}}}checkEventDragValidity({targetEventRecord:e,eventRecord:n,timeDiff:r,newResource:i,resourceRecord:o}){const s=this;return!s.isDraggingNestedEvent||s.allowDeNestingOnDrop||e||!r&&i===o?!s.allowNestingOnDrop&&e&&e!==n.parent?{valid:!1,message:s.L("L{nestingNotAllowed}")}:void 0:{valid:!1,message:s.L("L{deNestingNotAllowed}")}}processEventDrop({context:e,toScheduler:n,eventRecord:r,resourceRecord:i,reassignedFrom:o,element:s,eventsToAdd:a,addedEvents:l,draggedAssignment:c}){var d;const{parent:u}=r,{targetEventRecord:h}=e;let g=u;if(u!==h&&!this.constrainDragToParent&&!(null==(d=r.children)?void 0:d.length)){if(h&&this.allowNestingOnDrop){g=h.parent.isRoot?h:h.parent;const n=this.client.resolveResourceRecord(e.browserEvent);n!==i&&(i=c.resource=n)}else g=n.eventStore.rootNode;g&&g!==u&&(l.push(g.appendChild(r)),oe.remove(a,r))}if((null==u?void 0:u.isRoot)&&r.isParent&&o&&o!==i)for(const e of r.children){const n=e.assignments.find((e=>e.resource===o));n&&(n.resource=i)}if(g&&!g.isRoot){const e=this.client.getElementFromEventRecord(g,i).syncIdMap.nestedEventsContainer,n=e&&Gt.from(s,e);e&&(s.style.top=`${n.top}px`,s.style.left=`${n.left}px`,s.lastDomConfig=null,$o.addChild(e,s,s.dataset.syncId))}}processCrossSchedulerEventDrop({eventRecord:e}){if(e.isParent)for(const n of e.children)n.resource=e.resource}async afterEventDragAbortFinalized({originalParentElement:e,originalBounds:n}){if(this.isDraggingNestedEvent){for(const e of n[0].element.getAnimations())"top"!==e.transitionProperty&&"left"!==e.transitionProperty||await e.finished;for(const{element:r,bounds:i}of n)r.style.top=`${i.top}px`,r.style.left=`${i.left}px`,e.appendChild(r)}}afterEventResizeStart(e){if(this.constrainResizeToParent){const{parent:n}=e.timespanRecord;if(n&&!n.isRoot){let{startDate:r,endDate:i}=n;e.dateConstraints&&(r=Ct.max(r,e.dateConstraints.start),i=Ct.min(i,e.dateConstraints.end)),e.dateConstraints={start:r,end:i}}}}getElementFromAssignmentRecord(e,n){var r;if((null==(r=null==e?void 0:e.event)?void 0:r.parent)&&!e.event.parent.isRoot){const r=this.client.getElementFromEventRecord(e.event.parent,e.resource);return $o.getChild(r,`nestedEventsContainer.${e.id}${n?"":".event"}`)}return this.overridden.getElementFromAssignmentRecord(e,n)}async scheduleEvent({eventRecord:e,parentEventRecord:n,startDate:r,element:i}){if(!n)return this.overridden.scheduleEvent(...arguments);if(e.startDate=r,(e=n.appendChild(e)).assign(n.resource),i){const r=this.client.getElementFromEventRecord(n).syncIdMap.nestedEventsContainer,o=Gt.from(i,r);Gn.setTranslateXY(i,0,0),Gn.setTopLeft(i,o.y,o.x),$o.addChild(r,i,e.assignments[0].id)}await this.client.project.commitAsync()}getEventsToRender(e,n){return this.disabled||oe.remove(n,...n.filter((e=>e.isEventModel&&!e.parent.isRoot))),n}onEventDataGenerated({eventRecord:e,resourceRecord:n,wrapperCls:r,height:i,width:o,children:s,left:a,top:l}){if(e.isParent){r["b-nested-events-parent"]=1;const c=this;c.currentParentsHeight=i,c.currentParentsWidth=o;const{currentOrientation:d,isVertical:u}=c.client,h=e.children.filter((e=>{var r;return null==(r=e.$linkedResources)?void 0:r.includes(n)})),g=d.layoutEvents(n,h,!1,e,c.overlappingEventSorter),p=[];let m;if(u){m=[];for(const e of Object.values(g))m.push(e.renderData)}else m=null==g?void 0:g.eventsData;if(m)for(const r of m){u?(r.left-=a,r.top-=l,r.absoluteTop=r.top):("none"===c.eventLayout?(r.top=0,r.height=c.getAppliedResourceHeight(n,e)):"stack"===c.eventLayout&&(r.height=c.eventHeight),r.left-=a,r.absoluteTop=r.top);const o=d.renderEvent(u?{renderData:r}:r,i);o.className["b-nested-event"]=1,p.push(o)}s.push({className:{"b-nested-events-container":1,[`b-nested-events-layout-${c.eventLayout}`]:1},dataset:{taskBarFeature:"nestedEventsContainer"},children:p,syncOptions:{syncIdField:"syncId",releaseThreshold:0}})}}};function cls(e){return"b-task-percent-bar"+(e[0]?`-${e[0]}`:"")}__publicField(Sx,"$name","NestedEvents"),__publicField(Sx,"configurable",{eventLayout:"pack",barMargin:5,resourceMargin:0,eventHeight:30,headerHeight:20,constrainDragToParent:!1,allowNestingOnDrop:!0,allowDeNestingOnDrop:!0,constrainResizeToParent:!0}),__publicField(Sx,"pluginConfig",{before:["onEventStoreBatchedUpdate"],chain:["getEventsToRender","onEventDataGenerated","processEventDrop","processCrossSchedulerEventDrop","beforeEventDragStart","afterEventDragStart","afterEventDragAbortFinalized","checkEventDragValidity","afterEventResizeStart"],override:["getResourceMargin","getBarMargin","getAppliedResourceHeight","getResourceWidth","getEventLayout","getElementFromAssignmentRecord","scheduleEvent"]}),__publicField(Sx,"delayable",{refreshClient:"raf"}),Sx._$name="NestedEvents",du.registerFeature(Sx,!1,"SchedulerPro");var xx=class extends sr{static get $name(){return"PercentBar"}static get configurable(){return{allowResize:!0,showPercentage:!0,instantUpdate:!0,valueField:"percentDone",displayField:"renderedPercentDone"}}static get pluginConfig(){return{chain:["onPaint",{fn:"onTaskDataGenerated",prio:-1e4},{fn:"onEventDataGenerated",prio:-1e4}]}}onPaint({firstPaint:e}){if(e){const e=this,{client:n}=e;e.drag=new Qa({name:"percentBarHandle",lockX:n.isVertical,lockY:n.isHorizontal,targetSelector:`${n.eventSelector} .b-task-percent-bar-handle`,dragThreshold:1,outerElement:n.timeAxisSubGridElement,internalListeners:{beforeDragStart:"onBeforeDragStart",dragStart:"onDragStart",drag:"onDrag",drop:"onDrop",abort:"onDragAbort",thisObj:e}}),e.detachListeners("view"),e.client.ion({name:"view",[`${n.scheduledEventName}mouseenter`]:"onTimeSpanMouseEnter",[`${n.scheduledEventName}mouseleave`]:"onTimeSpanMouseLeave",thisObj:e})}}get sizeProp(){return this.client.isVertical?"height":"width"}get offsetSizeProp(){return this.client.isVertical?"offsetHeight":"offsetWidth"}get positionProp(){return this.client.isVertical?"top":this.client.rtl?"right":"left"}get offsetPositionProp(){return this.client.isVertical?"offsetTop":this.client.rtl?"offsetRight":"offsetLeft"}updateAllowResize(e){this.client.element.classList.toggle(cls`drag-disabled`,!e)}updateShowPercentage(e){this.client.element.classList.toggle(cls`show-percentage`,Boolean(e))}doDestroy(){var e;null==(e=this.drag)||e.destroy(),super.doDestroy()}doDisable(e){this.client.isPainted&&this.client.refresh(),super.doDisable(e)}reset(e){const n=this,{project:r}=n.client;if(n.client.element.classList.remove(cls`resizing-task`),n.isMouseInsideEvent||(n.handle.remove(),n.handle=null),n.instantUpdate){const{stm:i}=r;i.disabled||(n._stmTransactionStarted&&(e.valid?i.stopTransaction():i.rejectTransaction()),i.autoRecord=n.oldStmAutoRecord,n._stmTransactionStarted=!1),r.resumeAutoSync(),n.client.eventStore.resumeAutoCommit()}}getPercentBarDOMConfig(e){return{className:cls`outer`,dataset:{taskBarFeature:"percentBar"},children:[{className:cls``,dataset:{percent:e[this.displayField]},style:{[this.sizeProp]:e[this.valueField]+"%"}}]}}appendDOMConfig(e,n,r){if((e.isEvent||e.isTask)&&!e.isMilestone&&!this.disabled){const{eventSegments:i}=this.client.features;e.isSegmented&&(null==i?void 0:i.enabled)?e.segments.forEach(((e,n)=>{r.segmentsDOMConfig[n].children.unshift(this.getPercentBarDOMConfig(e))})):n.unshift(this.getPercentBarDOMConfig(e))}}onEventDataGenerated(e){this.appendDOMConfig(e.eventRecord,e.children,e)}onTaskDataGenerated(e){this.appendDOMConfig(e.taskRecord,e.children,e)}getHoverSegment(e){const n=(e.toElement||e.target).closest(".b-sch-event-segment");if(n){const r=Gt.from(n);if(null==r?void 0:r.contains(cn.getPagePoint(e)))return n}}isOverSegment(e){return Boolean(this.getHoverSegment(e))}onTimeSpanMouseEnter(e){const n=this,{client:r,sizeProp:i}=n,o=e[`${r.scheduledEventName}Record`];if(!(o.isMilestone||o.readOnly||n.disabled||o.isParent)&&o.isEditable(n.valueField))if(n.drag.context)o===n.drag.context.taskRecord&&(n.isMouseInsideEvent=!0);else{const s=e[`${r.scheduledEventName}Element`],a=$o.getChild(s,r.scheduledEventName);if(!n.handle){const e={percent:o[n.valueField]};let s=o[n.valueField]+"%";const{eventSegments:l}=r.features;if(o.isSegmented&&(null==l?void 0:l.enabled)){e.segment=0;const l=Gt.from(a);let c,d;o.segments.some(((r,i)=>{if(!r[n.valueField]&&100!==c)return!0;c=r[n.valueField],e.segment=i;const o=$o.getChild(a,`segments.${i}.percentBar`).firstChild;d=Gt.from(o)})),s=r.isVertical?d?d.top+d[i]-l.top:0:r.rtl?d?d.right+d[i]-l.right:0:d?d.left+d[i]-l.left:0}n.handle=Gn.createElement({parent:a,className:cls`handle`,style:{[n.positionProp]:s},dataset:e})}n.isMouseInsideEvent=!0}}onTimeSpanMouseLeave(e){const n=this;!n.drag.context&&n.handle&&e.event.toElement!==n.handle&&(n.handle.remove(),n.handle=null),n.isMouseInsideEvent=!1}onBeforeDragStart({source:e,context:n,event:r}){const{client:i,offsetPositionProp:o,offsetSizeProp:s}=this,{eventSegments:a}=i.features,{element:l}=n,c=i.resolveEventRecord(l);let d,u,h,g;if(c.isSegmented&&(null==a?void 0:a.enabled)){const e=l.dataset.segment;d=$o.getChild(l.parentElement,`segments.${e}.percentBar`),u=d.firstElementChild,g=l.parentElement[s],h=$o.getChild(l.parentElement,`segments.${e}`)[o]+u[s]}else d=$o.getChild(l.parentElement,"percentBar"),u=d.firstElementChild,g=d[s],h=u[s];i.isVertical?(e.minY=-h,e.maxY=g-h):i.rtl?(e.maxX=h,e.minX=-(g-h)):(e.minX=-h,e.maxX=g-h),Object.assign(n,{percentBar:u,initialPos:h,size:g,taskRecord:c,initialValue:c[this.valueField],domEvent:r})}onDragStart({context:e,event:n}){const{client:r}=this,{project:i}=r;r.element.classList.add(cls`resizing-task`),e.element.retainElement=!0,e.domEvent=n,r.trigger("percentBarDragStart",e),this.instantUpdate&&(i.suspendAutoSync(),r.eventStore.suspendAutoCommit(),i.stm.disabled||(this.oldStmAutoRecord=i.stm.autoRecord,i.stm.autoRecord=!1))}onDrag({context:e,event:n}){const r=this,{sizeProp:i,offsetSizeProp:o,client:s}=r,a=s.isHorizontal?Math.round((e.initialPos+e.newX*(s.rtl?-1:1))/e.size*100):Math.round((e.initialPos+e.newY)/e.size*100),{eventSegments:l}=s.features;if(r.instantUpdate){const{stm:n}=s.project;n.disabled||n.transaction||(n.startTransaction(),r._stmTransactionStarted=!0),e.taskRecord[r.valueField]=a}e.domEvent=n,e.percent=e.element.dataset.percent=a,e.taskRecord.isSegmented&&(null==l?void 0:l.enabled)&&e.taskRecord.segments.forEach(((n,r)=>{const s=$o.getChild(e.element.parentElement,`segments.${r}.percentBar`).firstChild,l=$o.getChild(e.element.parentElement,`segments.${r}`);if(e.percent>=n.endPercentDone)s.style[i]=l[o]+"px";else if(e.percent<=n.startPercentDone)s.style[i]="0";else if(e.percent>=n.startPercentDone&&e.percent<=n.endPercentDone){const e=n.endPercentDone-n.startPercentDone;s.style[i]=(a-n.startPercentDone)*l[o]/e+"px"}})),s.trigger("percentBarDrag",e)}onDragAbort({context:e,event:n}){e.taskRecord.isSegmented&&(e.percentBar.style[this.sizeProp]=e.taskRecord.segments[e.element.dataset.segment][this.valueField]+"%"),e.taskRecord[this.valueField]=e.initialValue,e.domEvent=n,this.reset(e),this.client.trigger("percentBarDragAbort",e)}onDrop({context:e}){const n=this,{taskRecord:r}=e,{eventSegments:i}=n.client.features;r[n.valueField]=e.percent,r.isSegmented&&(null==i?void 0:i.enabled)?r.segments.some(((r,i)=>{if(e.percent>=r.startPercentDone&&e.percent<=r.endPercentDone){const o=r.endPercentDone-r.startPercentDone,s=$o.getChild(e.element.parentElement,`segments.${i}`),a=parseInt(s.style[n.sizeProp])+(e.percent-r.startPercentDone)*s[n.offsetSizeProp]/o;return e.element.style.cssText=`${n.positionProp}: ${a}px`,e.element.dataset.segment=i,!0}})):e.element.style.cssText=`${n.positionProp}: ${n.client.rtl?100-e.percent:e.percent}%`,n.reset(e),n.client.trigger("percentBarDrop",e)}get featureClass(){}};xx._$name="PercentBar",du.registerFeature(xx,!1,"SchedulerPro"),du.registerFeature(xx,!0,"Gantt");var Dx=class extends Hm{static get properties(){return{resourceMap:new Map}}construct(){var e;super.construct(...arguments),this.resourceTimeRangeModelClass=(e=class extends this.resourceTimeRangeModelClass{},__publicField(e,"$name","ResourceNonWorkingTimeModel"),__publicField(e,"domIdPrefix","resourcenonworkingtimemodel"),e),this.client.timeAxis.ion({name:"timeAxis",reconfigure:"onTimeAxisReconfigure",prio:100,thisObj:this})}attachToResourceStore(e){super.attachToResourceStore(e),null==e||e.ion({name:"resourceStore",changePreCommit:"onResourceChange",thisObj:this})}attachToCalendarManagerStore(e){super.attachToCalendarManagerStore(e),null==e||e.ion({name:"calendarManagerStore",changePreCommit:"onCalendarChange",thisObj:this})}onTimeAxisReconfigure(){this.resourceMap.clear()}onResourceChange({action:e,records:n,record:r,changes:i}){var o;const s=this;if("update"===e){const e=i.calendar;!e||"string"==typeof e.oldValue&&(null==(o=e.value)?void 0:o.id)===e.oldValue||(s.resourceMap.delete(r.id),s.client.runWithTransition((()=>{s.client.currentOrientation.refreshEventsForResource(r)})))}"remove"===e&&n.forEach((e=>s.resourceMap.delete(e.id))),"removeall"===e&&s.resourceMap.clear()}onCalendarChange({action:e,records:n,record:r,changes:i}){this.resourceMap.clear(),this.client.refresh()}getEventsToRender(e,n){const r=this,{resourceMap:i,client:o}=r,{timeAxis:s}=o,a=!r.maxTimeAxisUnit||Ct.compareUnits(s.unit,r.maxTimeAxisUnit)<=0;if(!r.disabled&&a&&e.effectiveCalendar){if(!i.has(e.id)){const n=e.effectiveCalendar.getNonWorkingTimeRanges(o.startDate,o.endDate).map(((n,i)=>new r.resourceTimeRangeModelClass({id:`r${e.id}i${i}`,iconCls:n.iconCls||e.effectiveCalendar.iconCls||"",cls:`${e.effectiveCalendar.cls||""} ${n.cls||""}`,startDate:n.startDate,endDate:n.endDate,name:n.name||"",resourceId:e.id,isNonWorking:!0})));i.set(e.id,n)}n.push(...i.get(e.id))}return n}shouldInclude({isNonWorking:e}){return e}resolveResourceNonWorkingTimeInterval(e){var n;return null==(n=null==e?void 0:e.closest(".b-sch-resourcenonworkingtime"))?void 0:n.elementData.eventRecord}};__publicField(Dx,"$name","ResourceNonWorkingTime"),__publicField(Dx,"configurable",{rangeCls:"b-sch-resourcenonworkingtime",maxTimeAxisUnit:"hour",enableMouseEvents:!1,resourceTimeRangeModelClass:bm,entityName:"resourceNonWorkingTime"}),Dx.featureClass="",Dx._$name="ResourceNonWorkingTime",du.registerFeature(Dx,!1,"SchedulerPro");var ReadyStatePropagator_default=e=>class ReadyStatePropagator extends(e||Events_default(re)){get isReadyStatePropagator(){return!0}get canSave(){return!0}requestReadyStateChange(){this.trigger("readystatechange",{canSave:this.canSave})}get widgetClass(){}},Ex=(Oe.publishLocale({localeName:"En",localeDesc:"English (US)",localeCode:"en-US",ConstraintTypePicker:{none:"None",muststarton:"Must start on",mustfinishon:"Must finish on",startnoearlierthan:"Start no earlier than",startnolaterthan:"Start no later than",finishnoearlierthan:"Finish no earlier than",finishnolaterthan:"Finish no later than"},CalendarField:{"Default calendar":"Default calendar"},TaskEditorBase:{Information:"Information",Save:"Save",Cancel:"Cancel",Delete:"Delete",calculateMask:"Calculating...",saveError:"Can't save, please correct errors first",repeatingInfo:"Viewing a repeating event",editRepeating:"Edit"},TaskEdit:{"Edit task":"Edit task",ConfirmDeletionTitle:"Confirm deletion",ConfirmDeletionMessage:"Are you sure you want to delete the event?"},GanttTaskEditor:{editorWidth:"44em"},SchedulerTaskEditor:{editorWidth:"34em"},SchedulerGeneralTab:{labelWidth:"6em",General:"General",Name:"Name",Resources:"Resources","% complete":"% complete",Duration:"Duration",Start:"Start",Finish:"Finish",Effort:"Effort",Preamble:"Preamble",Postamble:"Postamble"},GeneralTab:{labelWidth:"6.5em",General:"General",Name:"Name","% complete":"% complete",Duration:"Duration",Start:"Start",Finish:"Finish",Effort:"Effort",Dates:"Dates"},SchedulerAdvancedTab:{labelWidth:"13em",Advanced:"Advanced",Calendar:"Calendar","Scheduling mode":"Scheduling mode","Effort driven":"Effort driven","Manually scheduled":"Manually scheduled","Constraint type":"Constraint type","Constraint date":"Constraint date",Inactive:"Inactive","Ignore resource calendar":"Ignore resource calendar"},AdvancedTab:{labelWidth:"11.5em",Advanced:"Advanced",Calendar:"Calendar","Scheduling mode":"Scheduling mode","Effort driven":"Effort driven","Manually scheduled":"Manually scheduled","Constraint type":"Constraint type","Constraint date":"Constraint date",Constraint:"Constraint",Rollup:"Rollup",Inactive:"Inactive","Ignore resource calendar":"Ignore resource calendar"},DependencyTab:{Predecessors:"Predecessors",Successors:"Successors",ID:"ID",Name:"Name",Type:"Type",Lag:"Lag",cyclicDependency:"Cyclic dependency",invalidDependency:"Invalid dependency"},NotesTab:{Notes:"Notes"},ResourcesTab:{unitsTpl:({value:e})=>`${e}%`,Resources:"Resources",Resource:"Resource",Units:"Units"},RecurrenceTab:{title:"Repeat"},SchedulingModePicker:{Normal:"Normal","Fixed Duration":"Fixed Duration","Fixed Units":"Fixed Units","Fixed Effort":"Fixed Effort"},ResourceHistogram:{barTipInRange:'<b>{resource}</b> {startDate} - {endDate}<br><span class="{cls}">{allocated} of {available}</span> allocated',barTipOnDate:'<b>{resource}</b> on {startDate}<br><span class="{cls}">{allocated} of {available}</span> allocated',groupBarTipAssignment:'<b>{resource}</b> - <span class="{cls}">{allocated} of {available}</span>',groupBarTipInRange:'{startDate} - {endDate}<br><span class="{cls}">{allocated} of {available}</span> allocated:<br>{assignments}',groupBarTipOnDate:'On {startDate}<br><span class="{cls}">{allocated} of {available}</span> allocated:<br>{assignments}',plusMore:"+{value} more"},ResourceUtilization:{barTipInRange:'<b>{event}</b> {startDate} - {endDate}<br><span class="{cls}">{allocated}</span> allocated',barTipOnDate:'<b>{event}</b> on {startDate}<br><span class="{cls}">{allocated}</span> allocated',groupBarTipAssignment:'<b>{event}</b> - <span class="{cls}">{allocated}</span>',groupBarTipInRange:'{startDate} - {endDate}<br><span class="{cls}">{allocated} of {available}</span> allocated:<br>{assignments}',groupBarTipOnDate:'On {startDate}<br><span class="{cls}">{allocated} of {available}</span> allocated:<br>{assignments}',plusMore:"+{value} more",nameColumnText:"Resource / Event"},SchedulingIssueResolutionPopup:{"Cancel changes":"Cancel the change and do nothing",schedulingConflict:"Scheduling conflict",emptyCalendar:"Calendar configuration error",cycle:"Scheduling cycle",Apply:"Apply"},CycleResolutionPopup:{dependencyLabel:"Please select a dependency:",invalidDependencyLabel:"There are invalid dependencies involved that need to be addressed:"},DependencyEdit:{Active:"Active"},SchedulerProBase:{propagating:"Calculating project",storePopulation:"Loading data",finalizing:"Finalizing results"},EventSegments:{splitEvent:"Split event",renameSegment:"Rename"},NestedEvents:{deNestingNotAllowed:"De-nesting not allowed",nestingNotAllowed:"Nesting not allowed"},VersionGrid:{compare:"Compare",description:"Description",occurredAt:"Occurred At",rename:"Rename",restore:"Restore",stopComparing:"Stop Comparing"},Versions:{entityNames:{TaskModel:"task",AssignmentModel:"assignment",DependencyModel:"link",ProjectModel:"project",ResourceModel:"resource",other:"object"},entityNamesPlural:{TaskModel:"tasks",AssignmentModel:"assignments",DependencyModel:"links",ProjectModel:"projects",ResourceModel:"resources",other:"objects"},transactionDescriptions:{update:"Changed {n} {entities}",add:"Added {n} {entities}",remove:"Removed {n} {entities}",move:"Moved {n} {entities}",mixed:"Changed {n} {entities}"},addEntity:"Added {type} **{name}**",removeEntity:"Removed {type} **{name}**",updateEntity:"Changed {type} **{name}**",moveEntity:"Moved {type} **{name}** from {from} to {to}",addDependency:"Added link from **{from}** to **{to}**",removeDependency:"Removed link from **{from}** to **{to}**",updateDependency:"Edited link from **{from}** to **{to}**",addAssignment:"Assigned **{resource}** to **{event}**",removeAssignment:"Removed assignment of **{resource}** from **{event}**",updateAssignment:"Edited assignment of **{resource}** to **{event}**",noChanges:"No changes",nullValue:"none",versionDateFormat:"M/D/YYYY h:mm a",undid:"Undid changes",redid:"Redid changes",editedTask:"Edited task properties",deletedTask:"Deleted a task",movedTask:"Moved a task",movedTasks:"Moved tasks"}}),class extends(_a.mixin(ReadyStatePropagator_default)){static get $name(){return"TaskEditorBase"}static get type(){return"taskeditorbase"}static get configurable(){return{localizableProperties:["width"],title:"L{Information}",cls:"b-schedulerpro-taskeditor",closable:!0,layout:"fit",draggable:{handleSelector:":not(button,.b-field-inner)"},items:null,bbar:{hideWhenEmpty:!0,defaults:{localeClass:this},items:{saveButton:{text:"L{Save}",color:"b-blue",cls:"b-raised",weight:100},deleteButton:{text:"L{Delete}",weight:200},cancelButton:{text:"L{Object.Cancel}",weight:300}}},strips:{occurrenceInfoToolbar:{cls:"occurrence-info-toolbar",hidden:!0,ignoreParentReadOnly:!0,items:[{type:"widget",tag:"i",cls:"b-icon b-icon-locked"},{ref:"occurrenceInfoText",type:"label",localeClass:this,text:"L{repeatingInfo}"},"->",{ref:"editOccurrenceButton",localeClass:this,text:"L{editRepeating}",onClick:"up.onEditOccurrenceClick"}]}},width:{$config:{localeKey:"L{editorWidth}"}}}}static get defaultConfig(){return{axisLock:"flexible",autoClose:!0,onChange:null,onCancel:null,onSave:null,autoShow:!1,blurAction:"cancel",scrollAction:"realign",durationDisplayPrecision:1,tabPanelItems:null,defaultTabs:null,calculateMask:null,calculateMaskDelay:100,localizableProperties:["calculateMask"],project:null,dependencyIdField:null}}processWidgetConfig(e){var n;if((null==(n=e.type)?void 0:n.includes("date"))&&null==e.weekStartDay&&(e.weekStartDay=this.weekStartDay),"tabs"===e.ref&&this.extraItems){const n={};for(const e in this.extraItems){n[e.replace("tab","Tab")]={items:Array.isArray(this.extraItems[e])?Et.transformArrayToNamedObject(this.extraItems[e]):this.extraItems[e]}}Et.merge(e.items,n)}return e}changeItems(e){const{tabPanelItems:n={}}=this,r=Et.clone(e),i=r.find((e=>"tabs"===e.ref));return this.cleanItemsConfig(n),Et.merge(i.items,n),super.changeItems(r)}cleanItemsConfig(e){for(const n in e){const r=e[n];!0===r?delete e[n]:(null==r?void 0:r.items)&&this.cleanItemsConfig(r.items)}}afterConfigure(){var e;const n=this,{widgetMap:r}=n,{tabs:i}=r,{cancelButton:o,deleteButton:s,saveButton:a}=(null==(e=n.bbar)?void 0:e.widgetMap)||{};null==a||a.ion({click:"onSaveClick",thisObj:n}),null==o||o.ion({click:"onCancelClick",thisObj:n}),null==s||s.ion({click:"onDeleteClick",thisObj:n}),Object.values(r).forEach((e=>{e.isDurationField?e.decimalPrecision=this.durationDisplayPrecision:"startDate"===e.ref||"endDate"===e.ref?e.project=this.project:"predecessorsTab"!==e.ref&&"successorsTab"!==e.ref||(e.grid.durationDisplayPrecision=this.durationDisplayPrecision,e.dependencyIdField=e.dependencyIdField||n.dependencyIdField),e.isReadyStatePropagator&&e.ion({readyStateChange:"onReadyStateChange",thisObj:n})})),i.onFieldChange=({source:e})=>{const{name:r,isValid:i,value:o}=e;n.loadedRecord&&r&&i&&!n.isLoadingEvent&&!e.up("recurrenceeditorpanel")&&(n.loadedRecord[r]=o)}}get canSave(){let e=!0;return Object.values(this.widgetMap).forEach((n=>{n.isReadyStatePropagator&&(e=e&&n.canSave)})),e}async hide(){const e=this;e.detachListeners("project"),e.detachListeners("eventStore"),e._delayedAction=null;const n=await super.hide(this.element.matches(":focus-within"));return e.isDestroyed||e.trigger(e.blurAction),n}toggleFieldsDisabled(e){this.eachWidget((n=>{if(n.isField&&n.name&&!n.up("recurrenceeditorpanel")){void 0!==e.isEditable(n.name)&&(n.disabled=!e.isEditable(n.name))}}))}loadEvent(e,n=!1){var r;const i=this,o=null!=(r=i.project)?r:e.project;i.isLoadingEvent=!0,i.widgetMap.occurrenceInfoToolbar.hidden=!e.isOccurrence&&!e.isRecurring||i.editingRecurring,i.toggleFieldsDisabled(e),i.callWidgetHook("loadEvent",e,n),i.detachListeners("project"),i.loadedRecord=e,o.ion({name:"project",beforeCommit:"onProjectBeforeCommit",dataReady:"onProjectDataReady",thisObj:i}),i.detachListeners("eventStore"),o.eventStore.ion({name:"eventStore",remove:"onTaskRemove",thisObj:i}),i.isLoadingEvent=!1,i.trigger("loadEvent")}callWidgetHook(e,...n){this.eachWidget((r=>{"function"==typeof r[e]&&r[e](...n)}))}onDocumentMouseDown(e){const n=this;let r=null;if(Object.values(n.widgetMap).some((e=>e._activeCellEdit))){const{event:i}=e,{saveButton:o,cancelButton:s,deleteButton:a}=n.widgetMap,l=i.target.closest("button");if(l)switch(l){case null==o?void 0:o.element:r=n.onSaveClick;break;case null==s?void 0:s.element:r=n.onCancelClick;break;case null==a?void 0:a.element:r=n.onDeleteClick}}n._delayedAction=r,super.onDocumentMouseDown(e)}onSaveClick(){const e=this;e._delayedAction=null,e.canSave?e.trigger("save"):cl.show({rootElement:e.rootElement,html:e.L("L{saveError}")})}onCancelClick(){this.close()}onDeleteClick(){this._delayedAction=null,this.trigger("delete")}onPropagationRequested(){this.trigger("requestPropagation")}onReadyStateChange({source:e,canSave:n}){this.requestReadyStateChange(),e.couldSaveTitle||(e.couldSaveTitle=e.title),e.parent===this.widgetMap.tabs&&(n?(e.tab.element.classList.remove("b-invalid"),e.tab.icon=null,e.title=e.couldSaveTitle,e.couldSaveTitle=null):(e.tab.element.classList.add("b-invalid"),e.tab.icon="b-icon-warning",e.title=e.couldSaveTitle))}onTaskRemove(){this.afterDelete()}onProjectBeforeCommit(){this.calculateMask&&this.mask({text:this.calculateMask,showDelay:this.calculateMaskDelay})}onProjectDataReady({records:e}){var n;const r=this;r.calculateMask&&r.unmask(),e.has(r.loadedRecord)&&r.callWidgetHook("afterProjectChange"),null==(n=r._delayedAction)||n.call(r)}beforeSave(){this.callWidgetHook("beforeSave")}afterSave(){this.loadedRecord=void 0,this.callWidgetHook("afterSave")}beforeCancel(){this.callWidgetHook("beforeCancel")}afterCancel(){this.loadedRecord=void 0,this.callWidgetHook("afterCancel")}beforeDelete(){this.callWidgetHook("beforeDelete")}afterDelete(){this.loadedRecord=void 0,this.callWidgetHook("afterDelete")}onInternalKeyDown(e){if(!e.handled&&"Enter"===e.key&&this.saveAndCloseOnEnter&&"input"===e.target.tagName.toLowerCase()){if(e.target.matches("input")){const n=bs.fromElement(e.target);!(null==n?void 0:n.internalOnChange)||n.isCheckbox||n.isSlider||n.internalOnChange()}e.preventDefault(),this.onSaveClick()}super.onInternalKeyDown(e)}onEditOccurrenceClick(){const e=this;bs.create({type:"recurrenceconfirmation",owner:e}).confirm({actionType:"update",eventRecord:e.loadedRecord,changerFn:n=>{var r;const i=null!=(r=n.recurringTimeSpan)?r:n;e.resetRecurrenceData={recurringTimeSpan:i,originalExceptionDates:{...i.exceptionDates}},n.isRecurring||(n.convertToRealEvent({startDate:n.startDate}),n.constraintDate=null)},finalizerFn:n=>{n.isRecurring&&(e.editingRecurring=!0,e.readOnly=!1),e.loadEvent(n)}})}updateReadOnly(e){const{deleteButton:n,saveButton:r,cancelButton:i,tabs:o}=this.widgetMap,{items:s}=o;super.updateReadOnly(e),n&&(n.hidden=e),r&&(r.hidden=e),i&&(i.hidden=e);for(let n=0,{length:r}=s;n<r;n++)s[n].readOnly=e}});Ex.initClass(),Ex._$name="TaskEditorBase";var EventLoader_default=e=>class EventLoader extends(e||Rs){get project(){var e,n,r;return null!=(r=null==(e=this.up((e=>e.isTaskEditorBase)))?void 0:e.project)?r:null==(n=this.record)?void 0:n.project}loadEvent(e,n){this.setRecord(e,n)}resetData(){this.record=null}beforeSave(){}afterSave(){this.resetData()}beforeCancel(){}afterCancel(){this.resetData()}beforeDelete(){}afterDelete(){this.resetData()}get widgetClass(){}},Rx=class extends(Rs.mixin(EventLoader_default,ReadyStatePropagator_default)){static get $name(){return"EditorTab"}static get type(){return"editortab"}static get configurable(){return{title:null,strictRecordMapping:!0}}};Rx._$name="EditorTab";var kx=class extends Rx{static get $name(){return"FormTab"}static get type(){return"formtab"}static get defaultConfig(){return{layoutStyle:{flexFlow:"row wrap",alignItems:"flex-start",alignContent:"flex-start"},autoUpdateRecord:!0}}onFieldChange({source:e,valid:n,userAction:r}){r&&(n=void 0!==n?n:"function"==typeof e.isValid?e.isValid():e.isValid)&&super.onFieldChange(...arguments)}};kx.initClass(),kx._$name="FormTab";var Tx=new Date(2300,0,1),Mx=class extends Vc{static get $name(){return"StartDateField"}static get type(){return"startdatefield"}static get alias(){return"startdate"}static get defaultConfig(){return{project:null,eventRecord:null,strictParsing:!0,minDateDelta:"-10 years",maxDateDelta:"200 years"}}get calendarProvider(){var e,n;return(null!=(n=null==(e=this.eventRecord)?void 0:e.recurringEvent)?n:this.eventRecord)||this.project}get backShiftDate(){const e=this;return e.calendarProvider.run("skipWorkingTime",e.value,!1,e._step.magnitude,e._step.unit)}get forwardShiftDate(){const e=this;let n=e.calendarProvider.run("skipWorkingTime",e.value,!0,e._step.magnitude,e._step.unit);return n=n&&e.calendarProvider.run("skipNonWorkingTime",n,!0),n}transformTimeValue(e){const{calendarProvider:n,keepTime:r}=this;if(n&&"entered"!==r){const r=Ct.clearTime(e),i=n.run("skipNonWorkingTime",r);if(Ct.isValidDate(i)&&Ct.isEqual(i,r,"day"))return Ct.copyTimeValues(r,i)}return super.transformTimeValue(e)}get min(){var e;return super.min||(null==(e=this.project)?void 0:e.startDate)?Ct.add(this.project.startDate,this.minDateDelta):null}set min(e){super.min=e}get max(){var e;return super.max||(null==(e=this.project)?void 0:e.startDate)?Ct.add(this.project.startDate,this.maxDateDelta):Tx}set max(e){super.max=e}};Mx.initClass(),Mx._$name="StartDateField";var Ax=new Date(2300,0,1),Ix=class extends Vc{static get $name(){return"EndDateField"}static get type(){return"enddatefield"}static get alias(){return"enddate"}static get defaultConfig(){return{project:null,eventRecord:null,strictParsing:!0}}get min(){var e;let n=this._min;const r=null==(e=this.eventRecord)?void 0:e.startDate;return r&&(n=Ct.max(n||r,r)),n}set min(e){super.min=e}get max(){var e;return super.max||(null==(e=this.project)?void 0:e.startDate)?Ct.add(this.project.startDate,200,"year"):Ax}set max(e){super.max=e}get calendarProvider(){var e,n;return(null!=(n=null==(e=this.eventRecord)?void 0:e.recurringEvent)?n:this.eventRecord)||this.project}get backShiftDate(){const e=this;let n=e.calendarProvider.run("skipWorkingTime",e.value,!1,e._step.magnitude,e._step.unit);return n=n&&e.calendarProvider.run("skipNonWorkingTime",n,!1),n}get forwardShiftDate(){const e=this;return e.calendarProvider.run("skipWorkingTime",e.value,!0,e._step.magnitude,e._step.unit)}transformTimeValue(e){const{calendarProvider:n,keepTime:r}=this;if(n&&"entered"!==r){const r=Ct.clearTime(e),i=Ct.add(r,1,"day"),o=n.run("skipNonWorkingTime",i,!1);if(Ct.isValidDate(o)&&Ct.isEqual(o,r,"day"))return Ct.copyTimeValues(r,o)}return!r&&e&&this.min&&Ct.clearTime(e,!1)<this.min?this.min:super.transformTimeValue(e)}};Ix.initClass(),Ix._$name="EndDateField";var Fx=class extends Yc{static get $name(){return"EffortField"}static get type(){return"effort"}static get alias(){return"effortfield"}};Fx.initClass(),Fx._$name="EffortField";var Px=class extends kx{static get $name(){return"GeneralTab"}static get type(){return"generaltab"}static get defaultConfig(){return{title:"L{General}",cls:"b-general-tab",defaults:{localeClass:this},items:{name:{type:"text",weight:100,required:!0,label:"L{Name}",clearable:!0,name:"name",cls:"b-name"},percentDone:{type:"number",weight:200,label:"L{% complete}",name:"renderedPercentDone",cls:"b-percent-done b-inline",flex:"1 0 50%",min:0,max:100},effort:{type:"effort",weight:300,label:"L{Effort}",name:"fullEffort",flex:"1 0 50%"},divider:{html:"",weight:400,dataset:{text:this.L("L{Dates}")},cls:"b-divider",flex:"1 0 100%"},startDate:{type:"startdate",weight:500,label:"L{Start}",name:"startDate",cls:"b-start-date b-inline",flex:"1 0 50%"},endDate:{type:"enddate",weight:600,label:"L{Finish}",name:"endDate",cls:"b-end-date b-last-row",flex:"1 0 50%"},duration:{type:"durationfield",weight:700,label:"L{Duration}",name:"fullDuration",flex:".5 0",cls:"b-inline"}}}}loadEvent(e){const n={unit:e.durationUnit,magnitude:1},{startDate:r,endDate:i,effort:o}=this.widgetMap;r&&(r.step=n,r.eventRecord=e),i&&(i.step=n,i.eventRecord=e),o&&(o.unit=e.effortUnit),super.loadEvent(e)}};Px.initClass(),Px._$name="GeneralTab";var buildItems=e=>e.map(((e,n)=>[n,e])),Ox=class extends Mc{static get $name(){return"DependencyTypePicker"}static get type(){return"dependencytypepicker"}construct(e){super.construct(e),Le.ion({locale:()=>{this.items=buildItems(this.L("L{DependencyType.long}"))},thisObj:this})}get store(){return this._items||(this.items=this._items=buildItems(this.L("L{DependencyType.long}"))),super.store}set store(e){super.store=e}};Ox.initClass(),Ox._$name="DependencyTypePicker";var markDependencyInvalid=(e,n)=>{e.instanceMeta(n).valid=!1},isDependencyMarkedValid=(e,n)=>!1!==e.instanceMeta(n).valid,Lx=class extends Rx{static get $name(){return"DependencyTab"}static get type(){return"dependencytab"}static get configurable(){return{dependencyIdField:null,layoutStyle:{flexFlow:"column nowrap"},sortField:null,taskComboSortField:"name",items:{grid:{type:"grid",weight:100,flex:"1 1 auto",emptyText:"",asyncEventSuffix:"PreCommit",disableGridRowModelWarning:!0,features:{group:!1},columns:{data:{id:{localeClass:this,text:"L{ID}",flex:1,editor:!1,htmlEncode:!1,hidden:!0,sortable(e,n){var r,i;const{dependencyIdField:o,direction:s}=this.grid.parent,a=null==(r=e[s])?void 0:r[o],l=null==(i=n[s])?void 0:i[o];return a===l?0:a<l?-1:1},renderer:({record:e,row:n,grid:r,column:i})=>{let o;const{direction:s}=r.parent,a=e[s];if(a&&isDependencyMarkedValid(e,r)){const e=r.parent.dependencyIdField,n=a[e];o="id"===e?!a||a.hasGeneratedId?"*":a.id:n}else n.addCls("b-invalid"),o='<div class="b-icon b-icon-warning"></div>';return o}},name:{localeClass:this,text:"L{Name}",flex:5,renderer:({value:e,grid:n,cellElement:r})=>{if(e){r.classList.toggle("b-inactive",e.inactive);const i=e[n.parent.dependencyIdField];return e.name+(null==i||e.hasGeneratedId?"":` (${i})`)}return""},finalizeCellEdit:"up.finalizeLinkedTaskCellEdit",editor:{type:"modelcombo",displayField:"name",valueField:"id",filterOperator:"*",allowInvalid:!0,listItemTpl(e){const n=this,r=n._dependencyTab||(n._dependencyTab=n.up("dependencytab",!0)),{dependencyIdField:i}=r,o=e.hasGeneratedId&&"id"===i?null:e[i];return w.xss`${e.name}${null!=o?` (${o})`:""}`}}},type:{localeClass:this,text:"L{Type}",field:"type",flex:3,sortable:!1,editor:"dependencytypepicker",renderer({value:e}){return this.L("L{DependencyType.long}")[e]}},lag:{localeClass:this,text:"L{Lag}",type:"duration",field:"fullLag",flex:2,editor:{allowNegative:!0}}}}},toolbar:{type:"toolbar",dock:"bottom",cls:"b-compact-bbar",items:{add:{type:"button",weight:210,cls:"b-add-button b-green",icon:"b-icon b-icon-add",onAction:"up.onAddClick"},remove:{type:"button",weight:220,cls:"b-remove-button b-red",icon:"b-icon b-icon-trash",disabled:!0,onAction:"up.onRemoveClick"}}}}}}async finalizeLinkedTaskCellEdit({grid:e,value:n,record:r}){const{project:i}=e.store.masterStore,o="toEvent"===this.direction,s=o?r.fromEvent:n,a=o?n:r.toEvent;switch(await i.validateDependency(s,a,r.type,r)){case rg.NoError:return!0;case rg.CyclicDependency:return"L{DependencyTab.cyclicDependency}"}return"L{DependencyTab.invalidDependency}"}afterConstruct(){super.afterConstruct();(this.grid=this.widgetMap.grid).ion({selectionChange:"onGridSelectionChange",startCellEdit:"onGridStartCellEdit",finishCellEdit:"onGridFinishCellEdit",cancelCellEdit:"onGridCancelCellEdit",thisObj:this})}get taskCombo(){const{grid:e}=this,n=null==e?void 0:e.columns.get(this.direction);return null==n?void 0:n.editor}loadEvent(e){const n=this,{grid:r,taskCombo:i,record:o}=n;super.loadEvent(e);const{dependencyStore:s,eventStore:a}=n.project,l=r.store.masterStore!==s,c=!l&&e!==o;if(l){n.depStoreGeneration=s.storage.generation,n.eventStoreGeneration=a.storage.generation,n.detachListeners("taskCombo"),r.store=s.chain((e=>e[n.negDirection]===n.record),null);const e=i.store=a.chain((e=>e!==n.record),null,{doRelayToMaster:[],excludeCollapsedRecords:!1});e.sort(n.taskComboSortField),e.filterBy((e=>!r.store.find((r=>{const i=r[n.direction],o=n._activeCellEdit,s=o&&i===o.record[n.direction];return i===e&&!s})))),i.ion({name:"taskCombo",change:"onGridCellEditChange",thisObj:n})}else c||s.storage.generation!==n.depStoreGeneration?(r.store.fillFromMaster(),n.depStoreGeneration=s.storage.generation):r.refreshRows(),(c||a.storage.generation!==n.eventStoreGeneration)&&(i.store.fillFromMaster(),n.eventStoreGeneration=a.storage.generation);c&&r.store.sort(n.sortField),n.requestReadyStateChange()}async insertNewDependency(){const e=this,{grid:n}=e,{cellEdit:r}=n.features;r.isEditing&&!r.editor.isValid&&r.cancelEditing();const[i]=n.store.insert(0,{[e.negDirection]:e.record});return e.depStoreGeneration=e.project.dependencyStore.storage.generation,await n.features.cellEdit.startEditing({field:e.direction,id:i.id}),markDependencyInvalid(i,n),i}onAddClick(){this.insertNewDependency()}onRemoveClick(){const e=this,{grid:n}=e,r=n.selectedRecords;n.features.cellEdit.cancelEditing(!0),e.project.dependencyStore.remove(r),n.selectedRecord=n.store.getNext(r[0]),e.taskCombo.store.fillFromMaster()}onGridSelectionChange({selection:e}){const n=this.widgetMap.remove,r=Boolean(!(null==e?void 0:e.length)||this.up((e=>e.readOnly)));n.containsFocus&&r&&this.grid.focusCell({rowIndex:-1,columnIndex:0}),n.disabled=r}clearActiveEditorErrors(){const e=this._activeCellEdit;e&&e.column.field===this.direction&&e.editor.inputField.clearError()}onGridCellEditChange(){this.clearActiveEditorErrors()}onGridStartCellEdit({editorContext:e}){const n=this,r=n._editingDependency=e.record,{grid:i,direction:o}=n;n._activeCellEdit=e,e.column.field===o&&(isDependencyMarkedValid(r,i)?n.clearActiveEditorErrors():r[o]?e.editor.inputField.setError("L{DependencyTab.cyclicDependency}"):e.editor.inputField.setError("L{DependencyTab.invalidDependency}"))}async onGridFinishCellEdit({editorContext:e}){const n=this,{record:r,column:i}=e,{grid:o,direction:s}=n;i.field===s?(((e,n)=>{e.instanceMeta(n).valid=!0})(r,o),n.taskCombo.store.fillFromMaster()):n.redrawDependencyRow(r),n._activeCellEdit=n._editingDependency=null,n.requestReadyStateChange()}afterCancel(){this._activeCellEdit&&this.grid.features.cellEdit.cancelEditing(!0)}onGridCancelCellEdit(){const e=this,n=e._editingDependency;n&&(n[e.direction]||(markDependencyInvalid(n,e.grid),e.redrawDependencyRow(n)),e._activeCellEdit=e._editingDependency=null),e.requestReadyStateChange()}redrawDependencyRow(e){const{grid:n}=this,r=n.rowManager.getRowById(e);if(r){n.store.indexOf(e)>=0&&r.render(n.store.indexOf(e),e)}}get canSave(){const{grid:e}=this;return e.store.every((n=>isDependencyMarkedValid(n,e)))}updateReadOnly(e){const{add:n,remove:r}=this.widgetMap;super.updateReadOnly(...arguments),n.hidden=r.hidden=e}};Lx._$name="DependencyTab";var _x=class extends Lx{static get $name(){return"SuccessorsTab"}static get type(){return"successorstab"}static get configurable(){return{cls:"b-successors-tab",direction:"toEvent",negDirection:"fromEvent",title:"L{DependencyTab.Successors}",sortField:"toEventName",items:{grid:{columns:{data:{name:{field:"toEvent"}}}}}}}};_x.initClass(),_x._$name="SuccessorsTab";var $x=class extends Lx{static get $name(){return"PredecessorsTab"}static get type(){return"predecessorstab"}static get configurable(){return{cls:"b-predecessors-tab",direction:"fromEvent",negDirection:"toEvent",title:"L{DependencyTab.Predecessors}",sortField:"fromEventName",items:{grid:{columns:{data:{name:{field:"fromEvent"}}}}}}}};$x.initClass(),$x._$name="PredecessorsTab";var jx=class extends Rx{static get $name(){return"ResourcesTab"}static get type(){return"resourcestab"}static get configurable(){return{title:"L{Resources}",cls:"b-resources-tab",layoutStyle:{flexFlow:"column nowrap"},showUnits:null,items:{grid:{type:"grid",weight:100,flex:"1 1 auto",columns:{data:{resource:{localeClass:this,text:"L{Resource}",field:"resource",flex:7,renderer:({value:e})=>(null==e?void 0:e.name)||"",editor:{type:"modelcombo",displayField:"name",valueField:"id"}},units:{type:"number",localeClass:this,text:"L{Units}",field:"units",flex:3,renderer:e=>this.L("L{unitsTpl}",e),min:0,max:100,step:10}}},disableGridRowModelWarning:!0,asyncEventSuffix:"PreCommit"},toolbar:{type:"toolbar",dock:"bottom",cls:"b-compact-bbar",items:{add:{type:"button",weight:210,cls:"b-add-button b-green",icon:"b-icon b-icon-add"},remove:{type:"button",weight:220,cls:"b-remove-button b-red",icon:"b-icon b-icon-trash",disabled:!0}}}}}}afterConstruct(){super.afterConstruct();const e=this,n=e.addButton=e.widgetMap.add,r=e.removeButton=e.widgetMap.remove,i=e.grid=e.widgetMap.grid;null==n||n.ion({click:"onAddClick",thisObj:e}),null==r||r.ion({click:"onRemoveClick",thisObj:e}),i.ion({selectionChange:"onGridSelectionChange",startCellEdit:"onGridStartCellEdit",finishCellEdit:"onGridFinishCellEdit",cancelCellEdit:"onGridCancelCellEdit",thisObj:e})}updateReadOnly(e){const{add:n,remove:r}=this.widgetMap;super.updateReadOnly(...arguments),n.hidden=r.hidden=e}get resourceCombo(){var e;const n=null==(e=this.grid)?void 0:e.columns.get("resource");return null==n?void 0:n.editor}updateShowUnits(e){const n=this.widgetMap.grid.columns.get("units");n&&(n.hidden=!e)}loadEvent(e){const n=this,{resourceCombo:r,grid:i,record:o}=n;super.loadEvent(e);const{assignmentStore:s,resourceStore:a}=n.project,l=i.store.masterStore!==s,c=!l&&e!==o;"boolean"!=typeof this.showUnits&&(i.columns.get("units").hidden=!e.isTask),l?(n.assignmentStoreGeneration=s.storage.generation,n.resourceStoreGeneration=a.storage.generation,i.store=s.chain((e=>n.record&&e.event===n.record),null),r.store=a.chain((e=>!e.isSpecialRow&&n.record&&!n.record.isAssignedTo(e)||!n.activeAssignment||n.activeAssignment.resource===e),null,{groupers:a.groupers})):((c||s.storage.generation!==n.assignmentStoreGeneration)&&i.store.fillFromMaster(),(c||a.storage.generation!==n.resourceStoreGeneration)&&r.store.fillFromMaster())}get activeAssignment(){return this.grid.features.cellEdit.activeRecord}async insertNewAssignment(){const e=this,{project:n,grid:r}=e,i=n.assignmentStore,[o]=i.insert(0,{event:e.record,resource:null,units:100});return e.assignmentStoreGeneration=i.storage.generation,await r.features.cellEdit.startEditing({field:"resource",id:o.id}),o}beforeSave(){this.pruneInvalidAssignments()}onAddClick(){this.insertNewAssignment()}onRemoveClick(){const{grid:e}=this;e.store.remove(e.selectedRecords),e.selectedRecords=null,this.removeButton.disable()}onGridSelectionChange({selection:e}){const{removeButton:n}=this,r=!(null==e?void 0:e.length)||this.up((e=>e.readOnly));n.containsFocus&&r&&this.grid.focus(),n.disabled=r}onGridStartCellEdit({editorContext:e}){"resource"===e.column.field&&(this.resourceCombo.store.fillFromMaster(),this._editingAssignment=e.record,this._activeCellEdit=e)}onGridFinishCellEdit(){this._activeCellEdit=this._editingAssignment=null}onGridCancelCellEdit(){this._activeCellEdit=this._editingAssignment=null}pruneInvalidAssignments(){const{store:e}=this.grid;e.remove(e.query((e=>!e.isValid)))}};jx.initClass(),jx._$name="ResourcesTab";var zx=class extends Mc{static get $name(){return"ConstraintTypePicker"}static get type(){return"constrainttypepicker"}static get configurable(){return{valueField:"id"}}updateLocalization(){super.updateLocalization(),this.store.data=this.buildStoreData()}buildStoreData(){const e=this;return[{id:"none",text:e.L("L{none}")},{id:"muststarton",text:e.L("L{muststarton}")},{id:"mustfinishon",text:e.L("L{mustfinishon}")},{id:"startnoearlierthan",text:e.L("L{startnoearlierthan}")},{id:"startnolaterthan",text:e.L("L{startnolaterthan}")},{id:"finishnoearlierthan",text:e.L("L{finishnoearlierthan}")},{id:"finishnolaterthan",text:e.L("L{finishnolaterthan}")}]}set value(e){super.value=e}get value(){const e=super.value;return"none"===e?null:e}get store(){return this._store||(this.store=new yi({data:this.buildStoreData(),allowNullId:!0})),this._store}set store(e){super.store=e}};zx.initClass(),zx._$name="ConstraintTypePicker";var Bx=class extends Mc{static get $name(){return"SchedulingModePicker"}static get type(){return"schedulingmodecombo"}static get configurable(){return{allowedModes:null,store:{data:this.defaultStoreData}}}static get defaultStoreData(){return[{id:tg.Normal,text:this.L("L{Normal}")},{id:tg.FixedDuration,text:this.L("L{Fixed Duration}")},{id:tg.FixedUnits,text:this.L("L{Fixed Units}")},{id:tg.FixedEffort,text:this.L("L{Fixed Effort}")}]}changeAllowedModes(e){return"string"==typeof e?e.split(","):e}updateAllowedModes(e){this._allowedModes=e,e?this.store.addFilter({id:"allowed-mode-filter",filterBy:e=>this._allowedModes.includes(e.id)}):this.store.removeFilter("allowed-mode-filter")}updateLocalization(){super.updateLocalization(),this.store.data=this.constructor.defaultStoreData}};Bx.initClass(),Bx._$name="SchedulingModePicker";var Hx=class extends kx{static get $name(){return"AdvancedTab"}static get type(){return"advancedtab"}static get defaultConfig(){const e={flex:"0 0 64%",labelWidth:"30%",cls:"b-inline"},n={flex:"0 0 34%",labelWidth:"80%"};return{localeClass:this,title:"L{Advanced}",cls:"b-advanced-tab",defaults:{localeClass:this},items:{calendarField:{type:"calendarfield",weight:100,ref:"",name:"calendar",label:"L{Calendar}",...e},ignoreResourceCalendarField:{type:"checkbox",weight:100,name:"ignoreResourceCalendar",label:"L{Ignore resource calendar}",cls:"b-ignore-resource-calendar",...n},schedulingModeField:{type:"schedulingmodecombo",weight:300,name:"schedulingMode",label:"L{Scheduling mode}",...e},effortDrivenField:{type:"checkbox",weight:400,name:"effortDriven",label:"L{Effort driven}",...n},divider:{weight:500,html:"",dataset:{text:this.L("L{Constraint}")},cls:"b-divider",flex:"1 0 100%"},constraintTypeField:{type:"constrainttypepicker",weight:600,name:"constraintType",label:"L{Constraint type}",clearable:!0,...e},rollupField:{type:"checkbox",weight:700,name:"rollup",label:"L{Rollup}",...n},constraintDateField:{type:"date",weight:800,name:"constraintDate",label:"L{Constraint date}",keepTime:"entered",...e},inactiveField:{type:"checkbox",weight:900,name:"inactive",label:"L{Inactive}",...n},manuallyScheduledField:{type:"checkbox",weight:1e3,name:"manuallyScheduled",label:"L{Manually scheduled}",cls:"b-last-row",style:"margin-left:auto",...n}}}}get calendarField(){return this.widgetMap.calendarField}get constraintTypeField(){return this.widgetMap.constraintTypeField}get constraintDateField(){return this.widgetMap.constraintDateField}get effortDrivenField(){return this.widgetMap.effortDrivenField}get manuallyScheduledField(){return this.widgetMap.manuallyScheduledField}get rollupField(){return this.widgetMap.rollupField}get schedulingModeField(){return this.widgetMap.schedulingModeField}loadEvent(e){const{calendarField:n,constraintTypeField:r}=this,{calendarManagerStore:i}=e.project,o=(null==n?void 0:n.store)!==i;if(n&&o&&(n.store=i.chain(void 0,void 0,{excludeCollapsedRecords:!1})),null==r?void 0:r.isConstraintTypePicker){const{store:n}=r;n.removeFilter("constraintTypeApplicable"),n.filter({id:"constraintTypeApplicable",filterBy:n=>e.run("isConstraintTypeApplicable",n.id)})}super.loadEvent(e)}afterDelete(){const{constraintTypeField:e}=this;(null==e?void 0:e.isConstraintTypePicker)&&e.store.removeFilter("constraintTypeApplicable"),super.afterDelete(...arguments)}};Hx.initClass(),Hx._$name="AdvancedTab";var Vx=class extends kx{static get $name(){return"NotesTab"}static get type(){return"notestab"}static get configurable(){return{cls:"b-notes-tab",title:this.L("L{Notes}"),tab:{icon:"b-icon-note",titleProperty:"tooltip"},layoutConfig:{alignItems:"flex-start",alignContent:"stretch"},items:{noteField:{weight:100,type:"textfield",inputAttributes:{tag:"textarea"},cls:"b-taskeditor-notes-field",name:"note"}}}}};Vx.initClass(),Vx._$name="NotesTab";var Nx=class extends Ex{static get type(){return"gantttaskeditor"}static get $name(){return"GanttTaskEditor"}static get defaultConfig(){return{items:[{type:"tabpanel",defaultType:"formtab",ref:"tabs",flex:"1 0 100%",autoHeight:!0,layoutConfig:{alignItems:"stretch",alignContent:"stretch"},defaults:{scrollable:{overflowY:!0}},items:{generalTab:{type:"generaltab",weight:100},predecessorsTab:{type:"predecessorstab",weight:200},successorsTab:{type:"successorstab",weight:300},resourcesTab:{type:"resourcestab",weight:400},advancedTab:{type:"advancedtab",weight:500},notesTab:{type:"notestab",weight:600}}}]}}};Nx.initClass(),Nx._$name="GanttTaskEditor";var qx=class extends kx{static get $name(){return"SchedulerGeneralTab"}static get type(){return"schedulergeneraltab"}static get defaultConfig(){return{title:"L{General}",cls:"b-general-tab",defaults:{localeClass:this,weight:10},items:{nameField:{type:"text",required:!0,label:"L{Name}",clearable:!0,name:"name",cls:"b-name",weight:100},resourcesField:{type:"combo",label:"L{Resources}",name:"resources",editable:!0,valueField:"id",displayField:"name",highlightExternalChange:!1,cls:"b-resources",weight:200},startDateField:{type:"datetime",label:"L{Start}",name:"startDate",cls:"b-start-date",flex:"1 0 100%",weight:300,dateField:{type:"startdatefield"}},endDateField:{type:"datetime",label:"L{Finish}",name:"endDate",cls:"b-end-date",flex:"1 0 100%",weight:400,dateField:{type:"enddatefield"}},durationField:{type:"durationfield",label:"L{Duration}",name:"fullDuration",flex:"1 0 50%",cls:"b-inline",min:0,weight:500},percentDoneField:{type:"number",label:"L{% complete}",name:"renderedPercentDone",flex:"1 0 50%",min:0,max:100,weight:600},effortField:{type:"durationfield",label:"L{Effort}",name:"fullEffort",weight:620},preambleField:{type:"durationfield",hidden:!0,useAbbreviation:!0,weight:650,label:"L{SchedulerGeneralTab.Preamble}",name:"preamble",flex:"1 0 50%",cls:"b-inline"},postambleField:{type:"durationfield",hidden:!0,useAbbreviation:!0,weight:660,label:"L{SchedulerGeneralTab.Postamble}",name:"postamble",flex:"1 0 50%"}}}}loadEvent(e){var n;const{project:r}=this,i={unit:e.durationUnit,magnitude:1},{isParent:o}=e,{durationField:s,percentDoneField:a,startDateField:l,endDateField:c,resourcesField:d}=this.widgetMap,u=(null==d?void 0:d.store.masterStore)!==r.resourceStore;s&&(s.disabled=o,a||s.element.classList.remove("b-inline")),a&&(a.disabled=o),l&&(l.dateField.eventRecord=e,Ct.compareUnits(i.unit,"hour")>0?l.dateField.step=i:l.timeField.step=i),c&&(c.dateField.eventRecord=e,Ct.compareUnits(i.unit,"hour")>0?c.dateField.step=i:c.timeField.step=i,c.disabled=o),d&&(d.multiSelect=null!=(n=d.config.multiSelect)?n:!r.eventStore.usesSingleAssignment,u&&(d.store=r.resourceStore.chain((e=>!e.isSpecialRow)))),super.loadEvent(...arguments)}onFieldChange({source:e,valid:n,userAction:r,value:i}){if(r&&n){const{eventStore:n}=this.record,r="resources"===e.name&&0===i.length&&this.autoUpdateRecord&&n.removeUnassignedEvent;r&&(n.removeUnassignedEvent=!1),super.onFieldChange(...arguments),r&&(n.removeUnassignedEvent=!0)}}beforeSave(){0===this.record.resources.length&&this.record.eventStore.removeUnassignedEvent&&this.record.remove(),super.beforeSave()}};qx.initClass(),qx._$name="SchedulerGeneralTab";var Wx=class extends Rx{get recurrenceEditor(){return this.widgetMap.recurrenceEditor}loadEvent(e){var n;this.recurrenceEditor&&(this.loadingRecord=!0,this.recurrenceEditor.record=null!=(n=e.recurrence)?n:null,this.loadingRecord=!1),super.loadEvent(e)}onFieldChange({source:e,value:n}){const r=this;if(!r.isConfiguring&&!r.recurrenceEditor.assigningValues&&!r.loadingRecord){const{record:i}=r;i.recurrence?e===r.recurrenceEditor.widgetMap.frequencyField&&"NONE"===n?i.recurrence=null:r.recurrenceEditor.syncEventRecord(i.recurrence):i.recurrence=new i.recurrenceModel({}),r.up((e=>e.isTaskEditorBase)).editingRecurring=!0}}};__publicField(Wx,"$name","RecurrenceTab"),__publicField(Wx,"type","recurrencetab"),__publicField(Wx,"configurable",{title:"L{title}",cls:"b-recurrence-tab",scrollable:!0,items:{recurrenceEditor:{type:"recurrenceeditorpanel",addNone:!0}}}),Wx.initClass(),Wx._$name="RecurrenceTab";var Ux=class extends kx{static get $name(){return"SchedulerAdvancedTab"}static get type(){return"scheduleradvancedtab"}static get configurable(){return{cls:"b-advanced-tab",tab:{icon:"b-icon-advanced",tooltip:"L{SchedulerAdvancedTab.Advanced}"},defaults:{localeClass:this},items:{calendarField:{type:"calendarfield",name:"calendar",label:"L{Calendar}",weight:100},constraintTypeField:{type:"constrainttypepicker",name:"constraintType",label:"L{Constraint type}",clearable:!0,weight:200},constraintDateField:{type:"date",name:"constraintDate",label:"L{Constraint date}",keepTime:"entered",weight:300},manuallyScheduledField:{type:"checkbox",name:"manuallyScheduled",label:"L{Manually scheduled}",weight:400},schedulingModeField:{type:"schedulingmodecombo",name:"schedulingMode",label:"L{Scheduling mode}",hidden:!0,weight:450,allowedModes:`${tg.Normal},${tg.FixedDuration}`},effortDrivenField:{type:"checkbox",weight:460,name:"effortDriven",label:"L{Effort driven}",hidden:!0,flex:"1 0 50%"},inactiveField:{type:"checkbox",weight:500,name:"inactive",label:"L{Inactive}"},ignoreResourceCalendarField:{type:"checkbox",weight:600,name:"ignoreResourceCalendar",label:"L{Ignore resource calendar}",flex:"1 0 50%"}}}}get calendarField(){return this.widgetMap.calendarField}get constraintTypeField(){return this.widgetMap.constraintTypeField}get constraintDateField(){return this.widgetMap.constraintDateField}get effortDrivenField(){return this.widgetMap.effortDrivenField}get manuallyScheduledField(){return this.widgetMap.manuallyScheduledField}get schedulingModeField(){return this.widgetMap.schedulingModeField}loadEvent(e){const n=this,{project:r}=n,{calendarField:i}=(n.record,n);i&&(i.store=r.calendarManagerStore,i.hidden=!r.calendarManagerStore.count),super.loadEvent(...arguments)}};Ux.initClass(),Ux._$name="SchedulerAdvancedTab";var Gx=/(pre|post)amble/,Yx=class extends Ex{static get type(){return"schedulertaskeditor"}static get $name(){return"SchedulerTaskEditor"}static get defaultConfig(){return{enableEventSpanBuffer:!1,items:[{type:"tabpanel",defaultType:"formtab",ref:"tabs",flex:"1 0 100%",autoHeight:!0,layoutConfig:{alignItems:"stretch",alignContent:"stretch"},defaults:{scrollable:{overflowY:!0}},items:{generalTab:{type:"schedulergeneraltab",weight:100},recurrenceTab:{type:"recurrencetab",weight:150},predecessorsTab:{type:"predecessorstab",weight:200},successorsTab:{type:"successorstab",weight:300},advancedTab:{type:"scheduleradvancedtab",weight:500},notesTab:{type:"notestab",weight:600}}}]}}processWidgetConfig(e){var n,r;return(null==(n=e.ref)?void 0:n.match(Gx))&&(e.hidden=!this.enableEventSpanBuffer),"recurrenceTab"===e.ref&&(e.hidden=!(null==(r=this.owner)?void 0:r.enableRecurringEvents)),super.processWidgetConfig(e)}onFocusOut({relatedTarget:e}){var n;const r=null==(n=null==e?void 0:e.closest(".b-sch-event-wrap"))?void 0:n.elementData.eventRecord;if(!r||r!==this.loadedRecord)return super.onFocusOut(...arguments);this.setTimeout((()=>this.focus()),100)}};Yx.initClass(),Yx._$name="SchedulerTaskEditor";var Kx=class extends(sr.mixin(Delayable_default,TaskEditStm_default)){static get $name(){return"TaskEdit"}static get pluginConfig(){return{chain:["populateEventMenu","onEventEnterKey"],assign:["editEvent"]}}static get defaultConfig(){return{triggerEvent:"eventdblclick",editorClassMap:{[cg.SchedulerBasic]:"schedulertaskeditor",[cg.SchedulerPro]:"schedulertaskeditor",[cg.Gantt]:"gantttaskeditor"},editorClass:null,editorConfig:null,confirmDelete:!0,saveAndCloseOnEnter:!0,blurAction:"cancel",weekStartDay:null,scrollIntoView:!0}}static get configurable(){return{items:null,suspendHasChangesEvent:!1}}construct(e,n){var r;e.taskEdit=this,super.construct(e,Et.assign({weekStartDay:e.weekStartDay,enableEventSpanBuffer:null==(r=e.features.eventBuffer)?void 0:r.enabled},n)),e.ion({[this.triggerEvent]:"onActivateEditor",readOnly:"onClientReadOnlyToggle",dragCreateEnd:"onDragCreateEnd",afterEventDrop:"onEventDropped",eventResizeEnd:"onEventResized",thisObj:this})}doDestroy(){var e;this.detachFromProject(),null==(e=this.editor)||e.destroy(),this.deleteConfirmationPromise&&dd.hide(),super.doDestroy()}onClientReadOnlyToggle({readOnly:e}){this.editor&&(this.editor.readOnly=e)}get scheduler(){return this.client}getElementFromTaskRecord(e,n){return this.client.getElementFromEventRecord(e,n)}scrollEventIntoView(e,n){this.client.scrollResourceEventIntoView(n,e)}get isValid(){return this.editor.eachWidget((e=>!!(!0===e.isValid||e.hidden||e.disabled||e.isField&&!e.name)||!1!==e.isValid),!0)}get project(){return this.scheduler.project}attachToProject(){this.detachFromProject(),this.project.ion({name:"project",loadstart:()=>this.save(),dataReady:"onDataReady",thisObj:this})}detachFromProject(){this.detachListeners("project")}onDataReady(){const{record:e}=this;(null==e?void 0:e.project)&&this.scheduler.taskStore.includes(e)?this.load(e,!0):this.editor.close()}get isEditing(){return!!this._editing}onActivateEditor({eventRecord:e,resourceRecord:n,eventElement:r}){e===this.record&&this.isEditing||this.editEvent(e,n,r)}async editEvent(e,n=null,r=null,i=null){var o;const s=this,{scheduler:a}=s;e=e.isEventSegment?e.event:e;const l=!s.disabled&&!e.readOnly&&!a.project.isDelayingCalculation&&(e.project||!a.usesDisplayStore);if(l&&i&&(i.transferred=!0),s.isEditing&&await s.cancel(),await Promise.all([s._cancelling,s._hiding]).catch((()=>{})),a.isGanttBase||n||(n=e.resource||(null==(o=e.resources)?void 0:o[0])),l){const{taskStore:o}=a;if(s._editing=!0,i?(s.stmInitiallyAutoRecord=i.stmInitiallyAutoRecord,s.stmInitiallyDisabled=i.stmInitiallyDisabled,s.hasStmCapture=!0):s.hasStmCapture||s.captureStm(!0),a.project.suspendAutoSync(),"function"==typeof e&&(e=e()),!(e=e.$original).isOccurrence&&!o.includes(e)&&!e.isCreating&&(e.isCreating=!0,o.add(e),n&&a.assignmentStore.assignEventToResource(e,n),await a.project.commitAsync(),s.isDestroyed))return;if(s.scrollIntoView&&!a.timeAxisSubGrid.collapsed&&!r&&o.includes(e)&&(n||a.isGantt)&&(await s.scrollEventIntoView(e,n),s.isDestroyed))return;const l=r||Gn.down(s.getElementFromTaskRecord(e,n),a.eventInnerSelector),c=s.getEditor(e);if(!1!==await s.triggerOnClient("beforeTaskEdit",{taskEdit:s,taskRecord:e,taskElement:l})){if(s.suspendHasChangesEvent&&a.project.suspendChangesTracking(),a.element.classList.add("b-taskeditor-editing"),await a.project.commitAsync(),s.isDestroyed)return;s.load(e),s.triggerOnClient("beforeTaskEditShow",{taskEdit:s,taskRecord:e,taskElement:l,editor:c});const{widgetMap:n}=c,r=e.parent&&!e.parent.isRoot;n.deleteButton&&(n.deleteButton.hidden=a.readOnly||e.isCreating||c.readOnly),a.features.nestedEvents&&(n.predecessorsTab&&(n.predecessorsTab.disabled=r),n.successorsTab&&(n.successorsTab.disabled=r),n.resourcesField&&(n.resourcesField.disabled=r)),s.attachToProject(),c.centered?await c.show():a.timeAxisSubGrid.collapsed||!l||a.isGanttBase&&!s.scrollIntoView&&!Gt.from(l).intersect(Gt.from(a.timeAxisSubGridElement))?await c.showBy({target:a.element,anchor:!1,align:"c-c",clippedBy:null}):await c.showBy({target:l,anchor:!0,offset:-5})}else{if(a.project.resumeAutoSync(),await s.rejectStmTransaction(),s.isDestroyed)return;s.disableStm(),s.freeStm(),s._editing=!1}}}getEditor(e=this.record){var n;const r=this,{client:i}=r;let{editor:o}=r;if(!o){const s=Et.merge({clippedBy:[i.timeAxisSubGridElement,i.bodyContainer],eventEditFeature:r,weekStartDay:r.weekStartDay,enableEventSpanBuffer:r.enableEventSpanBuffer,saveAndCloseOnEnter:r.saveAndCloseOnEnter,blurAction:r.blurAction,owner:i,dependencyIdField:(null==(n=r.editorConfig)?void 0:n.dependencyIdField)||i.dependencyIdField,project:r.project,durationDisplayPrecision:i.durationDisplayPrecision,tabPanelItems:r.items,internalListeners:{beforeHide:{fn:"onBeforeHide",prio:-1e3},cancel:"onCancel",delete:"onDelete",save:"onSave",thisObj:r},tabsConfig:r.tabsConfig},r.editorConfig);if(r.editorClass&&!s.type)o=r.editor=r.editorClass.new(s);else{const n=((null==e?void 0:e.project)||r.project).getType();o=r.editor=bs.create(Object.assign({type:r.editorClassMap[n]||"schedulertaskeditor"},s))}}return o.readOnly=(i.readOnly||(null==e?void 0:e.isOccurrence)||(null==e?void 0:e.isRecurring))&&!o.editingRecurring,o.project=r.project,o}load(e,n){const r=this,i=r.getEditor(e);r._loading=!0,e.isEventSegment&&(e=e.event),r.record=e,i.loadEvent(e,n),r._loading=!1}async save(){const e=this,{scheduler:n,record:r}=e;if(e.isEditing){const i=e.getEditor();if(!e.isValid||!1===await e.triggerOnClient("beforeTaskSave",{taskRecord:r,editor:i}))return;e.detachFromProject(),i.beforeSave(),r.isCreating=!1,i.resetRecurrenceData=i.editingRecurring=null,e.freeStm(!0),e._editing=!1,await i.close(),n.project.resumeAutoSync(!0),n.element.classList.remove("b-taskeditor-editing"),e.triggerOnClient("afterTaskSave",{taskRecord:r,editor:i}),i.afterSave(),e.suspendHasChangesEvent&&n.project.resumeChangesTracking(),e.triggerOnClient("afterTaskEdit",{taskRecord:r,editor:i})}}async doCancel(){var e,n,r;const i=this,{scheduler:o,record:s}=i;if(i.isEditing){i._editing=!1,i.detachFromProject();const{project:a}=i,l=i.getEditor();if(l.editingRecurring=null,l.beforeCancel(),i.isDestroyed)return void(null==(e=a.resumeAutoSync)||e.call(a,!1));if((null==s?void 0:s.isCreating)?s.remove():await i.rejectStmTransaction(),i.isDestroyed)return void(null==(n=a.resumeAutoSync)||n.call(a,!1));if(i.disableStm(),await a.commitAsync(),i.isDestroyed)return void(null==(r=a.resumeAutoSync)||r.call(a,!1));i.freeStm(),l.afterCancel(),a.resumeAutoSync(!1),o.element.classList.remove("b-taskeditor-editing"),i.trigger("afterTaskEdit"),i.triggerOnClient("taskEditCanceled",{taskRecord:s,editor:l}),i.suspendHasChangesEvent&&a.resumeChangesTracking(),i.triggerOnClient("afterTaskEdit",{taskRecord:s,editor:l})}}async cancel(){const e=this,{editor:n}=e,{resetRecurrenceData:r}=n;return r&&(r.recurringTimeSpan.exceptionDates=r.originalExceptionDates,n.resetRecurrenceData=null),e._cancelling||(e._cancelling=e.doCancel().finally((()=>e._cancelling=void 0)))}async delete(){const e=this,{editor:n,scheduler:r,record:i,project:o}=e;(i.isCreating||!1!==await e.triggerOnClient("beforeTaskDelete",{taskRecord:i,editor:n}))&&(e.detachFromProject(),n.beforeDelete(),i.remove(),e.freeStm(),await o.commitAsync(),o.resumeAutoSync(!i.isCreating),e.isDestroyed||(e._editing=!1,n.close(),n.afterDelete(),r.element.classList.remove("b-taskeditor-editing"),e.suspendHasChangesEvent&&r.project.resumeChangesTracking(),e.triggerOnClient("afterTaskEdit",{editor:n,taskRecord:i})))}onSave(){this.requestAnimationFrame((()=>this.save()))}onCancel(){this.cancel().then()}async onDelete(){const e=this;if(e.confirmDelete){const{editor:n}=e,r=n.autoClose;n.autoClose=!1,e.deleteConfirmationPromise=dd.confirm({title:"L{TaskEdit.ConfirmDeletionTitle}",message:"L{TaskEdit.ConfirmDeletionMessage}",okButton:"L{TaskEditorBase.Delete}",rootElement:e.rootElement});const i=await e.deleteConfirmationPromise;n.autoClose=r,e.deleteConfirmationPromise=null,i===dd.yesButton&&e.delete()}else e.requestAnimationFrame((()=>e.delete()))}onBeforeHide({source:e,animate:n}){e.hideAnimation&&!1!==n&&(this._hiding=new Promise((n=>{e.ion({hideAnimationEnd:n})})).finally((()=>this._hiding=void 0)))}onDragCreateEnd({eventRecord:e,resourceRecord:n,proxyElement:r,stmCapture:i}){!this.disabled&&e.isCreating&&this.editEvent(e,n,null,i)}populateEventMenu({eventRecord:e,resourceRecord:n,items:r}){this.scheduler.readOnly||(r.editEvent={text:"L{Edit task}",localeClass:this,icon:"b-icon b-icon-edit",weight:-200,disabled:this.disabled||e.readOnly,onItem:()=>this.editEvent(e,n)})}onEventEnterKey({assignmentRecord:e,eventRecord:n}){e?this.editEvent(n,e.resource):n&&this.editEvent(n,n.resource)}async triggerOnClient(e,n){const r=e.replace(/task/,"event").replace(/Task/,"Event"),i=await this.scheduler.trigger(...arguments);n.eventRecord=n.taskRecord,n.eventRecords=[n.taskRecord];const o=await this.scheduler.trigger(r,n);return i&&o}onEventDropped({eventRecords:e}){var n;const r=(null==(n=this.editor)?void 0:n.loadedRecord)&&e.find((e=>e===this.editor.loadedRecord));r&&this.onEventResized({eventRecord:r})}onEventResized({eventRecord:e}){const{editor:n}=this;(null==n?void 0:n.isVisible)&&e===n.loadedRecord&&n.realign()}};Kx._$name="TaskEdit",du.registerFeature(Kx,!0,"SchedulerPro"),du.registerFeature(Kx,!1,"ResourceHistogram");var Xx={isHighlightConfig:!0,clearExisting:!1},Zx=class extends sr{constructor(){super(...arguments),__publicField(this,"domConfigs",[]),__publicField(this,"configs",[])}static get $name(){return"TimeSpanHighlight"}static get configurable(){return{padding:0}}static get pluginConfig(){return{assign:["highlightTimeSpan","highlightTimeSpans","unhighlightTimeSpans"],chain:["onTimeAxisViewModelUpdate"]}}construct(){super.construct(...arguments),this.client.rowManager.ion({renderDone:this.onViewChanged,thisObj:this})}highlightTimeSpan(e,n=!0){const r=this,{startDate:i,endDate:o,name:s,surround:a,padding:l=r.padding,clearExisting:c=!0}=e,{client:d}=r,u=e.isTimeSpan?e:e.taskRecord;let h=e.resourceRecord||e.resource;const{animationId:g}=e;if(g&&Gn.addTemporaryClass(d.element,"b-transition-highlight",500,d),c&&(r.domConfigs.length=r.configs.length=0),r.disabled)return;if(a)return void r.surroundTimeSpan(e);let p;r.configs.push(e),d.isGanttBase?p=d.getScheduleRegion(u,!0,{start:i,end:o}):(h&&(h=d.store.getById(h)),p=d.getScheduleRegion(h,null,!0,{start:i,end:o},!h)),p&&(l&&(d.isHorizontal?p.inflate(l,0,l,0):p.inflate(0,l,0,l)),r.domConfigs.push(p.visualize({children:[{class:"b-sch-highlighted-range-name",html:s}],dataset:{syncId:g},class:{"b-sch-highlighted-range":1,[e.cls]:e.cls,[e.class||"b-sch-highlighted-range-default"]:1}},!0)),n&&r.draw())}draw(){$o.sync({targetElement:this.containerEl,domConfig:{onlyChildren:!0,children:this.domConfigs}})}surroundTimeSpan(e){this.highlightTimeSpans([Object.assign({},e,{animationId:(e.animationId||"")+"Before",class:"b-unavailable",surround:!1,startDate:this.client.startDate,endDate:e.startDate}),Object.assign({},e,{animationId:(e.animationId||"")+"After",class:"b-unavailable",surround:!1,startDate:e.endDate,endDate:this.client.endDate})],{clearExisting:e.clearExisting})}highlightTimeSpans(e,n={}){const r=this,{clearExisting:i=!0}=n;i&&(e=e.slice(),r.domConfigs.length=r.configs.length=0),r.disabled||(e.forEach((e=>{r.highlightTimeSpan(e.isHighlightConfig?e:Object.setPrototypeOf(Xx,e),!1)})),r.draw())}async unhighlightTimeSpans(e=!1){const n=this,{client:r}=n;e&&Gn.addTemporaryClass(r.element,"b-transition-highlight",500,r),Array.from(n.containerEl.children).forEach((i=>{e?(i.style.opacity=0,n.fadeOutDetacher=cn.onTransitionEnd({element:i,property:"opacity",thisObj:r,handler:()=>{n.domConfigs.length=n.configs.length=0,n.draw()}})):(n.domConfigs.length=n.configs.length=0,n.draw())}))}get containerEl(){return this._containerEl||(this._containerEl=Gn.createElement({parent:this.client.foregroundCanvas,retainElement:!0,class:"b-sch-highlight-container"})),this._containerEl}onTimeAxisViewModelUpdate(){this.onViewChanged()}onViewChanged(){this.configs.length>0&&this.highlightTimeSpans(this.configs)}updateDisabled(e,n){e&&this.unhighlightTimeSpans(),super.updateDisabled(e,n)}get featureClass(){}};Zx._$name="TimeSpanHighlight",du.registerFeature(Zx,!1,["SchedulerPro","Gantt"]);var Qx=class{constructor({model:e,type:n}){var r,i,o;Object.assign(this,{id:null!=(r=e.id)?r:e.$entityName,type:null!=(i=null==n?void 0:n.$$name)?i:e.constructor.name,name:null!=(o=e.name)?o:e.$entityName}),new.target===Qx&&Object.freeze(this)}},Jx=Qx;__publicField(Jx,"$name","ChangeLogEntity"),Jx._$name="ChangeLogEntity";var eD=class extends Jx{constructor({model:e,fromTask:n,toTask:r}){super({model:e,type:ZS}),Object.assign(this,{fromTask:n,toTask:r}),Object.freeze(this)}};__publicField(eD,"$name","ChangeLogDependencyEntity"),eD._$name="ChangeLogDependencyEntity";var tD=class extends Jx{constructor({model:e,event:n,resource:r}){super({model:e,type:US}),Object.assign(this,{event:n,resource:r}),Object.freeze(this)}};__publicField(tD,"$name","ChangeLogAssignmentEntity"),tD._$name="ChangeLogAssignmentEntity";var nD=class{constructor({entity:e,actionType:n}){Object.assign(this,{entity:e,actionType:n}),this.constructor===nD&&Object.freeze(this)}},rD=nD;__publicField(rD,"$name","ChangeLogAction"),rD._$name="ChangeLogAction";var iD=class extends rD{static get $name(){return"ChangeLogMoveAction"}constructor({entity:e,from:n,to:r}){super({entity:e,actionType:"move"}),Object.assign(this,{from:n,to:r}),Object.freeze(this)}};iD._$name="ChangeLogMoveAction";var oD=class extends rD{static get $name(){return"ChangeLogUpdateAction"}constructor({entity:e,propertyUpdates:n,isInitialUserAction:r}){super({entity:e,actionType:"update"}),Object.assign(this,{propertyUpdates:n,isUser:r}),Object.freeze(this)}};oD._$name="ChangeLogUpdateAction";var sD=class extends(sr.mixin(AttachToProjectMixin_default)){constructor(){super(...arguments),__publicField(this,"_remoteActionRanges",[]),__publicField(this,"_comparingVersionId")}construct(e,n){super.construct(e,n);const r=this;r.versionStore=new ax({modelClass:r.versionModelClass,internalListeners:{change:r.onStoreChangeExternal,thisObj:r},id:ax.configurable.storeId}),r.changeStore=new cx({modelClass:r.transactionModelClass,internalListeners:{change:r.onStoreChangeExternal,thisObj:r},id:cx.configurable.storeId}),r._currentChanges=[],r.client.ion({beforeTaskDelete:r.onBeforeTaskDelete,beforeTaskSave:r.onBeforeTaskSave,gridRowBeforeDropFinalize:r.onGridRowBeforeDropFinalize,thisObj:r})}attachToProject(e){const n=this;super.attachToProject(e),e.addCrudStore([n.versionStore,n.changeStore]),e.ion({name:"project",load:n.onProjectLoad,once:!0,thisObj:n}),n.detachProjectListeners(),n.attachProjectListeners(e)}onBeforeTaskDelete(){this.transactionDescription=this.L("L{Versions.deletedTask}")}onBeforeTaskSave(){this.transactionDescription=this.L("L{Versions.editedTask}")}onGridRowBeforeDropFinalize({context:{valid:e,records:n}}){e&&(this.transactionDescription=1===n.length?this.L("L{Versions.movedTask}"):this.L("L{Versions.movedTasks}"))}attachProjectListeners(e){var n;const r=this;null==(n=null==e?void 0:e.stm)||n.ion({recordingStart:r.onStmRecordingStart,recordingStop:r.handleTransactionStop,restoringStop:r.onStmRestoringStop,thisObj:r,name:"stmListeners"}),null==e||e.ion({wsBeforeReceiveChanges:r.onBeforeApplyRemoteChanges,wsReceiveChanges:r.onAfterApplyRemoteChanges,thisObj:r,name:"stmListeners"})}detachProjectListeners(){this.detachListeners("stmListeners")}updateVersionModelClass(e){if(!e.isVersionModel)throw new Error("versionModelClass config must be a subclass of SchedulerPro.model.VersionModel.")}updateTransactionModelClass(e){if(!e.isChangeLogTransactionModel)throw new Error("transactionModelClass config must be a subclass of SchedulerPro.model.changelog.ChangeLogTransactionModel.")}onStoreChangeExternal(){this.triggerVersionChange()}tryAutoSave(){const e=this,{project:n}=e.client;e.changeStore.find((({versionId:e})=>!e))&&((null==n?void 0:n.wsSend)?(n.wsSend("requestVersionAutoSave",{project:n.wsProjectId}),e.detachListeners("autoSave"),n.ion({name:"autoSave",wsVersionAutoSaveOK:e.autoSave,thisObj:e,once:!0})):e.saveVersionWithConfig({isAutosave:!0}))}autoSave(){this.saveVersionWithConfig({isAutosave:!0})}autoSaveHourly(){0===(new Date).getMinutes()&&this.tryAutoSave()}updateAutoSaveInterval(e){const n=this,{client:r}=n;n._autoSaveInterval&&r.clearInterval(n._autosaveInterval),"hourly"===e?n._autoSaveInterval=r.setInterval(n.autoSaveHourly.bind(n),1e4):e&&(n._autoSaveInterval=r.setInterval(n.tryAutoSave.bind(n),60*e*1e3))}saveVersion(e=null){return this.saveVersionWithConfig({name:e})}saveVersionWithConfig(e){const n=this,r=n.captureVersionContent(),i=new n.versionModelClass({savedAt:new Date,content:r,...e});return i.onBeforeSave(),n.versionStore.add(i),n.changeStore.query((e=>null==e.versionId)).forEach((e=>e.versionId=i.id)),n.triggerVersionChange(),n.triggerTransactionChange(),i}async loadVersionContent(e){const n=this,{client:r}=n,{project:i}=r,o={version:e,content:null};if(await n.trigger("beforeLoadVersionContent",{context:o})){if(null==i?void 0:i.wsSend){i.wsSend("loadVersionContent",{project:i.wsProjectId,versionId:e.id});const r=await new Promise(((r,o)=>{const s=Date.now();i.ion({name:"loadVersionContent",loadVersionContent({project:n,versionId:o,content:s}){if(n===i.wsProjectId&&o===e.id)return i.detachListeners("loadVersionContent"),r(s)},thisObj:n,expires:{delay:n.versionContentLoadTimeout-(Date.now()-s),alt:()=>o(`Failed to receive version content within ${this.versionContentLoadTimeout} ms`)}})}));return r&&n._versionContentCache.set(e.id,r),r}}else if(o.content)return o.content}async getVersionContent(e){var n;return null!=(n=e.content)?n:await this.loadVersionContent(e)}triggerTransactionChange(){this.client.trigger("transactionChange",{hasUnattachedTransactions:this.hasUnattachedTransactions})}triggerVersionChange(){this.client.trigger("versionChange",{versions:this.versionStore.records})}captureVersionContent(){return this.client.project.toJSON()}async restoreVersion(e){var n,r,i,o;const s=await this.getVersionContent(e),{project:a}=this.client,l=null==(n=a.stm)?void 0:n.enabled;null==(r=a.stm)||r.disable(),a.json=s,await a.commitAsync(),l&&(null==(i=a.stm)||i.enable()),null==(o=a.stm)||o.resetQueue()}async compareVersion(e){var n,r,i;const o=await this.getVersionContent(e),s={},{project:a}=this.client,l=null==(n=a.stm)?void 0:n.enabled;null==(r=a.stm)||r.disable();for(const e of o.eventsData)mi.preWalk(e,(e=>e.children),(({id:e,startDate:n,endDate:r})=>{s[e]={startDate:n,endDate:r}}));a.taskStore.traverse((e=>{s[e.id]&&(e.baselines.removeAll(),e.baselines.loadData([{task:e,...s[e.id]}]))})),l&&(null==(i=a.stm)||i.enable()),this._comparingVersionId=e.id}stopComparing(){var e,n,r;if(!this._comparingVersionId)return;const{project:i}=this.client,o=null==(e=i.stm)?void 0:e.enabled;null==(n=i.stm)||n.disable(),i.taskStore.traverse((e=>{e.baselines.removeAll()})),o&&(null==(r=i.stm)||r.enable()),this._comparingVersionId=null}doDisable(e){super.doDisable(e),e?this.detachProjectListeners():this.attachProjectListeners(this.client.project),this.client.refresh()}getEntityDescriptor(e){var n;const r=null!=(n=this.knownBaseTypes.find((n=>e instanceof n)))?n:e.constructor;return e.isDependencyModel?new eD({model:e,fromTask:this.getEntityDescriptor(e.fromTask),toTask:this.getEntityDescriptor(e.toTask)}):e.isAssignmentModel?new tD({model:e,event:this.getEntityDescriptor(e.event),resource:this.getEntityDescriptor(e.resource)}):new Jx({model:e,type:r})}getUpdateAction(e){const n=e[0].model,r=e.flatMap((({newData:e,oldData:r})=>Object.entries(e).map((([e,n])=>({property:e,value:n,oldValue:r[e]}))).filter((({property:e,value:r,oldValue:i})=>{var o;return!Et.isEqual(r,i)&&(null==(o=n.getFieldDefinition(e))?void 0:o.persist)})))),i=oe.groupBy(r,"property"),o=Object.entries(i).map((([e,n])=>({property:e,before:n[0].oldValue,after:n[n.length-1].value}))),s=e.some((({isInitialUserAction:e})=>e));return new oD({actionType:"update",entity:this.getEntityDescriptor(n),propertyUpdates:o,isInitialUserAction:s})}onProjectLoad(){this._currentStmTransaction=null,this.stopTransaction()}onStmRecordingStart({transaction:e}){this._transactionStart=new Date,this._currentStmTransaction=e,this.triggerTransactionChange()}stopTransaction(){var e,n;(null==(e=this.client.project)?void 0:e.stm.isRecording)&&(null==(n=this.client.project)||n.stm.stopTransaction()),this.handleTransactionStop()}async onStmRestoringStop({cause:e,transactions:n}){const r=this;"undo"===e?r.transactionDescription=r.L("L{undid}"):"redo"===e&&(r.transactionDescription=r.L("L{redid}")),await r.client.project.commitAsync(),r._transactionStart=new Date,r.finalizeTransaction({queue:n.flatMap((e=>e.queue))})}onBeforeApplyRemoteChanges(){var e,n;null==this._remoteChangesStartPos&&(this._remoteChangesStartPos=null!=(n=null==(e=this._currentStmTransaction)?void 0:e.queue.length)?n:0)}async onAfterApplyRemoteChanges(){this.endCurrentRemoteActionRange(),await this.client.project.commitAsync()}endCurrentRemoteActionRange(){var e,n;const r=this;if(null!=r._remoteChangesStartPos){const i=null!=(n=null==(e=r._currentStmTransaction)?void 0:e.queue.length)?n:0;i!==r._remoteChangesStartPos&&r._remoteActionRanges.push({start:r._remoteChangesStartPos,end:i}),r._remoteChangesStartPos=null}}handleTransactionStop(){const e=this;e.hasChanges&&e.finalizeTransaction(e._currentStmTransaction),e._currentTransactionDescription=null,e._currentStmTransaction=null,e._remoteActionRanges=[],e.triggerTransactionChange()}excludeRanges(e,n){let r=[],i=0;for(const{start:o,end:s}of n)r=r.concat(e.slice(i,o)),i=s;return r.concat(e.slice(i))}finalizeTransaction(e){const n=this;n.endCurrentRemoteActionRange();const r=n.excludeRanges(e.queue,n._remoteActionRanges);if(0===r.length)return;const uniqueRecordId=({model:e})=>e.$entityName,i=oe.groupBy(r,"type"),o=[];for(const e of["UpdateAction","EventUpdateAction"]){const r=oe.groupBy(i[e]||[],uniqueRecordId);for(const e of Object.values(r))o.push(n.getUpdateAction(e))}for(const{modelList:e,isInitialUserAction:r}of i.RemoveAction||[])for(const i of e)o.push(new rD({actionType:"remove",entity:n.getEntityDescriptor(i),isInitialUserAction:r}));for(const{childModels:e}of i.RemoveChildAction||[])for(const r of e)o.push(new rD({actionType:"remove",entity:n.getEntityDescriptor(r)}));for(const{modelList:e}of i.AddAction||[])for(const r of e)o.push(new rD({actionType:"add",entity:n.getEntityDescriptor(r)}));for(const{childModels:e,parentModel:r,context:s,insertIndex:a}of i.InsertChildAction||[])for(const i of e){const e=s.get(i);null!=e?o.push(new iD({actionType:"move",entity:n.getEntityDescriptor(i),from:{parent:n.getEntityDescriptor(e.parent),index:e.index},to:{parent:n.getEntityDescriptor(r),index:a}})):o.push(new rD({actionType:"add",entity:n.getEntityDescriptor(i)}))}const s=new n.transactionModelClass({description:n._currentTransactionDescription,actions:o,occurredAt:n._transactionStart});n.changeStore.add(s)}set transactionDescription(e){this._currentTransactionDescription=e}get hasChanges(){var e,n;return(null==(n=null==(e=this._currentStmTransaction)?void 0:e.queue)?void 0:n.length)>0}get hasUnattachedTransactions(){return this.changeStore.find((e=>null==e.versionId))}get isComparing(){return null!=this._comparingVersionId}};__publicField(sD,"$name","Versions"),__publicField(sD,"configurable",{versionModelClass:sx,transactionModelClass:lx,autoSaveInterval:"hourly",knownBaseTypes:[US,ZS,rx],versionContentLoadTimeout:6e4}),sD._$name="Versions",du.registerFeature(sD,!1,"SchedulerPro");var aD=class{constructor({property:e,before:n,after:r}){Object.assign(this,{property:e,before:n,after:r}),Object.freeze(this)}};__publicField(aD,"$name","ChangeLogPropertyUpdate"),aD._$name="ChangeLogPropertyUpdate";var willChange=(e,n,r)=>{const i=r.getFieldDefinition(e),{dataSource:o}=i,s=r.constructor.processField(e,n[o],r);return o in n&&!i.isEqual(s,r[e])},ProjectChangeHandlerMixin_default=e=>class ProjectChangeHandlerMixin extends(e||re){startConfigure(e){this.getConfig("project"),super.startConfigure(e)}beforeApplyProjectChanges(){const{stm:e}=this;let n=!1;return this.suspendChangesTracking(),e.enabled&&(n=!0,e.isRecording&&e.stash(),this.ignoreRemoteChangesInSTM?e.disable():e.startTransaction()),n}async applyProjectChanges(e){var n,r;const i=this,o=i.beforeApplyProjectChanges();i.applyingChangeset=!0,e.project&&i.applyProjectResponse(e.project),i.applyChangeset(Et.clone(e),((e,n)=>{if("tasks"===n.id||"events"===n.id){const{modelClass:r}=n,i=r.getFieldDataSource("startDate"),o=r.getFieldDataSource("endDate");if(e.updated)for(const s of e.updated){const e=n.getById(s[r.idField]);willChange("constraintType",s,e)||willChange("constraintDate",s,e)||(delete s[i],delete s[o])}}})),await i.commitAsync(),i.commitRespondedChanges();for(const o in e){const s=i.getStoreDescriptor(o);if(s){const{store:i}=s,a=e[o],l=[...null!=(n=a.updated)?n:[],...null!=(r=a.added)?r:[]];if(i)for(const e of l){const n=i.getById(e[i.modelClass.idField]);if(n)for(const r in n.modifications)willChange(r,e,n)||delete n.meta.modified[r]}}}i.afterApplyProjectChanges(o),i.applyingChangeset=!1,await i.commitAsync()}afterApplyProjectChanges(e){if(e){const{stm:e}=this;this.ignoreRemoteChangesInSTM?e.enable():e.stopTransaction(),e.applyStash()}this.resumeChangesTracking()}},lD=class extends(ProjectChangeHandlerMixin_default(ProjectCrudManager_default2(ProjectModelMixin_default(zS)))){static get $name(){return"ProjectModel"}static get defaultConfig(){return{calendarModelClass:KS,dependencyModelClass:ZS,eventModelClass:ex,assignmentModelClass:US,resourceModelClass:rx,calendarManagerStoreClass:XS,dependencyStoreClass:QS,eventStoreClass:tx,assignmentStoreClass:GS,resourceStoreClass:ix,calendarsData:null,supportShortSyncResponseNote:'Note: Please consider enabling "supportShortSyncResponse" option to allow less detailed sync responses (https://bryntum.com/products/schedulerpro/docs/api/SchedulerPro/model/ProjectModel#config-supportShortSyncResponse)',delayCalculation:!0,calendarManagerStore:{},stmClass:ox}}static get configurable(){return{calendars:null}}get taskStore(){return this.eventStore}get calendars(){return this.calendarManagerStore.allRecords}updateCalendars(e){this.calendarManagerStore.data=e}};lD._$name="ProjectModel";var ProjectWebSocketHandlerMixin_default=e=>{var n;return __publicField(n=class extends(e||re){doDestroy(){var e;null==(e=this.websocketManager)||e.destroy(),super.doDestroy()}updateWsAddress(e){var n;const r=this;null==(n=r.websocketManager)||n.destroy(),e&&(r.websocketManager=new El({address:e,userName:r.wsUserName,internalListeners:{message:"handleWebsocketMessage",close:"handleWebsocketClose",error:"handleWebsocketError",thisObj:r}}),r.wsAutoLoad&&r.wsLoad()),r.toggleAutoSyncListener()}toggleAutoSyncListener(){const e=this;e.detachListeners("websocketlisteners"),e._wsAutoSync&&e._wsAddress&&e.ion({name:"websocketlisteners",hasChanges:"scheduleWebsocketMessage"})}updateWsAutoSync(){this.toggleAutoSyncListener()}updateWsProjectId(e){null!=e&&this.wsAutoLoad&&this.wsLoad()}scheduleWebsocketMessage(){const e=this;e.hasTimeout("wsAutoSync")||e.isAutoSyncSuspended||e.setTimeout({name:"wsAutoSync",fn:()=>{e.wsSync()},delay:e.autoSyncTimeout})}resumeAutoSync(e=!0){super.resumeAutoSync(e),this.websocketManager&&!this.isAutoSyncSuspended&&this.changes&&this.wsSync()}async wsSend(e,n,r=!1){return!!await this.wsOpen()&&(this.websocketManager.send(e,n),r||this.trigger("wsSendMessage",{command:e,data:n}),!0)}wsReceive(e){}handleWebsocketClose(){this.trigger("wsClose")}handleWebsocketError({error:e}){this.trigger("wsError",{error:e})}async handleWebsocketMessage({data:e}){const n=this,{wsProjectId:r}=n,{project:i}=e;if(n.trigger("wsMessage",{data:e}),i===r&&"projectChange"===e.command)n.trigger("wsBeforeReceiveChanges"),await n.applyProjectChanges(e.changes),n.trigger("wsReceiveChanges");else if(i===r&&"dataset"===e.command)await n.loadInlineData(e.dataset),n.trigger("wsReceiveDataset");else if(i===r&&"versionAutoSaveOK"===e.command)n.trigger("wsVersionAutoSaveOK");else if(i===r&&"loadVersionContent"===e.command){const{versionId:r,project:i,content:o}=e;n.trigger("loadVersionContent",{versionId:r,project:i,content:o})}else n.wsReceive(e)}async wsOpen(){const{websocketManager:e}=this;if(e){return!e.isOpened&&await e.open()&&this.trigger("wsOpen"),e.isOpened}return!1}async wsLoad(){const e=this;null!=e.wsProjectId&&(await e.wsSend("dataset",{project:e.wsProjectId}),await new Promise((n=>{const r=e.ion({wsReceiveDataset(){r(),n(!0)},expires:{delay:e.wsConnectionTimeout,alt:()=>{r(),n(!1)}}})})),await e.commitAsync(),e.trigger("wsLoad"))}async wsSync(){const e=this,{wsProjectId:n}=e;if(null==n)return;await this.commitAsync();const{changes:r}=this;if(r&&e.wsAutoSync&&!e.autoSyncSuspendCounter){e.acceptChanges();await e.wsSend("projectChange",{project:n,changes:r})&&e.trigger("wsSendChanges")}}wsClose(){var e;null==(e=this.websocketManager)||e.close()}},"configurable",{wsAddress:null,wsUserName:"",wsAutoLoad:!0,wsAutoSync:!0,wsConnectionTimeout:6e4,wsProjectId:null}),n},ProjectProgressMixin_default=e=>{var n;return __publicField(n=class extends(e||re){static get $name(){return"ProjectProgressMixin"}updateProject(e,n){super.updateProject(e,n),this.setupProgressListener(),this.detachListeners("delayedCalculation"),(null==e?void 0:e.delayCalculation)&&e.ion({name:"delayedCalculation",delayCalculationStart:"internalOnProjectDelayCalculationStart",delayCalculationEnd:"internalOnProjectDelayCalculationEnd",thisObj:this})}setupProgressListener(){var e;const n=this;n.detachListeners("projectProgress"),n.projectProgressReporting&&(null==(e=n.project)||e.ion({name:"projectProgress",progress:"onProjectProgress",thisObj:n}))}updateProjectProgressReporting(){this.isConfiguring||this.setupProgressListener()}onProjectProgress({total:e,remaining:n,phase:r="propagating"}){const i=this;if(!i.isPainted)return;if(e<i.projectProgressThreshold)return;let o=i.projectProgressReporting;if("auto"===o&&(o=i.project.delayCalculation?"progressbar":"mask"),"progressbar"===o){let r=i.calculationProgressElement;r||(r=i.calculationProgressElement=Gn.createElement({parent:i.timeAxisSubGrid.header.element,retainElement:!0,className:"b-calculation-progress-wrap",children:[{className:"b-calculation-progress"}]})),r.firstElementChild.style.width=(e-n)/e*100+"%",e>0&&0===n?i.calculationProgressTimeout=i.setTimeout((()=>{null==r||r.remove(),i.calculationProgressElement=null}),50):i.clearTimeout(i.calculationProgressTimeout)}else{const o=i.L(`L{SchedulerProBase.${r}}`),s=e?`${o} ${Math.round(100*(e-n)/e)}%`:o;i.masked||i.mask({maxProgress:e,useTransition:!1,text:s}),i.masked.text=s,e&&(i.masked.maxProgress=e,i.masked.progress=e-n),e>0&&0===n&&i.unmask()}}internalOnProjectDelayCalculationStart(){this.readOnly||(this.$delayCalculationReadOnly=this.readOnly=!0)}internalOnProjectDelayCalculationEnd(){this.$delayCalculationReadOnly&&(this.$delayCalculationReadOnly=this.readOnly=!1)}get widgetClass(){}},"configurable",{projectProgressReporting:"auto",projectProgressThreshold:5e3}),n},SchedulerProEventRendering_default=e=>class SchedulerProEventRendering extends(e||re){static get $name(){return"SchedulerProEventRendering"}static get configurable(){return{eventLayout:"stack",horizontalLayoutPackClass:ux,horizontalLayoutStackClass:dx}}updateInternalEventLayout(e,n){const r=this;r.isConfiguring||r.clearLayouts(),super.updateInternalEventLayout(e,n)}getEventLayout(e){return"layoutFn"in(e=super.getEventLayout(e))&&(e.type="layoutFn"),e}clearLayouts(){const e=this;if(e.layouts)for(const n in e.layouts)e.layouts[n].destroy(),delete e.layouts[n]}getEventLayoutHandler(e){const n=this;if(!n.isHorizontal)return null;const{timeAxisViewModel:r,horizontal:i}=n;n.layouts||(n.layouts={});const{layouts:o}=n;switch(e.type){case"stack":return o.horizontalStack||(o.horizontalStack=n.horizontalLayoutStackClass.new({scheduler:n,timeAxisViewModel:r,bandIndexToPxConvertFn:i.layoutEventVerticallyStack,bandIndexToPxConvertThisObj:i,groupByThisObj:n},e)),o.horizontalStack;case"pack":return o.horizontalPack||(o.horizontalPack=n.horizontalLayoutPackClass.new({scheduler:n,timeAxisViewModel:r,bandIndexToPxConvertFn:i.layoutEventVerticallyPack,bandIndexToPxConvertThisObj:i,groupByThisObj:n},e)),o.horizontalPack;case"layoutFn":return{type:"layoutFn",scheduler:n,applyLayout:e.layoutFn,layoutEventsInBands:e.layoutFn};default:return null}}get widgetClass(){}},cD=class extends _a{static get $name(){return"SchedulingIssueResolutionPopup"}static get type(){return"schedulingissueresolutionpopup"}static get configurable(){return{localizableProperties:[],schedulingIssue:null,align:"b-t",autoShow:!1,autoClose:!1,closeAction:"onCloseButtonClick",modal:!0,centered:!0,scrollAction:"realign",constrainTo:globalThis,draggable:!1,closable:!0,floating:!0,cls:"b-schedulerpro-issueresolutionpopup",layout:"vbox",resolutionsGroup:{type:"radiogroup",name:"resolutions"},items:{description:{type:"widget",cls:"b-error-description",weight:-100}},bbar:{defaults:{localeClass:this},items:{applyButton:{weight:100,color:"b-raised b-blue",text:"L{Apply}",onClick:"up.onApplyButtonClick",disabled:!0},cancelButton:{weight:200,color:"b-gray",text:"L{Object.Cancel}",onClick:"up.onCancelButtonClick"}}}}}get selectedResolutions(){var e,n;const r=new Set,i=null==(n=null==(e=this.resolutionsGroup)?void 0:e.selected)?void 0:n.resolution;return i&&r.add(i),r}changeResolutionsGroup(e,n){return vd.reconfigure(n,e,this)}updateResolutionsGroup(e){e&&this.add(e)}getResolutionParameters(e){return[]}onApplyButtonClick(){const e=this,{selectedResolutions:n}=e;n.size?(n.forEach((n=>n.resolve(...e.getResolutionParameters(n)))),e.continueWithResolutionResult(lw.Resume),e.doResolve(n)):e.onCancelButtonClick()}onCancelButtonClick(){this.continueWithResolutionResult(lw.Cancel),this.doResolve()}onCloseButtonClick(){this.canCancel&&this.onCancelButtonClick()}get isResolving(){return Boolean(this.resolving)}async resolve({source:e,schedulingIssue:n,continueWithResolutionResult:r}){const i=this;return i.project=e,i.schedulingIssue=n,i.continueWithResolutionResult=r,i.updatePopupContent(n,r),i.onResolutionChange({}),i.show(),i.resolving=new Zo,i.resolving.promise}doResolve(e){const n=this,{resolving:r}=n;r&&(n.resolving.resolve(e),n.resolving=null,n.schedulingIssue=null,n.hide())}getResolutionWidgetConfig(e){return{text:w.encodeHtml(e.getDescription()),cls:"b-resolution",checkedValue:e.$$name,localeClass:this,name:"resolutions",internalListeners:{change:"up.onResolutionChange"},resolution:e}}getResolutions(){var e;return null==(e=this.schedulingIssue)?void 0:e.getResolutions()}updatePopupContent(e,n){var r;const i=this,{resolutionsGroup:o}=i;n&&(i.continueWithResolutionResult=n),e?i.schedulingIssue=e:e=i.schedulingIssue,i.title=(null==e?void 0:e.type)?i.optionalL(e.type):"Unknown error",i.widgetMap.description.content=e&&w.encodeHtml(e.getDescription());const s=i.getResolutions(),a=(null==s?void 0:s.map((e=>i.getResolutionWidgetConfig(e))))||[],l=(null==(r=a[0])?void 0:r.name)||"resolutions";o.removeAll(),o.name=l,o.add(...a,{ref:"cancelResolution",text:"L{Cancel changes}",name:l,checkedValue:"cancel",localeClass:this,cls:"b-resolution",internalListeners:{change:"up.onResolutionChange"}}),i.toggleControlsState()}get canApply(){return null!=this.resolutionsGroup.value}get canCancel(){var e;return!(null==(e=this.project)?void 0:e.isInitialCommit)}get cancelResolution(){return this.resolutionsGroup.widgetMap.cancelResolution}onResolutionChange(){this.toggleControlsState()}toggleControlsState(){const e=this,{applyButton:n,cancelButton:r}=e.widgetMap;n.disabled=!e.canApply,e.cancelResolution.hidden=r.hidden=!e.canCancel}updateLocalization(){this.updatePopupContent(),super.updateLocalization()}};cD.initClass(),cD._$name="SchedulingIssueResolutionPopup";var dD=class extends cD{static get $name(){return"CycleResolutionPopup"}static get type(){return"cycleresolutionpopup"}getDependencyTitle(e){return`"${w.encodeHtml(e.fromEvent.name)}" -> "${w.encodeHtml(e.toEvent.name)}"`}getResolutionWidgetConfig(e){const{dependency:n}=e,r=this.schedulingIssue.getInvalidDependencies(),i=super.getResolutionWidgetConfig(e);return r.includes(n)&&Object.assign(i,{name:"dependency-resolution",checked:!this._dependencyResolutionsChecked++}),i}getResolutions(){const{schedulingIssue:e}=this,n=null==e?void 0:e.getInvalidDependencies();let r=null==e?void 0:e.getResolutions();return r&&n.length&&(r=r.filter((e=>e.dependency&&n.includes(e.dependency)))),r}updatePopupContent(e,n){const r=this,{invalidDependenciesDescription:i,dependencyField:o}=r.widgetMap;if(r._dependencyResolutionsChecked=0,super.updatePopupContent(...arguments),null==i||i.hide(),null==o||o.hide(),e=r.schedulingIssue){const n=e.getDependencies(),s=e.getInvalidDependencies(),a=n.filter((e=>!s.includes(e)));if(s.length)i?i.show():r.add({type:"widget",ref:"invalidDependenciesDescription",weight:-50,width:"100%",cls:"b-invalid-dependencies-description",html:r.L("L{invalidDependencyLabel}")});else{const e=null==a?void 0:a.map((e=>({value:e.id,text:r.getDependencyTitle(e)})));o?(o.value=null,o.items=e,o.show()):r.add({type:"combo",ref:"dependencyField",weight:50,width:"100%",name:"dependency",label:r.L("L{dependencyLabel}"),labelPosition:"above",cls:"b-dependency-field",items:e,internalListeners:{change:"up.onDependencyChange"}})}}}get canApply(){const{widgetMap:e}=this;return super.canApply&&(e.cancelResolution.checked||!e.dependencyField||e.dependencyField.value)}onDependencyChange(){this.toggleControlsState()}getResolutionParameters(e){if(e.isRemoveDependencyCycleEffectResolution||e.isDeactivateDependencyCycleEffectResolution){const e=this.widgetMap.dependencyField.value;return[this.project.dependencyStore.getById(e)]}return super.getResolutionParameters(e)}};dD.initClass(),dD._$name="CycleResolutionPopup";var SchedulingIssueResolution_default=e=>class SchedulingIssueResolution extends(e||re){static get $name(){return"SchedulingIssueResolution"}static get configurable(){return{schedulingIssueResolutionPopupClass:cD,cycleResolutionPopupClass:dD,displaySchedulingIssueResolutionPopup:!0}}updateProject(e,n){super.updateProject(e,n),this.unbindSchedulingIssueResolutionFromProject(n),this.displaySchedulingIssueResolutionPopup&&e&&this.bindSchedulingIssueResolutionToProject(e)}bindSchedulingIssueResolutionToProject(e){e.ion({name:"schedulingIssueResolution",schedulingConflict:"onProjectSchedulingIssueEvent",emptyCalendar:"onProjectSchedulingIssueEvent",cycle:"onProjectSchedulingIssueEvent",thisObj:this})}get isResolving(){var e;return null==(e=this._lastSchedulingIssueResolutionPopup)?void 0:e.isResolving}get activeSchedulingIssueResolutionPopup(){return this.isResolving&&this._lastSchedulingIssueResolutionPopup}unbindSchedulingIssueResolutionFromProject(e){this.detachListeners("schedulingIssueResolution")}getSchedulingIssueResolutionPopup(e){return"cycle"===e.type?this._cycleResolutionPopup||(this._cycleResolutionPopup=new this.cycleResolutionPopupClass({rootElement:this.rootElement})):this._schedulingIssueResolutionPopup||(this._schedulingIssueResolutionPopup=new this.schedulingIssueResolutionPopupClass({rootElement:this.rootElement}))}onProjectSchedulingIssueEvent({schedulingIssue:e}){const n=this.getSchedulingIssueResolutionPopup(e);this._lastSchedulingIssueResolutionPopup=n,n.resolve(...arguments)}get widgetClass(){}},uD=class extends Fb{fillInnerSpanHorizontalPosition(e){const{eventRecord:n}=e,{startMS:r,endMS:i,durationMS:o}=this.calculateMS(n,"startDate","endDate"),s=this.calculateHorizontalPosition(e,r,i,o);if(s){const{left:n,width:a}=s;return Object.assign(e,{innerStartMS:r,innerEndMS:i,innerDurationMS:o,bufferBeforeWidth:Math.max(n-e.left,0),bufferAfterWidth:Math.max(Math.floor(e.left+e.width-n-a),0)}),!0}return!1}getTimeSpanRenderData(e,n,r=!1){const i=super.getTimeSpanRenderData(e,n,r);return(null==i?void 0:i.useEventBuffer)&&!this.fillInnerSpanHorizontalPosition(i)?null:i}};__publicField(uD,"$name","ProHorizontalRendering"),uD._$name="ProHorizontalRendering";var hD=class extends jb{fillInnerSpanVerticalPosition(e){const{scheduler:n}=this,{eventRecord:r}=e,{isBatchUpdating:i}=r,o=i?r.get("startDate"):r.startDate,s=i?r.get("endDate"):r.endDate,a=n.getCoordinateFromDate(o),l=o.getTime(),c=s.getTime(),d=c-l;let u=n.getCoordinateFromDate(s),h=u-a;return-1===u&&(h=Math.round(d*n.timeAxisViewModel.getSingleUnitInPixels("millisecond")),u=a+h),Object.assign(e,{innerStartMS:l,innerEndMS:c,innerDurationMS:d,bufferBeforeWidth:a-e.top,bufferAfterWidth:e.top+e.height-a-h}),!0}getTimeSpanRenderData(e,n,r=!1){const i=super.getTimeSpanRenderData(e,n,r);return(null==i?void 0:i.useEventBuffer)&&!this.fillInnerSpanVerticalPosition(i)?null:i}};__publicField(hD,"$name","ProVerticalRendering"),hD._$name="ProVerticalRendering";var gD=class extends(Bb.mixin(ProjectProgressMixin_default,SchedulingIssueResolution_default,SchedulerProEventRendering_default)){static get $name(){return"SchedulerProBase"}static get type(){return"schedulerprobase"}static get configurable(){return{projectModelClass:lD,dependencyIdField:"id"}}static get isSchedulerPro(){return!0}onPaintOverride(){}set calendars(e){this.project.calendars=e}get calendars(){return this.project.calendars}get mode(){return this._mode}set mode(e){const n=this;n._mode=e,n[e]||(n.element.classList.add(`b-sch-${e}`),"horizontal"===e?(n.horizontal=new uD(n),n.isPainted&&n.horizontal.init()):"vertical"===e&&(n.vertical=new hD(n),n.rendered&&n.vertical.init()))}toggleEmptyText(){const e=this;e.bodyContainer&&e.rowManager&&Gn.toggleClasses(e.bodyContainer,"b-grid-empty",!(e.rowManager.rowCount||e.project.isLoadingOrSyncing))}get taskStore(){return this.project.eventStore}createEvent(e,n,r){if(n.isWorkingTime(e))return this.taskEdit&&this.taskEdit.isEditing?void this.ion({aftertaskedit:()=>super.createEvent(e,n,r),once:!0}):super.createEvent(e,n,r)}};gD.initClass(),A.setVersion("schedulerpro","5.3.7"),gD._$name="SchedulerProBase";var emptyFn4=()=>{},pD=class extends gD{static get properties(){return{allocationReportByRecord:new Map,allocationDataByRecord:new Map,allocationObserverByRecord:new Map,resourceGroupsToUpdate:new Set,resourceGroupsAllocation:new Map}}construct(e){super.construct(e);const n=this;n.scheduleRefreshRows=n.createOnFrame(n.refreshRows,[],n,!0),n.horizontal.refreshResourcesWhenReady=n.horizontal.onAssignmentStoreChange=n.horizontal.renderer=function(){},n.rowManager.ion({beforeRowHeight:"onBeforeRowHeight",renderRow:"onRowManagerRenderRow",thisObj:n})}get timeAxis(){return super.timeAxis}set timeAxis(e){const n=this._timeAxis;super.timeAxis=e,this.partner&&!e||n&&n===e||this._timeAxis.ion({name:"timeAxis",endReconfigure:"onTimeAxisEndReconfigure",thisObj:this})}async onRowManagerRenderRow({record:e}){if(e.isSpecialRow){const n=this;if(n.project.isDelayingCalculation&&(await n.project.commitAsync(),n.isDestroyed))return;n.renderGroupHistogram(e),n.renderGroupScale(e)}}onDestroy(){var e,n,r,i,o;const s=this;for(const[n,r]of null==(e=s.allocationObserverByRecord)?void 0:e.entries())n.removeObserver&&(n.removeObserver(r),s.allocationObserverByRecord.delete(n));for(const[e,i]of null==(n=s.allocationReportByRecord)?void 0:n.entries())e.removeEntity&&(null==(r=e.removeEntity)||r.call(e,i),s.allocationReportByRecord.delete(i));s.allocationDataByRecord.clear(),null==(i=s._histogramWidget)||i.destroy(),null==(o=s._groupHistogramWidget)||o.destroy(),s.barTooltip=null}updateProject(e){this.detachListeners("resourceHistogramProject"),e.ion({name:"resourceHistogramProject",refresh:"internalOnProjectRefresh",delayCalculationStart:"onProjectDelayCalculationStart",delayCalculationEnd:"onProjectDelayCalculationEnd",repopulateReplica:"onRepopulateReplica",thisObj:this}),this.store=e.resourceStore}scheduleRefreshRows(){}getEventsToRender(){}getRowHeight(){return this.rowHeight}convertEffortUnit(e,n,r){return this.project.run("$convertDuration",e,n,r)}updateUseProjectTimeUnitsForScale(){const e=this;if(e.isPainted){const n={scalePoints:e.generateScalePoints()};e.trigger("generateScalePoints",n),e._generatedScalePoints=e.scalePoints=n.scalePoints,e.scheduleRefreshRows()}}get eventStore(){var e;return null==(e=this.project)?void 0:e.eventStore}set eventStore(e){super.eventStore=e}get scaleColumn(){return this.columns.query((e=>e.isScaleColumn))[0]}get scalePoints(){return this._scalePoints}set scalePoints(e){const{histogramWidget:n,scaleColumn:r}=this,i=e[e.length-1],{value:o,unit:s}=i;this.scaleUnit=s,this._scalePoints=e;let a=o;if(r){const{scaleWidget:e}=r;a+=e.scaleMaxPadding*o}n.topValue=this.useProjectTimeUnitsForScale?this.convertEffortUnit(a,s,Zh.Millisecond):Ct.asMilliseconds(a,s),r&&(r.scalePoints=e)}buildScalePointText(e){return`${e.value}${Ct.getShortNameOfUnit(e.unit)}`}generateScalePoints(e,n){var r;if(!(null==(r=this.project)?void 0:r.graph))return;const{timeAxis:i}=this,o=[];let s;e=e||i.increment,n=n||i.unit,1===e&&(n=Ct.getSmallerUnit(n),e=Math.round(this.useProjectTimeUnitsForScale?this.convertEffortUnit(e,i.unit,n):Ct.as(n,e,i.unit)));for(const n of[7,5,4,3,2])if(!(e%n)){s=e/n;break}s||(s=e);for(let n=s;n<=e;n+=s)o.push({value:n});const a=o[o.length-1];return a.unit=n,a.text=this.buildScalePointText(a),o}updateViewPreset(e){const n=this;n._updatingViewPreset=!0,super.updateViewPreset(...arguments),n._updatingViewPreset=!1,n.project.isInitialCommitPerformed&&n.isPainted&&n.onTimeAxisEndReconfigure()}onPaint({firstPaint:e}){super.onPaint({firstPaint:e}),e&&this.showBarTip&&(this.barTooltip={})}updateGetBarTip(e){return e&&(this.barTooltipTemplate=null),e}changeBarTooltip(e,n){return null==n||n.destroy(),e?e.isTooltip?e:this.barTooltipClass.new({forElement:this.timeAxisSubGridElement,forSelector:".b-histogram rect",hoverDelay:0,trackMouse:!1,cls:"b-celltooltip-tip",getHtml:this.getTipHtml.bind(this)},this.showBarTip,e):null}onRepopulateReplica(){this.ticksIdentifier=null,this.allocationReportByRecord.clear(),this.allocationDataByRecord.clear(),this.allocationObserverByRecord.clear()}getTipHtml(e){var n;const{activeTarget:r}=e,i=r.dataset.index,o=this.getRecordFromElement(r),s=this.allocationDataByRecord.get(o);return(e=Object.assign({},e)).index=parseInt(i,10),e.datum=s[e.index],null==(n=this.barTooltipTemplate)?void 0:n.call(this,e)}buildTicksIdentifier(){const e=this,n=e.project.getGraph();return e.ticksIdentifier||(e.ticksIdentifier=n.addIdentifier(fy.new())),e.ticksIdentifier.writeToGraph(n,new Aw({unspecifiedTimeIsWorking:!1,intervals:e.timeAxis.ticks.map((e=>({startDate:e.startDate,endDate:e.endDate,isWorking:!0})))})),e.collectTicksWidth(),e.ticksIdentifier}collectTicksWidth(){const{ticks:e}=this.timeAxis,n=e[0].endDate-e[0].startDate,r={0:n};let i=n,o=!0;for(let s=1,{length:a}=e;s<a;s++){const a=e[s],l=a.endDate-a.startDate;n!==l&&(o=!1),i+=l,r[s]=l}if(o)this.ticksWidth=null;else{const n={};for(let o=0,{length:s}=e;o<s;o++)n[o]=r[o]/i;this.ticksWidth=n}}onProjectDelayCalculationStart(){this.suspendRefresh()}onProjectDelayCalculationEnd(){this.resumeRefresh(!0)}projectUnitsHasChanged(){const{project:e}=this;return e.daysPerMonth!==this._projectDaysPerMonth||e.daysPerWeek!==this._projectDaysPerWeek||e.hoursPerDay!==this._projectHoursPerDay}internalOnProjectRefresh({source:e,isCalculated:n}){if(n){const n=this;if(n.ticksIdentifier||n.onTimeAxisEndReconfigure(),n.useProjectTimeUnitsForScale&&n.projectUnitsHasChanged()){n._projectDaysPerMonth=e.daysPerMonth,n._projectDaysPerWeek=e.daysPerWeek,n._projectHoursPerDay=e.hoursPerDay;const r={scalePoints:n.generateScalePoints()};n.trigger("generateScalePoints",r),n._generatedScalePoints=n.scalePoints=r.scalePoints}}}relayStoreDataChange(e){super.relayStoreDataChange(e),0===this.store.count&&(this.histogramWidget.data=[],this.histogramWidget.refresh())}get columns(){return super.columns}set columns(e){const n=this;super.columns=e,n.isDestroying||(n.timeAxisColumn.renderer=n.renderResourceHistogram,n.timeAxisColumn.cellCls=n.timeAxisColumnCellCls,e.some((e=>"scale"===e.type))||n.insertScaleColumn())}insertScaleColumn(){this.columns.rootNode.insertChild({type:"scale"},this.timeAxisColumn)}buildHistogramWidget(e){var n;const r=this;r.getBarTextRenderData&&!e.getBarTextRenderData&&(e.getBarTextRenderData=r.getBarTextRenderData);const i=r.histogramWidgetClass.new({owner:r,appendTo:r.element,cls:"b-hide-offscreen b-resourcehistogram-histogram",height:r.rowHeight,width:(null==(n=r.timeAxisColumn)?void 0:n.width)||0,omitZeroHeightBars:!0,data:[],getBarTip:!r.barTooltipTemplate&&r.getBarTip||emptyFn4,getRectClass:r.getRectClass||r.getRectClassDefault,getBarText:r.getBarText||r.getBarTextDefault,series:r.series},r.histogramWidgetConfig,e);return r.getBarTextDefault.bind(i),i}get histogramWidget(){const e=this;if(!e._histogramWidget){const n=e.series;!e.showMaxEffort&&n.maxEffort&&(n.maxEffort=!1),e._histogramWidget=e.buildHistogramWidget()}return e._histogramWidget}getRectClassDefault(e,n,r){if("effort"===e.id)switch(!0){case r.isOverallocated:return"b-overallocated";case r.isUnderallocated:return"b-underallocated"}return""}get effortFormatter(){const e=this,n=e.effortFormat;let r=e._effortFormatter;return r&&e._effortFormat===n||(r=Dl.get(e._lastFormat=n),e._effortFormatter=r),r}getEffortText(e,n,r=this.showEffortUnit){var i;if(!(null==(i=this.project)?void 0:i.graph))return;const{scaleUnit:o,effortFormatter:s}=this;n=n||o;const a=Ct.getShortNameOfUnit(n),l=this.convertEffortUnit(e,Zh.Millisecond,n);return s.format(l)+(r?a:"")}getBarTipEffortUnit(){const{effortUnit:e,barTipEffortUnit:n,timeAxis:r}=this,i=n||e;return Ct.compareUnits(r.unit,i)<0?r.unit:i}getGroupBarTip({datum:e}){const n=this,{showBarTip:r,timeAxis:i}=n;let o="";if(r&&e.effort){const r=n.getBarTipEffortUnit(...arguments),s=n.getEffortText(e.effort,r),a=n.getEffortText(e.maxEffort,r),l=n.L("L{groupBarTipAssignment}");let c="L",d=n.L("L{groupBarTipInRange}"),u="";0===Ct.compareUnits(i.unit,Zh.Day)?d=n.L("L{groupBarTipOnDate}"):Ct.compareUnits(i.unit,Zh.Second)<=0?c="HH:mm:ss A":Ct.compareUnits(i.unit,Zh.Hour)<=0&&(c="LT");let h=[...e.resourceAllocation.entries()].filter((([e,n])=>n.effort)).sort((([e,n],[r,i])=>n.effort>i.effort?-1:1));h.length>n.groupBarTipAssignmentLimit&&(u="<br>"+n.L("L{plusMore}").replace("{value}",h.length-n.groupBarTipAssignmentLimit),h=h.slice(0,this.groupBarTipAssignmentLimit));const g=h.map((([e,i])=>l.replace("{resource}",w.encodeHtml(e.name)).replace("{allocated}",n.getEffortText(i.effort,r)).replace("{available}",n.getEffortText(i.maxEffort,r)).replace("{cls}",i.isOverallocated?"b-overallocated":i.isUnderallocated?"b-underallocated":""))).join("<br>")+u;o=d.replace("{assignments}",g).replace("{startDate}",Ct.format(e.tick.startDate,c)).replace("{endDate}",Ct.format(e.tick.endDate,c)).replace("{allocated}",s).replace("{available}",a).replace("{cls}",e.isOverallocated?"b-overallocated":e.isUnderallocated?"b-underallocated":""),o=`<div class="b-histogram-bar-tooltip">${o}</div>`}return o}getResourceBarTip({datum:e}){const n=this,{showBarTip:r,timeAxis:i}=n;let o="";if(r&&e.effort){const r=n.getBarTipEffortUnit(),s=n.getEffortText(e.effort,r),a=n.getEffortText(e.maxEffort,r);let l="L",c=n.L("L{barTipInRange}");0===Ct.compareUnits(i.unit,Zh.Day)?c=n.L("L{barTipOnDate}"):Ct.compareUnits(i.unit,Zh.Second)<=0?l="HH:mm:ss A":Ct.compareUnits(i.unit,Zh.Hour)<=0&&(l="LT"),o=c.replace("{startDate}",Ct.format(e.tick.startDate,l)).replace("{endDate}",Ct.format(e.tick.endDate,l)).replace("{allocated}",s).replace("{available}",a).replace("{cls}",e.isOverallocated?"b-overallocated":e.isUnderallocated?"b-underallocated":""),e.resource&&(o=o.replace("{resource}",w.encodeHtml(e.resource.name))),o=`<div class="b-histogram-bar-tooltip">${o}</div>`}return o}getBarTextEffortUnit(){const{effortUnit:e,barTextEffortUnit:n,timeAxis:r}=this,i=n||e;return Ct.compareUnits(r.unit,i)<0?r.unit:i}getBarTextDefault(e,n){const{showBarText:r}=this.owner;let i="";if(r&&e.effort){const n=this.owner.getBarTextEffortUnit();i=this.owner.getEffortText(e.effort,n)}return i}updateShowBarText(e){this.scheduleRefreshRows()}updateShowBarTip(e){this.barTooltip=e}updateShowMaxEffort(e){const n=this;n._showMaxEffort=e;let r=!1;[n._histogramWidget,n._groupHistogramWidget].forEach((n=>{if(!n)return;const{series:i}=n;e?"object"==typeof e?i.maxEffort=e:"object"==typeof n._seriesMaxEffort?i.maxEffort=n._seriesMaxEffort:(i.maxEffort={type:"outline",field:"maxEffort"},i.maxEffort.id="maxEffort"):i.maxEffort&&(n._seriesMaxEffort=i.maxEffort,delete i.maxEffort),r=!0})),r&&n.scheduleRefreshRows()}updateIncludeInactiveEvents(e){this.allocationReportByRecord.forEach((n=>n.includeInactiveEvents=e))}onTimeAxisEndReconfigureInternal(){const e=this;if(!e._updatingViewPreset){const{unit:n,increment:r}=e.timeAxis;if(n!==e._lastTimeAxisUnit||r!==e._lastTimeAxisIncrement){e._lastTimeAxisUnit=n,e._lastTimeAxisIncrement=r;const i={scalePoints:e.generateScalePoints()};e.trigger("generateScalePoints",i),e._generatedScalePoints=e.scalePoints=i.scalePoints}e.buildTicksIdentifier()}}onTimeAxisEndReconfigure(){const e=this;e._updatingViewPreset||(e.project.graph?e.onTimeAxisEndReconfigureInternal():e.project.ion({graphReady(){e.onTimeAxisEndReconfigureInternal()},thisObj:e,once:!0}))}onBeforeRowHeight({height:e}){if(this._timeAxisColumn)for(const n of[this._histogramWidget,this._groupHistogramWidget])n&&(n.height=e,n.onElementResize(n.element))}onTimeAxisViewModelUpdate(){super.onTimeAxisViewModelUpdate(...arguments);for(const e of[this._histogramWidget,this._groupHistogramWidget])e&&(e.width=this.timeAxisViewModel.totalSize,e.onElementResize(e.element))}getRecordAllocationInfoRenderData(e,n,r,i=null){if(n=Array.isArray(n)?n:n.total,this.ticksWidth)for(let e=0,{length:r}=n;e<r;e++)n[e].width=this.ticksWidth[e];return n}renderRecordAllocationInfo(e,n,r,i=null){i=i||this.histogramWidget;const o=this.getRecordAllocationInfoRenderData(e,n,r,i);if(!o)return;this.allocationDataByRecord.set(e,o),i.data=o,i.refresh();const s=i.element.cloneNode(!0);s.removeAttribute("id"),s.classList.remove("b-hide-offscreen"),r.innerHTML="",r.appendChild(s)}renderRows(){const e=this;return!e.ticksIdentifier&&e.project.isInitialCommitPerformed&&(e.onTimeAxisEndReconfigure(),e.timeView.startDate&&e.timeView.endDate||(e.timeView.range={startDate:e.startDate,endDate:e.endDate})),super.renderRows(...arguments)}onRecordAllocationCalculated(e,n,r){const i=this;if(!i.isDestroying){const r=i.getCell({record:e,columnId:i.timeAxisColumn.id});r&&i.renderRecordAllocationInfo(e,n,r),i.trigger("allocationChange",{record:e,allocation:n});const o=i.getResourceGroupParent(e);o&&(i.resourceGroupsAllocation.delete(o),i.scheduleGroupRender(o))}}buildResourceAllocationReport(e){return this.project.resourceAllocationInfoClass.new({includeInactiveEvents:this.includeInactiveEvents,ticks:this.ticksIdentifier,resource:e})}registerRecordAllocationReport(e){const n=this,r=n.project.getGraph(),i=n.buildResourceAllocationReport(e);n.allocationReportByRecord.set(e,i),e.addEntity(i);const o=r.observe((function*(){return yield i.$.allocation}),(r=>n.onRecordAllocationCalculated(e,r,i)));return n.allocationObserverByRecord.set(e,o),e.addObserver(o),i}renderResourceHistogram({grid:e,cellElement:n,record:r}){const{project:i}=e;if(e.ticksIdentifier&&i.isInitialCommitPerformed&&!r.isSpecialRow){const{allocationReportByRecord:i,allocationObserverByRecord:o}=e;let s=i.get(r);if(s||(s=e.registerRecordAllocationReport(r)),null==s?void 0:s.allocation){s.graph?e.renderRecordAllocationInfo(r,s.allocation,n):(i.delete(r),e.allocationDataByRecord.delete(r),o.delete(r));const a=e.getResourceGroupParent(r);a&&e.store.includes(a)&&e.scheduleGroupRender(a)}}}renderScheduledGroups(){for(const e of Array.from(this.resourceGroupsToUpdate))this.renderGroupHistogram(e);this.clearTimeout(this.renderScheduledGroupTimer)}scheduleGroupRender(e){this.resourceGroupsToUpdate.add(e),this.renderScheduledGroupTimer=this.setTimeout({fn:"renderScheduledGroups",delay:10,cancelOutstanding:!0})}getResourceGroupParent(e){const n=e.instanceMeta(this.project.resourceStore.id);return null==n?void 0:n.groupParent}calculateResourceGroupAllocation(e){var n,r;const{allocationReportByRecord:i}=this,{groupChildren:o}=e,s=o.map((e=>i.get(e))),a=null==(r=null==(n=s[0])?void 0:n.allocation)?void 0:r.total,l=null==a?void 0:a.length;if(a&&s.every((e=>(null==e?void 0:e.allocation)&&e.allocation.total.length===l))){const e=[];return s.forEach((({allocation:n})=>{n.total.forEach(((n,r)=>{let i=e[r];i||(i=e[r]={tick:n.tick,effort:0,maxEffort:0,units:0,isGroup:!0,resourceAllocation:new Map}),i.resourceAllocation.set(n.resource,{effort:n.effort,maxEffort:n.maxEffort,units:n.units,isOverallocated:n.effort>n.maxEffort,isUnderallocated:n.effort<n.maxEffort}),i.isOverallocated=i.isOverallocated||n.isOverallocated,i.isUnderallocated=i.isUnderallocated||n.isUnderallocated,i.effort+=n.effort,i.maxEffort+=n.maxEffort,n.assignments&&(i.assignments?n.assignments.forEach((e=>i.assignments.add(e))):i.assignments=new Set(n.assignments))}))})),e}}renderGroupHistogram(e){var n;const r=this;r.resourceGroupsToUpdate.delete(e),r.store.includes(e)||r.resourceGroupsAllocation.delete(e);const i=r.resourceGroupsAllocation.get(e)||r.calculateResourceGroupAllocation(e);if(i){r.resourceGroupsAllocation.set(e,i);const{groupChildren:o}=e;let s=r.generateScalePoints(r.timeAxis.increment*o.length);const a={scalePoints:s,groupParent:e,isCalculatingTopValue:!0};r.trigger("generateScalePoints",a),s=a.scalePoints;const l=s[s.length-1],c=r.useProjectTimeUnitsForScale?r.convertEffortUnit(l.value,l.unit,Zh.Millisecond):Ct.asMilliseconds(l.value,l.unit),d=c+((null==(n=r.scaleColumn)?void 0:n.scaleWidget.scaleMaxPadding)||0)*c,u=r._groupHistogramWidget||r.buildHistogramWidget({topValue:d}),h=r.getCell({id:e.id,columnId:r.timeAxisColumn.id});r._groupHistogramWidget?u.topValue=d:r._groupHistogramWidget=u,h&&(r.renderRecordAllocationInfo(e,i,h,u),r.trigger("groupRendered",{groupParent:e}))}else r.store.includes(e)&&r.scheduleGroupRender(e)}renderGroupScale(e){const n=this,{scaleColumn:r}=n;if(r){const{groupChildren:i}=e,o=n.generateScalePoints(n.timeAxis.increment*i.length),s=n.getCell({id:e.id,columnId:r.id}),a={scalePoints:o,groupParent:e};if(!s)return;let l=n._groupScaleWidget;return l||(l=n._groupScaleWidget=r.buildScaleWidget()),n.trigger("generateScalePoints",a),l.scalePoints=a.scalePoints,r.renderer({cellElement:s,scaleWidget:l})}}updateLocalization(){const e=this;e._generatedScalePoints===e.scalePoints&&e.scalePoints&&e.scalePoints.forEach((n=>{n.text&&n.unit&&(n.text=e.buildScalePointText(n))})),super.updateLocalization(...arguments)}};__publicField(pD,"$name","ResourceHistogram"),__publicField(pD,"type","resourcehistogram"),__publicField(pD,"configurable",{sortFeatureStore:"store",timeAxisColumnCellCls:"b-sch-timeaxis-cell b-resourcehistogram-cell",effortFormat:"0.#",showEffortUnit:!0,rowHeight:50,useProjectTimeUnitsForScale:!1,effortUnit:Zh.Hour,barTextEffortUnit:null,barTipEffortUnit:null,showMaxEffort:!0,showBarText:!1,showBarTip:!1,barTooltip:null,barTooltipClass:fc,series:{maxEffort:{type:"outline",field:"maxEffort"},effort:{type:"bar",field:"effort"}},getRectClass:null,createEventOnDblClick:!1,readOnly:!0,getBarTip:null,barTooltipTemplate({datum:e}){let n="";const{effort:r,isGroup:i}=e;return r&&(n=i?this.getGroupBarTip(...arguments):this.getResourceBarTip(...arguments)),n},getBarText:null,getBarTextRenderData:void 0,groupBarTipAssignmentLimit:5,histogramWidgetClass:_d,histogramWidgetConfig:null,includeInactiveEvents:!1,fixedRowHeight:!0}),pD.initClass(),pD._$name="ResourceHistogram";var mD=class extends Ur{construct(e,...n){this._childrenIndex=new Map,e.origin&&Object.assign(e,this.mapOriginValues(e.origin)),super.construct(e,...n),this.origin&&this.fillChildren()}mapOriginValues(e){var n,r;const i={};return e.isResourceModel?i.name=e.name:e.isAssignmentModel&&(i.name=null==(n=e.event)?void 0:n.name,i.iconCls=null==(r=e.event)?void 0:r.iconCls),i}fillChildren(){var e;const n=this,{children:r}=n,i=new Set(r),o=[];if(null==(e=n.origin)?void 0:e.isResourceModel){const{assigned:e}=n.origin;for(const r of e)n._childrenIndex.has(r)?i.delete(n._childrenIndex.get(r)):o.push(n.constructor.new({origin:r}))}i.size&&this.removeChild([...i]),o.length&&this.appendChild(o)}afterRemoveChild(e){e.forEach((e=>this._childrenIndex.delete(e.origin)))}insertChild(...e){var n;let r=super.insertChild(...e);if(r){const{stores:e}=this;if(Array.isArray(r)||(r=[r]),null==(n=this.origin)?void 0:n.isResourceModel)for(const e of r)e.origin&&!this._childrenIndex.has(e.origin)&&this._childrenIndex.set(e.origin,e);if(null==e?void 0:e.length)for(const n of e)for(const e of r)e.traverse((e=>n.setModelByOrigin(e.origin,e)))}return r}getChildByOrigin(e){return this._childrenIndex.get(e)}};__publicField(mD,"$name","ResourceUtilizationModel"),__publicField(mD,"fields",["name","iconCls"]),mD.exposeProperties(),mD._$name="ResourceUtilizationModel";var fD=class extends(Lg.derive(Ci)){static get properties(){return{_modelByOrigin:new Map}}updateProject(e){this.setResourceStore(null==e?void 0:e.resourceStore),this.setAssignmentStore(null==e?void 0:e.assignmentStore),this.setEventStore(null==e?void 0:e.eventStore),this.fillStoreFromProject()}setResourceStore(e){this.detachListeners("resourceStore"),null==e||e.ion({name:"resourceStore",change:this.onResourceStoreDataChanged,thisObj:this})}setEventStore(e){this.detachListeners("eventStore"),null==e||e.ion({name:"eventStore",update:this.onEventUpdate,thisObj:this})}setAssignmentStore(e){this.detachListeners("assignmentStore"),null==e||e.ion({name:"assignmentStore",change:this.onAssignmentsChange,refresh:this.onAssignmentsRefresh,add:this.onAssignmentsAdd,update:this.onAssignmentUpdate,remove:this.onAssignmentsRemove,thisObj:this})}onResourceStoreDataChanged(e){e.isMove&&"remove"===e.action||this.fillStoreFromProject()}onAssignmentsChange(){this.forEach((e=>e.fillChildren()))}onAssignmentsRefresh(e){"batch"===e.action&&this.forEach((e=>e.fillChildren()))}onAssignmentsAdd({records:e}){e.forEach((e=>{const n=this.getModelByOrigin(null==e?void 0:e.resource);null==n||n.fillChildren()}))}onAssignmentUpdate({record:e,changes:n}){if("resource"in n){const n=this.getModelByOrigin(e),r=this.getModelByOrigin(null==e?void 0:e.resource);n&&r&&r.appendChild(n)}}onAssignmentsRemove({records:e}){this.remove(e.map((e=>this.getModelByOrigin(e))))}onEventUpdate({record:e,changes:n}){if("name"in n)for(const n of e.assigned){this.getModelByOrigin(n).set("name",e.name)}}fillStoreFromProject(){var e;const n=[];null==(e=this._project)||e.resourceStore.forEach((e=>{e.isSpecialRow||n.push(this.modelClass.new({origin:e}))})),this.removeAll(),this.add(n),this.trigger("fillFromProject")}remove(){const e=super.remove(...arguments);return null==e||e.forEach((e=>{this._modelByOrigin.delete(e.origin)})),e}removeAll(){super.removeAll(...arguments),this._modelByOrigin.clear()}getModelByOrigin(e){return this._modelByOrigin.get(e)}setModelByOrigin(e,n){return this._modelByOrigin.set(e,n)}};__publicField(fD,"configurable",{modelClass:mD,project:null,tree:!0}),fD._$name="ResourceUtilizationStore";var bD=class extends pD{updateProject(e){super.updateProject(e),this.store=this.buildStore(e)}buildStore(e){return fD.new({project:e})}insertScaleColumn(){}getTipHtml({activeTarget:e}){const n=e.dataset.index,r=this.getRecordFromElement(e),i=this.allocationDataByRecord.get(r.origin)[parseInt(n,10)];return this.barTooltipTemplate(i)}registerRecordAllocationReport(e){return e.isResourceModel?super.registerRecordAllocationReport(e):e.isAssignmentModel?this.registerAssignmentAllocationReport(e):void 0}onDestroy(){var e,n,r;const i=this;for(const[n,r]of null==(e=i.allocationObserverByRecord)?void 0:e.entries())n.isAssignmentModel&&(n.resource.removeObserver(r),i.allocationObserverByRecord.delete(n));for(const[e,r]of null==(n=i.allocationReportByRecord)?void 0:n.entries())e.isAssignmentModel&&(e.resource.removeEntity(r),i.allocationReportByRecord.delete(r));i.destroyStores&&(null==(r=i.store)||r.destroy()),super.onDestroy()}registerAssignmentAllocationReport(e){const n=this,r=n.project.getGraph(),i=n.allocationReportByRecord.get(e.resource);if(i){n.allocationReportByRecord.set(e,i);const o=r.observe((function*(){return yield i.$.allocation}),(r=>n.onRecordAllocationCalculated(e,r,i)));n.allocationObserverByRecord.set(e,o),e.resource.addObserver(o)}return i}onRecordAllocationCalculated(e,n,r){if(e.isAssignmentModel)if(n.byAssignments.get(e))super.onRecordAllocationCalculated(e,n,r);else{this.allocationReportByRecord.delete(e);const n=this.allocationObserverByRecord.get(e);n&&(r.resource.removeObserver(n),this.allocationObserverByRecord.delete(e))}else super.onRecordAllocationCalculated(e,n,r)}onRowManagerRenderRow({row:e,record:n}){var r,i;e.assignCls({"b-resource-row":null==(r=n.origin)?void 0:r.isResourceModel,"b-assignment-row":null==(i=n.origin)?void 0:i.isAssignmentModel})}getResourceGroupParent(e){const n=e.instanceMeta(this.store);return null==n?void 0:n.groupParent}renderResourceHistogram(e){const{project:n}=e.grid;if(n.isInitialCommitPerformed&&!e.record.isSpecialRow)return e.record=e.record.origin,super.renderResourceHistogram(e)}getCell(e){var n,r;return((null==(n=e.record)?void 0:n.isResourceModel)||(null==(r=e.record)?void 0:r.isAssignmentModel))&&(e.record=this.store.getModelByOrigin(e.record)),super.getCell(e)}buildHistogramWidget(e={},...n){return this.getBarTextRenderData||(null==e?void 0:e.getBarTextRenderData)||(e.getBarTextRenderData=this.getBarTextRenderDataDefault),e.cls="b-hide-offscreen b-resourceutilization-histogram",e.height=this.rowHeight,super.buildHistogramWidget(e,...n)}getBarTextRenderDataDefault(e,n,r){return e.y="50%",e}getRecordAllocationInfoRenderData(e,n,r,i=null){let o;if(e.isResourceModel?o=n.total:e.isAssignmentModel&&(o=n.byAssignments.get(e)),o)for(let e=0,{length:n}=o;e<n;e++)o[e].effort&&(o[e].height=1);return o}getResourceBarTip(e){const n=this,{showBarTip:r,timeAxis:i}=n;let o="";if(r&&e.effort){const r=n.getBarTipEffortUnit(...arguments),s=n.getEffortText(e.effort,r,!0),a=n.getEffortText(e.maxEffort,r,!0),l=n.L("L{groupBarTipAssignment}");let c="L",d=n.L("L{groupBarTipInRange}"),u="";0===Ct.compareUnits(i.unit,Zh.Day)?d=n.L("L{groupBarTipOnDate}"):Ct.compareUnits(i.unit,Zh.Second)<=0?c="HH:mm:ss A":Ct.compareUnits(i.unit,Zh.Hour)<=0&&(c="LT");let h=[...e.assignmentIntervals.entries()].filter((([e,n])=>n.effort)).sort((([e,n],[r,i])=>n.effort>i.effort?-1:1));h.length>n.groupBarTipAssignmentLimit&&(u="<br>"+n.L("L{plusMore}").replace("{value}",h.length-n.groupBarTipAssignmentLimit),h=h.slice(0,this.groupBarTipAssignmentLimit));const g=h.map((([e,i])=>l.replace("{event}",w.encodeHtml(e.event.name)).replace("{allocated}",n.getEffortText(i.effort,r,!0)).replace("{available}",n.getEffortText(i.maxEffort,r,!0)).replace("{cls}",i.isOverallocated?"b-overallocated":i.isUnderallocated?"b-underallocated":""))).join("<br>")+u;o=d.replace("{assignments}",g).replace("{startDate}",Ct.format(e.tick.startDate,c)).replace("{endDate}",Ct.format(e.tick.endDate,c)).replace("{allocated}",s).replace("{available}",a).replace("{cls}",e.isOverallocated?"b-overallocated":e.isUnderallocated?"b-underallocated":""),o=`<div class="b-histogram-bar-tooltip">${o}</div>`}return o}getAssignmentBarTip(e){const n=this,{showBarTip:r,timeAxis:i}=n;let o="";if(r&&e.effort){const r=n.getBarTipEffortUnit(...arguments),s=n.getEffortText(e.effort,r,!0),a=n.getEffortText(e.maxEffort,r,!0);let l="L",c=n.L("L{barTipInRange}");0===Ct.compareUnits(i.unit,Zh.Day)?c=n.L("L{barTipOnDate}"):Ct.compareUnits(i.unit,Zh.Second)<=0?l="HH:mm:ss A":Ct.compareUnits(i.unit,Zh.Hour)<=0&&(l="LT"),o=c.replace("{startDate}",Ct.format(e.tick.startDate,l)).replace("{endDate}",Ct.format(e.tick.endDate,l)).replace("{allocated}",s).replace("{available}",a).replace("{cls}",e.cls||""),e.assignment&&(o=o.replace("{event}",w.encodeHtml(e.assignment.event.name))),o=`<div class="b-histogram-bar-tooltip">${o}</div>`}return o}},vD=bD;__publicField(vD,"$name","ResourceUtilization"),__publicField(vD,"type","resourceutilization"),__publicField(vD,"configurable",{timeAxisColumnCellCls:"b-sch-timeaxis-cell b-resourceutilization-cell",rowHeight:30,showEffortUnit:!1,showMaxEffort:!1,showBarText:!0,barTooltipTemplate({effort:e,isGroup:n,resource:r,assignment:i}){let o="";return e&&(r?o=this.getResourceBarTip(...arguments):i?o=this.getAssignmentBarTip(...arguments):n&&(o=this.getGroupBarTip(...arguments))),o},series:{effort:{type:"bar",field:"effort"}},readOnly:!0,columns:[{type:"tree",field:"name",text:"L{nameColumnText}",localeClass:bD}]}),vD.initClass(),vD._$name="ResourceUtilization",du.registerFeature(Yu,!0,"ResourceUtilization");var yD=class extends gD{static get $name(){return"SchedulerPro"}static get type(){return"schedulerpro"}};yD.initClass(),yD._$name="SchedulerPro";var wD=class extends Bb{static get $name(){return"Timeline"}static get type(){return"timeline"}static get configurable(){return{height:"13em",eventLayout:"pack",barMargin:1,forceFit:!0,timeAxis:{autoAdjust:!1},readOnly:!0,zoomOnMouseWheel:!1,zoomOnTimeAxisDoubleClick:!1,rowHeight:48,displayDateFormat:"L",resources:[{id:1}],columns:[]}}static get delayable(){return{fillFromTaskStore:100}}construct(e={}){const n=this;n.startDateLabel=document.createElement("label"),n.startDateLabel.className="b-timeline-startdate",n.endDateLabel=document.createElement("label"),n.endDateLabel.className="b-timeline-enddate";let r=!0;if("project"in e){if(!e.project)throw new Error("You need to configure the Timeline with a Project");e.project instanceof zS&&(n.taskStore=e.project.eventStore,e.project.isInitialCommitPerformed||(r=!1,e.project.ion({name:"initialCommit",refresh({isInitialCommit:e}){e&&(n.fillFromTaskStore(),n.detachListeners("initialCommit"))},thisObj:n})),delete e.project)}e.features=Et.assign({cellEdit:!1,cellMenu:!1,columnAutoWidth:!1,columnLines:!1,columnPicker:!1,columnReorder:!1,columnResize:!1,contextMenu:!1,eventContextMenu:!1,eventDrag:!1,eventDragCreate:!1,eventEdit:!1,eventFilter:!1,eventMenu:!1,eventResize:!1,eventTooltip:!1,group:!1,headerMenu:!1,regionResize:!1,scheduleContextMenu:!1,scheduleMenu:!1,scheduleTooltip:!1,sort:!1,timeAxisHeaderMenu:!1,timeRanges:!1},e.features),super.construct(e),n.features.timeRanges&&(n.features.timeRanges.store=new yi),r&&n.fillFromTaskStore.now(),n.taskStore.ion({refreshPreCommit:n.fillFromTaskStore,changePreCommit:n.onTaskStoreChange,thisObj:n}),n.ion({resize:n.onSizeChanged,thisObj:n}),n.bodyContainer.appendChild(n.startDateLabel),n.bodyContainer.appendChild(n.endDateLabel)}onSizeChanged({width:e,oldWidth:n}){const r=this,i=e!==n;i&&r.suspendRefresh(),r.updateRowHeight(),i&&(r.resumeRefresh(),r.fitTimeline())}updateRowHeight(){this.bodyContainer.isConnected&&(this.rowHeight=this.bodyContainer.offsetHeight)}fitTimeline(){this.eventStore.count>0&&(this.forceFit=!1,this.zoomToFit({leftMargin:50,rightMargin:50}),this.forceFit=!0),this.updateStartEndLabels()}updateStartEndLabels(){const e=this;e.startDateLabel.innerHTML=e.getFormattedDate(e.startDate),e.endDateLabel.innerHTML=e.getFormattedDate(e.endDate)}async onTaskStoreChange({action:e,record:n,records:r,changes:i,isCollapse:o}){const s=this,a=s.eventStore;let l;switch(e){case"add":r.forEach((e=>{e.showInTimeline&&(a.add(s.cloneTask(e)),l=!0)}));break;case"remove":o||r.forEach((e=>{e.showInTimeline&&(a.remove(e.id),l=!0)}));break;case"removeall":s.fillFromTaskStore.now();break;case"update":{const e=n;if(i.showInTimeline){if(e.showInTimeline)a.add(s.cloneTask(e));else{const n=a.getById(e.id);n&&a.remove(n)}l=!0}else if(e.showInTimeline){const n=a.getById(e.id);n&&(n.set(s.cloneTask(e)),l=!0)}break}}l&&s.fitTimeline()}cloneTask(e){return{id:e.id,resourceId:1,name:e.name,startDate:e.startDate,endDate:e.endDate,cls:e.cls}}render(){super.render(...arguments),this.updateRowHeight()}async fillFromTaskStore(){const e=this,n=[];e.taskStore.traverse((r=>{r.showInTimeline&&r.isScheduled&&n.push(e.cloneTask(r))})),e.events=n,await e.project.commitAsync(),e.isDestroyed||e.fitTimeline()}onLocaleChange(){this.updateStartEndLabels(),super.onLocaleChange()}};wD.initClass(),wD._$name="Timeline";var CD=[],SD={remove:1,add:2,update:3},xD={TaskModel:1,DependencyModel:2,AssignmentModel:3,ProjectModel:4},describePosition=({parent:e,index:n})=>`${e.name}[${n}]`,DD={AssignmentModel:"Assignment",DependencyModel:"Dependency"},ED=class extends iu{};__publicField(ED,"fields",[{name:"description",type:"string"},{name:"occurredAt",type:"date"},{name:"versionModel"},{name:"transactionModel"},{name:"propertyUpdate"},{name:"action"}]);var RD=class extends jh{constructor(){super(...arguments),__publicField(this,"_transactionChanges",[]),__publicField(this,"_versionChanges",[]),__publicField(this,"comparingRowCls",`b-${RD.type}-comparing`)}static get properties(){return{_rowsByUnderlyingRecord:new WeakMap,_expandedById:new Map}}construct(e){super.construct({...e,features:Et.merge({},RD.configurable.features,e.features)})}afterConstruct(){if(!this.project)throw new Error(`${RD.$name} requires the project config.`);this.refreshGrid()}updateDateFormat(e){const n=this.columns.get("occurredAt");n&&(n.format=e)}updateProject(e){const n=this;n.detachListeners("storeChange"),n._versionStore=e.getCrudStore("versions"),n._transactionStore=e.getCrudStore("changelogs"),n._versionStore.ion({name:"storeChange",change:n.onVersionStoreChange,thisObj:n}),n._transactionStore.ion({name:"storeChange",change:n.onTransactionStoreChange,thisObj:n})}updateShowNamedVersionsOnly(){this.isPainted&&this.refreshGrid()}updateShowUnattachedTransactions(){this.isPainted&&this.refreshGrid()}updateShowVersions(){this.isPainted&&this.refreshGrid()}updateComparingVersionId(e,n){const[r,i]=[n,e].map((e=>this.store.getById(`v-${e}`)));r&&(r.cls="",r.iconCls="b-icon b-icon-version"),i&&(i.cls=this.comparingRowCls,i.iconCls="b-icon b-icon-compare")}onVersionStoreChange({action:e,records:n}){this._versionChanges.push({action:e,records:n}),this.processUpdates()}onTransactionStoreChange({action:e,records:n}){this._transactionChanges.push({action:e,records:n}),this.processUpdates()}processUpdates(){const e=this,n=oe.unique(e._versionChanges.flatMap((({records:e})=>e))),r=new Set(n.map((e=>String(e.id)))),i=oe.unique(e._transactionChanges.flatMap((({records:e})=>e)).concat(0===n.length?[]:e._transactionStore.query((e=>r.has(e.versionId)))));for(const o of i)o.versionId&&!r.has(o.versionId)&&(n.push(e._versionStore.getById(o.versionId)),r.add(o.versionId));e.replaceRows(oe.unique(n),i),e._transactionChanges=[],e._versionChanges=[]}replaceRows(e,n){var r;const i=this,{showNamedVersionsOnly:o,showUnattachedTransactions:s,store:a}=i,l=new Set,c=oe.groupBy(n,"versionId"),d=n.concat(e),u=o?e.filter((e=>null!=e.name)):e;for(const e of d)for(const n of null!=(r=i._rowsByUnderlyingRecord.get(e))?r:CD)l.add(n);i.suspendRefresh(),a.remove(Array.from(l));for(const e of u){const n=a.add(i.getGridRows(e,c[e.id]));i._rowsByUnderlyingRecord.set(e,n)}if(s)for(const e of n.filter((e=>null==e.versionId))){const n=a.add(i.getGridRows(null,[e]));i._rowsByUnderlyingRecord.set(e,n)}i.resumeRefresh(),a.sort(a.sorters)}refreshGrid(){this.replaceRows(this._versionStore.records,this._transactionStore.records)}getGridRows(e,n){const r=this,{showVersions:i,comparingVersionId:o}=r,s=(null==n?void 0:n.map((n=>{var i;const o=`t-${n.id}`;return{id:o,expanded:Boolean(null==(i=r._expandedById)?void 0:i.get(o)),description:n.description,occurredAt:n.occurredAt,transactionModel:n,rootVersionModel:e,children:n.actions.map(((i,o)=>{var s,a,l;const c=`a-${n.id}-${o}`;return{id:c,expanded:Boolean(null==(s=r._expandedById)?void 0:s.get(c)),action:i,rootVersionModel:e,children:null!=(l=null==(a=i.propertyUpdates)?void 0:a.map((n=>({rootVersionModel:e,propertyUpdate:n}))))?l:[]}}))}})))||[],a=`v-${null==e?void 0:e.id}`;return e&&i?{id:a,expanded:Boolean(r._expandedById.get(a)),description:e.description,occurredAt:e.savedAt,children:s,versionModel:e,iconCls:"b-icon-version",cls:e.id===o?r.comparingRowCls:null}:s}renderDescription(e){const{record:n}=e;return n.propertyUpdate?this.renderPropertyUpdate(n.propertyUpdate):n.action?this.renderActionDescription(n.action):n.description}renderPropertyUpdate(e){const n=RD.type,{property:r,before:i,after:o}=e;return{children:[{tag:"div",class:`b-${n}-property-update-desc`,children:[{tag:"span",class:`b-${n}-property-name`,html:`${this.formatPropertyName(r)}`},this.renderPropertyValue(i,"before"),{tag:"i",class:"b-icon b-icon-right"},this.renderPropertyValue(o,"after")]}]}}renderPropertyValue(e,n){var r;return{tag:"span",class:[`b-${RD.type}-property-${n}`,null==e&&`b-${RD.type}-empty-value`],html:null==e?this.L("L{Versions.nullValue}"):null!=(r=this.formatValueString(e))?r:""}}formatValueString(e){return Ct.isDate(e)?Ct.format(e,this.dateFormat):"number"==typeof e?e.toFixed(2):e}formatPropertyName(e){return w.separate(e)}getAssignmentTextTokens(e){return{event:e.event.name,resource:e.resource.name}}getDependencyTextTokens(e){return{from:e.fromTask.name,to:e.toTask.name}}renderActionDescription(e){var n;const r=this,{actionType:i,entity:o}=e;let s,a={type:r.L("L{Versions.entityNames}")[o.type],name:o.name};return"move"===i&&(a.from=describePosition(e.from),a.to=describePosition(e.to)),s=r.L(`L{Versions.${i}${null!=(n=DD[o.type])?n:"Entity"}}`),"DependencyModel"===o.type?a=r.getDependencyTextTokens(o):"AssignmentModel"===o.type&&(a=r.getAssignmentTextTokens(o)),s=s.replace(/\{(\w+)\}/g,((e,n)=>{var r;return null!=(r=a[n])?r:n})),e.isUser&&(s=`[!] ${s}`),r.renderHighlightedTextElements(w.capitalize(s),a)}static sortActionRows(e,n){if(e.parent===n.parent&&e.action&&n.action){const r=Boolean(e.action.isUser),i=Boolean(n.action.isUser),{actionType:o,entity:{type:s}}=e.action,{actionType:a,entity:{type:l}}=n.action;return r!==i?r?-1:1:Math.sign(SD[o]-SD[a])||Math.sign(xD[s]-xD[l])||0}return 0}triggerRestore(e){this.trigger("restore",{version:e})}triggerCompare(e){this.trigger("compare",{version:e})}triggerStopCompare(e){this.trigger("stopCompare")}renderHighlightedTextElements(e){const n=this.constructor.type;return{children:[{tag:"span",class:`b-${n}-highlighted-text`,children:e.split(/\*\*/g).reduce(((e,r)=>(e.children.push({tag:"span",text:r,class:e.isEntity?`b-${n}-highlighted-entity`:null}),e.isEntity=!e.isEntity,e)),{children:[],isEntity:!1}).children}]}}},kD=RD;__publicField(kD,"$name","VersionGrid"),__publicField(kD,"type","versiongrid"),__publicField(kD,"configurable",{store:{tree:!0,modelClass:ED,sorters:[{field:"occurredAt",ascending:!1},RD.sortActionRows],reapplySortersOnAdd:!0},project:null,showUnattachedTransactions:!0,showNamedVersionsOnly:!1,showVersions:!0,comparingVersionId:null,flex:0,features:{group:{field:"id"},cellEdit:{continueEditingOnCellClick:!1,editNextOnEnterPress:!1},cellMenu:{items:{removeRow:!1,cut:!1,copy:!1,paste:!1,renameButton:{text:"L{VersionGrid.rename}",icon:"b-icon b-icon-edit",onItem:({record:e,source:n})=>{n.startEditing({id:e.id,column:n.columns.get("description")})}},restoreButton:{text:"L{VersionGrid.restore}",icon:"b-icon b-icon-undo",onItem:({record:e,source:n})=>{n.triggerRestore(e.versionModel)}},compareButton:{text:"L{VersionGrid.compare}",icon:"b-icon b-icon-compare",onItem:({record:e,source:n})=>{n.triggerCompare(e.versionModel)}},stopComparingButton:{text:"L{VersionGrid.stopComparing}",onItem:({record:e,source:n})=>{n.triggerStopCompare()}}}},rowCopyPaste:!1},columns:[{type:"tree",text:"L{VersionGrid.description}",field:"description",flex:4,groupable:!1,renderer:({grid:e,...n})=>e.renderDescription({grid:e,...n}),autoHeight:!0},{text:"L{VersionGrid.occurredAt}",field:"occurredAt",type:"date",flex:1,groupable:!1}],dateFormat:"M/D/YY h:mm a",internalListeners:{beforeCellEditStart({editorContext:{column:e,record:n}}){if("description"!==e.field||!n.versionModel)return!1},finishCellEdit({editorContext:{record:e,value:n}}){e.versionModel.name=null!=n&&n.trim()?n:null},cellMenuBeforeShow:({source:e,record:n,items:r})=>(r.stopComparingButton.disabled=!e.comparingVersionId,Boolean(n.versionModel)),toggleNode({record:e,collapse:n}){this._expandedById.set(e.id,!n)}}}),__publicField(kD,"delayable",{processUpdates:{type:"raf",cancelOutstanding:!0}}),kD.initClass(),kD._$name="VersionGrid"},"./config/environment.json":e=>{"use strict";e.exports=JSON.parse('{"debug":false,"testing":false}')}},a={};function __webpack_require__(e){var n=a[e];if(void 0!==n)return n.exports;var r=a[e]={id:e,loaded:!1,exports:{}};return s[e](r,r.exports,__webpack_require__),r.loaded=!0,r.exports}__webpack_require__.m=s,void 0!==s&&(__webpack_require__.m=__webpack_require__.m||s,__webpack_require__.c=__webpack_require__.c||a),e=[],__webpack_require__.O=(n,r,i,o)=>{if(!r){var s=1/0;for(d=0;d<e.length;d++){for(var[r,i,o]=e[d],a=!0,l=0;l<r.length;l++)(!1&o||s>=o)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](r[l])))?r.splice(l--,1):(a=!1,o<s&&(s=o));if(a){e.splice(d--,1);var c=i();void 0!==c&&(n=c)}}return n}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[r,i,o]},__webpack_require__.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(n,{a:n}),n},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,i){if(1&i&&(e=this(e)),8&i)return e;if("object"==typeof e&&e){if(4&i&&e.__esModule)return e;if(16&i&&"function"==typeof e.then)return e}var o=Object.create(null);__webpack_require__.r(o);var s={};n=n||[null,r({}),r([]),r(r)];for(var a=2&i&&e;"object"==typeof a&&!~n.indexOf(a);a=r(a))Object.getOwnPropertyNames(a).forEach((n=>s[n]=()=>e[n]));return s.default=()=>e,__webpack_require__.d(o,s),o},__webpack_require__.d=(e,n)=>{for(var r in n)__webpack_require__.o(n,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((n,r)=>(__webpack_require__.f[r](e,n),n)),[])),__webpack_require__.u=e=>e+"."+{5407:"b67779e51a3696f1d558",70063:"7105144137ff32074018",85558:"bf175d1a3dc7fbb0845e"}[e]+".chunk.js",__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),__webpack_require__.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),i={},o="screen:",__webpack_require__.l=(e,n,r,s)=>{if(i[e])i[e].push(n);else{var a,l;if(void 0!==r)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==o+r){a=u;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,__webpack_require__.nc&&a.setAttribute("nonce",__webpack_require__.nc),a.setAttribute("data-webpack",o+r),a.src=e),i[e]=[n];var onScriptComplete=(n,r)=>{a.onerror=a.onload=null,clearTimeout(h);var o=i[e];if(delete i[e],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((e=>e(r))),n)return n(r)},h=setTimeout(onScriptComplete.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=onScriptComplete.bind(null,a.onerror),a.onload=onScriptComplete.bind(null,a.onload),l&&document.head.appendChild(a)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;__webpack_require__.g.importScripts&&(e=__webpack_require__.g.location+"");var n=__webpack_require__.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var r=n.getElementsByTagName("script");if(r.length)for(var i=r.length-1;i>-1&&!e;)e=r[i--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=e})(),(()=>{var e={44441:0};__webpack_require__.f.j=(n,r)=>{var i=__webpack_require__.o(e,n)?e[n]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise(((r,o)=>i=e[n]=[r,o]));r.push(i[2]=o);var s=__webpack_require__.p+__webpack_require__.u(n),a=new Error;__webpack_require__.l(s,(r=>{if(__webpack_require__.o(e,n)&&(0!==(i=e[n])&&(e[n]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;a.message="Loading chunk "+n+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,i[1](a)}}),"chunk-"+n,n)}},__webpack_require__.O.j=n=>0===e[n];var webpackJsonpCallback=(n,r)=>{var i,o,[s,a,l]=r,c=0;if(s.some((n=>0!==e[n]))){for(i in a)__webpack_require__.o(a,i)&&(__webpack_require__.m[i]=a[i]);if(l)var d=l(__webpack_require__)}for(n&&n(r);c<s.length;c++)o=s[c],__webpack_require__.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return __webpack_require__.O(d)},n=self.webpackChunkscreen=self.webpackChunkscreen||[];n.forEach(webpackJsonpCallback.bind(null,0)),n.push=webpackJsonpCallback.bind(null,n.push.bind(n))})(),__webpack_require__.nc=void 0,__webpack_require__.O(void 0,[11216],(()=>__webpack_require__("./node_modules/aurelia-webpack-plugin/runtime/empty-entry.js"))),__webpack_require__.O(void 0,[11216],(()=>__webpack_require__("./node_modules/aurelia-webpack-plugin/runtime/pal-loader-entry.js"))),__webpack_require__.O(void 0,[11216],(()=>__webpack_require__("main")));var l=__webpack_require__.O(void 0,[11216],(()=>__webpack_require__("screens/FS/FS300300/FS300300")));l=__webpack_require__.O(l)})();